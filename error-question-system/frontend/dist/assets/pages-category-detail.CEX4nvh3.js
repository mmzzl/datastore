import{_ as t,c as a,w as s,O as e,P as o,i,Q as l,R as u,s as c,S as n,M as d,o as f,e as r,j as y,t as g,h as p,k as _,A as m,F as q,B as h,N as C}from"./index-C1huu0wr.js";import{g as k,a as D,f as v}from"./index.C6AeHhaN.js";const x=t({setup(){const t=u(),a=l(),s=n(),i=e({}),d=e([]),f=e(0),r=e(!0);return o(()=>{(async()=>{try{const s=a.params.id,e=await t.dispatch("categories/fetchCategoryById",s);i.value=e;const{questions:o,total:l}=await t.dispatch("questions/fetchQuestions",{categoryId:s,page:1,limit:20});d.value=o,f.value=l}catch(s){c({title:"加载失败",icon:"none"})}finally{r.value=!1}})()}),{category:i,questions:d,questionCount:f,loading:r,formatDate:v,getDifficultyText:D,getDifficultyColor:k,goToQuestionDetail:t=>{s.push(`/questions/${t}`)},goToAddQuestion:()=>{s.push({path:"/questions/add",query:{categoryId:i.value.id,categoryName:i.value.name}})}}}},[["render",function(t,e,o,l,u,c){const n=i,k=p,D=d("u-button");return f(),a(n,{class:"category-detail"},{default:s(()=>[r(n,{class:"header"},{default:s(()=>[r(n,{class:"title"},{default:s(()=>[y(g(l.category.name),1)]),_:1}),r(n,{class:"stats"},{default:s(()=>[r(k,{class:"count"},{default:s(()=>[y(g(l.questionCount)+" 道错题",1)]),_:1})]),_:1})]),_:1}),r(n,{class:"content"},{default:s(()=>[l.category.description?(f(),a(n,{key:0,class:"description"},{default:s(()=>[y(g(l.category.description),1)]),_:1})):_("",!0),r(n,{class:"question-list"},{default:s(()=>[(f(!0),m(q,null,h(l.questions,t=>(f(),a(n,{class:"question-item",key:t.id,onClick:a=>l.goToQuestionDetail(t.id)},{default:s(()=>[r(n,{class:"question-title"},{default:s(()=>[y(g(t.title),1)]),_:2},1024),r(n,{class:"question-meta"},{default:s(()=>[r(k,{class:"difficulty",style:C({color:l.getDifficultyColor(t.difficulty)})},{default:s(()=>[y(g(l.getDifficultyText(t.difficulty)),1)]),_:2},1032,["style"]),r(k,{class:"date"},{default:s(()=>[y(g(l.formatDate(t.createdAt)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),0===l.questions.length?(f(),a(n,{key:0,class:"empty"},{default:s(()=>[y(" 该分类下暂无错题 ")]),_:1})):_("",!0)]),_:1})]),_:1}),r(n,{class:"footer"},{default:s(()=>[r(D,{type:"primary",text:"添加错题",onClick:l.goToAddQuestion},null,8,["onClick"])]),_:1})]),_:1})}],["__scopeId","data-v-76698716"]]);export{x as default};
