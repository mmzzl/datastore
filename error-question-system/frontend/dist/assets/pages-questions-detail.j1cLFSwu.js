import{_ as t,m as e,L as s,c as a,w as n,E as i,s as l,D as o,a as u,n as c,i as d,M as r,o as f,e as g,h as w,j as h,k as m,t as _,l as y,A as q,F as b,B as k,f as C,K as A,u as x}from"./index-C1huu0wr.js";const S=t({data:()=>({questionId:"",question:{},myAnswer:null,isLoading:!0,showAnswer:!1,showSolution:!1,answerContent:"",isSubmitting:!1}),computed:{...s("questions",["getQuestionById","getMyAnswerByQuestionId"])},onLoad(t){t.id?(this.questionId=t.id,this.loadQuestionDetail()):(l({title:"å‚æ•°é”™è¯¯",icon:"none"}),setTimeout(()=>{o()},1500))},methods:{...e("questions",["getQuestionDetail","submitMyAnswer","deleteQuestion","shareQuestion"]),async loadQuestionDetail(){try{await this.getQuestionDetail(this.questionId),this.question=this.getQuestionById(this.questionId),this.myAnswer=this.getMyAnswerByQuestionId(this.questionId)}catch(t){console.error("åŠ è½½é”™é¢˜è¯¦æƒ…å¤±è´¥:",t),l({title:"åŠ è½½å¤±è´¥",icon:"none"}),setTimeout(()=>{o()},1500)}finally{this.isLoading=!1}},toggleAnswer(){this.showAnswer=!this.showAnswer},toggleSolution(){this.showSolution=!this.showSolution},async submitAnswer(){if(this.answerContent.trim()){this.isSubmitting=!0;try{await this.submitMyAnswer({questionId:this.questionId,content:this.answerContent.trim()}),l({title:"æäº¤æˆåŠŸ",icon:"success"}),await this.loadQuestionDetail()}catch(t){console.error("æäº¤è§£ç­”å¤±è´¥:",t),l({title:t.message||"æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}finally{this.isSubmitting=!1}}else l({title:"è¯·è¾“å…¥è§£ç­”å†…å®¹",icon:"none"})},editQuestion(){c({url:`/pages/questions/edit?id=${this.questionId}`})},confirmDelete(){u({title:"æç¤º",content:"ç¡®å®šè¦åˆ é™¤è¿™é“é”™é¢˜å—ï¼Ÿ",success:async t=>{t.confirm&&this.deleteQuestion()}})},async deleteQuestion(){try{await this.deleteQuestion(this.questionId),l({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),setTimeout(()=>{o()},1500)}catch(t){console.error("åˆ é™¤é”™é¢˜å¤±è´¥:",t),l({title:t.message||"åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}},shareQuestion(){try{this.shareQuestion(this.questionId),l({title:"åˆ†äº«æˆåŠŸ",icon:"success"})}catch(t){console.error("åˆ†äº«é”™é¢˜å¤±è´¥:",t),l({title:t.message||"åˆ†äº«å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}},previewImage(t,e){i({current:e,urls:t})},getDifficultyText:t=>({1:"ç®€å•",2:"ä¸­ç­‰",3:"å›°éš¾"}[t]||"æœªçŸ¥"),getDifficultyClass:t=>({1:"easy",2:"medium",3:"hard"}[t]||""),formatDate(t){if(!t)return"";const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}}},[["render",function(t,e,s,i,l,o){const u=r("u-loading-icon"),c=w,S=d,Q=C,I=A,p=x;return f(),a(S,{class:"question-detail-page"},{default:n(()=>[l.isLoading?(f(),a(S,{key:0,class:"loading-container"},{default:n(()=>[g(u,{mode:"flower",size:"40"}),g(c,{class:"loading-text"},{default:n(()=>[h("åŠ è½½ä¸­...")]),_:1})]),_:1})):(f(),a(S,{key:1,class:"detail-container"},{default:n(()=>[g(S,{class:"question-card"},{default:n(()=>[g(S,{class:"question-header"},{default:n(()=>[g(S,{class:"question-title"},{default:n(()=>[h(_(l.question.title),1)]),_:1}),g(S,{class:"question-meta"},{default:n(()=>[g(S,{class:"category-tag"},{default:n(()=>[h(_(l.question.categoryName),1)]),_:1}),g(S,{class:y(["difficulty-tag",o.getDifficultyClass(l.question.difficulty)])},{default:n(()=>[h(_(o.getDifficultyText(l.question.difficulty)),1)]),_:1},8,["class"])]),_:1})]),_:1}),g(S,{class:"question-content"},{default:n(()=>[g(c,{class:"content-text"},{default:n(()=>[h(_(l.question.content),1)]),_:1}),l.question.images&&l.question.images.length>0?(f(),a(S,{key:0,class:"image-list"},{default:n(()=>[(f(!0),q(b,null,k(l.question.images,(t,e)=>(f(),a(Q,{class:"question-image",key:e,src:t,mode:"widthFix",onClick:t=>o.previewImage(l.question.images,e)},null,8,["src","onClick"]))),128))]),_:1})):m("",!0)]),_:1}),l.question.tags&&l.question.tags.length>0?(f(),a(S,{key:0,class:"tag-list"},{default:n(()=>[(f(!0),q(b,null,k(l.question.tags,(t,e)=>(f(),a(S,{class:"tag-item",key:e},{default:n(()=>[h(_(t),1)]),_:2},1024))),128))]),_:1})):m("",!0)]),_:1}),g(S,{class:"answer-card"},{default:n(()=>[g(S,{class:"card-title"},{default:n(()=>[g(c,{class:"title-text"},{default:n(()=>[h("æ­£ç¡®ç­”æ¡ˆ")]),_:1}),g(S,{class:"toggle-btn",onClick:o.toggleAnswer},{default:n(()=>[g(c,{class:"toggle-text"},{default:n(()=>[h(_(l.showAnswer?"éšè—":"æ˜¾ç¤º")+"ç­”æ¡ˆ",1)]),_:1}),g(c,{class:"toggle-icon"},{default:n(()=>[h(_(l.showAnswer?"â–²":"â–¼"),1)]),_:1})]),_:1},8,["onClick"])]),_:1}),l.showAnswer?(f(),a(S,{key:0,class:"answer-content"},{default:n(()=>[g(c,{class:"answer-text"},{default:n(()=>[h(_(l.question.answer),1)]),_:1})]),_:1})):m("",!0)]),_:1}),g(S,{class:"solution-card"},{default:n(()=>[g(S,{class:"card-title"},{default:n(()=>[g(c,{class:"title-text"},{default:n(()=>[h("è§£é¢˜æ€è·¯")]),_:1}),g(S,{class:"toggle-btn",onClick:o.toggleSolution},{default:n(()=>[g(c,{class:"toggle-text"},{default:n(()=>[h(_(l.showSolution?"éšè—":"æ˜¾ç¤º")+"æ€è·¯",1)]),_:1}),g(c,{class:"toggle-icon"},{default:n(()=>[h(_(l.showSolution?"â–²":"â–¼"),1)]),_:1})]),_:1},8,["onClick"])]),_:1}),l.showSolution?(f(),a(S,{key:0,class:"solution-content"},{default:n(()=>[g(c,{class:"solution-text"},{default:n(()=>[h(_(l.question.solution),1)]),_:1})]),_:1})):m("",!0)]),_:1}),l.myAnswer?(f(),a(S,{key:0,class:"my-answer-card"},{default:n(()=>[g(S,{class:"card-title"},{default:n(()=>[g(c,{class:"title-text"},{default:n(()=>[h("æˆ‘çš„è§£ç­”")]),_:1}),g(S,{class:y(["answer-status",l.myAnswer.isCorrect?"correct":"incorrect"])},{default:n(()=>[h(_(l.myAnswer.isCorrect?"æ­£ç¡®":"é”™è¯¯"),1)]),_:1},8,["class"])]),_:1}),g(S,{class:"my-answer-content"},{default:n(()=>[g(c,{class:"answer-text"},{default:n(()=>[h(_(l.myAnswer.content),1)]),_:1}),g(S,{class:"answer-time"},{default:n(()=>[h("ç­”é¢˜æ—¶é—´ï¼š"+_(o.formatDate(l.myAnswer.createdAt)),1)]),_:1})]),_:1})]),_:1})):(f(),a(S,{key:1,class:"add-answer-card"},{default:n(()=>[g(S,{class:"card-title"},{default:n(()=>[g(c,{class:"title-text"},{default:n(()=>[h("æ·»åŠ æˆ‘çš„è§£ç­”")]),_:1})]),_:1}),g(S,{class:"answer-form"},{default:n(()=>[g(I,{class:"answer-input",placeholder:"è¯·è¾“å…¥ä½ çš„è§£ç­”...",modelValue:l.answerContent,"onUpdate:modelValue":e[0]||(e[0]=t=>l.answerContent=t),maxlength:"1000"},null,8,["modelValue"]),g(S,{class:"text-counter"},{default:n(()=>[h(_(l.answerContent.length)+"/1000",1)]),_:1}),g(p,{class:"submit-btn",onClick:o.submitAnswer,disabled:l.isSubmitting},{default:n(()=>[h(_(l.isSubmitting?"æäº¤ä¸­...":"æäº¤è§£ç­”"),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})),g(S,{class:"action-buttons"},{default:n(()=>[g(p,{class:"action-btn edit-btn",onClick:o.editQuestion},{default:n(()=>[g(c,{class:"btn-icon"},{default:n(()=>[h("âœï¸")]),_:1}),g(c,{class:"btn-text"},{default:n(()=>[h("ç¼–è¾‘")]),_:1})]),_:1},8,["onClick"]),g(p,{class:"action-btn delete-btn",onClick:o.deleteQuestion},{default:n(()=>[g(c,{class:"btn-icon"},{default:n(()=>[h("ðŸ—‘ï¸")]),_:1}),g(c,{class:"btn-text"},{default:n(()=>[h("åˆ é™¤")]),_:1})]),_:1},8,["onClick"]),g(p,{class:"action-btn share-btn",onClick:o.shareQuestion},{default:n(()=>[g(c,{class:"btn-icon"},{default:n(()=>[h("ðŸ“¤")]),_:1}),g(c,{class:"btn-text"},{default:n(()=>[h("åˆ†äº«")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}))]),_:1})}],["__scopeId","data-v-6cb378be"]]);export{S as default};
