import{_ as s,m as a,c as e,w as o,s as r,n as t,a as l,b as n,r as i,d,g as c,i as m,o as u,e as f,f as g,h,j as p,k as w,I as _,l as k,t as C,p as x,q as D,u as b}from"./index-C1huu0wr.js";import{_ as L}from"./logo.alnUBg6O.js";const v=s({data:()=>({formData:{username:"",password:"",rememberMe:!1},errors:{username:"",password:""},showPassword:!1,isLoading:!1}),onLoad(){c("token")&&d({url:"/pages/index/index"});const s=c("savedUsername");s&&(this.formData.username=s,this.formData.rememberMe=!0)},methods:{...a(["login"]),togglePassword(){this.showPassword=!this.showPassword},handleRememberChange(s){this.formData.rememberMe=s.detail.value.length>0},validateForm(){let s=!0;return this.errors={username:"",password:""},this.formData.username.trim()||(this.errors.username="请输入用户名或手机号",s=!1),this.formData.password.trim()?this.formData.password.length<6&&(this.errors.password="密码长度不能少于6位",s=!1):(this.errors.password="请输入密码",s=!1),s},async handleLogin(){if(this.validateForm()){this.isLoading=!0;try{await this.login({username:this.formData.username,password:this.formData.password}),this.formData.rememberMe?n("savedUsername",this.formData.username):i("savedUsername"),d({url:"/pages/index/index"}),r({title:"登录成功",icon:"success"})}catch(s){console.error("登录失败:",s),r({title:s.message||"登录失败，请检查用户名和密码",icon:"none"})}finally{this.isLoading=!1}}},handleForgotPassword(){l({title:"忘记密码",content:"请联系客服重置密码",showCancel:!1})},navigateToRegister(){t({url:"/pages/register/index"})},handleWechatLogin(){r({title:"微信登录功能开发中",icon:"none"})},handleQQLogin(){r({title:"QQ登录功能开发中",icon:"none"})}}},[["render",function(s,a,r,t,l,n){const i=g,d=h,c=m,v=_,P=D,y=x,Q=b;return u(),e(c,{class:"login-page"},{default:o(()=>[f(c,{class:"login-container"},{default:o(()=>[f(c,{class:"login-header"},{default:o(()=>[f(i,{class:"logo",src:L,mode:"aspectFit"}),f(d,{class:"app-name"},{default:o(()=>[p("智能错题本")]),_:1}),f(d,{class:"app-desc"},{default:o(()=>[p("高效学习，精准提升")]),_:1})]),_:1}),f(c,{class:"login-form"},{default:o(()=>[f(c,{class:"form-item"},{default:o(()=>[f(v,{class:k(["form-input",{error:l.errors.username}]),type:"text",placeholder:"请输入用户名/手机号",modelValue:l.formData.username,"onUpdate:modelValue":a[0]||(a[0]=s=>l.formData.username=s)},null,8,["modelValue","class"]),l.errors.username?(u(),e(d,{key:0,class:"error-text"},{default:o(()=>[p(C(l.errors.username),1)]),_:1})):w("",!0)]),_:1}),f(c,{class:"form-item"},{default:o(()=>[f(v,{class:k(["form-input",{error:l.errors.password}]),type:l.showPassword?"text":"password",placeholder:"请输入密码",modelValue:l.formData.password,"onUpdate:modelValue":a[1]||(a[1]=s=>l.formData.password=s)},null,8,["type","modelValue","class"]),f(d,{class:"toggle-password",onClick:n.togglePassword},{default:o(()=>[p(C(l.showPassword?"隐藏":"显示"),1)]),_:1},8,["onClick"]),l.errors.password?(u(),e(d,{key:0,class:"error-text"},{default:o(()=>[p(C(l.errors.password),1)]),_:1})):w("",!0)]),_:1}),f(c,{class:"form-options"},{default:o(()=>[f(y,{class:"checkbox-container"},{default:o(()=>[f(P,{checked:l.formData.rememberMe,onChange:n.handleRememberChange},null,8,["checked","onChange"]),f(d,{class:"checkbox-text"},{default:o(()=>[p("记住我")]),_:1})]),_:1}),f(d,{class:"forgot-password",onClick:n.handleForgotPassword},{default:o(()=>[p("忘记密码？")]),_:1},8,["onClick"])]),_:1}),f(Q,{class:"login-btn",onClick:n.handleLogin,disabled:l.isLoading},{default:o(()=>[p(C(l.isLoading?"登录中...":"登录"),1)]),_:1},8,["onClick","disabled"]),f(c,{class:"register-link"},{default:o(()=>[f(d,null,{default:o(()=>[p("还没有账号？")]),_:1}),f(d,{class:"link-text",onClick:n.navigateToRegister},{default:o(()=>[p("立即注册")]),_:1},8,["onClick"])]),_:1})]),_:1}),f(c,{class:"login-footer"},{default:o(()=>[f(d,{class:"footer-text"},{default:o(()=>[p("其他登录方式")]),_:1}),f(c,{class:"other-login"},{default:o(()=>[f(c,{class:"login-option",onClick:n.handleWechatLogin},{default:o(()=>[f(i,{class:"login-icon",src:"/static/images/wechat.png",mode:"aspectFit"}),f(d,null,{default:o(()=>[p("微信")]),_:1})]),_:1},8,["onClick"]),f(c,{class:"login-option",onClick:n.handleQQLogin},{default:o(()=>[f(i,{class:"login-icon",src:"/static/images/qq.png",mode:"aspectFit"}),f(d,null,{default:o(()=>[p("QQ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-5d16d823"]]);export{v as default};
