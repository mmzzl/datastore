import{_ as e,m as t,x as a,c as s,w as o,n as l,s as i,z as n,i as r,o as d,e as c,I as u,h,j as g,t as f,A as C,k as m,F as y,B as _,l as w,u as S,C as p}from"./index-C1huu0wr.js";const k=e({data:()=>({searchKeyword:"",selectedCategory:{id:"",name:""},selectedCategoryIndex:0,currentSort:0,currentStatus:0,sortOptions:[{id:"newest",name:"æœ€æ–°"},{id:"oldest",name:"æœ€æ—§"},{id:"difficulty",name:"éš¾åº¦"}],statusOptions:[{id:"all",name:"å…¨éƒ¨çŠ¶æ€"},{id:"unsolved",name:"æœªè§£å†³"},{id:"solved",name:"å·²è§£å†³"}],categoryOptions:[{id:"",name:"å…¨éƒ¨åˆ†ç±»"}]}),computed:{...a("questions",["questions"]),...a("categories",["categories"]),filteredQuestions(){let e=[...this.questions];if(this.selectedCategory.id&&(e=e.filter(e=>e.categoryId===this.selectedCategory.id)),1===this.currentStatus?e=e.filter(e=>"solved"!==e.status):2===this.currentStatus&&(e=e.filter(e=>"solved"===e.status)),this.searchKeyword.trim()){const t=this.searchKeyword.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t))}return 0===this.currentSort?e.sort((e,t)=>t.createTime-e.createTime):1===this.currentSort?e.sort((e,t)=>e.createTime-t.createTime):2===this.currentSort&&e.sort((e,t)=>(t.difficulty||0)-(e.difficulty||0)),e}},onLoad(){this.loadQuestions(),this.loadCategories()},onShow(){this.loadQuestions()},onPullDownRefresh(){this.loadQuestions().then(()=>{n()})},methods:{...t("questions",["getQuestionList"]),...t("categories",["getCategoryList"]),async loadQuestions(){try{await this.getQuestionList()}catch(e){console.error("åŠ è½½é”™é¢˜åˆ—è¡¨å¤±è´¥:",e),i({title:"åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}},async loadCategories(){try{await this.getCategoryList(),this.categoryOptions=[{id:"",name:"å…¨éƒ¨åˆ†ç±»"},...this.categories.map(e=>({id:e.id,name:e.name}))]}catch(e){console.error("åŠ è½½åˆ†ç±»åˆ—è¡¨å¤±è´¥:",e)}},handleSearch(){},showCategoryPicker(){},showSortPicker(){},showStatusPicker(){},handleCategoryChange(e){this.selectedCategoryIndex=e.detail.value,this.selectedCategory=this.categoryOptions[this.selectedCategoryIndex]},handleSortChange(e){this.currentSort=e.detail.value},handleStatusChange(e){this.currentStatus=e.detail.value},getStatusClass:e=>"solved"===e?"status-solved":"reviewing"===e?"status-reviewing":"status-unsolved",getStatusText:e=>"solved"===e?"å·²è§£å†³":"reviewing"===e?"å¤ä¹ ä¸­":"æœªè§£å†³",formatDate(e){const t=new Date(e),a=(new Date).getTime()-t.getTime(),s=Math.floor(a/864e5);return 0===s?"ä»Šå¤©":1===s?"æ˜¨å¤©":s<7?`${s}å¤©å‰`:s<30?`${Math.floor(s/7)}å‘¨å‰`:`${t.getMonth()+1}æœˆ${t.getDate()}æ—¥`},navigateToDetail(e){l({url:`/pages/questions/detail?id=${e}`})},navigateToAdd(){l({url:"/pages/questions/add"})}}},[["render",function(e,t,a,l,i,n){const k=u,v=h,q=r,x=S,T=p;return d(),s(q,{class:"questions-list-page"},{default:o(()=>[c(q,{class:"search-bar"},{default:o(()=>[c(q,{class:"search-input-wrapper"},{default:o(()=>[c(k,{class:"search-input",placeholder:"æœç´¢é”™é¢˜...",modelValue:i.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchKeyword=e),onConfirm:n.handleSearch},null,8,["modelValue","onConfirm"]),c(v,{class:"search-icon",onClick:n.handleSearch},{default:o(()=>[g("ğŸ”")]),_:1},8,["onClick"])]),_:1})]),_:1}),c(q,{class:"filter-bar"},{default:o(()=>[c(q,{class:"filter-item",onClick:n.showCategoryPicker},{default:o(()=>[c(v,{class:"filter-text"},{default:o(()=>[g(f(i.selectedCategory.name||"å…¨éƒ¨åˆ†ç±»"),1)]),_:1}),c(v,{class:"filter-arrow"},{default:o(()=>[g("â–¼")]),_:1})]),_:1},8,["onClick"]),c(q,{class:"filter-item",onClick:n.showSortPicker},{default:o(()=>[c(v,{class:"filter-text"},{default:o(()=>[g(f(i.sortOptions[i.currentSort].name),1)]),_:1}),c(v,{class:"filter-arrow"},{default:o(()=>[g("â–¼")]),_:1})]),_:1},8,["onClick"]),c(q,{class:"filter-item",onClick:n.showStatusPicker},{default:o(()=>[c(v,{class:"filter-text"},{default:o(()=>[g(f(i.statusOptions[i.currentStatus].name),1)]),_:1}),c(v,{class:"filter-arrow"},{default:o(()=>[g("â–¼")]),_:1})]),_:1},8,["onClick"])]),_:1}),c(q,{class:"questions-list"},{default:o(()=>[(d(!0),C(y,null,_(n.filteredQuestions,(e,t)=>(d(),s(q,{class:"question-item",key:e.id,onClick:t=>n.navigateToDetail(e.id)},{default:o(()=>[c(q,{class:"question-header"},{default:o(()=>[c(v,{class:"question-title"},{default:o(()=>[g(f(e.title),1)]),_:2},1024),c(q,{class:w(["question-status",n.getStatusClass(e.status)])},{default:o(()=>[g(f(n.getStatusText(e.status)),1)]),_:2},1032,["class"])]),_:2},1024),c(q,{class:"question-content"},{default:o(()=>[c(v,{class:"question-text"},{default:o(()=>[g(f(e.content),1)]),_:2},1024)]),_:2},1024),c(q,{class:"question-footer"},{default:o(()=>[c(v,{class:"question-category"},{default:o(()=>[g(f(e.category),1)]),_:2},1024),c(v,{class:"question-date"},{default:o(()=>[g(f(n.formatDate(e.createTime)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),0===n.filteredQuestions.length?(d(),s(q,{key:0,class:"empty-state"},{default:o(()=>[c(v,{class:"empty-icon"},{default:o(()=>[g("ğŸ“š")]),_:1}),c(v,{class:"empty-text"},{default:o(()=>[g("æš‚æ— é”™é¢˜")]),_:1}),c(x,{class:"add-btn",onClick:n.navigateToAdd},{default:o(()=>[g("æ·»åŠ é”™é¢˜")]),_:1},8,["onClick"])]),_:1})):m("",!0)]),_:1}),c(q,{class:"add-button",onClick:n.navigateToAdd},{default:o(()=>[c(v,{class:"add-icon"},{default:o(()=>[g("+")]),_:1})]),_:1},8,["onClick"]),c(T,{mode:"selector",range:i.categoryOptions,"range-key":"name",onChange:n.handleCategoryChange,value:i.selectedCategoryIndex},{default:o(()=>[c(q)]),_:1},8,["range","onChange","value"]),c(T,{mode:"selector",range:i.sortOptions,"range-key":"name",onChange:n.handleSortChange,value:i.currentSort},{default:o(()=>[c(q)]),_:1},8,["range","onChange","value"]),c(T,{mode:"selector",range:i.statusOptions,"range-key":"name",onChange:n.handleStatusChange,value:i.currentStatus},{default:o(()=>[c(q)]),_:1},8,["range","onChange","value"])]),_:1})}],["__scopeId","data-v-42eda71e"]]);export{k as default};
