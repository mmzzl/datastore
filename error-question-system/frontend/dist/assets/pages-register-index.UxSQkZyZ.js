import{_ as e,m as s,c as r,w as o,a,v as t,s as n,i,o as l,e as d,f as m,h as c,j as f,k as h,I as u,l as p,t as w,u as g,p as C,q as D}from"./index-C1huu0wr.js";import{_ as y}from"./logo.alnUBg6O.js";const _=e({data:()=>({formData:{username:"",phone:"",verifyCode:"",password:"",confirmPassword:"",agreement:!1},errors:{username:"",phone:"",verifyCode:"",password:"",confirmPassword:"",agreement:""},showPassword:!1,showConfirmPassword:!1,isLoading:!1,isCountingDown:!1,countDown:60}),computed:{countDownText(){return this.isCountingDown?`${this.countDown}秒后重试`:"获取验证码"}},methods:{...s(["register"]),togglePassword(){this.showPassword=!this.showPassword},toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword},handleAgreementChange(e){this.formData.agreement=e.detail.value.length>0},async getVerifyCode(){if(this.formData.phone.trim())if(/^1[3-9]\d{9}$/.test(this.formData.phone)){this.errors.phone="";try{n({title:"验证码已发送",icon:"success"}),this.isCountingDown=!0,this.countDown=60;const e=setInterval(()=>{this.countDown--,this.countDown<=0&&(clearInterval(e),this.isCountingDown=!1)},1e3)}catch(e){console.error("获取验证码失败:",e),n({title:"获取验证码失败，请重试",icon:"none"})}}else this.errors.phone="请输入正确的手机号";else this.errors.phone="请输入手机号"},validateForm(){let e=!0;return this.errors={username:"",phone:"",verifyCode:"",password:"",confirmPassword:"",agreement:""},this.formData.username.trim()?(this.formData.username.length<2||this.formData.username.length>20)&&(this.errors.username="用户名长度应在2-20个字符之间",e=!1):(this.errors.username="请输入用户名",e=!1),this.formData.phone.trim()?/^1[3-9]\d{9}$/.test(this.formData.phone)||(this.errors.phone="请输入正确的手机号",e=!1):(this.errors.phone="请输入手机号",e=!1),this.formData.verifyCode.trim()?6!==this.formData.verifyCode.length&&(this.errors.verifyCode="请输入6位验证码",e=!1):(this.errors.verifyCode="请输入验证码",e=!1),this.formData.password.trim()?this.formData.password.length<6&&(this.errors.password="密码长度不能少于6位",e=!1):(this.errors.password="请输入密码",e=!1),this.formData.confirmPassword.trim()?this.formData.password!==this.formData.confirmPassword&&(this.errors.confirmPassword="两次输入的密码不一致",e=!1):(this.errors.confirmPassword="请确认密码",e=!1),this.formData.agreement||(this.errors.agreement="请阅读并同意用户协议和隐私政策",e=!1),e},async handleRegister(){if(this.validateForm()){this.isLoading=!0;try{await this.register({username:this.formData.username,phone:this.formData.phone,verifyCode:this.formData.verifyCode,password:this.formData.password}),n({title:"注册成功",icon:"success"}),setTimeout(()=>{t({url:"/pages/login/index"})},1500)}catch(e){console.error("注册失败:",e),n({title:e.message||"注册失败，请重试",icon:"none"})}finally{this.isLoading=!1}}},navigateToLogin(){t({url:"/pages/login/index"})},showUserAgreement(){a({title:"用户协议",content:"这里是用户协议内容，实际应用中应该从服务器获取或使用单独页面展示",showCancel:!1})},showPrivacyPolicy(){a({title:"隐私政策",content:"这里是隐私政策内容，实际应用中应该从服务器获取或使用单独页面展示",showCancel:!1})}}},[["render",function(e,s,a,t,n,_){const k=m,P=c,v=i,x=u,V=g,b=D,L=C;return l(),r(v,{class:"register-page"},{default:o(()=>[d(v,{class:"register-container"},{default:o(()=>[d(v,{class:"register-header"},{default:o(()=>[d(k,{class:"logo",src:y,mode:"aspectFit"}),d(P,{class:"app-name"},{default:o(()=>[f("智能错题本")]),_:1}),d(P,{class:"app-desc"},{default:o(()=>[f("高效学习，精准提升")]),_:1})]),_:1}),d(v,{class:"register-form"},{default:o(()=>[d(v,{class:"form-item"},{default:o(()=>[d(x,{class:p(["form-input",{error:n.errors.username}]),type:"text",placeholder:"请输入用户名",modelValue:n.formData.username,"onUpdate:modelValue":s[0]||(s[0]=e=>n.formData.username=e)},null,8,["modelValue","class"]),n.errors.username?(l(),r(P,{key:0,class:"error-text"},{default:o(()=>[f(w(n.errors.username),1)]),_:1})):h("",!0)]),_:1}),d(v,{class:"form-item"},{default:o(()=>[d(x,{class:p(["form-input",{error:n.errors.phone}]),type:"text",placeholder:"请输入手机号",modelValue:n.formData.phone,"onUpdate:modelValue":s[1]||(s[1]=e=>n.formData.phone=e)},null,8,["modelValue","class"]),n.errors.phone?(l(),r(P,{key:0,class:"error-text"},{default:o(()=>[f(w(n.errors.phone),1)]),_:1})):h("",!0)]),_:1}),d(v,{class:"form-item"},{default:o(()=>[d(x,{class:p(["form-input",{error:n.errors.verifyCode}]),type:"text",placeholder:"请输入验证码",modelValue:n.formData.verifyCode,"onUpdate:modelValue":s[2]||(s[2]=e=>n.formData.verifyCode=e)},null,8,["modelValue","class"]),d(V,{class:"verify-btn",onClick:_.getVerifyCode,disabled:n.isCountingDown||!n.formData.phone},{default:o(()=>[f(w(_.countDownText),1)]),_:1},8,["onClick","disabled"]),n.errors.verifyCode?(l(),r(P,{key:0,class:"error-text"},{default:o(()=>[f(w(n.errors.verifyCode),1)]),_:1})):h("",!0)]),_:1}),d(v,{class:"form-item"},{default:o(()=>[d(x,{class:p(["form-input",{error:n.errors.password}]),type:n.showPassword?"text":"password",placeholder:"请输入密码",modelValue:n.formData.password,"onUpdate:modelValue":s[3]||(s[3]=e=>n.formData.password=e)},null,8,["type","modelValue","class"]),d(P,{class:"toggle-password",onClick:_.togglePassword},{default:o(()=>[f(w(n.showPassword?"隐藏":"显示"),1)]),_:1},8,["onClick"]),n.errors.password?(l(),r(P,{key:0,class:"error-text"},{default:o(()=>[f(w(n.errors.password),1)]),_:1})):h("",!0)]),_:1}),d(v,{class:"form-item"},{default:o(()=>[d(x,{class:p(["form-input",{error:n.errors.confirmPassword}]),type:n.showConfirmPassword?"text":"password",placeholder:"请确认密码",modelValue:n.formData.confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=e=>n.formData.confirmPassword=e)},null,8,["type","modelValue","class"]),d(P,{class:"toggle-password",onClick:_.toggleConfirmPassword},{default:o(()=>[f(w(n.showConfirmPassword?"隐藏":"显示"),1)]),_:1},8,["onClick"]),n.errors.confirmPassword?(l(),r(P,{key:0,class:"error-text"},{default:o(()=>[f(w(n.errors.confirmPassword),1)]),_:1})):h("",!0)]),_:1}),d(v,{class:"form-item"},{default:o(()=>[d(L,{class:"checkbox-container"},{default:o(()=>[d(b,{checked:n.formData.agreement,onChange:_.handleAgreementChange},null,8,["checked","onChange"]),d(P,{class:"checkbox-text"},{default:o(()=>[f("我已阅读并同意")]),_:1}),d(P,{class:"link-text",onClick:_.showUserAgreement},{default:o(()=>[f("《用户协议》")]),_:1},8,["onClick"]),d(P,{class:"checkbox-text"},{default:o(()=>[f("和")]),_:1}),d(P,{class:"link-text",onClick:_.showPrivacyPolicy},{default:o(()=>[f("《隐私政策》")]),_:1},8,["onClick"])]),_:1}),n.errors.agreement?(l(),r(P,{key:0,class:"error-text"},{default:o(()=>[f(w(n.errors.agreement),1)]),_:1})):h("",!0)]),_:1}),d(V,{class:"register-btn",onClick:_.handleRegister,disabled:n.isLoading},{default:o(()=>[f(w(n.isLoading?"注册中...":"注册"),1)]),_:1},8,["onClick","disabled"]),d(v,{class:"login-link"},{default:o(()=>[d(P,null,{default:o(()=>[f("已有账号？")]),_:1}),d(P,{class:"link-text",onClick:_.navigateToLogin},{default:o(()=>[f("立即登录")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-e326f084"]]);export{_ as default};
