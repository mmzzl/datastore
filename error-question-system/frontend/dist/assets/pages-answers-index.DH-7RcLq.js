import{_ as e,m as s,L as a,c as t,w as n,s as l,a as i,n as r,z as o,i as c,M as d,o as u,e as w,k as h,A as f,h as g,j as m,F as _,B as C,t as p,l as y,u as b}from"./index-C1huu0wr.js";import{f as A}from"./index.C6AeHhaN.js";const T=e({data:()=>({searchKeyword:"",isLoading:!0,currentTab:0,filterTabs:[{name:"全部"},{name:"已掌握"},{name:"复习中"},{name:"待复习"}]}),computed:{...a("answers",["answers"]),filteredAnswers(){let e=this.answers;if(this.currentTab>0){const s=["","mastered","reviewing","pending"][this.currentTab];e=e.filter(e=>e.status===s)}return this.searchKeyword&&(e=e.filter(e=>e.questionTitle.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.content.toLowerCase().includes(this.searchKeyword.toLowerCase()))),e}},onLoad(){this.loadAnswers()},onPullDownRefresh(){this.loadAnswers().then(()=>{o()})},methods:{...s("answers",["getAnswerList","deleteAnswer"]),async loadAnswers(){this.isLoading=!0;try{await this.getAnswerList()}catch(e){console.error("加载解答列表失败:",e),l({title:"加载失败",icon:"none"})}finally{this.isLoading=!1}},handleSearch(){},handleClearSearch(){this.searchKeyword=""},handleTabChange(e){this.currentTab=e},goToQuestionDetail(e){r({url:`/pages/questions/detail?id=${e}`})},goToAnswerDetail(e){r({url:`/pages/answers/detail?id=${e}`})},editAnswer(e){r({url:`/pages/answers/edit?id=${e.id}`})},confirmDelete(e){i({title:"提示",content:"确定要删除这条解答吗？",success:s=>{s.confirm&&this.handleDelete(e.id)}})},async handleDelete(e){try{await this.deleteAnswer(e),l({title:"删除成功",icon:"success"})}catch(s){console.error("删除解答失败:",s),l({title:s.message||"删除失败，请重试",icon:"none"})}},getAnswerPreview:e=>e?e.length>100?e.substring(0,100)+"...":e:"",getStatusText:e=>({mastered:"已掌握",reviewing:"复习中",pending:"待复习"}[e]||"未知"),getStatusClass:e=>`status-${e}`,formatDate:e=>A(e)}},[["render",function(e,s,a,l,i,r){const o=d("u-search"),A=c,T=d("u-tabs"),k=d("u-loading-icon"),L=g,D=d("u-empty"),v=b;return u(),t(A,{class:"answers-page"},{default:n(()=>[w(A,{class:"search-bar"},{default:n(()=>[w(o,{modelValue:i.searchKeyword,"onUpdate:modelValue":s[0]||(s[0]=e=>i.searchKeyword=e),placeholder:"搜索解答","show-action":!1,onSearch:r.handleSearch,onClear:r.handleClearSearch},null,8,["modelValue","onSearch","onClear"])]),_:1}),w(A,{class:"filter-tabs"},{default:n(()=>[w(T,{list:i.filterTabs,onClick:r.handleTabChange,current:i.currentTab,"line-width":"60","line-height":"6","active-color":"#3c9cff","inactive-color":"#606266","font-size":"28"},null,8,["list","onClick","current"])]),_:1}),w(A,{class:"answers-list"},{default:n(()=>[i.isLoading?(u(),t(A,{key:0,class:"loading-container"},{default:n(()=>[w(k,{mode:"flower",size:"40"}),w(L,{class:"loading-text"},{default:n(()=>[m("加载中...")]),_:1})]),_:1})):0===r.filteredAnswers.length?(u(),t(A,{key:1,class:"empty-container"},{default:n(()=>[w(D,{mode:"data",icon:"http://cdn.uviewui.com/uview/empty/data.png",text:"暂无解答记录"})]),_:1})):h("",!0),(u(!0),f(_,null,C(r.filteredAnswers,e=>(u(),t(A,{class:"answer-item",key:e.id},{default:n(()=>[w(A,{class:"answer-header"},{default:n(()=>[w(A,{class:"question-title",onClick:s=>r.goToQuestionDetail(e.questionId)},{default:n(()=>[m(p(e.questionTitle),1)]),_:2},1032,["onClick"]),w(A,{class:y(["answer-status",r.getStatusClass(e.status)])},{default:n(()=>[m(p(r.getStatusText(e.status)),1)]),_:2},1032,["class"])]),_:2},1024),w(A,{class:"answer-content",onClick:s=>r.goToAnswerDetail(e.id)},{default:n(()=>[w(L,{class:"answer-preview"},{default:n(()=>[m(p(r.getAnswerPreview(e.content)),1)]),_:2},1024)]),_:2},1032,["onClick"]),w(A,{class:"answer-footer"},{default:n(()=>[w(A,{class:"answer-meta"},{default:n(()=>[w(L,{class:"meta-item"},{default:n(()=>[m(p(r.formatDate(e.createdAt)),1)]),_:2},1024),w(L,{class:"meta-item"},{default:n(()=>[m(p(e.difficulty),1)]),_:2},1024)]),_:2},1024),w(A,{class:"answer-actions"},{default:n(()=>[w(v,{class:"action-btn edit-btn",onClick:s=>r.editAnswer(e)},{default:n(()=>[m("编辑")]),_:2},1032,["onClick"]),w(v,{class:"action-btn delete-btn",onClick:s=>r.confirmDelete(e)},{default:n(()=>[m("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}],["__scopeId","data-v-085b1d6a"]]);export{T as default};
