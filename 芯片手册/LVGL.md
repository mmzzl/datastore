

--- Page 1 ---


LVGL Documentation 8.3
LVGL community
May 15, 2024


--- Page 2 ---


CONTENTS
1 Introduction 2
1.1 Keyfeatures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
1.2 Requirements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
1.3 License . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
1.4 Repositorylayout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
1.5 Releasepolicy. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
1.6 FAQ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
2 Examples 8
2.1 Getstarted . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
2.2 Styles . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
2.3 Animations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
2.4 Events. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
2.5 Layouts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
2.6 Scrolling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
2.7 Widgets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
3 Getstarted 220
3.1 Quickoverview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220
3.2 Platforms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 231
3.3 (RT)OS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247
3.4 Bindings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 251
4 Porting 254
4.1 Setupaproject . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 254
4.2 Displayinterface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 256
4.3 Inputdeviceinterface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 269
4.4 Tickinterface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 278
4.5 TimerHandler . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 279
4.6 Sleepmanagement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 280
4.7 Operatingsystemandinterrupts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 280
4.8 Logging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 281
4.9 AddcustomGPU . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 282
5 Overview 288
5.1 Objects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 288
5.2 Positions,sizes,andlayouts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 294
5.3 Styles . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 303
5.4 Styleproperties . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 351
5.5 Scroll . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 362
i


--- Page 3 ---


5.6 Layers. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 378
5.7 Events. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 380
5.8 Inputdevices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 388
5.9 Displays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 398
5.10 Colors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 404
5.11 Fonts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 413
5.12 Images . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 420
5.13 Filesystem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 433
5.14 Animations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 441
5.15 Timers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 461
5.16 Drawing. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 466
5.17 RenderersandGPUs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 472
5.18 Newwidget . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 473
6 Widgets 474
6.1 Baseobject(lv_obj). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 474
6.2 Corewidgets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 490
6.3 Extrawidgets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 639
7 Layouts 789
7.1 Flex . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 789
7.2 Grid . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 802
8 3rdpartylibraries 818
8.1 FileSystemInterfaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 818
8.2 BMPdecoder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 819
8.3 JPGdecoder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 821
8.4 PNGdecoder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 823
8.5 GIFdecoder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 824
8.6 FreeTypesupport . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 827
8.7 TinyTTFfontengine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 831
8.8 QRcode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 832
8.9 Lottieplayer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 834
8.10 FFmpegsupport . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 839
9 Others 843
9.1 Snapshot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 843
9.2 Monkey . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 847
9.3 Gridnavigation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 851
9.4 Fragment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 859
9.5 Messaging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 869
9.6 Imagefont(imgfont) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 880
9.7 PinyinIME . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 882
10 Contributing 890
10.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 890
10.2 Pullrequest . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 891
10.3 DeveloperCertificationofOrigin(DCO) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 893
10.4 Waystocontribute . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 894
11 Changelog 898
11.1 v8.3.116December2023 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 898
11.2 v8.3.1020September2023 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 899
11.3 v8.3.96August2023 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 900
11.4 v8.3.85July2023 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 901
ii


--- Page 4 ---


11.5 v8.3.73May2023 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 902
11.6 v8.3.63April2023 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 903
11.7 v8.3.57February2023 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 904
11.8 v8.3.415December2022 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 904
11.9 v8.3.306October2022 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 905
11.10 v8.3.227September2022 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 905
11.11 v8.3.125July2022 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 906
11.12 v8.3.06July2022 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 907
11.13 v8.2.031January2022 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 915
11.14 v8.1.010November2021 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 922
11.15 v8.0.2(16.07.2021). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 939
11.16 v8.0.1(14.06.2021). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 940
11.17 v8.0.0(01.06.2021). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 942
11.18 v7.11.0(16.03.2021) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 944
11.19 v7.10.1(16.02.2021) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 944
11.20 v7.10.0(02.02.2021) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 945
11.21 v7.9.1(19.01.2021). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 945
11.22 v7.9.0(05.01.2021). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 945
11.23 v7.8.1(15.12.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 946
11.24 v7.8.0(01.12.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 946
11.25 v7.7.2(17.11.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 947
11.26 v7.7.1(03.11.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 947
11.27 v7.7.0(20.10.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 947
11.28 v7.6.1(06.10.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 948
11.29 v7.6.0(22.09.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 948
11.30 v7.5.0(15.09.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 949
11.31 v7.4.0(01.09.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 949
11.32 v7.3.1(18.08.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 950
11.33 v7.3.0(04.08.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 950
11.34 v7.2.0(21.07.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 951
11.35 v7.1.0(07.07.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 952
11.36 v7.0.2(16.06.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 953
11.37 v7.0.1(01.06.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 953
11.38 v7.0.0(18.05.2020). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 954
12 Roadmap 958
12.1 v8.2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 958
12.2 Ideas . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 958
Index 959
iii


--- Page 5 ---


LVGLDocumentation8.3
PDFversion: LVGL.pdf
CONTENTS 1


--- Page 6 ---


CHAPTER
ONE
INTRODUCTION
LVGL(LightandVersatileGraphicsLibrary)isafreeandopen-sourcegraphicslibraryprovidingeverythingyouneed
tocreateanembeddedGUIwitheasy-to-usegraphicalelements,beautifulvisualeffectsandalowmemoryfootprint.
1.1 Key features
• Powerfulbuildingblockssuchasbuttons,charts,lists,sliders,images,etc.
• Advancedgraphicswithanimations,anti-aliasing,opacity,smoothscrolling
• Variousinputdevicessuchastouchpad,mouse,keyboard,encoder,etc.
• Multi-languagesupportwithUTF-8encoding
• Multi-displaysupport,i.e. usemultipleTFT,monochromedisplayssimultaneously
• FullycustomizablegraphicelementswithCSS-likestyles
• Hardwareindependent: usewithanymicrocontrollerordisplay
• Scalable: abletooperatewithlittlememory(64kBFlash,16kBRAM)
• OS,externalmemoryandGPUaresupportedbutnotrequired
• Singleframebufferoperationevenwithadvancedgraphiceffects
• WritteninCformaximalcompatibility(C++compatible)
• SimulatortostartembeddedGUIdesignonaPCwithoutembeddedhardware
• BindingtoMicroPython
• Tutorials,examples,themesforrapidGUIdesign
• DocumentationisavailableonlineandasPDF
• Freeandopen-sourceunderMITlicense
2


--- Page 7 ---


LVGLDocumentation8.3
1.2 Requirements
Basically, everymoderncontrollerwhichisabletodriveadisplayissuitabletorunLVGL.Theminimalrequirements
are:
1.3 License
TheLVGLproject(includingallrepositories)islicensedunderMITlicense. Thismeansyoucanuseitevenincommercial
projects.
It'snotmandatory,butwehighlyappreciateitifyouwriteafewwordsaboutyourprojectintheMyprojectscategoryof
theforumoraprivatemessagetolvgl.io.
AlthoughyoucangetLVGLforfreethereisamassiveamountofworkbehindit. It'screatedbyagroupofvolunteers
whomadeitavailableforyouin theirfreetime.
TomaketheLVGLprojectsustainable,pleaseconsidercontributingtotheproject. Youcanchoosefrommanydifferent
waysofcontributingsuchassimplywritingatweetaboutyouusingLVGL,fixingbugs,translatingthedocumentation,or
evenbecomingamaintainer.
1.4 Repository layout
AllrepositoriesoftheLVGLprojectarehostedonGitHub: https://github.com/lvgl
Youwillfindtheserepositoriesthere:
• lvglThelibraryitselfwithmanyexamplesanddemos.
• lv_driversDisplayandinputdevicedrivers
• blogSourceoftheblog'ssite(https://blog.lvgl.io)
• simSourceoftheonlinesimulator'ssite(https://sim.lvgl.io)
• lv_port_... LVGLportstodevelopmentboardsorenvironments
• lv_binding_.. Bindingstootherlanguages
1.5 Release policy
ThecorerepositoriesfollowtherulesofSemanticversioning:
• MajorversionsforincompatibleAPIchanges. E.g. v5.0.0,v6.0.0
• Minorversionfornewbutbackward-compatiblefunctionalities. E.g. v6.1.0,v6.2.0
• Patchversionforbackward-compatiblebugfixes. E.g. v6.1.1,v6.1.2
TagslikevX.Y.Zarecreated foreveryrelease.
1.2. Requirements 3


--- Page 8 ---


LVGLDocumentation8.3
1.5.1 Release cycle
• Bugfixes: Releasedondemandevenweekly
• Minorreleases: Every3-4months
• Majorreleases: Approximatelyyearly
1.5.2 Branches
Thecorerepositorieshaveatleastthefollowingbranches:
• masterlatestversion,patchesaremergeddirectlyhere.
• release/vX.Ystableversionsoftheminorreleases
• fix/some-descriptiontemporarybranchesforbugfixes
• feat/some-descriptiontemporarybranchesforfeatures
1.5.3 Changelog
ThechangesarerecordedinCHANGELOG.md.
1.5.4 Version support
Beforev8thelastminorreleaseofeachmajorserieswassupportedfor1year. Startingfromv8,everyminorreleaseis
supportedfor1year.
1.6 FAQ
1.6.1 Where can I ask questions?
Youcanaskquestionsintheforum: https://forum.lvgl.io/.
WeuseGitHubissuesfordevelopmentrelateddiscussion. Youshouldusethemonlyifyourquestionorissueistightly
relatedtothedevelopmentofthelibrary.
Beforepostingaquestion,pleasereadythisFAQsectionasyoumightfindanswertoyourissueheretoo.
1.6.2 Is my MCU/hardware supported?
EveryMCUwhichiscapableofdrivingadisplayviaparallelport,SPI,RGBinterfaceoranythingelseandfulfillsthe
RequirementsissupportedbyLVGL.
Thisincludes:
• "Common"MCUslikeSTM32F,STM32H,NXPKinetis,LPC,iMX,dsPIC33,PIC32,SWM341etc.
• Bluetooth,GSM,Wi-FimoduleslikeNordicNRFandEspressifESP32
• Linuxwithframebufferdevicesuchas/dev/fb0. ThisincludesSingle-boardcomputersliketheRaspberryPi
• AnythingelsewithastrongenoughMCUandaperipheraltodriveadisplay
1.6. FAQ 4


--- Page 9 ---


LVGLDocumentation8.3
1.6.3 Is my display supported?
LVGLneedsjustonesimpledriverfunctiontocopyanarrayofpixelsintoagivenareaofthedisplay. Ifyoucandothis
withyourdisplaythenyoucanuseitwithLVGL.
Someexamplesofthesupporteddisplaytypes:
• TFTswith16or32bitcolordepth
• MonitorswithanHDMIport
• Smallmonochromedisplays
• Gray-scaledisplays
• evenLEDmatrices
• oranyotherdisplaywhereyoucancontrolthecolor/stateofthepixels
SeethePortingsectiontolearnmore.
1.6.4 LVGL doesn't start, randomly crashes or nothing is drawn on the display.
What can be the problem?
• TryincreasingLV_MEM_SIZE.
• Besurelv_disp_drv_t,lv_indev_drv_tandlv_fs_drv_tareglobalorstatic.
• BesureyourdisplayworkswithoutLVGL.E.g. paintittoredonstartup.
• EnableLogging
• Enableassertsinlv_conf.h(LV_USE_ASSERT_...)
• IfyouuseanRTOS
– increasethestacksizeofthetaskwhichcallslv_timer_handler()
– Besureyouusedamutexasdescribedhere
1.6.5 My display driver is not called. What have I missed?
Besureyouarecallinglv_tick_inc(x)inaninterruptandlv_timer_handler()inyourmainwhile(1).
LearnmoreintheTickandTimerhandlersections.
1.6.6 Whyisthedisplaydrivercalledonlyonce? Onlytheupperpartofthedisplay
is refreshed.
Besureyouarecallinglv_disp_flush_ready(drv)attheendofyour"displayflushcallback".
1.6. FAQ 5


--- Page 10 ---


LVGLDocumentation8.3
1.6.7 Why do I see only garbage on the screen?
Probablythereabuginyourdisplaydriver. TrythefollowingcodewithoutusingLVGL.Youshouldseeasquarewith
red-bluegradient.
#define BUF_W 20
#define BUF_H 10
lv_color_t buf[BUF_W * BUF_H];
lv_color_t * buf_p = buf;
uint16_t x, y;
for(y = 0; y &lt; BUF_H; y++) {
lv_color_t c = lv_color_mix(LV_COLOR_BLUE, LV_COLOR_RED, (y * 255) / BUF_H);
for(x = 0; x &lt; BUF_W; x++){
(*buf_p) = c;
buf_p++;
}
}
lv_area_t a;
a.x1 = 10;
a.y1 = 40;
a.x2 = a.x1 + BUF_W - 1;
a.y2 = a.y1 + BUF_H - 1;
my_flush_cb(NULL, &a, buf);
1.6.8 Why do I see nonsense colors on the screen?
Probably LVGL's color format is not compatible with your display's color format. Check LV_COLOR_DEPTH in
lv_conf.h.
If you are using 16-bit colors with SPI (or another byte-oriented interface) you probably need to set
LV_COLOR_16_SWAP 1inlv_conf.h. Itswapstheupperandlowerbytesofthepixels.
1.6.9 How to speed up my UI?
• TurnoncompileroptimizationandenablecacheifyourMCUhasit
• Increasethesizeofthedisplaybuffer
• UsetwodisplaybuffersandflushthebufferwithDMA(orsimilarperipheral)inthebackground
• IncreasetheclockspeedoftheSPIorparallelportifyouusethemtodrivethedisplay
• IfyourdisplayhasanSPIportconsiderchangingtoamodelwithaparallelinterfacebecauseithasmuchhigher
throughput
• KeepthedisplaybufferininternalRAM(notinexternalSRAM)becauseLVGLusesitalotanditshouldhavea
fastaccesstime
1.6. FAQ 6


--- Page 11 ---


LVGLDocumentation8.3
1.6.10 How to reduce flash/ROM usage?
Youcandisablealltheunusedfeatures(suchasanimations,filesystem,GPUetc.) andobjecttypesinlv_conf.h.
If you are using GCC/CLANG you can add -fdata-sections -ffunction-sections compiler flags and
--gc-sections linker flag to remove unused functions and variables from the final binary. If possible, add the
-fltocompilerflagtoenablelink-time-optimisationtogetherwith-OsforGCCor-OzforCLANG.
1.6.11 How to reduce the RAM usage
• LowerthesizeoftheDisplaybuffer
• ReduceLV_MEM_SIZEinlv_conf.h. Thismemoryisusedwhenyoucreateobjectslikebuttons,labels,etc.
• ToworkwithlowerLV_MEM_SIZEyoucancreateobjectsonlywhenrequiredanddeletethemwhentheyarenot
neededanymore
1.6.12 How to work with an operating system?
Toworkwithanoperatingsystemwheretaskscaninterrupteachother(preemptively)youshouldprotectLVGLrelated
functioncallswithamutex. SeetheOperatingsystemandinterruptssectiontolearnmore.
1.6. FAQ 7


--- Page 12 ---


CHAPTER
TWO
EXAMPLES
2.1 Get started
2.1.1 A button with a label and react on click event
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_BTN
static void btn_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * btn = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
static uint8_t cnt = 0;
cnt++;
/*Get the first child of the button which is the label and change its text*/
lv_obj_t * label = lv_obj_get_child(btn, 0);
lv_label_set_text_fmt(label, "Button: %d", cnt);
}
}
/**
* Create a button with a label and react on click event.
*/
void lv_example_get_started_1(void)
{
lv_obj_t * btn = lv_btn_create(lv_scr_act()); /*Add a button the current␣
,→screen*/
lv_obj_set_pos(btn, 10, 10); /*Set its position*/
lv_obj_set_size(btn, 120, 50); /*Set its size*/
lv_obj_add_event_cb(btn, btn_event_cb, LV_EVENT_ALL, NULL); /*Assign a␣
,→callback to the button*/
lv_obj_t * label = lv_label_create(btn); /*Add a label to the button*/
lv_label_set_text(label, "Button"); /*Set the labels text*/
lv_obj_center(label);
}
#endif
8


--- Page 13 ---


LVGLDocumentation8.3
class CounterBtn():
def __init__(self):
self.cnt = 0
#
# Create a button with a label and react on click event.
#
btn = lv.btn(lv.scr_act()) # Add a button the␣
,→current screen
btn.set_pos(10, 10) # Set its position
btn.set_size(120, 50) # Set its size
btn.align(lv.ALIGN.CENTER,0,0)
btn.add_event_cb(self.btn_event_cb, lv.EVENT.ALL, None) # Assign a callback␣
,→to the button
label = lv.label(btn) # Add a label to the␣
,→button
label.set_text("Button") # Set the labels text
label.center()
def btn_event_cb(self,evt):
code = evt.get_code()
btn = evt.get_target()
if code == lv.EVENT.CLICKED:
self.cnt += 1
# Get the first child of the button which is the label and change its text
label = btn.get_child(0)
label.set_text("Button: " + str(self.cnt))
counterBtn = CounterBtn()
2.1.2 Create styles from scratch for buttons
#include "../lv_examples.h"
#if LV_USE_BTN && LV_BUILD_EXAMPLES
static lv_style_t style_btn;
static lv_style_t style_btn_pressed;
static lv_style_t style_btn_red;
static lv_color_t darken(const lv_color_filter_dsc_t * dsc, lv_color_t color, lv_opa_
,→t opa)
{
LV_UNUSED(dsc);
return lv_color_darken(color, opa);
}
static void style_init(void)
{
/*Create a simple button style*/
lv_style_init(&style_btn);
lv_style_set_radius(&style_btn, 10);
lv_style_set_bg_opa(&style_btn, LV_OPA_COVER);
(continuesonnextpage)
2.1. Getstarted 9


--- Page 14 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_set_bg_color(&style_btn, lv_palette_lighten(LV_PALETTE_GREY, 3));
lv_style_set_bg_grad_color(&style_btn, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_bg_grad_dir(&style_btn, LV_GRAD_DIR_VER);
lv_style_set_border_color(&style_btn, lv_color_black());
lv_style_set_border_opa(&style_btn, LV_OPA_20);
lv_style_set_border_width(&style_btn, 2);
lv_style_set_text_color(&style_btn, lv_color_black());
/*Create a style for the pressed state.
*Use a color filter to simply modify all colors in this state*/
static lv_color_filter_dsc_t color_filter;
lv_color_filter_dsc_init(&color_filter, darken);
lv_style_init(&style_btn_pressed);
lv_style_set_color_filter_dsc(&style_btn_pressed, &color_filter);
lv_style_set_color_filter_opa(&style_btn_pressed, LV_OPA_20);
/*Create a red style. Change only some colors.*/
lv_style_init(&style_btn_red);
lv_style_set_bg_color(&style_btn_red, lv_palette_main(LV_PALETTE_RED));
lv_style_set_bg_grad_color(&style_btn_red, lv_palette_lighten(LV_PALETTE_RED, 3));
}
/**
* Create styles from scratch for buttons.
*/
void lv_example_get_started_2(void)
{
/*Initialize the style*/
style_init();
/*Create a button and use the new styles*/
lv_obj_t * btn = lv_btn_create(lv_scr_act());
/* Remove the styles coming from the theme
* Note that size and position are also stored as style properties
* so lv_obj_remove_style_all will remove the set size and position too */
lv_obj_remove_style_all(btn);
lv_obj_set_pos(btn, 10, 10);
lv_obj_set_size(btn, 120, 50);
lv_obj_add_style(btn, &style_btn, 0);
lv_obj_add_style(btn, &style_btn_pressed, LV_STATE_PRESSED);
/*Add a label to the button*/
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text(label, "Button");
lv_obj_center(label);
/*Create another button and use the red style too*/
lv_obj_t * btn2 = lv_btn_create(lv_scr_act());
lv_obj_remove_style_all(btn2); /*Remove the styles coming␣
,→from the theme*/
lv_obj_set_pos(btn2, 10, 80);
lv_obj_set_size(btn2, 120, 50);
lv_obj_add_style(btn2, &style_btn, 0);
lv_obj_add_style(btn2, &style_btn_red, 0);
lv_obj_add_style(btn2, &style_btn_pressed, LV_STATE_PRESSED);
(continuesonnextpage)
2.1. Getstarted 10


--- Page 15 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_radius(btn2, LV_RADIUS_CIRCLE, 0); /*Add a local style too*/
label = lv_label_create(btn2);
lv_label_set_text(label, "Button 2");
lv_obj_center(label);
}
#endif
#
# Create styles from scratch for buttons.
#
style_btn = lv.style_t()
style_btn_red = lv.style_t()
style_btn_pressed = lv.style_t()
# Create a simple button style
style_btn.init()
style_btn.set_radius(10)
style_btn.set_bg_opa(lv.OPA.COVER)
style_btn.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 3))
style_btn.set_bg_grad_color(lv.palette_main(lv.PALETTE.GREY))
style_btn.set_bg_grad_dir(lv.GRAD_DIR.VER)
# Add a border
style_btn.set_border_color(lv.color_white())
style_btn.set_border_opa(lv.OPA._70)
style_btn.set_border_width(2)
# Set the text style
style_btn.set_text_color(lv.color_white())
# Create a red style. Change only some colors.
style_btn_red.init()
style_btn_red.set_bg_color(lv.palette_main(lv.PALETTE.RED))
style_btn_red.set_bg_grad_color(lv.palette_lighten(lv.PALETTE.RED, 2))
# Create a style for the pressed state.
style_btn_pressed.init()
style_btn_pressed.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style_btn_pressed.set_bg_grad_color(lv.palette_darken(lv.PALETTE.RED, 3))
# Create a button and use the new styles
btn = lv.btn(lv.scr_act()) # Add a button the current screen
# Remove the styles coming from the theme
# Note that size and position are also stored as style properties
# so lv_obj_remove_style_all will remove the set size and position too
btn.remove_style_all() # Remove the styles coming from the theme
btn.set_pos(10, 10) # Set its position
btn.set_size(120, 50) # Set its size
btn.add_style(style_btn, 0)
btn.add_style(style_btn_pressed, lv.STATE.PRESSED)
label = lv.label(btn) # Add a label to the button
label.set_text("Button") # Set the labels text
label.center()
(continuesonnextpage)
2.1. Getstarted 11


--- Page 16 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Create another button and use the red style too
btn2 = lv.btn(lv.scr_act())
btn2.remove_style_all() # Remove the styles coming from the theme
btn2.set_pos(10, 80) # Set its position
btn2.set_size(120, 50) # Set its size
btn2.add_style(style_btn, 0)
btn2.add_style(style_btn_red, 0)
btn2.add_style(style_btn_pressed, lv.STATE.PRESSED)
btn2.set_style_radius(lv.RADIUS.CIRCLE, 0) # Add a local style
label = lv.label(btn2) # Add a label to the button
label.set_text("Button 2") # Set the labels text
label.center()
2.1.3 Create a slider and write its value on a label
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SLIDER
static lv_obj_t * label;
static void slider_event_cb(lv_event_t * e)
{
lv_obj_t * slider = lv_event_get_target(e);
/*Refresh the text*/
lv_label_set_text_fmt(label, "%"LV_PRId32, lv_slider_get_value(slider));
lv_obj_align_to(label, slider, LV_ALIGN_OUT_TOP_MID, 0, -15); /*Align top of␣
,→the slider*/
}
/**
* Create a slider and write its value on a label.
*/
void lv_example_get_started_3(void)
{
/*Create a slider in the center of the display*/
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_set_width(slider, 200); /*Set the width*/
lv_obj_center(slider); /*Align to the center of␣
,→the parent (screen)*/
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL); /
,→*Assign an event function*/
/*Create a label above the slider*/
label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "0");
lv_obj_align_to(label, slider, LV_ALIGN_OUT_TOP_MID, 0, -15); /*Align top of␣
,→the slider*/
}
#endif
2.1. Getstarted 12


--- Page 17 ---


LVGLDocumentation8.3
def slider_event_cb(evt):
slider = evt.get_target()
# Refresh the text
label.set_text(str(slider.get_value()))
#
# Create a slider and write its value on a label.
#
# Create a slider in the center of the display
slider = lv.slider(lv.scr_act())
slider.set_width(200) # Set the width
slider.center() # Align to the␣
,→center of the parent (screen)
slider.add_event_cb(slider_event_cb, lv.EVENT.VALUE_CHANGED, None) # Assign an event␣
,→function
# Create a label above the slider
label = lv.label(lv.scr_act())
label.set_text("0")
label.align_to(slider, lv.ALIGN.OUT_TOP_MID, 0, -15) # Align below the␣
,→slider
2.2 Styles
2.2.1 Size styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Using the Size, Position and Padding style properties
*/
void lv_example_style_1(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 5);
/*Make a gradient*/
lv_style_set_width(&style, 150);
lv_style_set_height(&style, LV_SIZE_CONTENT);
lv_style_set_pad_ver(&style, 20);
lv_style_set_pad_left(&style, 5);
lv_style_set_x(&style, lv_pct(50));
lv_style_set_y(&style, 80);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
(continuesonnextpage)
2.2. Styles 13


--- Page 18 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_add_style(obj, &style, 0);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label, "Hello");
}
#endif
#
# Using the Size, Position and Padding style properties
#
style = lv.style_t()
style.init()
style.set_radius(5)
# Make a gradient
style.set_width(150)
style.set_height(lv.SIZE.CONTENT)
style.set_pad_ver(20)
style.set_pad_left(5)
style.set_x(lv.pct(50))
style.set_y(80)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
label = lv.label(obj)
label.set_text("Hello")
2.2.2 Background styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the background style properties
*/
void lv_example_style_2(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 5);
/*Make a gradient*/
lv_style_set_bg_opa(&style, LV_OPA_COVER);
static lv_grad_dsc_t grad;
grad.dir = LV_GRAD_DIR_VER;
grad.stops_count = 2;
grad.stops[0].color = lv_palette_lighten(LV_PALETTE_GREY, 1);
grad.stops[1].color = lv_palette_main(LV_PALETTE_BLUE);
(continuesonnextpage)
2.2. Styles 14


--- Page 19 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Shift the gradient to the bottom*/
grad.stops[0].frac = 128;
grad.stops[1].frac = 192;
lv_style_set_bg_grad(&style, &grad);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
#
# Using the background style properties
#
style = lv.style_t()
style.init()
style.set_radius(5)
# Make a gradient
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
style.set_bg_grad_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_bg_grad_dir(lv.GRAD_DIR.VER)
# Shift the gradient to the bottom
style.set_bg_main_stop(128)
style.set_bg_grad_stop(192)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
2.2.3 Border styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the border style properties
*/
void lv_example_style_3(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 10);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 1));
(continuesonnextpage)
2.2. Styles 15


--- Page 20 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Add border to the bottom+right*/
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_border_width(&style, 5);
lv_style_set_border_opa(&style, LV_OPA_50);
lv_style_set_border_side(&style, LV_BORDER_SIDE_BOTTOM | LV_BORDER_SIDE_RIGHT);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
#
# Using the border style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(10)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
# Add border to the bottom+right
style.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_border_width(5)
style.set_border_opa(lv.OPA._50)
style.set_border_side(lv.BORDER_SIDE.BOTTOM | lv.BORDER_SIDE.RIGHT)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
2.2.4 Outline styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the outline style properties
*/
void lv_example_style_4(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 1));
(continuesonnextpage)
2.2. Styles 16


--- Page 21 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Add outline*/
lv_style_set_outline_width(&style, 2);
lv_style_set_outline_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_outline_pad(&style, 8);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
#
# Using the outline style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
# Add outline
style.set_outline_width(2)
style.set_outline_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_outline_pad(8)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
2.2.5 Shadow styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the Shadow style properties
*/
void lv_example_style_5(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 1));
(continuesonnextpage)
2.2. Styles 17


--- Page 22 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Add a shadow*/
lv_style_set_shadow_width(&style, 55);
lv_style_set_shadow_color(&style, lv_palette_main(LV_PALETTE_BLUE));
// lv_style_set_shadow_ofs_x(&style, 10);
// lv_style_set_shadow_ofs_y(&style, 20);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
#
# Using the Shadow style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
# Add a shadow
style.set_shadow_width(8)
style.set_shadow_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_shadow_ofs_x(10)
style.set_shadow_ofs_y(20)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
2.2.6 Image styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Using the Image style properties
*/
void lv_example_style_6(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
(continuesonnextpage)
2.2. Styles 18


--- Page 23 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 3));
lv_style_set_border_width(&style, 2);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_img_recolor(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_img_recolor_opa(&style, LV_OPA_50);
lv_style_set_transform_angle(&style, 300);
/*Create an object with the new style*/
lv_obj_t * obj = lv_img_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
LV_IMG_DECLARE(img_cogwheel_argb);
lv_img_set_src(obj, &img_cogwheel_argb);
lv_obj_center(obj);
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../assets/img_cogwheel_argb.png', 'rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
#
# Using the Image style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 3))
style.set_border_width(2)
style.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_img_recolor(lv.palette_main(lv.PALETTE.BLUE))
style.set_img_recolor_opa(lv.OPA._50)
# style.set_transform_angle(300)
(continuesonnextpage)
2.2. Styles 19


--- Page 24 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Create an object with the new style
obj = lv.img(lv.scr_act())
obj.add_style(style, 0)
obj.set_src(img_cogwheel_argb)
obj.center()
2.2.7 Text styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LABEL
/**
* Using the text style properties
*/
void lv_example_style_8(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 2));
lv_style_set_border_width(&style, 2);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_pad_all(&style, 10);
lv_style_set_text_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_text_letter_space(&style, 5);
lv_style_set_text_line_space(&style, 20);
lv_style_set_text_decor(&style, LV_TEXT_DECOR_UNDERLINE);
/*Create an object with the new style*/
lv_obj_t * obj = lv_label_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_label_set_text(obj, "Text of\n"
"a label");
lv_obj_center(obj);
}
#endif
#
# Using the text style properties
#
style = lv.style_t()
style.init()
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 3))
(continuesonnextpage)
2.2. Styles 20


--- Page 25 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style.set_border_width(2)
style.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_pad_all(10)
style.set_text_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_text_letter_space(5)
style.set_text_line_space(20)
style.set_text_decor(lv.TEXT_DECOR.UNDERLINE)
# Create an object with the new style
obj = lv.label(lv.scr_act())
obj.add_style(style, 0)
obj.set_text("Text of\n"
"a label")
obj.center()
2.2.8 Line styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LINE
/**
* Using the line style properties
*/
void lv_example_style_9(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_line_color(&style, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_line_width(&style, 6);
lv_style_set_line_rounded(&style, true);
/*Create an object with the new style*/
lv_obj_t * obj = lv_line_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
static lv_point_t p[] = {{10, 30}, {30, 50}, {100, 0}};
lv_line_set_points(obj, p, 3);
lv_obj_center(obj);
}
#endif
#
# Using the line style properties
#
style = lv.style_t()
style.init()
(continuesonnextpage)
2.2. Styles 21


--- Page 26 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style.set_line_color(lv.palette_main(lv.PALETTE.GREY))
style.set_line_width(6)
style.set_line_rounded(True)
# Create an object with the new style
obj = lv.line(lv.scr_act())
obj.add_style(style, 0)
p = [ {"x":10, "y":30},
{"x":30, "y":50},
{"x":100, "y":0}]
obj.set_points(p, 3)
obj.center()
2.2.9 Transition
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Creating a transition
*/
void lv_example_style_10(void)
{
static const lv_style_prop_t props[] = {LV_STYLE_BG_COLOR, LV_STYLE_BORDER_COLOR,␣
,→LV_STYLE_BORDER_WIDTH, 0};
/* A default transition
* Make it fast (100ms) and start with some delay (200 ms)*/
static lv_style_transition_dsc_t trans_def;
lv_style_transition_dsc_init(&trans_def, props, lv_anim_path_linear, 100, 200,␣
,→NULL);
/* A special transition when going to pressed state
* Make it slow (500 ms) but start without delay*/
static lv_style_transition_dsc_t trans_pr;
lv_style_transition_dsc_init(&trans_pr, props, lv_anim_path_linear, 500, 0, NULL);
static lv_style_t style_def;
lv_style_init(&style_def);
lv_style_set_transition(&style_def, &trans_def);
static lv_style_t style_pr;
lv_style_init(&style_pr);
lv_style_set_bg_color(&style_pr, lv_palette_main(LV_PALETTE_RED));
lv_style_set_border_width(&style_pr, 6);
lv_style_set_border_color(&style_pr, lv_palette_darken(LV_PALETTE_RED, 3));
lv_style_set_transition(&style_pr, &trans_pr);
/*Create an object with the new style_pr*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style_def, 0);
lv_obj_add_style(obj, &style_pr, LV_STATE_PRESSED);
(continuesonnextpage)
2.2. Styles 22


--- Page 27 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_center(obj);
}
#endif
#
# Creating a transition
#
props = [lv.STYLE.BG_COLOR, lv.STYLE.BORDER_COLOR, lv.STYLE.BORDER_WIDTH, 0]
# A default transition
# Make it fast (100ms) and start with some delay (200 ms)
trans_def = lv.style_transition_dsc_t()
trans_def.init(props, lv.anim_t.path_linear, 100, 200, None)
# A special transition when going to pressed state
# Make it slow (500 ms) but start without delay
trans_pr = lv.style_transition_dsc_t()
trans_pr.init(props, lv.anim_t.path_linear, 500, 0, None)
style_def = lv.style_t()
style_def.init()
style_def.set_transition(trans_def)
style_pr = lv.style_t()
style_pr.init()
style_pr.set_bg_color(lv.palette_main(lv.PALETTE.RED))
style_pr.set_border_width(6)
style_pr.set_border_color(lv.palette_darken(lv.PALETTE.RED, 3))
style_pr.set_transition(trans_pr)
# Create an object with the new style_pr
obj = lv.obj(lv.scr_act())
obj.add_style(style_def, 0)
obj.add_style(style_pr, lv.STATE.PRESSED)
obj.center()
2.2.10 Using multiple styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Using multiple styles
*/
void lv_example_style_11(void)
{
/*A base style*/
static lv_style_t style_base;
(continuesonnextpage)
2.2. Styles 23


--- Page 28 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_init(&style_base);
lv_style_set_bg_color(&style_base, lv_palette_main(LV_PALETTE_LIGHT_BLUE));
lv_style_set_border_color(&style_base, lv_palette_darken(LV_PALETTE_LIGHT_BLUE,␣
,→3));
lv_style_set_border_width(&style_base, 2);
lv_style_set_radius(&style_base, 10);
lv_style_set_shadow_width(&style_base, 10);
lv_style_set_shadow_ofs_y(&style_base, 5);
lv_style_set_shadow_opa(&style_base, LV_OPA_50);
lv_style_set_text_color(&style_base, lv_color_white());
lv_style_set_width(&style_base, 100);
lv_style_set_height(&style_base, LV_SIZE_CONTENT);
/*Set only the properties that should be different*/
static lv_style_t style_warning;
lv_style_init(&style_warning);
lv_style_set_bg_color(&style_warning, lv_palette_main(LV_PALETTE_YELLOW));
lv_style_set_border_color(&style_warning, lv_palette_darken(LV_PALETTE_YELLOW,␣
,→3));
lv_style_set_text_color(&style_warning, lv_palette_darken(LV_PALETTE_YELLOW, 4));
/*Create an object with the base style only*/
lv_obj_t * obj_base = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj_base, &style_base, 0);
lv_obj_align(obj_base, LV_ALIGN_LEFT_MID, 20, 0);
lv_obj_t * label = lv_label_create(obj_base);
lv_label_set_text(label, "Base");
lv_obj_center(label);
/*Create another object with the base style and earnings style too*/
lv_obj_t * obj_warning = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj_warning, &style_base, 0);
lv_obj_add_style(obj_warning, &style_warning, 0);
lv_obj_align(obj_warning, LV_ALIGN_RIGHT_MID, -20, 0);
label = lv_label_create(obj_warning);
lv_label_set_text(label, "Warning");
lv_obj_center(label);
}
#endif
#
# Using multiple styles
#
# A base style
style_base = lv.style_t()
style_base.init()
style_base.set_bg_color(lv.palette_main(lv.PALETTE.LIGHT_BLUE))
style_base.set_border_color(lv.palette_darken(lv.PALETTE.LIGHT_BLUE, 3))
style_base.set_border_width(2)
style_base.set_radius(10)
style_base.set_shadow_width(10)
style_base.set_shadow_ofs_y(5)
(continuesonnextpage)
2.2. Styles 24


--- Page 29 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_base.set_shadow_opa(lv.OPA._50)
style_base.set_text_color(lv.color_white())
style_base.set_width(100)
style_base.set_height(lv.SIZE.CONTENT)
# Set only the properties that should be different
style_warning = lv.style_t()
style_warning.init()
style_warning.set_bg_color(lv.palette_main(lv.PALETTE.YELLOW))
style_warning.set_border_color(lv.palette_darken(lv.PALETTE.YELLOW, 3))
style_warning.set_text_color(lv.palette_darken(lv.PALETTE.YELLOW, 4))
# Create an object with the base style only
obj_base = lv.obj(lv.scr_act())
obj_base.add_style(style_base, 0)
obj_base.align(lv.ALIGN.LEFT_MID, 20, 0)
label = lv.label(obj_base)
label.set_text("Base")
label.center()
# Create another object with the base style and earnings style too
obj_warning = lv.obj(lv.scr_act())
obj_warning.add_style(style_base, 0)
obj_warning.add_style(style_warning, 0)
obj_warning.align(lv.ALIGN.RIGHT_MID, -20, 0)
label = lv.label(obj_warning)
label.set_text("Warning")
label.center()
2.2.11 Local styles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Local styles
*/
void lv_example_style_12(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_GREEN));
lv_style_set_border_color(&style, lv_palette_lighten(LV_PALETTE_GREEN, 3));
lv_style_set_border_width(&style, 3);
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
/*Overwrite the background color locally*/
lv_obj_set_style_bg_color(obj, lv_palette_main(LV_PALETTE_ORANGE), LV_PART_MAIN);
lv_obj_center(obj);
(continuesonnextpage)
2.2. Styles 25


--- Page 30 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
#
# Local styles
#
style = lv.style_t()
style.init()
style.set_bg_color(lv.palette_main(lv.PALETTE.GREEN))
style.set_border_color(lv.palette_lighten(lv.PALETTE.GREEN, 3))
style.set_border_width(3)
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
# Overwrite the background color locally
obj.set_style_bg_color(lv.palette_main(lv.PALETTE.ORANGE), lv.PART.MAIN)
obj.center()
2.2.12 Add styles to parts and states
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Add styles to parts and states
*/
void lv_example_style_13(void)
{
static lv_style_t style_indic;
lv_style_init(&style_indic);
lv_style_set_bg_color(&style_indic, lv_palette_lighten(LV_PALETTE_RED, 3));
lv_style_set_bg_grad_color(&style_indic, lv_palette_main(LV_PALETTE_RED));
lv_style_set_bg_grad_dir(&style_indic, LV_GRAD_DIR_HOR);
static lv_style_t style_indic_pr;
lv_style_init(&style_indic_pr);
lv_style_set_shadow_color(&style_indic_pr, lv_palette_main(LV_PALETTE_RED));
lv_style_set_shadow_width(&style_indic_pr, 10);
lv_style_set_shadow_spread(&style_indic_pr, 3);
/*Create an object with the new style_pr*/
lv_obj_t * obj = lv_slider_create(lv_scr_act());
lv_obj_add_style(obj, &style_indic, LV_PART_INDICATOR);
lv_obj_add_style(obj, &style_indic_pr, LV_PART_INDICATOR | LV_STATE_PRESSED);
lv_slider_set_value(obj, 70, LV_ANIM_OFF);
lv_obj_center(obj);
}
#endif
2.2. Styles 26


--- Page 31 ---


LVGLDocumentation8.3
#
# Add styles to parts and states
#
style_indic = lv.style_t()
style_indic.init()
style_indic.set_bg_color(lv.palette_lighten(lv.PALETTE.RED, 3))
style_indic.set_bg_grad_color(lv.palette_main(lv.PALETTE.RED))
style_indic.set_bg_grad_dir(lv.GRAD_DIR.HOR)
style_indic_pr = lv.style_t()
style_indic_pr.init()
style_indic_pr.set_shadow_color(lv.palette_main(lv.PALETTE.RED))
style_indic_pr.set_shadow_width(10)
style_indic_pr.set_shadow_spread(3)
# Create an object with the new style_pr
obj = lv.slider(lv.scr_act())
obj.add_style(style_indic, lv.PART.INDICATOR)
obj.add_style(style_indic_pr, lv.PART.INDICATOR | lv.STATE.PRESSED)
obj.set_value(70, lv.ANIM.OFF)
obj.center()
2.2.13 Extending the current theme
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
static lv_style_t style_btn;
/*Will be called when the styles of the base theme are already added
to add new styles*/
static void new_theme_apply_cb(lv_theme_t * th, lv_obj_t * obj)
{
LV_UNUSED(th);
if(lv_obj_check_type(obj, &lv_btn_class)) {
lv_obj_add_style(obj, &style_btn, 0);
}
}
static void new_theme_init_and_set(void)
{
/*Initialize the styles*/
lv_style_init(&style_btn);
lv_style_set_bg_color(&style_btn, lv_palette_main(LV_PALETTE_GREEN));
lv_style_set_border_color(&style_btn, lv_palette_darken(LV_PALETTE_GREEN, 3));
lv_style_set_border_width(&style_btn, 3);
/*Initialize the new theme from the current theme*/
lv_theme_t * th_act = lv_disp_get_theme(NULL);
static lv_theme_t th_new;
th_new = *th_act;
/*Set the parent theme and the style apply callback for the new theme*/
(continuesonnextpage)
2.2. Styles 27


--- Page 32 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_theme_set_parent(&th_new, th_act);
lv_theme_set_apply_cb(&th_new, new_theme_apply_cb);
/*Assign the new theme to the current display*/
lv_disp_set_theme(NULL, &th_new);
}
/**
* Extending the current theme
*/
void lv_example_style_14(void)
{
lv_obj_t * btn;
lv_obj_t * label;
btn = lv_btn_create(lv_scr_act());
lv_obj_align(btn, LV_ALIGN_TOP_MID, 0, 20);
label = lv_label_create(btn);
lv_label_set_text(label, "Original theme");
new_theme_init_and_set();
btn = lv_btn_create(lv_scr_act());
lv_obj_align(btn, LV_ALIGN_BOTTOM_MID, 0, -20);
label = lv_label_create(btn);
lv_label_set_text(label, "New theme");
}
#endif
# Will be called when the styles of the base theme are already added
# to add new styles
class NewTheme(lv.theme_t):
def __init__(self):
super().__init__()
# Initialize the styles
self.style_btn = lv.style_t()
self.style_btn.init()
self.style_btn.set_bg_color(lv.palette_main(lv.PALETTE.GREEN))
self.style_btn.set_border_color(lv.palette_darken(lv.PALETTE.GREEN, 3))
self.style_btn.set_border_width(3)
# This theme is based on active theme
th_act = lv.theme_get_from_obj(lv.scr_act())
# This theme will be applied only after base theme is applied
self.set_parent(th_act)
class ExampleStyle_14:
def __init__(self):
#
(continuesonnextpage)
2.2. Styles 28


--- Page 33 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Extending the current theme
#
btn = lv.btn(lv.scr_act())
btn.align(lv.ALIGN.TOP_MID, 0, 20)
label = lv.label(btn)
label.set_text("Original theme")
self.new_theme_init_and_set()
btn = lv.btn(lv.scr_act())
btn.align(lv.ALIGN.BOTTOM_MID, 0, -20)
label = lv.label(btn)
label.set_text("New theme")
def new_theme_apply_cb(self, th, obj):
print(th,obj)
if obj.get_class() == lv.btn_class:
obj.add_style(self.th_new.style_btn, 0)
def new_theme_init_and_set(self):
print("new_theme_init_and_set")
# Initialize the new theme from the current theme
self.th_new = NewTheme()
self.th_new.set_apply_cb(self.new_theme_apply_cb)
lv.disp_get_default().set_theme(self.th_new)
exampleStyle_14 = ExampleStyle_14()
2.2.14 Opacity and Transformations
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_BTN && LV_USE_LABEL
/**
* Opacity and Transformations
*/
void lv_example_style_15(void)
{
lv_obj_t * btn;
lv_obj_t * label;
/*Normal button*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 40);
lv_obj_align(btn, LV_ALIGN_CENTER, 0, -70);
label = lv_label_create(btn);
lv_label_set_text(label, "Normal");
lv_obj_center(label);
(continuesonnextpage)
2.2. Styles 29


--- Page 34 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Set opacity
*The button and the label is rendered to a layer first and that layer is␣
,→blended*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 40);
lv_obj_set_style_opa(btn, LV_OPA_50, 0);
lv_obj_align(btn, LV_ALIGN_CENTER, 0, 0);
label = lv_label_create(btn);
lv_label_set_text(label, "Opa:50%");
lv_obj_center(label);
/*Set transformations
*The button and the label is rendered to a layer first and that layer is␣
,→transformed*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 40);
lv_obj_set_style_transform_angle(btn, 150, 0); /*15 deg*/
lv_obj_set_style_transform_zoom(btn, 256 + 64, 0); /*1.25x*/
lv_obj_set_style_transform_pivot_x(btn, 50, 0);
lv_obj_set_style_transform_pivot_y(btn, 20, 0);
lv_obj_set_style_opa(btn, LV_OPA_50, 0);
lv_obj_align(btn, LV_ALIGN_CENTER, 0, 70);
label = lv_label_create(btn);
lv_label_set_text(label, "Transf.");
lv_obj_center(label);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/styles/lv_example_style_15.py
2.3 Animations
2.3.1 Start animation on an event
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void anim_x_cb(void * var, int32_t v)
{
lv_obj_set_x(var, v);
}
static void sw_event_cb(lv_event_t * e)
{
lv_obj_t * sw = lv_event_get_target(e);
lv_obj_t * label = lv_event_get_user_data(e);
if(lv_obj_has_state(sw, LV_STATE_CHECKED)) {
lv_anim_t a;
(continuesonnextpage)
2.3. Animations 30


--- Page 35 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_init(&a);
lv_anim_set_var(&a, label);
lv_anim_set_values(&a, lv_obj_get_x(label), 100);
lv_anim_set_time(&a, 500);
lv_anim_set_exec_cb(&a, anim_x_cb);
lv_anim_set_path_cb(&a, lv_anim_path_overshoot);
lv_anim_start(&a);
}
else {
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, label);
lv_anim_set_values(&a, lv_obj_get_x(label), -lv_obj_get_width(label));
lv_anim_set_time(&a, 500);
lv_anim_set_exec_cb(&a, anim_x_cb);
lv_anim_set_path_cb(&a, lv_anim_path_ease_in);
lv_anim_start(&a);
}
}
/**
* Start animation on an event
*/
void lv_example_anim_1(void)
{
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Hello animations!");
lv_obj_set_pos(label, 100, 10);
lv_obj_t * sw = lv_switch_create(lv_scr_act());
lv_obj_center(sw);
lv_obj_add_state(sw, LV_STATE_CHECKED);
lv_obj_add_event_cb(sw, sw_event_cb, LV_EVENT_VALUE_CHANGED, label);
}
#endif
def anim_x_cb(label, v):
label.set_x(v)
def sw_event_cb(e,label):
sw = e.get_target()
if sw.has_state(lv.STATE.CHECKED):
a = lv.anim_t()
a.init()
a.set_var(label)
a.set_values(label.get_x(), 100)
a.set_time(500)
a.set_path_cb(lv.anim_t.path_overshoot)
a.set_custom_exec_cb(lambda a,val: anim_x_cb(label,val))
lv.anim_t.start(a)
else:
a = lv.anim_t()
a.init()
(continuesonnextpage)
2.3. Animations 31


--- Page 36 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a.set_var(label)
a.set_values(label.get_x(), -label.get_width())
a.set_time(500)
a.set_path_cb(lv.anim_t.path_ease_in)
a.set_custom_exec_cb(lambda a,val: anim_x_cb(label,val))
lv.anim_t.start(a)
#
# Start animation on an event
#
label = lv.label(lv.scr_act())
label.set_text("Hello animations!")
label.set_pos(100, 10)
sw = lv.switch(lv.scr_act())
sw.center()
sw.add_state(lv.STATE.CHECKED)
sw.add_event_cb(lambda e: sw_event_cb(e,label), lv.EVENT.VALUE_CHANGED, None)
2.3.2 Playback animation
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void anim_x_cb(void * var, int32_t v)
{
lv_obj_set_x(var, v);
}
static void anim_size_cb(void * var, int32_t v)
{
lv_obj_set_size(var, v, v);
}
/**
* Create a playback animation
*/
void lv_example_anim_2(void)
{
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_set_style_bg_color(obj, lv_palette_main(LV_PALETTE_RED), 0);
lv_obj_set_style_radius(obj, LV_RADIUS_CIRCLE, 0);
lv_obj_align(obj, LV_ALIGN_LEFT_MID, 10, 0);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, obj);
(continuesonnextpage)
2.3. Animations 32


--- Page 37 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_set_values(&a, 10, 50);
lv_anim_set_time(&a, 1000);
lv_anim_set_playback_delay(&a, 100);
lv_anim_set_playback_time(&a, 300);
lv_anim_set_repeat_delay(&a, 500);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_path_cb(&a, lv_anim_path_ease_in_out);
lv_anim_set_exec_cb(&a, anim_size_cb);
lv_anim_start(&a);
lv_anim_set_exec_cb(&a, anim_x_cb);
lv_anim_set_values(&a, 10, 240);
lv_anim_start(&a);
}
#endif
def anim_x_cb(obj, v):
obj.set_x(v)
def anim_size_cb(obj, v):
obj.set_size(v, v)
#
# Create a playback animation
#
obj = lv.obj(lv.scr_act())
obj.set_style_bg_color(lv.palette_main(lv.PALETTE.RED), 0)
obj.set_style_radius(lv.RADIUS.CIRCLE, 0)
obj.align(lv.ALIGN.LEFT_MID, 10, 0)
a1 = lv.anim_t()
a1.init()
a1.set_var(obj)
a1.set_values(10, 50)
a1.set_time(1000)
a1.set_playback_delay(100)
a1.set_playback_time(300)
a1.set_repeat_delay(500)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a1.set_path_cb(lv.anim_t.path_ease_in_out)
a1.set_custom_exec_cb(lambda a1,val: anim_size_cb(obj,val))
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_var(obj)
a2.set_values(10, 240)
a2.set_time(1000)
a2.set_playback_delay(100)
a2.set_playback_time(300)
a2.set_repeat_delay(500)
a2.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a2.set_path_cb(lv.anim_t.path_ease_in_out)
(continuesonnextpage)
2.3. Animations 33


--- Page 38 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a2.set_custom_exec_cb(lambda a1,val: anim_x_cb(obj,val))
lv.anim_t.start(a2)
2.3.3 Animation timeline
#include "../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
static lv_anim_timeline_t * anim_timeline = NULL;
static lv_obj_t * obj1 = NULL;
static lv_obj_t * obj2 = NULL;
static lv_obj_t * obj3 = NULL;
static const lv_coord_t obj_width = 90;
static const lv_coord_t obj_height = 70;
static void set_width(void * var, int32_t v)
{
lv_obj_set_width((lv_obj_t *)var, v);
}
static void set_height(void * var, int32_t v)
{
lv_obj_set_height((lv_obj_t *)var, v);
}
static void anim_timeline_create(void)
{
/* obj1 */
lv_anim_t a1;
lv_anim_init(&a1);
lv_anim_set_var(&a1, obj1);
lv_anim_set_values(&a1, 0, obj_width);
lv_anim_set_early_apply(&a1, false);
lv_anim_set_exec_cb(&a1, (lv_anim_exec_xcb_t)set_width);
lv_anim_set_path_cb(&a1, lv_anim_path_overshoot);
lv_anim_set_time(&a1, 300);
lv_anim_t a2;
lv_anim_init(&a2);
lv_anim_set_var(&a2, obj1);
lv_anim_set_values(&a2, 0, obj_height);
lv_anim_set_early_apply(&a2, false);
lv_anim_set_exec_cb(&a2, (lv_anim_exec_xcb_t)set_height);
lv_anim_set_path_cb(&a2, lv_anim_path_ease_out);
lv_anim_set_time(&a2, 300);
/* obj2 */
lv_anim_t a3;
lv_anim_init(&a3);
lv_anim_set_var(&a3, obj2);
lv_anim_set_values(&a3, 0, obj_width);
lv_anim_set_early_apply(&a3, false);
(continuesonnextpage)
2.3. Animations 34


--- Page 39 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_set_exec_cb(&a3, (lv_anim_exec_xcb_t)set_width);
lv_anim_set_path_cb(&a3, lv_anim_path_overshoot);
lv_anim_set_time(&a3, 300);
lv_anim_t a4;
lv_anim_init(&a4);
lv_anim_set_var(&a4, obj2);
lv_anim_set_values(&a4, 0, obj_height);
lv_anim_set_early_apply(&a4, false);
lv_anim_set_exec_cb(&a4, (lv_anim_exec_xcb_t)set_height);
lv_anim_set_path_cb(&a4, lv_anim_path_ease_out);
lv_anim_set_time(&a4, 300);
/* obj3 */
lv_anim_t a5;
lv_anim_init(&a5);
lv_anim_set_var(&a5, obj3);
lv_anim_set_values(&a5, 0, obj_width);
lv_anim_set_early_apply(&a5, false);
lv_anim_set_exec_cb(&a5, (lv_anim_exec_xcb_t)set_width);
lv_anim_set_path_cb(&a5, lv_anim_path_overshoot);
lv_anim_set_time(&a5, 300);
lv_anim_t a6;
lv_anim_init(&a6);
lv_anim_set_var(&a6, obj3);
lv_anim_set_values(&a6, 0, obj_height);
lv_anim_set_early_apply(&a6, false);
lv_anim_set_exec_cb(&a6, (lv_anim_exec_xcb_t)set_height);
lv_anim_set_path_cb(&a6, lv_anim_path_ease_out);
lv_anim_set_time(&a6, 300);
/* Create anim timeline */
anim_timeline = lv_anim_timeline_create();
lv_anim_timeline_add(anim_timeline, 0, &a1);
lv_anim_timeline_add(anim_timeline, 0, &a2);
lv_anim_timeline_add(anim_timeline, 200, &a3);
lv_anim_timeline_add(anim_timeline, 200, &a4);
lv_anim_timeline_add(anim_timeline, 400, &a5);
lv_anim_timeline_add(anim_timeline, 400, &a6);
}
static void btn_start_event_handler(lv_event_t * e)
{
lv_obj_t * btn = lv_event_get_target(e);
if(!anim_timeline) {
anim_timeline_create();
}
bool reverse = lv_obj_has_state(btn, LV_STATE_CHECKED);
lv_anim_timeline_set_reverse(anim_timeline, reverse);
lv_anim_timeline_start(anim_timeline);
}
static void btn_del_event_handler(lv_event_t * e)
{
(continuesonnextpage)
2.3. Animations 35


--- Page 40 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
LV_UNUSED(e);
if(anim_timeline) {
lv_anim_timeline_del(anim_timeline);
anim_timeline = NULL;
}
}
static void btn_stop_event_handler(lv_event_t * e)
{
LV_UNUSED(e);
if(anim_timeline) {
lv_anim_timeline_stop(anim_timeline);
}
}
static void slider_prg_event_handler(lv_event_t * e)
{
lv_obj_t * slider = lv_event_get_target(e);
if(!anim_timeline) {
anim_timeline_create();
}
int32_t progress = lv_slider_get_value(slider);
lv_anim_timeline_set_progress(anim_timeline, progress);
}
/**
* Create an animation timeline
*/
void lv_example_anim_timeline_1(void)
{
lv_obj_t * par = lv_scr_act();
lv_obj_set_flex_flow(par, LV_FLEX_FLOW_ROW);
lv_obj_set_flex_align(par, LV_FLEX_ALIGN_SPACE_AROUND, LV_FLEX_ALIGN_CENTER, LV_
,→FLEX_ALIGN_CENTER);
/* create btn_start */
lv_obj_t * btn_start = lv_btn_create(par);
lv_obj_add_event_cb(btn_start, btn_start_event_handler, LV_EVENT_VALUE_CHANGED,␣
,→NULL);
lv_obj_add_flag(btn_start, LV_OBJ_FLAG_IGNORE_LAYOUT);
lv_obj_add_flag(btn_start, LV_OBJ_FLAG_CHECKABLE);
lv_obj_align(btn_start, LV_ALIGN_TOP_MID, -100, 20);
lv_obj_t * label_start = lv_label_create(btn_start);
lv_label_set_text(label_start, "Start");
lv_obj_center(label_start);
/* create btn_del */
lv_obj_t * btn_del = lv_btn_create(par);
lv_obj_add_event_cb(btn_del, btn_del_event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_add_flag(btn_del, LV_OBJ_FLAG_IGNORE_LAYOUT);
lv_obj_align(btn_del, LV_ALIGN_TOP_MID, 0, 20);
lv_obj_t * label_del = lv_label_create(btn_del);
lv_label_set_text(label_del, "Delete");
(continuesonnextpage)
2.3. Animations 36


--- Page 41 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_center(label_del);
/* create btn_stop */
lv_obj_t * btn_stop = lv_btn_create(par);
lv_obj_add_event_cb(btn_stop, btn_stop_event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_add_flag(btn_stop, LV_OBJ_FLAG_IGNORE_LAYOUT);
lv_obj_align(btn_stop, LV_ALIGN_TOP_MID, 100, 20);
lv_obj_t * label_stop = lv_label_create(btn_stop);
lv_label_set_text(label_stop, "Stop");
lv_obj_center(label_stop);
/* create slider_prg */
lv_obj_t * slider_prg = lv_slider_create(par);
lv_obj_add_event_cb(slider_prg, slider_prg_event_handler, LV_EVENT_VALUE_CHANGED,␣
,→NULL);
lv_obj_add_flag(slider_prg, LV_OBJ_FLAG_IGNORE_LAYOUT);
lv_obj_align(slider_prg, LV_ALIGN_BOTTOM_MID, 0, -20);
lv_slider_set_range(slider_prg, 0, 65535);
/* create 3 objects */
obj1 = lv_obj_create(par);
lv_obj_set_size(obj1, obj_width, obj_height);
obj2 = lv_obj_create(par);
lv_obj_set_size(obj2, obj_width, obj_height);
obj3 = lv_obj_create(par);
lv_obj_set_size(obj3, obj_width, obj_height);
}
#endif
class LV_ExampleAnimTimeline_1(object):
def __init__(self):
self.obj_width = 120
self.obj_height = 150
#
# Create an animation timeline
#
self.par = lv.scr_act()
self.par.set_flex_flow(lv.FLEX_FLOW.ROW)
self.par.set_flex_align(lv.FLEX_ALIGN.SPACE_AROUND, lv.FLEX_ALIGN.CENTER, lv.
,→FLEX_ALIGN.CENTER)
self.btn_run = lv.btn(self.par)
self.btn_run.add_event_cb(self.btn_run_event_handler, lv.EVENT.VALUE_CHANGED,␣
,→None)
self.btn_run.add_flag(lv.obj.FLAG.IGNORE_LAYOUT)
self.btn_run.add_flag(lv.obj.FLAG.CHECKABLE)
self.btn_run.align(lv.ALIGN.TOP_MID, -50, 20)
self.label_run = lv.label(self.btn_run)
self.label_run.set_text("Run")
(continuesonnextpage)
2.3. Animations 37


--- Page 42 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
self.label_run.center()
self.btn_del = lv.btn(self.par)
self.btn_del.add_event_cb(self.btn_del_event_handler, lv.EVENT.CLICKED, None)
self.btn_del.add_flag(lv.obj.FLAG.IGNORE_LAYOUT)
self.btn_del.align(lv.ALIGN.TOP_MID, 50, 20)
self.label_del = lv.label(self.btn_del)
self.label_del.set_text("Stop")
self.label_del.center()
self.slider = lv.slider(self.par)
self.slider.add_event_cb(self.slider_prg_event_handler, lv.EVENT.VALUE_
,→CHANGED, None)
self.slider.add_flag(lv.obj.FLAG.IGNORE_LAYOUT)
self.slider.align(lv.ALIGN.BOTTOM_RIGHT, -20, -20)
self.slider.set_range(0, 65535)
self.obj1 = lv.obj(self.par)
self.obj1.set_size(self.obj_width, self.obj_height)
self.obj2 = lv.obj(self.par)
self.obj2.set_size(self.obj_width, self.obj_height)
self.obj3 = lv.obj(self.par)
self.obj3.set_size(self.obj_width, self.obj_height)
self.anim_timeline = None
def set_width(self,obj, v):
obj.set_width(v)
def set_height(self,obj, v):
obj.set_height(v)
def anim_timeline_create(self):
# obj1
self.a1 = lv.anim_t()
self.a1.init()
self.a1.set_values(0, self.obj_width)
self.a1.set_early_apply(False)
self.a1.set_custom_exec_cb(lambda a,v: self.set_width(self.obj1,v))
self.a1.set_path_cb(lv.anim_t.path_overshoot)
self.a1.set_time(300)
self.a2 = lv.anim_t()
self.a2.init()
self.a2.set_values(0, self.obj_height)
self.a2.set_early_apply(False)
self.a2.set_custom_exec_cb(lambda a,v: self.set_height(self.obj1,v))
self.a2.set_path_cb(lv.anim_t.path_ease_out)
self.a2.set_time(300)
# obj2
self.a3=lv.anim_t()
self.a3.init()
self.a3.set_values(0, self.obj_width)
(continuesonnextpage)
2.3. Animations 38


--- Page 43 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
self.a3.set_early_apply(False)
self.a3.set_custom_exec_cb(lambda a,v: self.set_width(self.obj2,v))
self.a3.set_path_cb(lv.anim_t.path_overshoot)
self.a3.set_time(300)
self.a4 = lv.anim_t()
self.a4.init()
self.a4.set_values(0, self.obj_height)
self.a4.set_early_apply(False)
self.a4.set_custom_exec_cb(lambda a,v: self.set_height(self.obj2,v))
self.a4.set_path_cb(lv.anim_t.path_ease_out)
self.a4.set_time(300)
# obj3
self.a5 = lv.anim_t()
self.a5.init()
self.a5.set_values(0, self.obj_width)
self.a5.set_early_apply(False)
self.a5.set_custom_exec_cb(lambda a,v: self.set_width(self.obj3,v))
self.a5.set_path_cb(lv.anim_t.path_overshoot)
self.a5.set_time(300)
self.a6 = lv.anim_t()
self.a6.init()
self.a6.set_values(0, self.obj_height)
self.a6.set_early_apply(False)
self.a6.set_custom_exec_cb(lambda a,v: self.set_height(self.obj3,v))
self.a6.set_path_cb(lv.anim_t.path_ease_out)
self.a6.set_time(300)
# Create anim timeline
print("Create new anim_timeline")
self.anim_timeline = lv.anim_timeline_create()
lv.anim_timeline_add(self.anim_timeline, 0, self.a1)
lv.anim_timeline_add(self.anim_timeline, 0, self.a2)
lv.anim_timeline_add(self.anim_timeline, 200, self.a3)
lv.anim_timeline_add(self.anim_timeline, 200, self.a4)
lv.anim_timeline_add(self.anim_timeline, 400, self.a5)
lv.anim_timeline_add(self.anim_timeline, 400, self.a6)
def slider_prg_event_handler(self,e):
slider = e.get_target()
if not self.anim_timeline:
self.anim_timeline_create()
progress = slider.get_value()
lv.anim_timeline_set_progress(self.anim_timeline, progress)
def btn_run_event_handler(self,e):
btn = e.get_target()
if not self.anim_timeline:
self.anim_timeline_create()
reverse = btn.has_state(lv.STATE.CHECKED)
lv.anim_timeline_set_reverse(self.anim_timeline,reverse)
(continuesonnextpage)
2.3. Animations 39


--- Page 44 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv.anim_timeline_start(self.anim_timeline)
def btn_del_event_handler(self,e):
if self.anim_timeline:
lv.anim_timeline_del(self.anim_timeline)
self.anim_timeline = None
lv_example_anim_timeline_1 = LV_ExampleAnimTimeline_1()
2.4 Events
2.4.1 Button click event
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void event_cb(lv_event_t * e)
{
LV_LOG_USER("Clicked");
static uint32_t cnt = 1;
lv_obj_t * btn = lv_event_get_target(e);
lv_obj_t * label = lv_obj_get_child(btn, 0);
lv_label_set_text_fmt(label, "%"LV_PRIu32, cnt);
cnt++;
}
/**
* Add click event to a button
*/
void lv_example_event_1(void)
{
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 50);
lv_obj_center(btn);
lv_obj_add_event_cb(btn, event_cb, LV_EVENT_CLICKED, NULL);
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text(label, "Click me!");
lv_obj_center(label);
}
#endif
class Event_1():
def __init__(self):
self.cnt = 1
#
# Add click event to a button
#
btn = lv.btn(lv.scr_act())
(continuesonnextpage)
2.4. Events 40


--- Page 45 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn.set_size(100, 50)
btn.center()
btn.add_event_cb(self.event_cb, lv.EVENT.CLICKED, None)
label = lv.label(btn)
label.set_text("Click me!")
label.center()
def event_cb(self,e):
print("Clicked")
btn = e.get_target()
label = btn.get_child(0)
label.set_text(str(self.cnt))
self.cnt += 1
evt1 = Event_1()
2.4.2 Handle multiple events
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * label = lv_event_get_user_data(e);
switch(code) {
case LV_EVENT_PRESSED:
lv_label_set_text(label, "The last button event:\nLV_EVENT_PRESSED");
break;
case LV_EVENT_CLICKED:
lv_label_set_text(label, "The last button event:\nLV_EVENT_CLICKED");
break;
case LV_EVENT_LONG_PRESSED:
lv_label_set_text(label, "The last button event:\nLV_EVENT_LONG_PRESSED");
break;
case LV_EVENT_LONG_PRESSED_REPEAT:
lv_label_set_text(label, "The last button event:\nLV_EVENT_LONG_PRESSED_
,→REPEAT");
break;
default:
break;
}
}
/**
* Handle multiple events
*/
void lv_example_event_2(void)
{
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 50);
(continuesonnextpage)
2.4. Events 41


--- Page 46 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_center(btn);
lv_obj_t * btn_label = lv_label_create(btn);
lv_label_set_text(btn_label, "Click me!");
lv_obj_center(btn_label);
lv_obj_t * info_label = lv_label_create(lv_scr_act());
lv_label_set_text(info_label, "The last button event:\nNone");
lv_obj_add_event_cb(btn, event_cb, LV_EVENT_ALL, info_label);
}
#endif
def event_cb(e,label):
code = e.get_code()
if code == lv.EVENT.PRESSED:
label.set_text("The last button event:\nLV_EVENT_PRESSED")
elif code == lv.EVENT.CLICKED:
label.set_text("The last button event:\nLV_EVENT_CLICKED")
elif code == lv.EVENT.LONG_PRESSED:
label.set_text("The last button event:\nLV_EVENT_LONG_PRESSED")
elif code == lv.EVENT.LONG_PRESSED_REPEAT:
label.set_text("The last button event:\nLV_EVENT_LONG_PRESSED_REPEAT")
btn = lv.btn(lv.scr_act())
btn.set_size(100, 50)
btn.center()
btn_label = lv.label(btn)
btn_label.set_text("Click me!")
btn_label.center()
info_label = lv.label(lv.scr_act())
info_label.set_text("The last button event:\nNone")
btn.add_event_cb(lambda e: event_cb(e,info_label), lv.EVENT.ALL, None)
2.4.3 Event bubbling
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_FLEX
static void event_cb(lv_event_t * e)
{
/*The original target of the event. Can be the buttons or the container*/
lv_obj_t * target = lv_event_get_target(e);
/*The current target is always the container as the event is added to it*/
lv_obj_t * cont = lv_event_get_current_target(e);
/*If container was clicked do nothing*/
if(target == cont) return;
/*Make the clicked buttons red*/
(continuesonnextpage)
2.4. Events 42


--- Page 47 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_bg_color(target, lv_palette_main(LV_PALETTE_RED), 0);
}
/**
* Demonstrate event bubbling
*/
void lv_example_event_3(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 290, 200);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW_WRAP);
uint32_t i;
for(i = 0; i < 30; i++) {
lv_obj_t * btn = lv_btn_create(cont);
lv_obj_set_size(btn, 80, 50);
lv_obj_add_flag(btn, LV_OBJ_FLAG_EVENT_BUBBLE);
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
lv_obj_add_event_cb(cont, event_cb, LV_EVENT_CLICKED, NULL);
}
#endif
def event_cb(e):
# The original target of the event. Can be the buttons or the container
target = e.get_target()
# print(type(target))
# If container was clicked do nothing
if type(target) != type(lv.btn()):
return
# Make the clicked buttons red
target.set_style_bg_color(lv.palette_main(lv.PALETTE.RED), 0)
#
# Demonstrate event bubbling
#
cont = lv.obj(lv.scr_act())
cont.set_size(320, 200)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
for i in range(30):
btn = lv.btn(cont)
btn.set_size(80, 50)
btn.add_flag(lv.obj.FLAG.EVENT_BUBBLE)
(continuesonnextpage)
2.4. Events 43


--- Page 48 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(btn)
label.set_text(str(i))
label.center()
cont.add_event_cb(event_cb, lv.EVENT.CLICKED, None)
2.5 Layouts
2.5.1 Flex
Asimplerowandacolumnlayoutwithflexbox
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* A simple row and a column layout with flexbox
*/
void lv_example_flex_1(void)
{
/*Create a container with ROW flex direction*/
lv_obj_t * cont_row = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont_row, 300, 75);
lv_obj_align(cont_row, LV_ALIGN_TOP_MID, 0, 5);
lv_obj_set_flex_flow(cont_row, LV_FLEX_FLOW_ROW);
/*Create a container with COLUMN flex direction*/
lv_obj_t * cont_col = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont_col, 200, 150);
lv_obj_align_to(cont_col, cont_row, LV_ALIGN_OUT_BOTTOM_MID, 0, 5);
lv_obj_set_flex_flow(cont_col, LV_FLEX_FLOW_COLUMN);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_obj_t * obj;
lv_obj_t * label;
/*Add items to the row*/
obj = lv_btn_create(cont_row);
lv_obj_set_size(obj, 100, LV_PCT(100));
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "Item: %"LV_PRIu32, i);
lv_obj_center(label);
/*Add items to the column*/
obj = lv_btn_create(cont_col);
lv_obj_set_size(obj, LV_PCT(100), LV_SIZE_CONTENT);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "Item: %"LV_PRIu32, i);
lv_obj_center(label);
(continuesonnextpage)
2.5. Layouts 44


--- Page 49 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
}
#endif
#
# A simple row and a column layout with flexbox
#
# Create a container with ROW flex direction
cont_row = lv.obj(lv.scr_act())
cont_row.set_size(300, 75)
cont_row.align(lv.ALIGN.TOP_MID, 0, 5)
cont_row.set_flex_flow(lv.FLEX_FLOW.ROW)
# Create a container with COLUMN flex direction
cont_col = lv.obj(lv.scr_act())
cont_col.set_size(200, 150)
cont_col.align_to(cont_row, lv.ALIGN.OUT_BOTTOM_MID, 0, 5)
cont_col.set_flex_flow(lv.FLEX_FLOW.COLUMN)
for i in range(10):
# Add items to the row
obj = lv.btn(cont_row)
obj.set_size(100, lv.pct(100))
label = lv.label(obj)
label.set_text("Item: {:d}".format(i))
label.center()
# Add items to the column
obj = lv.btn(cont_col)
obj.set_size(lv.pct(100), lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text("Item: {:d}".format(i))
label.center()
Arrangeitemsinrowswithwrapandevenspacing
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* Arrange items in rows with wrap and place the items to get even space around them.
*/
void lv_example_flex_2(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_flex_flow(&style, LV_FLEX_FLOW_ROW_WRAP);
lv_style_set_flex_main_place(&style, LV_FLEX_ALIGN_SPACE_EVENLY);
lv_style_set_layout(&style, LV_LAYOUT_FLEX);
(continuesonnextpage)
2.5. Layouts 45


--- Page 50 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_add_style(cont, &style, 0);
uint32_t i;
for(i = 0; i < 8; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 70, LV_SIZE_CONTENT);
lv_obj_add_flag(obj, LV_OBJ_FLAG_CHECKABLE);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
}
#endif
#
# Arrange items in rows with wrap and place the items to get even space around them.
#
style = lv.style_t()
style.init()
style.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
style.set_flex_main_place(lv.FLEX_ALIGN.SPACE_EVENLY)
style.set_layout(lv.LAYOUT_FLEX.value)
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.add_style(style, 0)
for i in range(8):
obj = lv.obj(cont)
obj.set_size(70, lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text("{:d}".format(i))
label.center()
Demonstrateflexgrow
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* Demonstrate flex grow.
*/
void lv_example_flex_3(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
(continuesonnextpage)
2.5. Layouts 46


--- Page 51 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW);
lv_obj_t * obj;
obj = lv_obj_create(cont);
lv_obj_set_size(obj, 40, 40); /*Fix size*/
obj = lv_obj_create(cont);
lv_obj_set_height(obj, 40);
lv_obj_set_flex_grow(obj, 1); /*1 portion from the free space*/
obj = lv_obj_create(cont);
lv_obj_set_height(obj, 40);
lv_obj_set_flex_grow(obj, 2); /*2 portion from the free space*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, 40, 40); /*Fix size. It is flushed to the right by␣
,→the "grow" items*/
}
#endif
#
# Demonstrate flex grow.
#
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW)
obj = lv.obj(cont)
obj.set_size(40, 40) # Fix size
obj = lv.obj(cont)
obj.set_height(40)
obj.set_flex_grow(1) # 1 portion from the free space
obj = lv.obj(cont)
obj.set_height(40)
obj.set_flex_grow(2) # 2 portion from the free space
obj = lv.obj(cont)
obj.set_size(40, 40) # Fix size. It is flushed to the right by the "grow"␣
,→items
2.5. Layouts 47


--- Page 52 ---


LVGLDocumentation8.3
Demonstrateflexgrow.
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* Reverse the order of flex items
*/
void lv_example_flex_4(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_COLUMN_REVERSE);
uint32_t i;
for(i = 0; i < 6; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 100, 50);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "Item: %"LV_PRIu32, i);
lv_obj_center(label);
}
}
#endif
#
# Reverse the order of flex items
#
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.COLUMN_REVERSE)
for i in range(6):
obj = lv.obj(cont)
obj.set_size(100, 50)
label = lv.label(obj)
label.set_text("Item: " + str(i))
label.center()
2.5. Layouts 48


--- Page 53 ---


LVGLDocumentation8.3
Demonstratecolumnandrowgapstyleproperties
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
static void row_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_row(obj, v, 0);
}
static void column_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_column(obj, v, 0);
}
/**
* Demonstrate the effect of column and row gap style properties
*/
void lv_example_flex_5(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW_WRAP);
uint32_t i;
for(i = 0; i < 9; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 70, LV_SIZE_CONTENT);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, cont);
lv_anim_set_values(&a, 0, 10);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_exec_cb(&a, row_gap_anim);
lv_anim_set_time(&a, 500);
lv_anim_set_playback_time(&a, 500);
lv_anim_start(&a);
lv_anim_set_exec_cb(&a, column_gap_anim);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 3000);
lv_anim_start(&a);
}
#endif
def row_gap_anim(obj, v):
obj.set_style_pad_row(v, 0)
(continuesonnextpage)
2.5. Layouts 49


--- Page 54 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
def column_gap_anim(obj, v):
obj.set_style_pad_column(v, 0)
#
# Demonstrate the effect of column and row gap style properties
#
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
for i in range(9):
obj = lv.obj(cont)
obj.set_size(70, lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text(str(i))
label.center()
a_row = lv.anim_t()
a_row.init()
a_row.set_var(cont)
a_row.set_values(0, 10)
a_row.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_row.set_time(500)
a_row.set_playback_time(500)
a_row.set_custom_exec_cb(lambda a,val: row_gap_anim(cont,val))
lv.anim_t.start(a_row)
a_col = lv.anim_t()
a_col.init()
a_col.set_var(cont)
a_col.set_values(0, 10)
a_col.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_col.set_time(3000)
a_col.set_playback_time(3000)
a_col.set_custom_exec_cb(lambda a,val: column_gap_anim(cont,val))
lv.anim_t.start(a_col)
RTLbasedirectionchangesorderoftheitems
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* RTL base direction changes order of the items.
* Also demonstrate how horizontal scrolling works with RTL.
*/
void lv_example_flex_6(void)
(continuesonnextpage)
2.5. Layouts 50


--- Page 55 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_style_base_dir(cont, LV_BASE_DIR_RTL, 0);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW_WRAP);
uint32_t i;
for(i = 0; i < 20; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 70, LV_SIZE_CONTENT);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
}
#endif
#
# RTL base direction changes order of the items.
# Also demonstrate how horizontal scrolling works with RTL.
#
cont = lv.obj(lv.scr_act())
cont.set_style_base_dir(lv.BASE_DIR.RTL,0)
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
for i in range(20):
obj = lv.obj(cont)
obj.set_size(70, lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text(str(i))
label.center()
2.5.2 Grid
Asimplegrid
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* A simple grid
*/
void lv_example_grid_1(void)
{
static lv_coord_t col_dsc[] = {70, 70, 70, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {50, 50, 50, LV_GRID_TEMPLATE_LAST};
(continuesonnextpage)
2.5. Layouts 51


--- Page 56 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_style_grid_column_dsc_array(cont, col_dsc, 0);
lv_obj_set_style_grid_row_dsc_array(cont, row_dsc, 0);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_layout(cont, LV_LAYOUT_GRID);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
obj = lv_btn_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "c%d, r%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# A simple grid
#
col_dsc = [70, 70, 70, lv.GRID_TEMPLATE.LAST]
row_dsc = [50, 50, 50, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_style_grid_column_dsc_array(col_dsc, 0)
cont.set_style_grid_row_dsc_array(row_dsc, 0)
cont.set_size(300, 220)
cont.center()
cont.set_layout(lv.LAYOUT_GRID.value)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.btn(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
(continuesonnextpage)
2.5. Layouts 52


--- Page 57 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label.set_text("c" +str(col) + "r" +str(row))
label.center()
Demonstratecellplacementandspan
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate cell placement and span
*/
void lv_example_grid_2(void)
{
static lv_coord_t col_dsc[] = {70, 70, 70, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {50, 50, 50, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_t * label;
lv_obj_t * obj;
/*Cell to 0;0 and align to to the start (left/top) horizontally and vertically␣
,→too*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_START, 0, 1,
LV_GRID_ALIGN_START, 0, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c0, r0");
/*Cell to 1;0 and align to to the start (left) horizontally and center vertically␣
,→too*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_START, 1, 1,
LV_GRID_ALIGN_CENTER, 0, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c1, r0");
/*Cell to 2;0 and align to to the start (left) horizontally and end (bottom)␣
,→vertically too*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_START, 2, 1,
LV_GRID_ALIGN_END, 0, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c2, r0");
/*Cell to 1;1 but 2 column wide (span = 2).Set width and height to stretched.*/
obj = lv_obj_create(cont);
(continuesonnextpage)
2.5. Layouts 53


--- Page 58 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, 1, 2,
LV_GRID_ALIGN_STRETCH, 1, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c1-2, r1");
/*Cell to 0;1 but 2 rows tall (span = 2).Set width and height to stretched.*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, 0, 1,
LV_GRID_ALIGN_STRETCH, 1, 2);
label = lv_label_create(obj);
lv_label_set_text(label, "c0\nr1-2");
}
#endif
#
# Demonstrate cell placement and span
#
col_dsc = [70, 70, 70, lv.GRID_TEMPLATE.LAST]
row_dsc = [50, 50, 50, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_grid_dsc_array(col_dsc, row_dsc)
cont.set_size(300, 220)
cont.center()
# Cell to 0;0 and align to the start (left/top) horizontally and vertically too
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.START, 0, 1,
lv.GRID_ALIGN.START, 0, 1)
label = lv.label(obj)
label.set_text("c0, r0")
# Cell to 1;0 and align to the start (left) horizontally and center vertically too
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.START, 1, 1,
lv.GRID_ALIGN.CENTER, 0, 1)
label = lv.label(obj)
label.set_text("c1, r0")
# Cell to 2;0 and align to the start (left) horizontally and end (bottom) vertically␣
,→too
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.START, 2, 1,
lv.GRID_ALIGN.END, 0, 1)
label = lv.label(obj)
label.set_text("c2, r0")
# Cell to 1;1 but 2 column wide (span = 2).Set width and height to stretched.
(continuesonnextpage)
2.5. Layouts 54


--- Page 59 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, 1, 2,
lv.GRID_ALIGN.STRETCH, 1, 1)
label = lv.label(obj)
label.set_text("c1-2, r1")
# Cell to 0;1 but 2 rows tall (span = 2).Set width and height to stretched.
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, 0, 1,
lv.GRID_ALIGN.STRETCH, 1, 2)
label = lv.label(obj)
label.set_text("c0\nr1-2")
Demonstrategrid's"freeunit"
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate grid's "free unit"
*/
void lv_example_grid_3(void)
{
/*Column 1: fix width 60 px
*Column 2: 1 unit from the remaining free space
*Column 3: 2 unit from the remaining free space*/
static lv_coord_t col_dsc[] = {60, LV_GRID_FR(1), LV_GRID_FR(2), LV_GRID_TEMPLATE_
,→LAST};
/*Row 1: fix width 50 px
*Row 2: 1 unit from the remaining free space
*Row 3: fix width 50 px*/
static lv_coord_t row_dsc[] = {50, LV_GRID_FR(1), 50, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
obj = lv_obj_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
(continuesonnextpage)
2.5. Layouts 55


--- Page 60 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# Demonstrate grid's "free unit"
#
# Column 1: fix width 60 px
# Column 2: 1 unit from the remaining free space
# Column 3: 2 unit from the remaining free space
col_dsc = [60, lv.grid_fr(1), lv.grid_fr(2), lv.GRID_TEMPLATE.LAST]
# Row 1: fix width 60 px
# Row 2: 1 unit from the remaining free space
# Row 3: fix width 60 px
row_dsc = [40, lv.grid_fr(1), 40, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_grid_dsc_array(col_dsc, row_dsc)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("%d,%d"%(col, row))
label.center()
2.5. Layouts 56


--- Page 61 ---


LVGLDocumentation8.3
Demonstratetrackplacement
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate track placement
*/
void lv_example_grid_4(void)
{
static lv_coord_t col_dsc[] = {60, 60, 60, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {45, 45, 45, LV_GRID_TEMPLATE_LAST};
/*Add space between the columns and move the rows to the bottom (end)*/
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_grid_align(cont, LV_GRID_ALIGN_SPACE_BETWEEN, LV_GRID_ALIGN_END);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
obj = lv_obj_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# Demonstrate track placement
#
col_dsc = [60, 60, 60, lv.GRID_TEMPLATE.LAST]
row_dsc = [40, 40, 40, lv.GRID_TEMPLATE.LAST]
# Add space between the columns and move the rows to the bottom (end)
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_grid_align(lv.GRID_ALIGN.SPACE_BETWEEN, lv.GRID_ALIGN.END)
cont.set_grid_dsc_array(col_dsc, row_dsc)
(continuesonnextpage)
2.5. Layouts 57


--- Page 62 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
cont.set_size(300, 220)
cont.center()
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("{:d}{:d}".format(col, row))
label.center()
Demonstratecolumnandrowgap
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
static void row_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_row(obj, v, 0);
}
static void column_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_column(obj, v, 0);
}
/**
* Demonstrate column and row gap
*/
void lv_example_grid_5(void)
{
/*60x60 cells*/
static lv_coord_t col_dsc[] = {60, 60, 60, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {45, 45, 45, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
(continuesonnextpage)
2.5. Layouts 58


--- Page 63 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
uint8_t row = i / 3;
obj = lv_obj_create(cont);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, cont);
lv_anim_set_values(&a, 0, 10);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_exec_cb(&a, row_gap_anim);
lv_anim_set_time(&a, 500);
lv_anim_set_playback_time(&a, 500);
lv_anim_start(&a);
lv_anim_set_exec_cb(&a, column_gap_anim);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 3000);
lv_anim_start(&a);
}
#endif
def row_gap_anim(obj, v):
obj.set_style_pad_row(v, 0)
def column_gap_anim(obj, v):
obj.set_style_pad_column(v, 0)
#
# Demonstrate column and row gap
#
# 60x60 cells
col_dsc = [60, 60, 60, lv.GRID_TEMPLATE.LAST]
row_dsc = [40, 40, 40, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_grid_dsc_array(col_dsc, row_dsc)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
(continuesonnextpage)
2.5. Layouts 59


--- Page 64 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("{:d},{:d}".format(col, row))
label.center()
a_row = lv.anim_t()
a_row.init()
a_row.set_var(cont)
a_row.set_values(0, 10)
a_row.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_row.set_time(500)
a_row.set_playback_time(500)
a_row. set_custom_exec_cb(lambda a,val: row_gap_anim(cont,val))
lv.anim_t.start(a_row)
a_col = lv.anim_t()
a_col.init()
a_col.set_var(cont)
a_col.set_values(0, 10)
a_col.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_col.set_time(500)
a_col.set_playback_time(500)
a_col. set_custom_exec_cb(lambda a,val: column_gap_anim(cont,val))
lv.anim_t.start(a_col)
DemonstrateRTLdirectionongrid
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate RTL direction on grid
*/
void lv_example_grid_6(void)
{
static lv_coord_t col_dsc[] = {60, 60, 60, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {45, 45, 45, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_style_base_dir(cont, LV_BASE_DIR_RTL, 0);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
(continuesonnextpage)
2.5. Layouts 60


--- Page 65 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
obj = lv_obj_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# Demonstrate RTL direction on grid
#
col_dsc = [60, 60, 60, lv.GRID_TEMPLATE.LAST]
row_dsc = [40, 40, 40, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_style_base_dir(lv.BASE_DIR.RTL,0)
cont.set_grid_dsc_array(col_dsc, row_dsc)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("{:d},{:d}".format(col, row))
label.center()
2.6 Scrolling
2.6.1 Nested scrolling
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Demonstrate how scrolling appears automatically
*/
void lv_example_scroll_1(void)
(continuesonnextpage)
2.6. Scrolling 61


--- Page 66 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
/*Create an object with the new style*/
lv_obj_t * panel = lv_obj_create(lv_scr_act());
lv_obj_set_size(panel, 200, 200);
lv_obj_center(panel);
lv_obj_t * child;
lv_obj_t * label;
child = lv_obj_create(panel);
lv_obj_set_pos(child, 0, 0);
lv_obj_set_size(child, 70, 70);
label = lv_label_create(child);
lv_label_set_text(label, "Zero");
lv_obj_center(label);
child = lv_obj_create(panel);
lv_obj_set_pos(child, 160, 80);
lv_obj_set_size(child, 80, 80);
lv_obj_t * child2 = lv_btn_create(child);
lv_obj_set_size(child2, 100, 50);
label = lv_label_create(child2);
lv_label_set_text(label, "Right");
lv_obj_center(label);
child = lv_obj_create(panel);
lv_obj_set_pos(child, 40, 160);
lv_obj_set_size(child, 100, 70);
label = lv_label_create(child);
lv_label_set_text(label, "Bottom");
lv_obj_center(label);
}
#endif
#
# Demonstrate how scrolling appears automatically
#
# Create an object with the new style
panel = lv.obj(lv.scr_act())
panel.set_size(200, 200)
panel.center()
child = lv.obj(panel)
child.set_pos(0, 0)
label = lv.label(child)
label.set_text("Zero")
label.center()
child = lv.obj(panel)
child.set_pos(-40, 100)
label = lv.label(child)
label.set_text("Left")
label.center()
(continuesonnextpage)
2.6. Scrolling 62


--- Page 67 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
child = lv.obj(panel)
child.set_pos(90, -30)
label = lv.label(child)
label.set_text("Top")
label.center()
child = lv.obj(panel)
child.set_pos(150, 80)
label = lv.label(child)
label.set_text("Right")
label.center()
child = lv.obj(panel)
child.set_pos(60, 170)
label = lv.label(child)
label.set_text("Bottom")
label.center()
2.6.2 Snapping
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_FLEX
static void sw_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * sw = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
lv_obj_t * list = lv_event_get_user_data(e);
if(lv_obj_has_state(sw, LV_STATE_CHECKED)) lv_obj_add_flag(list, LV_OBJ_FLAG_
,→SCROLL_ONE);
else lv_obj_clear_flag(list, LV_OBJ_FLAG_SCROLL_ONE);
}
}
/**
* Show an example to scroll snap
*/
void lv_example_scroll_2(void)
{
lv_obj_t * panel = lv_obj_create(lv_scr_act());
lv_obj_set_size(panel, 280, 120);
lv_obj_set_scroll_snap_x(panel, LV_SCROLL_SNAP_CENTER);
lv_obj_set_flex_flow(panel, LV_FLEX_FLOW_ROW);
lv_obj_align(panel, LV_ALIGN_CENTER, 0, 20);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_obj_t * btn = lv_btn_create(panel);
lv_obj_set_size(btn, 150, lv_pct(100));
(continuesonnextpage)
2.6. Scrolling 63


--- Page 68 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * label = lv_label_create(btn);
if(i == 3) {
lv_label_set_text_fmt(label, "Panel %"LV_PRIu32"\nno snap", i);
lv_obj_clear_flag(btn, LV_OBJ_FLAG_SNAPPABLE);
}
else {
lv_label_set_text_fmt(label, "Panel %"LV_PRIu32, i);
}
lv_obj_center(label);
}
lv_obj_update_snap(panel, LV_ANIM_ON);
#if LV_USE_SWITCH
/*Switch between "One scroll" and "Normal scroll" mode*/
lv_obj_t * sw = lv_switch_create(lv_scr_act());
lv_obj_align(sw, LV_ALIGN_TOP_RIGHT, -20, 10);
lv_obj_add_event_cb(sw, sw_event_cb, LV_EVENT_ALL, panel);
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "One scroll");
lv_obj_align_to(label, sw, LV_ALIGN_OUT_BOTTOM_MID, 0, 5);
#endif
}
#endif
def sw_event_cb(e,panel):
code = e.get_code()
sw = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
if sw.has_state(lv.STATE.CHECKED):
panel.add_flag(lv.obj.FLAG.SCROLL_ONE)
else:
panel.clear_flag(lv.obj.FLAG.SCROLL_ONE)
#
# Show an example to scroll snap
#
panel = lv.obj(lv.scr_act())
panel.set_size(280, 150)
panel.set_scroll_snap_x(lv.SCROLL_SNAP.CENTER)
panel.set_flex_flow(lv.FLEX_FLOW.ROW)
panel.center()
for i in range(10):
btn = lv.btn(panel)
btn.set_size(150, 100)
label = lv.label(btn)
if i == 3:
(continuesonnextpage)
2.6. Scrolling 64


--- Page 69 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label.set_text("Panel {:d}\nno snap".format(i))
btn.clear_flag(lv.obj.FLAG.SNAPPABLE)
else:
label.set_text("Panel {:d}".format(i))
label.center()
panel.update_snap(lv.ANIM.ON)
# Switch between "One scroll" and "Normal scroll" mode
sw = lv.switch(lv.scr_act())
sw.align(lv.ALIGN.TOP_RIGHT, -20, 10)
sw.add_event_cb(lambda evt: sw_event_cb(evt,panel), lv.EVENT.ALL, None)
label = lv.label(lv.scr_act())
label.set_text("One scroll")
label.align_to(sw, lv.ALIGN.OUT_BOTTOM_MID, 0, 5)
2.6.3 Floating button
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LIST
static uint32_t btn_cnt = 1;
static void float_btn_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * float_btn = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
lv_obj_t * list = lv_event_get_user_data(e);
char buf[32];
lv_snprintf(buf, sizeof(buf), "Track %d", (int)btn_cnt);
lv_obj_t * list_btn = lv_list_add_btn(list, LV_SYMBOL_AUDIO, buf);
btn_cnt++;
lv_obj_move_foreground(float_btn);
lv_obj_scroll_to_view(list_btn, LV_ANIM_ON);
}
}
/**
* Create a list with a floating button
*/
void lv_example_scroll_3(void)
{
lv_obj_t * list = lv_list_create(lv_scr_act());
lv_obj_set_size(list, 280, 220);
lv_obj_center(list);
for(btn_cnt = 1; btn_cnt <= 2; btn_cnt++) {
(continuesonnextpage)
2.6. Scrolling 65


--- Page 70 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
char buf[32];
lv_snprintf(buf, sizeof(buf), "Track %d", (int)btn_cnt);
lv_list_add_btn(list, LV_SYMBOL_AUDIO, buf);
}
lv_obj_t * float_btn = lv_btn_create(list);
lv_obj_set_size(float_btn, 50, 50);
lv_obj_add_flag(float_btn, LV_OBJ_FLAG_FLOATING);
lv_obj_align(float_btn, LV_ALIGN_BOTTOM_RIGHT, 0, -lv_obj_get_style_pad_
,→right(list, LV_PART_MAIN));
lv_obj_add_event_cb(float_btn, float_btn_event_cb, LV_EVENT_ALL, list);
lv_obj_set_style_radius(float_btn, LV_RADIUS_CIRCLE, 0);
lv_obj_set_style_bg_img_src(float_btn, LV_SYMBOL_PLUS, 0);
lv_obj_set_style_text_font(float_btn, lv_theme_get_font_large(float_btn), 0);
}
#endif
class ScrollExample_3():
def __init__(self):
self.btn_cnt = 1
#
# Create a list with a floating button
#
list = lv.list(lv.scr_act())
list.set_size(280, 220)
list.center()
for btn_cnt in range(2):
list.add_btn(lv.SYMBOL.AUDIO,"Track {:d}".format(btn_cnt))
float_btn = lv.btn(list)
float_btn.set_size(50, 50)
float_btn.add_flag(lv.obj.FLAG.FLOATING)
float_btn.align(lv.ALIGN.BOTTOM_RIGHT, 0, -list.get_style_pad_right(lv.PART.
,→MAIN))
float_btn.add_event_cb(lambda evt: self.float_btn_event_cb(evt,list), lv.
,→EVENT.ALL, None)
float_btn.set_style_radius(lv.RADIUS.CIRCLE, 0)
float_btn.set_style_bg_img_src(lv.SYMBOL.PLUS, 0)
float_btn.set_style_text_font(lv.theme_get_font_large(float_btn), 0)
def float_btn_event_cb(self,e,list):
code = e.get_code()
float_btn = e.get_target()
if code == lv.EVENT.CLICKED:
list_btn = list.add_btn(lv.SYMBOL.AUDIO, "Track {:d}".format(self.btn_
,→cnt))
self.btn_cnt += 1
float_btn.move_foreground()
list_btn.scroll_to_view(lv.ANIM.ON)
(continuesonnextpage)
2.6. Scrolling 66


--- Page 71 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
scroll_example_3 = ScrollExample_3()
2.6.4 Styling the scrollbars
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LIST
/**
* Styling the scrollbars
*/
void lv_example_scroll_4(void)
{
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_set_size(obj, 200, 100);
lv_obj_center(obj);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label,
"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n"
"Etiam dictum, tortor vestibulum lacinia laoreet, mi neque␣
,→consectetur neque, vel mattis odio dolor egestas ligula. \n"
"Sed vestibulum sapien nulla, id convallis ex porttitor nec. \n"
"Duis et massa eu libero accumsan faucibus a in arcu. \n"
"Ut pulvinar odio lorem, vel tempus turpis condimentum quis.␣
,→Nam consectetur condimentum sem in auctor. \n"
"Sed nisl augue, venenatis in blandit et, gravida ac tortor. \n"
"Etiam dapibus elementum suscipit. \n"
"Proin mollis sollicitudin convallis. \n"
"Integer dapibus tempus arcu nec viverra. \n"
"Donec molestie nulla enim, eu interdum velit placerat quis. \n"
"Donec id efficitur risus, at molestie turpis. \n"
"Suspendisse vestibulum consectetur nunc ut commodo. \n"
"Fusce molestie rhoncus nisi sit amet tincidunt. \n"
"Suspendisse a nunc ut magna ornare volutpat.");
/*Remove the style of scrollbar to have clean start*/
lv_obj_remove_style(obj, NULL, LV_PART_SCROLLBAR | LV_STATE_ANY);
/*Create a transition the animate the some properties on state change*/
static const lv_style_prop_t props[] = {LV_STYLE_BG_OPA, LV_STYLE_WIDTH, 0};
static lv_style_transition_dsc_t trans;
lv_style_transition_dsc_init(&trans, props, lv_anim_path_linear, 200, 0, NULL);
/*Create a style for the scrollbars*/
static lv_style_t style;
lv_style_init(&style);
lv_style_set_width(&style, 4); /*Width of the scrollbar*/
lv_style_set_pad_right(&style, 5); /*Space from the parallel side*/
lv_style_set_pad_top(&style, 5); /*Space from the perpendicular side*/
lv_style_set_radius(&style, 2);
lv_style_set_bg_opa(&style, LV_OPA_70);
(continuesonnextpage)
2.6. Scrolling 67


--- Page 72 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_border_color(&style, lv_palette_darken(LV_PALETTE_BLUE, 3));
lv_style_set_border_width(&style, 2);
lv_style_set_shadow_width(&style, 8);
lv_style_set_shadow_spread(&style, 2);
lv_style_set_shadow_color(&style, lv_palette_darken(LV_PALETTE_BLUE, 1));
lv_style_set_transition(&style, &trans);
/*Make the scrollbars wider and use 100% opacity when scrolled*/
static lv_style_t style_scrolled;
lv_style_init(&style_scrolled);
lv_style_set_width(&style_scrolled, 8);
lv_style_set_bg_opa(&style_scrolled, LV_OPA_COVER);
lv_obj_add_style(obj, &style, LV_PART_SCROLLBAR);
lv_obj_add_style(obj, &style_scrolled, LV_PART_SCROLLBAR | LV_STATE_SCROLLED);
}
#endif
#
# Styling the scrollbars
#
obj = lv.obj(lv.scr_act())
obj.set_size(200, 100)
obj.center()
label = lv.label(obj)
label.set_text(
"""
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Etiam dictum, tortor vestibulum lacinia laoreet, mi neque consectetur neque, vel␣
,→mattis odio dolor egestas ligula.
Sed vestibulum sapien nulla, id convallis ex porttitor nec.
Duis et massa eu libero accumsan faucibus a in arcu.
Ut pulvinar odio lorem, vel tempus turpis condimentum quis. Nam consectetur␣
,→condimentum sem in auctor.
Sed nisl augue, venenatis in blandit et, gravida ac tortor.
Etiam dapibus elementum suscipit.
Proin mollis sollicitudin convallis.
Integer dapibus tempus arcu nec viverra.
Donec molestie nulla enim, eu interdum velit placerat quis.
Donec id efficitur risus, at molestie turpis.
Suspendisse vestibulum consectetur nunc ut commodo.
Fusce molestie rhoncus nisi sit amet tincidunt.
Suspendisse a nunc ut magna ornare volutpat.
""")
# Remove the style of scrollbar to have clean start
obj.remove_style(None, lv.PART.SCROLLBAR | lv.STATE.ANY)
# Create a transition the animate the some properties on state change
props = [lv.STYLE.BG_OPA, lv.STYLE.WIDTH, 0]
trans = lv.style_transition_dsc_t()
(continuesonnextpage)
2.6. Scrolling 68


--- Page 73 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
trans.init(props, lv.anim_t.path_linear, 200, 0, None)
# Create a style for the scrollbars
style = lv.style_t()
style.init()
style.set_width(4) # Width of the scrollbar
style.set_pad_right(5) # Space from the parallel side
style.set_pad_top(5) # Space from the perpendicular side
style.set_radius(2)
style.set_bg_opa(lv.OPA._70)
style.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_border_color(lv.palette_darken(lv.PALETTE.BLUE, 3))
style.set_border_width(2)
style.set_shadow_width(8)
style.set_shadow_spread(2)
style.set_shadow_color(lv.palette_darken(lv.PALETTE.BLUE, 1))
style.set_transition(trans)
# Make the scrollbars wider and use 100% opacity when scrolled
style_scrolled = lv.style_t()
style_scrolled.init()
style_scrolled.set_width(8)
style_scrolled.set_bg_opa(lv.OPA.COVER)
obj.add_style(style, lv.PART.SCROLLBAR)
obj.add_style(style_scrolled, lv.PART.SCROLLBAR | lv.STATE.SCROLLED)
2.6.5 Right to left scrolling
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_FONT_DEJAVU_16_PERSIAN_HEBREW
/**
* Scrolling with Right To Left base direction
*/
void lv_example_scroll_5(void)
{
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_set_style_base_dir(obj, LV_BASE_DIR_RTL, 0);
lv_obj_set_size(obj, 200, 100);
lv_obj_center(obj);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label,
"رلورتنکُورکیم هب) :یسیلگنا Microcontroller) یا هنوگ هدنزادرپزیر␣
,→تسا هک یاراد هٔظفاح یسرتسد یفداصت (RAM) و هٔظفاح یندناوخ طقف (ROM)، ،رمیات یاه تروپ␣
,→یدورو و یجورخ (I/O) و هاگرد یبیترت (Serial Port تروپ ،(لایرس نورد دوخ هشارت ،تسا و␣
,→دناوت یم هب ییاهنت یاهرازبا رگید ار لرتنک .دنک هب ترابع رگید کی ،رلرتنکورکیم رادم␣
,→عمتجم یکچوک تسا هک زا کی CPU کچوک و یازجا یرگید دننام ،رمیات یاه هاگرد یدورو و یجورخ␣
,→گولانآ و لاتیجید و هظفاح لیکشت .تسا هدش");
lv_obj_set_width(label, 400);
(continuesonnextpage)
2.6. Scrolling 69


--- Page 74 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_text_font(label, &lv_font_dejavu_16_persian_hebrew, 0);
}
#endif
#
# Scrolling with Right To Left base direction
#
obj = lv.obj(lv.scr_act())
obj.set_style_base_dir(lv.BASE_DIR.RTL, 0)
obj.set_size(200, 100)
obj.center()
label = lv.label(obj)
label.set_text("رلورتنکُورکیم هب) :یسیلگنا Microcontroller) یا هنوگ هدنزادرپزیر تسا هک␣
,→یاراد هٔظفاح یسرتسد یفداصت (RAM) و هٔظفاح یندناوخ طقف (ROM)، ،رمیات یاه تروپ یدورو و␣
,→یجورخ (I/O) و هاگرد یبیترت (Serial Port تروپ ،(لایرس نورد دوخ هشارت ،تسا و دناوت یم␣
,→هب ییاهنت یاهرازبا رگید ار لرتنک .دنک هب ترابع رگید کی ،رلرتنکورکیم رادم عمتجم␣
,→یکچوک تسا هک زا کی CPU کچوک و یازجا یرگید دننام ،رمیات یاه هاگرد یدورو و یجورخ␣
,→گولانآ و لاتیجید و هظفاح لیکشت .تسا هدش")
label.set_width(400)
label.set_style_text_font(lv.font_dejavu_16_persian_hebrew, 0)
2.6.6 Translate on scroll
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_FLEX
static void scroll_event_cb(lv_event_t * e)
{
lv_obj_t * cont = lv_event_get_target(e);
lv_area_t cont_a;
lv_obj_get_coords(cont, &cont_a);
lv_coord_t cont_y_center = cont_a.y1 + lv_area_get_height(&cont_a) / 2;
lv_coord_t r = lv_obj_get_height(cont) * 7 / 10;
uint32_t i;
uint32_t child_cnt = lv_obj_get_child_cnt(cont);
for(i = 0; i < child_cnt; i++) {
lv_obj_t * child = lv_obj_get_child(cont, i);
lv_area_t child_a;
lv_obj_get_coords(child, &child_a);
lv_coord_t child_y_center = child_a.y1 + lv_area_get_height(&child_a) / 2;
lv_coord_t diff_y = child_y_center - cont_y_center;
diff_y = LV_ABS(diff_y);
/*Get the x of diff_y on a circle.*/
lv_coord_t x;
/*If diff_y is out of the circle use the last point of the circle (the␣
,→radius)*/
(continuesonnextpage)
2.6. Scrolling 70


--- Page 75 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
if(diff_y >= r) {
x = r;
}
else {
/*Use Pythagoras theorem to get x from radius and y*/
uint32_t x_sqr = r * r - diff_y * diff_y;
lv_sqrt_res_t res;
lv_sqrt(x_sqr, &res, 0x8000); /*Use lvgl's built in sqrt root function*/
x = r - res.i;
}
/*Translate the item by the calculated X coordinate*/
lv_obj_set_style_translate_x(child, x, 0);
/*Use some opacity with larger translations*/
lv_opa_t opa = lv_map(x, 0, r, LV_OPA_TRANSP, LV_OPA_COVER);
lv_obj_set_style_opa(child, LV_OPA_COVER - opa, 0);
}
}
/**
* Translate the object as they scroll
*/
void lv_example_scroll_6(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 200, 200);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_COLUMN);
lv_obj_add_event_cb(cont, scroll_event_cb, LV_EVENT_SCROLL, NULL);
lv_obj_set_style_radius(cont, LV_RADIUS_CIRCLE, 0);
lv_obj_set_style_clip_corner(cont, true, 0);
lv_obj_set_scroll_dir(cont, LV_DIR_VER);
lv_obj_set_scroll_snap_y(cont, LV_SCROLL_SNAP_CENTER);
lv_obj_set_scrollbar_mode(cont, LV_SCROLLBAR_MODE_OFF);
uint32_t i;
for(i = 0; i < 20; i++) {
lv_obj_t * btn = lv_btn_create(cont);
lv_obj_set_width(btn, lv_pct(100));
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text_fmt(label, "Button %"LV_PRIu32, i);
}
/*Update the buttons position manually for first*/
lv_event_send(cont, LV_EVENT_SCROLL, NULL);
/*Be sure the fist button is in the middle*/
lv_obj_scroll_to_view(lv_obj_get_child(cont, 0), LV_ANIM_OFF);
}
#endif
def scroll_event_cb(e):
(continuesonnextpage)
2.6. Scrolling 71


--- Page 76 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
cont = e.get_target()
cont_a = lv.area_t()
cont.get_coords(cont_a)
cont_y_center = cont_a.y1 + cont_a.get_height() // 2
r = cont.get_height() * 7 // 10
child_cnt = cont.get_child_cnt()
for i in range(child_cnt):
child = cont.get_child(i)
child_a = lv.area_t()
child.get_coords(child_a)
child_y_center = child_a.y1 + child_a.get_height() // 2
diff_y = child_y_center - cont_y_center
diff_y = abs(diff_y)
# Get the x of diff_y on a circle.
# If diff_y is out of the circle use the last point of the circle (the radius)
if diff_y >= r:
x = r
else:
# Use Pythagoras theorem to get x from radius and y
x_sqr = r * r - diff_y * diff_y
res = lv.sqrt_res_t()
lv.sqrt(x_sqr, res, 0x8000) # Use lvgl's built in sqrt root function
x = r - res.i
# Translate the item by the calculated X coordinate
child.set_style_translate_x(x, 0)
# Use some opacity with larger translations
opa = lv.map(x, 0, r, lv.OPA.TRANSP, lv.OPA.COVER)
child.set_style_opa(lv.OPA.COVER - opa, 0)
#
# Translate the object as they scroll
#
cont = lv.obj(lv.scr_act())
cont.set_size(200, 200)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.COLUMN)
cont.add_event_cb(scroll_event_cb, lv.EVENT.SCROLL, None)
cont.set_style_radius(lv.RADIUS.CIRCLE, 0)
cont.set_style_clip_corner(True, 0)
cont.set_scroll_dir(lv.DIR.VER)
cont.set_scroll_snap_y(lv.SCROLL_SNAP.CENTER)
cont.set_scrollbar_mode(lv.SCROLLBAR_MODE.OFF)
for i in range(20):
btn = lv.btn(cont)
btn.set_width(lv.pct(100))
(continuesonnextpage)
2.6. Scrolling 72


--- Page 77 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(btn)
label.set_text("Button " + str(i))
# Update the buttons position manually for first*
lv.event_send(cont, lv.EVENT.SCROLL, None)
# Be sure the fist button is in the middle
#lv.obj.scroll_to_view(cont.get_child(0), lv.ANIM.OFF)
cont.get_child(0).scroll_to_view(lv.ANIM.OFF)
2.7 Widgets
2.7.1 Base object
Baseobjectswithcustomstyles
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
void lv_example_obj_1(void)
{
lv_obj_t * obj1;
obj1 = lv_obj_create(lv_scr_act());
lv_obj_set_size(obj1, 100, 50);
lv_obj_align(obj1, LV_ALIGN_CENTER, -60, -30);
static lv_style_t style_shadow;
lv_style_init(&style_shadow);
lv_style_set_shadow_width(&style_shadow, 10);
lv_style_set_shadow_spread(&style_shadow, 5);
lv_style_set_shadow_color(&style_shadow, lv_palette_main(LV_PALETTE_BLUE));
lv_obj_t * obj2;
obj2 = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj2, &style_shadow, 0);
lv_obj_align(obj2, LV_ALIGN_CENTER, 60, 30);
}
#endif
obj1 = lv.obj(lv.scr_act())
obj1.set_size(100, 50)
obj1.align(lv.ALIGN.CENTER, -60, -30)
style_shadow = lv.style_t()
style_shadow.init()
style_shadow.set_shadow_width(10)
style_shadow.set_shadow_spread(5)
style_shadow.set_shadow_color(lv.palette_main(lv.PALETTE.BLUE))
obj2 = lv.obj(lv.scr_act())
obj2.add_style(style_shadow, 0)
obj2.align(lv.ALIGN.CENTER, 60, 30)
2.7. Widgets 73


--- Page 78 ---


LVGLDocumentation8.3
Makeanobjectdraggable
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
static void drag_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_indev_t * indev = lv_indev_get_act();
if(indev == NULL) return;
lv_point_t vect;
lv_indev_get_vect(indev, &vect);
lv_coord_t x = lv_obj_get_x(obj) + vect.x;
lv_coord_t y = lv_obj_get_y(obj) + vect.y;
lv_obj_set_pos(obj, x, y);
}
/**
* Make an object dragable.
*/
void lv_example_obj_2(void)
{
lv_obj_t * obj;
obj = lv_obj_create(lv_scr_act());
lv_obj_set_size(obj, 150, 100);
lv_obj_add_event_cb(obj, drag_event_handler, LV_EVENT_PRESSING, NULL);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label, "Drag me");
lv_obj_center(label);
}
#endif
def drag_event_handler(e):
obj = e.get_target()
indev = lv.indev_get_act()
vect = lv.point_t()
indev.get_vect(vect)
x = obj.get_x() + vect.x
y = obj.get_y() + vect.y
obj.set_pos(x, y)
#
# Make an object dragable.
#
obj = lv.obj(lv.scr_act())
obj.set_size(150, 100)
obj.add_event_cb(drag_event_handler, lv.EVENT.PRESSING, None)
(continuesonnextpage)
2.7. Widgets 74


--- Page 79 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(obj)
label.set_text("Drag me")
label.center()
2.7.2 Arc
SimpleArc
#include "../../lv_examples.h"
#if LV_USE_ARC && LV_BUILD_EXAMPLES
static void value_changed_event_cb(lv_event_t * e);
void lv_example_arc_1(void)
{
lv_obj_t * label = lv_label_create(lv_scr_act());
/*Create an Arc*/
lv_obj_t * arc = lv_arc_create(lv_scr_act());
lv_obj_set_size(arc, 150, 150);
lv_arc_set_rotation(arc, 135);
lv_arc_set_bg_angles(arc, 0, 270);
lv_arc_set_value(arc, 10);
lv_obj_center(arc);
lv_obj_add_event_cb(arc, value_changed_event_cb, LV_EVENT_VALUE_CHANGED, label);
/*Manually update the label for the first time*/
lv_event_send(arc, LV_EVENT_VALUE_CHANGED, NULL);
}
static void value_changed_event_cb(lv_event_t * e)
{
lv_obj_t * arc = lv_event_get_target(e);
lv_obj_t * label = lv_event_get_user_data(e);
lv_label_set_text_fmt(label, "%d%%", lv_arc_get_value(arc));
/*Rotate the label to the current position of the arc*/
lv_arc_rotate_obj_to_angle(arc, label, 25);
}
#endif
# Create an Arc
arc = lv.arc(lv.scr_act())
arc.set_end_angle(200)
arc.set_size(150, 150)
arc.center()
2.7. Widgets 75


--- Page 80 ---


LVGLDocumentation8.3
LoaderwithArc
#include "../../lv_examples.h"
#if LV_USE_ARC && LV_BUILD_EXAMPLES
static void set_angle(void * obj, int32_t v)
{
lv_arc_set_value(obj, v);
}
/**
* Create an arc which acts as a loader.
*/
void lv_example_arc_2(void)
{
/*Create an Arc*/
lv_obj_t * arc = lv_arc_create(lv_scr_act());
lv_arc_set_rotation(arc, 270);
lv_arc_set_bg_angles(arc, 0, 360);
lv_obj_remove_style(arc, NULL, LV_PART_KNOB); /*Be sure the knob is not␣
,→displayed*/
lv_obj_clear_flag(arc, LV_OBJ_FLAG_CLICKABLE); /*To not allow adjusting by␣
,→click*/
lv_obj_center(arc);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, arc);
lv_anim_set_exec_cb(&a, set_angle);
lv_anim_set_time(&a, 1000);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE); /*Just for the demo*/
lv_anim_set_repeat_delay(&a, 500);
lv_anim_set_values(&a, 0, 100);
lv_anim_start(&a);
}
#endif
#
# An `lv_timer` to call periodically to set the angles of the arc
#
class ArcLoader():
def __init__(self):
self.a = 270
def arc_loader_cb(self,tim,arc):
# print(tim,arc)
self.a += 5
arc.set_end_angle(self.a)
if self.a >= 270 + 360:
tim._del()
(continuesonnextpage)
2.7. Widgets 76


--- Page 81 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#
# Create an arc which acts as a loader.
#
# Create an Arc
arc = lv.arc(lv.scr_act())
arc.set_bg_angles(0, 360)
arc.set_angles(270, 270)
arc.center()
# create the loader
arc_loader = ArcLoader()
# Create an `lv_timer` to update the arc.
timer = lv.timer_create_basic()
timer.set_period(20)
timer.set_cb(lambda src: arc_loader.arc_loader_cb(timer,arc))
2.7.3 Bar
SimpleBar
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
void lv_example_bar_1(void)
{
lv_obj_t * bar1 = lv_bar_create(lv_scr_act());
lv_obj_set_size(bar1, 200, 20);
lv_obj_center(bar1);
lv_bar_set_value(bar1, 70, LV_ANIM_OFF);
}
#endif
bar1 = lv.bar(lv.scr_act())
bar1.set_size(200, 20)
bar1.center()
bar1.set_value(70, lv.ANIM.OFF)
2.7. Widgets 77


--- Page 82 ---


LVGLDocumentation8.3
Stylingabar
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
/**
* Example of styling the bar
*/
void lv_example_bar_2(void)
{
static lv_style_t style_bg;
static lv_style_t style_indic;
lv_style_init(&style_bg);
lv_style_set_border_color(&style_bg, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_border_width(&style_bg, 2);
lv_style_set_pad_all(&style_bg, 6); /*To make the indicator smaller*/
lv_style_set_radius(&style_bg, 6);
lv_style_set_anim_time(&style_bg, 1000);
lv_style_init(&style_indic);
lv_style_set_bg_opa(&style_indic, LV_OPA_COVER);
lv_style_set_bg_color(&style_indic, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_radius(&style_indic, 3);
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_remove_style_all(bar); /*To have a clean start*/
lv_obj_add_style(bar, &style_bg, 0);
lv_obj_add_style(bar, &style_indic, LV_PART_INDICATOR);
lv_obj_set_size(bar, 200, 20);
lv_obj_center(bar);
lv_bar_set_value(bar, 100, LV_ANIM_ON);
}
#endif
#
# Example of styling the bar
#
style_bg = lv.style_t()
style_indic = lv.style_t()
style_bg.init()
style_bg.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style_bg.set_border_width(2)
style_bg.set_pad_all(6) # To make the indicator smaller
style_bg.set_radius(6)
style_bg.set_anim_time(1000)
style_indic.init()
style_indic.set_bg_opa(lv.OPA.COVER)
style_indic.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style_indic.set_radius(3)
bar = lv.bar(lv.scr_act())
bar.remove_style_all() # To have a clean start
(continuesonnextpage)
2.7. Widgets 78


--- Page 83 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
bar.add_style(style_bg, 0)
bar.add_style(style_indic, lv.PART.INDICATOR)
bar.set_size(200, 20)
bar.center()
bar.set_value(100, lv.ANIM.ON)
Temperaturemeter
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
static void set_temp(void * bar, int32_t temp)
{
lv_bar_set_value(bar, temp, LV_ANIM_ON);
}
/**
* A temperature meter example
*/
void lv_example_bar_3(void)
{
static lv_style_t style_indic;
lv_style_init(&style_indic);
lv_style_set_bg_opa(&style_indic, LV_OPA_COVER);
lv_style_set_bg_color(&style_indic, lv_palette_main(LV_PALETTE_RED));
lv_style_set_bg_grad_color(&style_indic, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_bg_grad_dir(&style_indic, LV_GRAD_DIR_VER);
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_add_style(bar, &style_indic, LV_PART_INDICATOR);
lv_obj_set_size(bar, 20, 200);
lv_obj_center(bar);
lv_bar_set_range(bar, -20, 40);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_temp);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 3000);
lv_anim_set_var(&a, bar);
lv_anim_set_values(&a, -20, 40);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
def set_temp(bar, temp):
bar.set_value(temp, lv.ANIM.ON)
#
(continuesonnextpage)
2.7. Widgets 79


--- Page 84 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# A temperature meter example
#
style_indic = lv.style_t()
style_indic.init()
style_indic.set_bg_opa(lv.OPA.COVER)
style_indic.set_bg_color(lv.palette_main(lv.PALETTE.RED))
style_indic.set_bg_grad_color(lv.palette_main(lv.PALETTE.BLUE))
style_indic.set_bg_grad_dir(lv.GRAD_DIR.VER)
bar = lv.bar(lv.scr_act())
bar.add_style(style_indic, lv.PART.INDICATOR)
bar.set_size(20, 200)
bar.center()
bar.set_range(-20, 40)
a = lv.anim_t()
a.init()
a.set_time(3000)
a.set_playback_time(3000)
a.set_var(bar)
a.set_values(-20, 40)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a.set_custom_exec_cb(lambda a, val: set_temp(bar,val))
lv.anim_t.start(a)
Stripepatternandrangevalue
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
/**
* Bar with stripe pattern and ranged value
*/
void lv_example_bar_4(void)
{
LV_IMG_DECLARE(img_skew_strip);
static lv_style_t style_indic;
lv_style_init(&style_indic);
lv_style_set_bg_img_src(&style_indic, &img_skew_strip);
lv_style_set_bg_img_tiled(&style_indic, true);
lv_style_set_bg_img_opa(&style_indic, LV_OPA_30);
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_add_style(bar, &style_indic, LV_PART_INDICATOR);
lv_obj_set_size(bar, 260, 20);
lv_obj_center(bar);
lv_bar_set_mode(bar, LV_BAR_MODE_RANGE);
lv_bar_set_value(bar, 90, LV_ANIM_OFF);
lv_bar_set_start_value(bar, 20, LV_ANIM_OFF);
(continuesonnextpage)
2.7. Widgets 80


--- Page 85 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
#
# get an icon
#
def get_icon(filename,xres,yres):
try:
sdl_filename = "../../assets/" + filename + "_" + str(xres) + "x" + str(yres)␣
,→+ "_argb8888.fnt"
print("file name: ", sdl_filename)
with open(sdl_filename,'rb') as f:
icon_data = f.read()
except:
print("Could not find image file: " + filename)
return None
icon_dsc = lv.img_dsc_t(
{
"header": {"always_zero": 0, "w": xres, "h": yres, "cf": lv.img.CF.TRUE_
,→COLOR_ALPHA},
"data": icon_data,
"data_size": len(icon_data),
}
)
return icon_dsc
#
# Bar with stripe pattern and ranged value
#
img_skew_strip_dsc = get_icon("img_skew_strip",80,20)
style_indic = lv.style_t()
style_indic.init()
style_indic.set_bg_img_src(img_skew_strip_dsc)
style_indic.set_bg_img_tiled(True)
style_indic.set_bg_img_opa(lv.OPA._30)
bar = lv.bar(lv.scr_act())
bar.add_style(style_indic, lv.PART.INDICATOR)
bar.set_size(260, 20)
bar.center()
bar.set_mode(lv.bar.MODE.RANGE)
bar.set_value(90, lv.ANIM.OFF)
bar.set_start_value(20, lv.ANIM.OFF)
2.7. Widgets 81


--- Page 86 ---


LVGLDocumentation8.3
BarwithLTRandRTLbasedirection
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
/**
* Bar with LTR and RTL base direction
*/
void lv_example_bar_5(void)
{
lv_obj_t * label;
lv_obj_t * bar_ltr = lv_bar_create(lv_scr_act());
lv_obj_set_size(bar_ltr, 200, 20);
lv_bar_set_value(bar_ltr, 70, LV_ANIM_OFF);
lv_obj_align(bar_ltr, LV_ALIGN_CENTER, 0, -30);
label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Left to Right base direction");
lv_obj_align_to(label, bar_ltr, LV_ALIGN_OUT_TOP_MID, 0, -5);
lv_obj_t * bar_rtl = lv_bar_create(lv_scr_act());
lv_obj_set_style_base_dir(bar_rtl, LV_BASE_DIR_RTL, 0);
lv_obj_set_size(bar_rtl, 200, 20);
lv_bar_set_value(bar_rtl, 70, LV_ANIM_OFF);
lv_obj_align(bar_rtl, LV_ALIGN_CENTER, 0, 30);
label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Right to Left base direction");
lv_obj_align_to(label, bar_rtl, LV_ALIGN_OUT_TOP_MID, 0, -5);
}
#endif
#
# Bar with LTR and RTL base direction
#
bar_ltr = lv.bar(lv.scr_act())
bar_ltr.set_size(200, 20)
bar_ltr.set_value(70, lv.ANIM.OFF)
bar_ltr.align(lv.ALIGN.CENTER, 0, -30)
label = lv.label(lv.scr_act())
label.set_text("Left to Right base direction")
label.align_to(bar_ltr, lv.ALIGN.OUT_TOP_MID, 0, -5)
bar_rtl = lv.bar(lv.scr_act())
bar_rtl.set_style_base_dir(lv.BASE_DIR.RTL,0)
bar_rtl.set_size(200, 20)
bar_rtl.set_value(70, lv.ANIM.OFF)
bar_rtl.align(lv.ALIGN.CENTER, 0, 30)
label = lv.label(lv.scr_act())
label.set_text("Right to Left base direction")
label.align_to(bar_rtl, lv.ALIGN.OUT_TOP_MID, 0, -5)
2.7. Widgets 82


--- Page 87 ---


LVGLDocumentation8.3
Customdrawertoshowthecurrentvalue
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
static void set_value(void * bar, int32_t v)
{
lv_bar_set_value(bar, v, LV_ANIM_OFF);
}
static void event_cb(lv_event_t * e)
{
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part != LV_PART_INDICATOR) return;
lv_obj_t * obj = lv_event_get_target(e);
lv_draw_label_dsc_t label_dsc;
lv_draw_label_dsc_init(&label_dsc);
label_dsc.font = LV_FONT_DEFAULT;
char buf[8];
lv_snprintf(buf, sizeof(buf), "%d", (int)lv_bar_get_value(obj));
lv_point_t txt_size;
lv_txt_get_size(&txt_size, buf, label_dsc.font, label_dsc.letter_space, label_dsc.
,→line_space, LV_COORD_MAX,
label_dsc.flag);
lv_area_t txt_area;
/*If the indicator is long enough put the text inside on the right*/
if(lv_area_get_width(dsc->draw_area) > txt_size.x + 20) {
txt_area.x2 = dsc->draw_area->x2 - 5;
txt_area.x1 = txt_area.x2 - txt_size.x + 1;
label_dsc.color = lv_color_white();
}
/*If the indicator is still short put the text out of it on the right*/
else {
txt_area.x1 = dsc->draw_area->x2 + 5;
txt_area.x2 = txt_area.x1 + txt_size.x - 1;
label_dsc.color = lv_color_black();
}
txt_area.y1 = dsc->draw_area->y1 + (lv_area_get_height(dsc->draw_area) - txt_size.
,→y) / 2;
txt_area.y2 = txt_area.y1 + txt_size.y - 1;
lv_draw_label(dsc->draw_ctx, &label_dsc, &txt_area, buf, NULL);
}
/**
* Custom drawer on the bar to display the current value
*/
void lv_example_bar_6(void)
{
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_add_event_cb(bar, event_cb, LV_EVENT_DRAW_PART_END, NULL);
(continuesonnextpage)
2.7. Widgets 83


--- Page 88 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(bar, 200, 20);
lv_obj_center(bar);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, bar);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_time(&a, 2000);
lv_anim_set_playback_time(&a, 2000);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
def set_value(bar, v):
bar.set_value(v, lv.ANIM.OFF)
def event_cb(e):
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if dsc.part != lv.PART.INDICATOR:
return
obj= e.get_target()
label_dsc = lv.draw_label_dsc_t()
label_dsc.init()
# label_dsc.font = LV_FONT_DEFAULT;
value_txt = str(obj.get_value())
txt_size = lv.point_t()
lv.txt_get_size(txt_size, value_txt, label_dsc.font, label_dsc.letter_space,␣
,→label_dsc.line_space, lv.COORD.MAX, label_dsc.flag)
txt_area = lv.area_t()
# If the indicator is long enough put the text inside on the right
if dsc.draw_area.get_width() > txt_size.x + 20:
txt_area.x2 = dsc.draw_area.x2 - 5
txt_area.x1 = txt_area.x2 - txt_size.x + 1
label_dsc.color = lv.color_white()
# If the indicator is still short put the text out of it on the right*/
else:
txt_area.x1 = dsc.draw_area.x2 + 5
txt_area.x2 = txt_area.x1 + txt_size.x - 1
label_dsc.color = lv.color_black()
txt_area.y1 = dsc.draw_area.y1 + (dsc.draw_area.get_height() - txt_size.y) // 2
txt_area.y2 = txt_area.y1 + txt_size.y - 1
dsc.draw_ctx.label(label_dsc, txt_area, value_txt, None)
#
# Custom drawer on the bar to display the current value
#
(continuesonnextpage)
2.7. Widgets 84


--- Page 89 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
bar = lv.bar(lv.scr_act())
bar.add_event_cb(event_cb, lv.EVENT.DRAW_PART_END, None)
bar.set_size(200, 20)
bar.center()
a = lv.anim_t()
a.init()
a.set_var(bar)
a.set_values(0, 100)
a.set_custom_exec_cb(lambda a,val: set_value(bar,val))
a.set_time(2000)
a.set_playback_time(2000)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
lv.anim_t.start(a)
2.7.4 Button
SimpleButtons
#include "../../lv_examples.h"
#if LV_USE_BTN && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED) {
LV_LOG_USER("Clicked");
}
else if(code == LV_EVENT_VALUE_CHANGED) {
LV_LOG_USER("Toggled");
}
}
void lv_example_btn_1(void)
{
lv_obj_t * label;
lv_obj_t * btn1 = lv_btn_create(lv_scr_act());
lv_obj_add_event_cb(btn1, event_handler, LV_EVENT_ALL, NULL);
lv_obj_align(btn1, LV_ALIGN_CENTER, 0, -40);
label = lv_label_create(btn1);
lv_label_set_text(label, "Button");
lv_obj_center(label);
lv_obj_t * btn2 = lv_btn_create(lv_scr_act());
lv_obj_add_event_cb(btn2, event_handler, LV_EVENT_ALL, NULL);
lv_obj_align(btn2, LV_ALIGN_CENTER, 0, 40);
lv_obj_add_flag(btn2, LV_OBJ_FLAG_CHECKABLE);
lv_obj_set_height(btn2, LV_SIZE_CONTENT);
(continuesonnextpage)
2.7. Widgets 85


--- Page 90 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv_label_create(btn2);
lv_label_set_text(label, "Toggle");
lv_obj_center(label);
}
#endif
def event_handler(evt):
code = evt.get_code()
if code == lv.EVENT.CLICKED:
print("Clicked event seen")
elif code == lv.EVENT.VALUE_CHANGED:
print("Value changed seen")
# create a simple button
btn1 = lv.btn(lv.scr_act())
# attach the callback
btn1.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn1.align(lv.ALIGN.CENTER,0,-40)
label=lv.label(btn1)
label.set_text("Button")
# create a toggle button
btn2 = lv.btn(lv.scr_act())
# attach the callback
#btn2.add_event_cb(event_handler,lv.EVENT.VALUE_CHANGED,None)
btn2.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn2.align(lv.ALIGN.CENTER,0,40)
btn2.add_flag(lv.obj.FLAG.CHECKABLE)
btn2.set_height(lv.SIZE.CONTENT)
label=lv.label(btn2)
label.set_text("Toggle")
label.center()
Stylingbuttons
#include "../../lv_examples.h"
#if LV_USE_BTN && LV_BUILD_EXAMPLES
/**
* Style a button from scratch
*/
void lv_example_btn_2(void)
{
/*Init the style for the default state*/
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 3);
(continuesonnextpage)
2.7. Widgets 86


--- Page 91 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_set_bg_opa(&style, LV_OPA_100);
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_bg_grad_color(&style, lv_palette_darken(LV_PALETTE_BLUE, 2));
lv_style_set_bg_grad_dir(&style, LV_GRAD_DIR_VER);
lv_style_set_border_opa(&style, LV_OPA_40);
lv_style_set_border_width(&style, 2);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_shadow_width(&style, 8);
lv_style_set_shadow_color(&style, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_shadow_ofs_y(&style, 8);
lv_style_set_outline_opa(&style, LV_OPA_COVER);
lv_style_set_outline_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_text_color(&style, lv_color_white());
lv_style_set_pad_all(&style, 10);
/*Init the pressed style*/
static lv_style_t style_pr;
lv_style_init(&style_pr);
/*Add a large outline when pressed*/
lv_style_set_outline_width(&style_pr, 30);
lv_style_set_outline_opa(&style_pr, LV_OPA_TRANSP);
lv_style_set_translate_y(&style_pr, 5);
lv_style_set_shadow_ofs_y(&style_pr, 3);
lv_style_set_bg_color(&style_pr, lv_palette_darken(LV_PALETTE_BLUE, 2));
lv_style_set_bg_grad_color(&style_pr, lv_palette_darken(LV_PALETTE_BLUE, 4));
/*Add a transition to the outline*/
static lv_style_transition_dsc_t trans;
static lv_style_prop_t props[] = {LV_STYLE_OUTLINE_WIDTH, LV_STYLE_OUTLINE_OPA, 0}
,→;
lv_style_transition_dsc_init(&trans, props, lv_anim_path_linear, 300, 0, NULL);
lv_style_set_transition(&style_pr, &trans);
lv_obj_t * btn1 = lv_btn_create(lv_scr_act());
lv_obj_remove_style_all(btn1); /*Remove the style coming␣
,→from the theme*/
lv_obj_add_style(btn1, &style, 0);
lv_obj_add_style(btn1, &style_pr, LV_STATE_PRESSED);
lv_obj_set_size(btn1, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_center(btn1);
lv_obj_t * label = lv_label_create(btn1);
lv_label_set_text(label, "Button");
lv_obj_center(label);
}
#endif
2.7. Widgets 87


--- Page 92 ---


LVGLDocumentation8.3
#
# Style a button from scratch
#
# Init the style for the default state
style = lv.style_t()
style.init()
style.set_radius(3)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_bg_grad_color(lv.palette_darken(lv.PALETTE.BLUE, 2))
style.set_bg_grad_dir(lv.GRAD_DIR.VER)
style.set_border_opa(lv.OPA._40)
style.set_border_width(2)
style.set_border_color(lv.palette_main(lv.PALETTE.GREY))
style.set_shadow_width(8)
style.set_shadow_color(lv.palette_main(lv.PALETTE.GREY))
style.set_shadow_ofs_y(8)
style.set_outline_opa(lv.OPA.COVER)
style.set_outline_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_text_color(lv.color_white())
style.set_pad_all(10)
# Init the pressed style
style_pr = lv.style_t()
style_pr.init()
# Add a large outline when pressed
style_pr.set_outline_width(30)
style_pr.set_outline_opa(lv.OPA.TRANSP)
style_pr.set_translate_y(5)
style_pr.set_shadow_ofs_y(3)
style_pr.set_bg_color(lv.palette_darken(lv.PALETTE.BLUE, 2))
style_pr.set_bg_grad_color(lv.palette_darken(lv.PALETTE.BLUE, 4))
# Add a transition to the outline
trans = lv.style_transition_dsc_t()
props = [lv.STYLE.OUTLINE_WIDTH, lv.STYLE.OUTLINE_OPA, 0]
trans.init(props, lv.anim_t.path_linear, 300, 0, None)
style_pr.set_transition(trans)
btn1 = lv.btn(lv.scr_act())
btn1.remove_style_all() # Remove the style coming from the␣
,→theme
btn1.add_style(style, 0)
btn1.add_style(style_pr, lv.STATE.PRESSED)
btn1.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
btn1.center()
(continuesonnextpage)
2.7. Widgets 88


--- Page 93 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(btn1)
label.set_text("Button")
label.center()
Gummybutton
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_BTN
/**
* Create a style transition on a button to act like a gum when clicked
*/
void lv_example_btn_3(void)
{
/*Properties to transition*/
static lv_style_prop_t props[] = {
LV_STYLE_TRANSFORM_WIDTH, LV_STYLE_TRANSFORM_HEIGHT, LV_STYLE_TEXT_LETTER_
,→SPACE, 0
};
/*Transition descriptor when going back to the default state.
*Add some delay to be sure the press transition is visible even if the press was␣
,→very short*/
static lv_style_transition_dsc_t transition_dsc_def;
lv_style_transition_dsc_init(&transition_dsc_def, props, lv_anim_path_overshoot,␣
,→250, 100, NULL);
/*Transition descriptor when going to pressed state.
*No delay, go to presses state immediately*/
static lv_style_transition_dsc_t transition_dsc_pr;
lv_style_transition_dsc_init(&transition_dsc_pr, props, lv_anim_path_ease_in_out,␣
,→250, 0, NULL);
/*Add only the new transition to he default state*/
static lv_style_t style_def;
lv_style_init(&style_def);
lv_style_set_transition(&style_def, &transition_dsc_def);
/*Add the transition and some transformation to the presses state.*/
static lv_style_t style_pr;
lv_style_init(&style_pr);
lv_style_set_transform_width(&style_pr, 10);
lv_style_set_transform_height(&style_pr, -10);
lv_style_set_text_letter_space(&style_pr, 10);
lv_style_set_transition(&style_pr, &transition_dsc_pr);
lv_obj_t * btn1 = lv_btn_create(lv_scr_act());
lv_obj_align(btn1, LV_ALIGN_CENTER, 0, -80);
lv_obj_add_style(btn1, &style_pr, LV_STATE_PRESSED);
lv_obj_add_style(btn1, &style_def, 0);
lv_obj_t * label = lv_label_create(btn1);
lv_label_set_text(label, "Gum");
}
(continuesonnextpage)
2.7. Widgets 89


--- Page 94 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#endif
#
# Create a style transition on a button to act like a gum when clicked
#
# Properties to transition
props = [lv.STYLE.TRANSFORM_WIDTH, lv.STYLE.TRANSFORM_HEIGHT, lv.STYLE.TEXT_LETTER_
,→SPACE, 0]
# Transition descriptor when going back to the default state.
# Add some delay to be sure the press transition is visible even if the press was␣
,→very short*/
transition_dsc_def = lv.style_transition_dsc_t()
transition_dsc_def.init(props, lv.anim_t.path_overshoot, 250, 100, None)
# Transition descriptor when going to pressed state.
# No delay, go to pressed state immediately
transition_dsc_pr = lv.style_transition_dsc_t()
transition_dsc_pr.init(props, lv.anim_t.path_ease_in_out, 250, 0, None)
# Add only the new transition to the default state
style_def = lv.style_t()
style_def.init()
style_def.set_transition(transition_dsc_def)
# Add the transition and some transformation to the presses state.
style_pr = lv.style_t()
style_pr.init()
style_pr.set_transform_width(10)
style_pr.set_transform_height(-10)
style_pr.set_text_letter_space(10)
style_pr.set_transition(transition_dsc_pr)
btn1 = lv.btn(lv.scr_act())
btn1.align(lv.ALIGN.CENTER, 0, -80)
btn1.add_style(style_pr, lv.STATE.PRESSED)
btn1.add_style(style_def, 0)
label = lv.label(btn1)
label.set_text("Gum")
2.7.5 Button matrix
SimpleButtonmatrix
#include "../../lv_examples.h"
#if LV_USE_BTNMATRIX && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
(continuesonnextpage)
2.7. Widgets 90


--- Page 95 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
if(code == LV_EVENT_VALUE_CHANGED) {
uint32_t id = lv_btnmatrix_get_selected_btn(obj);
const char * txt = lv_btnmatrix_get_btn_text(obj, id);
LV_LOG_USER("%s was pressed\n", txt);
}
}
static const char * btnm_map[] = {"1", "2", "3", "4", "5", "\n",
"6", "7", "8", "9", "0", "\n",
"Action1", "Action2", ""
};
void lv_example_btnmatrix_1(void)
{
lv_obj_t * btnm1 = lv_btnmatrix_create(lv_scr_act());
lv_btnmatrix_set_map(btnm1, btnm_map);
lv_btnmatrix_set_btn_width(btnm1, 10, 2); /*Make "Action1" twice as wide␣
,→as "Action2"*/
lv_btnmatrix_set_btn_ctrl(btnm1, 10, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_set_btn_ctrl(btnm1, 11, LV_BTNMATRIX_CTRL_CHECKED);
lv_obj_align(btnm1, LV_ALIGN_CENTER, 0, 0);
lv_obj_add_event_cb(btnm1, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(evt):
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.VALUE_CHANGED :
id = obj.get_selected_btn()
txt = obj.get_btn_text(id)
print("%s was pressed"%txt)
btnm_map = ["1", "2", "3", "4", "5", "\n",
"6", "7", "8", "9", "0", "\n",
"Action1", "Action2", ""]
btnm1 = lv.btnmatrix(lv.scr_act())
btnm1.set_map(btnm_map)
btnm1.set_btn_width(10, 2) # Make "Action1" twice as wide as "Action2"
btnm1.set_btn_ctrl(10, lv.btnmatrix.CTRL.CHECKABLE)
btnm1.set_btn_ctrl(11, lv.btnmatrix.CTRL.CHECKED)
btnm1.align(lv.ALIGN.CENTER, 0, 0)
btnm1.add_event_cb(event_handler, lv.EVENT.ALL, None)
#endif
2.7. Widgets 91


--- Page 96 ---


LVGLDocumentation8.3
Custombuttons
#include "../../lv_examples.h"
#if LV_USE_BTNMATRIX && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_DRAW_PART_BEGIN) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*When the button matrix draws the buttons...*/
if(dsc->class_p == &lv_btnmatrix_class && dsc->type == LV_BTNMATRIX_DRAW_PART_
,→BTN) {
/*Change the draw descriptor of the 2nd button*/
if(dsc->id == 1) {
dsc->rect_dsc->radius = 0;
if(lv_btnmatrix_get_selected_btn(obj) == dsc->id) dsc->rect_dsc->bg_
,→color = lv_palette_darken(LV_PALETTE_BLUE, 3);
else dsc->rect_dsc->bg_color = lv_palette_main(LV_PALETTE_BLUE);
dsc->rect_dsc->shadow_width = 6;
dsc->rect_dsc->shadow_ofs_x = 3;
dsc->rect_dsc->shadow_ofs_y = 3;
dsc->label_dsc->color = lv_color_white();
}
/*Change the draw descriptor of the 3rd button*/
else if(dsc->id == 2) {
dsc->rect_dsc->radius = LV_RADIUS_CIRCLE;
if(lv_btnmatrix_get_selected_btn(obj) == dsc->id) dsc->rect_dsc->bg_
,→color = lv_palette_darken(LV_PALETTE_RED, 3);
else dsc->rect_dsc->bg_color = lv_palette_main(LV_PALETTE_RED);
dsc->label_dsc->color = lv_color_white();
}
else if(dsc->id == 3) {
dsc->label_dsc->opa = LV_OPA_TRANSP; /*Hide the text if any*/
}
}
}
if(code == LV_EVENT_DRAW_PART_END) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*When the button matrix draws the buttons...*/
if(dsc->class_p == &lv_btnmatrix_class && dsc->type == LV_BTNMATRIX_DRAW_PART_
,→BTN) {
/*Add custom content to the 4th button when the button itself was drawn*/
if(dsc->id == 3) {
LV_IMG_DECLARE(img_star);
lv_img_header_t header;
lv_res_t res = lv_img_decoder_get_info(&img_star, &header);
if(res != LV_RES_OK) return;
lv_area_t a;
a.x1 = dsc->draw_area->x1 + (lv_area_get_width(dsc->draw_area) -␣
,→header.w) / 2;
(continuesonnextpage)
2.7. Widgets 92


--- Page 97 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a.x2 = a.x1 + header.w - 1;
a.y1 = dsc->draw_area->y1 + (lv_area_get_height(dsc->draw_area) -␣
,→header.h) / 2;
a.y2 = a.y1 + header.h - 1;
lv_draw_img_dsc_t img_draw_dsc;
lv_draw_img_dsc_init(&img_draw_dsc);
img_draw_dsc.recolor = lv_color_black();
if(lv_btnmatrix_get_selected_btn(obj) == dsc->id) img_draw_dsc.
,→recolor_opa = LV_OPA_30;
lv_draw_img(dsc->draw_ctx, &img_draw_dsc, &a, &img_star);
}
}
}
}
/**
* Add custom drawer to the button matrix to customize buttons one by one
*/
void lv_example_btnmatrix_2(void)
{
lv_obj_t * btnm = lv_btnmatrix_create(lv_scr_act());
lv_obj_add_event_cb(btnm, event_cb, LV_EVENT_ALL, NULL);
lv_obj_center(btnm);
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_star.png','rb') as f:
png_data = f.read()
except:
print("Could not find star.png")
sys.exit()
img_star_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def event_cb(e):
code = e.get_code()
obj = e.get_target()
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if code == lv.EVENT.DRAW_PART_BEGIN:
# Change the draw descriptor the 2nd button
if dsc.id == 1:
(continuesonnextpage)
2.7. Widgets 93


--- Page 98 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
dsc.rect_dsc.radius = 0
if obj.get_selected_btn() == dsc.id:
dsc.rect_dsc.bg_color = lv.palette_darken(lv.PALETTE.GREY, 3)
else:
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.BLUE)
dsc.rect_dsc.shadow_width = 6
dsc.rect_dsc.shadow_ofs_x = 3
dsc.rect_dsc.shadow_ofs_y = 3
dsc.label_dsc.color = lv.color_white()
# Change the draw descriptor the 3rd button
elif dsc.id == 2:
dsc.rect_dsc.radius = lv.RADIUS.CIRCLE
if obj.get_selected_btn() == dsc.id:
dsc.rect_dsc.bg_color = lv.palette_darken(lv.PALETTE.RED, 3)
else:
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.RED)
dsc.label_dsc.color = lv.color_white()
elif dsc.id == 3:
dsc.label_dsc.opa = lv.OPA.TRANSP # Hide the text if any
if code == lv.EVENT.DRAW_PART_END:
# Add custom content to the 4th button when the button itself was drawn
if dsc.id == 3:
# LV_IMG_DECLARE(img_star)
header = lv.img_header_t()
res = lv.img.decoder_get_info(img_star_argb, header)
if res != lv.RES.OK:
print("error when getting image header")
return
else:
a = lv.area_t()
a.x1 = dsc.draw_area.x1 + (dsc.draw_area.get_width() - header.w) // 2
a.x2 = a.x1 + header.w - 1
a.y1 = dsc.draw_area.y1 + (dsc.draw_area.get_height() - header.h) // 2
a.y2 = a.y1 + header.h - 1
img_draw_dsc = lv.draw_img_dsc_t()
img_draw_dsc.init()
img_draw_dsc.recolor = lv.color_black()
if obj.get_selected_btn() == dsc.id:
img_draw_dsc.recolor_opa = lv.OPA._30
dsc.draw_ctx.img(img_draw_dsc, a, img_star_argb)
#
# Add custom drawer to the button matrix to c
#
btnm = lv.btnmatrix(lv.scr_act())
btnm.add_event_cb(event_cb, lv.EVENT.ALL, None)
btnm.center()
2.7. Widgets 94


--- Page 99 ---


LVGLDocumentation8.3
Pagination
#include "../../lv_examples.h"
#if LV_USE_BTNMATRIX && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
uint32_t id = lv_btnmatrix_get_selected_btn(obj);
bool prev = id == 0 ? true : false;
bool next = id == 6 ? true : false;
if(prev || next) {
/*Find the checked button*/
uint32_t i;
for(i = 1; i < 7; i++) {
if(lv_btnmatrix_has_btn_ctrl(obj, i, LV_BTNMATRIX_CTRL_CHECKED)) break;
}
if(prev && i > 1) i--;
else if(next && i < 5) i++;
lv_btnmatrix_set_btn_ctrl(obj, i, LV_BTNMATRIX_CTRL_CHECKED);
}
}
/**
* Make a button group (pagination)
*/
void lv_example_btnmatrix_3(void)
{
static lv_style_t style_bg;
lv_style_init(&style_bg);
lv_style_set_pad_all(&style_bg, 0);
lv_style_set_pad_gap(&style_bg, 0);
lv_style_set_clip_corner(&style_bg, true);
lv_style_set_radius(&style_bg, LV_RADIUS_CIRCLE);
lv_style_set_border_width(&style_bg, 0);
static lv_style_t style_btn;
lv_style_init(&style_btn);
lv_style_set_radius(&style_btn, 0);
lv_style_set_border_width(&style_btn, 1);
lv_style_set_border_opa(&style_btn, LV_OPA_50);
lv_style_set_border_color(&style_btn, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_border_side(&style_btn, LV_BORDER_SIDE_INTERNAL);
lv_style_set_radius(&style_btn, 0);
static const char * map[] = {LV_SYMBOL_LEFT, "1", "2", "3", "4", "5", LV_SYMBOL_
,→RIGHT, ""};
lv_obj_t * btnm = lv_btnmatrix_create(lv_scr_act());
lv_btnmatrix_set_map(btnm, map);
lv_obj_add_style(btnm, &style_bg, 0);
lv_obj_add_style(btnm, &style_btn, LV_PART_ITEMS);
lv_obj_add_event_cb(btnm, event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_set_size(btnm, 225, 35);
(continuesonnextpage)
2.7. Widgets 95


--- Page 100 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Allow selecting on one number at time*/
lv_btnmatrix_set_btn_ctrl_all(btnm, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_clear_btn_ctrl(btnm, 0, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_clear_btn_ctrl(btnm, 6, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_set_one_checked(btnm, true);
lv_btnmatrix_set_btn_ctrl(btnm, 1, LV_BTNMATRIX_CTRL_CHECKED);
lv_obj_center(btnm);
}
#endif
def event_cb(e):
obj = e.get_target()
id = obj.get_selected_btn()
if id == 0:
prev = True
else:
prev = False
if id == 6:
next = True
else:
next = False
if prev or next:
# Find the checked butto
for i in range(7):
if obj.has_btn_ctrl(i, lv.btnmatrix.CTRL.CHECKED):
break
if prev and i > 1:
i-=1
elif next and i < 5:
i+=1
obj.set_btn_ctrl(i, lv.btnmatrix.CTRL.CHECKED)
#
# Make a button group
#
style_bg = lv.style_t()
style_bg.init()
style_bg.set_pad_all(0)
style_bg.set_pad_gap(0)
style_bg.set_clip_corner(True)
style_bg.set_radius(lv.RADIUS.CIRCLE)
style_bg.set_border_width(0)
style_btn = lv.style_t()
style_btn.init()
style_btn.set_radius(0)
style_btn.set_border_width(1)
style_btn.set_border_opa(lv.OPA._50)
style_btn.set_border_color(lv.palette_main(lv.PALETTE.GREY))
(continuesonnextpage)
2.7. Widgets 96


--- Page 101 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_btn.set_border_side(lv.BORDER_SIDE.INTERNAL)
style_btn.set_radius(0)
map = [lv.SYMBOL.LEFT,"1","2", "3", "4", "5",lv.SYMBOL.RIGHT, ""]
btnm = lv.btnmatrix(lv.scr_act())
btnm.set_map(map)
btnm.add_style(style_bg, 0)
btnm.add_style(style_btn, lv.PART.ITEMS)
btnm.add_event_cb(event_cb, lv.EVENT.VALUE_CHANGED, None)
btnm.set_size(225, 35)
# Allow selecting on one number at time
btnm.set_btn_ctrl_all(lv.btnmatrix.CTRL.CHECKABLE)
btnm.clear_btn_ctrl(0, lv.btnmatrix.CTRL.CHECKABLE)
btnm.clear_btn_ctrl(6, lv.btnmatrix.CTRL.CHECKABLE)
btnm.set_one_checked(True)
btnm.set_btn_ctrl(1, lv.btnmatrix.CTRL.CHECKED)
btnm.center()
2.7.6 Calendar
Calendarwithheader
#include "../../lv_examples.h"
#if LV_USE_CALENDAR && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_current_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
lv_calendar_date_t date;
if(lv_calendar_get_pressed_date(obj, &date)) {
LV_LOG_USER("Clicked date: %02d.%02d.%d", date.day, date.month, date.
,→year);
}
}
}
void lv_example_calendar_1(void)
{
lv_obj_t * calendar = lv_calendar_create(lv_scr_act());
lv_obj_set_size(calendar, 185, 185);
lv_obj_align(calendar, LV_ALIGN_CENTER, 0, 27);
lv_obj_add_event_cb(calendar, event_handler, LV_EVENT_ALL, NULL);
lv_calendar_set_today_date(calendar, 2021, 02, 23);
lv_calendar_set_showed_date(calendar, 2021, 02);
(continuesonnextpage)
2.7. Widgets 97


--- Page 102 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Highlight a few days*/
static lv_calendar_date_t highlighted_days[3]; /*Only its pointer will be␣
,→saved so should be static*/
highlighted_days[0].year = 2021;
highlighted_days[0].month = 02;
highlighted_days[0].day = 6;
highlighted_days[1].year = 2021;
highlighted_days[1].month = 02;
highlighted_days[1].day = 11;
highlighted_days[2].year = 2022;
highlighted_days[2].month = 02;
highlighted_days[2].day = 22;
lv_calendar_set_highlighted_dates(calendar, highlighted_days, 3);
#if LV_USE_CALENDAR_HEADER_DROPDOWN
lv_calendar_header_dropdown_create(calendar);
#elif LV_USE_CALENDAR_HEADER_ARROW
lv_calendar_header_arrow_create(calendar);
#endif
lv_calendar_set_showed_date(calendar, 2021, 10);
}
#endif
def event_handler(evt):
code = evt.get_code()
if code == lv.EVENT.VALUE_CHANGED:
source = evt.get_current_target()
date = lv.calendar_date_t()
if source.get_pressed_date(date) == lv.RES.OK:
calendar.set_today_date(date.year, date.month, date.day)
print("Clicked date: %02d.%02d.%02d"%(date.day, date.month, date.year))
calendar = lv.calendar(lv.scr_act())
calendar.set_size(200, 200)
calendar.align(lv.ALIGN.CENTER, 0, 20)
calendar.add_event_cb(event_handler, lv.EVENT.ALL, None)
calendar.set_today_date(2021, 02, 23)
calendar.set_showed_date(2021, 02)
# Highlight a few days
highlighted_days=[
lv.calendar_date_t({'year':2021, 'month':2, 'day':6}),
lv.calendar_date_t({'year':2021, 'month':2, 'day':11}),
lv.calendar_date_t({'year':2021, 'month':2, 'day':22})
]
calendar.set_highlighted_dates(highlighted_days, len(highlighted_days))
lv.calendar_header_dropdown(calendar)
2.7. Widgets 98


--- Page 103 ---


LVGLDocumentation8.3
2.7.7 Canvas
DrawingontheCanvasandrotate
#include "../../lv_examples.h"
#if LV_USE_CANVAS && LV_BUILD_EXAMPLES
#define CANVAS_WIDTH 200
#define CANVAS_HEIGHT 150
void lv_example_canvas_1(void)
{
lv_draw_rect_dsc_t rect_dsc;
lv_draw_rect_dsc_init(&rect_dsc);
rect_dsc.radius = 10;
rect_dsc.bg_opa = LV_OPA_COVER;
rect_dsc.bg_grad.dir = LV_GRAD_DIR_HOR;
rect_dsc.bg_grad.stops[0].color = lv_palette_main(LV_PALETTE_RED);
rect_dsc.bg_grad.stops[1].color = lv_palette_main(LV_PALETTE_BLUE);
rect_dsc.border_width = 2;
rect_dsc.border_opa = LV_OPA_90;
rect_dsc.border_color = lv_color_white();
rect_dsc.shadow_width = 5;
rect_dsc.shadow_ofs_x = 5;
rect_dsc.shadow_ofs_y = 5;
lv_draw_label_dsc_t label_dsc;
lv_draw_label_dsc_init(&label_dsc);
label_dsc.color = lv_palette_main(LV_PALETTE_ORANGE);
static lv_color_t cbuf[LV_CANVAS_BUF_SIZE_TRUE_COLOR(CANVAS_WIDTH, CANVAS_
,→HEIGHT)];
lv_obj_t * canvas = lv_canvas_create(lv_scr_act());
lv_canvas_set_buffer(canvas, cbuf, CANVAS_WIDTH, CANVAS_HEIGHT, LV_IMG_CF_TRUE_
,→COLOR);
lv_obj_center(canvas);
lv_canvas_fill_bg(canvas, lv_palette_lighten(LV_PALETTE_GREY, 3), LV_OPA_COVER);
lv_canvas_draw_rect(canvas, 70, 60, 100, 70, &rect_dsc);
lv_canvas_draw_text(canvas, 40, 20, 100, &label_dsc, "Some text on text canvas");
/*Test the rotation. It requires another buffer where the original image is␣
,→stored.
*So copy the current image to buffer and rotate it to the canvas*/
static lv_color_t cbuf_tmp[CANVAS_WIDTH * CANVAS_HEIGHT];
memcpy(cbuf_tmp, cbuf, sizeof(cbuf_tmp));
lv_img_dsc_t img;
img.data = (void *)cbuf_tmp;
img.header.cf = LV_IMG_CF_TRUE_COLOR;
img.header.w = CANVAS_WIDTH;
img.header.h = CANVAS_HEIGHT;
lv_canvas_fill_bg(canvas, lv_palette_lighten(LV_PALETTE_GREY, 3), LV_OPA_COVER);
lv_canvas_transform(canvas, &img, 120, LV_IMG_ZOOM_NONE, 0, 0, CANVAS_WIDTH / 2,␣
,→CANVAS_HEIGHT / 2, true);
(continuesonnextpage)
2.7. Widgets 99


--- Page 104 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
_CANVAS_WIDTH = 200
_CANVAS_HEIGHT = 150
LV_IMG_ZOOM_NONE = 256
rect_dsc = lv.draw_rect_dsc_t()
rect_dsc.init()
rect_dsc.radius = 10
rect_dsc.bg_opa = lv.OPA.COVER
rect_dsc.bg_grad.dir = lv.GRAD_DIR.HOR
rect_dsc.bg_grad.stops[0].color = lv.palette_main(lv.PALETTE.RED)
rect_dsc.bg_grad.stops[1].color = lv.palette_main(lv.PALETTE.BLUE)
rect_dsc.border_width = 2
rect_dsc.border_opa = lv.OPA._90
rect_dsc.border_color = lv.color_white()
rect_dsc.shadow_width = 5
rect_dsc.shadow_ofs_x = 5
rect_dsc.shadow_ofs_y = 5
label_dsc = lv.draw_label_dsc_t()
label_dsc.init()
label_dsc.color = lv.palette_main(lv.PALETTE.YELLOW)
cbuf = bytearray(_CANVAS_WIDTH * _CANVAS_HEIGHT * 4)
canvas = lv.canvas(lv.scr_act())
canvas.set_buffer(cbuf, _CANVAS_WIDTH, _CANVAS_HEIGHT, lv.img.CF.TRUE_COLOR)
canvas.center()
canvas.fill_bg(lv.palette_lighten(lv.PALETTE.GREY, 3), lv.OPA.COVER)
canvas.draw_rect(70, 60, 100, 70, rect_dsc)
canvas.draw_text(40, 20, 100, label_dsc, "Some text on text canvas")
# Test the rotation. It requires another buffer where the original image is stored.
# So copy the current image to buffer and rotate it to the canvas
img = lv.img_dsc_t()
img.data = cbuf[:]
img.header.cf = lv.img.CF.TRUE_COLOR
img.header.w = _CANVAS_WIDTH
img.header.h = _CANVAS_HEIGHT
canvas.fill_bg(lv.palette_lighten(lv.PALETTE.GREY, 3), lv.OPA.COVER)
canvas.transform(img, 30, LV_IMG_ZOOM_NONE, 0, 0, _CANVAS_WIDTH // 2, _CANVAS_HEIGHT /
,→/ 2, True)
2.7. Widgets 100


--- Page 105 ---


LVGLDocumentation8.3
TransparentCanvaswithchromakeying
#include "../../lv_examples.h"
#if LV_USE_CANVAS && LV_BUILD_EXAMPLES
#define CANVAS_WIDTH 50
#define CANVAS_HEIGHT 50
/**
* Create a transparent canvas with Chroma keying and indexed color format (palette).
*/
void lv_example_canvas_2(void)
{
/*Create a button to better see the transparency*/
lv_btn_create(lv_scr_act());
/*Create a buffer for the canvas*/
static lv_color_t cbuf[LV_CANVAS_BUF_SIZE_INDEXED_1BIT(CANVAS_WIDTH, CANVAS_
,→HEIGHT)];
/*Create a canvas and initialize its palette*/
lv_obj_t * canvas = lv_canvas_create(lv_scr_act());
lv_canvas_set_buffer(canvas, cbuf, CANVAS_WIDTH, CANVAS_HEIGHT, LV_IMG_CF_INDEXED_
,→1BIT);
lv_canvas_set_palette(canvas, 0, LV_COLOR_CHROMA_KEY);
lv_canvas_set_palette(canvas, 1, lv_palette_main(LV_PALETTE_RED));
/*Create colors with the indices of the palette*/
lv_color_t c0;
lv_color_t c1;
c0.full = 0;
c1.full = 1;
/*Red background (There is no dedicated alpha channel in indexed images so LV_OPA_
,→COVER is ignored)*/
lv_canvas_fill_bg(canvas, c1, LV_OPA_COVER);
/*Create hole on the canvas*/
uint32_t x;
uint32_t y;
for(y = 10; y < 30; y++) {
for(x = 5; x < 20; x++) {
lv_canvas_set_px_color(canvas, x, y, c0);
}
}
}
#endif
CANVAS_WIDTH = 50
CANVAS_HEIGHT = 50
LV_COLOR_CHROMA_KEY = lv.color_hex(0x00ff00)
def LV_IMG_BUF_SIZE_ALPHA_1BIT(w, h):
return int(((w / 8) + 1) * h)
(continuesonnextpage)
2.7. Widgets 101


--- Page 106 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
def LV_IMG_BUF_SIZE_INDEXED_1BIT(w, h):
return LV_IMG_BUF_SIZE_ALPHA_1BIT(w, h) + 4 * 2
def LV_CANVAS_BUF_SIZE_INDEXED_1BIT(w, h):
return LV_IMG_BUF_SIZE_INDEXED_1BIT(w, h)
#
# Create a transparent canvas with Chroma keying and indexed color format (palette).
#
# Create a button to better see the transparency
btn=lv.btn(lv.scr_act())
# Create a buffer for the canvas
cbuf= bytearray(LV_CANVAS_BUF_SIZE_INDEXED_1BIT(CANVAS_WIDTH, CANVAS_HEIGHT))
# Create a canvas and initialize its palette
canvas = lv.canvas(lv.scr_act())
canvas.set_buffer(cbuf, CANVAS_WIDTH, CANVAS_HEIGHT, lv.img.CF.INDEXED_1BIT)
canvas.set_palette(0, LV_COLOR_CHROMA_KEY)
canvas.set_palette(1, lv.palette_main(lv.PALETTE.RED))
# Create colors with the indices of the palette
c0 = lv.color_t()
c1 = lv.color_t()
c0.full = 0
c1.full = 1
# Red background (There is no dedicated alpha channel in indexed images so LV_OPA_
,→COVER is ignored)
canvas.fill_bg(c1, lv.OPA.COVER)
# Create hole on the canvas
for y in range(10,30):
for x in range(5,20):
canvas.set_px(x, y, c0)
2.7.8 Chart
LineChart
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
void lv_example_chart_1(void)
{
/*Create a chart*/
lv_obj_t * chart;
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_center(chart);
lv_chart_set_type(chart, LV_CHART_TYPE_LINE); /*Show lines and points too*/
(continuesonnextpage)
2.7. Widgets 102


--- Page 107 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Add two data series*/
lv_chart_series_t * ser1 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
lv_chart_series_t * ser2 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→GREEN), LV_CHART_AXIS_SECONDARY_Y);
/*Set the next points on 'ser1'*/
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 30);
lv_chart_set_next_value(chart, ser1, 70);
lv_chart_set_next_value(chart, ser1, 90);
/*Directly set points on 'ser2'*/
ser2->y_points[0] = 90;
ser2->y_points[1] = 70;
ser2->y_points[2] = 65;
ser2->y_points[3] = 65;
ser2->y_points[4] = 65;
ser2->y_points[5] = 65;
ser2->y_points[6] = 65;
ser2->y_points[7] = 65;
ser2->y_points[8] = 65;
ser2->y_points[9] = 65;
lv_chart_refresh(chart); /*Required after direct set*/
}
#endif
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.center()
chart.set_type(lv.chart.TYPE.LINE) # Show lines and points too
# Add two data series
ser1 = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
ser2 = chart.add_series(lv.palette_main(lv.PALETTE.GREEN), lv.chart.AXIS.SECONDARY_Y)
print(ser2)
# Set next points on ser1
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,30)
chart.set_next_value(ser1,70)
chart.set_next_value(ser1,90)
(continuesonnextpage)
2.7. Widgets 103


--- Page 108 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Directly set points on 'ser2'
ser2.y_points = [90, 70, 65, 65, 65, 65, 65, 65, 65, 65]
chart.refresh() # Required after direct set
Fadedarealinechartwithcustomdivisionlines
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_DRAW_COMPLEX && LV_BUILD_EXAMPLES
static lv_obj_t * chart1;
static lv_chart_series_t * ser1;
static lv_chart_series_t * ser2;
static void draw_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
/*Add the faded area before the lines are drawn*/
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_ITEMS) {
if(!dsc->p1 || !dsc->p2) return;
/*Add a line mask that keeps the area below the line*/
lv_draw_mask_line_param_t line_mask_param;
lv_draw_mask_line_points_init(&line_mask_param, dsc->p1->x, dsc->p1->y, dsc->
,→p2->x, dsc->p2->y,
LV_DRAW_MASK_LINE_SIDE_BOTTOM);
int16_t line_mask_id = lv_draw_mask_add(&line_mask_param, NULL);
/*Add a fade effect: transparent bottom covering top*/
lv_coord_t h = lv_obj_get_height(obj);
lv_draw_mask_fade_param_t fade_mask_param;
lv_draw_mask_fade_init(&fade_mask_param, &obj->coords, LV_OPA_COVER, obj->
,→coords.y1 + h / 8, LV_OPA_TRANSP,
obj->coords.y2);
int16_t fade_mask_id = lv_draw_mask_add(&fade_mask_param, NULL);
/*Draw a rectangle that will be affected by the mask*/
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_opa = LV_OPA_20;
draw_rect_dsc.bg_color = dsc->line_dsc->color;
lv_area_t a;
a.x1 = dsc->p1->x;
a.x2 = dsc->p2->x - 1;
a.y1 = LV_MIN(dsc->p1->y, dsc->p2->y);
a.y2 = obj->coords.y2;
lv_draw_rect(dsc->draw_ctx, &draw_rect_dsc, &a);
/*Remove the masks*/
lv_draw_mask_free_param(&line_mask_param);
lv_draw_mask_free_param(&fade_mask_param);
(continuesonnextpage)
2.7. Widgets 104


--- Page 109 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_draw_mask_remove_id(line_mask_id);
lv_draw_mask_remove_id(fade_mask_id);
}
/*Hook the division lines too*/
else if(dsc->part == LV_PART_MAIN) {
if(dsc->line_dsc == NULL || dsc->p1 == NULL || dsc->p2 == NULL) return;
/*Vertical line*/
if(dsc->p1->x == dsc->p2->x) {
dsc->line_dsc->color = lv_palette_lighten(LV_PALETTE_GREY, 1);
if(dsc->id == 3) {
dsc->line_dsc->width = 2;
dsc->line_dsc->dash_gap = 0;
dsc->line_dsc->dash_width = 0;
}
else {
dsc->line_dsc->width = 1;
dsc->line_dsc->dash_gap = 6;
dsc->line_dsc->dash_width = 6;
}
}
/*Horizontal line*/
else {
if(dsc->id == 2) {
dsc->line_dsc->width = 2;
dsc->line_dsc->dash_gap = 0;
dsc->line_dsc->dash_width = 0;
}
else {
dsc->line_dsc->width = 2;
dsc->line_dsc->dash_gap = 6;
dsc->line_dsc->dash_width = 6;
}
if(dsc->id == 1 || dsc->id == 3) {
dsc->line_dsc->color = lv_palette_main(LV_PALETTE_GREEN);
}
else {
dsc->line_dsc->color = lv_palette_lighten(LV_PALETTE_GREY, 1);
}
}
}
}
static void add_data(lv_timer_t * timer)
{
LV_UNUSED(timer);
static uint32_t cnt = 0;
lv_chart_set_next_value(chart1, ser1, lv_rand(20, 90));
if(cnt % 4 == 0) lv_chart_set_next_value(chart1, ser2, lv_rand(40, 60));
cnt++;
}
/**
* Add a faded area effect to the line chart and make some division lines ticker
(continuesonnextpage)
2.7. Widgets 105


--- Page 110 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
*/
void lv_example_chart_2(void)
{
/*Create a chart1*/
chart1 = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart1, 200, 150);
lv_obj_center(chart1);
lv_chart_set_type(chart1, LV_CHART_TYPE_LINE); /*Show lines and points too*/
lv_chart_set_div_line_count(chart1, 5, 7);
lv_obj_add_event_cb(chart1, draw_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
lv_chart_set_update_mode(chart1, LV_CHART_UPDATE_MODE_CIRCULAR);
/*Add two data series*/
ser1 = lv_chart_add_series(chart1, lv_palette_main(LV_PALETTE_RED), LV_CHART_AXIS_
,→PRIMARY_Y);
ser2 = lv_chart_add_series(chart1, lv_palette_main(LV_PALETTE_BLUE), LV_CHART_
,→AXIS_SECONDARY_Y);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_chart_set_next_value(chart1, ser1, lv_rand(20, 90));
lv_chart_set_next_value(chart1, ser2, lv_rand(30, 70));
}
lv_timer_create(add_data, 200, NULL);
}
#endif
def draw_event_cb(e):
obj = e.get_target()
# Add the faded area before the lines are drawn
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if dsc.part != lv.PART.ITEMS:
return
if not dsc.p1 or not dsc.p2:
return
# Add a line mask that keeps the area below the line
line_mask_param = lv.draw_mask_line_param_t()
line_mask_param.points_init(dsc.p1.x, dsc.p1.y, dsc.p2.x, dsc.p2.y, lv.DRAW_MASK_
,→LINE_SIDE.BOTTOM)
# line_mask_id = line_mask_param.draw_mask_add(None)
line_mask_id = lv.draw_mask_add(line_mask_param, None)
# Add a fade effect: transparent bottom covering top
h = obj.get_height()
fade_mask_param = lv.draw_mask_fade_param_t()
coords = lv.area_t()
obj.get_coords(coords)
fade_mask_param.init(coords, lv.OPA.COVER, coords.y1 + h // 8, lv.OPA.TRANSP,
,→coords.y2)
fade_mask_id = lv.draw_mask_add(fade_mask_param,None)
(continuesonnextpage)
2.7. Widgets 106


--- Page 111 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Draw a rectangle that will be affected by the mask
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_opa = lv.OPA._20
draw_rect_dsc.bg_color = dsc.line_dsc.color
a = lv.area_t()
a.x1 = dsc.p1.x
a.x2 = dsc.p2.x - 1
a.y1 = min(dsc.p1.y, dsc.p2.y)
coords = lv.area_t()
obj.get_coords(coords)
a.y2 = coords.y2
dsc.draw_ctx.rect(draw_rect_dsc, a)
# Remove the masks
lv.draw_mask_remove_id(line_mask_id)
lv.draw_mask_remove_id(fade_mask_id)
def add_data(timer):
# LV_UNUSED(timer);
cnt = 0
chart1.set_next_value(ser1, lv.rand(20, 90))
if cnt % 4 == 0:
chart1.set_next_value(ser2, lv.rand(40, 60))
cnt +=1
#
# Add a faded area effect to the line chart
#
# Create a chart1
chart1 = lv.chart(lv.scr_act())
chart1.set_size(200, 150)
chart1.center()
chart1.set_type(lv.chart.TYPE.LINE) # Show lines and points too
chart1.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
chart1.set_update_mode(lv.chart.UPDATE_MODE.CIRCULAR)
# Add two data series
ser1 = chart1.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
ser2 = chart1.add_series(lv.palette_main(lv.PALETTE.BLUE), lv.chart.AXIS.SECONDARY_Y)
for i in range(10):
chart1.set_next_value(ser1, lv.rand(20, 90))
chart1.set_next_value(ser2, lv.rand(30, 70))
timer = lv.timer_create(add_data, 200, None)
2.7. Widgets 107


--- Page 112 ---


LVGLDocumentation8.3
Axisticksandlabelswithscrolling
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static void draw_event_cb(lv_event_t * e)
{
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(!lv_obj_draw_part_check_type(dsc, &lv_chart_class, LV_CHART_DRAW_PART_TICK_
,→LABEL)) return;
if(dsc->id == LV_CHART_AXIS_PRIMARY_X && dsc->text) {
const char * month[] = {"Jan", "Febr", "March", "Apr", "May", "Jun", "July",
,→"Aug", "Sept", "Oct", "Nov", "Dec"};
lv_snprintf(dsc->text, dsc->text_length, "%s", month[dsc->value]);
}
}
/**
* Add ticks and labels to the axis and demonstrate scrolling
*/
void lv_example_chart_3(void)
{
/*Create a chart*/
lv_obj_t * chart;
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_center(chart);
lv_chart_set_type(chart, LV_CHART_TYPE_BAR);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_Y, 0, 100);
lv_chart_set_range(chart, LV_CHART_AXIS_SECONDARY_Y, 0, 400);
lv_chart_set_point_count(chart, 12);
lv_obj_add_event_cb(chart, draw_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
/*Add ticks and label to every axis*/
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_X, 10, 5, 12, 3, true, 40);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_Y, 10, 5, 6, 2, true, 50);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_SECONDARY_Y, 10, 5, 3, 4, true, 50);
/*Zoom in a little in X*/
lv_chart_set_zoom_x(chart, 800);
/*Add two data series*/
lv_chart_series_t * ser1 = lv_chart_add_series(chart, lv_palette_lighten(LV_
,→PALETTE_GREEN, 2), LV_CHART_AXIS_PRIMARY_Y);
lv_chart_series_t * ser2 = lv_chart_add_series(chart, lv_palette_darken(LV_
,→PALETTE_GREEN, 2),
LV_CHART_AXIS_SECONDARY_Y);
/*Set the next points on 'ser1'*/
lv_chart_set_next_value(chart, ser1, 31);
lv_chart_set_next_value(chart, ser1, 66);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 89);
lv_chart_set_next_value(chart, ser1, 63);
lv_chart_set_next_value(chart, ser1, 56);
lv_chart_set_next_value(chart, ser1, 32);
(continuesonnextpage)
2.7. Widgets 108


--- Page 113 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_chart_set_next_value(chart, ser1, 35);
lv_chart_set_next_value(chart, ser1, 57);
lv_chart_set_next_value(chart, ser1, 85);
lv_chart_set_next_value(chart, ser1, 22);
lv_chart_set_next_value(chart, ser1, 58);
lv_coord_t * ser2_array = lv_chart_get_y_array(chart, ser2);
/*Directly set points on 'ser2'*/
ser2_array[0] = 92;
ser2_array[1] = 71;
ser2_array[2] = 61;
ser2_array[3] = 15;
ser2_array[4] = 21;
ser2_array[5] = 35;
ser2_array[6] = 35;
ser2_array[7] = 58;
ser2_array[8] = 31;
ser2_array[9] = 53;
ser2_array[10] = 33;
ser2_array[11] = 73;
lv_chart_refresh(chart); /*Required after direct set*/
}
#endif
def draw_event_cb(e):
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if dsc.part == lv.PART.TICKS and dsc.id == lv.chart.AXIS.PRIMARY_X:
month = ["Jan", "Febr", "March", "Apr", "May", "Jun", "July", "Aug", "Sept",
,→"Oct", "Nov", "Dec"]
# dsc.text is defined char text[16], I must therefore convert the Python␣
,→string to a byte_array
dsc.text = bytes(month[dsc.value],"ascii")
#
# Add ticks and labels to the axis and demonstrate scrolling
#
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.center()
chart.set_type(lv.chart.TYPE.BAR)
chart.set_range(lv.chart.AXIS.PRIMARY_Y, 0, 100)
chart.set_range(lv.chart.AXIS.SECONDARY_Y, 0, 400)
chart.set_point_count(12)
chart.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
# Add ticks and label to every axis
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_X, 10, 5, 12, 3, True, 40)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 10, 5, 6, 2, True, 50)
chart.set_axis_tick(lv.chart.AXIS.SECONDARY_Y, 10, 5, 3, 4,True, 50)
# Zoom in a little in X
chart.set_zoom_x(800)
(continuesonnextpage)
2.7. Widgets 109


--- Page 114 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Add two data series
ser1 = lv.chart.add_series(chart, lv.palette_lighten(lv.PALETTE.GREEN, 2), lv.chart.
,→AXIS.PRIMARY_Y)
ser2 = lv.chart.add_series(chart, lv.palette_darken(lv.PALETTE.GREEN, 2), lv.chart.
,→AXIS.SECONDARY_Y)
# Set the next points on 'ser1'
chart.set_next_value(ser1, 31)
chart.set_next_value(ser1, 66)
chart.set_next_value(ser1, 10)
chart.set_next_value(ser1, 89)
chart.set_next_value(ser1, 63)
chart.set_next_value(ser1, 56)
chart.set_next_value(ser1, 32)
chart.set_next_value(ser1, 35)
chart.set_next_value(ser1, 57)
chart.set_next_value(ser1, 85)
chart.set_next_value(ser1, 22)
chart.set_next_value(ser1, 58)
# Directly set points on 'ser2'
ser2.y_points = [92,71,61,15,21,35,35,58,31,53,33,73]
chart.refresh() # Required after direct set
Showthevalueofthepressedpoints
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * chart = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
lv_obj_invalidate(chart);
}
if(code == LV_EVENT_REFR_EXT_DRAW_SIZE) {
lv_coord_t * s = lv_event_get_param(e);
*s = LV_MAX(*s, 20);
}
else if(code == LV_EVENT_DRAW_POST_END) {
int32_t id = lv_chart_get_pressed_point(chart);
if(id == LV_CHART_POINT_NONE) return;
LV_LOG_USER("Selected point %d", (int)id);
lv_chart_series_t * ser = lv_chart_get_series_next(chart, NULL);
while(ser) {
lv_point_t p;
lv_chart_get_point_pos_by_id(chart, ser, id, &p);
(continuesonnextpage)
2.7. Widgets 110


--- Page 115 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_coord_t * y_array = lv_chart_get_y_array(chart, ser);
lv_coord_t value = y_array[id];
char buf[16];
lv_snprintf(buf, sizeof(buf), LV_SYMBOL_DUMMY"$%d", value);
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_color = lv_color_black();
draw_rect_dsc.bg_opa = LV_OPA_50;
draw_rect_dsc.radius = 3;
draw_rect_dsc.bg_img_src = buf;
draw_rect_dsc.bg_img_recolor = lv_color_white();
lv_area_t a;
a.x1 = chart->coords.x1 + p.x - 20;
a.x2 = chart->coords.x1 + p.x + 20;
a.y1 = chart->coords.y1 + p.y - 30;
a.y2 = chart->coords.y1 + p.y - 10;
lv_draw_ctx_t * draw_ctx = lv_event_get_draw_ctx(e);
lv_draw_rect(draw_ctx, &draw_rect_dsc, &a);
ser = lv_chart_get_series_next(chart, ser);
}
}
else if(code == LV_EVENT_RELEASED) {
lv_obj_invalidate(chart);
}
}
/**
* Show the value of the pressed points
*/
void lv_example_chart_4(void)
{
/*Create a chart*/
lv_obj_t * chart;
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_center(chart);
lv_obj_add_event_cb(chart, event_cb, LV_EVENT_ALL, NULL);
lv_obj_refresh_ext_draw_size(chart);
/*Zoom in a little in X*/
lv_chart_set_zoom_x(chart, 800);
/*Add two data series*/
lv_chart_series_t * ser1 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
lv_chart_series_t * ser2 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→GREEN), LV_CHART_AXIS_PRIMARY_Y);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_chart_set_next_value(chart, ser1, lv_rand(60, 90));
lv_chart_set_next_value(chart, ser2, lv_rand(10, 40));
(continuesonnextpage)
2.7. Widgets 111


--- Page 116 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
}
#endif
def event_cb(e):
code = e.get_code()
chart = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
chart.invalidate()
if code == lv.EVENT.REFR_EXT_DRAW_SIZE:
e.set_ext_draw_size(20)
elif code == lv.EVENT.DRAW_POST_END:
id = lv.chart.get_pressed_point(chart)
if id == lv.CHART_POINT.NONE:
return
# print("Selected point ", id)
for i in range(len(series)):
p = lv.point_t()
chart.get_point_pos_by_id(series[i], id, p)
value = series_points[i][id]
buf = lv.SYMBOL.DUMMY + "$" + str(value)
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_color = lv.color_black()
draw_rect_dsc.bg_opa = lv.OPA._50
draw_rect_dsc.radius = 3
draw_rect_dsc.bg_img_src = buf
draw_rect_dsc.bg_img_recolor = lv.color_white()
a = lv.area_t()
coords = lv.area_t()
chart.get_coords(coords)
a.x1 = coords.x1 + p.x - 20
a.x2 = coords.x1 + p.x + 20
a.y1 = coords.y1 + p.y - 30
a.y2 = coords.y1 + p.y - 10
clip_area = lv.area_t.__cast__(e.get_param())
lv.draw_rect(a, clip_area, draw_rect_dsc)
elif code == lv.EVENT.RELEASED:
chart.invalidate()
#
# Add ticks and labels to the axis and demonstrate scrolling
#
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.center()
(continuesonnextpage)
2.7. Widgets 112


--- Page 117 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
chart.add_event_cb(event_cb, lv.EVENT.ALL, None)
chart.refresh_ext_draw_size()
# Zoom in a little in X
chart.set_zoom_x(800)
# Add two data series
ser1 = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
ser2 = chart.add_series(lv.palette_main(lv.PALETTE.GREEN), lv.chart.AXIS.PRIMARY_Y)
ser1_p = []
ser2_p = []
for i in range(10):
ser1_p.append(lv.rand(60,90))
ser2_p.append(lv.rand(10,40))
ser1.y_points = ser1_p
ser2.y_points = ser2_p
series = [ser1,ser2]
series_points=[ser1_p,ser2_p]
Display1000datapointswithzoomingandscrolling
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_USE_SLIDER && LV_BUILD_EXAMPLES
static lv_obj_t * chart;
/* Source: https://github.com/ankur219/ECG-Arrhythmia-classification/blob/
,→642230149583adfae1e4bd26c6f0e1fd8af2be0e/sample.csv*/
static const lv_coord_t ecg_sample[] = {
-2, 2, 0, -15, -39, -63, -71, -68, -67, -69, -84, -95, -104, -107, -108, -107, -
,→107, -107, -107, -114, -118, -117,
-112, -100, -89, -83, -71, -64, -58, -58, -62, -62, -58, -51, -46, -39, -27, -10,␣
,→4, 7, 1, -3, 0, 14, 24, 30, 25, 19,
13, 7, 12, 15, 18, 21, 13, 6, 9, 8, 17, 19, 13, 11, 11, 11, 23, 30, 37, 34, 25,␣
,→14, 15, 19, 28, 31, 26, 23, 25, 31,
39, 37, 37, 34, 30, 32, 22, 29, 31, 33, 37, 23, 13, 7, 2, 4, -2, 2, 11, 22, 33,␣
,→19, -1, -27, -55, -67, -72, -71, -63,
-49, -18, 35, 113, 230, 369, 525, 651, 722, 730, 667, 563, 454, 357, 305, 288,␣
,→274, 255, 212, 173, 143, 117, 82, 39,
-13, -53, -78, -91, -101, -113, -124, -131, -131, -131, -129, -128, -129, -125, -
,→123, -123, -129, -139, -148, -153,
-159, -166, -183, -205, -227, -243, -248, -246, -254, -280, -327, -381, -429, -
,→473, -517, -556, -592, -612, -620,
-620, -614, -604, -591, -574, -540, -497, -441, -389, -358, -336, -313, -284, -
,→222, -167, -114, -70, -47, -28, -4, 12,
38, 52, 58, 56, 56, 57, 68, 77, 86, 86, 80, 69, 67, 70, 82, 85, 89, 90, 89, 89,␣
,→88, 91, 96, 97, 91, 83, 78, 82, 88, 95,
96, 105, 106, 110, 102, 100, 96, 98, 97, 101, 98, 99, 100, 107, 113, 119, 115,␣
,→110, 96, 85, 73, 64, 69, 76, 79,
78, 75, 85, 100, 114, 113, 105, 96, 84, 74, 66, 60, 75, 85, 89, 83, 67, 61, 67,␣
,→73, 79, 74, 63, 57, 56, 58, 61, 55,
48, 45, 46, 55, 62, 55, 49, 43, 50, 59, 63, 57, 40, 31, 23, 25, 27, 31, 35, 34,␣
,→30, 36, 34, 42, 38, 36, 40, 46, 50, (continuesonnextpage)
2.7. Widgets 113


--- Page 118 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
47, 32, 30, 32, 52, 67, 73, 71, 63, 54, 53, 45, 41, 28, 13, 3, 1, 4, 4, -8, -23, -
,→32, -31, -19, -5, 3, 9, 13, 19,
24, 27, 29, 25, 22, 26, 32, 42, 51, 56, 60, 57, 55, 53, 53, 54, 59, 54, 49, 26, -
,→3, -11, -20, -47, -100, -194, -236,
-212, -123, 8, 103, 142, 147, 120, 105, 98, 93, 81, 61, 40, 26, 28, 30, 30, 27,␣
,→19, 17, 21, 20, 19, 19, 22, 36, 40,
35, 20, 7, 1, 10, 18, 27, 22, 6, -4, -2, 3, 6, -2, -13, -14, -10, -2, 3, 2, -1, -
,→5, -10, -19, -32, -42, -55, -60,
-68, -77, -86, -101, -110, -117, -115, -104, -92, -84, -85, -84, -73, -65, -52, -
,→50, -45, -35, -20, -3, 12, 20, 25,
26, 28, 28, 30, 28, 25, 28, 33, 42, 42, 36, 23, 9, 0, 1, -4, 1, -4, -4, 1, 5, 9,␣
,→9, -3, -1, -18, -50, -108, -190,
-272, -340, -408, -446, -537, -643, -777, -894, -920, -853, -697, -461, -251, -60,
,→ 58, 103, 129, 139, 155, 170, 173,
178, 185, 190, 193, 200, 208, 215, 225, 224, 232, 234, 240, 240, 236, 229, 226,␣
,→224, 232, 233, 232, 224, 219, 219,
223, 231, 226, 223, 219, 218, 223, 223, 223, 233, 245, 268, 286, 296, 295, 283,␣
,→271, 263, 252, 243, 226, 210, 197,
186, 171, 152, 133, 117, 114, 110, 107, 96, 80, 63, 48, 40, 38, 34, 28, 15, 2, -7,
,→ -11, -14, -18, -29, -37, -44, -50,
-58, -63, -61, -52, -50, -48, -61, -59, -58, -54, -47, -52, -62, -61, -64, -54, -
,→52, -59, -69, -76, -76, -69, -67,
-74, -78, -81, -80, -73, -65, -57, -53, -51, -47, -35, -27, -22, -22, -24, -21, -
,→17, -13, -10, -11, -13, -20, -20,
-12, -2, 7, -1, -12, -16, -13, -2, 2, -4, -5, -2, 9, 19, 19, 14, 11, 13, 19, 21,␣
,→20, 18, 19, 19, 19, 16, 15, 13, 14,
9, 3, -5, -9, -5, -3, -2, -3, -3, 2, 8, 9, 9, 5, 6, 8, 8, 7, 4, 3, 4, 5, 3, 5, 5,␣
,→13, 13, 12, 10, 10, 15, 22, 17,
14, 7, 10, 15, 16, 11, 12, 10, 13, 9, -2, -4, -2, 7, 16, 16, 17, 16, 7, -1, -16, -
,→18, -16, -9, -4, -5, -10, -9, -8,
-3, -4, -10, -19, -20, -16, -9, -9, -23, -40, -48, -43, -33, -19, -21, -26, -31, -
,→33, -19, 0, 17, 24, 9, -17, -47,
-63, -67, -59, -52, -51, -50, -49, -42, -26, -21, -15, -20, -23, -22, -19, -12, -
,→8, 5, 18, 27, 32, 26, 25, 26, 22,
23, 17, 14, 17, 21, 25, 2, -45, -121, -196, -226, -200, -118, -9, 73, 126, 131,␣
,→114, 87, 60, 42, 29, 26, 34, 35, 34,
25, 12, 9, 7, 3, 2, -8, -11, 2, 23, 38, 41, 23, 9, 10, 13, 16, 8, -8, -17, -23, -
,→26, -25, -21, -15, -10, -13, -13,
-19, -22, -29, -40, -48, -48, -54, -55, -66, -82, -85, -90, -92, -98, -114, -119,␣
,→-124, -129, -132, -146, -146, -138,
-124, -99, -85, -72, -65, -65, -65, -66, -63, -64, -64, -58, -46, -26, -9, 2, 2,␣
,→4, 0, 1, 4, 3, 10, 11, 10, 2, -4,
0, 10, 18, 20, 6, 2, -9, -7, -3, -3, -2, -7, -12, -5, 5, 24, 36, 31, 25, 6, 3, 7,␣
,→12, 17, 11, 0, -6, -9, -8, -7, -5,
-6, -2, -2, -6, -2, 2, 14, 24, 22, 15, 8, 4, 6, 7, 12, 16, 25, 20, 7, -16, -41, -
,→60, -67, -65, -54, -35, -11, 30,
84, 175, 302, 455, 603, 707, 743, 714, 625, 519, 414, 337, 300, 281, 263, 239,␣
,→197, 163, 136, 109, 77, 34, -18, -50,
-66, -74, -79, -92, -107, -117, -127, -129, -135, -139, -141, -155, -159, -167, -
,→171, -169, -174, -175, -178, -191,
-202, -223, -235, -243, -237, -240, -256, -298, -345, -393, -432, -475, -518, -
,→565, -596, -619, -623, -623, -614,
-599, -583, -559, -524, -477, -425, -383, -357, -331, -301, -252, -198, -143, -96,
,→ -57, -29, -8, 10, 31, 45, 60, 65,
70, 74, 76, 79, 82, 79, 75, 62,
};
(continuesonnextpage)
2.7. Widgets 114


--- Page 119 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static void slider_x_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
int32_t v = lv_slider_get_value(obj);
lv_chart_set_zoom_x(chart, v);
}
static void slider_y_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
int32_t v = lv_slider_get_value(obj);
lv_chart_set_zoom_y(chart, v);
}
/**
* Display 1000 data points with zooming and scrolling.
* See how the chart changes drawing mode (draw only vertical lines) when
* the points get too crowded.
*/
void lv_example_chart_5(void)
{
/*Create a chart*/
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_align(chart, LV_ALIGN_CENTER, -30, -30);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_Y, -1000, 1000);
/*Do not display points on the data*/
lv_obj_set_style_size(chart, 0, LV_PART_INDICATOR);
lv_chart_series_t * ser = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
uint32_t pcnt = sizeof(ecg_sample) / sizeof(ecg_sample[0]);
lv_chart_set_point_count(chart, pcnt);
lv_chart_set_ext_y_array(chart, ser, (lv_coord_t *)ecg_sample);
lv_obj_t * slider;
slider = lv_slider_create(lv_scr_act());
lv_slider_set_range(slider, LV_IMG_ZOOM_NONE, LV_IMG_ZOOM_NONE * 10);
lv_obj_add_event_cb(slider, slider_x_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_set_size(slider, 200, 10);
lv_obj_align_to(slider, chart, LV_ALIGN_OUT_BOTTOM_MID, 0, 20);
slider = lv_slider_create(lv_scr_act());
lv_slider_set_range(slider, LV_IMG_ZOOM_NONE, LV_IMG_ZOOM_NONE * 10);
lv_obj_add_event_cb(slider, slider_y_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_set_size(slider, 10, 150);
lv_obj_align_to(slider, chart, LV_ALIGN_OUT_RIGHT_MID, 20, 0);
}
#endif
# Source: https://github.com/ankur219/ECG-Arrhythmia-classification/blob/
,→642230149583adfae1e4bd26c6f0e1fd8af2be0e/sample.csv
ecg_sample = [
(continuesonnextpage)
2.7. Widgets 115


--- Page 120 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
-2, 2, 0, -15, -39, -63, -71, -68, -67, -69, -84, -95, -104, -107, -108, -107, -
,→107, -107, -107, -114, -118, -117,
-112, -100, -89, -83, -71, -64, -58, -58, -62, -62, -58, -51, -46, -39, -27, -10,␣
,→4, 7, 1, -3, 0, 14, 24, 30, 25, 19,
13, 7, 12, 15, 18, 21, 13, 6, 9, 8, 17, 19, 13, 11, 11, 11, 23, 30, 37, 34, 25,␣
,→14, 15, 19, 28, 31, 26, 23, 25, 31,
39, 37, 37, 34, 30, 32, 22, 29, 31, 33, 37, 23, 13, 7, 2, 4, -2, 2, 11, 22, 33,␣
,→19, -1, -27, -55, -67, -72, -71, -63,
-49, -18, 35, 113, 230, 369, 525, 651, 722, 730, 667, 563, 454, 357, 305, 288,␣
,→274, 255, 212, 173, 143, 117, 82, 39,
-13, -53, -78, -91, -101, -113, -124, -131, -131, -131, -129, -128, -129, -125, -
,→123, -123, -129, -139, -148, -153,
-159, -166, -183, -205, -227, -243, -248, -246, -254, -280, -327, -381, -429, -
,→473, -517, -556, -592, -612, -620,
-620, -614, -604, -591, -574, -540, -497, -441, -389, -358, -336, -313, -284, -
,→222, -167, -114, -70, -47, -28, -4, 12,
38, 52, 58, 56, 56, 57, 68, 77, 86, 86, 80, 69, 67, 70, 82, 85, 89, 90, 89, 89,␣
,→88, 91, 96, 97, 91, 83, 78, 82, 88, 95,
96, 105, 106, 110, 102, 100, 96, 98, 97, 101, 98, 99, 100, 107, 113, 119, 115,␣
,→110, 96, 85, 73, 64, 69, 76, 79,
78, 75, 85, 100, 114, 113, 105, 96, 84, 74, 66, 60, 75, 85, 89, 83, 67, 61, 67,␣
,→73, 79, 74, 63, 57, 56, 58, 61, 55,
48, 45, 46, 55, 62, 55, 49, 43, 50, 59, 63, 57, 40, 31, 23, 25, 27, 31, 35, 34,␣
,→30, 36, 34, 42, 38, 36, 40, 46, 50,
47, 32, 30, 32, 52, 67, 73, 71, 63, 54, 53, 45, 41, 28, 13, 3, 1, 4, 4, -8, -23, -
,→32, -31, -19, -5, 3, 9, 13, 19,
24, 27, 29, 25, 22, 26, 32, 42, 51, 56, 60, 57, 55, 53, 53, 54, 59, 54, 49, 26, -
,→3, -11, -20, -47, -100, -194, -236,
-212, -123, 8, 103, 142, 147, 120, 105, 98, 93, 81, 61, 40, 26, 28, 30, 30, 27,␣
,→19, 17, 21, 20, 19, 19, 22, 36, 40,
35, 20, 7, 1, 10, 18, 27, 22, 6, -4, -2, 3, 6, -2, -13, -14, -10, -2, 3, 2, -1, -
,→5, -10, -19, -32, -42, -55, -60,
-68, -77, -86, -101, -110, -117, -115, -104, -92, -84, -85, -84, -73, -65, -52, -
,→50, -45, -35, -20, -3, 12, 20, 25,
26, 28, 28, 30, 28, 25, 28, 33, 42, 42, 36, 23, 9, 0, 1, -4, 1, -4, -4, 1, 5, 9,␣
,→9, -3, -1, -18, -50, -108, -190,
-272, -340, -408, -446, -537, -643, -777, -894, -920, -853, -697, -461, -251, -60,
,→ 58, 103, 129, 139, 155, 170, 173,
178, 185, 190, 193, 200, 208, 215, 225, 224, 232, 234, 240, 240, 236, 229, 226,␣
,→224, 232, 233, 232, 224, 219, 219,
223, 231, 226, 223, 219, 218, 223, 223, 223, 233, 245, 268, 286, 296, 295, 283,␣
,→271, 263, 252, 243, 226, 210, 197,
186, 171, 152, 133, 117, 114, 110, 107, 96, 80, 63, 48, 40, 38, 34, 28, 15, 2, -7,
,→ -11, -14, -18, -29, -37, -44, -50,
-58, -63, -61, -52, -50, -48, -61, -59, -58, -54, -47, -52, -62, -61, -64, -54, -
,→52, -59, -69, -76, -76, -69, -67,
-74, -78, -81, -80, -73, -65, -57, -53, -51, -47, -35, -27, -22, -22, -24, -21, -
,→17, -13, -10, -11, -13, -20, -20,
-12, -2, 7, -1, -12, -16, -13, -2, 2, -4, -5, -2, 9, 19, 19, 14, 11, 13, 19, 21,␣
,→20, 18, 19, 19, 19, 16, 15, 13, 14,
9, 3, -5, -9, -5, -3, -2, -3, -3, 2, 8, 9, 9, 5, 6, 8, 8, 7, 4, 3, 4, 5, 3, 5, 5,␣
,→13, 13, 12, 10, 10, 15, 22, 17,
14, 7, 10, 15, 16, 11, 12, 10, 13, 9, -2, -4, -2, 7, 16, 16, 17, 16, 7, -1, -16, -
,→18, -16, -9, -4, -5, -10, -9, -8,
-3, -4, -10, -19, -20, -16, -9, -9, -23, -40, -48, -43, -33, -19, -21, -26, -31, -
,→33, -19, 0, 17, 24, 9, -17, -47,
-63, -67, -59, -52, -51, -50, -49, -42, -26, -21, -15, -20, -23, -22, -19, -12, -
,→8, 5, 18, 27, 32, 26, 25, 26, 22, (continuesonnextpage)
2.7. Widgets 116


--- Page 121 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
23, 17, 14, 17, 21, 25, 2, -45, -121, -196, -226, -200, -118, -9, 73, 126, 131,␣
,→114, 87, 60, 42, 29, 26, 34, 35, 34,
25, 12, 9, 7, 3, 2, -8, -11, 2, 23, 38, 41, 23, 9, 10, 13, 16, 8, -8, -17, -23, -
,→26, -25, -21, -15, -10, -13, -13,
-19, -22, -29, -40, -48, -48, -54, -55, -66, -82, -85, -90, -92, -98, -114, -119,␣
,→-124, -129, -132, -146, -146, -138,
-124, -99, -85, -72, -65, -65, -65, -66, -63, -64, -64, -58, -46, -26, -9, 2, 2,␣
,→4, 0, 1, 4, 3, 10, 11, 10, 2, -4,
0, 10, 18, 20, 6, 2, -9, -7, -3, -3, -2, -7, -12, -5, 5, 24, 36, 31, 25, 6, 3, 7,␣
,→12, 17, 11, 0, -6, -9, -8, -7, -5,
-6, -2, -2, -6, -2, 2, 14, 24, 22, 15, 8, 4, 6, 7, 12, 16, 25, 20, 7, -16, -41, -
,→60, -67, -65, -54, -35, -11, 30,
84, 175, 302, 455, 603, 707, 743, 714, 625, 519, 414, 337, 300, 281, 263, 239,␣
,→197, 163, 136, 109, 77, 34, -18, -50,
-66, -74, -79, -92, -107, -117, -127, -129, -135, -139, -141, -155, -159, -167, -
,→171, -169, -174, -175, -178, -191,
-202, -223, -235, -243, -237, -240, -256, -298, -345, -393, -432, -475, -518, -
,→565, -596, -619, -623, -623, -614,
-599, -583, -559, -524, -477, -425, -383, -357, -331, -301, -252, -198, -143, -96,
,→ -57, -29, -8, 10, 31, 45, 60, 65,
70, 74, 76, 79, 82, 79, 75, 62,
]
def slider_x_event_cb(e):
slider = e.get_target()
v = slider.get_value()
chart.set_zoom_x(v)
def slider_y_event_cb(e):
slider = e.get_target()
v = slider.get_value()
chart.set_zoom_y(v)
#
# Display 1000 data points with zooming and scrolling.
# See how the chart changes drawing mode (draw only vertical lines) when
# the points get too crowded.
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.align(lv.ALIGN.CENTER, -30, -30)
chart.set_range(lv.chart.AXIS.PRIMARY_Y, -1000, 1000)
# Do not display points on the data
chart.set_style_size(0, lv.PART.INDICATOR)
ser = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
pcnt = len(ecg_sample)
chart.set_point_count(pcnt)
chart.set_ext_y_array(ser, ecg_sample)
slider = lv.slider(lv.scr_act())
(continuesonnextpage)
2.7. Widgets 117


--- Page 122 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
slider.set_range(lv.IMG_ZOOM.NONE, lv.IMG_ZOOM.NONE * 10)
slider.add_event_cb(slider_x_event_cb, lv.EVENT.VALUE_CHANGED, None)
slider.set_size(200,10)
slider.align_to(chart, lv.ALIGN.OUT_BOTTOM_MID, 0, 20)
slider = lv.slider(lv.scr_act())
slider.set_range(lv.IMG_ZOOM.NONE, lv.IMG_ZOOM.NONE * 10)
slider.add_event_cb(slider_y_event_cb, lv.EVENT.VALUE_CHANGED, None)
slider.set_size(10, 150)
slider.align_to(chart, lv.ALIGN.OUT_RIGHT_MID, 20, 0)
Showcursorontheclickedpoint
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static lv_obj_t * chart;
static lv_chart_series_t * ser;
static lv_chart_cursor_t * cursor;
static void event_cb(lv_event_t * e)
{
static int32_t last_id = -1;
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
last_id = lv_chart_get_pressed_point(obj);
if(last_id != LV_CHART_POINT_NONE) {
lv_chart_set_cursor_point(obj, cursor, NULL, last_id);
}
}
else if(code == LV_EVENT_DRAW_PART_END) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(!lv_obj_draw_part_check_type(dsc, &lv_chart_class, LV_CHART_DRAW_PART_
,→CURSOR)) return;
if(dsc->p1 == NULL || dsc->p2 == NULL || dsc->p1->y != dsc->p2->y || last_id
,→< 0) return;
lv_coord_t * data_array = lv_chart_get_y_array(chart, ser);
lv_coord_t v = data_array[last_id];
char buf[16];
lv_snprintf(buf, sizeof(buf), "%d", v);
lv_point_t size;
lv_txt_get_size(&size, buf, LV_FONT_DEFAULT, 0, 0, LV_COORD_MAX, LV_TEXT_FLAG_
,→NONE);
lv_area_t a;
a.y2 = dsc->p1->y - 5;
a.y1 = a.y2 - size.y - 10;
a.x1 = dsc->p1->x + 10;
a.x2 = a.x1 + size.x + 10;
(continuesonnextpage)
2.7. Widgets 118


--- Page 123 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_color = lv_palette_main(LV_PALETTE_BLUE);
draw_rect_dsc.radius = 3;
lv_draw_rect(dsc->draw_ctx, &draw_rect_dsc, &a);
lv_draw_label_dsc_t draw_label_dsc;
lv_draw_label_dsc_init(&draw_label_dsc);
draw_label_dsc.color = lv_color_white();
a.x1 += 5;
a.x2 -= 5;
a.y1 += 5;
a.y2 -= 5;
lv_draw_label(dsc->draw_ctx, &draw_label_dsc, &a, buf, NULL);
}
}
/**
* Show cursor on the clicked point
*/
void lv_example_chart_6(void)
{
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_align(chart, LV_ALIGN_CENTER, 0, -10);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_Y, 10, 5, 6, 5, true, 40);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_X, 10, 5, 10, 1, true, 30);
lv_obj_add_event_cb(chart, event_cb, LV_EVENT_ALL, NULL);
lv_obj_refresh_ext_draw_size(chart);
cursor = lv_chart_add_cursor(chart, lv_palette_main(LV_PALETTE_BLUE), LV_DIR_LEFT␣
,→| LV_DIR_BOTTOM);
ser = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_RED), LV_CHART_AXIS_
,→PRIMARY_Y);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_chart_set_next_value(chart, ser, lv_rand(10, 90));
}
lv_chart_set_zoom_x(chart, 500);
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Click on a point");
lv_obj_align_to(label, chart, LV_ALIGN_OUT_TOP_MID, 0, -5);
}
#endif
class ExampleChart_6():
def __init__(self):
self.last_id = -1
(continuesonnextpage)
2.7. Widgets 119


--- Page 124 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#
# Show cursor on the clicked point
#
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.align(lv.ALIGN.CENTER, 0, -10)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 10, 5, 6, 5, True, 40)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_X, 10, 5, 10, 1, True, 30)
chart.add_event_cb(self.event_cb, lv.EVENT.ALL, None)
chart.refresh_ext_draw_size()
self.cursor = chart.add_cursor(lv.palette_main(lv.PALETTE.BLUE), lv.DIR.LEFT␣
,→| lv.DIR.BOTTOM)
self.ser = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.
,→PRIMARY_Y)
self.ser_p = []
for i in range(10):
self.ser_p.append(lv.rand(10,90))
self.ser.y_points = self.ser_p
newser = chart.get_series_next(None)
# print("length of data points: ",len(newser.points))
chart.set_zoom_x(500)
label = lv.label(lv.scr_act())
label.set_text("Click on a point")
label.align_to(chart, lv.ALIGN.OUT_TOP_MID, 0, -5)
def event_cb(self,e):
code = e.get_code()
chart = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
# print("last_id: ",self.last_id)
self.last_id = chart.get_pressed_point()
if self.last_id != lv.CHART_POINT.NONE:
p = lv.point_t()
chart.get_point_pos_by_id(self.ser, self.last_id, p)
chart.set_cursor_point(self.cursor, None, self.last_id)
elif code == lv.EVENT.DRAW_PART_END:
# print("EVENT.DRAW_PART_END")
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# if dsc.p1 and dsc.p2:
# print("p1, p2", dsc.p1,dsc.p2)
# print("p1.y, p2.y", dsc.p1.y, dsc.p2.y)
# print("last_id: ",self.last_id)
if dsc.part == lv.PART.CURSOR and dsc.p1 and dsc.p2 and dsc.p1.y == dsc.
,→p2.y and self.last_id >= 0:
(continuesonnextpage)
2.7. Widgets 120


--- Page 125 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
v = self.ser_p[self.last_id]
# print("value: ",v)
value_txt = str(v)
size = lv.point_t()
lv.txt_get_size(size, value_txt, lv.font_default(), 0, 0, lv.COORD.
,→MAX, lv.TEXT_FLAG.NONE)
a = lv.area_t()
a.y2 = dsc.p1.y - 5
a.y1 = a.y2 - size.y - 10
a.x1 = dsc.p1.x + 10
a.x2 = a.x1 + size.x + 10
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_color = lv.palette_main(lv.PALETTE.BLUE)
draw_rect_dsc.radius = 3
lv.draw_rect(a, dsc.clip_area, draw_rect_dsc)
draw_label_dsc = lv.draw_label_dsc_t()
draw_label_dsc.init()
draw_label_dsc.color = lv.color_white()
a.x1 += 5
a.x2 -= 5
a.y1 += 5
a.y2 -= 5
lv.draw_label(a, dsc.clip_area, draw_label_dsc, value_txt, None)
example_chart_6 = ExampleChart_6()
Scatterchart
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static void draw_event_cb(lv_event_t * e)
{
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_ITEMS) {
lv_obj_t * obj = lv_event_get_target(e);
lv_chart_series_t * ser = lv_chart_get_series_next(obj, NULL);
uint32_t cnt = lv_chart_get_point_count(obj);
/*Make older value more transparent*/
dsc->rect_dsc->bg_opa = (LV_OPA_COVER * dsc->id) / (cnt - 1);
/*Make smaller values blue, higher values red*/
lv_coord_t * x_array = lv_chart_get_x_array(obj, ser);
lv_coord_t * y_array = lv_chart_get_y_array(obj, ser);
/*dsc->id is the tells drawing order, but we need the ID of the point being␣
,→drawn.*/
uint32_t start_point = lv_chart_get_x_start_point(obj, ser);
uint32_t p_act = (start_point + dsc->id) % cnt; /*Consider start point to get␣
,→the index of the array*/
(continuesonnextpage)
2.7. Widgets 121


--- Page 126 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_opa_t x_opa = (x_array[p_act] * LV_OPA_50) / 200;
lv_opa_t y_opa = (y_array[p_act] * LV_OPA_50) / 1000;
dsc->rect_dsc->bg_color = lv_color_mix(lv_palette_main(LV_PALETTE_RED),
lv_palette_main(LV_PALETTE_BLUE),
x_opa + y_opa);
}
}
static void add_data(lv_timer_t * timer)
{
LV_UNUSED(timer);
lv_obj_t * chart = timer->user_data;
lv_chart_set_next_value2(chart, lv_chart_get_series_next(chart, NULL), lv_rand(0,␣
,→200), lv_rand(0, 1000));
}
/**
* A scatter chart
*/
void lv_example_chart_7(void)
{
lv_obj_t * chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_align(chart, LV_ALIGN_CENTER, 0, 0);
lv_obj_add_event_cb(chart, draw_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
lv_obj_set_style_line_width(chart, 0, LV_PART_ITEMS); /*Remove the lines*/
lv_chart_set_type(chart, LV_CHART_TYPE_SCATTER);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_X, 5, 5, 5, 1, true, 30);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_Y, 10, 5, 6, 5, true, 50);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_X, 0, 200);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_Y, 0, 1000);
lv_chart_set_point_count(chart, 50);
lv_chart_series_t * ser = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
uint32_t i;
for(i = 0; i < 50; i++) {
lv_chart_set_next_value2(chart, ser, lv_rand(0, 200), lv_rand(0, 1000));
}
lv_timer_create(add_data, 100, chart);
}
#endif
#!/opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
import display_driver
def draw_event_cb(e):
(continuesonnextpage)
2.7. Widgets 122


--- Page 127 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
dsc = e.get_draw_part_dsc()
if dsc.part == lv.PART.ITEMS:
obj = e.get_target()
ser = obj.get_series_next(None)
cnt = obj.get_point_count()
# print("cnt: ",cnt)
# Make older value more transparent
dsc.rect_dsc.bg_opa = (lv.OPA.COVER * dsc.id) // (cnt - 1)
# Make smaller values blue, higher values red
# x_array = chart.get_x_array(ser)
# y_array = chart.get_y_array(ser)
# dsc->id is the tells drawing order, but we need the ID of the point being␣
,→drawn.
start_point = chart.get_x_start_point(ser)
# print("start point: ",start_point)
p_act = (start_point + dsc.id) % cnt # Consider start point to get the index␣
,→of the array
# print("p_act", p_act)
x_opa = (x_array[p_act] * lv.OPA._50) // 200
y_opa = (y_array[p_act] * lv.OPA._50) // 1000
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.RED).color_mix(
lv.palette_main(lv.PALETTE.BLUE),
x_opa + y_opa)
def add_data(timer,chart):
# print("add_data")
x = lv.rand(0,200)
y = lv.rand(0,1000)
chart.set_next_value2(ser, x, y)
# chart.set_next_value2(chart.gx, y)
x_array.pop(0)
x_array.append(x)
y_array.pop(0)
y_array.append(y)
#
# A scatter chart
#
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.align(lv.ALIGN.CENTER, 0, 0)
chart.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
chart.set_style_line_width(0, lv.PART.ITEMS) # Remove the lines
chart.set_type(lv.chart.TYPE.SCATTER)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_X, 5, 5, 5, 1, True, 30)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 10, 5, 6, 5, True, 50)
chart.set_range(lv.chart.AXIS.PRIMARY_X, 0, 200)
chart.set_range(lv.chart.AXIS.PRIMARY_Y, 0, 1000)
chart.set_point_count(50)
(continuesonnextpage)
2.7. Widgets 123


--- Page 128 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
ser = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
x_array = []
y_array = []
for i in range(50):
x_array.append(lv.rand(0, 200))
y_array.append(lv.rand(0, 1000))
ser.x_points = x_array
ser.y_points = y_array
# Create an `lv_timer` to update the chart.
timer = lv.timer_create_basic()
timer.set_period(100)
timer.set_cb(lambda src: add_data(timer,chart))
Stackedareachart
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_DRAW_COMPLEX && LV_BUILD_EXAMPLES
/* A struct is used to keep track of the series list because later we need to draw␣
,→to the series in the reverse order to which they were initialised. */
typedef struct {
lv_obj_t * obj;
lv_chart_series_t * series_list[3];
} stacked_area_chart_t;
static stacked_area_chart_t stacked_area_chart;
/**
* Callback which draws the blocks of colour under the lines
**/
static void draw_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
/*Add the faded area before the lines are drawn*/
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_ITEMS) {
if(!dsc->p1 || !dsc->p2)
return;
/*Add a line mask that keeps the area below the line*/
lv_draw_mask_line_param_t line_mask_param;
lv_draw_mask_line_points_init(&line_mask_param, dsc->p1->x, dsc->p1->y, dsc->
,→p2->x, dsc->p2->y,
LV_DRAW_MASK_LINE_SIDE_BOTTOM);
int16_t line_mask_id = lv_draw_mask_add(&line_mask_param, NULL);
/*Draw a rectangle that will be affected by the mask*/
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_opa = LV_OPA_COVER;
(continuesonnextpage)
2.7. Widgets 124


--- Page 129 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
draw_rect_dsc.bg_color = dsc->line_dsc->color;
lv_area_t a;
a.x1 = dsc->p1->x;
a.x2 = dsc->p2->x;
a.y1 = LV_MIN(dsc->p1->y, dsc->p2->y);
a.y2 = obj->coords.y2 -
13; /* -13 cuts off where the rectangle draws over the chart margin.␣
,→Without this an area of 0 doesn't look like 0 */
lv_draw_rect(dsc->draw_ctx, &draw_rect_dsc, &a);
/*Remove the mask*/
lv_draw_mask_free_param(&line_mask_param);
lv_draw_mask_remove_id(line_mask_id);
}
}
/**
* Helper function to round a fixed point number
**/
static int32_t round_fixed_point(int32_t n, int8_t shift)
{
/* Create a bitmask to isolates the decimal part of the fixed point number */
int32_t mask = 1;
for(int32_t bit_pos = 0; bit_pos < shift; bit_pos++) {
mask = (mask << 1) + 1;
}
int32_t decimal_part = n & mask;
/* Get 0.5 as fixed point */
int32_t rounding_boundary = 1 << (shift - 1);
/* Return either the integer part of n or the integer part + 1 */
return (decimal_part < rounding_boundary) ? (n & ~mask) : ((n >> shift) + 1) <<␣
,→shift;
}
/**
* Stacked area chart
*/
void lv_example_chart_8(void)
{
/*Create a stacked_area_chart.obj*/
stacked_area_chart.obj = lv_chart_create(lv_scr_act());
lv_obj_set_size(stacked_area_chart.obj, 200, 150);
lv_obj_center(stacked_area_chart.obj);
lv_chart_set_type(stacked_area_chart.obj, LV_CHART_TYPE_LINE);
lv_chart_set_div_line_count(stacked_area_chart.obj, 5, 7);
lv_obj_add_event_cb(stacked_area_chart.obj, draw_event_cb, LV_EVENT_DRAW_PART_
,→BEGIN, NULL);
/* Set range to 0 to 100 for percentages. Draw ticks */
lv_chart_set_range(stacked_area_chart.obj, LV_CHART_AXIS_PRIMARY_Y, 0, 100);
lv_chart_set_axis_tick(stacked_area_chart.obj, LV_CHART_AXIS_PRIMARY_Y, 3, 0, 5,␣
,→1, true, 30);
(continuesonnextpage)
2.7. Widgets 125


--- Page 130 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Set point size to 0 so the lines are smooth */
lv_obj_set_style_size(stacked_area_chart.obj, 0, LV_PART_INDICATOR);
/*Add some data series*/
stacked_area_chart.series_list[0] = lv_chart_add_series(stacked_area_chart.obj,␣
,→lv_palette_main(LV_PALETTE_RED),
LV_CHART_AXIS_PRIMARY_Y);
stacked_area_chart.series_list[1] = lv_chart_add_series(stacked_area_chart.obj,␣
,→lv_palette_main(LV_PALETTE_BLUE),
LV_CHART_AXIS_PRIMARY_Y);
stacked_area_chart.series_list[2] = lv_chart_add_series(stacked_area_chart.obj,␣
,→lv_palette_main(LV_PALETTE_GREEN),
LV_CHART_AXIS_PRIMARY_Y);
for(int point = 0; point < 10; point++) {
/* Make some random data */
uint32_t vals[3] = {lv_rand(10, 20), lv_rand(20, 30), lv_rand(20, 30)};
int8_t fixed_point_shift = 5;
uint32_t total = vals[0] + vals[1] + vals[2];
uint32_t draw_heights[3];
uint32_t int_sum = 0;
uint32_t decimal_sum = 0;
/* Fixed point cascade rounding ensures percentages add to 100 */
for(int32_t series_index = 0; series_index < 3; series_index++) {
decimal_sum += (((vals[series_index] * 100) << fixed_point_shift) /␣
,→total);
int_sum += (vals[series_index] * 100) / total;
int32_t modifier = (round_fixed_point(decimal_sum, fixed_point_shift) >>␣
,→fixed_point_shift) - int_sum;
/* The draw heights are equal to the percentage of the total each value␣
,→is + the cumulative sum of the previous percentages.
The accumulation is how the values get "stacked" */
draw_heights[series_index] = int_sum + modifier;
/* Draw to the series in the reverse order to which they were␣
,→initialised.
Without this the higher values will draw on top of the lower ones.
This is because the Z-height of a series matches the order it was␣
,→initialised */
lv_chart_set_next_value(stacked_area_chart.obj, stacked_area_chart.series_
,→list[3 - series_index - 1],
draw_heights[series_index]);
}
}
lv_chart_refresh(stacked_area_chart.obj);
}
#endif
import display_driver
import lvgl as lv
(continuesonnextpage)
2.7. Widgets 126


--- Page 131 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# A class is used to keep track of the series list because later we
# need to draw to the series in the reverse order to which they were initialised.
class StackedAreaChart:
def __init__(self):
self.obj = None
self.series_list = [None, None, None]
stacked_area_chart = StackedAreaChart()
#
# Callback which draws the blocks of colour under the lines
#
def draw_event_cb(e):
obj = e.get_target()
cont_a = lv.area_t()
obj.get_coords(cont_a)
#Add the faded area before the lines are drawn
dsc = e.get_draw_part_dsc()
if dsc.part == lv.PART.ITEMS:
if not dsc.p1 or not dsc.p2:
return
# Add a line mask that keeps the area below the line
line_mask_param = lv.draw_mask_line_param_t()
line_mask_param.points_init(dsc.p1.x, dsc.p1.y, dsc.p2.x, dsc.p2.y, lv.DRAW_
,→MASK_LINE_SIDE.BOTTOM)
line_mask_id = lv.draw_mask_add(line_mask_param, None)
#Draw a rectangle that will be affected by the mask
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_opa = lv.OPA.COVER
draw_rect_dsc.bg_color = dsc.line_dsc.color
a = lv.area_t()
a.x1 = dsc.p1.x
a.x2 = dsc.p2.x
a.y1 = min(dsc.p1.y, dsc.p2.y)
a.y2 = cont_a.y2 - 13 # -13 cuts off where the rectangle draws over the chart␣
,→margin. Without this an area of 0 doesn't look like 0
dsc.draw_ctx.rect(draw_rect_dsc, a)
# Remove the mask
lv.draw_mask_free_param(line_mask_param)
lv.draw_mask_remove_id(line_mask_id)
#
# Helper function to round a fixed point number
#
def round_fixed_point(n, shift):
# Create a bitmask to isolates the decimal part of the fixed point number
mask = 1
for bit_pos in range(shift):
(continuesonnextpage)
2.7. Widgets 127


--- Page 132 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
mask = (mask << 1) + 1
decimal_part = n & mask
# Get 0.5 as fixed point
rounding_boundary = 1 << (shift - 1)
# Return either the integer part of n or the integer part + 1
if decimal_part < rounding_boundary:
return (n & ~mask)
return ((n >> shift) + 1) << shift
#
# Stacked area chart
#
def lv_example_chart_8():
#Create a stacked_area_chart.obj
stacked_area_chart.obj = lv.chart(lv.scr_act())
stacked_area_chart.obj.set_size(200, 150)
stacked_area_chart.obj.center()
stacked_area_chart.obj.set_type( lv.chart.TYPE.LINE)
stacked_area_chart.obj.set_div_line_count(5, 7)
stacked_area_chart.obj.add_event_cb( draw_event_cb, lv.EVENT.DRAW_PART_BEGIN,␣
,→None)
# Set range to 0 to 100 for percentages. Draw ticks
stacked_area_chart.obj.set_range(lv.chart.AXIS.PRIMARY_Y,0,100)
stacked_area_chart.obj.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 3, 0, 5, 1, True,␣
,→30)
#Set point size to 0 so the lines are smooth
stacked_area_chart.obj.set_style_size(0, lv.PART.INDICATOR)
# Add some data series
stacked_area_chart.series_list[0] = stacked_area_chart.obj.add_series(lv.palette_
,→main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
stacked_area_chart.series_list[1] = stacked_area_chart.obj.add_series(lv.palette_
,→main(lv.PALETTE.BLUE), lv.chart.AXIS.PRIMARY_Y)
stacked_area_chart.series_list[2] = stacked_area_chart.obj.add_series(lv.palette_
,→main(lv.PALETTE.GREEN), lv.chart.AXIS.PRIMARY_Y)
for point in range(10):
# Make some random data
vals = [lv.rand(10, 20), lv.rand(20, 30), lv.rand(20, 30)]
fixed_point_shift = 5
total = vals[0] + vals[1] + vals[2]
draw_heights = [0, 0, 0]
int_sum = 0
decimal_sum = 0
# Fixed point cascade rounding ensures percentages add to 100
for series_index in range(3):
decimal_sum += int(((vals[series_index] * 100) << fixed_point_shift) //␣
,→total)
(continuesonnextpage)
2.7. Widgets 128


--- Page 133 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
int_sum += int((vals[series_index] * 100) / total)
modifier = (round_fixed_point(decimal_sum, fixed_point_shift) >> fixed_
,→point_shift) - int_sum
# The draw heights are equal to the percentage of the total each value␣
,→is + the cumulative sum of the previous percentages.
# The accumulation is how the values get "stacked"
draw_heights[series_index] = int(int_sum + modifier)
# Draw to the series in the reverse order to which they were initialised.
# Without this the higher values will draw on top of the lower ones.
# This is because the Z-height of a series matches the order it was␣
,→initialised
stacked_area_chart.obj.set_next_value( stacked_area_chart.series_list[3 -␣
,→series_index - 1], draw_heights[series_index])
stacked_area_chart.obj.refresh()
lv_example_chart_8()
2.7.9 Checkbox
SimpleCheckboxes
#include "../../lv_examples.h"
#if LV_USE_CHECKBOX && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
const char * txt = lv_checkbox_get_text(obj);
const char * state = lv_obj_get_state(obj) & LV_STATE_CHECKED ? "Checked" :
,→"Unchecked";
LV_LOG_USER("%s: %s", txt, state);
}
}
void lv_example_checkbox_1(void)
{
lv_obj_set_flex_flow(lv_scr_act(), LV_FLEX_FLOW_COLUMN);
lv_obj_set_flex_align(lv_scr_act(), LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_START, LV_
,→FLEX_ALIGN_CENTER);
lv_obj_t * cb;
cb = lv_checkbox_create(lv_scr_act());
lv_checkbox_set_text(cb, "Apple");
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
cb = lv_checkbox_create(lv_scr_act());
lv_checkbox_set_text(cb, "Banana");
lv_obj_add_state(cb, LV_STATE_CHECKED);
(continuesonnextpage)
2.7. Widgets 129


--- Page 134 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
cb = lv_checkbox_create(lv_scr_act());
lv_checkbox_set_text(cb, "Lemon");
lv_obj_add_state(cb, LV_STATE_DISABLED);
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
cb = lv_checkbox_create(lv_scr_act());
lv_obj_add_state(cb, LV_STATE_CHECKED | LV_STATE_DISABLED);
lv_checkbox_set_text(cb, "Melon\nand a new line");
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
lv_obj_update_layout(cb);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
txt = obj.get_text()
if obj.get_state() & lv.STATE.CHECKED:
state = "Checked"
else:
state = "Unchecked"
print(txt + ":" + state)
lv.scr_act().set_flex_flow(lv.FLEX_FLOW.COLUMN)
lv.scr_act().set_flex_align(lv.FLEX_ALIGN.CENTER, lv.FLEX_ALIGN.START, lv.FLEX_ALIGN.
,→CENTER)
cb = lv.checkbox(lv.scr_act())
cb.set_text("Apple")
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb = lv.checkbox(lv.scr_act())
cb.set_text("Banana")
cb.add_state(lv.STATE.CHECKED)
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb = lv.checkbox(lv.scr_act())
cb.set_text("Lemon")
cb.add_state(lv.STATE.DISABLED)
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb = lv.checkbox(lv.scr_act())
cb.add_state(lv.STATE.CHECKED | lv.STATE.DISABLED)
cb.set_text("Melon")
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb.update_layout()
2.7. Widgets 130


--- Page 135 ---


LVGLDocumentation8.3
Checkboxesasradiobuttons
#include "../../lv_examples.h"
#if LV_USE_CHECKBOX && LV_BUILD_EXAMPLES
static lv_style_t style_radio;
static lv_style_t style_radio_chk;
static uint32_t active_index_1 = 0;
static uint32_t active_index_2 = 0;
static void radio_event_handler(lv_event_t * e)
{
uint32_t * active_id = lv_event_get_user_data(e);
lv_obj_t * cont = lv_event_get_current_target(e);
lv_obj_t * act_cb = lv_event_get_target(e);
lv_obj_t * old_cb = lv_obj_get_child(cont, *active_id);
/*Do nothing if the container was clicked*/
if(act_cb == cont) return;
lv_obj_clear_state(old_cb, LV_STATE_CHECKED); /*Uncheck the previous radio␣
,→button*/
lv_obj_add_state(act_cb, LV_STATE_CHECKED); /*Uncheck the current radio␣
,→button*/
*active_id = lv_obj_get_index(act_cb);
LV_LOG_USER("Selected radio buttons: %d, %d", (int)active_index_1, (int)active_
,→index_2);
}
static void radiobutton_create(lv_obj_t * parent, const char * txt)
{
lv_obj_t * obj = lv_checkbox_create(parent);
lv_checkbox_set_text(obj, txt);
lv_obj_add_flag(obj, LV_OBJ_FLAG_EVENT_BUBBLE);
lv_obj_add_style(obj, &style_radio, LV_PART_INDICATOR);
lv_obj_add_style(obj, &style_radio_chk, LV_PART_INDICATOR | LV_STATE_CHECKED);
}
/**
* Checkboxes as radio buttons
*/
void lv_example_checkbox_2(void)
{
/* The idea is to enable `LV_OBJ_FLAG_EVENT_BUBBLE` on checkboxes and process the
* `LV_EVENT_CLICKED` on the container.
* A variable is passed as event user data where the index of the active
* radiobutton is saved */
lv_style_init(&style_radio);
lv_style_set_radius(&style_radio, LV_RADIUS_CIRCLE);
lv_style_init(&style_radio_chk);
lv_style_set_bg_img_src(&style_radio_chk, NULL);
uint32_t i;
(continuesonnextpage)
2.7. Widgets 131


--- Page 136 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
char buf[32];
lv_obj_t * cont1 = lv_obj_create(lv_scr_act());
lv_obj_set_flex_flow(cont1, LV_FLEX_FLOW_COLUMN);
lv_obj_set_size(cont1, lv_pct(40), lv_pct(80));
lv_obj_add_event_cb(cont1, radio_event_handler, LV_EVENT_CLICKED, &active_index_
,→1);
for(i = 0; i < 5; i++) {
lv_snprintf(buf, sizeof(buf), "A %d", (int)i + 1);
radiobutton_create(cont1, buf);
}
/*Make the first checkbox checked*/
lv_obj_add_state(lv_obj_get_child(cont1, 0), LV_STATE_CHECKED);
lv_obj_t * cont2 = lv_obj_create(lv_scr_act());
lv_obj_set_flex_flow(cont2, LV_FLEX_FLOW_COLUMN);
lv_obj_set_size(cont2, lv_pct(40), lv_pct(80));
lv_obj_set_x(cont2, lv_pct(50));
lv_obj_add_event_cb(cont2, radio_event_handler, LV_EVENT_CLICKED, &active_index_
,→2);
for(i = 0; i < 3; i++) {
lv_snprintf(buf, sizeof(buf), "B %d", (int)i + 1);
radiobutton_create(cont2, buf);
}
/*Make the first checkbox checked*/
lv_obj_add_state(lv_obj_get_child(cont2, 0), LV_STATE_CHECKED);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/widgets/checkbox/lv_example_checkbox_2.py
2.7.10 Colorwheel
SimpleColorwheel
#include "../../lv_examples.h"
#if LV_USE_COLORWHEEL && LV_BUILD_EXAMPLES
void lv_example_colorwheel_1(void)
{
lv_obj_t * cw;
cw = lv_colorwheel_create(lv_scr_act(), true);
lv_obj_set_size(cw, 200, 200);
lv_obj_center(cw);
}
#endif
2.7. Widgets 132


--- Page 137 ---


LVGLDocumentation8.3
cw = lv.colorwheel(lv.scr_act(), True)
cw.set_size(200, 200)
cw.center()
2.7.11 Dropdown
SimpleDropdownlist
#include "../../lv_examples.h"
#if LV_USE_DROPDOWN && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
char buf[32];
lv_dropdown_get_selected_str(obj, buf, sizeof(buf));
LV_LOG_USER("Option: %s", buf);
}
}
void lv_example_dropdown_1(void)
{
/*Create a normal drop down list*/
lv_obj_t * dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options(dd, "Apple\n"
"Banana\n"
"Orange\n"
"Cherry\n"
"Grape\n"
"Raspberry\n"
"Melon\n"
"Orange\n"
"Lemon\n"
"Nuts");
lv_obj_align(dd, LV_ALIGN_TOP_MID, 0, 20);
lv_obj_add_event_cb(dd, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
option = " "*10 # should be large enough to store the option
obj.get_selected_str(option, len(option))
# .strip() removes trailing spaces
print("Option: \"%s\"" % option.strip())
(continuesonnextpage)
2.7. Widgets 133


--- Page 138 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Create a normal drop down list
dd = lv.dropdown(lv.scr_act())
dd.set_options("\n".join([
"Apple",
"Banana",
"Orange",
"Cherry",
"Grape",
"Raspberry",
"Melon",
"Orange",
"Lemon",
"Nuts"]))
dd.align(lv.ALIGN.TOP_MID, 0, 20)
dd.add_event_cb(event_handler, lv.EVENT.ALL, None)
Dropdowninfourdirections
#include "../../lv_examples.h"
#if LV_USE_DROPDOWN && LV_BUILD_EXAMPLES
/**
* Create a drop down, up, left and right menus
*/
void lv_example_dropdown_2(void)
{
static const char * opts = "Apple\n"
"Banana\n"
"Orange\n"
"Melon";
lv_obj_t * dd;
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_obj_align(dd, LV_ALIGN_TOP_MID, 0, 10);
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_dropdown_set_dir(dd, LV_DIR_BOTTOM);
lv_dropdown_set_symbol(dd, LV_SYMBOL_UP);
lv_obj_align(dd, LV_ALIGN_BOTTOM_MID, 0, -10);
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_dropdown_set_dir(dd, LV_DIR_RIGHT);
lv_dropdown_set_symbol(dd, LV_SYMBOL_RIGHT);
lv_obj_align(dd, LV_ALIGN_LEFT_MID, 10, 0);
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_dropdown_set_dir(dd, LV_DIR_LEFT);
lv_dropdown_set_symbol(dd, LV_SYMBOL_LEFT);
lv_obj_align(dd, LV_ALIGN_RIGHT_MID, -10, 0);
(continuesonnextpage)
2.7. Widgets 134


--- Page 139 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
#
# Create a drop down, up, left and right menus
#
opts = "\n".join([
"Apple",
"Banana",
"Orange",
"Melon",
"Grape",
"Raspberry"])
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
dd.align(lv.ALIGN.TOP_MID, 0, 10)
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
dd.set_dir(lv.DIR.BOTTOM)
dd.set_symbol(lv.SYMBOL.UP)
dd.align(lv.ALIGN.BOTTOM_MID, 0, -10)
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
dd.set_dir(lv.DIR.RIGHT)
dd.set_symbol(lv.SYMBOL.RIGHT)
dd.align(lv.ALIGN.LEFT_MID, 10, 0)
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
dd.set_dir(lv.DIR.LEFT)
dd.set_symbol(lv.SYMBOL.LEFT)
dd.align(lv.ALIGN.RIGHT_MID, -10, 0)
Menu
#include "../../lv_examples.h"
#if LV_USE_DROPDOWN && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_obj_t * dropdown = lv_event_get_target(e);
char buf[64];
lv_dropdown_get_selected_str(dropdown, buf, sizeof(buf));
LV_LOG_USER("'%s' is selected", buf);
}
/**
* Create a menu from a drop-down list and show some drop-down list features and␣
,→styling
(continuesonnextpage)
2.7. Widgets 135


--- Page 140 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
*/
void lv_example_dropdown_3(void)
{
/*Create a drop down list*/
lv_obj_t * dropdown = lv_dropdown_create(lv_scr_act());
lv_obj_align(dropdown, LV_ALIGN_TOP_LEFT, 10, 10);
lv_dropdown_set_options(dropdown, "New project\n"
"New file\n"
"Save\n"
"Save as ...\n"
"Open project\n"
"Recent projects\n"
"Preferences\n"
"Exit");
/*Set a fixed text to display on the button of the drop-down list*/
lv_dropdown_set_text(dropdown, "Menu");
/*Use a custom image as down icon and flip it when the list is opened*/
LV_IMG_DECLARE(img_caret_down)
lv_dropdown_set_symbol(dropdown, &img_caret_down);
lv_obj_set_style_transform_angle(dropdown, 1800, LV_PART_INDICATOR | LV_STATE_
,→CHECKED);
/*In a menu we don't need to show the last clicked item*/
lv_dropdown_set_selected_highlight(dropdown, false);
lv_obj_add_event_cb(dropdown, event_cb, LV_EVENT_VALUE_CHANGED, NULL);
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_caret_down.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_caret_down.png")
sys.exit()
img_caret_down_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def event_cb(e):
dropdown = e.get_target()
option = " "*64 # should be large enough to store the option
dropdown.get_selected_str(option, len(option))
(continuesonnextpage)
2.7. Widgets 136


--- Page 141 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
print(option.strip() +" is selected")
#
# Create a menu from a drop-down list and show some drop-down list features and␣
,→styling
#
# Create a drop down list
dropdown = lv.dropdown(lv.scr_act())
dropdown.align(lv.ALIGN.TOP_LEFT, 10, 10)
dropdown.set_options("\n".join([
"New project",
"New file",
"Open project",
"Recent projects",
"Preferences",
"Exit"]))
# Set a fixed text to display on the button of the drop-down list
dropdown.set_text("Menu")
# Use a custom image as down icon and flip it when the list is opened
# LV_IMG_DECLARE(img_caret_down)
dropdown.set_symbol(img_caret_down_argb)
dropdown.set_style_transform_angle(1800, lv.PART.INDICATOR | lv.STATE.CHECKED)
# In a menu we don't need to show the last clicked item
dropdown.set_selected_highlight(False)
dropdown.add_event_cb(event_cb, lv.EVENT.VALUE_CHANGED, None)
2.7.12 Image
Imagefromvariableandsymbol
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_BUILD_EXAMPLES
void lv_example_img_1(void)
{
LV_IMG_DECLARE(img_cogwheel_argb);
lv_obj_t * img1 = lv_img_create(lv_scr_act());
lv_img_set_src(img1, &img_cogwheel_argb);
lv_obj_align(img1, LV_ALIGN_CENTER, 0, -20);
lv_obj_set_size(img1, 200, 200);
lv_obj_t * img2 = lv_img_create(lv_scr_act());
lv_img_set_src(img2, LV_SYMBOL_OK "Accept");
lv_obj_align_to(img2, img1, LV_ALIGN_OUT_BOTTOM_MID, 0, 20);
}
#endif
2.7. Widgets 137


--- Page 142 ---


LVGLDocumentation8.3
#!/opt/bin/lv_micropython -i
import usys as sys
import lvgl as lv
import display_driver
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_cogwheel_argb.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
img1 = lv.img(lv.scr_act())
img1.set_src(img_cogwheel_argb)
img1.align(lv.ALIGN.CENTER, 0, -20)
img1.set_size(200, 200)
img2 = lv.img(lv.scr_act())
img2.set_src(lv.SYMBOL.OK + "Accept")
img2.align_to(img1, lv.ALIGN.OUT_BOTTOM_MID, 0, 20)
Imagerecoloring
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_USE_SLIDER && LV_BUILD_EXAMPLES
static lv_obj_t * create_slider(lv_color_t color);
static void slider_event_cb(lv_event_t * e);
static lv_obj_t * red_slider, * green_slider, * blue_slider, * intense_slider;
static lv_obj_t * img1;
/**
* Demonstrate runtime image re-coloring
*/
void lv_example_img_2(void)
{
/*Create 4 sliders to adjust RGB color and re-color intensity*/
red_slider = create_slider(lv_palette_main(LV_PALETTE_RED));
green_slider = create_slider(lv_palette_main(LV_PALETTE_GREEN));
blue_slider = create_slider(lv_palette_main(LV_PALETTE_BLUE));
intense_slider = create_slider(lv_palette_main(LV_PALETTE_GREY));
(continuesonnextpage)
2.7. Widgets 138


--- Page 143 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_slider_set_value(red_slider, LV_OPA_20, LV_ANIM_OFF);
lv_slider_set_value(green_slider, LV_OPA_90, LV_ANIM_OFF);
lv_slider_set_value(blue_slider, LV_OPA_60, LV_ANIM_OFF);
lv_slider_set_value(intense_slider, LV_OPA_50, LV_ANIM_OFF);
lv_obj_align(red_slider, LV_ALIGN_LEFT_MID, 25, 0);
lv_obj_align_to(green_slider, red_slider, LV_ALIGN_OUT_RIGHT_MID, 25, 0);
lv_obj_align_to(blue_slider, green_slider, LV_ALIGN_OUT_RIGHT_MID, 25, 0);
lv_obj_align_to(intense_slider, blue_slider, LV_ALIGN_OUT_RIGHT_MID, 25, 0);
/*Now create the actual image*/
LV_IMG_DECLARE(img_cogwheel_argb)
img1 = lv_img_create(lv_scr_act());
lv_img_set_src(img1, &img_cogwheel_argb);
lv_obj_align(img1, LV_ALIGN_RIGHT_MID, -20, 0);
lv_event_send(intense_slider, LV_EVENT_VALUE_CHANGED, NULL);
}
static void slider_event_cb(lv_event_t * e)
{
LV_UNUSED(e);
/*Recolor the image based on the sliders' values*/
lv_color_t color = lv_color_make(lv_slider_get_value(red_slider), lv_slider_get_
,→value(green_slider),
lv_slider_get_value(blue_slider));
lv_opa_t intense = lv_slider_get_value(intense_slider);
lv_obj_set_style_img_recolor_opa(img1, intense, 0);
lv_obj_set_style_img_recolor(img1, color, 0);
}
static lv_obj_t * create_slider(lv_color_t color)
{
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_slider_set_range(slider, 0, 255);
lv_obj_set_size(slider, 10, 200);
lv_obj_set_style_bg_color(slider, color, LV_PART_KNOB);
lv_obj_set_style_bg_color(slider, lv_color_darken(color, LV_OPA_40), LV_PART_
,→INDICATOR);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
return slider;
}
#endif
#!/opt/bin/lv_micropython -i
import usys as sys
import lvgl as lv
import display_driver
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
(continuesonnextpage)
2.7. Widgets 139


--- Page 144 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Create an image from the png file
try:
with open('../../assets/img_cogwheel_argb.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def create_slider(color):
slider = lv.slider(lv.scr_act())
slider.set_range(0, 255)
slider.set_size(10, 200)
slider.set_style_bg_color(color, lv.PART.KNOB)
slider.set_style_bg_color(color.color_darken(lv.OPA._40), lv.PART.INDICATOR)
slider.add_event_cb(slider_event_cb, lv.EVENT.VALUE_CHANGED, None)
return slider
def slider_event_cb(e):
# Recolor the image based on the sliders' values
color = lv.color_make(red_slider.get_value(), green_slider.get_value(), blue_
,→slider.get_value())
intense = intense_slider.get_value()
img1.set_style_img_recolor_opa(intense, 0)
img1.set_style_img_recolor(color, 0)
#
# Demonstrate runtime image re-coloring
#
# Create 4 sliders to adjust RGB color and re-color intensity
red_slider = create_slider(lv.palette_main(lv.PALETTE.RED))
green_slider = create_slider(lv.palette_main(lv.PALETTE.GREEN))
blue_slider = create_slider(lv.palette_main(lv.PALETTE.BLUE))
intense_slider = create_slider(lv.palette_main(lv.PALETTE.GREY))
red_slider.set_value(lv.OPA._20, lv.ANIM.OFF)
green_slider.set_value(lv.OPA._90, lv.ANIM.OFF)
blue_slider.set_value(lv.OPA._60, lv.ANIM.OFF)
intense_slider.set_value(lv.OPA._50, lv.ANIM.OFF)
red_slider.align(lv.ALIGN.LEFT_MID, 25, 0)
green_slider.align_to(red_slider, lv.ALIGN.OUT_RIGHT_MID, 25, 0)
blue_slider.align_to(green_slider, lv.ALIGN.OUT_RIGHT_MID, 25, 0)
intense_slider.align_to(blue_slider, lv.ALIGN.OUT_RIGHT_MID, 25, 0)
# Now create the actual image
img1 = lv.img(lv.scr_act())
img1.set_src(img_cogwheel_argb)
img1.align(lv.ALIGN.RIGHT_MID, -20, 0)
lv.event_send(intense_slider, lv.EVENT.VALUE_CHANGED, None)
(continuesonnextpage)
2.7. Widgets 140


--- Page 145 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
Rotateandzoom
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_BUILD_EXAMPLES
static void set_angle(void * img, int32_t v)
{
lv_img_set_angle(img, v);
}
static void set_zoom(void * img, int32_t v)
{
lv_img_set_zoom(img, v);
}
/**
* Show transformations (zoom and rotation) using a pivot point.
*/
void lv_example_img_3(void)
{
LV_IMG_DECLARE(img_cogwheel_argb);
/*Now create the actual image*/
lv_obj_t * img = lv_img_create(lv_scr_act());
lv_img_set_src(img, &img_cogwheel_argb);
lv_obj_align(img, LV_ALIGN_CENTER, 50, 50);
lv_img_set_pivot(img, 0, 0); /*Rotate around the top left corner*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, img);
lv_anim_set_exec_cb(&a, set_angle);
lv_anim_set_values(&a, 0, 3600);
lv_anim_set_time(&a, 5000);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
lv_anim_set_exec_cb(&a, set_zoom);
lv_anim_set_values(&a, 128, 256);
lv_anim_set_playback_time(&a, 3000);
lv_anim_start(&a);
}
#endif
#!/opt/bin/lv_micropython -i
import usys as sys
import lvgl as lv
import display_driver
(continuesonnextpage)
2.7. Widgets 141


--- Page 146 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_cogwheel_argb.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def set_angle(img, v):
img.set_angle(v)
def set_zoom(img, v):
img.set_zoom(v)
#
# Show transformations (zoom and rotation) using a pivot point.
#
# Now create the actual image
img = lv.img(lv.scr_act())
img.set_src(img_cogwheel_argb)
img.align(lv.ALIGN.CENTER, 50, 50)
img.set_pivot(0, 0) # Rotate around the top left corner
a1 = lv.anim_t()
a1.init()
a1.set_var(img)
a1.set_custom_exec_cb(lambda a,val: set_angle(img,val))
a1.set_values(0, 3600)
a1.set_time(5000)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_var(img)
a2.set_custom_exec_cb(lambda a,val: set_zoom(img,val))
a2.set_values(128, 256)
a2.set_time(5000)
a2.set_playback_time(3000)
a2.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
lv.anim_t.start(a2)
2.7. Widgets 142


--- Page 147 ---


LVGLDocumentation8.3
Imageoffsetandstyling
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_BUILD_EXAMPLES
static void ofs_y_anim(void * img, int32_t v)
{
lv_img_set_offset_y(img, v);
}
/**
* Image styling and offset
*/
void lv_example_img_4(void)
{
LV_IMG_DECLARE(img_skew_strip);
static lv_style_t style;
lv_style_init(&style);
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_YELLOW));
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_img_recolor_opa(&style, LV_OPA_COVER);
lv_style_set_img_recolor(&style, lv_color_black());
lv_obj_t * img = lv_img_create(lv_scr_act());
lv_obj_add_style(img, &style, 0);
lv_img_set_src(img, &img_skew_strip);
lv_obj_set_size(img, 150, 100);
lv_obj_center(img);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, img);
lv_anim_set_exec_cb(&a, ofs_y_anim);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 500);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
from imagetools import get_png_info, open_png
def ofs_y_anim(img, v):
img.set_offset_y(v)
# print(img,v)
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
(continuesonnextpage)
2.7. Widgets 143


--- Page 148 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
with open('../../assets/img_skew_strip.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_skew_strip.png")
sys.exit()
img_skew_strip = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
#
# Image styling and offset
#
style = lv.style_t()
style.init()
style.set_bg_color(lv.palette_main(lv.PALETTE.YELLOW))
style.set_bg_opa(lv.OPA.COVER)
style.set_img_recolor_opa(lv.OPA.COVER)
style.set_img_recolor(lv.color_black())
img = lv.img(lv.scr_act())
img.add_style(style, 0)
img.set_src(img_skew_strip)
img.set_size(150, 100)
img.center()
a = lv.anim_t()
a.init()
a.set_var(img)
a.set_values(0, 100)
a.set_time(3000)
a.set_playback_time(500)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a.set_custom_exec_cb(lambda a,val: ofs_y_anim(img,val))
lv.anim_t.start(a)
2.7.13 Image button
SimpleImagebutton
#include "../../lv_examples.h"
#if LV_USE_IMGBTN && LV_BUILD_EXAMPLES
void lv_example_imgbtn_1(void)
{
LV_IMG_DECLARE(imgbtn_left);
LV_IMG_DECLARE(imgbtn_right);
LV_IMG_DECLARE(imgbtn_mid);
/*Create a transition animation on width transformation and recolor.*/
static lv_style_prop_t tr_prop[] = {LV_STYLE_TRANSFORM_WIDTH, LV_STYLE_IMG_
,→RECOLOR_OPA, 0};
(continuesonnextpage)
2.7. Widgets 144


--- Page 149 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static lv_style_transition_dsc_t tr;
lv_style_transition_dsc_init(&tr, tr_prop, lv_anim_path_linear, 200, 0, NULL);
static lv_style_t style_def;
lv_style_init(&style_def);
lv_style_set_text_color(&style_def, lv_color_white());
lv_style_set_transition(&style_def, &tr);
/*Darken the button when pressed and make it wider*/
static lv_style_t style_pr;
lv_style_init(&style_pr);
lv_style_set_img_recolor_opa(&style_pr, LV_OPA_30);
lv_style_set_img_recolor(&style_pr, lv_color_black());
lv_style_set_transform_width(&style_pr, 20);
/*Create an image button*/
lv_obj_t * imgbtn1 = lv_imgbtn_create(lv_scr_act());
lv_imgbtn_set_src(imgbtn1, LV_IMGBTN_STATE_RELEASED, &imgbtn_left, &imgbtn_mid, &
,→imgbtn_right);
lv_obj_add_style(imgbtn1, &style_def, 0);
lv_obj_add_style(imgbtn1, &style_pr, LV_STATE_PRESSED);
lv_obj_align(imgbtn1, LV_ALIGN_CENTER, 0, 0);
/*Create a label on the image button*/
lv_obj_t * label = lv_label_create(imgbtn1);
lv_label_set_text(label, "Button");
lv_obj_align(label, LV_ALIGN_CENTER, 0, -4);
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/imgbtn_left.png','rb') as f:
imgbtn_left_data = f.read()
except:
print("Could not find imgbtn_left.png")
sys.exit()
imgbtn_left_dsc = lv.img_dsc_t({
'data_size': len(imgbtn_left_data),
'data': imgbtn_left_data
})
try:
with open('../../assets/imgbtn_mid.png','rb') as f:
imgbtn_mid_data = f.read()
except:
(continuesonnextpage)
2.7. Widgets 145


--- Page 150 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
print("Could not find imgbtn_mid.png")
sys.exit()
imgbtn_mid_dsc = lv.img_dsc_t({
'data_size': len(imgbtn_mid_data),
'data': imgbtn_mid_data
})
try:
with open('../../assets/imgbtn_right.png','rb') as f:
imgbtn_right_data = f.read()
except:
print("Could not find imgbtn_right.png")
sys.exit()
imgbtn_right_dsc = lv.img_dsc_t({
'data_size': len(imgbtn_right_data),
'data': imgbtn_right_data
})
# Create a transition animation on width transformation and recolor.
tr_prop = [lv.STYLE.TRANSFORM_WIDTH, lv.STYLE.IMG_RECOLOR_OPA, 0]
tr = lv.style_transition_dsc_t()
tr.init(tr_prop, lv.anim_t.path_linear, 200, 0, None)
style_def = lv.style_t()
style_def.init()
style_def.set_text_color(lv.color_white())
style_def.set_transition(tr)
# Darken the button when pressed and make it wider
style_pr = lv.style_t()
style_pr.init()
style_pr.set_img_recolor_opa(lv.OPA._30)
style_pr.set_img_recolor(lv.color_black())
style_pr.set_transform_width(20)
# Create an image button
imgbtn1 = lv.imgbtn(lv.scr_act())
imgbtn1.set_src(lv.imgbtn.STATE.RELEASED, imgbtn_left_dsc, imgbtn_mid_dsc, imgbtn_
,→right_dsc)
imgbtn1.add_style(style_def, 0)
imgbtn1.add_style(style_pr, lv.STATE.PRESSED)
imgbtn1.align(lv.ALIGN.CENTER, 0, 0)
# Create a label on the image button
label = lv.label(imgbtn1)
label.set_text("Button")
label.align(lv.ALIGN.CENTER, 0, -4)
2.7. Widgets 146


--- Page 151 ---


LVGLDocumentation8.3
2.7.14 Keyboard
Keyboardwithtextarea
#include "../../lv_examples.h"
#if LV_USE_KEYBOARD && LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * ta = lv_event_get_target(e);
lv_obj_t * kb = lv_event_get_user_data(e);
if(code == LV_EVENT_FOCUSED) {
lv_keyboard_set_textarea(kb, ta);
lv_obj_clear_flag(kb, LV_OBJ_FLAG_HIDDEN);
}
if(code == LV_EVENT_DEFOCUSED) {
lv_keyboard_set_textarea(kb, NULL);
lv_obj_add_flag(kb, LV_OBJ_FLAG_HIDDEN);
}
}
void lv_example_keyboard_1(void)
{
/*Create a keyboard to use it with an of the text areas*/
lv_obj_t * kb = lv_keyboard_create(lv_scr_act());
/*Create a text area. The keyboard will write here*/
lv_obj_t * ta;
ta = lv_textarea_create(lv_scr_act());
lv_obj_align(ta, LV_ALIGN_TOP_LEFT, 10, 10);
lv_obj_add_event_cb(ta, ta_event_cb, LV_EVENT_ALL, kb);
lv_textarea_set_placeholder_text(ta, "Hello");
lv_obj_set_size(ta, 140, 80);
ta = lv_textarea_create(lv_scr_act());
lv_obj_align(ta, LV_ALIGN_TOP_RIGHT, -10, 10);
lv_obj_add_event_cb(ta, ta_event_cb, LV_EVENT_ALL, kb);
lv_obj_set_size(ta, 140, 80);
lv_keyboard_set_textarea(kb, ta);
}
#endif
def ta_event_cb(e,kb):
code = e.get_code()
ta = e.get_target()
if code == lv.EVENT.FOCUSED:
kb.set_textarea(ta)
kb.clear_flag(lv.obj.FLAG.HIDDEN)
if code == lv.EVENT.DEFOCUSED:
kb.set_textarea(None)
kb.add_flag(lv.obj.FLAG.HIDDEN)
# Create a keyboard to use it with one of the text areas
(continuesonnextpage)
2.7. Widgets 147


--- Page 152 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
kb = lv.keyboard(lv.scr_act())
# Create a text area. The keyboard will write here
ta = lv.textarea(lv.scr_act())
ta.set_width(200)
ta.align(lv.ALIGN.TOP_LEFT, 10, 10)
ta.add_event_cb(lambda e: ta_event_cb(e,kb), lv.EVENT.ALL, None)
ta.set_placeholder_text("Hello")
ta = lv.textarea(lv.scr_act())
ta.set_width(200)
ta.align(lv.ALIGN.TOP_RIGHT, -10, 10)
ta.add_event_cb(lambda e: ta_event_cb(e,kb), lv.EVENT.ALL, None)
kb.set_textarea(ta)
2.7.15 Label
Linewrap,recoloringandscrolling
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES
/**
* Show line wrap, re-color, line align and text scrolling.
*/
void lv_example_label_1(void)
{
lv_obj_t * label1 = lv_label_create(lv_scr_act());
lv_label_set_long_mode(label1, LV_LABEL_LONG_WRAP); /*Break the long lines*/
lv_label_set_recolor(label1, true); /*Enable re-coloring by␣
,→commands in the text*/
lv_label_set_text(label1, "#0000ff Re-color# #ff00ff words# #ff0000 of a# label,␣
,→align the lines to the center "
"and wrap long text automatically.");
lv_obj_set_width(label1, 150); /*Set smaller width to make the lines wrap*/
lv_obj_set_style_text_align(label1, LV_TEXT_ALIGN_CENTER, 0);
lv_obj_align(label1, LV_ALIGN_CENTER, 0, -40);
lv_obj_t * label2 = lv_label_create(lv_scr_act());
lv_label_set_long_mode(label2, LV_LABEL_LONG_SCROLL_CIRCULAR); /*Circular␣
,→scroll*/
lv_obj_set_width(label2, 150);
lv_label_set_text(label2, "It is a circularly scrolling text. ");
lv_obj_align(label2, LV_ALIGN_CENTER, 0, 40);
}
#endif
#
# Show line wrap, re-color, line align and text scrolling.
#
label1 = lv.label(lv.scr_act())
(continuesonnextpage)
2.7. Widgets 148


--- Page 153 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label1.set_long_mode(lv.label.LONG.WRAP) # Break the long lines*/
label1.set_recolor(True) # Enable re-coloring by commands in the␣
,→text
label1.set_text("#0000ff Re-color# #ff00ff words# #ff0000 of a# label, align the␣
,→lines to the center"
"and wrap long text automatically.")
label1.set_width(150) # Set smaller width to make the lines␣
,→wrap
label1.set_style_text_align(lv.ALIGN.CENTER, 0)
label1.align(lv.ALIGN.CENTER, 0, -40)
label2 = lv.label(lv.scr_act())
label2.set_long_mode(lv.label.LONG.SCROLL_CIRCULAR) # Circular scroll
label2.set_width(150)
label2.set_text("It is a circularly scrolling text. ")
label2.align(lv.ALIGN.CENTER, 0, 40)
Textshadow
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES
/**
* Create a fake text shadow
*/
void lv_example_label_2(void)
{
/*Create a style for the shadow*/
static lv_style_t style_shadow;
lv_style_init(&style_shadow);
lv_style_set_text_opa(&style_shadow, LV_OPA_30);
lv_style_set_text_color(&style_shadow, lv_color_black());
/*Create a label for the shadow first (it's in the background)*/
lv_obj_t * shadow_label = lv_label_create(lv_scr_act());
lv_obj_add_style(shadow_label, &style_shadow, 0);
/*Create the main label*/
lv_obj_t * main_label = lv_label_create(lv_scr_act());
lv_label_set_text(main_label, "A simple method to create\n"
"shadows on a text.\n"
"It even works with\n\n"
"newlines and spaces.");
/*Set the same text for the shadow label*/
lv_label_set_text(shadow_label, lv_label_get_text(main_label));
/*Position the main label*/
lv_obj_align(main_label, LV_ALIGN_CENTER, 0, 0);
/*Shift the second label down and to the right by 2 pixel*/
lv_obj_align_to(shadow_label, main_label, LV_ALIGN_TOP_LEFT, 2, 2);
}
(continuesonnextpage)
2.7. Widgets 149


--- Page 154 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#endif
#
# Create a fake text shadow
#
# Create a style for the shadow
style_shadow = lv.style_t()
style_shadow.init()
style_shadow.set_text_opa(lv.OPA._30)
style_shadow.set_text_color(lv.color_black())
# Create a label for the shadow first (it's in the background)
shadow_label = lv.label(lv.scr_act())
shadow_label.add_style(style_shadow, 0)
# Create the main label
main_label = lv.label(lv.scr_act())
main_label.set_text("A simple method to create\n"
"shadows on a text.\n"
"It even works with\n\n"
"newlines and spaces.")
# Set the same text for the shadow label
shadow_label.set_text(lv.label.get_text(main_label))
# Position the main label
main_label.align(lv.ALIGN.CENTER, 0, 0)
# Shift the second label down and to the right by 2 pixel
shadow_label.align_to(main_label, lv.ALIGN.TOP_LEFT, 2, 2)
ShowLTR,RTLandChinesetexts
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES && LV_FONT_DEJAVU_16_PERSIAN_HEBREW && LV_FONT_
,→SIMSUN_16_CJK && LV_USE_BIDI
/**
* Show mixed LTR, RTL and Chinese label
*/
void lv_example_label_3(void)
{
lv_obj_t * ltr_label = lv_label_create(lv_scr_act());
lv_label_set_text(ltr_label, "In modern terminology, a microcontroller is similar␣
,→to a system on a chip (SoC).");
lv_obj_set_style_text_font(ltr_label, &lv_font_montserrat_16, 0);
lv_obj_set_width(ltr_label, 310);
lv_obj_align(ltr_label, LV_ALIGN_TOP_LEFT, 5, 5);
lv_obj_t * rtl_label = lv_label_create(lv_scr_act());
lv_label_set_text(rtl_label,
(continuesonnextpage)
2.7. Widgets 150


--- Page 155 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
",(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0) :(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)) CPU - Central␣
,→Processing Unit).");
lv_obj_set_style_base_dir(rtl_label, LV_BASE_DIR_RTL, 0);
lv_obj_set_style_text_font(rtl_label, &lv_font_dejavu_16_persian_hebrew, 0);
lv_obj_set_width(rtl_label, 310);
lv_obj_align(rtl_label, LV_ALIGN_LEFT_MID, 5, 0);
lv_obj_t * cz_label = lv_label_create(lv_scr_act());
lv_label_set_text(cz_label,
"(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)Embedded System(cid:0)(cid:0)\n(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)");
lv_obj_set_style_text_font(cz_label, &lv_font_simsun_16_cjk, 0);
lv_obj_set_width(cz_label, 310);
lv_obj_align(cz_label, LV_ALIGN_BOTTOM_LEFT, 5, -5);
}
#endif
import fs_driver
#
# Show mixed LTR, RTL and Chinese label
#
ltr_label = lv.label(lv.scr_act())
ltr_label.set_text("In modern terminology, a microcontroller is similar to a system␣
,→on a chip (SoC).")
# ltr_label.set_style_text_font(ltr_label, &lv_font_montserrat_16, 0);
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
try:
ltr_label.set_style_text_font(ltr_label, lv.font_montserrat_16, 0)
except:
font_montserrat_16 = lv.font_load("S:../../assets/font/montserrat-16.fnt")
ltr_label.set_style_text_font(font_montserrat_16, 0)
ltr_label.set_width(310)
ltr_label.align(lv.ALIGN.TOP_LEFT, 5, 5)
rtl_label = lv.label(lv.scr_act())
rtl_label.set_text(",(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0) :(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)) CPU - Central␣
,→Processing Unit).")
rtl_label.set_style_base_dir(lv.BASE_DIR.RTL, 0)
rtl_label.set_style_text_font(lv.font_dejavu_16_persian_hebrew, 0)
rtl_label.set_width(310)
rtl_label.align(lv.ALIGN.LEFT_MID, 5, 0)
font_simsun_16_cjk = lv.font_load("S:../../assets/font/lv_font_simsun_16_cjk.fnt")
cz_label = lv.label(lv.scr_act())
cz_label.set_style_text_font(font_simsun_16_cjk, 0)
cz_label.set_text("(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)Embedded System(cid:0)(cid:0)\n(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)")
cz_label.set_width(310)
cz_label.align(lv.ALIGN.BOTTOM_LEFT, 5, -5)
2.7. Widgets 151


--- Page 156 ---


LVGLDocumentation8.3
Drawlabelwithgradientcolor
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_USE_CANVAS && LV_BUILD_EXAMPLES && LV_DRAW_COMPLEX
#define MASK_WIDTH 100
#define MASK_HEIGHT 45
static void add_mask_event_cb(lv_event_t * e)
{
static lv_draw_mask_map_param_t m;
static int16_t mask_id;
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
lv_opa_t * mask_map = lv_event_get_user_data(e);
if(code == LV_EVENT_COVER_CHECK) {
lv_event_set_cover_res(e, LV_COVER_RES_MASKED);
}
else if(code == LV_EVENT_DRAW_MAIN_BEGIN) {
lv_draw_mask_map_init(&m, &obj->coords, mask_map);
mask_id = lv_draw_mask_add(&m, NULL);
}
else if(code == LV_EVENT_DRAW_MAIN_END) {
lv_draw_mask_free_param(&m);
lv_draw_mask_remove_id(mask_id);
}
}
/**
* Draw label with gradient color
*/
void lv_example_label_4(void)
{
/* Create the mask of a text by drawing it to a canvas*/
static lv_opa_t mask_map[MASK_WIDTH * MASK_HEIGHT];
/*Create a "8 bit alpha" canvas and clear it*/
lv_obj_t * canvas = lv_canvas_create(lv_scr_act());
lv_canvas_set_buffer(canvas, mask_map, MASK_WIDTH, MASK_HEIGHT, LV_IMG_CF_ALPHA_
,→8BIT);
lv_canvas_fill_bg(canvas, lv_color_black(), LV_OPA_TRANSP);
/*Draw a label to the canvas. The result "image" will be used as mask*/
lv_draw_label_dsc_t label_dsc;
lv_draw_label_dsc_init(&label_dsc);
label_dsc.color = lv_color_white();
label_dsc.align = LV_TEXT_ALIGN_CENTER;
lv_canvas_draw_text(canvas, 5, 5, MASK_WIDTH, &label_dsc, "Text with gradient");
/*The mask is reads the canvas is not required anymore*/
lv_obj_del(canvas);
/* Create an object from where the text will be masked out.
* Now it's a rectangle with a gradient but it could be an image too*/
lv_obj_t * grad = lv_obj_create(lv_scr_act());
(continuesonnextpage)
2.7. Widgets 152


--- Page 157 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(grad, MASK_WIDTH, MASK_HEIGHT);
lv_obj_center(grad);
lv_obj_set_style_bg_color(grad, lv_color_hex(0xff0000), 0);
lv_obj_set_style_bg_grad_color(grad, lv_color_hex(0x0000ff), 0);
lv_obj_set_style_bg_grad_dir(grad, LV_GRAD_DIR_HOR, 0);
lv_obj_add_event_cb(grad, add_mask_event_cb, LV_EVENT_ALL, mask_map);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/widgets/label/lv_example_label_4.py
Customizecircularscrollinganimation
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES
/**
* Show customizing the circular scrolling animation of a label with `LV_LABEL_LONG_
,→SCROLL_CIRCULAR`
* long mode.
*/
void lv_example_label_5(void)
{
static lv_anim_t animation_template;
static lv_style_t label_style;
lv_anim_init(&animation_template);
lv_anim_set_delay(&animation_template, 1000); /*Wait 1 second to start␣
,→the first scroll*/
lv_anim_set_repeat_delay(&animation_template,
3000); /*Repeat the scroll 3 seconds after the label␣
,→scrolls back to the initial position*/
/*Initialize the label style with the animation template*/
lv_style_init(&label_style);
lv_style_set_anim(&label_style, &animation_template);
lv_obj_t * label1 = lv_label_create(lv_scr_act());
lv_label_set_long_mode(label1, LV_LABEL_LONG_SCROLL_CIRCULAR); /*Circular␣
,→scroll*/
lv_obj_set_width(label1, 150);
lv_label_set_text(label1, "It is a circularly scrolling text. ");
lv_obj_align(label1, LV_ALIGN_CENTER, 0, 40);
lv_obj_add_style(label1, &label_style, LV_STATE_DEFAULT); /*Add the␣
,→style to the label*/
}
#endif
#
# Show customizing the circular scrolling animation of a label with `LV_LABEL_LONG_
,→SCROLL_CIRCULAR` long mode.
(continuesonnextpage)
2.7. Widgets 153


--- Page 158 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#
label1 = lv.label(lv.scr_act())
label1.set_long_mode(lv.label.LONG.SCROLL_CIRCULAR) # Circular scroll
label1.set_width(150)
label1.set_text("It is a circularly scrolling text. ")
label1.align(lv.ALIGN.CENTER, 0, 40)
2.7.16 LED
LEDwithcustomstyle
#include "../../lv_examples.h"
#if LV_USE_LED && LV_BUILD_EXAMPLES
/**
* Create LED's with different brightness and color
*/
void lv_example_led_1(void)
{
/*Create a LED and switch it OFF*/
lv_obj_t * led1 = lv_led_create(lv_scr_act());
lv_obj_align(led1, LV_ALIGN_CENTER, -80, 0);
lv_led_off(led1);
/*Copy the previous LED and set a brightness*/
lv_obj_t * led2 = lv_led_create(lv_scr_act());
lv_obj_align(led2, LV_ALIGN_CENTER, 0, 0);
lv_led_set_brightness(led2, 150);
lv_led_set_color(led2, lv_palette_main(LV_PALETTE_RED));
/*Copy the previous LED and switch it ON*/
lv_obj_t * led3 = lv_led_create(lv_scr_act());
lv_obj_align(led3, LV_ALIGN_CENTER, 80, 0);
lv_led_on(led3);
}
#endif
#
# Create LED's with different brightness and color
#
# Create a LED and switch it OFF
led1 = lv.led(lv.scr_act())
led1.align(lv.ALIGN.CENTER, -80, 0)
led1.off()
# Copy the previous LED and set a brightness
led2 = lv.led(lv.scr_act())
led2.align(lv.ALIGN.CENTER, 0, 0)
led2.set_brightness(150)
led2.set_color(lv.palette_main(lv.PALETTE.RED))
(continuesonnextpage)
2.7. Widgets 154


--- Page 159 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Copy the previous LED and switch it ON
led3 = lv.led(lv.scr_act())
led3.align(lv.ALIGN.CENTER, 80, 0)
led3.on()
2.7.17 Line
SimpleLine
#include "../../lv_examples.h"
#if LV_USE_LINE && LV_BUILD_EXAMPLES
void lv_example_line_1(void)
{
/*Create an array for the points of the line*/
static lv_point_t line_points[] = { {5, 5}, {70, 70}, {120, 10}, {180, 60}, {240,␣
,→10} };
/*Create style*/
static lv_style_t style_line;
lv_style_init(&style_line);
lv_style_set_line_width(&style_line, 8);
lv_style_set_line_color(&style_line, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_line_rounded(&style_line, true);
/*Create a line and apply the new style*/
lv_obj_t * line1;
line1 = lv_line_create(lv_scr_act());
lv_line_set_points(line1, line_points, 5); /*Set the points*/
lv_obj_add_style(line1, &style_line, 0);
lv_obj_center(line1);
}
#endif
# Create an array for the points of the line
line_points = [ {"x":5, "y":5},
{"x":70, "y":70},
{"x":120, "y":10},
{"x":180, "y":60},
{"x":240, "y":10}]
# Create style
style_line = lv.style_t()
style_line.init()
style_line.set_line_width(8)
style_line.set_line_color(lv.palette_main(lv.PALETTE.BLUE))
style_line.set_line_rounded(True)
# Create a line and apply the new style
line1 = lv.line(lv.scr_act())
line1.set_points(line_points, 5) # Set the points
(continuesonnextpage)
2.7. Widgets 155


--- Page 160 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
line1.add_style(style_line, 0)
line1.center()
2.7.18 List
SimpleList
#include "../../lv_examples.h"
#if LV_USE_LIST && LV_BUILD_EXAMPLES
static lv_obj_t * list1;
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
LV_LOG_USER("Clicked: %s", lv_list_get_btn_text(list1, obj));
}
}
void lv_example_list_1(void)
{
/*Create a list*/
list1 = lv_list_create(lv_scr_act());
lv_obj_set_size(list1, 180, 220);
lv_obj_center(list1);
/*Add buttons to the list*/
lv_obj_t * btn;
lv_list_add_text(list1, "File");
btn = lv_list_add_btn(list1, LV_SYMBOL_FILE, "New");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_DIRECTORY, "Open");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_SAVE, "Save");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_CLOSE, "Delete");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_EDIT, "Edit");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_list_add_text(list1, "Connectivity");
btn = lv_list_add_btn(list1, LV_SYMBOL_BLUETOOTH, "Bluetooth");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_GPS, "Navigation");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_USB, "USB");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_BATTERY_FULL, "Battery");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_list_add_text(list1, "Exit");
(continuesonnextpage)
2.7. Widgets 156


--- Page 161 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn = lv_list_add_btn(list1, LV_SYMBOL_OK, "Apply");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_CLOSE, "Close");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.CLICKED:
print("Clicked: list1." + list1.get_btn_text(obj))
# Create a list
list1 = lv.list(lv.scr_act())
list1.set_size(180, 220)
list1.center()
# Add buttons to the list
list1.add_text("File")
btn_new = list1.add_btn(lv.SYMBOL.FILE, "New")
btn_new.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_open = list1.add_btn(lv.SYMBOL.DIRECTORY, "Open")
btn_open.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_save = list1.add_btn(lv.SYMBOL.SAVE, "Save")
btn_save.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_delete = list1.add_btn(lv.SYMBOL.CLOSE, "Delete")
btn_delete.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_edit = list1.add_btn(lv.SYMBOL.EDIT, "Edit")
btn_edit.add_event_cb(event_handler,lv.EVENT.ALL, None)
list1.add_text("Connectivity")
btn_bluetooth = list1.add_btn(lv.SYMBOL.BLUETOOTH, "Bluetooth")
btn_bluetooth.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_navig = list1.add_btn(lv.SYMBOL.GPS, "Navigation")
btn_navig.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_USB = list1.add_btn(lv.SYMBOL.USB, "USB")
btn_USB.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_battery = list1.add_btn(lv.SYMBOL.BATTERY_FULL, "Battery")
btn_battery.add_event_cb(event_handler,lv.EVENT.ALL, None)
list1.add_text("Exit")
btn_apply = list1.add_btn(lv.SYMBOL.OK, "Apply")
btn_apply.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_close = list1.add_btn(lv.SYMBOL.CLOSE, "Close")
btn_close.add_event_cb(event_handler,lv.EVENT.ALL, None)
2.7. Widgets 157


--- Page 162 ---


LVGLDocumentation8.3
SortingaListusingupanddownbuttons
#include <stdlib.h>
#include "../../lv_examples.h"
#if LV_USE_LIST && LV_BUILD_EXAMPLES
static lv_obj_t * list1;
static lv_obj_t * list2;
static lv_obj_t * currentButton = NULL;
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
LV_LOG_USER("Clicked: %s", lv_list_get_btn_text(list1, obj));
if(currentButton == obj) {
currentButton = NULL;
}
else {
currentButton = obj;
}
lv_obj_t * parent = lv_obj_get_parent(obj);
uint32_t i;
for(i = 0; i < lv_obj_get_child_cnt(parent); i++) {
lv_obj_t * child = lv_obj_get_child(parent, i);
if(child == currentButton) {
lv_obj_add_state(child, LV_STATE_CHECKED);
}
else {
lv_obj_clear_state(child, LV_STATE_CHECKED);
}
}
}
}
static void event_handler_top(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED) {
if(currentButton == NULL) return;
lv_obj_move_background(currentButton);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_up(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
if(currentButton == NULL) return;
uint32_t index = lv_obj_get_index(currentButton);
if(index <= 0) return;
lv_obj_move_to_index(currentButton, index - 1);
(continuesonnextpage)
2.7. Widgets 158


--- Page 163 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_center(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
if(currentButton == NULL) return;
lv_obj_t * parent = lv_obj_get_parent(currentButton);
const uint32_t pos = lv_obj_get_child_cnt(parent) / 2;
lv_obj_move_to_index(currentButton, pos);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_dn(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
if(currentButton == NULL) return;
const uint32_t index = lv_obj_get_index(currentButton);
lv_obj_move_to_index(currentButton, index + 1);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_bottom(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED) {
if(currentButton == NULL) return;
lv_obj_move_foreground(currentButton);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_swap(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
// lv_obj_t* obj = lv_event_get_target(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
uint32_t cnt = lv_obj_get_child_cnt(list1);
for(int i = 0; i < 100; i++)
if(cnt > 1) {
lv_obj_t * obj = lv_obj_get_child(list1, rand() % cnt);
lv_obj_move_to_index(obj, rand() % cnt);
if(currentButton != NULL) {
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
}
}
(continuesonnextpage)
2.7. Widgets 159


--- Page 164 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
void lv_example_list_2(void)
{
/*Create a list*/
list1 = lv_list_create(lv_scr_act());
lv_obj_set_size(list1, lv_pct(60), lv_pct(100));
lv_obj_set_style_pad_row(list1, 5, 0);
/*Add buttons to the list*/
lv_obj_t * btn;
int i;
for(i = 0; i < 15; i++) {
btn = lv_btn_create(list1);
lv_obj_set_width(btn, lv_pct(50));
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_t * lab = lv_label_create(btn);
lv_label_set_text_fmt(lab, "Item %d", i);
}
/*Select the first button by default*/
currentButton = lv_obj_get_child(list1, 0);
lv_obj_add_state(currentButton, LV_STATE_CHECKED);
/*Create a second list with up and down buttons*/
list2 = lv_list_create(lv_scr_act());
lv_obj_set_size(list2, lv_pct(40), lv_pct(100));
lv_obj_align(list2, LV_ALIGN_TOP_RIGHT, 0, 0);
lv_obj_set_flex_flow(list2, LV_FLEX_FLOW_COLUMN);
btn = lv_list_add_btn(list2, NULL, "Top");
lv_obj_add_event_cb(btn, event_handler_top, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, LV_SYMBOL_UP, "Up");
lv_obj_add_event_cb(btn, event_handler_up, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, LV_SYMBOL_LEFT, "Center");
lv_obj_add_event_cb(btn, event_handler_center, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, LV_SYMBOL_DOWN, "Down");
lv_obj_add_event_cb(btn, event_handler_dn, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, NULL, "Bottom");
lv_obj_add_event_cb(btn, event_handler_bottom, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, LV_SYMBOL_SHUFFLE, "Shuffle");
lv_obj_add_event_cb(btn, event_handler_swap, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
}
#endif
2.7. Widgets 160


--- Page 165 ---


LVGLDocumentation8.3
import urandom
currentButton = None
list1 = None
def event_handler(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED:
if currentButton == obj:
currentButton = None
else:
currentButton = obj
parent = obj.get_parent()
for i in range( parent.get_child_cnt()):
child = parent.get_child(i)
if child == currentButton:
child.add_state(lv.STATE.CHECKED)
else:
child.clear_state(lv.STATE.CHECKED)
def event_handler_top(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED:
if currentButton == None:
return
currentButton.move_background()
currentButton.scroll_to_view( lv.ANIM.ON)
def event_handler_up(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
index = currentButton.get_index()
if index <= 0:
return
currentButton.move_to_index(index - 1)
currentButton.scroll_to_view(lv.ANIM.ON)
def event_handler_center(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
parent = currentButton.get_parent()
pos = parent.get_child_cnt() // 2
currentButton.move_to_index(pos)
currentButton.scroll_to_view(lv.ANIM.ON)
(continuesonnextpage)
2.7. Widgets 161


--- Page 166 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
def event_handler_dn(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
index = currentButton.get_index()
currentButton.move_to_index(index + 1)
currentButton.scroll_to_view(lv.ANIM.ON)
def event_handler_bottom(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
currentButton.move_foreground()
currentButton.scroll_to_view(lv.ANIM.ON)
def event_handler_swap(evt):
global currentButton
global list1
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED:
cnt = list1.get_child_cnt()
for i in range(100):
if cnt > 1:
obj = list1.get_child(urandom.getrandbits(32) % cnt )
obj.move_to_index(urandom.getrandbits(32) % cnt)
if currentButton != None:
currentButton.scroll_to_view(lv.ANIM.ON)
#Create a list with buttons that can be sorted
list1 = lv.list(lv.scr_act())
list1.set_size(lv.pct(60), lv.pct(100))
list1.set_style_pad_row( 5, 0)
for i in range(15):
btn = lv.btn(list1)
btn.set_width(lv.pct(100))
btn.add_event_cb( event_handler, lv.EVENT.CLICKED, None)
lab = lv.label(btn)
lab.set_text("Item " + str(i))
#Select the first button by default
currentButton = list1.get_child(0)
currentButton.add_state(lv.STATE.CHECKED)
#Create a second list with up and down buttons
list2 = lv.list(lv.scr_act())
list2.set_size(lv.pct(40), lv.pct(100))
list2.align(lv.ALIGN.TOP_RIGHT, 0, 0)
list2.set_flex_flow(lv.FLEX_FLOW.COLUMN)
(continuesonnextpage)
2.7. Widgets 162


--- Page 167 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn = list2.add_btn(None, "Top")
btn.add_event_cb(event_handler_top, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.UP, "Up")
btn.add_event_cb(event_handler_up, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.LEFT, "Center")
btn.add_event_cb(event_handler_center, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.DOWN, "Down")
btn.add_event_cb(event_handler_dn, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(None, "Bottom")
btn.add_event_cb(event_handler_bottom, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.SHUFFLE, "Shuffle")
btn.add_event_cb(event_handler_swap, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
2.7.19 Menu
SimpleMenu
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_BUILD_EXAMPLES
void lv_example_menu_1(void)
{
/*Create a menu object*/
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * label;
/*Create a sub page*/
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
/*Create a main page*/
lv_obj_t * main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1");
(continuesonnextpage)
2.7. Widgets 163


--- Page 168 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 2");
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 3 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_menu_set_page(menu, main_page);
}
#endif
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_size(320, 240)
menu.center()
# Create a sub page
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 2")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 3 (Click me!)")
menu.set_load_page_event(cont, sub_page)
menu.set_page(main_page)
SimpleMenuwithrootbtn
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_USE_MSGBOX && LV_BUILD_EXAMPLES
static void back_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_t * menu = lv_event_get_user_data(e);
(continuesonnextpage)
2.7. Widgets 164


--- Page 169 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
if(lv_menu_back_btn_is_root(menu, obj)) {
lv_obj_t * mbox1 = lv_msgbox_create(NULL, "Hello", "Root back btn click.",␣
,→NULL, true);
lv_obj_center(mbox1);
}
}
void lv_example_menu_2(void)
{
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_menu_set_mode_root_back_btn(menu, LV_MENU_ROOT_BACK_BTN_ENABLED);
lv_obj_add_event_cb(menu, back_event_handler, LV_EVENT_CLICKED, menu);
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * label;
/*Create a sub page*/
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
/*Create a main page*/
lv_obj_t * main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1");
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 2");
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 3 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_menu_set_page(menu, main_page);
}
#endif
def back_event_handler(e):
obj = e.get_target()
if menu.back_btn_is_root(obj):
mbox1 = lv.msgbox(lv.scr_act(), "Hello", "Root back btn click.", None, True)
mbox1.center()
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_mode_root_back_btn(lv.menu.ROOT_BACK_BTN.ENABLED)
menu.add_event_cb(back_event_handler, lv.EVENT.CLICKED, None)
(continuesonnextpage)
2.7. Widgets 165


--- Page 170 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
menu.set_size(320, 240)
menu.center()
# Create a sub page
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 2")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 3 (Click me!)")
menu.set_load_page_event(cont, sub_page)
menu.set_page(main_page)
SimpleMenuwithcustomheader
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_USE_USER_DATA && LV_BUILD_EXAMPLES
void lv_example_menu_3(void)
{
/*Create a menu object*/
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
/*Modify the header*/
lv_obj_t * back_btn = lv_menu_get_main_header_back_btn(menu);
lv_obj_t * back_btn_label = lv_label_create(back_btn);
lv_label_set_text(back_btn_label, "Back");
lv_obj_t * cont;
lv_obj_t * label;
/*Create sub pages*/
lv_obj_t * sub_1_page = lv_menu_page_create(menu, "Page 1");
cont = lv_menu_cont_create(sub_1_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
lv_obj_t * sub_2_page = lv_menu_page_create(menu, "Page 2");
(continuesonnextpage)
2.7. Widgets 166


--- Page 171 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
cont = lv_menu_cont_create(sub_2_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
lv_obj_t * sub_3_page = lv_menu_page_create(menu, "Page 3");
cont = lv_menu_cont_create(sub_3_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
/*Create a main page*/
lv_obj_t * main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_1_page);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 2 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_2_page);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 3 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_3_page);
lv_menu_set_page(menu, main_page);
}
#endif
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_size(320, 240)
menu.center()
# Create sub pages
sub_page_1 = lv.menu_page(menu, "Page 1")
cont = lv.menu_cont(sub_page_1)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
sub_page_2 = lv.menu_page(menu, "Page 2")
cont = lv.menu_cont(sub_page_2)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
sub_page_3 = lv.menu_page(menu, "Page 3")
cont = lv.menu_cont(sub_page_3)
label = lv.label(cont)
(continuesonnextpage)
2.7. Widgets 167


--- Page 172 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label.set_text("Hello, I am hiding here")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1 (Click me!)")
menu.set_load_page_event(cont, sub_page_1)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 2 (Click me!)")
menu.set_load_page_event(cont, sub_page_2)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 3 (Click me!)")
menu.set_load_page_event(cont, sub_page_3)
menu.set_page(main_page)
SimpleMenuwithfloatingbtntoaddnewmenupage
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_BUILD_EXAMPLES
static uint32_t btn_cnt = 1;
static lv_obj_t * main_page;
static lv_obj_t * menu;
static void float_btn_event_cb(lv_event_t * e)
{
LV_UNUSED(e);
btn_cnt++;
lv_obj_t * cont;
lv_obj_t * label;
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
label = lv_label_create(cont);
lv_label_set_text_fmt(label, "Hello, I am hiding inside %"LV_PRIu32, btn_cnt);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text_fmt(label, "Item %"LV_PRIu32, btn_cnt);
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_obj_scroll_to_view_recursive(cont, LV_ANIM_ON);
}
void lv_example_menu_4(void)
(continuesonnextpage)
2.7. Widgets 168


--- Page 173 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
/*Create a menu object*/
menu = lv_menu_create(lv_scr_act());
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * label;
/*Create a sub page*/
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding inside the first item");
/*Create a main page*/
main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1");
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_menu_set_page(menu, main_page);
/*Create floating btn*/
lv_obj_t * float_btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(float_btn, 50, 50);
lv_obj_add_flag(float_btn, LV_OBJ_FLAG_FLOATING);
lv_obj_align(float_btn, LV_ALIGN_BOTTOM_RIGHT, -10, -10);
lv_obj_add_event_cb(float_btn, float_btn_event_cb, LV_EVENT_CLICKED, menu);
lv_obj_set_style_radius(float_btn, LV_RADIUS_CIRCLE, 0);
lv_obj_set_style_bg_img_src(float_btn, LV_SYMBOL_PLUS, 0);
lv_obj_set_style_text_font(float_btn, lv_theme_get_font_large(float_btn), 0);
}
#endif
btn_cnt = 1
def float_btn_event_cb(e):
global btn_cnt
btn_cnt += 1
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding inside {:d}".format(btn_cnt))
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item {:d}".format(btn_cnt))
menu.set_load_page_event(cont, sub_page)
(continuesonnextpage)
2.7. Widgets 169


--- Page 174 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_size(320, 240)
menu.center()
# Create a sub page
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding inside the first item")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1")
menu.set_load_page_event(cont, sub_page)
menu.set_page(main_page)
float_btn = lv.btn(lv.scr_act())
float_btn.set_size(50, 50)
float_btn.add_flag(lv.obj.FLAG.FLOATING)
float_btn.align(lv.ALIGN.BOTTOM_RIGHT, -10, -10)
float_btn.add_event_cb(float_btn_event_cb, lv.EVENT.CLICKED, None)
float_btn.set_style_radius(lv.RADIUS.CIRCLE, 0)
float_btn.set_style_bg_img_src(lv.SYMBOL.PLUS, 0)
float_btn.set_style_text_font(lv.theme_get_font_large(float_btn), 0)
ComplexMenu
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_USE_MSGBOX && LV_BUILD_EXAMPLES
enum {
LV_MENU_ITEM_BUILDER_VARIANT_1,
LV_MENU_ITEM_BUILDER_VARIANT_2
};
typedef uint8_t lv_menu_builder_variant_t;
static void back_event_handler(lv_event_t * e);
static void switch_handler(lv_event_t * e);
lv_obj_t * root_page;
static lv_obj_t * create_text(lv_obj_t * parent, const char * icon, const char * txt,
lv_menu_builder_variant_t builder_variant);
static lv_obj_t * create_slider(lv_obj_t * parent,
const char * icon, const char * txt, int32_t min,␣
,→int32_t max, int32_t val);
static lv_obj_t * create_switch(lv_obj_t * parent,
const char * icon, const char * txt, bool chk);
void lv_example_menu_5(void)
(continuesonnextpage)
2.7. Widgets 170


--- Page 175 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_color_t bg_color = lv_obj_get_style_bg_color(menu, 0);
if(lv_color_brightness(bg_color) > 127) {
lv_obj_set_style_bg_color(menu, lv_color_darken(lv_obj_get_style_bg_
,→color(menu, 0), 10), 0);
}
else {
lv_obj_set_style_bg_color(menu, lv_color_darken(lv_obj_get_style_bg_
,→color(menu, 0), 50), 0);
}
lv_menu_set_mode_root_back_btn(menu, LV_MENU_ROOT_BACK_BTN_ENABLED);
lv_obj_add_event_cb(menu, back_event_handler, LV_EVENT_CLICKED, menu);
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * section;
/*Create sub pages*/
lv_obj_t * sub_mechanics_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_mechanics_page, lv_obj_get_style_pad_left(lv_menu_
,→get_main_header(menu), 0), 0);
lv_menu_separator_create(sub_mechanics_page);
section = lv_menu_section_create(sub_mechanics_page);
create_slider(section, LV_SYMBOL_SETTINGS, "Velocity", 0, 150, 120);
create_slider(section, LV_SYMBOL_SETTINGS, "Acceleration", 0, 150, 50);
create_slider(section, LV_SYMBOL_SETTINGS, "Weight limit", 0, 150, 80);
lv_obj_t * sub_sound_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_sound_page, lv_obj_get_style_pad_left(lv_menu_get_
,→main_header(menu), 0), 0);
lv_menu_separator_create(sub_sound_page);
section = lv_menu_section_create(sub_sound_page);
create_switch(section, LV_SYMBOL_AUDIO, "Sound", false);
lv_obj_t * sub_display_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_display_page, lv_obj_get_style_pad_left(lv_menu_get_
,→main_header(menu), 0), 0);
lv_menu_separator_create(sub_display_page);
section = lv_menu_section_create(sub_display_page);
create_slider(section, LV_SYMBOL_SETTINGS, "Brightness", 0, 150, 100);
lv_obj_t * sub_software_info_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_software_info_page, lv_obj_get_style_pad_left(lv_
,→menu_get_main_header(menu), 0), 0);
section = lv_menu_section_create(sub_software_info_page);
create_text(section, NULL, "Version 1.0", LV_MENU_ITEM_BUILDER_VARIANT_1);
lv_obj_t * sub_legal_info_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_legal_info_page, lv_obj_get_style_pad_left(lv_menu_
,→get_main_header(menu), 0), 0);
section = lv_menu_section_create(sub_legal_info_page);
for(uint32_t i = 0; i < 15; i++) {
create_text(section, NULL,
"This is a long long long long long long long long long text, if␣
,→it is long enough it may scroll.", (continuesonnextpage)
2.7. Widgets 171


--- Page 176 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
LV_MENU_ITEM_BUILDER_VARIANT_1);
}
lv_obj_t * sub_about_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_about_page, lv_obj_get_style_pad_left(lv_menu_get_
,→main_header(menu), 0), 0);
lv_menu_separator_create(sub_about_page);
section = lv_menu_section_create(sub_about_page);
cont = create_text(section, NULL, "Software information", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_software_info_page);
cont = create_text(section, NULL, "Legal information", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_legal_info_page);
lv_obj_t * sub_menu_mode_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_menu_mode_page, lv_obj_get_style_pad_left(lv_menu_
,→get_main_header(menu), 0), 0);
lv_menu_separator_create(sub_menu_mode_page);
section = lv_menu_section_create(sub_menu_mode_page);
cont = create_switch(section, LV_SYMBOL_AUDIO, "Sidebar enable", true);
lv_obj_add_event_cb(lv_obj_get_child(cont, 2), switch_handler, LV_EVENT_VALUE_
,→CHANGED, menu);
/*Create a root page*/
root_page = lv_menu_page_create(menu, "Settings");
lv_obj_set_style_pad_hor(root_page, lv_obj_get_style_pad_left(lv_menu_get_main_
,→header(menu), 0), 0);
section = lv_menu_section_create(root_page);
cont = create_text(section, LV_SYMBOL_SETTINGS, "Mechanics", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_mechanics_page);
cont = create_text(section, LV_SYMBOL_AUDIO, "Sound", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_sound_page);
cont = create_text(section, LV_SYMBOL_SETTINGS, "Display", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_display_page);
create_text(root_page, NULL, "Others", LV_MENU_ITEM_BUILDER_VARIANT_1);
section = lv_menu_section_create(root_page);
cont = create_text(section, NULL, "About", LV_MENU_ITEM_BUILDER_VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_about_page);
cont = create_text(section, LV_SYMBOL_SETTINGS, "Menu mode", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_menu_mode_page);
lv_menu_set_sidebar_page(menu, root_page);
lv_event_send(lv_obj_get_child(lv_obj_get_child(lv_menu_get_cur_sidebar_
,→page(menu), 0), 0), LV_EVENT_CLICKED, NULL);
}
static void back_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_t * menu = lv_event_get_user_data(e);
(continuesonnextpage)
2.7. Widgets 172


--- Page 177 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
if(lv_menu_back_btn_is_root(menu, obj)) {
lv_obj_t * mbox1 = lv_msgbox_create(NULL, "Hello", "Root back btn click.",␣
,→NULL, true);
lv_obj_center(mbox1);
}
}
static void switch_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * menu = lv_event_get_user_data(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
if(lv_obj_has_state(obj, LV_STATE_CHECKED)) {
lv_menu_set_page(menu, NULL);
lv_menu_set_sidebar_page(menu, root_page);
lv_event_send(lv_obj_get_child(lv_obj_get_child(lv_menu_get_cur_sidebar_
,→page(menu), 0), 0), LV_EVENT_CLICKED, NULL);
}
else {
lv_menu_set_sidebar_page(menu, NULL);
lv_menu_clear_history(menu); /* Clear history because we will be showing␣
,→the root page later */
lv_menu_set_page(menu, root_page);
}
}
}
static lv_obj_t * create_text(lv_obj_t * parent, const char * icon, const char * txt,
lv_menu_builder_variant_t builder_variant)
{
lv_obj_t * obj = lv_menu_cont_create(parent);
lv_obj_t * img = NULL;
lv_obj_t * label = NULL;
if(icon) {
img = lv_img_create(obj);
lv_img_set_src(img, icon);
}
if(txt) {
label = lv_label_create(obj);
lv_label_set_text(label, txt);
lv_label_set_long_mode(label, LV_LABEL_LONG_SCROLL_CIRCULAR);
lv_obj_set_flex_grow(label, 1);
}
if(builder_variant == LV_MENU_ITEM_BUILDER_VARIANT_2 && icon && txt) {
lv_obj_add_flag(img, LV_OBJ_FLAG_FLEX_IN_NEW_TRACK);
lv_obj_swap(img, label);
}
return obj;
}
(continuesonnextpage)
2.7. Widgets 173


--- Page 178 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static lv_obj_t * create_slider(lv_obj_t * parent, const char * icon, const char *␣
,→txt, int32_t min, int32_t max,
int32_t val)
{
lv_obj_t * obj = create_text(parent, icon, txt, LV_MENU_ITEM_BUILDER_VARIANT_2);
lv_obj_t * slider = lv_slider_create(obj);
lv_obj_set_flex_grow(slider, 1);
lv_slider_set_range(slider, min, max);
lv_slider_set_value(slider, val, LV_ANIM_OFF);
if(icon == NULL) {
lv_obj_add_flag(slider, LV_OBJ_FLAG_FLEX_IN_NEW_TRACK);
}
return obj;
}
static lv_obj_t * create_switch(lv_obj_t * parent, const char * icon, const char *␣
,→txt, bool chk)
{
lv_obj_t * obj = create_text(parent, icon, txt, LV_MENU_ITEM_BUILDER_VARIANT_1);
lv_obj_t * sw = lv_switch_create(obj);
lv_obj_add_state(sw, chk ? LV_STATE_CHECKED : 0);
return obj;
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/widgets/menu/lv_example_menu_5.py
2.7.20 Meter
Simplemeter
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
static lv_obj_t * meter;
static void set_value(void * indic, int32_t v)
{
lv_meter_set_indicator_value(meter, indic, v);
}
/**
* A simple meter
*/
void lv_example_meter_1(void)
{
(continuesonnextpage)
2.7. Widgets 174


--- Page 179 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
meter = lv_meter_create(lv_scr_act());
lv_obj_center(meter);
lv_obj_set_size(meter, 200, 200);
/*Add a scale first*/
lv_meter_scale_t * scale = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale, 41, 2, 10, lv_palette_main(LV_PALETTE_
,→GREY));
lv_meter_set_scale_major_ticks(meter, scale, 8, 4, 15, lv_color_black(), 10);
lv_meter_indicator_t * indic;
/*Add a blue arc to the start*/
indic = lv_meter_add_arc(meter, scale, 3, lv_palette_main(LV_PALETTE_BLUE), 0);
lv_meter_set_indicator_start_value(meter, indic, 0);
lv_meter_set_indicator_end_value(meter, indic, 20);
/*Make the tick lines blue at the start of the scale*/
indic = lv_meter_add_scale_lines(meter, scale, lv_palette_main(LV_PALETTE_BLUE),␣
,→lv_palette_main(LV_PALETTE_BLUE),
false, 0);
lv_meter_set_indicator_start_value(meter, indic, 0);
lv_meter_set_indicator_end_value(meter, indic, 20);
/*Add a red arc to the end*/
indic = lv_meter_add_arc(meter, scale, 3, lv_palette_main(LV_PALETTE_RED), 0);
lv_meter_set_indicator_start_value(meter, indic, 80);
lv_meter_set_indicator_end_value(meter, indic, 100);
/*Make the tick lines red at the end of the scale*/
indic = lv_meter_add_scale_lines(meter, scale, lv_palette_main(LV_PALETTE_RED),␣
,→lv_palette_main(LV_PALETTE_RED), false,
0);
lv_meter_set_indicator_start_value(meter, indic, 80);
lv_meter_set_indicator_end_value(meter, indic, 100);
/*Add a needle line indicator*/
indic = lv_meter_add_needle_line(meter, scale, 4, lv_palette_main(LV_PALETTE_
,→GREY), -10);
/*Create an animation to set the value*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_var(&a, indic);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_time(&a, 2000);
lv_anim_set_repeat_delay(&a, 100);
lv_anim_set_playback_time(&a, 500);
lv_anim_set_playback_delay(&a, 100);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
2.7. Widgets 175


--- Page 180 ---


LVGLDocumentation8.3
#!//opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
import display_driver
def set_value(indic, v):
meter.set_indicator_value(indic, v)
#
# A simple meter
#
meter = lv.meter(lv.scr_act())
meter.center()
meter.set_size(200, 200)
# Add a scale first
scale = meter.add_scale()
meter.set_scale_ticks(scale, 51, 2, 10, lv.palette_main(lv.PALETTE.GREY))
meter.set_scale_major_ticks(scale, 10, 4, 15, lv.color_black(), 10)
indic = lv.meter_indicator_t()
# Add a blue arc to the start
indic = meter.add_arc(scale, 3, lv.palette_main(lv.PALETTE.BLUE), 0)
meter.set_indicator_start_value(indic, 0)
meter.set_indicator_end_value(indic, 20)
# Make the tick lines blue at the start of the scale
indic = meter.add_scale_lines(scale, lv.palette_main(lv.PALETTE.BLUE), lv.palette_
,→main(lv.PALETTE.BLUE), False, 0)
meter.set_indicator_start_value(indic, 0)
meter.set_indicator_end_value(indic, 20)
# Add a red arc to the end
indic = meter.add_arc(scale, 3, lv.palette_main(lv.PALETTE.RED), 0)
meter.set_indicator_start_value(indic, 80)
meter.set_indicator_end_value(indic, 100)
# Make the tick lines red at the end of the scale
indic = meter.add_scale_lines(scale, lv.palette_main(lv.PALETTE.RED), lv.palette_
,→main(lv.PALETTE.RED), False, 0)
meter.set_indicator_start_value(indic, 80)
meter.set_indicator_end_value(indic, 100)
# Add a needle line indicator
indic = meter.add_needle_line(scale, 4, lv.palette_main(lv.PALETTE.GREY), -10)
# Create an animation to set the value
a = lv.anim_t()
a.init()
a.set_var(indic)
a.set_values(0, 100)
a.set_time(2000)
a.set_repeat_delay(100)
a.set_playback_time(500)
a.set_playback_delay(100)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
(continuesonnextpage)
2.7. Widgets 176


--- Page 181 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a.set_custom_exec_cb(lambda a,val: set_value(indic,val))
lv.anim_t.start(a)
Ameterwithmultiplearcs
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
static lv_obj_t * meter;
static void set_value(void * indic, int32_t v)
{
lv_meter_set_indicator_end_value(meter, indic, v);
}
/**
* A meter with multiple arcs
*/
void lv_example_meter_2(void)
{
meter = lv_meter_create(lv_scr_act());
lv_obj_center(meter);
lv_obj_set_size(meter, 200, 200);
/*Remove the circle from the middle*/
lv_obj_remove_style(meter, NULL, LV_PART_INDICATOR);
/*Add a scale first*/
lv_meter_scale_t * scale = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale, 11, 2, 10, lv_palette_main(LV_PALETTE_
,→GREY));
lv_meter_set_scale_major_ticks(meter, scale, 1, 2, 30, lv_color_hex3(0xeee), 15);
lv_meter_set_scale_range(meter, scale, 0, 100, 270, 90);
/*Add a three arc indicator*/
lv_meter_indicator_t * indic1 = lv_meter_add_arc(meter, scale, 10, lv_palette_
,→main(LV_PALETTE_RED), 0);
lv_meter_indicator_t * indic2 = lv_meter_add_arc(meter, scale, 10, lv_palette_
,→main(LV_PALETTE_GREEN), -10);
lv_meter_indicator_t * indic3 = lv_meter_add_arc(meter, scale, 10, lv_palette_
,→main(LV_PALETTE_BLUE), -20);
/*Create an animation to set the value*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_repeat_delay(&a, 100);
lv_anim_set_playback_delay(&a, 100);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_time(&a, 2000);
lv_anim_set_playback_time(&a, 500);
lv_anim_set_var(&a, indic1);
(continuesonnextpage)
2.7. Widgets 177


--- Page 182 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_start(&a);
lv_anim_set_time(&a, 1000);
lv_anim_set_playback_time(&a, 1000);
lv_anim_set_var(&a, indic2);
lv_anim_start(&a);
lv_anim_set_time(&a, 1000);
lv_anim_set_playback_time(&a, 2000);
lv_anim_set_var(&a, indic3);
lv_anim_start(&a);
}
#endif
#!//opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
import display_driver
def set_value(indic,v):
meter.set_indicator_end_value(indic, v)
#
# A meter with multiple arcs
#
meter = lv.meter(lv.scr_act())
meter.center()
meter.set_size(200, 200)
# Remove the circle from the middle
meter.remove_style(None, lv.PART.INDICATOR)
# Add a scale first
scale = meter.add_scale()
meter.set_scale_ticks(scale, 11, 2, 10, lv.palette_main(lv.PALETTE.GREY))
meter.set_scale_major_ticks(scale, 1, 2, 30, lv.color_hex3(0xeee), 10)
meter.set_scale_range(scale, 0, 100, 270, 90)
# Add a three arc indicator
indic1 = meter.add_arc(scale, 10, lv.palette_main(lv.PALETTE.RED), 0)
indic2 = meter.add_arc(scale, 10, lv.palette_main(lv.PALETTE.GREEN), -10)
indic3 = meter.add_arc(scale, 10, lv.palette_main(lv.PALETTE.BLUE), -20)
# Create an animation to set the value
a1 = lv.anim_t()
a1.init()
a1.set_values(0, 100)
a1.set_time(2000)
a1.set_repeat_delay(100)
a1.set_playback_delay(100)
a1.set_playback_time(500)
a1.set_var(indic1)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a1.set_custom_exec_cb(lambda a,val: set_value(indic1,val))
(continuesonnextpage)
2.7. Widgets 178


--- Page 183 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_values(0, 100)
a2.set_time(1000)
a2.set_repeat_delay(100)
a2.set_playback_delay(100)
a2.set_playback_time(1000)
a2.set_var(indic2)
a2.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a2.set_custom_exec_cb(lambda a,val: set_value(indic2,val))
lv.anim_t.start(a2)
a3 = lv.anim_t()
a3.init()
a3.set_values(0, 100)
a3.set_time(1000)
a3.set_repeat_delay(100)
a3.set_playback_delay(100)
a3.set_playback_time(2000)
a3.set_var(indic3)
a3.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a3.set_custom_exec_cb(lambda a,val: set_value(indic3,val))
lv.anim_t.start(a3)
Aclockfromameter
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
static lv_obj_t * meter;
static void set_value(void * indic, int32_t v)
{
lv_meter_set_indicator_end_value(meter, indic, v);
}
/**
* A clock from a meter
*/
void lv_example_meter_3(void)
{
meter = lv_meter_create(lv_scr_act());
lv_obj_set_size(meter, 220, 220);
lv_obj_center(meter);
/*Create a scale for the minutes*/
/*61 ticks in a 360 degrees range (the last and the first line overlaps)*/
lv_meter_scale_t * scale_min = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale_min, 61, 1, 10, lv_palette_main(LV_PALETTE_
,→GREY));
(continuesonnextpage)
2.7. Widgets 179


--- Page 184 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_meter_set_scale_range(meter, scale_min, 0, 60, 360, 270);
/*Create another scale for the hours. It's only visual and contains only major␣
,→ticks*/
lv_meter_scale_t * scale_hour = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale_hour, 12, 0, 0, lv_palette_main(LV_PALETTE_
,→GREY)); /*12 ticks*/
lv_meter_set_scale_major_ticks(meter, scale_hour, 1, 2, 20, lv_color_black(), 10);
,→ /*Every tick is major*/
lv_meter_set_scale_range(meter, scale_hour, 1, 12, 330, 300); /*[1..12]␣
,→values in an almost full circle*/
LV_IMG_DECLARE(img_hand)
/*Add a the hands from images*/
lv_meter_indicator_t * indic_min = lv_meter_add_needle_img(meter, scale_min, &img_
,→hand, 5, 5);
lv_meter_indicator_t * indic_hour = lv_meter_add_needle_img(meter, scale_min, &
,→img_hand, 5, 5);
/*Create an animation to set the value*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_values(&a, 0, 60);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_time(&a, 2000); /*2 sec for 1 turn of the minute hand (1 hour)*/
lv_anim_set_var(&a, indic_min);
lv_anim_start(&a);
lv_anim_set_var(&a, indic_hour);
lv_anim_set_time(&a, 24000); /*24 sec for 1 turn of the hour hand*/
lv_anim_set_values(&a, 0, 60);
lv_anim_start(&a);
}
#endif
#!//opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
import display_driver
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_hand_min.png','rb') as f:
img_hand_min_data = f.read()
except:
print("Could not find img_hand_min.png")
sys.exit()
(continuesonnextpage)
2.7. Widgets 180


--- Page 185 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
img_hand_min_dsc = lv.img_dsc_t({
'data_size': len(img_hand_min_data),
'data': img_hand_min_data
})
# Create an image from the png file
try:
with open('../../assets/img_hand_hour.png','rb') as f:
img_hand_hour_data = f.read()
except:
print("Could not find img_hand_hour.png")
sys.exit()
img_hand_hour_dsc = lv.img_dsc_t({
'data_size': len(img_hand_hour_data),
'data': img_hand_hour_data
})
def set_value(indic, v):
meter.set_indicator_value(indic, v)
#
# A clock from a meter
#
meter = lv.meter(lv.scr_act())
meter.set_size(220, 220)
meter.center()
# Create a scale for the minutes
# 61 ticks in a 360 degrees range (the last and the first line overlaps)
scale_min = meter.add_scale()
meter.set_scale_ticks(scale_min, 61, 1, 10, lv.palette_main(lv.PALETTE.GREY))
meter.set_scale_range(scale_min, 0, 60, 360, 270)
# Create another scale for the hours. It's only visual and contains only major ticks
scale_hour = meter.add_scale()
meter.set_scale_ticks(scale_hour, 12, 0, 0, lv.palette_main(lv.PALETTE.GREY)) # 12␣
,→ticks
meter.set_scale_major_ticks(scale_hour, 1, 2, 20, lv.color_black(), 10) #␣
,→Every tick is major
meter.set_scale_range(scale_hour, 1, 12, 330, 300) # [1..
,→12] values in an almost full circle
# LV_IMG_DECLARE(img_hand)
# Add the hands from images
indic_min = meter.add_needle_img(scale_min, img_hand_min_dsc, 5, 5)
indic_hour = meter.add_needle_img(scale_min, img_hand_hour_dsc, 5, 5)
# Create an animation to set the value
a1 = lv.anim_t()
a1.init()
a1.set_values(0, 60)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a1.set_time(2000) # 2 sec for 1 turn of the minute hand (1 hour)
a1.set_var(indic_min)
(continuesonnextpage)
2.7. Widgets 181


--- Page 186 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a1.set_custom_exec_cb(lambda a1,val: set_value(indic_min,val))
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_var(indic_hour)
a2.set_time(24000) # 24 sec for 1 turn of the hour hand
a2.set_values(0, 60)
a2.set_custom_exec_cb(lambda a2,val: set_value(indic_hour,val))
lv.anim_t.start(a2)
Piechart
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
/**
* Create a pie chart
*/
void lv_example_meter_4(void)
{
lv_obj_t * meter = lv_meter_create(lv_scr_act());
/*Remove the background and the circle from the middle*/
lv_obj_remove_style(meter, NULL, LV_PART_MAIN);
lv_obj_remove_style(meter, NULL, LV_PART_INDICATOR);
lv_obj_set_size(meter, 200, 200);
lv_obj_center(meter);
/*Add a scale first with no ticks.*/
lv_meter_scale_t * scale = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale, 0, 0, 0, lv_color_black());
lv_meter_set_scale_range(meter, scale, 0, 100, 360, 0);
/*Add a three arc indicator*/
lv_coord_t indic_w = 100;
lv_meter_indicator_t * indic1 = lv_meter_add_arc(meter, scale, indic_w, lv_
,→palette_main(LV_PALETTE_ORANGE), 0);
lv_meter_set_indicator_start_value(meter, indic1, 0);
lv_meter_set_indicator_end_value(meter, indic1, 40);
lv_meter_indicator_t * indic2 = lv_meter_add_arc(meter, scale, indic_w, lv_
,→palette_main(LV_PALETTE_YELLOW), 0);
lv_meter_set_indicator_start_value(meter, indic2, 40); /*Start from the␣
,→previous*/
lv_meter_set_indicator_end_value(meter, indic2, 80);
lv_meter_indicator_t * indic3 = lv_meter_add_arc(meter, scale, indic_w, lv_
,→palette_main(LV_PALETTE_DEEP_ORANGE), 0);
lv_meter_set_indicator_start_value(meter, indic3, 80); /*Start from the␣
,→previous*/
lv_meter_set_indicator_end_value(meter, indic3, 100);
}
(continuesonnextpage)
2.7. Widgets 182


--- Page 187 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#endif
#
# Create a pie chart
#
meter = lv.meter(lv.scr_act())
# Remove the background and the circle from the middle
meter.remove_style(None, lv.PART.MAIN)
meter.remove_style(None, lv.PART.INDICATOR)
meter.set_size(200, 200)
meter.center()
# Add a scale first with no ticks.
scale = meter.add_scale()
meter.set_scale_ticks(scale, 0, 0, 0, lv.color_black())
meter.set_scale_range(scale, 0, 100, 360, 0)
# Add a three arc indicator*
indic_w = 100
indic1 = meter.add_arc(scale, indic_w,lv.palette_main(lv.PALETTE.ORANGE), 0)
meter.set_indicator_start_value(indic1, 0)
meter.set_indicator_end_value(indic1, 40)
indic2 = meter.add_arc(scale, indic_w, lv.palette_main(lv.PALETTE.YELLOW), 0)
meter.set_indicator_start_value(indic2, 40) # Start from the previous
meter.set_indicator_end_value(indic2, 80)
indic3 = meter.add_arc(scale, indic_w, lv.palette_main(lv.PALETTE.DEEP_ORANGE), 0)
meter.set_indicator_start_value(indic3, 80) # Start from the previous
meter.set_indicator_end_value(indic3, 100)
2.7.21 Message box
SimpleMessagebox
#include "../../lv_examples.h"
#if LV_USE_MSGBOX && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_current_target(e);
LV_LOG_USER("Button %s clicked", lv_msgbox_get_active_btn_text(obj));
}
void lv_example_msgbox_1(void)
{
static const char * btns[] = {"Apply", "Close", ""};
lv_obj_t * mbox1 = lv_msgbox_create(NULL, "Hello", "This is a message box with␣
,→two buttons.", btns, true); (continuesonnextpage)
2.7. Widgets 183


--- Page 188 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_add_event_cb(mbox1, event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_center(mbox1);
}
#endif
def event_cb(e):
mbox = e.get_current_target()
print("Button %s clicked" % mbox.get_active_btn_text())
btns = ["Apply", "Close", ""]
mbox1 = lv.msgbox(lv.scr_act(), "Hello", "This is a message box with two buttons.",␣
,→btns, True)
mbox1.add_event_cb(event_cb, lv.EVENT.VALUE_CHANGED, None)
mbox1.center()
2.7.22 Roller
SimpleRoller
#include "../../lv_examples.h"
#if LV_USE_ROLLER && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
char buf[32];
lv_roller_get_selected_str(obj, buf, sizeof(buf));
LV_LOG_USER("Selected month: %s\n", buf);
}
}
/**
* An infinite roller with the name of the months
*/
void lv_example_roller_1(void)
{
lv_obj_t * roller1 = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller1,
"January\n"
"February\n"
"March\n"
"April\n"
"May\n"
"June\n"
"July\n"
"August\n"
"September\n"
"October\n"
"November\n"
(continuesonnextpage)
2.7. Widgets 184


--- Page 189 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
"December",
LV_ROLLER_MODE_INFINITE);
lv_roller_set_visible_row_count(roller1, 4);
lv_obj_center(roller1);
lv_obj_add_event_cb(roller1, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
option = " "*10
obj.get_selected_str(option, len(option))
print("Selected month: " + option.strip())
#
# An infinite roller with the name of the months
#
roller1 = lv.roller(lv.scr_act())
roller1.set_options("\n".join([
"January",
"February",
"March",
"April",
"May",
"June",
"July",
"August",
"September",
"October",
"November",
"December"]),lv.roller.MODE.INFINITE)
roller1.set_visible_row_count(4)
roller1.center()
roller1.add_event_cb(event_handler, lv.EVENT.ALL, None)
Stylingtheroller
#include "../../lv_examples.h"
#if LV_USE_ROLLER && LV_FONT_MONTSERRAT_22 && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
char buf[32];
lv_roller_get_selected_str(obj, buf, sizeof(buf));
(continuesonnextpage)
2.7. Widgets 185


--- Page 190 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
LV_LOG_USER("Selected value: %s", buf);
}
}
/**
* Roller with various alignments and larger text in the selected area
*/
void lv_example_roller_2(void)
{
/*A style to make the selected option larger*/
static lv_style_t style_sel;
lv_style_init(&style_sel);
lv_style_set_text_font(&style_sel, &lv_font_montserrat_22);
const char * opts = "1\n2\n3\n4\n5\n6\n7\n8\n9\n10";
lv_obj_t * roller;
/*A roller on the left with left aligned text, and custom width*/
roller = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller, opts, LV_ROLLER_MODE_NORMAL);
lv_roller_set_visible_row_count(roller, 2);
lv_obj_set_width(roller, 100);
lv_obj_add_style(roller, &style_sel, LV_PART_SELECTED);
lv_obj_set_style_text_align(roller, LV_TEXT_ALIGN_LEFT, 0);
lv_obj_align(roller, LV_ALIGN_LEFT_MID, 10, 0);
lv_obj_add_event_cb(roller, event_handler, LV_EVENT_ALL, NULL);
lv_roller_set_selected(roller, 2, LV_ANIM_OFF);
/*A roller on the middle with center aligned text, and auto (default) width*/
roller = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller, opts, LV_ROLLER_MODE_NORMAL);
lv_roller_set_visible_row_count(roller, 3);
lv_obj_add_style(roller, &style_sel, LV_PART_SELECTED);
lv_obj_align(roller, LV_ALIGN_CENTER, 0, 0);
lv_obj_add_event_cb(roller, event_handler, LV_EVENT_ALL, NULL);
lv_roller_set_selected(roller, 5, LV_ANIM_OFF);
/*A roller on the right with right aligned text, and custom width*/
roller = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller, opts, LV_ROLLER_MODE_NORMAL);
lv_roller_set_visible_row_count(roller, 4);
lv_obj_set_width(roller, 80);
lv_obj_add_style(roller, &style_sel, LV_PART_SELECTED);
lv_obj_set_style_text_align(roller, LV_TEXT_ALIGN_RIGHT, 0);
lv_obj_align(roller, LV_ALIGN_RIGHT_MID, -10, 0);
lv_obj_add_event_cb(roller, event_handler, LV_EVENT_ALL, NULL);
lv_roller_set_selected(roller, 8, LV_ANIM_OFF);
}
#endif
import fs_driver
def event_handler(e):
code = e.get_code()
(continuesonnextpage)
2.7. Widgets 186


--- Page 191 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
option = " "*10
obj.get_selected_str(option, len(option))
print("Selected value: %s\n" + option.strip())
#
# Roller with various alignments and larger text in the selected area
#
# A style to make the selected option larger
style_sel = lv.style_t()
style_sel.init()
try:
style_sel.set_text_font(lv.font_montserrat_22)
except:
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
print("montserrat-22 not enabled in lv_conf.h, dynamically loading the font")
font_montserrat_22 = lv.font_load("S:" + "../../assets/font/montserrat-22.fnt")
style_sel.set_text_font(font_montserrat_22)
opts = "\n".join(["1","2","3","4","5","6","7","8","9","10"])
# A roller on the left with left aligned text, and custom width
roller = lv.roller(lv.scr_act())
roller.set_options(opts, lv.roller.MODE.NORMAL)
roller.set_visible_row_count(2)
roller.set_width(100)
roller.add_style(style_sel, lv.PART.SELECTED)
roller.set_style_text_align(lv.TEXT_ALIGN.LEFT, 0)
roller.align(lv.ALIGN.LEFT_MID, 10, 0)
roller.add_event_cb(event_handler, lv.EVENT.ALL, None)
roller.set_selected(2, lv.ANIM.OFF)
# A roller in the middle with center aligned text, and auto (default) width
roller = lv.roller(lv.scr_act())
roller.set_options(opts, lv.roller.MODE.NORMAL)
roller.set_visible_row_count(3)
roller.add_style(style_sel, lv.PART.SELECTED)
roller.align(lv.ALIGN.CENTER, 0, 0)
roller.add_event_cb(event_handler, lv.EVENT.ALL, None)
roller.set_selected(5, lv.ANIM.OFF)
# A roller on the right with right aligned text, and custom width
roller = lv.roller(lv.scr_act())
roller.set_options(opts, lv.roller.MODE.NORMAL)
roller.set_visible_row_count(4)
roller.set_width(80)
roller.add_style(style_sel, lv.PART.SELECTED)
roller.set_style_text_align(lv.TEXT_ALIGN.RIGHT, 0)
roller.align(lv.ALIGN.RIGHT_MID, -10, 0)
roller.add_event_cb(event_handler, lv.EVENT.ALL, None)
roller.set_selected(8, lv.ANIM.OFF)
2.7. Widgets 187


--- Page 192 ---


LVGLDocumentation8.3
addfademasktoroller
#include "../../lv_examples.h"
#if LV_USE_ROLLER && LV_DRAW_COMPLEX && LV_BUILD_EXAMPLES
static void mask_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
static int16_t mask_top_id = -1;
static int16_t mask_bottom_id = -1;
if(code == LV_EVENT_COVER_CHECK) {
lv_event_set_cover_res(e, LV_COVER_RES_MASKED);
}
else if(code == LV_EVENT_DRAW_MAIN_BEGIN) {
/* add mask */
const lv_font_t * font = lv_obj_get_style_text_font(obj, LV_PART_MAIN);
lv_coord_t line_space = lv_obj_get_style_text_line_space(obj, LV_PART_MAIN);
lv_coord_t font_h = lv_font_get_line_height(font);
lv_area_t roller_coords;
lv_obj_get_coords(obj, &roller_coords);
lv_area_t rect_area;
rect_area.x1 = roller_coords.x1;
rect_area.x2 = roller_coords.x2;
rect_area.y1 = roller_coords.y1;
rect_area.y2 = roller_coords.y1 + (lv_obj_get_height(obj) - font_h - line_
,→space) / 2;
lv_draw_mask_fade_param_t * fade_mask_top = lv_mem_buf_get(sizeof(lv_draw_
,→mask_fade_param_t));
lv_draw_mask_fade_init(fade_mask_top, &rect_area, LV_OPA_TRANSP, rect_area.y1,
,→ LV_OPA_COVER, rect_area.y2);
mask_top_id = lv_draw_mask_add(fade_mask_top, NULL);
rect_area.y1 = rect_area.y2 + font_h + line_space - 1;
rect_area.y2 = roller_coords.y2;
lv_draw_mask_fade_param_t * fade_mask_bottom = lv_mem_buf_get(sizeof(lv_draw_
,→mask_fade_param_t));
lv_draw_mask_fade_init(fade_mask_bottom, &rect_area, LV_OPA_COVER, rect_area.
,→y1, LV_OPA_TRANSP, rect_area.y2);
mask_bottom_id = lv_draw_mask_add(fade_mask_bottom, NULL);
}
else if(code == LV_EVENT_DRAW_POST_END) {
lv_draw_mask_fade_param_t * fade_mask_top = lv_draw_mask_remove_id(mask_top_
,→id);
lv_draw_mask_fade_param_t * fade_mask_bottom = lv_draw_mask_remove_id(mask_
,→bottom_id);
lv_draw_mask_free_param(fade_mask_top);
lv_draw_mask_free_param(fade_mask_bottom);
lv_mem_buf_release(fade_mask_top);
(continuesonnextpage)
2.7. Widgets 188


--- Page 193 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_mem_buf_release(fade_mask_bottom);
mask_top_id = -1;
mask_bottom_id = -1;
}
}
/**
* Add a fade mask to roller.
*/
void lv_example_roller_3(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_bg_color(&style, lv_color_black());
lv_style_set_text_color(&style, lv_color_white());
lv_style_set_border_width(&style, 0);
lv_style_set_pad_all(&style, 0);
lv_obj_add_style(lv_scr_act(), &style, 0);
lv_obj_t * roller1 = lv_roller_create(lv_scr_act());
lv_obj_add_style(roller1, &style, 0);
lv_obj_set_style_bg_opa(roller1, LV_OPA_TRANSP, LV_PART_SELECTED);
#if LV_FONT_MONTSERRAT_22
lv_obj_set_style_text_font(roller1, &lv_font_montserrat_22, LV_PART_SELECTED);
#endif
lv_roller_set_options(roller1,
"January\n"
"February\n"
"March\n"
"April\n"
"May\n"
"June\n"
"July\n"
"August\n"
"September\n"
"October\n"
"November\n"
"December",
LV_ROLLER_MODE_NORMAL);
lv_obj_center(roller1);
lv_roller_set_visible_row_count(roller1, 3);
lv_obj_add_event_cb(roller1, mask_event_cb, LV_EVENT_ALL, NULL);
}
#endif
import fs_driver
import sys
class Lv_Roller_3():
def __init__(self):
self.mask_top_id = -1
(continuesonnextpage)
2.7. Widgets 189


--- Page 194 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
self.mask_bottom_id = -1
#
# Add a fade mask to roller.
#
style = lv.style_t()
style.init()
style.set_bg_color(lv.color_black())
style.set_text_color(lv.color_white())
lv.scr_act().add_style(style, 0)
roller1 = lv.roller(lv.scr_act())
roller1.add_style(style, 0)
roller1.set_style_border_width(0, 0)
roller1.set_style_pad_all(0, 0)
roller1.set_style_bg_opa(lv.OPA.TRANSP, lv.PART.SELECTED)
#if LV_FONT_MONTSERRAT_22
# lv_obj_set_style_text_font(roller1, &lv_font_montserrat_22, LV_PART_
,→SELECTED);
#endif
try:
roller1.set_style_text_font(lv.font_montserrat_22,lv.PART.SELECTED)
except:
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
print("montserrat-22 not enabled in lv_conf.h, dynamically loading the␣
,→font")
font_montserrat_22 = lv.font_load("S:" + "../../assets/font/montserrat-22.
,→fnt")
roller1.set_style_text_font(font_montserrat_22,lv.PART.SELECTED)
roller1.set_options("\n".join([
"January",
"February",
"March",
"April",
"May",
"June",
"July",
"August",
"September",
"October",
"November",
"December"]),lv.roller.MODE.NORMAL)
roller1.center()
roller1.set_visible_row_count(3)
roller1.add_event_cb(self.mask_event_cb, lv.EVENT.ALL, None)
def mask_event_cb(self,e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.COVER_CHECK:
(continuesonnextpage)
2.7. Widgets 190


--- Page 195 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
e.set_cover_res(lv.COVER_RES.MASKED)
elif code == lv.EVENT.DRAW_MAIN_BEGIN:
# add mask
font = obj.get_style_text_font(lv.PART.MAIN)
line_space = obj.get_style_text_line_space(lv.PART.MAIN)
font_h = font.get_line_height()
roller_coords = lv.area_t()
obj.get_coords(roller_coords)
rect_area = lv.area_t()
rect_area.x1 = roller_coords.x1
rect_area.x2 = roller_coords.x2
rect_area.y1 = roller_coords.y1
rect_area.y2 = roller_coords.y1 + (obj.get_height() - font_h - line_
,→space) // 2
fade_mask_top = lv.draw_mask_fade_param_t()
fade_mask_top.init(rect_area, lv.OPA.TRANSP, rect_area.y1, lv.OPA.COVER,␣
,→rect_area.y2)
self.mask_top_id = lv.draw_mask_add(fade_mask_top,None)
rect_area.y1 = rect_area.y2 + font_h + line_space - 1
rect_area.y2 = roller_coords.y2
fade_mask_bottom = lv.draw_mask_fade_param_t()
fade_mask_bottom.init(rect_area, lv.OPA.COVER, rect_area.y1, lv.OPA.
,→TRANSP, rect_area.y2)
self.mask_bottom_id = lv.draw_mask_add(fade_mask_bottom, None)
elif code == lv.EVENT.DRAW_POST_END:
fade_mask_top = lv.draw_mask_remove_id(self.mask_top_id)
fade_mask_bottom = lv.draw_mask_remove_id(self.mask_bottom_id)
# Remove the masks
lv.draw_mask_remove_id(self.mask_top_id)
lv.draw_mask_remove_id(self.mask_bottom_id)
self.mask_top_id = -1
self.mask_bottom_id = -1
roller3 = Lv_Roller_3()
2.7.23 Slider
SimpleSlider
#include "../../lv_examples.h"
#if LV_USE_SLIDER && LV_BUILD_EXAMPLES
static void slider_event_cb(lv_event_t * e);
static lv_obj_t * slider_label;
/**
* A default slider with a label displaying the current value
(continuesonnextpage)
2.7. Widgets 191


--- Page 196 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
*/
void lv_example_slider_1(void)
{
/*Create a slider in the center of the display*/
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_center(slider);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
/*Create a label below the slider*/
slider_label = lv_label_create(lv_scr_act());
lv_label_set_text(slider_label, "0%");
lv_obj_align_to(slider_label, slider, LV_ALIGN_OUT_BOTTOM_MID, 0, 10);
}
static void slider_event_cb(lv_event_t * e)
{
lv_obj_t * slider = lv_event_get_target(e);
char buf[8];
lv_snprintf(buf, sizeof(buf), "%d%%", (int)lv_slider_get_value(slider));
lv_label_set_text(slider_label, buf);
lv_obj_align_to(slider_label, slider, LV_ALIGN_OUT_BOTTOM_MID, 0, 10);
}
#endif
#
# A default slider with a label displaying the current value
#
def slider_event_cb(e):
slider = e.get_target()
slider_label.set_text("{:d}%".format(slider.get_value()))
slider_label.align_to(slider, lv.ALIGN.OUT_BOTTOM_MID, 0, 10)
# Create a slider in the center of the display
slider = lv.slider(lv.scr_act())
slider.center()
slider.add_event_cb(slider_event_cb, lv.EVENT.VALUE_CHANGED, None)
# Create a label below the slider
slider_label = lv.label(lv.scr_act())
slider_label.set_text("0%")
slider_label.align_to(slider, lv.ALIGN.OUT_BOTTOM_MID, 0, 10)
2.7. Widgets 192


--- Page 197 ---


LVGLDocumentation8.3
Sliderwithcustomstyle
#include "../../lv_examples.h"
#if LV_USE_SLIDER && LV_BUILD_EXAMPLES
/**
* Show how to style a slider.
*/
void lv_example_slider_2(void)
{
/*Create a transition*/
static const lv_style_prop_t props[] = {LV_STYLE_BG_COLOR, 0};
static lv_style_transition_dsc_t transition_dsc;
lv_style_transition_dsc_init(&transition_dsc, props, lv_anim_path_linear, 300, 0,␣
,→NULL);
static lv_style_t style_main;
static lv_style_t style_indicator;
static lv_style_t style_knob;
static lv_style_t style_pressed_color;
lv_style_init(&style_main);
lv_style_set_bg_opa(&style_main, LV_OPA_COVER);
lv_style_set_bg_color(&style_main, lv_color_hex3(0xbbb));
lv_style_set_radius(&style_main, LV_RADIUS_CIRCLE);
lv_style_set_pad_ver(&style_main, -2); /*Makes the indicator larger*/
lv_style_init(&style_indicator);
lv_style_set_bg_opa(&style_indicator, LV_OPA_COVER);
lv_style_set_bg_color(&style_indicator, lv_palette_main(LV_PALETTE_CYAN));
lv_style_set_radius(&style_indicator, LV_RADIUS_CIRCLE);
lv_style_set_transition(&style_indicator, &transition_dsc);
lv_style_init(&style_knob);
lv_style_set_bg_opa(&style_knob, LV_OPA_COVER);
lv_style_set_bg_color(&style_knob, lv_palette_main(LV_PALETTE_CYAN));
lv_style_set_border_color(&style_knob, lv_palette_darken(LV_PALETTE_CYAN, 3));
lv_style_set_border_width(&style_knob, 2);
lv_style_set_radius(&style_knob, LV_RADIUS_CIRCLE);
lv_style_set_pad_all(&style_knob, 6); /*Makes the knob larger*/
lv_style_set_transition(&style_knob, &transition_dsc);
lv_style_init(&style_pressed_color);
lv_style_set_bg_color(&style_pressed_color, lv_palette_darken(LV_PALETTE_CYAN,␣
,→2));
/*Create a slider and add the style*/
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_remove_style_all(slider); /*Remove the styles coming from the␣
,→theme*/
lv_obj_add_style(slider, &style_main, LV_PART_MAIN);
lv_obj_add_style(slider, &style_indicator, LV_PART_INDICATOR);
lv_obj_add_style(slider, &style_pressed_color, LV_PART_INDICATOR | LV_STATE_
,→PRESSED);
lv_obj_add_style(slider, &style_knob, LV_PART_KNOB);
lv_obj_add_style(slider, &style_pressed_color, LV_PART_KNOB | LV_STATE_PRESSED);
(continuesonnextpage)
2.7. Widgets 193


--- Page 198 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_center(slider);
}
#endif
#
# Show how to style a slider.
#
# Create a transition
props = [lv.STYLE.BG_COLOR, 0]
transition_dsc = lv.style_transition_dsc_t()
transition_dsc.init(props, lv.anim_t.path_linear, 300, 0, None)
style_main = lv.style_t()
style_indicator = lv.style_t()
style_knob = lv.style_t()
style_pressed_color = lv.style_t()
style_main.init()
style_main.set_bg_opa(lv.OPA.COVER)
style_main.set_bg_color(lv.color_hex3(0xbbb))
style_main.set_radius(lv.RADIUS.CIRCLE)
style_main.set_pad_ver(-2) # Makes the indicator larger
style_indicator.init()
style_indicator.set_bg_opa(lv.OPA.COVER)
style_indicator.set_bg_color(lv.palette_main(lv.PALETTE.CYAN))
style_indicator.set_radius(lv.RADIUS.CIRCLE)
style_indicator.set_transition(transition_dsc)
style_knob.init()
style_knob.set_bg_opa(lv.OPA.COVER)
style_knob.set_bg_color(lv.palette_main(lv.PALETTE.CYAN))
style_knob.set_border_color(lv.palette_darken(lv.PALETTE.CYAN, 3))
style_knob.set_border_width(2)
style_knob.set_radius(lv.RADIUS.CIRCLE)
style_knob.set_pad_all(6) # Makes the knob larger
style_knob.set_transition(transition_dsc)
style_pressed_color.init()
style_pressed_color.set_bg_color(lv.palette_darken(lv.PALETTE.CYAN, 2))
# Create a slider and add the style
slider = lv.slider(lv.scr_act())
slider.remove_style_all() # Remove the styles coming from the theme
slider.add_style(style_main, lv.PART.MAIN)
slider.add_style(style_indicator, lv.PART.INDICATOR)
slider.add_style(style_pressed_color, lv.PART.INDICATOR | lv.STATE.PRESSED)
slider.add_style(style_knob, lv.PART.KNOB)
slider.add_style(style_pressed_color, lv.PART.KNOB | lv.STATE.PRESSED)
slider.center()
2.7. Widgets 194


--- Page 199 ---


LVGLDocumentation8.3
Sliderwithextendeddrawer
#include "../../lv_examples.h"
#if LV_USE_SLIDER && LV_BUILD_EXAMPLES
static void slider_event_cb(lv_event_t * e);
/**
* Show the current value when the slider is pressed by extending the drawer
*
*/
void lv_example_slider_3(void)
{
/*Create a slider in the center of the display*/
lv_obj_t * slider;
slider = lv_slider_create(lv_scr_act());
lv_obj_center(slider);
lv_slider_set_mode(slider, LV_SLIDER_MODE_RANGE);
lv_slider_set_value(slider, 70, LV_ANIM_OFF);
lv_slider_set_left_value(slider, 20, LV_ANIM_OFF);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_ALL, NULL);
lv_obj_refresh_ext_draw_size(slider);
}
static void slider_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
/*Provide some extra space for the value*/
if(code == LV_EVENT_REFR_EXT_DRAW_SIZE) {
lv_event_set_ext_draw_size(e, 50);
}
else if(code == LV_EVENT_DRAW_PART_END) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_INDICATOR) {
char buf[16];
lv_snprintf(buf, sizeof(buf), "%d - %d", (int)lv_slider_get_left_
,→value(obj), (int)lv_slider_get_value(obj));
lv_point_t label_size;
lv_txt_get_size(&label_size, buf, LV_FONT_DEFAULT, 0, 0, LV_COORD_MAX, 0);
lv_area_t label_area;
label_area.x1 = dsc->draw_area->x1 + lv_area_get_width(dsc->draw_area) /␣
,→2 - label_size.x / 2;
label_area.x2 = label_area.x1 + label_size.x;
label_area.y2 = dsc->draw_area->y1 - 10;
label_area.y1 = label_area.y2 - label_size.y;
lv_draw_label_dsc_t label_draw_dsc;
lv_draw_label_dsc_init(&label_draw_dsc);
label_draw_dsc.color = lv_color_hex3(0x888);
lv_draw_label(dsc->draw_ctx, &label_draw_dsc, &label_area, buf, NULL);
}
}
(continuesonnextpage)
2.7. Widgets 195


--- Page 200 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
def slider_event_cb(e):
code = e.get_code()
obj = e.get_target()
# Provide some extra space for the value
if code == lv.EVENT.REFR_EXT_DRAW_SIZE:
e.set_ext_draw_size(50)
elif code == lv.EVENT.DRAW_PART_END:
# print("DRAW_PART_END")
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# print(dsc)
if dsc.part == lv.PART.INDICATOR:
label_text = "{:d} - {:d}".format(obj.get_left_value(),slider.get_value())
label_size = lv.point_t()
lv.txt_get_size(label_size, label_text, lv.font_default(), 0, 0, lv.COORD.
,→MAX, 0)
# print(label_size.x,label_size.y)
label_area = lv.area_t()
label_area.x1 = dsc.draw_area.x1 + dsc.draw_area.get_width() // 2 - label_
,→size.x // 2
label_area.x2 = label_area.x1 + label_size.x
label_area.y2 = dsc.draw_area.y1 - 10
label_area.y1 = label_area.y2 - label_size.y
label_draw_dsc = lv.draw_label_dsc_t()
label_draw_dsc.init()
dsc.draw_ctx.label(label_draw_dsc, label_area, label_text, None)
#
# Show the current value when the slider if pressed by extending the drawer
#
#
#Create a slider in the center of the display
slider = lv.slider(lv.scr_act())
slider.center()
slider.set_mode(lv.slider.MODE.RANGE)
slider.set_value(70, lv.ANIM.OFF)
slider.set_left_value(20, lv.ANIM.OFF)
slider.add_event_cb(slider_event_cb, lv.EVENT.ALL, None)
slider.refresh_ext_draw_size()
2.7. Widgets 196


--- Page 201 ---


LVGLDocumentation8.3
2.7.24 Span
Spanwithcustomstyles
#include "../../lv_examples.h"
#if LV_USE_SPAN && LV_BUILD_EXAMPLES
/**
* Create span.
*/
void lv_example_span_1(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_border_width(&style, 1);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_ORANGE));
lv_style_set_pad_all(&style, 2);
lv_obj_t * spans = lv_spangroup_create(lv_scr_act());
lv_obj_set_width(spans, 300);
lv_obj_set_height(spans, 300);
lv_obj_center(spans);
lv_obj_add_style(spans, &style, 0);
lv_spangroup_set_align(spans, LV_TEXT_ALIGN_LEFT);
lv_spangroup_set_overflow(spans, LV_SPAN_OVERFLOW_CLIP);
lv_spangroup_set_indent(spans, 20);
lv_spangroup_set_mode(spans, LV_SPAN_MODE_BREAK);
lv_span_t * span = lv_spangroup_new_span(spans);
lv_span_set_text(span, "China is a beautiful country.");
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_RED));
lv_style_set_text_decor(&span->style, LV_TEXT_DECOR_UNDERLINE);
lv_style_set_text_opa(&span->style, LV_OPA_50);
span = lv_spangroup_new_span(spans);
lv_span_set_text_static(span, "good good study, day day up.");
#if LV_FONT_MONTSERRAT_24
lv_style_set_text_font(&span->style, &lv_font_montserrat_24);
#endif
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_GREEN));
span = lv_spangroup_new_span(spans);
lv_span_set_text_static(span, "LVGL is an open-source graphics library.");
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_BLUE));
span = lv_spangroup_new_span(spans);
lv_span_set_text_static(span, "the boy no name.");
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_GREEN));
#if LV_FONT_MONTSERRAT_20
lv_style_set_text_font(&span->style, &lv_font_montserrat_20);
#endif
lv_style_set_text_decor(&span->style, LV_TEXT_DECOR_UNDERLINE);
span = lv_spangroup_new_span(spans);
lv_span_set_text(span, "I have a dream that hope to come true.");
lv_style_set_text_decor(&span->style, LV_TEXT_DECOR_STRIKETHROUGH);
(continuesonnextpage)
2.7. Widgets 197


--- Page 202 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_spangroup_refr_mode(spans);
}
#endif
#
# Create span
#
style = lv.style_t()
style.init()
style.set_border_width(1)
style.set_border_color(lv.palette_main(lv.PALETTE.ORANGE))
style.set_pad_all(2)
spans = lv.spangroup(lv.scr_act())
spans.set_width(300)
spans.set_height(300)
spans.center()
spans.add_style(style, 0)
spans.set_align(lv.TEXT_ALIGN.LEFT)
spans.set_overflow(lv.SPAN_OVERFLOW.CLIP)
spans.set_indent(20)
spans.set_mode(lv.SPAN_MODE.BREAK)
span = spans.new_span()
span.set_text("china is a beautiful country.")
span.style.set_text_color(lv.palette_main(lv.PALETTE.RED))
span.style.set_text_decor(lv.TEXT_DECOR.STRIKETHROUGH | lv.TEXT_DECOR.UNDERLINE)
span.style.set_text_opa(lv.OPA._30)
span = spans.new_span()
span.set_text_static("good good study, day day up.")
#if LV_FONT_MONTSERRAT_24
# lv_style_set_text_font(&span->style, &lv_font_montserrat_24);
#endif
span.style.set_text_color(lv.palette_main(lv.PALETTE.GREEN))
span = spans.new_span()
span.set_text_static("LVGL is an open-source graphics library.")
span.style.set_text_color(lv.palette_main(lv.PALETTE.BLUE))
span = spans.new_span()
span.set_text_static("the boy no name.")
span.style.set_text_color(lv.palette_main(lv.PALETTE.GREEN))
#if LV_FONT_MONTSERRAT_20
# lv_style_set_text_font(&span->style, &lv_font_montserrat_20);
#endif
span.style.set_text_decor(lv.TEXT_DECOR.UNDERLINE)
span = spans.new_span()
span.set_text("I have a dream that hope to come true.")
spans.refr_mode()
(continuesonnextpage)
2.7. Widgets 198


--- Page 203 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# lv_span_del(spans, span);
# lv_obj_del(spans);
2.7.25 Spinbox
SimpleSpinbox
#include "../../lv_examples.h"
#if LV_USE_SPINBOX && LV_BUILD_EXAMPLES
static lv_obj_t * spinbox;
static void lv_spinbox_increment_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_SHORT_CLICKED || code == LV_EVENT_LONG_PRESSED_REPEAT) {
lv_spinbox_increment(spinbox);
}
}
static void lv_spinbox_decrement_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_SHORT_CLICKED || code == LV_EVENT_LONG_PRESSED_REPEAT) {
lv_spinbox_decrement(spinbox);
}
}
void lv_example_spinbox_1(void)
{
spinbox = lv_spinbox_create(lv_scr_act());
lv_spinbox_set_range(spinbox, -1000, 25000);
lv_spinbox_set_digit_format(spinbox, 5, 2);
lv_spinbox_step_prev(spinbox);
lv_obj_set_width(spinbox, 100);
lv_obj_center(spinbox);
lv_coord_t h = lv_obj_get_height(spinbox);
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, h, h);
lv_obj_align_to(btn, spinbox, LV_ALIGN_OUT_RIGHT_MID, 5, 0);
lv_obj_set_style_bg_img_src(btn, LV_SYMBOL_PLUS, 0);
lv_obj_add_event_cb(btn, lv_spinbox_increment_event_cb, LV_EVENT_ALL, NULL);
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, h, h);
lv_obj_align_to(btn, spinbox, LV_ALIGN_OUT_LEFT_MID, -5, 0);
lv_obj_set_style_bg_img_src(btn, LV_SYMBOL_MINUS, 0);
lv_obj_add_event_cb(btn, lv_spinbox_decrement_event_cb, LV_EVENT_ALL, NULL);
}
#endif
2.7. Widgets 199


--- Page 204 ---


LVGLDocumentation8.3
def increment_event_cb(e):
code = e.get_code()
if code == lv.EVENT.SHORT_CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
spinbox.increment()
def decrement_event_cb(e):
code = e.get_code()
if code == lv.EVENT.SHORT_CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
spinbox.decrement()
spinbox = lv.spinbox(lv.scr_act())
spinbox.set_range(-1000, 25000)
spinbox.set_digit_format(5, 2)
spinbox.step_prev()
spinbox.set_width(100)
spinbox.center()
h = spinbox.get_height()
btn = lv.btn(lv.scr_act())
btn.set_size(h, h)
btn.align_to(spinbox, lv.ALIGN.OUT_RIGHT_MID, 5, 0)
btn.set_style_bg_img_src(lv.SYMBOL.PLUS, 0)
btn.add_event_cb(increment_event_cb, lv.EVENT.ALL, None)
btn = lv.btn(lv.scr_act())
btn.set_size(h, h)
btn.align_to(spinbox, lv.ALIGN.OUT_LEFT_MID, -5, 0)
btn.set_style_bg_img_src(lv.SYMBOL.MINUS, 0)
btn.add_event_cb(decrement_event_cb, lv.EVENT.ALL, None)
2.7.26 Spinner
Simplespinner
#include "../../lv_examples.h"
#if LV_USE_SPINNER && LV_BUILD_EXAMPLES
void lv_example_spinner_1(void)
{
/*Create a spinner*/
lv_obj_t * spinner = lv_spinner_create(lv_scr_act(), 1000, 60);
lv_obj_set_size(spinner, 100, 100);
lv_obj_center(spinner);
}
#endif
# Create a spinner
spinner = lv.spinner(lv.scr_act(), 1000, 60)
spinner.set_size(100, 100)
spinner.center()
2.7. Widgets 200


--- Page 205 ---


LVGLDocumentation8.3
2.7.27 Switch
SimpleSwitch
#include "../../lv_examples.h"
#if LV_USE_SWITCH && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
LV_LOG_USER("State: %s\n", lv_obj_has_state(obj, LV_STATE_CHECKED) ? "On" :
,→"Off");
}
}
void lv_example_switch_1(void)
{
lv_obj_set_flex_flow(lv_scr_act(), LV_FLEX_FLOW_COLUMN);
lv_obj_set_flex_align(lv_scr_act(), LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_CENTER,␣
,→LV_FLEX_ALIGN_CENTER);
lv_obj_t * sw;
sw = lv_switch_create(lv_scr_act());
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
sw = lv_switch_create(lv_scr_act());
lv_obj_add_state(sw, LV_STATE_CHECKED);
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
sw = lv_switch_create(lv_scr_act());
lv_obj_add_state(sw, LV_STATE_DISABLED);
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
sw = lv_switch_create(lv_scr_act());
lv_obj_add_state(sw, LV_STATE_CHECKED | LV_STATE_DISABLED);
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
if obj.has_state(lv.STATE.CHECKED):
print("State: on")
else:
print("State: off")
lv.scr_act().set_flex_flow(lv.FLEX_FLOW.COLUMN)
lv.scr_act().set_flex_align(lv.FLEX_ALIGN.CENTER, lv.FLEX_ALIGN.CENTER, lv.FLEX_ALIGN.
,→CENTER)
(continuesonnextpage)
2.7. Widgets 201


--- Page 206 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
sw = lv.switch(lv.scr_act())
sw.add_event_cb(event_handler,lv.EVENT.ALL, None)
sw = lv.switch(lv.scr_act())
sw.add_state(lv.STATE.CHECKED)
sw.add_event_cb(event_handler, lv.EVENT.ALL, None)
sw = lv.switch(lv.scr_act())
sw.add_state(lv.STATE.DISABLED)
sw.add_event_cb(event_handler, lv.EVENT.ALL, None)
sw = lv.switch(lv.scr_act())
sw.add_state(lv.STATE.CHECKED | lv.STATE.DISABLED)
sw.add_event_cb(event_handler, lv.EVENT.ALL, None)
2.7.28 Table
Simpletable
#include "../../lv_examples.h"
#if LV_USE_TABLE && LV_BUILD_EXAMPLES
static void draw_part_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*If the cells are drawn...*/
if(dsc->part == LV_PART_ITEMS) {
uint32_t row = dsc->id / lv_table_get_col_cnt(obj);
uint32_t col = dsc->id - row * lv_table_get_col_cnt(obj);
/*Make the texts in the first cell center aligned*/
if(row == 0) {
dsc->label_dsc->align = LV_TEXT_ALIGN_CENTER;
dsc->rect_dsc->bg_color = lv_color_mix(lv_palette_main(LV_PALETTE_BLUE),␣
,→dsc->rect_dsc->bg_color, LV_OPA_20);
dsc->rect_dsc->bg_opa = LV_OPA_COVER;
}
/*In the first column align the texts to the right*/
else if(col == 0) {
dsc->label_dsc->align = LV_TEXT_ALIGN_RIGHT;
}
/*MAke every 2nd row grayish*/
if((row != 0 && row % 2) == 0) {
dsc->rect_dsc->bg_color = lv_color_mix(lv_palette_main(LV_PALETTE_GREY),␣
,→dsc->rect_dsc->bg_color, LV_OPA_10);
dsc->rect_dsc->bg_opa = LV_OPA_COVER;
}
}
}
void lv_example_table_1(void)
(continuesonnextpage)
2.7. Widgets 202


--- Page 207 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
lv_obj_t * table = lv_table_create(lv_scr_act());
/*Fill the first column*/
lv_table_set_cell_value(table, 0, 0, "Name");
lv_table_set_cell_value(table, 1, 0, "Apple");
lv_table_set_cell_value(table, 2, 0, "Banana");
lv_table_set_cell_value(table, 3, 0, "Lemon");
lv_table_set_cell_value(table, 4, 0, "Grape");
lv_table_set_cell_value(table, 5, 0, "Melon");
lv_table_set_cell_value(table, 6, 0, "Peach");
lv_table_set_cell_value(table, 7, 0, "Nuts");
/*Fill the second column*/
lv_table_set_cell_value(table, 0, 1, "Price");
lv_table_set_cell_value(table, 1, 1, "$7");
lv_table_set_cell_value(table, 2, 1, "$4");
lv_table_set_cell_value(table, 3, 1, "$6");
lv_table_set_cell_value(table, 4, 1, "$2");
lv_table_set_cell_value(table, 5, 1, "$5");
lv_table_set_cell_value(table, 6, 1, "$1");
lv_table_set_cell_value(table, 7, 1, "$9");
/*Set a smaller height to the table. It'll make it scrollable*/
lv_obj_set_height(table, 200);
lv_obj_center(table);
/*Add an event callback to to apply some custom drawing*/
lv_obj_add_event_cb(table, draw_part_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
}
#endif
def draw_part_event_cb(e):
obj = e.get_target()
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# If the cells are drawn../
if dsc.part == lv.PART.ITEMS:
row = dsc.id // obj.get_col_cnt()
col = dsc.id - row * obj.get_col_cnt()
# Make the texts in the first cell center aligned
if row == 0:
dsc.label_dsc.align = lv.TEXT_ALIGN.CENTER
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.BLUE).color_mix(dsc.
,→rect_dsc.bg_color, lv.OPA._20)
dsc.rect_dsc.bg_opa = lv.OPA.COVER
# In the first column align the texts to the right
elif col == 0:
dsc.label_dsc.flag = lv.TEXT_ALIGN.RIGHT
# Make every 2nd row grayish
if row != 0 and (row % 2) == 0:
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.GREY).color_mix(dsc.
,→rect_dsc.bg_color, lv.OPA._10)
(continuesonnextpage)
2.7. Widgets 203


--- Page 208 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
dsc.rect_dsc.bg_opa = lv.OPA.COVER
table = lv.table(lv.scr_act())
# Fill the first column
table.set_cell_value(0, 0, "Name")
table.set_cell_value(1, 0, "Apple")
table.set_cell_value(2, 0, "Banana")
table.set_cell_value(3, 0, "Lemon")
table.set_cell_value(4, 0, "Grape")
table.set_cell_value(5, 0, "Melon")
table.set_cell_value(6, 0, "Peach")
table.set_cell_value(7, 0, "Nuts")
# Fill the second column
table.set_cell_value(0, 1, "Price")
table.set_cell_value(1, 1, "$7")
table.set_cell_value(2, 1, "$4")
table.set_cell_value(3, 1, "$6")
table.set_cell_value(4, 1, "$2")
table.set_cell_value(5, 1, "$5")
table.set_cell_value(6, 1, "$1")
table.set_cell_value(7, 1, "$9")
# Set a smaller height to the table. It'll make it scrollable
table.set_height(200)
table.center()
# Add an event callback to apply some custom drawing
table.add_event_cb(draw_part_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
Lightweightedlistfromtable
#include "../../lv_examples.h"
#if LV_USE_TABLE && LV_BUILD_EXAMPLES
#define ITEM_CNT 200
static void draw_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*If the cells are drawn...*/
if(dsc->part == LV_PART_ITEMS) {
bool chk = lv_table_has_cell_ctrl(obj, dsc->id, 0, LV_TABLE_CELL_CTRL_CUSTOM_
,→1);
lv_draw_rect_dsc_t rect_dsc;
lv_draw_rect_dsc_init(&rect_dsc);
rect_dsc.bg_color = chk ? lv_theme_get_color_primary(obj) : lv_palette_
,→lighten(LV_PALETTE_GREY, 2);
rect_dsc.radius = LV_RADIUS_CIRCLE;
(continuesonnextpage)
2.7. Widgets 204


--- Page 209 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_area_t sw_area;
sw_area.x1 = dsc->draw_area->x2 - 50;
sw_area.x2 = sw_area.x1 + 40;
sw_area.y1 = dsc->draw_area->y1 + lv_area_get_height(dsc->draw_area) / 2 - 10;
sw_area.y2 = sw_area.y1 + 20;
lv_draw_rect(dsc->draw_ctx, &rect_dsc, &sw_area);
rect_dsc.bg_color = lv_color_white();
if(chk) {
sw_area.x2 -= 2;
sw_area.x1 = sw_area.x2 - 16;
}
else {
sw_area.x1 += 2;
sw_area.x2 = sw_area.x1 + 16;
}
sw_area.y1 += 2;
sw_area.y2 -= 2;
lv_draw_rect(dsc->draw_ctx, &rect_dsc, &sw_area);
}
}
static void change_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
uint16_t col;
uint16_t row;
lv_table_get_selected_cell(obj, &row, &col);
bool chk = lv_table_has_cell_ctrl(obj, row, 0, LV_TABLE_CELL_CTRL_CUSTOM_1);
if(chk) lv_table_clear_cell_ctrl(obj, row, 0, LV_TABLE_CELL_CTRL_CUSTOM_1);
else lv_table_add_cell_ctrl(obj, row, 0, LV_TABLE_CELL_CTRL_CUSTOM_1);
}
/**
* A very light-weighted list created from table
*/
void lv_example_table_2(void)
{
/*Measure memory usage*/
lv_mem_monitor_t mon1;
lv_mem_monitor(&mon1);
uint32_t t = lv_tick_get();
lv_obj_t * table = lv_table_create(lv_scr_act());
/*Set a smaller height to the table. It'll make it scrollable*/
lv_obj_set_size(table, LV_SIZE_CONTENT, 200);
lv_table_set_col_width(table, 0, 150);
lv_table_set_row_cnt(table, ITEM_CNT); /*Not required but avoids a lot of memory␣
,→reallocation lv_table_set_set_value*/
lv_table_set_col_cnt(table, 1);
/*Don't make the cell pressed, we will draw something different in the event*/
lv_obj_remove_style(table, NULL, LV_PART_ITEMS | LV_STATE_PRESSED);
(continuesonnextpage)
2.7. Widgets 205


--- Page 210 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
uint32_t i;
for(i = 0; i < ITEM_CNT; i++) {
lv_table_set_cell_value_fmt(table, i, 0, "Item %"LV_PRIu32, i + 1);
}
lv_obj_align(table, LV_ALIGN_CENTER, 0, -20);
/*Add an event callback to to apply some custom drawing*/
lv_obj_add_event_cb(table, draw_event_cb, LV_EVENT_DRAW_PART_END, NULL);
lv_obj_add_event_cb(table, change_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_mem_monitor_t mon2;
lv_mem_monitor(&mon2);
uint32_t mem_used = mon1.free_size - mon2.free_size;
uint32_t elaps = lv_tick_elaps(t);
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text_fmt(label, "%"LV_PRIu32" items were created in %"LV_PRIu32" ms\n
,→"
"using %"LV_PRIu32" bytes of memory",
ITEM_CNT, elaps, mem_used);
lv_obj_align(label, LV_ALIGN_BOTTOM_MID, 0, -10);
}
#endif
from utime import ticks_ms
import gc
ITEM_CNT = 200
def draw_event_cb(e):
obj = e.get_target()
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# If the cells are drawn...
if dsc.part == lv.PART.ITEMS:
chk = obj.has_cell_ctrl(dsc.id, 0, lv.table.CELL_CTRL.CUSTOM_1)
rect_dsc = lv.draw_rect_dsc_t()
rect_dsc.init()
if chk:
rect_dsc.bg_color = lv.theme_get_color_primary(obj)
else:
rect_dsc.bg_color = lv.palette_lighten(lv.PALETTE.GREY, 2)
rect_dsc.radius = lv.RADIUS.CIRCLE
sw_area = lv.area_t()
sw_area.x1 = dsc.draw_area.x2 - 50
sw_area.x2 = sw_area.x1 + 40
sw_area.y1 = dsc.draw_area.y1 + dsc.draw_area.get_height() // 2 - 10
(continuesonnextpage)
2.7. Widgets 206


--- Page 211 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
sw_area.y2 = sw_area.y1 + 20
dsc.draw_ctx.rect(rect_dsc, sw_area)
rect_dsc.bg_color = lv.color_white()
if chk:
sw_area.x2 -= 2
sw_area.x1 = sw_area.x2 - 16
else:
sw_area.x1 += 2
sw_area.x2 = sw_area.x1 + 16
sw_area.y1 += 2
sw_area.y2 -= 2
dsc.draw_ctx.rect(rect_dsc, sw_area)
def change_event_cb(e):
obj = e.get_target()
row = lv.C_Pointer()
col = lv.C_Pointer()
table.get_selected_cell(row, col)
# print("row: ",row.uint_val)
chk = table.has_cell_ctrl(row.uint_val, 0, lv.table.CELL_CTRL.CUSTOM_1)
if chk:
table.clear_cell_ctrl(row.uint_val, 0, lv.table.CELL_CTRL.CUSTOM_1)
else:
table.add_cell_ctrl(row.uint_val, 0, lv.table.CELL_CTRL.CUSTOM_1)
#
# A very light-weighted list created from table
#
# Measure memory usage
gc.enable()
gc.collect()
mem_free = gc.mem_free()
print("mem_free: ", mem_free)
t = ticks_ms()
print("ticks: ", t)
table = lv.table(lv.scr_act())
# Set a smaller height to the table. It'll make it scrollable
table.set_size(150, 200)
table.set_col_width(0, 150)
table.set_row_cnt(ITEM_CNT) # Not required but avoids a lot of memory reallocation␣
,→lv_table_set_set_value
table.set_col_cnt(1)
# Don't make the cell pressed, we will draw something different in the event
table.remove_style(None, lv.PART.ITEMS | lv.STATE.PRESSED)
for i in range(ITEM_CNT):
table.set_cell_value(i, 0, "Item " + str(i+1))
table.align(lv.ALIGN.CENTER, 0, -20)
(continuesonnextpage)
2.7. Widgets 207


--- Page 212 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Add an event callback to apply some custom drawing
table.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_END, None)
table.add_event_cb(change_event_cb, lv.EVENT.VALUE_CHANGED, None)
gc.collect()
mem_used = mem_free - gc.mem_free()
elaps = ticks_ms()-t
label = lv.label(lv.scr_act())
label.set_text(str(ITEM_CNT) + " items were created in " + str(elaps) + " ms\n using
,→" + str(mem_used) + " bytes of memory")
#label.set_text(str(ITEM_CNT) + " items were created in " + str(elaps) + " ms")
label.align(lv.ALIGN.BOTTOM_MID, 0, -10)
2.7.29 Tabview
SimpleTabview
#include "../../lv_examples.h"
#if LV_USE_TABVIEW && LV_BUILD_EXAMPLES
void lv_example_tabview_1(void)
{
/*Create a Tab view object*/
lv_obj_t * tabview;
tabview = lv_tabview_create(lv_scr_act(), LV_DIR_TOP, 50);
/*Add 3 tabs (the tabs are page (lv_page) and can be scrolled*/
lv_obj_t * tab1 = lv_tabview_add_tab(tabview, "Tab 1");
lv_obj_t * tab2 = lv_tabview_add_tab(tabview, "Tab 2");
lv_obj_t * tab3 = lv_tabview_add_tab(tabview, "Tab 3");
/*Add content to the tabs*/
lv_obj_t * label = lv_label_create(tab1);
lv_label_set_text(label, "This the first tab\n\n"
"If the content\n"
"of a tab\n"
"becomes too\n"
"longer\n"
"than the\n"
"container\n"
"then it\n"
"automatically\n"
"becomes\n"
"scrollable.\n"
"\n"
"\n"
"\n"
"Can you see it?");
label = lv_label_create(tab2);
lv_label_set_text(label, "Second tab");
(continuesonnextpage)
2.7. Widgets 208


--- Page 213 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv_label_create(tab3);
lv_label_set_text(label, "Third tab");
lv_obj_scroll_to_view_recursive(label, LV_ANIM_ON);
}
#endif
# Create a Tab view object
tabview = lv.tabview(lv.scr_act(), lv.DIR.TOP, 50)
# Add 3 tabs (the tabs are page (lv_page) and can be scrolled
tab1 = tabview.add_tab("Tab 1")
tab2 = tabview.add_tab("Tab 2")
tab3 = tabview.add_tab("Tab 3")
# Add content to the tabs
label = lv.label(tab1)
label.set_text("""This the first tab
If the content
of a tab
becomes too
longer
than the
container
then it
automatically
becomes
scrollable.
Can you see it?""")
label = lv.label(tab2)
label.set_text("Second tab")
label = lv.label(tab3)
label.set_text("Third tab");
label.scroll_to_view_recursive(lv.ANIM.ON)
Tabsontheleft,stylingandnoscrolling
#include "../../lv_examples.h"
#if LV_USE_TABVIEW && LV_BUILD_EXAMPLES
void lv_example_tabview_2(void)
{
/*Create a Tab view object*/
lv_obj_t * tabview;
tabview = lv_tabview_create(lv_scr_act(), LV_DIR_LEFT, 80);
(continuesonnextpage)
2.7. Widgets 209


--- Page 214 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_bg_color(tabview, lv_palette_lighten(LV_PALETTE_RED, 2), 0);
lv_obj_t * tab_btns = lv_tabview_get_tab_btns(tabview);
lv_obj_set_style_bg_color(tab_btns, lv_palette_darken(LV_PALETTE_GREY, 3), 0);
lv_obj_set_style_text_color(tab_btns, lv_palette_lighten(LV_PALETTE_GREY, 5), 0);
lv_obj_set_style_border_side(tab_btns, LV_BORDER_SIDE_RIGHT, LV_PART_ITEMS | LV_
,→STATE_CHECKED);
/*Add 3 tabs (the tabs are page (lv_page) and can be scrolled*/
lv_obj_t * tab1 = lv_tabview_add_tab(tabview, "Tab 1");
lv_obj_t * tab2 = lv_tabview_add_tab(tabview, "Tab 2");
lv_obj_t * tab3 = lv_tabview_add_tab(tabview, "Tab 3");
lv_obj_t * tab4 = lv_tabview_add_tab(tabview, "Tab 4");
lv_obj_t * tab5 = lv_tabview_add_tab(tabview, "Tab 5");
lv_obj_set_style_bg_color(tab2, lv_palette_lighten(LV_PALETTE_AMBER, 3), 0);
lv_obj_set_style_bg_opa(tab2, LV_OPA_COVER, 0);
/*Add content to the tabs*/
lv_obj_t * label = lv_label_create(tab1);
lv_label_set_text(label, "First tab");
label = lv_label_create(tab2);
lv_label_set_text(label, "Second tab");
label = lv_label_create(tab3);
lv_label_set_text(label, "Third tab");
label = lv_label_create(tab4);
lv_label_set_text(label, "Forth tab");
label = lv_label_create(tab5);
lv_label_set_text(label, "Fifth tab");
lv_obj_clear_flag(lv_tabview_get_content(tabview), LV_OBJ_FLAG_SCROLLABLE);
}
#endif
# Create a Tab view object
tabview = lv.tabview(lv.scr_act(), lv.DIR.LEFT, 80)
tabview.set_style_bg_color(lv.palette_lighten(lv.PALETTE.RED, 2), 0)
tab_btns = tabview.get_tab_btns()
tab_btns.set_style_bg_color(lv.palette_darken(lv.PALETTE.GREY, 3), 0)
tab_btns.set_style_text_color(lv.palette_lighten(lv.PALETTE.GREY, 5), 0)
tab_btns.set_style_border_side(lv.BORDER_SIDE.RIGHT, lv.PART.ITEMS | lv.STATE.CHECKED)
# Add 3 tabs (the tabs are page (lv_page) and can be scrolled
tab1 = tabview.add_tab("Tab 1")
tab2 = tabview.add_tab("Tab 2")
tab3 = tabview.add_tab("Tab 3")
tab4 = tabview.add_tab("Tab 4")
tab5 = tabview.add_tab("Tab 5")
(continuesonnextpage)
2.7. Widgets 210


--- Page 215 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
tab2.set_style_bg_color(lv.palette_lighten(lv.PALETTE.AMBER, 3), 0)
tab2.set_style_bg_opa(lv.OPA.COVER, 0)
# Add content to the tabs
label = lv.label(tab1)
label.set_text("First tab")
label = lv.label(tab2)
label.set_text("Second tab")
label = lv.label(tab3)
label.set_text("Third tab")
label = lv.label(tab4)
label.set_text("Forth tab")
label = lv.label(tab5)
label.set_text("Fifth tab")
tabview.get_content().clear_flag(lv.obj.FLAG.SCROLLABLE)
2.7.30 Textarea
SimpleTextarea
#include "../../lv_examples.h"
#if LV_USE_TEXTAREA && LV_BUILD_EXAMPLES
static void textarea_event_handler(lv_event_t * e)
{
lv_obj_t * ta = lv_event_get_target(e);
LV_LOG_USER("Enter was pressed. The current text is: %s", lv_textarea_get_
,→text(ta));
}
static void btnm_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_t * ta = lv_event_get_user_data(e);
const char * txt = lv_btnmatrix_get_btn_text(obj, lv_btnmatrix_get_selected_
,→btn(obj));
if(strcmp(txt, LV_SYMBOL_BACKSPACE) == 0) lv_textarea_del_char(ta);
else if(strcmp(txt, LV_SYMBOL_NEW_LINE) == 0) lv_event_send(ta, LV_EVENT_READY,␣
,→NULL);
else lv_textarea_add_text(ta, txt);
}
void lv_example_textarea_1(void)
{
lv_obj_t * ta = lv_textarea_create(lv_scr_act());
(continuesonnextpage)
2.7. Widgets 211


--- Page 216 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_textarea_set_one_line(ta, true);
lv_obj_align(ta, LV_ALIGN_TOP_MID, 0, 10);
lv_obj_add_event_cb(ta, textarea_event_handler, LV_EVENT_READY, ta);
lv_obj_add_state(ta, LV_STATE_FOCUSED); /*To be sure the cursor is visible*/
static const char * btnm_map[] = {"1", "2", "3", "\n",
"4", "5", "6", "\n",
"7", "8", "9", "\n",
LV_SYMBOL_BACKSPACE, "0", LV_SYMBOL_NEW_LINE, ""
};
lv_obj_t * btnm = lv_btnmatrix_create(lv_scr_act());
lv_obj_set_size(btnm, 200, 150);
lv_obj_align(btnm, LV_ALIGN_BOTTOM_MID, 0, -10);
lv_obj_add_event_cb(btnm, btnm_event_handler, LV_EVENT_VALUE_CHANGED, ta);
lv_obj_clear_flag(btnm, LV_OBJ_FLAG_CLICK_FOCUSABLE); /*To keep the text area␣
,→focused on button clicks*/
lv_btnmatrix_set_map(btnm, btnm_map);
}
#endif
def textarea_event_handler(e, ta):
print("Enter was pressed. The current text is: " + ta.get_text())
def btnm_event_handler(e, ta):
obj = e.get_target()
txt = obj.get_btn_text(obj.get_selected_btn())
if txt == lv.SYMBOL.BACKSPACE:
ta.del_char()
elif txt == lv.SYMBOL.NEW_LINE:
lv.event_send(ta, lv.EVENT.READY, None)
elif txt:
ta.add_text(txt)
ta = lv.textarea(lv.scr_act())
ta.set_one_line(True)
ta.align(lv.ALIGN.TOP_MID, 0, 10)
ta.add_event_cb(lambda e: textarea_event_handler(e, ta), lv.EVENT.READY, None)
ta.add_state(lv.STATE.FOCUSED) # To be sure the cursor is visible
btnm_map = ["1", "2", "3", "\n",
"4", "5", "6", "\n",
"7", "8", "9", "\n",
lv.SYMBOL.BACKSPACE, "0", lv.SYMBOL.NEW_LINE, ""]
btnm = lv.btnmatrix(lv.scr_act())
btnm.set_size(200, 150)
btnm.align(lv.ALIGN.BOTTOM_MID, 0, -10)
btnm.add_event_cb(lambda e: btnm_event_handler(e, ta), lv.EVENT.VALUE_CHANGED, None)
btnm.clear_flag(lv.obj.FLAG.CLICK_FOCUSABLE) # To keep the text area focused on␣
,→button clicks
btnm.set_map(btnm_map)
2.7. Widgets 212


--- Page 217 ---


LVGLDocumentation8.3
Textareawithpasswordfield
#include "../../lv_examples.h"
#if LV_USE_TEXTAREA && LV_USE_KEYBOARD && LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e);
static lv_obj_t * kb;
void lv_example_textarea_2(void)
{
/*Create the password box*/
lv_obj_t * pwd_ta = lv_textarea_create(lv_scr_act());
lv_textarea_set_text(pwd_ta, "");
lv_textarea_set_password_mode(pwd_ta, true);
lv_textarea_set_one_line(pwd_ta, true);
lv_obj_set_width(pwd_ta, lv_pct(40));
lv_obj_set_pos(pwd_ta, 5, 20);
lv_obj_add_event_cb(pwd_ta, ta_event_cb, LV_EVENT_ALL, NULL);
/*Create a label and position it above the text box*/
lv_obj_t * pwd_label = lv_label_create(lv_scr_act());
lv_label_set_text(pwd_label, "Password:");
lv_obj_align_to(pwd_label, pwd_ta, LV_ALIGN_OUT_TOP_LEFT, 0, 0);
/*Create the one-line mode text area*/
lv_obj_t * text_ta = lv_textarea_create(lv_scr_act());
lv_textarea_set_one_line(text_ta, true);
lv_textarea_set_password_mode(text_ta, false);
lv_obj_set_width(text_ta, lv_pct(40));
lv_obj_add_event_cb(text_ta, ta_event_cb, LV_EVENT_ALL, NULL);
lv_obj_align(text_ta, LV_ALIGN_TOP_RIGHT, -5, 20);
/*Create a label and position it above the text box*/
lv_obj_t * oneline_label = lv_label_create(lv_scr_act());
lv_label_set_text(oneline_label, "Text:");
lv_obj_align_to(oneline_label, text_ta, LV_ALIGN_OUT_TOP_LEFT, 0, 0);
/*Create a keyboard*/
kb = lv_keyboard_create(lv_scr_act());
lv_obj_set_size(kb, LV_HOR_RES, LV_VER_RES / 2);
lv_keyboard_set_textarea(kb, pwd_ta); /*Focus it on one of the text areas to␣
,→start*/
}
static void ta_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * ta = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED || code == LV_EVENT_FOCUSED) {
/*Focus on the clicked text area*/
if(kb != NULL) lv_keyboard_set_textarea(kb, ta);
}
else if(code == LV_EVENT_READY) {
LV_LOG_USER("Ready, current text: %s", lv_textarea_get_text(ta));
(continuesonnextpage)
2.7. Widgets 213


--- Page 218 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
}
#endif
def ta_event_cb(e):
code = e.get_code()
ta = e.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.FOCUSED:
# Focus on the clicked text area
if kb != None:
kb.set_textarea(ta)
elif code == lv.EVENT.READY:
print("Ready, current text: " + ta.get_text())
# Create the password box
LV_HOR_RES = lv.scr_act().get_disp().driver.hor_res
LV_VER_RES = lv.scr_act().get_disp().driver.ver_res
pwd_ta = lv.textarea(lv.scr_act())
pwd_ta.set_text("")
pwd_ta.set_password_mode(True)
pwd_ta.set_one_line(True)
pwd_ta.set_width(LV_HOR_RES // 2 - 20)
pwd_ta.set_pos(5, 20)
pwd_ta.add_event_cb(ta_event_cb, lv.EVENT.ALL, None)
# Create a label and position it above the text box
pwd_label = lv.label(lv.scr_act())
pwd_label.set_text("Password:")
pwd_label.align_to(pwd_ta, lv.ALIGN.OUT_TOP_LEFT, 0, 0)
# Create the one-line mode text area
text_ta = lv.textarea(lv.scr_act())
text_ta.set_width(LV_HOR_RES // 2 - 20)
text_ta.set_one_line(True)
text_ta.add_event_cb(ta_event_cb, lv.EVENT.ALL, None)
text_ta.set_password_mode(False)
text_ta.align(lv.ALIGN.TOP_RIGHT, -5, 20)
# Create a label and position it above the text box
oneline_label = lv.label(lv.scr_act())
oneline_label.set_text("Text:")
oneline_label.align_to(text_ta, lv.ALIGN.OUT_TOP_LEFT, 0, 0)
# Create a keyboard
kb = lv.keyboard(lv.scr_act())
kb.set_size(LV_HOR_RES, LV_VER_RES // 2)
kb.set_textarea(pwd_ta) # Focus it on one of the text areas to start
2.7. Widgets 214


--- Page 219 ---


LVGLDocumentation8.3
Textauto-formatting
#include "../../lv_examples.h"
#if LV_USE_TEXTAREA && LV_USE_KEYBOARD && LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e);
static lv_obj_t * kb;
/**
* Automatically format text like a clock. E.g. "12:34"
* Add the ':' automatically.
*/
void lv_example_textarea_3(void)
{
/*Create the text area*/
lv_obj_t * ta = lv_textarea_create(lv_scr_act());
lv_obj_add_event_cb(ta, ta_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_textarea_set_accepted_chars(ta, "0123456789:");
lv_textarea_set_max_length(ta, 5);
lv_textarea_set_one_line(ta, true);
lv_textarea_set_text(ta, "");
/*Create a keyboard*/
kb = lv_keyboard_create(lv_scr_act());
lv_obj_set_size(kb, LV_HOR_RES, LV_VER_RES / 2);
lv_keyboard_set_mode(kb, LV_KEYBOARD_MODE_NUMBER);
lv_keyboard_set_textarea(kb, ta);
}
static void ta_event_cb(lv_event_t * e)
{
lv_obj_t * ta = lv_event_get_target(e);
const char * txt = lv_textarea_get_text(ta);
if(txt[0] >= '0' && txt[0] <= '9' &&
txt[1] >= '0' && txt[1] <= '9' &&
txt[2] != ':') {
lv_textarea_set_cursor_pos(ta, 2);
lv_textarea_add_char(ta, ':');
}
}
#endif
def ta_event_cb(e):
ta = e.get_target()
txt = ta.get_text()
# print(txt)
pos = ta.get_cursor_pos()
# print("cursor pos: ",pos)
# find position of ":" in text
colon_pos= txt.find(":")
# if there are more than 2 digits before the colon, remove the last one entered
if colon_pos == 3:
ta.del_char()
if colon_pos != -1:
# if there are more than 3 digits after the ":" remove the last one entered
(continuesonnextpage)
2.7. Widgets 215


--- Page 220 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
rest = txt[colon_pos:]
if len(rest) > 3:
ta.del_char()
if len(txt) < 2:
return
if ":" in txt:
return
if txt[0] >= '0' and txt[0] <= '9' and \
txt[1] >= '0' and txt[1] <= '9':
if len(txt) == 2 or txt[2] != ':' :
ta.set_cursor_pos(2)
ta.add_char(ord(':'))
#
# Automatically format text like a clock. E.g. "12:34"
# Add the ':' automatically
#
# Create the text area
LV_HOR_RES = lv.scr_act().get_disp().driver.hor_res
LV_VER_RES = lv.scr_act().get_disp().driver.ver_res
ta = lv.textarea(lv.scr_act())
ta.add_event_cb(ta_event_cb, lv.EVENT.VALUE_CHANGED, None)
ta.set_accepted_chars("0123456789:")
ta.set_max_length(5)
ta.set_one_line(True)
ta.set_text("")
ta.add_state(lv.STATE.FOCUSED)
# Create a keyboard
kb = lv.keyboard(lv.scr_act())
kb.set_size(LV_HOR_RES, LV_VER_RES // 2)
kb.set_mode(lv.keyboard.MODE.NUMBER)
kb.set_textarea(ta)
2.7.31 Tabview
Tileviewwithcontent
#include "../../lv_examples.h"
#if LV_USE_TILEVIEW && LV_BUILD_EXAMPLES
/**
* Create a 2x2 tile view and allow scrolling only in an "L" shape.
* Demonstrate scroll chaining with a long list that
* scrolls the tile view when it can't be scrolled further.
*/
void lv_example_tileview_1(void)
{
lv_obj_t * tv = lv_tileview_create(lv_scr_act());
(continuesonnextpage)
2.7. Widgets 216


--- Page 221 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Tile1: just a label*/
lv_obj_t * tile1 = lv_tileview_add_tile(tv, 0, 0, LV_DIR_BOTTOM);
lv_obj_t * label = lv_label_create(tile1);
lv_label_set_text(label, "Scroll down");
lv_obj_center(label);
/*Tile2: a button*/
lv_obj_t * tile2 = lv_tileview_add_tile(tv, 0, 1, LV_DIR_TOP | LV_DIR_RIGHT);
lv_obj_t * btn = lv_btn_create(tile2);
label = lv_label_create(btn);
lv_label_set_text(label, "Scroll up or right");
lv_obj_set_size(btn, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_center(btn);
/*Tile3: a list*/
lv_obj_t * tile3 = lv_tileview_add_tile(tv, 1, 1, LV_DIR_LEFT);
lv_obj_t * list = lv_list_create(tile3);
lv_obj_set_size(list, LV_PCT(100), LV_PCT(100));
lv_list_add_btn(list, NULL, "One");
lv_list_add_btn(list, NULL, "Two");
lv_list_add_btn(list, NULL, "Three");
lv_list_add_btn(list, NULL, "Four");
lv_list_add_btn(list, NULL, "Five");
lv_list_add_btn(list, NULL, "Six");
lv_list_add_btn(list, NULL, "Seven");
lv_list_add_btn(list, NULL, "Eight");
lv_list_add_btn(list, NULL, "Nine");
lv_list_add_btn(list, NULL, "Ten");
}
#endif
#
# Create a 2x2 tile view and allow scrolling only in an "L" shape.
# Demonstrate scroll chaining with a long list that
# scrolls the tile view when it can't be scrolled further.
#
tv = lv.tileview(lv.scr_act())
# Tile1: just a label
tile1 = tv.add_tile(0, 0, lv.DIR.BOTTOM)
label = lv.label(tile1)
label.set_text("Scroll down")
label.center()
# Tile2: a button
tile2 = tv.add_tile(0, 1, lv.DIR.TOP | lv.DIR.RIGHT)
btn = lv.btn(tile2)
label = lv.label(btn)
(continuesonnextpage)
2.7. Widgets 217


--- Page 222 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label.set_text("Scroll up or right")
btn.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
btn.center()
# Tile3: a list
tile3 = tv.add_tile(1, 1, lv.DIR.LEFT)
list = lv.list(tile3)
list.set_size(lv.pct(100), lv.pct(100))
list.add_btn(None, "One")
list.add_btn(None, "Two")
list.add_btn(None, "Three")
list.add_btn(None, "Four")
list.add_btn(None, "Five")
list.add_btn(None, "Six")
list.add_btn(None, "Seven")
list.add_btn(None, "Eight")
list.add_btn(None, "Nine")
list.add_btn(None, "Ten")
2.7.32 Window
Simplewindow
#include "../../lv_examples.h"
#if LV_USE_WIN && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
LV_LOG_USER("Button %d clicked", (int)lv_obj_get_index(obj));
}
void lv_example_win_1(void)
{
lv_obj_t * win = lv_win_create(lv_scr_act(), 40);
lv_obj_t * btn;
btn = lv_win_add_btn(win, LV_SYMBOL_LEFT, 40);
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_win_add_title(win, "A title");
btn = lv_win_add_btn(win, LV_SYMBOL_RIGHT, 40);
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_win_add_btn(win, LV_SYMBOL_CLOSE, 60);
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_t * cont = lv_win_get_content(win); /*Content can be added here*/
lv_obj_t * label = lv_label_create(cont);
lv_label_set_text(label, "This is\n"
"a pretty\n"
"long text\n"
(continuesonnextpage)
2.7. Widgets 218


--- Page 223 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
"to see how\n"
"the window\n"
"becomes\n"
"scrollable.\n"
"\n"
"\n"
"Some more\n"
"text to be\n"
"sure it\n"
"overflows. :)");
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.CLICKED:
print("Button {:d} clicked".format(obj.get_child_id()))
win = lv.win(lv.scr_act(), 60)
btn1 = win.add_btn(lv.SYMBOL.LEFT, 40)
btn1.add_event_cb(event_handler, lv.EVENT.ALL, None)
win.add_title("A title")
btn2=win.add_btn(lv.SYMBOL.RIGHT, 40)
btn2.add_event_cb(event_handler, lv.EVENT.ALL, None)
btn3 = win.add_btn(lv.SYMBOL.CLOSE, 60)
btn3.add_event_cb(event_handler, lv.EVENT.ALL, None)
cont = win.get_content() # Content can be added here
label = lv.label(cont)
label.set_text("""This is
a pretty
long text
to see how
the window
becomes
scrollable.
We need
quite some text
and we will
even put
some more
text to be
sure it
overflows.
""")
2.7. Widgets 219


--- Page 224 ---


CHAPTER
THREE
GET STARTED
ThereareseveralwaystogetyourfeetwetwithLVGL.Hereisonerecommendedorderofdocumentstoreadandthings
toplaywithwhenyouarelearningtouseLVGL:
1. ChecktheOnlinedemostoseeLVGLinaction(3minutes)
2. ReadtheIntroductionpageofthedocumentation(5minutes)
3. ReadtheQuickoverviewpageofthedocumentation(15minutes)
4. SetupaSimulator(10minutes)
5. TryoutsomeExamples
6. CheckoutthePlatform-specifictutorials. (inthissectionbelow). (10minutes)
7. PortLVGLtoaboard. SeethePortingguideorcheckthereadytouseProjects
8. ReadtheOverviewpagetogetabetterunderstandingofthelibrary. (2-3hours)
9. CheckthedocumentationoftheWidgetstoseetheirfeaturesandusage
10. IfyouhavequestionsgottotheForum
11. ReadtheContributingguidetoseehowyoucanhelptoimproveLVGL(15minutes)
3.1 Quick overview
HereyoucanlearnthemostimportantthingsaboutLVGL.Youshouldreadthisfirsttogetageneralimpressionandread
thedetailedPortingandOverviewsectionsafterthat.
3.1.1 Get started in a simulator
InsteadofportingLVGLtoembeddedhardwarestraightaway,it'shighlyrecommendedtogetstartedinasimulatorfirst.
LVGLisportedtomanyIDEstobesureyouwillfindyourfavoriteone. GototheSimulatorssectiontogetready-to-use
projectsthatcanberunonyourPC.Thiswayyoucansavethetimeofportingfornowandgetsomeexperiencewith
LVGLimmediately.
220


--- Page 225 ---


LVGLDocumentation8.3
3.1.2 Add LVGL into your project
IfyouwouldrathertryLVGLonyourownprojectfollowthesesteps:
• DownloadorclonethelibraryfromGitHubwithgit clone https://github.com/lvgl/lvgl.git.
• Copythelvglfolderintoyourproject.
• Copylvgl/lv_conf_template.haslv_conf.hnexttothelvglfolder,changethefirst#if 0to1
toenablethefile'scontentandsettheLV_COLOR_DEPTHdefines.
• Includelvgl/lvgl.hinfileswhereyouneedtouseLVGLrelatedfunctions.
• Calllv_tick_inc(x)everyxmillisecondsinaTimerorTask(xshouldbebetween1and10). Itisrequired
fortheinternaltimingofLVGL.Alternatively,configureLV_TICK_CUSTOM(seelv_conf.h)sothatLVGL
canretrievethecurrenttimedirectly.
• Calllv_init()
• Createadrawbuffer: LVGLwillrenderthegraphicsherefirst,andsendtherenderedimagetothedisplay. The
buffersizecanbesetfreelybut1/10screensizeisagoodstartingpoint.
static lv_disp_draw_buf_t draw_buf;
static lv_color_t buf1[DISP_HOR_RES * DISP_VER_RES / 10]; /
,→*Declare a buffer for 1/10 screen size*/
lv_disp_draw_buf_init(&draw_buf, buf1, NULL, MY_DISP_HOR_RES * MY_DISP_VER_SER / 10);␣
,→ /*Initialize the display buffer.*/
• Implementandregisterafunctionwhichcancopytherenderedimagetoanareaofyourdisplay:
static lv_disp_drv_t disp_drv; /*Descriptor of a display driver*/
lv_disp_drv_init(&disp_drv); /*Basic initialization*/
disp_drv.flush_cb = my_disp_flush; /*Set your driver function*/
disp_drv.draw_buf = &draw_buf; /*Assign the buffer to the display*/
disp_drv.hor_res = MY_DISP_HOR_RES; /*Set the horizontal resolution of the display*/
disp_drv.ver_res = MY_DISP_VER_RES; /*Set the vertical resolution of the display*/
lv_disp_drv_register(&disp_drv); /*Finally register the driver*/
void my_disp_flush(lv_disp_drv_t * disp, const lv_area_t * area, lv_color_t * color_p)
{
int32_t x, y;
/*It's a very slow but simple implementation.
*`set_pixel` needs to be written by you to a set pixel on the screen*/
for(y = area->y1; y <= area->y2; y++) {
for(x = area->x1; x <= area->x2; x++) {
set_pixel(x, y, *color_p);
color_p++;
}
}
lv_disp_flush_ready(disp); /* Indicate you are ready with the flushing*/
}
• Implementandregisterafunctionwhichcanreadaninputdevice. E.g. foratouchpad:
static lv_indev_drv_t indev_drv; /*Descriptor of a input device driver*/
lv_indev_drv_init(&indev_drv); /*Basic initialization*/
indev_drv.type = LV_INDEV_TYPE_POINTER; /*Touch pad is a pointer-like device*/
indev_drv.read_cb = my_touchpad_read; /*Set your driver function*/
lv_indev_drv_register(&indev_drv); /*Finally register the driver*/
(continuesonnextpage)
3.1. Quickoverview 221


--- Page 226 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
void my_touchpad_read(lv_indev_t * indev, lv_indev_data_t * data)
{
/*`touchpad_is_pressed` and `touchpad_get_xy` needs to be implemented by you*/
if(touchpad_is_pressed()) {
data->state = LV_INDEV_STATE_PRESSED;
touchpad_get_xy(&data->point.x, &data->point.y);
} else {
data->state = LV_INDEV_STATE_RELEASED;
}
}
• Calllv_timer_handler()periodicallyeveryfewmillisecondsinthemainwhile(1)looporinanoper-
atingsystemtask. Itwillredrawthescreenifrequired,handleinputdevices,animationetc.
ForamoredetailedguidegotothePortingsection.
3.1.3 Learn the basics
Widgets
ThegraphicalelementslikeButtons,Labels,Sliders,Chartsetc. arecalledobjectsorwidgets. GotoWidgetstoseethe
fulllistofavailablewidgets.
Everyobjecthasaparentobjectwhereitiscreated. Forexample,ifalabeliscreatedonabutton,thebuttonistheparent
oflabel.
Thechildobjectmoveswiththeparentandiftheparentisdeletedthechildrenwillbedeletedtoo.
Children can be visible only within their parent's bounding area. In other words, the parts of the children outside the
parentareclipped.
AScreenisthe"root"parent. Youcanhaveanynumberofscreens.
Togetthecurrentscreencalllv_scr_act(),andtoloadascreenuselv_scr_load(scr1).
Youcancreateanewobjectwithlv_<type>_create(parent). Itwillreturnanlv_obj_t *variablethatcan
beusedasareferencetotheobjecttosetitsparameters.
Forexample:
lv_obj_t * slider1 = lv_slider_create(lv_scr_act());
Tosetsomebasicattributeslv_obj_set_<parameter_name>(obj, <value>)functionscanbeused. For
example:
lv_obj_set_x(btn1, 30);
lv_obj_set_y(btn1, 10);
lv_obj_set_size(btn1, 200, 50);
Along with the basic attributes, widgets can have type specific parameters which are set by
lv_<widget_type>_set_<parameter_name>(obj, <value>)functions. Forexample:
lv_slider_set_value(slider1, 70, LV_ANIM_ON);
ToseethefullAPIvisitthedocumentationofthewidgetsortherelatedheaderfile(e.g. lvgl/src/widgets/lv_slider.h).
3.1. Quickoverview 222


--- Page 227 ---


LVGLDocumentation8.3
Events
Eventsareusedtoinformtheuserthatsomethinghashappenedwithanobject. Youcanassignoneormorecallbacksto
anobjectwhichwillbecallediftheobjectisclicked,released,dragged,beingdeleted,etc.
Acallbackisassignedlikethis:
lv_obj_add_event_cb(btn, btn_event_cb, LV_EVENT_CLICKED, NULL); /*Assign a callback␣
,→to the button*/
...
void btn_event_cb(lv_event_t * e)
{
printf("Clicked\n");
}
LV_EVENT_ALLcanbeusedinsteadofLV_EVENT_CLICKEDtoinvokethecallbackforanyevent.
Fromlv_event_t * ethecurrenteventcodecanberetrievedwith:
lv_event_code_t code = lv_event_get_code(e);
Theobjectthattriggeredtheeventcanberetrievedwith:
lv_obj_t * obj = lv_event_get_target(e);
TolearnallfeaturesoftheeventsgototheEventoverviewsection.
Parts
Widgets might be built from one or more parts. For example, a button has only one part called LV_PART_MAIN.
However,aSliderhasLV_PART_MAIN,LV_PART_INDICATORandLV_PART_KNOB.
Byusingpartsyoucanapplydifferentstylestosub-elementsofawidget. (Seebelow)
Readthewidgets'documentationtolearnwhichpartseachuses.
States
LVGLobjectscanbeinacombinationofthefollowingstates:
• LV_STATE_DEFAULTNormal,releasedstate
• LV_STATE_CHECKEDToggledorcheckedstate
• LV_STATE_FOCUSEDFocusedviakeypadorencoderorclickedviatouchpad/mouse
• LV_STATE_FOCUS_KEYFocusedviakeypadorencoderbutnotviatouchpad/mouse
• LV_STATE_EDITEDEditbyanencoder
• LV_STATE_HOVEREDHoveredbymouse(notsupportednow)
• LV_STATE_PRESSEDBeingpressed
• LV_STATE_SCROLLEDBeingscrolled
• LV_STATE_DISABLEDDisabled
3.1. Quickoverview 223


--- Page 228 ---


LVGLDocumentation8.3
Forexample,ifyoupressanobjectitwillautomaticallygototheLV_STATE_FOCUSEDandLV_STATE_PRESSED
statesandwhenyoureleaseittheLV_STATE_PRESSEDstatewillberemovedwhilefocusremainsactive.
Tocheckifanobjectisinagivenstateuselv_obj_has_state(obj, LV_STATE_...). Itwillreturntrueif
theobjectiscurrentlyinthatstate.
Tomanuallyaddorremovestatesuse:
lv_obj_add_state(obj, LV_STATE_...);
lv_obj_clear_state(obj, LV_STATE_...);
Styles
Astyleinstancecontainspropertiessuchasbackgroundcolor, borderwidth, font, etc. thatdescribetheappearanceof
objects.
Stylesarerepresentedwithlv_style_tvariables. Onlytheirpointerissavedintheobjectssotheyneedtobedefined
as static or global. Before using a style it needs to be initialized with lv_style_init(&style1). After that,
propertiescanbeaddedtoconfigurethestyle. Forexample:
static lv_style_t style1;
lv_style_init(&style1);
lv_style_set_bg_color(&style1, lv_color_hex(0xa03080))
lv_style_set_border_width(&style1, 2))
Seethefulllistofpropertieshere.
StylesareassignedusingtheORedcombinationofanobject'spartandstate. Forexampletousethisstyleontheslider's
indicatorwhenthesliderispressed:
lv_obj_add_style(slider1, &style1, LV_PART_INDICATOR | LV_STATE_PRESSED);
IfthepartisLV_PART_MAINitcanbeomitted:
lv_obj_add_style(btn1, &style1, LV_STATE_PRESSED); /*Equal to LV_PART_MAIN | LV_STATE_
,→PRESSED*/
Similarly,LV_STATE_DEFAULTcanbeomittedtoo:
lv_obj_add_style(slider1, &style1, LV_PART_INDICATOR); /*Equal to LV_PART_INDICATOR |␣
,→LV_STATE_DEFAULT*/
ForLV_STATE_DEFAULTandLV_PART_MAINsimplywrite0:
lv_obj_add_style(btn1, &style1, 0); /*Equal to LV_PART_MAIN | LV_STATE_DEFAULT*/
Styles can be cascaded (similarly to CSS). It means you can add more styles to a part of an object. For example
style_btncansetadefaultbuttonappearance,andstyle_btn_redcanoverwritethebackgroundcolortomake
thebuttonred:
lv_obj_add_style(btn1, &style_btn, 0);
lv_obj_add_style(btn1, &style1_btn_red, 0);
Ifapropertyisnotsetonforthecurrentstate, thestylewithLV_STATE_DEFAULTwillbeused. Adefaultvalueis
usedifthepropertyisnotdefinedinthedefaultstate.
3.1. Quickoverview 224


--- Page 229 ---


LVGLDocumentation8.3
Someproperties(typicallythetext-relatedones)canbeinherited. Thismeansifapropertyisnotsetinanobjectitwill
besearchedforinitsparentstoo. Forexample,youcansetthefontonceinthescreen'sstyleandalltextonthatscreen
willinherititbydefault.
Localstylepropertiesalsocanbeaddedtoobjects. Thiscreatesastylewhichresidesinsidetheobjectandisusedonly
bytheobject:
lv_obj_set_style_bg_color(slider1, lv_color_hex(0x2080bb), LV_PART_INDICATOR | LV_
,→STATE_PRESSED);
TolearnallthefeaturesofstylesseetheStyleoverviewsection.
Themes
Themesarethedefaultstylesforobjects. Stylesfromathemeareappliedautomaticallywhenobjectsarecreated.
Thethemeforyourapplicationisacompiletimeconfigurationsetinlv_conf.h.
3.1.4 Examples
Abuttonwithalabelandreactonclickevent
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_BTN
static void btn_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * btn = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
static uint8_t cnt = 0;
cnt++;
/*Get the first child of the button which is the label and change its text*/
lv_obj_t * label = lv_obj_get_child(btn, 0);
lv_label_set_text_fmt(label, "Button: %d", cnt);
}
}
/**
* Create a button with a label and react on click event.
*/
void lv_example_get_started_1(void)
{
lv_obj_t * btn = lv_btn_create(lv_scr_act()); /*Add a button the current␣
,→screen*/
lv_obj_set_pos(btn, 10, 10); /*Set its position*/
lv_obj_set_size(btn, 120, 50); /*Set its size*/
lv_obj_add_event_cb(btn, btn_event_cb, LV_EVENT_ALL, NULL); /*Assign a␣
,→callback to the button*/
lv_obj_t * label = lv_label_create(btn); /*Add a label to the button*/
lv_label_set_text(label, "Button"); /*Set the labels text*/
lv_obj_center(label);
}
(continuesonnextpage)
3.1. Quickoverview 225


--- Page 230 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#endif
class CounterBtn():
def __init__(self):
self.cnt = 0
#
# Create a button with a label and react on click event.
#
btn = lv.btn(lv.scr_act()) # Add a button the␣
,→current screen
btn.set_pos(10, 10) # Set its position
btn.set_size(120, 50) # Set its size
btn.align(lv.ALIGN.CENTER,0,0)
btn.add_event_cb(self.btn_event_cb, lv.EVENT.ALL, None) # Assign a callback␣
,→to the button
label = lv.label(btn) # Add a label to the␣
,→button
label.set_text("Button") # Set the labels text
label.center()
def btn_event_cb(self,evt):
code = evt.get_code()
btn = evt.get_target()
if code == lv.EVENT.CLICKED:
self.cnt += 1
# Get the first child of the button which is the label and change its text
label = btn.get_child(0)
label.set_text("Button: " + str(self.cnt))
counterBtn = CounterBtn()
Createstylesfromscratchforbuttons
#include "../lv_examples.h"
#if LV_USE_BTN && LV_BUILD_EXAMPLES
static lv_style_t style_btn;
static lv_style_t style_btn_pressed;
static lv_style_t style_btn_red;
static lv_color_t darken(const lv_color_filter_dsc_t * dsc, lv_color_t color, lv_opa_
,→t opa)
{
LV_UNUSED(dsc);
return lv_color_darken(color, opa);
}
static void style_init(void)
(continuesonnextpage)
3.1. Quickoverview 226


--- Page 231 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
/*Create a simple button style*/
lv_style_init(&style_btn);
lv_style_set_radius(&style_btn, 10);
lv_style_set_bg_opa(&style_btn, LV_OPA_COVER);
lv_style_set_bg_color(&style_btn, lv_palette_lighten(LV_PALETTE_GREY, 3));
lv_style_set_bg_grad_color(&style_btn, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_bg_grad_dir(&style_btn, LV_GRAD_DIR_VER);
lv_style_set_border_color(&style_btn, lv_color_black());
lv_style_set_border_opa(&style_btn, LV_OPA_20);
lv_style_set_border_width(&style_btn, 2);
lv_style_set_text_color(&style_btn, lv_color_black());
/*Create a style for the pressed state.
*Use a color filter to simply modify all colors in this state*/
static lv_color_filter_dsc_t color_filter;
lv_color_filter_dsc_init(&color_filter, darken);
lv_style_init(&style_btn_pressed);
lv_style_set_color_filter_dsc(&style_btn_pressed, &color_filter);
lv_style_set_color_filter_opa(&style_btn_pressed, LV_OPA_20);
/*Create a red style. Change only some colors.*/
lv_style_init(&style_btn_red);
lv_style_set_bg_color(&style_btn_red, lv_palette_main(LV_PALETTE_RED));
lv_style_set_bg_grad_color(&style_btn_red, lv_palette_lighten(LV_PALETTE_RED, 3));
}
/**
* Create styles from scratch for buttons.
*/
void lv_example_get_started_2(void)
{
/*Initialize the style*/
style_init();
/*Create a button and use the new styles*/
lv_obj_t * btn = lv_btn_create(lv_scr_act());
/* Remove the styles coming from the theme
* Note that size and position are also stored as style properties
* so lv_obj_remove_style_all will remove the set size and position too */
lv_obj_remove_style_all(btn);
lv_obj_set_pos(btn, 10, 10);
lv_obj_set_size(btn, 120, 50);
lv_obj_add_style(btn, &style_btn, 0);
lv_obj_add_style(btn, &style_btn_pressed, LV_STATE_PRESSED);
/*Add a label to the button*/
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text(label, "Button");
lv_obj_center(label);
/*Create another button and use the red style too*/
lv_obj_t * btn2 = lv_btn_create(lv_scr_act());
lv_obj_remove_style_all(btn2); /*Remove the styles coming␣
,→from the theme*/
(continuesonnextpage)
3.1. Quickoverview 227


--- Page 232 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_pos(btn2, 10, 80);
lv_obj_set_size(btn2, 120, 50);
lv_obj_add_style(btn2, &style_btn, 0);
lv_obj_add_style(btn2, &style_btn_red, 0);
lv_obj_add_style(btn2, &style_btn_pressed, LV_STATE_PRESSED);
lv_obj_set_style_radius(btn2, LV_RADIUS_CIRCLE, 0); /*Add a local style too*/
label = lv_label_create(btn2);
lv_label_set_text(label, "Button 2");
lv_obj_center(label);
}
#endif
#
# Create styles from scratch for buttons.
#
style_btn = lv.style_t()
style_btn_red = lv.style_t()
style_btn_pressed = lv.style_t()
# Create a simple button style
style_btn.init()
style_btn.set_radius(10)
style_btn.set_bg_opa(lv.OPA.COVER)
style_btn.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 3))
style_btn.set_bg_grad_color(lv.palette_main(lv.PALETTE.GREY))
style_btn.set_bg_grad_dir(lv.GRAD_DIR.VER)
# Add a border
style_btn.set_border_color(lv.color_white())
style_btn.set_border_opa(lv.OPA._70)
style_btn.set_border_width(2)
# Set the text style
style_btn.set_text_color(lv.color_white())
# Create a red style. Change only some colors.
style_btn_red.init()
style_btn_red.set_bg_color(lv.palette_main(lv.PALETTE.RED))
style_btn_red.set_bg_grad_color(lv.palette_lighten(lv.PALETTE.RED, 2))
# Create a style for the pressed state.
style_btn_pressed.init()
style_btn_pressed.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style_btn_pressed.set_bg_grad_color(lv.palette_darken(lv.PALETTE.RED, 3))
# Create a button and use the new styles
btn = lv.btn(lv.scr_act()) # Add a button the current screen
# Remove the styles coming from the theme
# Note that size and position are also stored as style properties
# so lv_obj_remove_style_all will remove the set size and position too
btn.remove_style_all() # Remove the styles coming from the theme
btn.set_pos(10, 10) # Set its position
btn.set_size(120, 50) # Set its size
btn.add_style(style_btn, 0)
(continuesonnextpage)
3.1. Quickoverview 228


--- Page 233 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn.add_style(style_btn_pressed, lv.STATE.PRESSED)
label = lv.label(btn) # Add a label to the button
label.set_text("Button") # Set the labels text
label.center()
# Create another button and use the red style too
btn2 = lv.btn(lv.scr_act())
btn2.remove_style_all() # Remove the styles coming from the theme
btn2.set_pos(10, 80) # Set its position
btn2.set_size(120, 50) # Set its size
btn2.add_style(style_btn, 0)
btn2.add_style(style_btn_red, 0)
btn2.add_style(style_btn_pressed, lv.STATE.PRESSED)
btn2.set_style_radius(lv.RADIUS.CIRCLE, 0) # Add a local style
label = lv.label(btn2) # Add a label to the button
label.set_text("Button 2") # Set the labels text
label.center()
Createasliderandwriteitsvalueonalabel
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SLIDER
static lv_obj_t * label;
static void slider_event_cb(lv_event_t * e)
{
lv_obj_t * slider = lv_event_get_target(e);
/*Refresh the text*/
lv_label_set_text_fmt(label, "%"LV_PRId32, lv_slider_get_value(slider));
lv_obj_align_to(label, slider, LV_ALIGN_OUT_TOP_MID, 0, -15); /*Align top of␣
,→the slider*/
}
/**
* Create a slider and write its value on a label.
*/
void lv_example_get_started_3(void)
{
/*Create a slider in the center of the display*/
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_set_width(slider, 200); /*Set the width*/
lv_obj_center(slider); /*Align to the center of␣
,→the parent (screen)*/
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL); /
,→*Assign an event function*/
/*Create a label above the slider*/
label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "0");
lv_obj_align_to(label, slider, LV_ALIGN_OUT_TOP_MID, 0, -15); /*Align top of␣
,→the slider*/ (continuesonnextpage)
3.1. Quickoverview 229


--- Page 234 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
def slider_event_cb(evt):
slider = evt.get_target()
# Refresh the text
label.set_text(str(slider.get_value()))
#
# Create a slider and write its value on a label.
#
# Create a slider in the center of the display
slider = lv.slider(lv.scr_act())
slider.set_width(200) # Set the width
slider.center() # Align to the␣
,→center of the parent (screen)
slider.add_event_cb(slider_event_cb, lv.EVENT.VALUE_CHANGED, None) # Assign an event␣
,→function
# Create a label above the slider
label = lv.label(lv.scr_act())
label.set_text("0")
label.align_to(slider, lv.ALIGN.OUT_TOP_MID, 0, -15) # Align below the␣
,→slider
3.1.5 Micropython
LearnmoreaboutMicropython.
# Create a Button and a Label
scr = lv.obj()
btn = lv.btn(scr)
btn.align(lv.scr_act(), lv.ALIGN.CENTER, 0, 0)
label = lv.label(btn)
label.set_text("Button")
# Load the screen
lv.scr_load(scr)
3.1. Quickoverview 230


--- Page 235 ---


LVGLDocumentation8.3
3.2 Platforms
3.2.1 Simulator on PC
You can try out LVGL using only your PC (i.e. without any development boards). LVGL will run on a simulator
environmentonthePCwhereanyonecanwriteandexperimentwithrealLVGLapplications.
UsingthesimulatoronaPChasthefollowingadvantages:
• Hardwareindependent-Writecode,runitonthePCandseetheresultonamonitor.
• Cross-platform-AnyWindows,LinuxormacOSsystemcanrunthePCsimulator.
• Portability-Thewrittencodeisportable,whichmeansyoucansimplycopyitwhenmigratingtoembeddedhard-
ware.
• EasyValidation-Thesimulatorisalsoveryusefultoreportbugsbecauseitprovidesacommonplatformforevery
user. Soit'sagoodideatoreproduceabuginthesimulatorandusethatcodesnippetintheForum.
SelectanIDE
The simulator is ported to various IDEs (Integrated Development Environments). Choose your favorite IDE, read its
READMEonGitHub,downloadtheproject,andloadittotheIDE.
• EclipsewithSDLdriver: RecommendedonLinuxandMac
• CodeBlocks: RecommendedonWindows
• VisualStudio: ForWindows
• VSCodewithSDLdriver: RecommendedonLinuxandMac
• PlatformIOwithSDLdriver: RecommendedonLinuxandMac
• MDKwithFastModel: ForWindows
ExternalprojectnotmaintainedbytheLVGLorganization:
• QTCreator: Crossplatform
YoucanuseanyIDEfordevelopmentbut,forsimplicity,theconfigurationforEclipseCDTiswhatwe'llfocusoninthis
tutorial. Thefollowingsectiondescribestheset-upguideofEclipseCDTinmoredetail.
Note: IfyouareonWindows,it'susuallybettertousetheVisualStudioorCodeBlocksprojectsinstead. They
workoutoftheboxwithoutrequiringextrasteps.
Set-upEclipseCDT
InstallEclipseCDT
EclipseCDTisaC/C++IDE.
EclipseisaJava-basedtoolsobesureJavaRuntimeEnvironmentisinstalledonyoursystem.
OnDebian-baseddistros(e.g. Ubuntu): sudo apt-get install default-jre
Note: Ifyouareusingotherdistros,thenpleaseinstalla'JavaRuntimeEnvironment'suitabletoyourdistro. Note: Ifyou
areusingmacOSandgeta"FailedtocreatetheJavaVirtualMachine"error,uninstallanyotherJavaJDKinstallsand
installJavaJDK8u. Thisshouldfixtheproblem.
3.2. Platforms 231


--- Page 236 ---


LVGLDocumentation8.3
You can download Eclipse's CDT from: https://www.eclipse.org/cdt/downloads.php. Start the installer and choose
EclipseCDT fromthelist.
InstallSDL2
ThePCsimulatorusestheSDL2cross-platformlibrarytosimulateaTFTdisplayandatouchpad.
Linux
OnLinuxyoucaneasilyinstallSDL2usingaterminal:
1. FindthecurrentversionofSDL2: apt-cache search libsdl2 (e.g. libsdl2-2.0-0)
2. InstallSDL2: sudo apt-get install libsdl2-2.0-0(replacewiththefoundversion)
3. InstallSDL2developmentpackage: sudo apt-get install libsdl2-dev
4. Ifbuildessentialsarenotinstalledyet: sudo apt-get install build-essential
Windows
IfyouareusingWindowsfirstlyyouneedtoinstallMinGW(64bitversion). AfterinstallingMinGW,dothefollowing
stepstoaddSDL2:
1. DownloadthedevelopmentlibrariesofSDL.Gotohttps://www.libsdl.org/download-2.0.phpanddownloadDe-
velopmentLibraries: SDL2-devel-2.0.5-mingw.tar.gz
2. Decompressthefileandgotox86_64-w64-mingw32directory(for64bitMinGW)ortoi686-w64-mingw32(for
32bitMinGW)
3. Copy_...mingw32/include/SDL2foldertoC:/MinGW/.../x86_64-w64-mingw32/include
4. Copy_...mingw32/lib/ contenttoC:/MinGW/.../x86_64-w64-mingw32/lib
5. Copy_...mingw32/bin/SDL2.dllto{eclipse_workspace}/pc_simulator/Debug/. DoitlaterwhenEclipseisinstalled.
Note: IfyouareusingMicrosoftVisualStudioinsteadofEclipsethenyoudon'thavetoinstallMinGW.
OSX
OnOSXyoucaneasilyinstallSDL2withbrew: brew install sdl2
Ifsomethingisnotworking,thenpleasereferthistutorialtogetstartedwithSDL.
Pre-configuredproject
Apre-configuredgraphicslibraryproject(basedonthelatestrelease)isalwaysavailabletogetstartedeasily. Youcan
findthelatestoneonGitHub. (Pleasenotethat,theprojectisconfiguredforEclipseCDT).
3.2. Platforms 232


--- Page 237 ---


LVGLDocumentation8.3
Addthepre-configuredprojecttoEclipseCDT
Run Eclipse CDT. It will show a dialogue about the workspace path. Before accepting the path, check that path and
copy(andunzip)thedownloadedpre-configuredprojectthere. Afterthat,youcanaccepttheworkspacepath. Ofcourse
youcanmodifythispathbutinthatcasecopytheprojecttothecorrespondinglocation.
Closethestart-upwindowandgotoFile->ImportandchooseGeneral->ExistingprojectintoWorkspace. Browse
therootdirectoryoftheprojectandclickFinish
OnWindowsyouhavetodotwoadditionalthings:
• CopytheSDL2.dllintotheproject'sDebugfolder
• Right-clickontheproject->Projectproperties->C/C++Build->Settings->Libraries->Add... andaddmingw32
aboveSDLmainandSDL.(Theorderisimportant: mingw32,SDLmain,SDL)
CompileandRun
NowyouarereadytorunLVGLonyourPC.ClickontheHammerIcononthetopmenubartoBuildtheproject. Ifyou
havedoneeverythingright,thenyouwillnotgetanyerrors. Notethatonsomesystemsadditionalstepsmightberequired
to"see"SDL2fromEclipsebutinmostcasestheconfigurationinthedownloadedprojectisenough.
Afterasuccessfulbuild,clickonthePlaybuttononthetopmenubartoruntheproject. Nowawindowshouldappearin
themiddleofyourscreen.
NowyouarereadytouseLVGLandbegindevelopmentonyourPC.
3.2.2 NXP
NXP has integrated LVGL into the MCUXpresso SDK packages for general purpose and crossover microcontrollers,
allowingeasyevaluationandmigrationintoyourproductdesign. DownloadanSDKforasupportedboardtodayandget
startedwithyournextGUIapplication.
CreatingnewprojectwithLVGL
DownloadingtheMCUSDKexampleprojectisrecommendedasastartingpoint. ItcomesfullyconfiguredwithLVGL
(andwithPXP/VGLitesupportifthemodulesarepresent),noadditionalintegrationworkisrequired.
HWaccelerationforNXPiMXRTplatforms
DependingontheRTplatformused,theaccelerationcanbedonebyNXPPXP(PiXelPipeline)and/ortheVerisilicon
GPUthroughanAPInamedVGLite. Eachacceleratorhasitsowncontextthatallowsthemtobeusedindividuallyas
wellsimultaneously(inLVGLmultithreadingmode).
3.2. Platforms 233


--- Page 238 ---


LVGLDocumentation8.3
PXPaccelerator
SeveraldrawingfeaturesinLVGLcanbeoffloadedtothePXPengine. TheCPUisavailableforotheroperationswhile
thePXPisrunning. RTOSisrequiredtoblocktheLVGLdrawingthreadandswitchtoanothertaskorsuspendtheCPU
forpowersavings.
Supporteddrawcallbacksareavailablein"src/draw/nxp/pxp/lv_draw_pxp.c":
pxp_draw_ctx->base_draw.draw_img_decoded = lv_draw_pxp_img_decoded;
pxp_draw_ctx->blend = lv_draw_pxp_blend;
pxp_draw_ctx->base_draw.wait_for_finish = lv_draw_pxp_wait_for_finish;
pxp_draw_ctx->base_draw.buffer_copy = lv_draw_pxp_buffer_copy;
Featuressupported:
All operations can be used in conjunction with optional transparency.
• RGB565andARGB8888colorformats
• Areafillwithcolor
• BLIT(BLockImageTransfer)
• ScreenRotation(90,180,270degree)
• Colorkeying
• Recoloring(colortint)
• ImageRotation(90,180,270degree)
• Buffercopy
• RTOSintegrationlayer
• DefaultFreeRTOSandbaremetalcodeprovided
• Combinationofrecolorand/orrotation+colorkey/alphablend/transparencyissupported. ThatisachievedbyPXP
intwosteps:
– Firststepistorecolor/rotatetheimagetoatemporarybuffer(staticallyallocated)
– Secondstepisrequiredtohandlecolorkeying,alphachannelortoapplytransparency
Knownlimitations:
• Rotationisnotsupportedforimagesunalignedtoblocksof16x16pixels. PXPissettoprocess16x16blocksto
optimize the system for memory bandwidth and image processing time. The output engine essentially truncates
anyoutputpixelsafterthedesirednumberofpixelshasbeenwritten. Whenrotatingasourceimageandtheoutput
isnotdivisiblebytheblocksize,theincorrectpixelscouldbetruncatedandthefinaloutputimagecanlookshifted.
3.2. Platforms 234


--- Page 239 ---


LVGLDocumentation8.3
Basicconfiguration:
• SelectNXPPXPengineinlv_conf.h: SetLV_USE_GPU_NXP_PXPto1
• Enable default implementation for interrupt handling, PXP start function and automatic initialization: Set
LV_USE_GPU_NXP_PXP_AUTO_INITto1
• IfSDK_OS_FREE_RTOSsymbolisdefined,FreeRTOSimplementationwillbeused,otherwisebaremetalcode
willbeincluded
Basicinitialization:
• IfLV_USE_GPU_NXP_PXP_AUTO_INITisenabled,nousercodeisrequired;PXPisinitializedautomatically
inlv_init()
• For manual PXP initialization, default configuration structure for callbacks can be used. Initialize PXP before
callinglv_init()
#if LV_USE_GPU_NXP_PXP
#include "src/draw/nxp/pxp/lv_gpu_nxp_pxp.h"
#endif
. . .
#if LV_USE_GPU_NXP_PXP
PXP_COND_STOP(!lv_gpu_nxp_pxp_init(), "PXP init failed.");
#endif
Projectsetup:
• AddPXPrelatedfilestoproject:
– src/draw/nxp/pxp/lv_draw_pxp.c[.h]: drawcontextcallbacks
– src/draw/nxp/pxp/lv_draw_pxp_blend.c[.h]: fillandblit(withoptionaltransformation)
– src/draw/nxp/pxp/lv_gpu_nxp_pxp.c[.h]: init,uninit,run/waitPXPdevice
– src/draw/nxp/pxp/lv_gpu_nxp_pxp_osa.c[.h]: OSabstraction(FreeRTOSorbaremetal)
∗ optional,requiredonlyifLV_USE_GPU_NXP_PXP_AUTO_INITissetto1
• PXPrelatedcodedependsontwodriversprovidedbyMCUSDK.Thesedriversneedtobeaddedtoproject:
– fsl_pxp.c[.h]: PXPdriver
– fsl_cache.c[.h]: CPUcachehandlingfunctions
Logging:
• By default, LV_GPU_NXP_PXP_LOG_ERRORS is enabled so that any PXP error will be seen on SDK debug
console
• Bydefault,LV_GPU_NXP_PXP_LOG_TRACESisdisabled. Enableitfortracinglogs(likePXPlimitations)
3.2. Platforms 235


--- Page 240 ---


LVGLDocumentation8.3
Advancedconfiguration:
• Implementation depends on multiple OS-specific functions. The struct lv_nxp_pxp_cfg_t with callback
pointers is used as a parameter for the lv_gpu_nxp_pxp_init() function. Default implementation for
FreeRTOSandbaremetalisprovidedinlv_gpu_nxp_pxp_osa.c
– pxp_interrupt_init(): InitializePXPinterrupt(HWsetup,OSsetup)
– pxp_interrupt_deinit(): DeinitializePXPinterrupt(HWsetup,OSsetup)
– pxp_run():StartPXPjob. UseOS-specificmechanismtoblockdrawingthread. PXPmustfinishdrawing
beforeleavingthisfunction.
• Areathreshold(sizelimit)isconfigurableandusedtodecidewhethertheareawillbeprocessedbyPXPornot.
AreassmallerthanthedefinedvaluewillbeprocessedbyCPUandthosebiggerthanthethresholdwillbeprocessed
byPXP.Thethresholdisdefinedasamacroinlv_draw_pxp.c
– LV_GPU_NXP_PXP_SIZE_LIMIT:sizethresholdforfill/blit(withoptionaltransformation)
VGLiteaccelerator
ExtradrawingfeaturesinLVGLcanbehandledbytheVGLiteengine. TheCPUisavailableforotheroperationswhile
theVGLiteisrunning. AnRTOSisrequiredtoblocktheLVGLdrawingthreadandswitchtoanothertaskorsuspend
theCPUforpowersavings.
Supporteddrawcallbacksareavailablein"src/draw/nxp/vglite/lv_draw_vglite.c":
vglite_draw_ctx->base_draw.init_buf = lv_draw_vglite_init_buf;
vglite_draw_ctx->base_draw.draw_line = lv_draw_vglite_line;
vglite_draw_ctx->base_draw.draw_arc = lv_draw_vglite_arc;
vglite_draw_ctx->base_draw.draw_rect = lv_draw_vglite_rect;
vglite_draw_ctx->base_draw.draw_img_decoded = lv_draw_vglite_img_decoded;
vglite_draw_ctx->blend = lv_draw_vglite_blend;
vglite_draw_ctx->base_draw.wait_for_finish = lv_draw_vglite_wait_for_finish;
vglite_draw_ctx->base_draw.buffer_copy = lv_draw_vglite_buffer_copy;
Featuressupported:
All operations can be used in conjunction with optional transparency.
• RGB565andARGB8888colorformats
• Areafillwithcolor
• BLIT(BLockImageTransfer)
• ImageRotation(anydegreewithdecimal)
• ImageScale
• Drawrectanglebackgroundwithoptionalradiusorgradient
• Blitrectanglebackgroundimage
• Drawrectangleborder/outlinewithoptionalroundedcorners
• Drawarcwithoptionalroundedending
• Drawlineordashedlinewithoptionalroundedending
3.2. Platforms 236


--- Page 241 ---


LVGLDocumentation8.3
• Buffercopy
Knownlimitations:
• Sourceimagealignment: Thebytealignmentrequirementforapixeldependsonthespecificpixelformat. Both
bufferaddressandbufferstridemustbealigned. Asgeneralrule,thealignmentissetto16pixels. Thismakesthe
bufferaddressalignmenttobe32bytesforRGB565and64bytesforARGB8888.
• For pixel engine (PE) destination, the alignment should be 64 bytes for all tiled (4x4) buffer layouts. The pixel
enginehasnoadditionalalignmentrequirementforlinearbufferlayouts(VG_LITE_LINEAR).
Basicconfiguration:
• SelectNXPVGLiteengineinlv_conf.h: SetLV_USE_GPU_NXP_VG_LITEto1
• SDK_OS_FREE_RTOSsymbolneedstobedefinedsothattheFreeRTOSimplementationwillbeused
Basicinitialization:
• InitializeVGLitebeforecallinglv_init()byspecifyingthewidth/heightoftessellationwindow. Valueshould
beamultipleof16;minimumvalueis16pixels,maximumcannotbegreaterthantheframewidth. Iflessthanor
equalto0,thennotessellationbufferiscreated,inwhichcaseVGLiteisinitializedonlyforblitting.
#if LV_USE_GPU_NXP_VG_LITE
#include "vg_lite.h"
#endif
. . .
#if LV_USE_GPU_NXP_VG_LITE
VG_LITE_COND_STOP(vg_lite_init(64, 64) != VG_LITE_SUCCESS, "VGLite init␣
,→failed.");
#endif
Projectsetup:
• AddVGLiterelatedfilestoproject:
– src/draw/nxp/vglite/lv_draw_vglite.c[.h]: drawcontextcallbacks
– src/draw/nxp/vglite/lv_draw_vglite_blend.c[.h]: fillandblit(withoptionaltransformation)
– src/draw/nxp/vglite/lv_draw_vglite_rect.c[.h]: drawrectangle
– src/draw/nxp/vglite/lv_draw_vglite_arc.c[.h]: drawarc
– src/draw/nxp/vglite/lv_draw_vglite_line.c[.h]: drawline
– src/draw/nxp/vglite/lv_vglite_buf.c[.h]: init/getvglitebuffer
– src/draw/nxp/vglite/lv_vglite_utils.c[.h]: functionhelpers
3.2. Platforms 237


--- Page 242 ---


LVGLDocumentation8.3
Logging:
• Bydefault,LV_GPU_NXP_VG_LITE_LOG_ERRORSisenabledsothatanyVGLiteerrorwillbeseenonSDK
debugconsole
• By default, LV_GPU_NXP_VG_LITE_LOG_TRACES is disabled. Enable it for tracing logs (like blit split
workaroundorVGLitefallbacktoCPUduetoanyerroronthedriver)
Advancedconfiguration:
• Area threshold (size limit) is configurable and used to decide whether the area will be processed by VGLite or
not. Areas smaller than the defined value will be processed by CPU and those bigger than the threshold will be
processedbyVGLite. Thethresholdisdefinedasamacroinlv_draw_vglite.c
– LV_GPU_NXP_VG_LITE_SIZE_LIMIT:sizethresholdforfill/blit(withoptionaltransformation)
3.2.3 STM32
TODO
3.2.4 Espressif (ESP32 chip series)
LVGLcanbeusedandconfiguredasastandardESP-IDFcomponent.
MoreinformationaboutESP-IDFbuildsystemcanbefoundhere.
LVGLdemoprojectforESP32
We've created lv_port_esp32, a project using ESP-IDF and LVGL to show one of the demos from demos. You can
configuretheprojecttouseoneofthemanysupporteddisplaycontrollersandtargets(chips).
Seelvgl_esp32_driversrepositoryforacompletelistofsupporteddisplayandindev(touch)controllersandtargets.
UsingLVGLinyourESP-IDFproject
Prerequisites
• ESP-IDFv4.1andabove
• ESPevaluationboardwithadisplay
3.2. Platforms 238


--- Page 243 ---


LVGLDocumentation8.3
ObtainingLVGL
Option1: gitsubmodule
SimplycloneLVGLintoyourproject_root/componentsdirectoryanditwillbeautomaticallyintegratedinto
theproject. IftheprojectisagitrepositoryyoucanincludeLVGLasagitsubmodule:
git submodule add https://github.com/lvgl/lvgl.git components/lvgl
The above command will clone LVGL's main repository into the components/lvgl directory. LVGL includes a
CMakeLists.txtfilethatsetssomeconfigurationoptionssoyoucanuseLVGLrightaway.
Option2: IDFComponentManager
LVGL is also distributed through IDF Component Manager. It allows users to seamlessly integrate LVGL component
intotheirprojectwithfollowingcommand:
idf.py add-dependency lvgl/lvgl>=8.*
Duringnextprojectbuild,LVGLcomponentwillbefetchedfromthecomponentregistryandaddedtoprojectbuild.
Configuration
WhenyouarereadytoconfigureLVGL,launchtheconfigurationmenuwithidf.py menuconfiginyourproject
rootdirectory,gotoComponent configandthenLVGL configuration.
Usinglvgl_esp32_driversinESP-IDFproject
You can also add lvgl_esp32_drivers as a "component". This component should be located inside a directory
named"components"inyourprojectrootdirectory.
Whenyourprojectisagitrepositoryyoucanincludelvgl_esp32_driversasagitsubmodule:
git submodule add https://github.com/lvgl/lvgl_esp32_drivers.git components/lvgl_
,→esp32_drivers
3.2.5 Renesas
TheHMI-BoarddevelopmentboardSDKnowcomeswithLVGLintegrationforquickevaluation. Simplydownloadthe
SDK for the supported motherboard and you’ll be on your way to creating your next GUI application in no time. For
moreinformation,checkouttheSoftwaredesigndescription.
CreatingnewprojectwithLVGL
ItisrecommendedtostartyourprojectbydownloadingtheHMI-BoardSDKexampleproject. Itcomesfullyequipped
withLVGLanddave-2dsupport(ifthemodulesarepresent),soyouwon’tneedtodoanyadditionalintegrationwork.
3.2. Platforms 239


--- Page 244 ---


LVGLDocumentation8.3
HWaccelerationforRenesasRA6M3platforms
ForRA6M3platforms,hardwareaccelerationcanbeachievedusingthedave-2dGPU,dependingontheplatformused.
Eachacceleratorhasitsowncontext,allowingthemtobeusedindividuallyorsimultaneouslyinLVGL’smultithreading
mode.
Dave-2daccelerator
LVGLcanoffloadseveraldrawingfeaturestothedave-2dengine,freeinguptheCPUforotheroperationswhiledave-2d
runs. AnRTOSisrequiredtoblocktheLVGLdrawingthreadandswitchtoanothertaskorsuspendtheCPUforpower
savings. Supporteddrawcallbackscanbefoundin“src/draw/renesas/lv_gpu_d2_ra6m3.c”.
LVGLcanoffloadseveraldrawingfeaturestothedave-2dengine,freeinguptheCPUforotheroperationswhiledave-2d
runs. AnRTOSisrequiredtoblocktheLVGLdrawingthreadandswitchtoanothertaskorsuspendtheCPUforpower
savings. Supporteddrawcallbackscanbefoundin“src/draw/renesas/lv_gpu_d2_ra6m3.c”.
ra_2d_draw_ctx->blend = lv_draw_ra6m3_2d_blend;
ra_2d_draw_ctx->base_draw.draw_img_decoded = lv_port_gpu_img_decoded;
ra_2d_draw_ctx->base_draw.wait_for_finish = lv_port_gpu_wait;
ra_2d_draw_ctx->base_draw.draw_letter = lv_draw_gpu_letter;
Featuressupported:
All operations can be used in conjunction with optional transparency.
• RGB565andARGB8888colorformats
• Areafillwithcolor
• BLIT(BLockImageTransfer)
• Colorconversion
• Rotateandscale
• Alphablending
• Bilinearfiltering
• RTOSintegrationlayer
• DefaultRT-Threadcodeprovided
• Subpixelexactplacement
Basicconfiguration:
• SelectRenesasdave-2dengineinlv_conf.h: SetLV_USE_GPU_RA6M3_G2Dto1
• Setreferencedheaderfileinlv_conf.h: #define LV_GPU_RA6M3_G2D_INCLUDE "hal_data.h"
3.2. Platforms 240


--- Page 245 ---


LVGLDocumentation8.3
RT-ThreadExample:
#define COLOR_BUFFER (LV_HOR_RES_MAX * LV_VER_RES_MAX)
static lv_disp_drv_t disp_drv;
/*A static or global variable to store the buffers*/
static lv_color_t buf_1[COLOR_BUFFER];
• Afterinitializingyourperipherals(suchasSPI,GPIOs,andLCD)inthelv_port_disp_init()function,you
caninitializeLVGLusinglv_init(). Next,registertheframebuffersusinglv_disp_draw_buf_init()
andcreateanewdisplaydriverusinglv_disp_drv_init().
/*Initialize `disp_buf` with the buffer(s). With only one buffer use NULL instead buf_
,→2 */
lv_disp_draw_buf_init(&disp_buf, buf_1, RT_NULL, COLOR_BUFFER);
lv_disp_drv_init(&disp_drv); /*Basic initialization*/
/*Set the resolution of the display*/
disp_drv.hor_res = LV_HOR_RES_MAX;
disp_drv.ver_res = LV_VER_RES_MAX;
/*Set a display buffer*/
disp_drv.draw_buf = &disp_buf;
/*Used to copy the buffer's content to the display*/
disp_drv.flush_cb = disp_flush;
/* Initialize GPU module */
lv_port_gpu_hw_init();
/*Finally register the driver*/
lv_disp_drv_register(&disp_drv);
• To run LVGL, you’ll need to create a thread. You can find examples of how to do this using RT-Thread in the
env_support/rt-thread/lv_rt_thread_port.cfile.
static void lvgl_thread_entry(void *parameter)
{
#if LV_USE_LOG
lv_log_register_print_cb(lv_rt_log);
#endif /* LV_USE_LOG */
lv_init();
lv_port_disp_init();
lv_port_indev_init();
lv_user_gui_init();
/* handle the tasks of LVGL */
while(1)
{
lv_task_handler();
rt_thread_mdelay(LV_DISP_DEF_REFR_PERIOD);
}
}
static int lvgl_thread_init(void)
{
(continuesonnextpage)
3.2. Platforms 241


--- Page 246 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
rt_err_t err;
/* create lvgl thread */
err = rt_thread_init(&lvgl_thread, "LVGL", lvgl_thread_entry, RT_NULL,
&lvgl_thread_stack[0], sizeof(lvgl_thread_stack), PKG_LVGL_THREAD_PRIO,␣
,→10);
if(err != RT_EOK)
{
LOG_E("Failed to create LVGL thread");
return -1;
}
rt_thread_startup(&lvgl_thread);
return 0;
}
INIT_ENV_EXPORT(lvgl_thread_init);
• The last step is to create a function to output the frame buffer to your LCD. The specifics of this function will
dependonthefeaturesofyourMCU.Here’sanexampleforatypicalMCUinterface: my_flush_cb.
static void my_flush_cb(lv_disp_drv_t *disp_drv, const lv_area_t *area, lv_color_t␣
,→*color_p)
{
#ifdef PKG_USING_ILI9341
lcd_fill_array_spi(area->x1, area->y1, area->x2, area->y2, color_p);
#elif LV_USE_GPU_RA6M3_G2D
lv_port_gpu_blit(area->x1, area->y1, color_p, area);
#else
......
#endif
lv_disp_flush_ready(disp_drv);
}
3.2.6 Arduino
TheLVGLlibraryisdirectlyavailableasArduinolibraries.
NotethatyouneedtochooseaboardpowerfulenoughtorunLVGLandyourGUI.SeetherequirementsofLVGL.
ForexampleESP32isagoodcandidatetocreateUI'swithLVGL.
GettheLVGLArduinolibrary
LVGLcanbeinstalledviatheArduinoIDELibraryManagerorasa.ZIPlibrary.
YoucanDownloadthelatestversionofLVGLfromGitHubandsimplycopyittoArduino'slibraryfolder.
3.2. Platforms 242


--- Page 247 ---


LVGLDocumentation8.3
Setupdrivers
To get started it's recommended to use TFT_eSPI library as a TFT driver to simplify testing. To make it work, setup
TFT_eSPIaccordingtoyourTFTdisplaytypeviaeditingeither
• User_Setup.h
• orbyselectingaconfigurationintheUser_Setup_Select.h
BothfilesarelocatedinTFT_eSPIlibrary'sfolder.
ConfigureLVGL
LVGLhasitsownconfigurationfilecalledlv_conf.h. WhenLVGLisinstalled,followtheseconfigurationsteps:
1. GotothedirectoryoftheinstalledArduinolibraries
2. Goto lvgl andcopylv_conf_template.h as lv_conf.h intotheArduinoLibrariesdirectorynextto
thelvgllibraryfolder.
3. Openlv_conf.handchangethefirst#if 0to#if 1toenablethecontentofthefile
4. SetthecolordepthofyoudisplayinLV_COLOR_DEPTH
5. SetLV_TICK_CUSTOM 1
Finallythelayoutwithlv_conf.hshouldlooklikethis:
arduino
|-libraries
|-lvgl
|-other_lib_1
|-other_lib_2
|-lv_conf.h
InitializeandrunLVGL
TakealookatLVGL_Arduino.inotoseehowtoinitializeLVGL.TFT_eSPIisusedasthedisplaydriver.
IntheINOfileyoucanseehowtoregisteradisplayandatouchpadforLVGLandcallanexample.
Usetheexamplesanddemos
Note that, there is no dedicated INO file for every example. Instead, you can load an example by calling an
lv_example_...function. Forexamplelv_example_btn_1().
IMPORTANTNOTE1DuetosomethelimitationsofArduino'sbuildsystemyouneedtocopylvgl/examples
tolvgl/src/examples. Similarlyforthedemoslvgl/demostolvgl/src/demos.
IMPORTANTNOTE2Notethatthelv_exampleslibraryisforLVGLv7andyoushouldn'tinstallitforthisversion
(sinceLVGLv8)astheexamplesanddemosarenowpartofthemainLVGLlibrary.
3.2. Platforms 243


--- Page 248 ---


LVGLDocumentation8.3
Debuggingandlogging
LVGLcandisplaydebuginformationincaseoftrouble. IntheLVGL_Arduino.inoexamplethereisamy_print
method,whichsendsthisdebuginformationtotheserialinterface. Toenablethisfeatureyouhavetoeditthelv_conf.
hfileandenablelogginginthesectionlog settings:
/*Log settings*/
#define USE_LV_LOG 1 /*Enable/disable the log module*/
#if LV_USE_LOG
/* How important log should be added:
* LV_LOG_LEVEL_TRACE A lot of logs to give detailed information
* LV_LOG_LEVEL_INFO Log important events
* LV_LOG_LEVEL_WARN Log if something unwanted happened but didn't cause a␣
,→problem
* LV_LOG_LEVEL_ERROR Only critical issue, when the system may fail
* LV_LOG_LEVEL_NONE Do not log anything
*/
# define LV_LOG_LEVEL LV_LOG_LEVEL_WARN
AfterenablingthelogmoduleandsettingLV_LOG_LEVELaccordingly,theoutputlogissenttotheSerialport@
115200bps.
3.2.7 Tasmota and berry
WhatisTasmota?
Tasmota is a widely used open-source firmware for ESP8266 and EPS32 based devices. It supports a wide variety of
devices,sensorsandintegrationstoHomeAutomationandCloudservices. Tasmotafirmwareisdownloadedmorethan
200,000timeseachmonth,andhasanactiveandgrowingcommunity.
Tasmota provides access to hundreds of supported devices, full support of MQTT, HTTP(S), integration with major
HomeAutomationsystems,myriadofsensors,IR,RF,Zigbee,Bluetooth,AWSIoT,AzureIoT,Alexaandmanymore.
WhatisBerry?
Berryisaultra-lightweightdynamicallytypedembeddedscriptinglanguage. Itisdesignedforlower-performanceem-
beddeddevices. TheinterpreterofBerryincludeaone-passcompilerandregister-basedVM,allthecodeiswrittenin
ANSIC99. BerryoffersasyntaxverysimilartoPython,andisinspiredfromLUAVM.ItisfullyintegratedinTasmota
HighlightsofBerry
Berryhasthefollowingadvantages:
• Lightweight: Awell-optimizedinterpreterwithverylittleresources. Idealforuseinmicroprocessors.
• Fast: optimizedone-passbytecodecompilerandregister-basedvirtualmachine.
• Powerful: supportsimperativeprogramming,object-orientedprogramming,functionalprogramming.
• Flexible: Berry is a dynamic type script, and it's intended for embedding in applications. It can provide good
dynamicscalabilityforthehostsystem.
• Simple: simpleandnaturalsyntax,supportgarbagecollection,andeasytouseFFI(foreignfunctioninterface).
• RAM saving: With compile-time object construction, most of the constant objects are stored in read-only code
datasegments,sotheRAMusageoftheinterpreterisverylowwhenitstarts.
3.2. Platforms 244


--- Page 249 ---


LVGLDocumentation8.3
AllfeaturesaredetailedintheBerryReferenceManual
WhyLVGL+Tasmota+Berry?
In2021,TasmotaaddedfullsupportofLVGLforESP32baseddevices. ItalsointroducedtheBerryscriptinglanguage,
asmall-footprintlanguagesimilartoPythonandfullyintegratedinTasmota.
AcomprehensivemappingofLVGLinBerrylanguageisnowavailable,similartothemappingofMicropython. Itallows
touse+98%ofallLVGLfeatures. ItisalsopossibletowritecustomwidgetsinBerry.
Versionssupported: LVGLv8.3.0,LodePNGv20201017,Freetype2.10.4
Tasmota+Berry+LVGLcouldbeusedfor:
• FastprototypingGUI.
• Shorteningthecycleofchangingandfine-tuningtheGUI.
• Modelling the GUI in a more abstract way by defining reusable composite objects, taking advantage of Berry's
languagefeaturessuchasInheritance,Closures,ExceptionHandling...
• MakeLVGLaccessibletoalargeraudience. NoneedtoknowCtocreateaniceGUIonanembeddedsystem.
AhigherlevelinterfacecompatiblewithOpenHASPisalsounderdevelopment.
Sowhatdoesitlooklike?
TL;DR:SimilartoMicroPython,it'sverymuchliketheCAPI,butObject-OrientedforLVGLcomponents.
Let'sdiverightintoanexample!
Asimpleexample
lv.start() # start LVGL
scr = lv.scr_act() # get default screen
btn = lv.btn(scr) # create button
btn.center()
label = lv.label(btn) # create a label in the button
label.set_text("Button") # set a label to the button
HowcanIuseit?
Youcanstartinlessthan10minutesonaM5Stackorequivalentdeviceinlessthan10minutesinthisshorttutorial
3.2. Platforms 245


--- Page 250 ---


LVGLDocumentation8.3
WherecanIfindmoreinformation?
3.2.8 CMake
LVGLsupportsintegratingwithCMake. Itcomeswithpreconfiguredtargetsfor:
Ontopofthepreconfiguredtargetsyoucanalsouse"plain"CMaketointegrateLVGLintoanycustomC/C++project.
Prerequisites
• CMake(>=3.12.4)
• Compatiblebuildtoole.g.
BuildingLVGLwithCMake
TherearemanywaystoincludeexternalCMakeprojectsintoyourown. Amodernonealsousedinthisexampleisthe
CMakeFetchContentmodule. Thismoduleconvenientlyallowsustodownloaddependenciesdirectlyatconfiguretime
frome.g. GitHub. HereisanexamplehowwemightincludeLVGLintoourownproject.
cmake_minimum_required(VERSION 3.14)
include(FetchContent)
project(MyProject LANGUAGES C CXX)
# Build an executable called "MyFirmware"
add_executable(MyFirmware src/main.c)
# Specify path to own LVGL config header
set(LV_CONF_PATH
${CMAKE_CURRENT_SOURCE_DIR}/src/lv_conf.h
CACHE STRING "" FORCE)
# Fetch LVGL from GitHub
FetchContent_Declare(lvgl URL https://github.com/lvgl/lvgl.git)
FetchContent_MakeAvailable(lvgl)
# The target "MyFirmware" depends on LVGL
target_link_libraries(MyFirmware PRIVATE lvgl::lvgl)
This configuration declares a dependency between the two targets MyFirmware and lvgl. Upon building the target
MyFirmwarethisdependencywillberesolvedandlvglwillbebuiltandlinkedwithit. SinceLVGLrequiresaconfig
headercalledlv_conf.htobeincludablebyitssourceswealsosettheoptionLV_CONF_PATHtopointtoourowncopy
ofit.
3.2. Platforms 246


--- Page 251 ---


LVGLDocumentation8.3
AdditionalCMakeoptions
BesidesLV_CONF_PATHtherearetwoadditionalCMakeoptionstospecifyincludepaths.
LV_LVGL_H_INCLUDE_SIMPLEwhichspecifieswhetherto#include "lvgl.h"absolutorrelative
LV_CONF_INCLUDE_SIMPLEwhichspecifieswhetherto#include "lv_conf.h"and"lv_drv_conf.h"
absolutorrelative
Idonotrecommenddisablingthoseoptionsunlessyourfolderlayoutmakesitabsolutelynecessary.
BuildingLVGLexampleswithCMake
LVGLexampleshavetheirownCMaketarget. Ifyouwanttobuildtheexamplessimplyaddthemtoyourdependencies.
# The target "MyFirmware" depends on LVGL and examples
target_link_libraries(MyFirmware PRIVATE lvgl::lvgl lvgl::examples)
BuildingLVGLdriversanddemoswithCMake
Exactlythesamegoesforthedriversandthedemos.
FetchContent_Declare(lv_drivers
GIT_REPOSITORY https://github.com/lvgl/lv_drivers)
FetchContent_MakeAvailable(lv_drivers)
# The target "MyFirmware" depends on LVGL, drivers and demos
target_link_libraries(MyFirmware PRIVATE lvgl::lvgl lvgl::drivers lvgl::examples)
3.2.9 Build shared libraries with CMake
Bydefault, LVGLwillbebuiltasastaticlibrary(archive). CMakecaninsteadbeinstructedtobuildLVGLasshared
library(.so/.dll/etc.):
set(BUILD_SHARED_LIBS ON)
OR
$ cmake "-DBUILD_SHARED_LIBS=ON" .
3.3 (RT)OS
3.3.1 NuttX RTOS
WhatisNuttX?
NuttXisamatureandsecurereal-timeoperatingsystem(RTOS)withanemphasisontechnicalstandardscompliance
andsmallsize. Itisscalablefrom8-bitto64-bitmicrocontrollersandmicroprocessorsandcompliantwiththePortable
Operating System Interface (POSIX) and the American National Standards Institute (ANSI) standards and with many
Linux-likesubsystems. ThebestwaytothinkaboutNuttXistothinkofitasasmallUnix/Linuxformicrocontrollers.
3.3. (RT)OS 247


--- Page 252 ---


LVGLDocumentation8.3
HighlightsofNuttX
• Small-Fitsandrunsinmicrocontrollersassmallas32kBFlashand8kBofRAM.
• Compliant-StrivestobeascompatibleaspossiblewithPOSIXandLinux.
• Versatile-Supportsmanyarchitectures(ARM,ARMThumb,AVR,MIPS,OpenRISC,RISC-V32-bitand64-bit,
RX65N,x86-64,Xtensa,Z80/Z180,etc.).
• Modular-Itsmodulardesignallowsdeveloperstoselectonlywhatreallymattersandusemodulestoincludenew
features.
• Popular-NuttXisusedbymanycompaniesaroundtheworld. ProbablyyoualreadyusedaproductwithNuttX
withoutknowingitwasrunningNuttX.
• Predictable - NuttX is a preemptible Realtime kernel, so you can use it to create predictable applications for
realtimecontrol.
WhyNuttX+LVGL?
AlthoughNuttXhasitsowngraphiclibrarycalledNX,LVGLisagoodalternativebecauseuserscouldfindmoreeye-
candydemosandtheycanreusecodefrompreviousprojects. LVGLisanObject-OrientedComponentBasedhigh-level
GUIlibrary,thatcouldfitverywellforaRTOSwithadvancedfeatureslikeNuttX.LVGLisimplementedinCandits
APIsareinC.
HerearesomeadvantagesofusingLVGLinNuttX
• DevelopGUIinLinuxfirstandwhenitisdonejustcompileitforNuttX.Nothingmore,nowastingoftime.
• Usually,GUIdevelopmentforlowlevelRTOSrequiresmultipleiterationstogetthingsright,whereeachiteration
consists of Change code > Build > Flash > Run. Using LVGL, Linux and NuttX you can reduce this
processandjusttesteverythingonyourcomputerandwhenitisdone,compileitonNuttXandthatisit.
NuttX+LVGLcouldbeusedfor
• GUIdemostodemonstrateyourboardgraphicscapacities.
• FastprototypingGUIforMVP(MinimumViableProduct)presentation.
• visualizesensordatadirectlyandeasilyontheboardwithoutusingacomputer.
• FinalproductswithaGUIwithoutatouchscreen(i.e. 3DPrinterInterfaceusingRotaryEncodertoInputdata).
• Finalproductswithatouchscreen(andallsortsofbellsandwhistles).
3.3. (RT)OS 248


--- Page 253 ---


LVGLDocumentation8.3
HowtogetstartedwithNuttXandLVGL?
TherearemanyboardsintheNuttXmainlinewithsupportforLVGL.Let'susetheSTM32F429IDISCOVERYasan
examplebecauseitisaverypopularboard.
Firstyouneedtoinstallthepre-requisitesonyoursystem
Let'susetheWindowsSubsystemforLinux
$ sudo apt-get install automake bison build-essential flex gcc-arm-none-eabi gperf␣
,→git libncurses5-dev libtool libusb-dev libusb-1.0.0-dev pkg-config kconfig-
,→frontends openocd
Nowlet'screateaworkspacetosaveourfiles
$ mkdir ~/nuttxspace
$ cd ~/nuttxspace
ClonetheNuttXandAppsrepositories:
$ git clone https://github.com/apache/incubator-nuttx nuttx
$ git clone https://github.com/apache/incubator-nuttx-apps apps
ConfigureNuttXtousethestm32f429i-discoboardandtheLVGLDemo
$ ./tools/configure.sh stm32f429i-disco:lvgl
$ make
Ifeverythingwentfineyoushouldhavenowthefilenuttx.bintoflashonyourboard:
$ ls -l nuttx.bin
-rwxrwxr-x 1 alan alan 287144 Jun 27 09:26 nuttx.bin
FlashingthefirmwareintheboardusingOpenOCD:
$ sudo openocd -f interface/stlink-v2.cfg -f target/stm32f4x.cfg -c init -c "reset␣
,→halt" -c "flash write_image erase nuttx.bin 0x08000000"
Resettheboardandusingthe'NSH>'terminalstarttheLVGLdemo:
nsh> lvgldemo
3.3. (RT)OS 249


--- Page 254 ---


LVGLDocumentation8.3
WherecanIfindmoreinformation?
• Thisblogpost: LVGLonLPCXpresso54628
• NuttXmailinglist: ApacheNuttXMailingList
3.3.2 RT-Thread RTOS
WhatisRT-Thread?
IntroduceaboutRT-ThreadandhowtorunLVGLonRT-Threadinsimulators
RT-Threadisanopensource,neutral,andcommunity-basedreal-timeoperatingsystem(RTOS).RT-ThreadhasStan-
dardversionandNanoversion. Forresource-constrainedmicrocontroller(MCU)systems, theNanoversionthatre-
quiresonly3KBFlashand1.2KBRAMmemoryresourcescanbetailoredwitheasy-to-usetools. Forresource-richIoT
devices,RT-Threadcanusetheonlinesoftwarepackagemanagementtool,togetherwithsystemconfigurationtools,to
achieveintuitiveandrapidmodularcutting,seamlesslyimportrichsoftwarepackages;thus,achievingcomplexfunctions
likeAndroid'sgraphicalinterfaceandtouchslidingeffects,smartvoiceinteractioneffects,andsoon.
Keyfeatures
• Designedforresource-constraineddevices,theminimumkernelrequiresonly1.2KBofRAMand3KBofFlash.
• Avarietyofstandardinterfaces,suchasPOSIX,CMSIS,C++applicationenvironment.
• Hasrichcomponentsandaprosperousandfastgrowingpackageecosystem
• Elegantcodestyle,easytouse,readandmaster.
• HighScalability. RT-Threadhashigh-qualityscalablesoftwarearchitecture,loosecoupling,modularity,iseasyto
tailorandexpand.
• Supportshigh-performanceapplications.
• SupportsallmainstreamcompilingtoolssuchasGCC,KeilandIAR.
• Supportsawiderangeofarchitecturesandchips.
HowtorunLVGLonRT-Thread?
2/72/72/72/7
LVGLhasregisteredasasoftwarepackageofRT-Thread. ByusingEnvtoolorRT-ThreadStudioIDE,RT-Threadusers
caneasilydownloadLVGLsourcecodeandcombinewithRT-Threadproject. RT-ThreadcommunityhasportLVGLto
severalBSPs:
3.3. (RT)OS 250


--- Page 255 ---


LVGLDocumentation8.3
ImportaBSPprojectintoRT-ThreadStudio
ClonethelatestcodefromRT-Threadofficialrepository. OpentheRT-ThreadStudioandselectFile -> Import.
IntheImportmenu,pleaseselectRT-Thread BSP Project into Workspace,andclicknextbutton. Inthe
BSP location area,pleaseselecttherootpathoftheBSPwhichyouprefertoimport,suchasC:\Users\xxx\
Desktop\rt-thread\bsp\stm32\stm32l475-atk-pandora. In the Project Name area, please
typeanameforthisproject,then,pressFinishbutton.
3.3.3 FreeRTOS
TODO
3.3.4 Zephyr
TODO
3.4 Bindings
3.4.1 Micropython
WhatisMicropython?
MicropythonisPythonformicrocontrollers. UsingMicropython,youcanwritePython3codeandrunitevenonabare
metalarchitecturewithlimitedresources.
HighlightsofMicropython
• Compact-Fitsandrunswithinjust256kofcodespaceand16kofRAM.NoOSisneeded,althoughyoucanalso
runitwithanOS,ifyouwant.
• Compatible-StrivestobeascompatibleaspossiblewithnormalPython(knownasCPython).
• Versatile-Supportsmanyarchitectures(x86,x86-64,ARM,ARMThumb,Xtensa).
• Interactive-Noneedforthecompile-flash-bootcycle. WiththeREPL(interactiveprompt)youcantypecom-
mandsandexecutethemimmediately,runscripts,etc.
• Popular-Manyplatformsaresupported. Theuserbaseisgrowingbigger. Notableforks: MicroPython,Circuit-
Python,MicroPython_ESP32_psRAM_LoBo
• EmbeddedOriented-Comeswithmodulesspecificallyforembeddedsystems,suchasthemachinemodulefor
accessinglow-levelhardware(I/Opins,ADC,UART,SPI,I2C,RTC,Timersetc.)
3.4. Bindings 251


--- Page 256 ---


LVGLDocumentation8.3
WhyMicropython+LVGL?
Currently,Micropythondoesnothaveagoodhigh-levelGUIlibrarybydefault. LVGLisanObject-OrientedComponent
Basedhigh-levelGUIlibrary,whichseemstobeanaturalcandidatetomapintoahigherlevellanguage,suchasPython.
LVGLisimplementedinCanditsAPIsareinC.
HerearesomeadvantagesofusingLVGLinMicropython:
• DevelopGUIinPython,averypopularhighlevellanguage. UseparadigmssuchasObject-OrientedProgramming.
• Usually, GUI development requires multiple iterations to get things right. With C, each iteration consists of
Change code > Build > Flash > Run. In Micropython it's just Change code > Run ! You can
evenruncommandsinteractivelyusingtheREPL(theinteractiveprompt)
Micropython+LVGLcouldbeusedfor:
• FastprototypingGUI.
• Shorteningthecycleofchangingandfine-tuningtheGUI.
• ModellingtheGUIinamoreabstractwaybydefiningreusablecompositeobjects, takingadvantageofPython's
languagefeaturessuchasInheritance,Closures,ListComprehension,Generators,ExceptionHandling,Arbitrary
PrecisionIntegersandothers.
• MakeLVGLaccessibletoalargeraudience. NoneedtoknowCtocreateaniceGUIonanembeddedsystem.
ThisgoeswellwithCircuitPythonvision. CircuitPythonwasdesignedwitheducationinmind,tomakeiteasierfor
neworinexperienceduserstogetstartedwithembeddeddevelopment.
• CreatingtoolstoworkwithLVGLatahigherlevel(e.g. drag-and-dropdesigner).
Sowhatdoesitlooklike?
TL;DR:It'sverymuchliketheCAPI,butObject-OrientedforLVGLcomponents.
Let'sdiverightintoanexample!
Asimpleexample
import lvgl as lv
lv.init()
scr = lv.obj()
btn = lv.btn(scr)
btn.align(lv.scr_act(), lv.ALIGN.CENTER, 0, 0)
label = lv.label(btn)
label.set_text("Button")
lv.scr_load(scr)
3.4. Bindings 252


--- Page 257 ---


LVGLDocumentation8.3
HowcanIuseit?
OnlineSimulator
IfyouwanttoexperimentwithLVGL+Micropythonwithoutdownloadinganything-youcanuseouronlinesimulator!
It'safullyfunctionalLVGL+Micropythonthatrunsentirelyinthebrowserandallowsyoutoeditapythonscriptand
runit.
Clickheretoexperimentontheonlinesimulator
HelloWorld
Note: theonlinesimulatorisavailableforlvglv6andv7.
PCSimulator
Micropythonisportedtomanyplatforms. Onenotableportis"unix", whichallowsyoutobuildandrunMicropython
(+LVGL)onaLinuxmachine. (OnaWindowsmachineyoumightneedVirtualBoxorWSLorMinGWorCygwinetc.)
Clickheretoknowmoreinformationaboutbuildingandrunningtheunixport
Embeddedplatform
In the end, the goal is to run it all on an embedded platform. Both Micropython and LVGL can be used on many
embedded architectures, such as stm32, ESP32 etc. You would also need display and input drivers. We have some
sampledrivers(ESP32+ILI9341,aswellassomeotherexamples),butchancesareyouwouldwanttocreateyourown
input/displaydriversforyourspecifichardware. DriverscanbeimplementedeitherinCasaMicropythonmodule,orin
pureMicropython!
WherecanIfindmoreinformation?
• InthisBlogPost
• lv_micropythonREADME
• lv_binding_micropythonREADME
• TheLVGLmicropythonforum(Feelfreetoaskanything!)
• AtMicropython: docsandforum
3.4.2 Cpp
Inprogress: https://github.com/lvgl/lv_binding_cpp
3.4. Bindings 253


--- Page 258 ---


CHAPTER
FOUR
PORTING
4.1 Set up a project
4.1.1 Get the library
LVGLisavailableonGitHub: https://github.com/lvgl/lvgl.
YoucancloneitorDownloadthelatestversionofthelibraryfromGitHub.
4.1.2 Add lvgl to your project
Thegraphicslibraryitselfisthelvgldirectory. Itcontainsacoupleoffoldersbuttouselvglyouonlyneed.cand
.hfilesfromthesrcfolder.
Automaticallyaddfiles
IfyourIDEautomaticallyaddsthefilesfromthefolderscopiedtotheprojectfolder(asEclipseorVSCodedoes),you
cansimplycopythelvglfolderasitisintoyourproject.
MakeandCMake
LVGLalsosupportsmakeandCMakebuildsystemsoutofthebox. ToaddLVGLtoyourMakefilebasedbuildsystem
addtheselinestoyourmainMakefile:
LVGL_DIR_NAME ?= lvgl #The name of the lvgl folder (change this if you have␣
,→renamed it)
LVGL_DIR ?= ${shell pwd} #The path where the lvgl folder is
include $(LVGL_DIR)/$(LVGL_DIR_NAME)/lvgl.mk
ForintegrationwithCMaketakealookthissectionoftheDocumentation.
254


--- Page 259 ---


LVGLDocumentation8.3
Otherplatformsandtools
TheGetstartedsectioncontainsmanyplatformspecificdescriptionse.g. forESP32,Arduino,NXP,RT-Thread,NuttX,
etc.
DemosandExamples
Thelvglfolderalsocontainsanexamplesandademosfolder. Ifyouneededtoaddthesourcefilesmanuallyto
yourproject,youcandothesamewiththesourcefilesofthesetwofolderstoo. makeandCMakehandlestheexamples
anddemos,sonoextraactionrequiredinthesecases.
4.1.3 Configuration file
ThereisaconfigurationheaderfileforLVGLcalledlv_conf.h. Youmodifythisheadertosetthelibrary'sbasicbehavior,
disableunusedmodulesandfeatures,adjustthesizeofmemorybuffersincompile-time,etc.
Togetlv_conf.hcopylvgl/lv_conf_template.hnexttothelvgldirectoryandrenameittolv_conf.h. Openthefile
andchangethe#if 0atthebeginningto#if 1toenableitscontent. Sothelayoutofthefilesshouldlooklikethis:
|-lvgl
|-lv_conf.h
|-other files and folders
Commentsintheconfigfileexplainthemeaningoftheoptions. BesuretosetatleastLV_COLOR_DEPTHaccordingto
yourdisplay'scolordepth. Notethat,theexamplesanddemosexplicitlyneedtobeenabledinlv_conf.h.
Alternatively,lv_conf.hcanbecopiedtoanotherplacebutthenyoushouldaddtheLV_CONF_INCLUDE_SIMPLE
definetoyourcompileroptions(e.g. -DLV_CONF_INCLUDE_SIMPLEforGCCcompiler)andsettheincludepath
manually (e.g. -I../include/gui). In this case LVGL will attempt to include lv_conf.h simply with #in-
clude "lv_conf.h".
Youcanevenuseadifferentnameforlv_conf.h. ThecustompathcanbesetviatheLV_CONF_PATHdefine. For
example-DLV_CONF_PATH="/home/joe/my_project/my_custom_conf.h"
IfLV_CONF_SKIPisdefined,LVGLwillnottrytoincludelv_conf.h. Insteadyoucanpasstheconfigdefinesusing
buildoptions. Forexample"-DLV_COLOR_DEPTH=32 -DLV_USE_BTN=1". Theunsetoptionswillgetadefault
valuewhichisthesameastheonesinlv_conf_template.h.
LVGLalsocanbeusedviaKconfigandmenuconfig. Youcanuselv_conf.htogetherwithKconfig,butkeep
inmindthatthevaluefromlv_conf.horbuildsettings(-D...)overwritethevaluessetinKconfig. Toignorethe
configsfromlv_conf.hsimplyremoveitscontent,ordefineLV_CONF_SKIP.
4.1.4 Initialization
Tousethegraphicslibraryyouhavetoinitializeitandsetuprequiredcomponents. Theorderoftheinitializationis:
1. Calllv_init().
2. Initializeyourdrivers.
3. RegisterthedisplayandinputdevicesdriversinLVGL.LearnmoreaboutDisplayandInputdeviceregistration.
4. Calllv_tick_inc(x)everyxmillisecondsinaninterrupttoreporttheelapsedtimetoLVGL.Learnmore.
5. Calllv_timer_handler()everyfewmillisecondstohandleLVGLrelatedtasks. Learnmore.
4.1. Setupaproject 255


--- Page 260 ---


LVGLDocumentation8.3
4.2 Display interface
ToregisteradisplayforLVGL,alv_disp_draw_buf_tandalv_disp_drv_tvariablehavetobeinitialized.
• lv_disp_draw_buf_tcontainsinternalgraphicbuffer(s)calleddrawbuffer(s).
• lv_disp_drv_tcontainscallbackfunctionstointeractwiththedisplayandmanipulatelowleveldrawingbe-
havior.
4.2.1 Draw buffer
Drawbuffer(s)aresimplearray(s)thatLVGLusestorenderthescreencontent. Oncerenderingisreadythecontentof
thedrawbufferissenttothedisplayusingtheflush_cbfunctionsetinthedisplaydriver(seebelow).
Adrawbuffercanbeinitializedviaalv_disp_draw_buf_tvariablelikethis:
/*A static or global variable to store the buffers*/
static lv_disp_draw_buf_t disp_buf;
/*Static or global buffer(s). The second buffer is optional*/
static lv_color_t buf_1[MY_DISP_HOR_RES * 10];
static lv_color_t buf_2[MY_DISP_HOR_RES * 10];
/*Initialize `disp_buf` with the buffer(s). With only one buffer use NULL instead buf_
,→2 */
lv_disp_draw_buf_init(&disp_buf, buf_1, buf_2, MY_DISP_HOR_RES*10);
Note that lv_disp_draw_buf_t must be a static, global or dynamically allocated variable. It cannot be a local
variableastheyaredestroyeduponendofscope.
Asyoucanseeabove,thedrawbuffermaybesmallerthanthescreen. Inthiscase,largerareasareredrawninsmaller
segmentsthatfitintothedrawbuffer(s). Ifonlyasmallareachanges(e.g. abuttonispressed)thenonlythatareawillbe
refreshed.
A larger buffer results in better performance but above 1/10 screen sized buffer(s) there is no significant performance
improvement. Thereforeit'srecommendedtochoosethesizeofthedrawbuffer(s)tobeatleast1/10screensized.
4.2.2 Buffering modes
Thereareseveralsettingstoadjustthenumberdrawbuffersandbuffering/refreshingmodes.
Youcanmeasuretheperformanceofdifferentconfigurationsusingthebenchmarkexample.
Onebuffer
IfonlyonebufferisusedLVGLdrawsthecontentofthescreenintothatdrawbufferandsendsittothedisplay. LVGL
thenneedstowaituntilthecontentofthebufferissenttothedisplaybeforedrawingsomethingnewinit.
4.2. Displayinterface 256


--- Page 261 ---


LVGLDocumentation8.3
Twobuffers
IftwobuffersareusedLVGLcandrawintoonebufferwhilethecontentoftheotherbufferissenttothedisplayinthe
background. DMAorotherhardwareshouldbeusedtotransferdatatothedisplaysotheMCUcancontinuedrawing.
Thisway,therenderingandrefreshingofthedisplaybecomeparalleloperations.
Fullrefresh
Inthedisplaydriver(lv_disp_drv_t)enablingthefull_refreshbitwillforceLVGLtoalwaysredrawthewhole
screen. Thisworksinbothonebufferandtwobuffersmodes. Iffull_refreshisenabledandtwoscreensizeddraw
buffers are provided, LVGL's display handling works like "traditional" double buffering. This means the flush_cb
callback only has to update the address of the framebuffer (color_p parameter). This configuration should be used
if the MCU has an LCD controller peripheral and not with an external display controller (e.g. ILI9341 or SSD1963)
accessedviaseriallink. Thelatterwillgenerallybetooslowtomaintainhighframerateswithfullscreenredraws.
Directmode
Ifthedirect_modeflagisenabledinthedisplaydriverLVGLwilldrawdirectlyintoascreensizedframebuffer.
Thatisthedrawbuffer(s)needstobescreensized. Itthiscaseflush_cbwillbecalledonlyoncewhenalldirtyareas
areredrawn. Withdirect_modetheframebufferalwayscontainsthecurrentframeasitshouldbedisplayedonthe
screen. If2framebuffersareprovidedasdrawbuffersLVGLwillalterthebuffersbutalwaysdrawonlythedirtyareas.
Thereforethe2buffersneedstosynchronizedinflush_cblikethis:
1. Displaytheframebufferpointedbycolor_p
2. Copytheredrawnareasfromcolor_ptotheotherbuffer.
The get the redrawn areas to copy use the following functions _lv_refr_get_disp_refreshing() re-
turns the display being refreshed disp->inv_areas[LV_INV_BUF_SIZE] contains the invalidated areas
disp->inv_area_joined[LV_INV_BUF_SIZE] if 1 that area was joined into another one and should be ig-
noreddisp->inv_pnumberofvalidelementsininv_areas
4.2.3 Display driver
Oncethebufferinitializationisreadyalv_disp_drv_tdisplaydriverneedstobe:
1. initializedwithlv_disp_drv_init(&disp_drv)
2. itsfieldsneedtobeset
3. itneedstoberegisteredinLVGLwithlv_disp_drv_register(&disp_drv)
Notethatlv_disp_drv_talsoneedstobeastatic,globalordynamicallyallocatedvariable.
Mandatoryfields
Inthemostsimplecaseonlythefollowingfieldsoflv_disp_drv_tneedtobeset:
• draw_bufpointertoaninitializedlv_disp_draw_buf_tvariable.
• hor_reshorizontalresolutionofthedisplayinpixels.
• ver_resverticalresolutionofthedisplayinpixels.
4.2. Displayinterface 257


--- Page 262 ---


LVGLDocumentation8.3
• flush_cb a callback function to copy a buffer's content to a specific area of the display.
lv_disp_flush_ready(&disp_drv) needs to be called when flushing is ready. LVGL might ren-
derthescreeninmultiplechunksandthereforecallflush_cbmultipletimes. Toseeifthecurrentoneisthe
lastchunkofrenderinguselv_disp_flush_is_last(&disp_drv).
Optionalfields
Therearesomeoptionaldisplaydriverdatafields:
• physical_hor_reshorizontalresolutionofthefull/physicaldisplayinpixels. Onlysetthiswhennot using
thefullscreen(defaultsto-1/sameashor_res).
• physical_ver_resverticalresolutionofthefull/physicaldisplayinpixels. Onlysetthiswhennotusingthe
fullscreen(defaultsto-1/sameasver_res).
• offset_xhorizontaloffsetfromthefull/physicaldisplayinpixels. Onlysetthiswhennotusingthefullscreen
(defaultsto0).
• offset_yverticaloffsetfromthefull/physicaldisplayinpixels. Onlysetthiswhennot usingthefullscreen
(defaultsto0).
• color_chroma_key A color which will be drawn as transparent on chrome keyed images. Set to
LV_COLOR_CHROMA_KEYfromlv_conf.hbydefault.
• anti_aliasinguseanti-aliasing(edgesmoothing). EnabledbydefaultifLV_COLOR_DEPTHissettoatleast
16inlv_conf.h.
• rotatedandsw_rotateSeetheRotationsectionbelow.
• screen_transp if 1 thescreen itself canhave transparency as well. LV_COLOR_SCREEN_TRANSP must
beenabledinlv_conf.handLV_COLOR_DEPTHmustbe32.
• user_dataAcustomvoiduserdataforthedriver.
• full_refreshalwaysredrawnthewholescreen(seeabove)
• direct_modedrawdirectlyintotheframebuffer(seeabove)
Some other optional callbacks to make it easier and more optimal to work with monochrome, grayscale or other non-
standardRGBdisplays:
• rounder_cbRoundthecoordinatesofareastoredraw. E.g. a2x2pxcanbeconvertedto2x8. Itcanbeused
ifthedisplaycontrollercanrefreshonlyareaswithspecificheightorwidth(usually8pxheightwithmonochrome
displays).
• set_px_cbacustomfunctiontowritethedrawbuffer. Itcanbeusedtostorethepixelsmorecompactlyinthe
drawbufferifthedisplayhasaspecialcolorformat. (e.g. 1-bitmonochrome,2-bitgrayscaleetc.) Thiswaythe
buffersusedinlv_disp_draw_buf_tcanbesmallertoholdonlytherequirednumberofbitsforthegiven
areasize. Notethatrenderingwithset_px_cbisslowerthannormalrendering.
• monitor_cbAcallbackfunctionthattellshowmanypixelswererefreshedandinhowmuchtime. Calledwhen
thelastchunkisrenderedandsenttothedisplay.
• clean_dcache_cbAcallbackforcleaninganycachesrelatedtothedisplay.
• render_start_cbAcallbackfunctionthatnotifiesthedisplaydriverthatrenderinghasstarted. Italsocould
beusedtowaitforVSYNCtostartrendering. It'susefulifrenderingisfasterthanaVSYNCperiod.
LVGLhasbuilt-insupporttoseveralGPUs(seelv_conf.h)butifsomethingelseisrequiredthesefunctionscanbe
usedtomakeLVGLuseaGPU:
• gpu_fill_cbfillanareainthememorywithacolor.
4.2. Displayinterface 258


--- Page 263 ---


LVGLDocumentation8.3
• gpu_wait_cbifanyGPUfunctionreturnswhiletheGPUisstillworking,LVGL willusethisfunctionwhen
requiredtomakesureGPUrenderingisready.
Examples
Alltogetheritlookslikethis:
static lv_disp_drv_t disp_drv; /*A variable to hold the drivers. Must be␣
,→static or global.*/
lv_disp_drv_init(&disp_drv); /*Basic initialization*/
disp_drv.draw_buf = &disp_buf; /*Set an initialized buffer*/
disp_drv.flush_cb = my_flush_cb; /*Set a flush callback to draw to the␣
,→display*/
disp_drv.hor_res = 320; /*Set the horizontal resolution in pixels*/
disp_drv.ver_res = 240; /*Set the vertical resolution in pixels*/
lv_disp_t * disp;
disp = lv_disp_drv_register(&disp_drv); /*Register the driver and save the created␣
,→display objects*/
Herearesomesimpleexamplesofthecallbacks:
void my_flush_cb(lv_disp_drv_t * disp_drv, const lv_area_t * area, lv_color_t * color_
,→p)
{
/*The most simple case (but also the slowest) to put all pixels to the screen one-
,→by-one
*`put_px` is just an example, it needs to implemented by you.*/
int32_t x, y;
for(y = area->y1; y <= area->y2; y++) {
for(x = area->x1; x <= area->x2; x++) {
put_px(x, y, *color_p);
color_p++;
}
}
/* IMPORTANT!!!
* Inform the graphics library that you are ready with the flushing*/
lv_disp_flush_ready(disp_drv);
}
void my_gpu_fill_cb(lv_disp_drv_t * disp_drv, lv_color_t * dest_buf, const lv_area_t␣
,→* dest_area, const lv_area_t * fill_area, lv_color_t color);
{
/*It's an example code which should be done by your GPU*/
uint32_t x, y;
dest_buf += dest_width * fill_area->y1; /*Go to the first line*/
for(y = fill_area->y1; y < fill_area->y2; y++) {
for(x = fill_area->x1; x < fill_area->x2; x++) {
dest_buf[x] = color;
}
dest_buf+=dest_width; /*Go to the next line*/
}
}
(continuesonnextpage)
4.2. Displayinterface 259


--- Page 264 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
void my_rounder_cb(lv_disp_drv_t * disp_drv, lv_area_t * area)
{
/* Update the areas as needed.
* For example it makes the area to start only on 8th rows and have Nx8 pixel␣
,→height.*/
area->y1 = area->y1 & 0x07;
area->y2 = (area->y2 & 0x07) + 8;
}
void my_set_px_cb(lv_disp_drv_t * disp_drv, uint8_t * buf, lv_coord_t buf_w, lv_coord_
,→t x, lv_coord_t y, lv_color_t color, lv_opa_t opa)
{
/* Write to the buffer as required for the display.
* For example it writes only 1-bit for monochrome displays mapped vertically.*/
buf += buf_w * (y >> 3) + x;
if(lv_color_brightness(color) > 128) (*buf) |= (1 << (y % 8));
else (*buf) &= ~(1 << (y % 8));
}
void my_monitor_cb(lv_disp_drv_t * disp_drv, uint32_t time, uint32_t px)
{
printf("%d px refreshed in %d ms\n", time, ms);
}
void my_clean_dcache_cb(lv_disp_drv_t * disp_drv, uint32)
{
/* Example for Cortex-M (CMSIS) */
SCB_CleanInvalidateDCache();
}
4.2.4 Other options
Rotation
LVGLsupportsrotationofthedisplayin90degreeincrements. Youcanselectwhetheryou'dlikesoftwarerotationor
hardwarerotation.
Ifyouselectsoftwarerotation(sw_rotateflagsetto1),LVGLwillperformtherotationforyou. Yourdrivercanand
shouldassumethatthescreenwidthandheighthavenotchanged. Simplyflushpixelstothedisplayasnormal. Software
rotationrequiresnoadditionallogicinyourflush_cbcallback.
There is a noticeable amount of overhead to performing rotation in software. Hardware rotation is available to avoid
unwantedslowdowns. Inthismode,LVGLdrawsintothebufferasifyourscreenwidthandheightwereswapped. You
areresponsibleforrotatingtheprovidedpixelsyourself.
Thedefaultrotationofyourdisplaywhenitisinitializedcanbesetusingtherotatedflag. Theavailableoptionsare
LV_DISP_ROT_NONE,LV_DISP_ROT_90,LV_DISP_ROT_180,orLV_DISP_ROT_270. Therotationvalues
arerelativetohowyouwouldrotatethephysicaldisplayintheclockwisedirection. Thus,LV_DISP_ROT_90means
yourotatethehardware90degreesclockwise,andthedisplayrotates90degreescounterclockwisetocompensate.
(Noteforusersupgradingfrom7.10.0andolder: thesenewrotationenumvaluesmatchupwiththeold0/1systemfor
rotating90degrees,solegacycodeshouldcontinuetoworkasexpected. Softwarerotationisalsodisabledbydefaultfor
compatibility.)
Displayrotationcanalsobechangedatruntimeusingthelv_disp_set_rotation(disp, rot)API.
4.2. Displayinterface 260


--- Page 265 ---


LVGLDocumentation8.3
Ifyouenablerotationthecoordinatesofthepointerinputdevices(e.g. touchpad)willberotatedtoo.
Note that when using software rotation, you cannot use neither direct_mode nor full_refresh in the driver.
Whenusingeitherofthese,youwillhavetorotatethepixelsyourselfe.g. intheflush_cb.
Supportforsoftwarerotationisanewfeature,sotheremaybesomeglitches/bugsdependingonyourconfiguration. If
youencounteraproblempleaseopenanissueonGitHub.
Decouplingthedisplayrefreshtimer
Normallythedirty(a.k.ainvalid)areasarecheckedandredrawnineveryLV_DISP_DEF_REFR_PERIODmilliseconds
(setinlv_conf.h). However,insomecasesyoumightneedmorecontrolonwhenthedisplayrefreshinghappen,for
exampletosynchronizerenderingwithVSYNCortheTEsignal.
Youcandothisinthefollowingway:
/*Delete the original display refresh timer*/
lv_timer_del(disp->refr_timer);
disp->refr_timer = NULL;
/*Call this anywhere you want to refresh the dirty areas*/
_lv_disp_refr_timer(NULL);
If you have multiple displays call lv_disp_set_deafult(disp1); to select the display to refresh before
_lv_disp_refr_timer(NULL);.
Notethatlv_timer_handler()and_lv_disp_refr_timer()cannotrunatthesametime.
Iftheperformancemonitorisenabled,thevalueofLV_DISP_DEF_REFR_PERIODneedstobesettobeconsistent
withtherefreshperiodofthedisplaytoensurethatthestatisticalresultsarecorrect.
4.2.5 Further reading
• lv_port_disp_template.cforatemplateforyourowndriver.
• DrawingtolearnmoreabouthowrenderingworksinLVGL.
• Displayfeaturestolearnmoreabouthigherleveldisplayfeatures.
4.2.6 API
@descriptionDisplayDriverHALinterfaceheaderfile
Typedefs
typedefstruct_lv_disp_draw_buf_tlv_disp_draw_buf_t
Structureforholdingdisplaybufferinformation.
typedefstruct_lv_disp_drv_tlv_disp_drv_t
DisplayDriverstructuretoberegisteredbyHAL.Onlyitspointerwillbesavedinlv_disp_tsoitshouldbe
declaredasstatic lv_disp_drv_t my_drvorallocateddynamically.
4.2. Displayinterface 261


--- Page 266 ---


LVGLDocumentation8.3
typedefstruct_lv_disp_tlv_disp_t
Displaystructure.
Note: lv_disp_drv_tshouldbethefirstmemberofthestructure.
Enums
enumlv_disp_rot_t
Values:
enumeratorLV_DISP_ROT_NONE
enumeratorLV_DISP_ROT_90
enumeratorLV_DISP_ROT_180
enumeratorLV_DISP_ROT_270
Functions
voidlv_disp_drv_init(lv_disp_drv_t*driver)
Initializeadisplaydriverwithdefaultvalues. Itisusedtohaveknownvaluesinthefieldsandnotjunkinmemory.
Afterityoucansafelysetonlythefieldsyouneed.
Parameters driver--pointertodrivervariabletoinitialize
voidlv_disp_draw_buf_init(lv_disp_draw_buf_t*draw_buf,void*buf1,void*buf2,uint32_t
size_in_px_cnt)
Initializeadisplaybuffer
Parameters
• draw_buf--pointerlv_disp_draw_buf_tvariabletoinitialize
• buf1 -- A buffer to be used by LVGL to draw the image. Always has to specified and
can't be NULL. Can be an array allocated by the user. E.g. static lv_color_t
disp_buf1[1024 * 10]Oramemoryaddresse.g. inexternalSRAM
• buf2--Optionallyspecifyasecondbuffertomakeimagerenderingandimageflushing(send-
ingtothedisplay)parallel. Inthedisp_drv->flushyoushoulduseDMAorsimilarhard-
waretosendtheimagetothedisplayinthebackground. ItletsLVGLtorendernextframe
intotheotherbufferwhilepreviousisbeingsent. SettoNULLifunused.
• size_in_px_cnt--sizeofthebuf1andbuf2inpixelcount.
lv_disp_t*lv_disp_drv_register(lv_disp_drv_t*driver)
Registeraninitializeddisplaydriver. Automaticallysetthefirstdisplayasactive.
Parameters driver--pointertoaninitialized'lv_disp_drv_t'variable. Onlyitspointerissaved!
Returns pointertothenewdisplayorNULLonerror
4.2. Displayinterface 262


--- Page 267 ---


LVGLDocumentation8.3
voidlv_disp_drv_update(lv_disp_t*disp,lv_disp_drv_t*new_drv)
Updatethedriverinruntime.
Parameters
• disp--pointertoadisplay. (returnvalueoflv_disp_drv_register)
• new_drv--pointertothenewdriver
voidlv_disp_remove(lv_disp_t*disp)
Removeadisplay
Parameters disp--pointertodisplay
voidlv_disp_set_default(lv_disp_t*disp)
Setadefaultdisplay. Thenewscreenswillbecreatedonitbydefault.
Parameters disp--pointertoadisplay
lv_disp_t*lv_disp_get_default(void)
Getthedefaultdisplay
Returns pointertothedefaultdisplay
lv_coord_tlv_disp_get_hor_res(lv_disp_t*disp)
Getthehorizontalresolutionofadisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns thehorizontalresolutionofthedisplay
lv_coord_tlv_disp_get_ver_res(lv_disp_t*disp)
Gettheverticalresolutionofadisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns theverticalresolutionofthedisplay
lv_coord_tlv_disp_get_physical_hor_res(lv_disp_t*disp)
Getthefull/physicalhorizontalresolutionofadisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns thefull/physicalhorizontalresolutionofthedisplay
lv_coord_tlv_disp_get_physical_ver_res(lv_disp_t*disp)
Getthefull/physicalverticalresolutionofadisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns thefull/physicalverticalresolutionofthedisplay
lv_coord_tlv_disp_get_offset_x(lv_disp_t*disp)
Getthehorizontaloffsetfromthefull/physicaldisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns thehorizontaloffsetfromthefull/physicaldisplay
lv_coord_tlv_disp_get_offset_y(lv_disp_t*disp)
Gettheverticaloffsetfromthefull/physicaldisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns thehorizontaloffsetfromthefull/physicaldisplay
4.2. Displayinterface 263


--- Page 268 ---


LVGLDocumentation8.3
boollv_disp_get_antialiasing(lv_disp_t*disp)
Getifanti-aliasingisenabledforadisplayornot
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns true: anti-aliasingisenabled;false: disabled
lv_coord_tlv_disp_get_dpi(constlv_disp_t*disp)
GettheDPIofthedisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns dpiofthedisplay
voidlv_disp_set_rotation(lv_disp_t*disp,lv_disp_rot_trotation)
Settherotationofthisdisplay.
Parameters
• disp--pointertoadisplay(NULLtousethedefaultdisplay)
• rotation--rotationangle
lv_disp_rot_tlv_disp_get_rotation(lv_disp_t*disp)
Getthecurrentrotationofthisdisplay.
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns rotationangle
lv_disp_t*lv_disp_get_next(lv_disp_t*disp)
Getthenextdisplay.
Parameters disp--pointertothecurrentdisplay. NULLtoinitialize.
Returns thenextdisplayorNULLifnomore. GivethefirstdisplaywhentheparameterisNULL
lv_disp_draw_buf_t*lv_disp_get_draw_buf(lv_disp_t*disp)
Gettheinternalbufferofadisplay
Parameters disp--pointertoadisplay
Returns pointertotheinternalbuffers
voidlv_disp_drv_use_generic_set_px_cb(lv_disp_drv_t*disp_drv,lv_img_cf_tcf)
struct_lv_disp_draw_buf_t
#include<lv_hal_disp.h>Structureforholdingdisplaybufferinformation.
PublicMembers
void*buf1
Firstdisplaybuffer.
void*buf2
Seconddisplaybuffer.
void*buf_act
4.2. Displayinterface 264


--- Page 269 ---


LVGLDocumentation8.3
uint32_tsize
intflushing
intflushing_last
uint32_tlast_area
uint32_tlast_part
struct_lv_disp_drv_t
#include <lv_hal_disp.h> Display Driver structure to be registered by HAL. Only its pointer will be saved in
lv_disp_tsoitshouldbedeclaredasstatic lv_disp_drv_t my_drvorallocateddynamically.
PublicMembers
lv_coord_thor_res
Horizontalresolution.
lv_coord_tver_res
Verticalresolution.
lv_coord_tphysical_hor_res
Horizontalresolutionofthefull/physicaldisplay. Setto-1forfullscreenmode.
lv_coord_tphysical_ver_res
Verticalresolutionofthefull/physicaldisplay. Setto-1forfullscreenmode.
lv_coord_toffset_x
Horizontaloffsetfromthefull/physicaldisplay. Setto0forfullscreenmode.
lv_coord_toffset_y
Verticaloffsetfromthefull/physicaldisplay. Setto0forfullscreenmode.
lv_disp_draw_buf_t*draw_buf
Pointertoabufferinitializedwithlv_disp_draw_buf_init(). LVGLwillusethisbuffer(s)todraw
thescreenscontents
uint32_tdirect_mode
1: Usescreen-sizedbuffersanddrawtoabsolutecoordinates
uint32_tfull_refresh
1: Alwaysmakethewholescreenredrawn
4.2. Displayinterface 265


--- Page 270 ---


LVGLDocumentation8.3
uint32_tsw_rotate
1: usesoftwarerotation(slower)
uint32_tantialiasing
1: anti-aliasingisenabledonthisdisplay.
uint32_trotated
1: turnthedisplayby90degree.
Warning: Doesnotupdatecoordinatesforyou!
uint32_tscreen_transp
uint32_tdpi
Handle if the screen doesn't have a solid (opa == LV_OPA_COVER) background. Use only if required
becauseit'sslower.
void(*flush_cb)(struct_lv_disp_drv_t*disp_drv,constlv_area_t*area,lv_color_t*color_p)
DPI(dotperinch)ofthedisplay. DefaultvalueisLV_DPI_DEF.MANDATORY:Writetheinternalbuffer
(draw_buf)tothedisplay. 'lv_disp_flush_ready()'hastobecalledwhenfinished
void(*rounder_cb)(struct_lv_disp_drv_t*disp_drv,lv_area_t*area)
OPTIONAL:ExtendtheinvalidatedareastomatchwiththedisplaydriversrequirementsE.g. roundyto,8,
16..) onamonochromedisplay
void(*set_px_cb)(struct_lv_disp_drv_t*disp_drv,uint8_t*buf,lv_coord_tbuf_w,lv_coord_tx,lv_coord_t
y,lv_color_tcolor,lv_opa_topa)
OPTIONAL:SetapixelinabufferaccordingtothespecialrequirementsofthedisplayCanbeusedforcolor
formatnotsupportedinLittelvGL.E.g. 2bit->4grayscales
Note: Muchslowerthendrawingwithsupportedcolorformats.
void(*clear_cb)(struct_lv_disp_drv_t*disp_drv,uint8_t*buf,uint32_tsize)
void(*monitor_cb)(struct_lv_disp_drv_t*disp_drv,uint32_ttime,uint32_tpx)
OPTIONAL:Calledaftereveryrefreshcycletotelltherenderingandflushingtime+thenumberofflushed
pixels
void(*wait_cb)(struct_lv_disp_drv_t*disp_drv)
OPTIONAL: Called periodically while lvgl waits for operation to be completed. For example flushing or
GPUUsercanexecuteverysimpletaskshereoryieldthetask
void(*clean_dcache_cb)(struct_lv_disp_drv_t*disp_drv)
OPTIONAL:CalledwhenlvglneedsanyCPUcachethataffectsrenderingtobecleaned
4.2. Displayinterface 266


--- Page 271 ---


LVGLDocumentation8.3
void(*drv_update_cb)(struct_lv_disp_drv_t*disp_drv)
OPTIONAL:calledwhendriverparametersareupdated
void(*render_start_cb)(struct_lv_disp_drv_t*disp_drv)
OPTIONAL:calledwhenstartrendering
lv_color_tcolor_chroma_key
On CHROMA_KEYED images this color will be transparent. LV_COLOR_CHROMA_KEY by default.
(lv_conf.h)
lv_draw_ctx_t*draw_ctx
void(*draw_ctx_init)(struct_lv_disp_drv_t*disp_drv,lv_draw_ctx_t*draw_ctx)
void(*draw_ctx_deinit)(struct_lv_disp_drv_t*disp_drv,lv_draw_ctx_t*draw_ctx)
size_tdraw_ctx_size
void*user_data
Customdisplaydriveruserdata
struct_lv_disp_t
#include<lv_hal_disp.h>Displaystructure.
Note: lv_disp_drv_tshouldbethefirstmemberofthestructure.
PublicMembers
struct_lv_disp_drv_t*driver
<DrivertothedisplayAtimerwhichperiodicallychecksthedirtyareasandrefreshesthem
lv_timer_t*refr_timer
Thethemeassignedtothescreen
struct_lv_theme_t*theme
struct_lv_obj_t**screens
ScreensofthedisplayArrayofscreenobjects.
struct_lv_obj_t*act_scr
Currentlyactivescreenonthisdisplay
4.2. Displayinterface 267


--- Page 272 ---


LVGLDocumentation8.3
struct_lv_obj_t*prev_scr
Previousscreen. Usedduringscreenanimations
struct_lv_obj_t*scr_to_load
Thescreenpreparedtoloadinlv_scr_load_anim
struct_lv_obj_t*top_layer
See lv_disp_get_layer_top
struct_lv_obj_t*sys_layer
See lv_disp_get_layer_sys
uint32_tscreen_cnt
uint8_tdraw_prev_over_act
1: Drawpreviousscreenoveractivescreen
uint8_tdel_prev
1: Automaticallydeletethepreviousscreenwhenthescreenloadanim. isready
uint8_trendering_in_progress
1: Thecurrentscreenrenderingisinprogress
lv_opa_tbg_opa
Opacityofthebackgroundcolororwallpaper
lv_color_tbg_color
Defaultdisplaycolorwhenscreensaretransparent
constvoid*bg_img
Animagesourcetodisplayaswallpaper
lv_area_tinv_areas[LV_INV_BUF_SIZE]
Invalidated(markedtoredraw)areas
uint8_tinv_area_joined[LV_INV_BUF_SIZE]
uint16_tinv_p
int32_tinv_en_cnt
lv_ll_tsync_areas
Doublebuffersyncareas
4.2. Displayinterface 268


--- Page 273 ---


LVGLDocumentation8.3
uint32_tlast_activity_time
Lasttimewhentherewasactivityonthisdisplay
4.3 Input device interface
4.3.1 Types of input devices
Toregisteraninputdeviceanlv_indev_drv_tvariablehastobeinitialized. Besuretoregisteratleastonedisplay
beforeyouregisteranyinputdevices.
/*Register at least one display before you register any input devices*/
lv_disp_drv_register(&disp_drv);
static lv_indev_drv_t indev_drv;
lv_indev_drv_init(&indev_drv); /*Basic initialization*/
indev_drv.type =... /*See below.*/
indev_drv.read_cb =... /*See below.*/
/*Register the driver in LVGL and save the created input device object*/
lv_indev_t * my_indev = lv_indev_drv_register(&indev_drv);
Thetypemembercanbe:
• LV_INDEV_TYPE_POINTERtouchpadormouse
• LV_INDEV_TYPE_KEYPADkeyboardorkeypad
• LV_INDEV_TYPE_ENCODERencoderwithleft/rightturnandpushoptions
• LV_INDEV_TYPE_BUTTONexternalbuttonsvirtuallypressingthescreen
read_cbisafunctionpointerwhichwillbecalledperiodicallytoreportthecurrentstateofaninputdevice.
VisitInputdevicestolearnmoreaboutinputdevicesingeneral.
Touchpad,mouseoranypointer
Inputdevicesthatcanclickpointsonthescreenbelongtothiscategory.
indev_drv.type = LV_INDEV_TYPE_POINTER;
indev_drv.read_cb = my_input_read;
...
void my_input_read(lv_indev_drv_t * drv, lv_indev_data_t*data)
{
if(touchpad_pressed) {
data->point.x = touchpad_x;
data->point.y = touchpad_y;
data->state = LV_INDEV_STATE_PRESSED;
} else {
data->state = LV_INDEV_STATE_RELEASED;
}
}
Tosetamousecursoruselv_indev_set_cursor(my_indev, &img_cursor). (my_indevisthereturn
valueoflv_indev_drv_register)
4.3. Inputdeviceinterface 269


--- Page 274 ---


LVGLDocumentation8.3
Keypadorkeyboard
Fullkeyboardswithallthelettersorsimplekeypadswithafewnavigationbuttonsbelonghere.
Touseakeyboard/keypad:
• Registeraread_cbfunctionwithLV_INDEV_TYPE_KEYPADtype.
• An object group has to be created: lv_group_t * g = lv_group_create() and objects have to be
addedtoitwithlv_group_add_obj(g, obj)
• The created group has to be assigned to an input device: lv_indev_set_group(my_indev, g)
(my_indevisthereturnvalueoflv_indev_drv_register)
• UseLV_KEY_...tonavigateamongtheobjectsinthegroup. Seelv_core/lv_group.hfortheavailable
keys.
indev_drv.type = LV_INDEV_TYPE_KEYPAD;
indev_drv.read_cb = keyboard_read;
...
void keyboard_read(lv_indev_drv_t * drv, lv_indev_data_t*data){
data->key = last_key(); /*Get the last pressed or released key*/
if(key_pressed()) data->state = LV_INDEV_STATE_PRESSED;
else data->state = LV_INDEV_STATE_RELEASED;
}
Encoder
Withanencoderyoucandothefollowing:
1. Pressitsbutton
2. Long-pressitsbutton
3. Turnleft
4. Turnright
Inshort,theEncoderinputdevicesworklikethis:
• Byturningtheencoderyoucanfocusonthenext/previousobject.
• Whenyoupresstheencoderonasimpleobject(likeabutton),itwillbeclicked.
• Ifyoupresstheencoderonacomplexobject(likealist,messagebox,etc.) theobjectwillgotoeditmodewhereby
youcannavigateinsidetheobjectbyturningtheencoder.
• Toleaveeditmode,longpressthebutton.
TouseanEncoder(similarlytotheKeypads)theobjectsshouldbeaddedtogroups.
indev_drv.type = LV_INDEV_TYPE_ENCODER;
indev_drv.read_cb = encoder_read;
...
void encoder_read(lv_indev_drv_t * drv, lv_indev_data_t*data){
data->enc_diff = enc_get_new_moves();
(continuesonnextpage)
4.3. Inputdeviceinterface 270


--- Page 275 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
if(enc_pressed()) data->state = LV_INDEV_STATE_PRESSED;
else data->state = LV_INDEV_STATE_RELEASED;
}
UsingbuttonswithEncoderlogic
Inadditiontostandardencoderbehavior,youcanalsoutilizeitslogictonavigate(focus)andeditwidgetsusingbuttons.
Thisisespeciallyhandyifyouhaveonlyfewbuttonsavailable,oryouwanttouseotherbuttonsinadditiontoencoder
wheel.
Youneedtohave3buttonsavailable:
• LV_KEY_ENTERwillsimulatepressorpushingoftheencoderbutton
• LV_KEY_LEFTwillsimulateturningencoderleft
• LV_KEY_RIGHTwillsimulateturningencoderright
• otherkeyswillbepassedtothefocusedwidget
If you hold the keys it will simulate an encoder advance with period specified in indev_drv.
long_press_repeat_time.
indev_drv.type = LV_INDEV_TYPE_ENCODER;
indev_drv.read_cb = encoder_with_keys_read;
...
void encoder_with_keys_read(lv_indev_drv_t * drv, lv_indev_data_t*data){
data->key = last_key(); /*Get the last pressed or released key*/
/* use LV_KEY_ENTER for encoder press */
if(key_pressed()) data->state = LV_INDEV_STATE_PRESSED;
else {
data->state = LV_INDEV_STATE_RELEASED;
/* Optionally you can also use enc_diff, if you have encoder*/
data->enc_diff = enc_get_new_moves();
}
}
Button
Buttonsmeanexternal"hardware"buttonsnexttothescreenwhichareassignedtospecificcoordinatesofthescreen. If
abuttonispresseditwillsimulatethepressingontheassignedcoordinate. (Similarlytoatouchpad)
To assign buttons to coordinates use lv_indev_set_button_points(my_indev, points_array).
points_array should look like const lv_point_t points_array[] = { {12,30},{60,90},
...}
Important: Thepoints_arraycan'tgooutofscope. Eitherdeclareitasaglobalvariableorasastaticvariableinsidea
function.
4.3. Inputdeviceinterface 271


--- Page 276 ---


LVGLDocumentation8.3
indev_drv.type = LV_INDEV_TYPE_BUTTON;
indev_drv.read_cb = button_read;
...
void button_read(lv_indev_drv_t * drv, lv_indev_data_t*data){
static uint32_t last_btn = 0; /*Store the last pressed button*/
int btn_pr = my_btn_read(); /*Get the ID (0,1,2...) of the pressed button*/
if(btn_pr >= 0) { /*Is there a button press? (E.g. -1 indicated no␣
,→button was pressed)*/
last_btn = btn_pr; /*Save the ID of the pressed button*/
data->state = LV_INDEV_STATE_PRESSED; /*Set the pressed state*/
} else {
data->state = LV_INDEV_STATE_RELEASED; /*Set the released state*/
}
data->btn = last_btn; /*Save the last button*/
}
4.3.2 Other features
Parameters
Thedefaultvalueofthefollowingparameterscanbechangedinlv_indev_drv_t:
• scroll_limitNumberofpixelstoslidebeforeactuallyscrollingtheobject.
• scroll_throwScrollthrow(momentum)slow-downin[%]. Greatervaluemeansfasterslow-down.
• long_press_timePresstimetosendLV_EVENT_LONG_PRESSED(inmilliseconds)
• long_press_repeat_timeIntervalofsendingLV_EVENT_LONG_PRESSED_REPEAT(inmilliseconds)
• read_timer pointer to the lv_timer which reads the input device. Its parameters can be changed by
lv_timer_...() functions. LV_INDEV_DEF_READ_PERIOD in lv_conf.h sets the default read pe-
riod.
Feedback
Besidesread_cbafeedback_cbcallbackcanbealsospecifiedinlv_indev_drv_t. feedback_cbiscalled
whenanytypeofeventissentbytheinputdevices(independentlyofitstype). Thisallowsgeneratingfeedbackforthe
user,e.g. toplayasoundonLV_EVENT_CLICKED.
Associatingwithadisplay
Every input device is associated with a display. By default, a new input device is added to the last display created or
explicitlyselected(usinglv_disp_set_default()). Theassociateddisplayisstoredandcanbechangedindisp
fieldofthedriver.
4.3. Inputdeviceinterface 272


--- Page 277 ---


LVGLDocumentation8.3
Bufferedreading
By default, LVGL calls read_cb periodically. Because of this intermittent polling there is a chance that some user
gesturesaremissed.
Tosolvethisyoucanwriteaneventdrivendriverforyourinputdevicethatbuffersmeasureddata. Inread_cbyoucan
reportthebuffereddatainsteadofdirectlyreadingtheinputdevice. Settingthedata->continue_reading flag
willtellLVGLthereismoredatatoreadanditshouldcallread_cbagain.
4.3.3 Further reading
• lv_port_indev_template.cforatemplateforyourowndriver.
• INdevfeaturestolearnmoreabouthigherlevelinputdevicefeatures.
4.3.4 API
@descriptionInputDeviceHALinterfacelayerheaderfile
Typedefs
typedefstruct_lv_indev_drv_tlv_indev_drv_t
Initializedbytheuserandregisteredby'lv_indev_add()'
typedefstruct_lv_indev_proc_t_lv_indev_proc_t
RuntimedataofinputdevicesInternallyusedbythelibrary,youshouldnotneedtotouchit.
typedefstruct_lv_indev_tlv_indev_t
Themaininputdevicedescriptorwithdriver,runtimedata('proc')andsomeadditionalinformation
Enums
enumlv_indev_type_t
Possibleinputdevicetypes
Values:
enumeratorLV_INDEV_TYPE_NONE
Uninitializedstate
enumeratorLV_INDEV_TYPE_POINTER
Touchpad,mouse,externalbutton
enumeratorLV_INDEV_TYPE_KEYPAD
Keypadorkeyboard
4.3. Inputdeviceinterface 273


--- Page 278 ---


LVGLDocumentation8.3
enumeratorLV_INDEV_TYPE_BUTTON
External(hardwarebutton)whichisassignedtoaspecificpointofthescreen
enumeratorLV_INDEV_TYPE_ENCODER
EncoderwithonlyLeft,RightturnandaButton
enumlv_indev_state_t
Statesforinputdevices
Values:
enumeratorLV_INDEV_STATE_RELEASED
enumeratorLV_INDEV_STATE_PRESSED
Functions
voidlv_indev_drv_init(struct_lv_indev_drv_t*driver)
Initialize an input device driver with default values. It is used to surely have known values in the fields and not
memoryjunk. Afterityoucansetthefields.
Parameters driver--pointertodrivervariabletoinitialize
lv_indev_t*lv_indev_drv_register(struct_lv_indev_drv_t*driver)
Registeraninitializedinputdevicedriver.
Parameters driver--pointertoaninitialized'lv_indev_drv_t'variable(canbelocalvariable)
Returns pointertothenewinputdeviceorNULLonerror
voidlv_indev_drv_update(lv_indev_t*indev,struct_lv_indev_drv_t*new_drv)
Updatethedriverinruntime.
Parameters
• indev--pointertoaninputdevice. (returnvalueoflv_indev_drv_register)
• new_drv--pointertothenewdriver
voidlv_indev_delete(lv_indev_t*indev)
Removetheprovidedinputdevice. Makesurenottousetheprovidedinputdeviceafterwardsanymore.
Parameters indev--pointertodelete
lv_indev_t*lv_indev_get_next(lv_indev_t*indev)
Getthenextinputdevice.
Parameters indev--pointertothecurrentinputdevice. NULLtoinitialize.
Returns thenextinputdeviceorNULLiftherearenomore. Providethefirstinputdevicewhenthe
parameterisNULL
void_lv_indev_read(lv_indev_t*indev,lv_indev_data_t*data)
Readdatafromaninputdevice.
Parameters
4.3. Inputdeviceinterface 274


--- Page 279 ---


LVGLDocumentation8.3
• indev--pointertoaninputdevice
• data--inputdevicewillwriteitsdatahere
structlv_indev_data_t
#include<lv_hal_indev.h>Datastructurepassedtoaninputdrivertofill
PublicMembers
lv_point_tpoint
ForLV_INDEV_TYPE_POINTERthecurrentlypressedpoint
uint32_tkey
ForLV_INDEV_TYPE_KEYPADthecurrentlypressedkey
uint32_tbtn_id
ForLV_INDEV_TYPE_BUTTONthecurrentlypressedbutton
int16_tenc_diff
ForLV_INDEV_TYPE_ENCODERnumberofstepssincethepreviousread
lv_indev_state_tstate
LV_INDEV_STATE_RELorLV_INDEV_STATE_PR
boolcontinue_reading
Ifsettotrue,thereadcallbackisinvokedagain
struct_lv_indev_drv_t
#include<lv_hal_indev.h>Initializedbytheuserandregisteredby'lv_indev_add()'
PublicMembers
lv_indev_type_ttype
<InputdevicetypeFunctionpointertoreadinputdevicedata.
void(*read_cb)(struct_lv_indev_drv_t*indev_drv,lv_indev_data_t*data)
void(*feedback_cb)(struct_lv_indev_drv_t*,uint8_t)
Calledwhenanactionhappenedontheinputdevice. Thesecondparameteristheeventfromlv_event_t
void*user_data
struct_lv_disp_t*disp
<PointertotheassigneddisplayTimertoperiodicallyreadtheinputdevice
4.3. Inputdeviceinterface 275


--- Page 280 ---


LVGLDocumentation8.3
lv_timer_t*read_timer
Numberofpixelstoslidebeforeactuallydragtheobject
uint8_tscroll_limit
Dragthrowslow-downin[%]. Greatervaluemeansfasterslow-down
uint8_tscroll_throw
Atleastthisdifferenceshouldbebetweentwopointstoevaluateasgesture
uint8_tgesture_min_velocity
Atleastthisdifferenceshouldbetosendagesture
uint8_tgesture_limit
Longpresstimeinmilliseconds
uint16_tlong_press_time
Repeatedtriggerperiodinlongpress[ms]
uint16_tlong_press_repeat_time
struct_lv_indev_proc_t
#include<lv_hal_indev.h>RuntimedataofinputdevicesInternallyusedbythelibrary, youshouldnotneedto
touchit.
PublicMembers
lv_indev_state_tstate
Currentstateoftheinputdevice.
uint8_tlong_pr_sent
uint8_treset_query
uint8_tdisabled
uint8_twait_until_release
lv_point_tact_point
Currentpointofinputdevice.
lv_point_tindev_point
lv_point_tlast_point
Lastpointofinputdevice.
4.3. Inputdeviceinterface 276


--- Page 281 ---


LVGLDocumentation8.3
lv_point_tlast_raw_point
Lastpointreadfromread_cb.
lv_point_tvect
Differencebetweenact_pointandlast_point.
lv_point_tscroll_sum
lv_point_tscroll_throw_vect
lv_point_tscroll_throw_vect_ori
struct_lv_obj_t*act_obj
struct_lv_obj_t*last_obj
struct_lv_obj_t*scroll_obj
struct_lv_obj_t*last_pressed
lv_area_tscroll_area
lv_point_tgesture_sum
lv_dir_tscroll_dir
lv_dir_tgesture_dir
uint8_tgesture_sent
struct_lv_indev_proc_t::[anonymous]::[anonymous]pointer
lv_indev_state_tlast_state
uint32_tlast_key
struct_lv_indev_proc_t::[anonymous]::[anonymous]keypad
union_lv_indev_proc_t::[anonymous]types
uint32_tpr_timestamp
Pressedtimestamp
4.3. Inputdeviceinterface 277


--- Page 282 ---


LVGLDocumentation8.3
uint32_tlongpr_rep_timestamp
Longpressrepeattimestamp
struct_lv_indev_t
#include<lv_hal_indev.h>Themaininputdevicedescriptorwithdriver,runtimedata('proc')andsomeadditional
information
PublicMembers
struct_lv_indev_drv_t*driver
_lv_indev_proc_tproc
struct_lv_obj_t*cursor
CursorforLV_INPUT_TYPE_POINTER
struct_lv_group_t*group
Keypaddestinationgroup
constlv_point_t*btn_points
Arraypointsassignedtothebutton()screenwillbepressedherebythebuttons
4.4 Tick interface
LVGLneedsasystemticktoknowelapsedtimeforanimationsandothertasks.
Youneedtocallthelv_tick_inc(tick_period)functionperiodicallyandprovidethecallperiodinmilliseconds.
Forexample,lv_tick_inc(1)whencallingeverymillisecond.
lv_tick_inc should be called in a higher priority routine than lv_task_handler() (e.g. in an interrupt) to
preciselyknowtheelapsedmillisecondseveniftheexecutionoflv_task_handlertakesmoretime.
WithFreeRTOSlv_tick_inccanbecalledinvApplicationTickHook.
OnLinuxbasedoperatingsystems(e.g. onRaspberryPi)lv_tick_inccanbecalledinathreadlikebelow:
void * tick_thread (void *args)
{
while(1) {
usleep(5*1000); /*Sleep for 5 millisecond*/
lv_tick_inc(5); /*Tell LVGL that 5 milliseconds were elapsed*/
}
}
4.4. Tickinterface 278


--- Page 283 ---


LVGLDocumentation8.3
4.4.1 API
Provideaccesstothesystemtickwith1millisecondresolution
Functions
uint32_tlv_tick_get(void)
Gettheelapsedmillisecondssincestartup
Returns theelapsedmilliseconds
uint32_tlv_tick_elaps(uint32_tprev_tick)
Gettheelapsedmillisecondssinceaprevioustimestamp
Parameters prev_tick--aprevioustimestamp(returnvalueoflv_tick_get())
Returns theelapsedmillisecondssince'prev_tick'
4.5 Timer Handler
TohandlethetasksofLVGLyouneedtocalllv_timer_handler()periodicallyinoneofthefollowing:
• while(1)ofmain()function
• timerinterruptperiodically(lowerprioritythanlv_tick_inc())
• anOStaskperiodically
Thetimingisnotcriticalbutitshouldbeabout5millisecondstokeepthesystemresponsive.
Example:
while(1) {
lv_timer_handler();
my_delay_ms(5);
}
If you want to use lv_timer_handler() in a super-loop, a helper func-
tionlv_timer_handler_run_in_period()isprovidedtosimplifytheporting:
while(1) {
...
lv_timer_handler_run_in_period(5); /* run lv_timer_handler() every 5ms */
...
}
InanOSenvironment,youcanuseittogetherwiththedelayorsleepprovidedbyOStoreleaseCPUwheneverpossible:
while (1) {
lv_timer_handler_run_in_period(5); /* run lv_timer_handler() every 5ms */
my_delay_ms(5); /* delay 5ms to avoid unnecessary polling */
}
TolearnmoreabouttimersvisittheTimersection.
4.5. TimerHandler 279


--- Page 284 ---


LVGLDocumentation8.3
4.6 Sleep management
TheMCUcangotosleepwhennouserinputhappens. Inthiscase,themainwhile(1)shouldlooklikethis:
while(1) {
/*Normal operation (no sleep) in < 1 sec inactivity*/
if(lv_disp_get_inactive_time(NULL) < 1000) {
lv_task_handler();
}
/*Sleep after 1 sec inactivity*/
else {
timer_stop(); /*Stop the timer where lv_tick_inc() is called*/
sleep(); /*Sleep the MCU*/
}
my_delay_ms(5);
}
Youshouldalsoaddthefollowinglinestoyourinputdevicereadfunctiontosignalawake-up(press,touchorclicketc.)
hashappened:
lv_tick_inc(LV_DISP_DEF_REFR_PERIOD); /*Force task execution on wake-up*/
timer_start(); /*Restart the timer where lv_tick_inc() is␣
,→called*/
lv_task_handler(); /*Call `lv_task_handler()` manually to process␣
,→the wake-up event*/
In addition to lv_disp_get_inactive_time() you can check lv_anim_count_running() to see if all
animationshavefinished.
4.7 Operating system and interrupts
LVGLisnotthread-safebydefault.
However,inthefollowingconditionsit'svalidtocallLVGLrelatedfunctions:
• Inevents. LearnmoreinEvents.
• Inlv_timer. LearnmoreinTimers.
4.7.1 Tasks and threads
If you need to use real tasks or threads, you need a mutex which should be invoked before the call of
lv_timer_handlerandreleasedafterit. Also,youhavetousethesamemutexinothertasksandthreadsaround
everyLVGL(lv_...)relatedfunctioncallandcode. ThiswayyoucanuseLVGLinarealmultitaskingenvironment.
JustmakeuseofamutextoavoidtheconcurrentcallingofLVGLfunctions.
Hereissomepseudocodetoillustratetheconcept:
static mutex_t lvgl_mutex;
void lvgl_thread(void)
{
while(1) {
mutex_lock(&lvgl_mutex);
(continuesonnextpage)
4.6. Sleepmanagement 280


--- Page 285 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_task_handler();
mutex_unlock(&lvgl_mutex);
thread_sleep(10); /* sleep for 10 ms */
}
}
void other_thread(void)
{
/* You must always hold the mutex while using LVGL APIs */
mutex_lock(&lvgl_mutex);
lv_obj_t *img = lv_img_create(lv_scr_act());
mutex_unlock(&lvgl_mutex);
while(1) {
mutex_lock(&lvgl_mutex);
/* change to the next image */
lv_img_set_src(img, next_image);
mutex_unlock(&lvgl_mutex);
thread_sleep(2000);
}
}
4.7.2 Interrupts
Try to avoid calling LVGL functions from interrupt handlers (except lv_tick_inc() and
lv_disp_flush_ready()). But if you need to do this you have to disable the interrupt which uses LVGL
functionswhilelv_timer_handlerisrunning.
It'sabetterapproachtosimplysetaflagorsomevalueintheinterrupt,andperiodicallycheckitinanLVGLtimer(which
isrunbylv_timer_handler).
4.8 Logging
LVGLhasabuilt-inLogmoduletoinformtheuseraboutwhatishappeninginthelibrary.
4.8.1 Log level
Toenablelogging,setLV_USE_LOG 1inlv_conf.handsetLV_LOG_LEVELtooneofthefollowingvalues:
• LV_LOG_LEVEL_TRACEAlotoflogstogivedetailedinformation
• LV_LOG_LEVEL_INFOLogimportantevents
• LV_LOG_LEVEL_WARNLogifsomethingunwantedhappenedbutdidn'tcauseaproblem
• LV_LOG_LEVEL_ERROROnlycriticalissues,wherethesystemmayfail
• LV_LOG_LEVEL_USEROnlyusermessages
• LV_LOG_LEVEL_NONEDonotloganything
The events which have a higher level than the set log level will be logged too. E.g. if you LV_LOG_LEVEL_WARN,
errorswillbealsologged.
4.8. Logging 281


--- Page 286 ---


LVGLDocumentation8.3
4.8.2 Printing logs
Loggingwithprintf
If your system supports printf, you just need to enable LV_LOG_PRINTF in lv_conf.h to send the logs with
printf.
Customlogfunction
If you can't use printf or want to use a custom function to log, you can register a "logger" callback with
lv_log_register_print_cb().
Forexample:
void my_log_cb(const char * buf)
{
serial_send(buf, strlen(buf));
}
...
lv_log_register_print_cb(my_log_cb);
4.8.3 Add logs
YoucanalsousethelogmoduleviatheLV_LOG_TRACE/INFO/WARN/ERROR/USER(text)orLV_LOG(text)
functions. Here:
• LV_LOG_TRACE/INFO/WARN/ERROR/USER(text)appendfollowinginformationtoyourtext
• LogLevel
• __FILE__
• __LINE__
• __func__
• LV_LOG(text)issimilartoLV_LOG_USERbuthasnoextrainformationattached.
4.9 Add custom GPU
LVGLhasaflexibleandextendabledrawpipeline. YoucanhookittodosomerenderingwithaGPUorevencompletely
replacethebuilt-insoftwarerenderer.
4.9. AddcustomGPU 282


--- Page 287 ---


LVGLDocumentation8.3
4.9.1 Draw context
Thecorestructureofdrawingislv_draw_ctx_t. Itcontainsapointertoabufferwheredrawingshouldhappenand
acoupleofcallbackstodrawrectangles,texts,andotherprimitives.
Fields
lv_draw_ctx_thasthefollowingfields:
• void * bufPointertoabuffertodrawinto
• lv_area_t * buf_areaThepositionandsizeofbuf(absolutecoordinates)
• const lv_area_t * clip_area The current clip area with absolute coordinates, always the same or
smallerthanbuf_area. Alldrawingsshouldbeclippedtothisarea.
• void (*draw_rect)()Drawarectanglewithshadow,gradient,border,etc.
• void (*draw_arc)()Drawanarc
• void (*draw_img_decoded)()Drawan(A)RGBimagethatisalreadydecodedbyLVGL.
• lv_res_t (*draw_img)()Drawanimagebeforedecodingit(itbypassesLVGL'sinternalimagedecoders)
• void (*draw_letter)()Drawaletter
• void (*draw_line)()Drawaline
• void (*draw_polygon)()Drawapolygon
• void (*draw_bg)()Replacethebufferwitharectwithoutdecorationlikeradiusorborders.
• void (*wait_for_finish)()Waituntilallbackgroundoperationarefinished. (E.g. GPUoperations)
• void * user_dataCustomuserdataforarbitrarypurpose
(Forthesakeofsimplicitytheparametersofthecallbacksarenotshownhere.)
Alldraw_*callbacksreceiveapointertothecurrentdraw_ctxastheirfirstparameter. Amongtheotherparameters
thereisadescriptorthattellswhattodraw,e.g. fordraw_rectit'scalledlv_draw_rect_dsc_t,forlv_draw_line
it'scalledlv_draw_line_dsc_t,etc.
Tocorrectlyrenderaccordingtoadraw_dscyouneedtobefamiliarwiththeBoxingmodelofLVGLandthemeanings
ofthefields. ThenameandmeaningofthefieldsareidenticaltonameandmeaningoftheStyleproperties.
Initialization
Thelv_disp_drv_thas4fieldsrelatedtothedrawcontext:
• lv_draw_ctx_t * draw_ctxPointertothedraw_ctxofthisdisplay
• void (*draw_ctx_init)(struct _lv_disp_drv_t * disp_drv, lv_draw_ctx_t *
draw_ctx)Callbacktoinitializeadraw_ctx
• void (*draw_ctx_deinit)(struct _lv_disp_drv_t * disp_drv, lv_draw_ctx_t *
draw_ctx)Callbacktode-initializeadraw_ctx
• size_t draw_ctx_sizeSizeofthedrawcontextstructure. E.g. sizeof(lv_draw_sw_ctx_t)
When you ignore these fields, LVGL will set default values for callbacks and size in lv_disp_drv_init()
based on the configuration in lv_conf.h. lv_disp_drv_register() will allocate a draw_ctx based on
draw_ctx_sizeandcalldraw_ctx_init()onit.
4.9. AddcustomGPU 283


--- Page 288 ---


LVGLDocumentation8.3
However,youcanoverwritethecallbacksandthesizevaluesbeforecallinglv_disp_drv_register(). Itmakes
itpossibletouseyourowndraw_ctxwithyourowncallbacks.
4.9.2 Software renderer
LVGL'sbuiltinsoftwarerendererextendsthebasiclv_draw_ctx_tstructureandsetsthedrawcallbacks. Itlooks
likethis:
typedef struct {
/** Include the basic draw_ctx type*/
lv_draw_ctx_t base_draw;
/** Blend a color or image to an area*/
void (*blend)(lv_draw_ctx_t * draw_ctx, const lv_draw_sw_blend_dsc_t * dsc);
} lv_draw_sw_ctx_t;
Setthedrawcallbacksindraw_ctx_init()like:
draw_sw_ctx->base_draw.draw_rect = lv_draw_sw_rect;
draw_sw_ctx->base_draw.draw_letter = lv_draw_sw_letter;
...
Blendcallback
Asyousawabovethesoftwarerendereraddstheblendcallbackfield. It'saspecialcallbackrelatedtohowthesoftware
rendererworks. Alldrawoperationsendupintheblendcallbackwhichcaneitherfillanareaorcopyanimagetoan
areabyconsideringanoptionalmask.
Thelv_draw_sw_blend_dsc_tparameterdescribeswhatandhowtoblend. Ithasthefollowingfields:
• const lv_area_t * blend_areaTheareawithabsolutecoordinatestodrawondraw_ctx->buf. If
src_bufisset,it'sthecoordinatesoftheimagetoblend.
• const lv_color_t * src_buf Pointer to an image to blend. If set, color is ignored. If not set fill
blend_areawithcolor
• lv_color_t colorFillcolor. Usedonlyifsrc_buf == NULL
• lv_opa_t * mask_bufNULLifignored,oranalphamasktoapplyonblend_area
• lv_draw_mask_res_t mask_resTheresultofthepreviousmaskoperation. (LV_DRAW_MASK_RES_.
..)
• const lv_area_t * mask_areaTheareaofmask_bufwithabsolutecoordinates
• lv_opa_t opaTheoverallopacity
• lv_blend_mode_t blend_modeE.g. LV_BLEND_MODE_ADDITIVE
4.9. AddcustomGPU 284


--- Page 289 ---


LVGLDocumentation8.3
4.9.3 Extend the software renderer
Newblendcallback
Let'stakeapracticalexample: youwouldliketouseyourMCUsGPUforcolorfilloperationsonly.
Asalldrawcallbackscallblendcallbacktofillanareaintheendonlytheblendcallbackneedstobeoverwritten.
Firstextendlv_draw_sw_ctx_t:
/*We don't add new fields, so just for clarity add new type*/
typedef lv_draw_sw_ctx_t my_draw_ctx_t;
void my_draw_ctx_init(lv_disp_drv_t * drv, lv_draw_ctx_t * draw_ctx)
{
/*Initialize the parent type first */
lv_draw_sw_init_ctx(drv, draw_ctx);
/*Change some callbacks*/
my_draw_ctx_t * my_draw_ctx = (my_draw_ctx_t *)draw_ctx;
my_draw_ctx->blend = my_draw_blend;
my_draw_ctx->base_draw.wait_for_finish = my_gpu_wait;
}
After calling lv_disp_draw_init(&drv) you can assign the new draw_ctx_init callback and set
draw_ctx_sizetooverwritethedefaults:
static lv_disp_drv_t drv;
lv_disp_draw_init(&drv);
drv->hor_res = my_hor_res;
drv->ver_res = my_ver_res;
drv->flush_cb = my_flush_cb;
/*New draw ctx settings*/
drv->draw_ctx_init = my_draw_ctx_init;
drv->draw_ctx_size = sizeof(my_draw_ctx_t);
lv_disp_drv_register(&drv);
This way when LVGL calls blend it will call my_draw_blend and we can do custom GPU operations. Here is a
completeexample:
void my_draw_blend(lv_draw_ctx_t * draw_ctx, const lv_draw_sw_blend_dsc_t * dsc)
{
/*Let's get the blend area which is the intersection of the area to fill and the␣
,→clip area.*/
lv_area_t blend_area;
if(!_lv_area_intersect(&blend_area, dsc->blend_area, draw_ctx->clip_area)) return;
,→ /*Fully clipped, nothing to do*/
/*Fill only non masked, fully opaque, normal blended and not too small areas*/
if(dsc->src_buf == NULL && dsc->mask == NULL && dsc->opa >= LV_OPA_MAX &&
dsc->blend_mode == LV_BLEND_MODE_NORMAL && lv_area_get_size(&blend_area) >␣
,→100) {
/*Got the first pixel on the buffer*/
(continuesonnextpage)
4.9. AddcustomGPU 285


--- Page 290 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_coord_t dest_stride = lv_area_get_width(draw_ctx->buf_area); /*Width of␣
,→the destination buffer*/
lv_color_t * dest_buf = draw_ctx->buf;
dest_buf += dest_stride * (blend_area.y1 - draw_ctx->buf_area->y1) + (blend_
,→area.x1 - draw_ctx->buf_area->x1);
/*Make the blend area relative to the buffer*/
lv_area_move(&blend_area, -draw_ctx->buf_area->x1, -draw_ctx->buf_area->y1);
/*Call your custom gou fill function to fill blend_area, on dest_buf with dsc-
,→>color*/
my_gpu_fill(dest_buf, dest_stride, &blend_area, dsc->color);
}
/*Fallback: the GPU doesn't support these settings. Call the SW renderer.*/
else {
lv_draw_sw_blend_basic(draw_ctx, dsc);
}
}
Theimplementationofwaitcallbackismuchsimpler:
void my_gpu_wait(lv_draw_ctx_t * draw_ctx)
{
while(my_gpu_is_working());
/*Call SW renderer's wait callback too*/
lv_draw_sw_wait_for_finish(draw_ctx);
}
Newrectangledrawer
If your MCU has a more powerful GPU that can draw e.g. rounded rectangles you can replace the original software
drawertoo. Acustomdraw_rectcallbackmightlooklikethis:
void my_draw_rect(lv_draw_ctx_t * draw_ctx, const lv_draw_rect_dsc_t * dsc, const lv_
,→area_t * coords)
{
if(lv_draw_mask_is_any(coords) == false && dsc->grad == NULL && dsc->bg_img_src ==␣
,→NULL &&
dsc->shadow_width == 0 && dsc->blend_mode = LV_BLEND_MODE_NORMAL)
{
/*Draw the background*/
my_bg_drawer(draw_ctx, coords, dsc->bg_color, dsc->radius);
/*Draw the border if any*/
if(dsc->border_width) {
my_border_drawer(draw_ctx, coords, dsc->border_width, dsc->border_color, dsc->
,→border_opa)
}
/*Draw the outline if any*/
if(dsc->outline_width) {
my_outline_drawer(draw_ctx, coords, dsc->outline_width, dsc->outline_color, dsc-
,→>outline_opa, dsc->outline_pad)
}
(continuesonnextpage)
4.9. AddcustomGPU 286


--- Page 291 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
/*Fallback*/
else {
lv_draw_sw_rect(draw_ctx, dsc, coords);
}
}
my_draw_rectcanfullybypasstheuseofblendcallbackifneeded.
4.9.4 Fully custom draw engine
ForexampleifyourMCU/MPUsupportsapowerfulvectorgraphicsengineyoumightuseonlythatinsteadofLVGL'sSW
renderer. Inthiscase,youneedtobasetherendereronthebasiclv_draw_ctx_t(insteadoflv_draw_sw_ctx_t)
andextend/initializeitasyouwish.
4.9. AddcustomGPU 287


--- Page 292 ---


CHAPTER
FIVE
OVERVIEW
5.1 Objects
InLVGLthebasicbuildingblocksofauserinterfacearetheobjects,alsocalledWidgets. ForexampleaButton,Label,
Image,List,ChartorTextarea.
YoucanseealltheObjecttypeshere.
All objects are referenced using an lv_obj_t pointer as a handle. This pointer can later be used to set or get the
attributesoftheobject.
5.1.1 Attributes
Basicattributes
Allobjecttypessharesomebasicattributes:
• Position
• Size
• Parent
• Styles
• Eventhandlers
• Etc
Youcanset/gettheseattributeswithlv_obj_set_...andlv_obj_get_...functions. Forexample:
/*Set basic object attributes*/
lv_obj_set_size(btn1, 100, 50); /*Set a button's size*/
lv_obj_set_pos(btn1, 20,30); /*Set a button's position*/
ToseealltheavailablefunctionsvisittheBaseobject'sdocumentation.
288


--- Page 293 ---


LVGLDocumentation8.3
Specificattributes
Theobjecttypeshavespecialattributestoo. Forexample,asliderhas
• Minimumandmaximumvalues
• Currentvalue
Forthesespecialattributes,everyobjecttypemayhaveuniqueAPIfunctions. Forexampleforaslider:
/*Set slider specific attributes*/
lv_slider_set_range(slider1, 0, 100); /*Set␣
,→the min. and max. values*/
lv_slider_set_value(slider1, 40, LV_ANIM_ON); /*Set the current value␣
,→(position)*/
The API of the widgets is described in their Documentation but you can also check the respective header files (e.g.
widgets/lv_slider.h)
5.1.2 Working mechanisms
Parent-childstructure
A parent object can be considered as the container of its children. Every object has exactly one parent object (except
screens), butaparentcanhaveanynumberofchildren. Thereisnolimitationforthetypeoftheparentbutthereare
objectswhicharetypicallyaparent(e.g. button)orachild(e.g. label).
Movingtogether
Ifthepositionofaparentchanges,thechildrenwillmovealongwithit. Therefore,allpositionsarerelativetotheparent.
5.1. Objects 289


--- Page 294 ---


LVGLDocumentation8.3
lv_obj_t * parent = lv_obj_create(lv_scr_act()); /*Create a parent object on the␣
,→current screen*/
lv_obj_set_size(parent, 100, 80); /*Set the size of the␣
,→parent*/
lv_obj_t * obj1 = lv_obj_create(parent); /*Create an object on the␣
,→previously created parent object*/
lv_obj_set_pos(obj1, 10, 10); /*Set the position of the␣
,→new object*/
Modifythepositionoftheparent:
lv_obj_set_pos(parent, 50, 50); /*Move the parent. The child will move with it.
,→*/
(Forsimplicitytheadjustingofcolorsoftheobjectsisnotshownintheexample.)
Visibilityonlyontheparent
Ifachildispartiallyorfullyoutsideitsparentthenthepartsoutsidewillnotbevisible.
5.1. Objects 290


--- Page 295 ---


LVGLDocumentation8.3
lv_obj_set_x(obj1, -30); /*Move the child a little bit off the parent*/
This behavior can be overwritten with lv_obj_add_flag(obj, LV_OBJ_FLAG_OVERFLOW_VISIBLE);
whichallowthechildrentobedrawnoutoftheparent.
Createanddeleteobjects
In LVGL, objects can be created and deleted dynamically at run time. It means only the currently created (existing)
objectsconsumeRAM.
Thisallowsforthecreationofascreenjustwhenabuttonisclickedtoopenit,andfordeletionofscreenswhenanew
screenisloaded.
UIscanbecreatedbasedonthecurrentenvironmentofthedevice. Forexampleonecancreatemeters,charts,barsand
slidersbasedonthecurrentlyattachedsensors.
Everywidgethasitsowncreatefunctionwithaprototypelikethis:
lv_obj_t * lv_<widget>_create(lv_obj_t * parent, <other parameters if any>);
Typically,thecreatefunctionsonlyhaveaparentparametertellingthemonwhichobjecttocreatethenewwidget.
Thereturnvalueisapointertothecreatedobjectwithlv_obj_t *type.
Thereisacommondeletefunctionforallobjecttypes. Itdeletestheobjectandallofitschildren.
void lv_obj_del(lv_obj_t * obj);
lv_obj_delwilldeletetheobjectimmediately. Ifforanyreasonyoucan'tdeletetheobjectimmediatelyyoucanuse
lv_obj_del_async(obj)whichwillperformthedeletiononthenextcalloflv_timer_handler(). Thisis
usefule.g. ifyouwanttodeletetheparentofanobjectinthechild'sLV_EVENT_DELETEhandler.
Youcanremoveallthechildrenofanobject(butnottheobjectitself)usinglv_obj_clean(obj).
Youcanuselv_obj_del_delayed(obj, 1000)todeleteanobjectaftersometime. Thedelayisexpressedin
milliseconds.
5.1. Objects 291


--- Page 296 ---


LVGLDocumentation8.3
5.1.3 Screens
Createscreens
Thescreensarespecialobjectswhichhavenoparentobject. Sotheycanbecreatedlike:
lv_obj_t * scr1 = lv_obj_create(NULL);
Screenscanbecreatedwithanyobjecttype. Forexample,aBaseobjectoranimagetomakeawallpaper.
Gettheactivescreen
Thereisalwaysanactivescreenoneachdisplay. Bydefault,thelibrarycreatesandloadsa"Baseobject"asascreenfor
eachdisplay.
Togetthecurrentlyactivescreenusethelv_scr_act()function.
Loadscreens
Toloadanewscreen,uselv_scr_load(scr1).
Layers
Therearetwoautomaticallygeneratedlayers:
• toplayer
• systemlayer
Theyareindependentofthescreensandtheywillbeshownoneveryscreen. Thetoplayerisaboveeveryobjectonthe
screenandthesystemlayerisabovethetoplayer. Youcanaddanypop-upwindowstothetoplayerfreely. But,thesystem
layerisrestrictedtosystem-levelthings(e.g. mousecursorwillbeplacedtherewithlv_indev_set_cursor()).
Thelv_layer_top()andlv_layer_sys()functionsreturnpointerstothetopandsystemlayersrespectively.
ReadtheLayeroverviewsectiontolearnmoreaboutlayers.
Loadscreenwithanimation
Anewscreencanbeloadedwithanimationbyusinglv_scr_load_anim(scr, transition_type, time,
delay, auto_del). Thefollowingtransitiontypesexist:
• LV_SCR_LOAD_ANIM_NONESwitchimmediatelyafterdelaymilliseconds
• LV_SCR_LOAD_ANIM_OVER_LEFT/RIGHT/TOP/BOTTOMMovethenewscreenoverthecurrenttowards
thegivendirection
• LV_SCR_LOAD_ANIM_OUT_LEFT/RIGHT/TOP/BOTTOMMoveouttheoldscreenoverthecurrenttowards
thegivendirection
• LV_SCR_LOAD_ANIM_MOVE_LEFT/RIGHT/TOP/BOTTOMMoveboththecurrentandnewscreenstowards
thegivendirection
• LV_SCR_LOAD_ANIM_FADE_IN/OUTFadethenewscreenovertheoldscreen,orviceversa
5.1. Objects 292


--- Page 297 ---


LVGLDocumentation8.3
Settingauto_deltotruewillautomaticallydeletetheoldscreenwhentheanimationisfinished.
The new screen will become active (returned by lv_scr_act()) when the animation starts after delay time. All
inputsaredisabledduringthescreenanimation.
Handlingmultipledisplays
Screens are created on the currently selected default display. The default display is the last regis-
tered display with lv_disp_drv_register. You can also explicitly select a new default display using
lv_disp_set_default(disp).
lv_scr_act(),lv_scr_load()andlv_scr_load_anim()operateonthedefaultdisplay.
VisitMulti-displaysupporttolearnmore.
5.1.4 Parts
Thewidgetsarebuiltfrommultipleparts. ForexampleaBaseobject usesthemainandscrollbarpartsbutaSlideruses
themain,indicatorandknobparts. Partsaresimilartopseudo-elementsinCSS.
ThefollowingpredefinedpartsexistinLVGL:
• LV_PART_MAINAbackgroundlikerectangle
• LV_PART_SCROLLBARThescrollbar(s)
• LV_PART_INDICATORIndicator,e.g. forslider,bar,switch,orthetickboxofthecheckbox
• LV_PART_KNOBLikeahandletograbtoadjustthevalue
• LV_PART_SELECTEDIndicatethecurrentlyselectedoptionorsection
• LV_PART_ITEMSUsedifthewidgethasmultiplesimilarelements(e.g. tablecells)
• LV_PART_TICKSTicksonscalese.g. forachartormeter
• LV_PART_CURSORMarkaspecificplacee.g. textarea'sorchart'scursor
• LV_PART_CUSTOM_FIRSTCustompartscanbeaddedfromhere.
Themainpurposeofpartsistoallowstylingthe"components"ofthewidgets. Theyaredescribedinmoredetailinthe
Styleoverviewsection.
5.1.5 States
Theobjectcanbeinacombinationofthefollowingstates:
• LV_STATE_DEFAULTNormal,releasedstate
• LV_STATE_CHECKEDToggledorcheckedstate
• LV_STATE_FOCUSEDFocusedviakeypadorencoderorclickedviatouchpad/mouse
• LV_STATE_FOCUS_KEYFocusedviakeypadorencoderbutnotviatouchpad/mouse
• LV_STATE_EDITEDEditbyanencoder
• LV_STATE_HOVEREDHoveredbymouse(notsupportednow)
• LV_STATE_PRESSEDBeingpressed
• LV_STATE_SCROLLEDBeingscrolled
5.1. Objects 293


--- Page 298 ---


LVGLDocumentation8.3
• LV_STATE_DISABLEDDisabledstate
• LV_STATE_USER_1Customstate
• LV_STATE_USER_2Customstate
• LV_STATE_USER_3Customstate
• LV_STATE_USER_4Customstate
Thestatesareusuallyautomaticallychangedbythelibraryastheuserinteractswithanobject(presses,releases,focuses,
etc.). However,thestatescanbechangedmanuallytoo. Tosetorcleargivenstate(butleavetheotherstatesuntouched)
uselv_obj_add/clear_state(obj, LV_STATE_...)InbothcasesOR-edstatevaluescanbeusedaswell.
E.g. lv_obj_add_state(obj, part, LV_STATE_PRESSED | LV_PRESSED_CHECKED).
TolearnmoreaboutthestatesreadtherelatedsectionoftheStyleoverview.
5.1.6 Snapshot
Asnapshotimagecanbegeneratedforanobjecttogetherwithitschildren. CheckdetailsinSnapshot.
5.2 Positions, sizes, and layouts
5.2.1 Overview
Similarly to many other parts of LVGL, the concept of setting the coordinates was inspired by CSS. LVGL has by no
meansacompleteimplementationofCSSbutacomparablesubsetisimplemented(sometimeswithminoradjustments).
Inshortthismeans:
• Explicitlysetcoordinatesarestoredinstyles(size,position,layouts,etc.)
• supportmin-width,max-width,min-height,max-height
• havepixel,percentage,and"content"units
• x=0;y=0coordinatemeansthetop-leftcorneroftheparentplustheleft/toppaddingplusborderwidth
• width/heightmeansthefullsize,the"contentarea"issmallerwithpaddingandborderwidth
• asubsetofflexboxandgridlayoutsaresupported
Units
• pixel: Simplyapositioninpixels. Anintegeralwaysmeanspixels. E.g. lv_obj_set_x(btn, 10)
• percentage: Thepercentageofthesizeoftheobjectoritsparent(dependingontheproperty). lv_pct(value)
convertsavaluetopercentage. E.g. lv_obj_set_width(btn, lv_pct(50))
• LV_SIZE_CONTENT:Specialvaluetosetthewidth/heightofanobjecttoinvolveallthechildren. It'ssimilarto
autoinCSS.E.g. lv_obj_set_width(btn, LV_SIZE_CONTENT).
5.2. Positions,sizes,andlayouts 294


--- Page 299 ---


LVGLDocumentation8.3
Boxingmodel
LVGLfollowsCSS'sborder-boxmodel. Anobject's"box"isbuiltfromthefollowingparts:
• boundingbox: thewidth/heightoftheelements.
• borderwidth: thewidthoftheborder.
• padding: spacebetweenthesidesoftheobjectanditschildren.
• content: thecontentareawhichisthesizeoftheboundingboxreducedbytheborderwidthandpadding.
Theborderisdrawninsidetheboundingbox. InsidetheborderLVGLkeepsa"paddingmargin"whenplacinganobject's
children.
Theoutlineisdrawnoutsidetheboundingbox.
Importantnotes
ThissectiondescribesspecialcasesinwhichLVGL'sbehaviormightbeunexpected.
Postponedcoordinatecalculation
LVGL doesn't recalculate all the coordinate changes immediately. This is done to improve performance. Instead, the
objects are marked as "dirty" and before redrawing the screen LVGL checks if there are any "dirty" objects. If so it
refreshestheirposition,sizeandlayout.
Inotherwords,ifyouneedtogetthecoordinateofanobjectandthecoordinateswerejustchanged,LVGLneedstobe
forcedtorecalculatethecoordinates. Todothiscalllv_obj_update_layout(obj).
The size and position might depend on the parent or layout. Therefore lv_obj_update_layout recalculates the
coordinatesofallobjectsonthescreenofobj.
5.2. Positions,sizes,andlayouts 295


--- Page 300 ---


LVGLDocumentation8.3
Removingstyles
Asit'sdescribedintheUsingstylessection,coordinatescanalsobesetviastyleproperties. Tobemoreprecise,under
thehoodeverystylecoordinaterelatedpropertyisstoredasastyleproperty. Ifyouuselv_obj_set_x(obj, 20)
LVGLsavesx=20inthelocalstyleoftheobject.
Thisisaninternalmechanismanddoesn'tmattermuchasyouuseLVGL.However,thereisonecaseinwhichyouneed
tobeawareoftheimplementation. Ifthestyle(s)ofanobjectareremovedby
lv_obj_remove_style_all(obj)
or
lv_obj_remove_style(obj, NULL, LV_PART_MAIN);
theearliersetcoordinateswillberemovedaswell.
Forexample:
/*The size of obj1 will be set back to the default in the end*/
lv_obj_set_size(obj1, 200, 100); /*Now obj1 has 200;100 size*/
lv_obj_remove_style_all(obj1); /*It removes the set sizes*/
/*obj2 will have 200;100 size in the end */
lv_obj_remove_style_all(obj2);
lv_obj_set_size(obj2, 200, 100);
5.2.2 Position
Simpleway
Tosimplysetthexandycoordinatesofanobjectuse:
lv_obj_set_x(obj, 10); //Separate...
lv_obj_set_y(obj, 20);
lv_obj_set_pos(obj, 10, 20); //Or in one function
Bydefault,thexandycoordinatesaremeasuredfromthetopleftcorneroftheparent'scontentarea. Forexampleifthe
parenthasfivepixelsofpaddingoneverysidetheabovecodewillplaceobjat(15,25)becausethecontentareastarts
afterthepadding.
Percentagevaluesarecalculatedfromtheparent'scontentareasize.
lv_obj_set_x(btn, lv_pct(10)); //x = 10 % of parent content area width
5.2. Positions,sizes,andlayouts 296


--- Page 301 ---


LVGLDocumentation8.3
Align
Insomecasesit'sconvenienttochangetheoriginofthepositioningfromthedefaulttopleft. Iftheoriginischangede.g.
tobottom-right,the(0,0)positionmeans: aligntothebottom-rightcorner. Tochangetheoriginuse:
lv_obj_set_align(obj, align);
Tochangethealignmentandsetnewcoordinates:
lv_obj_align(obj, align, x, y);
Thefollowingalignmentoptionscanbeused:
• LV_ALIGN_TOP_LEFT
• LV_ALIGN_TOP_MID
• LV_ALIGN_TOP_RIGHT
• LV_ALIGN_BOTTOM_LEFT
• LV_ALIGN_BOTTOM_MID
• LV_ALIGN_BOTTOM_RIGHT
• LV_ALIGN_LEFT_MID
• LV_ALIGN_RIGHT_MID
• LV_ALIGN_CENTER
It'squitecommontoalignachildtothecenterofitsparent,thereforeadedicatedfunctionexists:
lv_obj_center(obj);
//Has the same effect
lv_obj_align(obj, LV_ALIGN_CENTER, 0, 0);
Iftheparent'ssizechanges,thesetalignmentandpositionofthechildrenisupdatedautomatically.
Thefunctionsintroducedabovealigntheobjecttoitsparent. However,it'salsopossibletoalignanobjecttoanarbitrary
referenceobject.
lv_obj_align_to(obj_to_align, reference_obj, align, x, y);
Besidesthealignmentsoptionsabove,thefollowingcanbeusedtoalignanobjectoutsidethereferenceobject:
• LV_ALIGN_OUT_TOP_LEFT
• LV_ALIGN_OUT_TOP_MID
• LV_ALIGN_OUT_TOP_RIGHT
• LV_ALIGN_OUT_BOTTOM_LEFT
• LV_ALIGN_OUT_BOTTOM_MID
• LV_ALIGN_OUT_BOTTOM_RIGHT
• LV_ALIGN_OUT_LEFT_TOP
• LV_ALIGN_OUT_LEFT_MID
• LV_ALIGN_OUT_LEFT_BOTTOM
• LV_ALIGN_OUT_RIGHT_TOP
5.2. Positions,sizes,andlayouts 297


--- Page 302 ---


LVGLDocumentation8.3
• LV_ALIGN_OUT_RIGHT_MID
• LV_ALIGN_OUT_RIGHT_BOTTOM
Forexampletoalignalabelaboveabuttonandcenterthelabelhorizontally:
lv_obj_align_to(label, btn, LV_ALIGN_OUT_TOP_MID, 0, -10);
Notethat,unlikewithlv_obj_align(),lv_obj_align_to()cannotrealigntheobjectifitscoordinatesorthe
referenceobject'scoordinateschange.
5.2.3 Size
Simpleway
Thewidthandtheheightofanobjectcanbeseteasilyaswell:
lv_obj_set_width(obj, 200); //Separate...
lv_obj_set_height(obj, 100);
lv_obj_set_size(obj, 200, 100); //Or in one function
Percentage values are calculated based on the parent's content area size. For example to set the object's height to the
screenheight:
lv_obj_set_height(obj, lv_pct(100));
Thesizesettingssupportaspecialvalue: LV_SIZE_CONTENT.Itmeanstheobject'ssizeintherespectivedirectionwill
besettothesizeofitschildren. Notethatonlychildrenontherightandbottomsideswillbeconsideredandchildrenon
thetopandleftremaincropped. Thislimitationmakesthebehaviormorepredictable.
ObjectswithLV_OBJ_FLAG_HIDDENorLV_OBJ_FLAG_FLOATINGwillbeignoredbytheLV_SIZE_CONTENT
calculation.
Theabovefunctionssetthesizeofanobject'sboundingboxbutthesizeofthecontentareacanbesetaswell. Thismeans
anobject'sboundingboxwillbeenlargedwiththeadditionofpadding.
lv_obj_set_content_width(obj, 50); //The actual width: padding left + 50 + padding␣
,→right
lv_obj_set_content_height(obj, 30); //The actual width: padding top + 30 + padding␣
,→bottom
Thesizeoftheboundingboxandthecontentareacanberetrievedwiththefollowingfunctions:
lv_coord_t w = lv_obj_get_width(obj);
lv_coord_t h = lv_obj_get_height(obj);
lv_coord_t content_w = lv_obj_get_content_width(obj);
lv_coord_t content_h = lv_obj_get_content_height(obj);
5.2. Positions,sizes,andlayouts 298


--- Page 303 ---


LVGLDocumentation8.3
5.2.4 Using styles
Underthehoodtheposition,sizeandalignmentpropertiesarestyleproperties. Theabovedescribed"simplefunctions"
hidethestylerelatedcodeforthesakeofsimplicityandsettheposition,size,andalignmentpropertiesinthelocalstyles
oftheobject.
However,usingstylestosetthecoordinateshassomegreatadvantages:
• Itmakesiteasytosetthewidth/height/etc. forseveralobjectstogether. E.g. makeallthesliders100x10pixels
sized.
• Italsomakespossibletomodifythevaluesinoneplace.
• Thevaluescanbepartiallyoverwrittenbyotherstyles. Forexamplestyle_btnmakestheobject100x50by
defaultbutaddingstyle_full_widthoverwritesonlythewidthoftheobject.
• Theobjectcanhavedifferentpositionorsizedependingonstate. E.g. 100pxwideinLV_STATE_DEFAULTbut
120pxinLV_STATE_PRESSED.
• Styletransitionscanbeusedtomakethecoordinatechangessmooth.
Herearesomeexamplestosetanobject'ssizeusingastyle:
static lv_style_t style;
lv_style_init(&style);
lv_style_set_width(&style, 100);
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_add_style(btn, &style, LV_PART_MAIN);
Asyouwillseebelowtherearesomeothergreatfeaturesofsizeandpositionsetting. However,tokeeptheLVGLAPI
lean, onlythemostcommoncoordinatesettingfeatureshavea"simple"versionandthemorecomplexfeaturescanbe
usedviastyles.
5.2.5 Translation
Let'ssaythethereare3buttonsnexttoeachother. Theirpositionissetasdescribedabove. Nowyouwanttomovea
buttonupalittlewhenit'spressed.
OnewaytoachievethisisbysettinganewYcoordinateforthepressedstate:
static lv_style_t style_normal;
lv_style_init(&style_normal);
lv_style_set_y(&style_normal, 100);
static lv_style_t style_pressed;
lv_style_init(&style_pressed);
lv_style_set_y(&style_pressed, 80);
lv_obj_add_style(btn1, &style_normal, LV_STATE_DEFAULT);
lv_obj_add_style(btn1, &style_pressed, LV_STATE_PRESSED);
lv_obj_add_style(btn2, &style_normal, LV_STATE_DEFAULT);
lv_obj_add_style(btn2, &style_pressed, LV_STATE_PRESSED);
lv_obj_add_style(btn3, &style_normal, LV_STATE_DEFAULT);
lv_obj_add_style(btn3, &style_pressed, LV_STATE_PRESSED);
5.2. Positions,sizes,andlayouts 299


--- Page 304 ---


LVGLDocumentation8.3
This works, but it's not really flexible because the pressed coordinate is hard-coded. If the buttons are not at y=100,
style_pressedwon'tworkasexpected. Translationscanbeusedtosolvethis:
static lv_style_t style_normal;
lv_style_init(&style_normal);
lv_style_set_y(&style_normal, 100);
static lv_style_t style_pressed;
lv_style_init(&style_pressed);
lv_style_set_translate_y(&style_pressed, -20);
lv_obj_add_style(btn1, &style_normal, LV_STATE_DEFAULT);
lv_obj_add_style(btn1, &style_pressed, LV_STATE_PRESSED);
lv_obj_add_style(btn2, &style_normal, LV_STATE_DEFAULT);
lv_obj_add_style(btn2, &style_pressed, LV_STATE_PRESSED);
lv_obj_add_style(btn3, &style_normal, LV_STATE_DEFAULT);
lv_obj_add_style(btn3, &style_pressed, LV_STATE_PRESSED);
Translationisappliedfromthecurrentpositionoftheobject.
Percentagevaluescanbeusedintranslationsaswell. Thepercentageisrelativetothesizeoftheobject(andnottothe
sizeoftheparent). Forexamplelv_pct(50)willmovetheobjectwithhalfofitswidth/height.
Thetranslationisappliedafterthelayoutsarecalculated. Therefore,evenlaidoutobjects'positioncanbetranslated.
Thetranslationactuallymovestheobject. ThatmeansitmakesthescrollbarsandLV_SIZE_CONTENTsizedobjects
reacttothepositionchange.
5.2.6 Transformation
Similarlytoposition,anobject'ssizecanbechangedrelativetothecurrentsizeaswell. Thetransformedwidthandheight
areaddedonbothsidesoftheobject. Thismeansa10pxtransformedwidthmakestheobject2x10pixelswider.
Unlike position translation, the size transformation doesn't make the object "really" larger. In other words scrollbars,
layouts,andLV_SIZE_CONTENTwillnotreacttothetransformedsize. Hence,sizetransformationis"only"avisual
effect.
Thiscodeenlargesabuttonwhenit'spressed:
static lv_style_t style_pressed;
lv_style_init(&style_pressed);
lv_style_set_transform_width(&style_pressed, 10);
lv_style_set_transform_height(&style_pressed, 10);
lv_obj_add_style(btn, &style_pressed, LV_STATE_PRESSED);
5.2. Positions,sizes,andlayouts 300


--- Page 305 ---


LVGLDocumentation8.3
MinandMaxsize
Similarly to CSS, LVGL also supports min-width, max-width, min-height and max-height. These are
limitspreventinganobject'ssizefrombecomingsmaller/largerthanthesevalues. Theyareespeciallyusefulifthesizeis
setbypercentageorLV_SIZE_CONTENT.
static lv_style_t style_max_height;
lv_style_init(&style_max_height);
lv_style_set_y(&style_max_height, 200);
lv_obj_set_height(obj, lv_pct(100));
lv_obj_add_style(obj, &style_max_height, LV_STATE_DEFAULT); //Limit the height to␣
,→200 px
Percentagevaluescanbeusedaswellwhicharerelativetothesizeoftheparent'scontentarea.
static lv_style_t style_max_height;
lv_style_init(&style_max_height);
lv_style_set_y(&style_max_height, lv_pct(50));
lv_obj_set_height(obj, lv_pct(100));
lv_obj_add_style(obj, &style_max_height, LV_STATE_DEFAULT); //Limit the height to␣
,→half parent height
5.2.7 Layout
Overview
Layoutscanupdatethepositionandsizeofanobject'schildren. Theycanbeusedtoautomaticallyarrangethechildren
intoalineorcolumn,orinmuchmorecomplicatedforms.
Thepositionandsizesetbythelayoutoverwritesthe"normal"x,y,width,andheightsettings.
Thereisonlyonefunctionthatisthesameforeverylayout: lv_obj_set_layout(obj, <LAYOUT_NAME>)sets
thelayoutonanobject. Forfurthersettingsoftheparentandchildrenseethedocumentationofthegivenlayout.
Built-inlayout
LVGLcomeswithtwoverypowerfullayouts:
• Flexbox
• Grid
BothareheavilyinspiredbytheCSSlayoutswiththesamename.
5.2. Positions,sizes,andlayouts 301


--- Page 306 ---


LVGLDocumentation8.3
Flags
Therearesomeflagsthatcanbeusedonobjectstoaffecthowtheybehavewithlayouts:
• LV_OBJ_FLAG_HIDDENHiddenobjectsareignoredinlayoutcalculations.
• LV_OBJ_FLAG_IGNORE_LAYOUT The object is simply ignored by the layouts. Its coordinates can be set as
usual.
• LV_OBJ_FLAG_FLOATING Same as LV_OBJ_FLAG_IGNORE_LAYOUT but the object with
LV_OBJ_FLAG_FLOATINGwillbeignoredinLV_SIZE_CONTENTcalculations.
Theseflagscanbeadded/removedwithlv_obj_add/clear_flag(obj, FLAG);
Addingnewlayouts
LVGLcanbefreelyextendedbyacustomlayoutlikethis:
uint32_t MY_LAYOUT;
...
MY_LAYOUT = lv_layout_register(my_layout_update, &user_data);
...
void my_layout_update(lv_obj_t * obj, void * user_data)
{
/*Will be called automatically if it's required to reposition/resize the␣
,→children of "obj" */
}
Customstylepropertiescanbeaddedwhichcanberetrievedandusedintheupdatecallback. Forexample:
uint32_t MY_PROP;
...
LV_STYLE_MY_PROP = lv_style_register_prop();
...
static inline void lv_style_set_my_prop(lv_style_t * style, uint32_t value)
{
lv_style_value_t v = {
.num = (int32_t)value
};
lv_style_set_prop(style, LV_STYLE_MY_PROP, v);
}
5.2. Positions,sizes,andlayouts 302


--- Page 307 ---


LVGLDocumentation8.3
5.2.8 Examples
5.3 Styles
Stylesareusedtosettheappearanceofobjects. StylesinlvglareheavilyinspiredbyCSS.Theconceptinanutshellisas
follows:
• Astyleisanlv_style_tvariablewhichcanholdpropertieslikeborderwidth,textcolorandsoon. It'ssimilar
toaclassinCSS.
• Stylescanbeassignedtoobjectstochangetheirappearance. Uponassignment,thetargetpart(pseudo-element in
CSS)andtargetstate(pseudoclass)canbespecified. Forexampleonecanaddstyle_bluetotheknobofa
sliderwhenit'sinpressedstate.
• Thesamestylecanbeusedbyanynumberofobjects.
• Stylescanbecascadedwhichmeansmultiplestylesmaybeassignedtoanobjectandeachstylecanhavedifferent
properties. Therefore,notallpropertieshavetobespecifiedinastyle. LVGLwillsearchforapropertyuntilastyle
definesitoruseadefaultifit'snotspecifiedbyanyofthestyles. Forexamplestyle_btncanresultinadefault
gray button and style_btn_red can add only a background-color=red to overwrite the background
color.
• Themostrecentlyaddedstylehashigherprecedence. Thismeansifapropertyisspecifiedintwostylesthenewest
styleintheobjectwillbeused.
• Someproperties(e.g. textcolor)canbeinheritedfromaparent(s)ifit'snotspecifiedinanobject.
• Objectscanalsohavelocalstyleswithhigherprecedencethan"normal"styles.
• UnlikeCSS(wherepseudo-classesdescribedifferentstates,e.g. :focus),inLVGLapropertyisassignedtoa
givenstate.
• Transitionscanbeappliedwhentheobjectchangesstate.
5.3.1 States
Theobjectscanbeinthecombinationofthefollowingstates:
• LV_STATE_DEFAULT(0x0000)Normal,releasedstate
• LV_STATE_CHECKED(0x0001)Toggledorcheckedstate
• LV_STATE_FOCUSED(0x0002)Focusedviakeypadorencoderorclickedviatouchpad/mouse
• LV_STATE_FOCUS_KEY(0x0004)Focusedviakeypadorencoderbutnotviatouchpad/mouse
• LV_STATE_EDITED(0x0008)Editbyanencoder
• LV_STATE_HOVERED(0x0010)Hoveredbymouse(notsupportednow)
• LV_STATE_PRESSED(0x0020)Beingpressed
• LV_STATE_SCROLLED(0x0040)Beingscrolled
• LV_STATE_DISABLED(0x0080)Disabledstate
• LV_STATE_USER_1(0x1000)Customstate
• LV_STATE_USER_2(0x2000)Customstate
• LV_STATE_USER_3(0x4000)Customstate
• LV_STATE_USER_4(0x8000)Customstate
5.3. Styles 303


--- Page 308 ---


LVGLDocumentation8.3
Anobjectcanbeinacombinationofstatessuchasbeingfocusedandpressedatthesametime. Thisisrepresentedas
LV_STATE_FOCUSED | LV_STATE_PRESSED.
Astylecanbeaddedtoanystateorstatecombination. Forexample,settingadifferentbackgroundcolorforthedefault
andpressedstates. Ifapropertyisnotdefinedinastatethebestmatchingstate'spropertywillbeused. Typicallythis
meansthepropertywithLV_STATE_DEFAULTisused.˛Ifthepropertyisnotsetevenforthedefaultstatethedefault
valuewillbeused. (Seelater)
Butwhatdoesthe"bestmatchingstate'sproperty"reallymean? Stateshaveaprecedencewhichisshownbytheirvalue
(seeintheabovelist). Ahighervaluemeanshigherprecedence. Todeterminewhichstate'spropertytouselet'stakean
example. Imaginethebackgroundcolorisdefinedlikethis:
• LV_STATE_DEFAULT:white
• LV_STATE_PRESSED:gray
• LV_STATE_FOCUSED:red
1. Initiallytheobjectisinthedefaultstate,soit'sasimplecase: thepropertyisperfectlydefinedintheobject'scurrent
stateaswhite.
2. When the object is pressed there are 2 related properties: default with white (default is related to every state)
andpressedwithgray. Thepressedstatehas0x0020precedencewhichishigherthanthedefaultstate's0x0000
precedence,sograycolorwillbeused.
3. Whentheobjectisfocusedthesamethinghappensasinpressedstateandredcolorwillbeused. (Focusedstate
hashigherprecedencethandefaultstate).
4. Whentheobjectisfocusedandpressedbothgrayandredwouldwork,butthepressedstatehashigherprecedence
thanfocusedsograycolorwillbeused.
5. It's possible to set e.g. rose color for LV_STATE_PRESSED | LV_STATE_FOCUSED. In this case, this
combinedstatehas0x0020+0x0002=0x0022precedence,whichishigherthanthepressedstate'sprecedenceso
rosecolorwouldbeused.
6. Whentheobjectisinthecheckedstatethereisnopropertytosetthebackgroundcolorforthisstate. Soforlack
ofabetteroption,theobjectremainswhitefromthedefaultstate'sproperty.
Somepracticalnotes:
• Theprecedence(value)ofstatesisquiteintuitive,andit'ssomethingtheuserwouldexpectnaturally. E.g. ifan
objectisfocusedtheuserwillstillwanttoseeifit'spressed,thereforethepressedstatehasahigherprecedence.
Ifthefocusedstatehadahigherprecedenceitwouldoverwritethepressedcolor.
• Ifyouwanttosetapropertyforallstates(e.g. redbackgroundcolor)justsetitforthedefaultstate. Iftheobject
can'tfindapropertyforitscurrentstateitwillfallbacktothedefaultstate'sproperty.
• UseORedstatestodescribethepropertiesforcomplexcases. (E.g. pressed+checked+focused)
• Itmightbeagoodideatousedifferentstyleelementsfordifferentstates. Forexample,findingbackgroundcolors
for released, pressed, checked + pressed, focused, focused + pressed, focused + pressed + checked, etc. states
isquitedifficult. Instead, forexample, usethebackgroundcolorforpressedandcheckedstatesandindicatethe
focusedstatewithadifferentbordercolor.
5.3. Styles 304


--- Page 309 ---


LVGLDocumentation8.3
5.3.2 Cascading styles
It'snotrequiredtosetallthepropertiesinonestyle. It'spossibletoaddmorestylestoanobjectandhavethelatteradded
stylemodifyorextendappearance. Forexample,createageneralgraybuttonstyleandcreateanewoneforredbuttons
whereonlythenewbackgroundcolorisset.
ThisismuchlikeinCSSwhenusedclassesarelistedlike<div class=".btn .btn-red">.
Stylesaddedlaterhaveprecedenceoveronessetearlier. Sointhegray/redbuttonexampleabove,thenormalbuttonstyle
shouldbeaddedfirstandtheredstylesecond. However,theprecedenceofthestatesarestilltakenintoaccount. Solet's
examinethefollowingcase:
• thebasicbuttonstyledefinesdark-graycolorforthedefaultstateandlight-graycolorforthepressedstate
• theredbuttonstyledefinesthebackgroundcolorasredonlyinthedefaultstate
Inthiscase,whenthebuttonisreleased(it'sindefaultstate)itwillberedbecauseaperfectmatchisfoundinthemost
recently added style (red). When the button is pressed the light-gray color is a better match because it describes the
currentstateperfectly,sothebuttonwillbelight-gray.
5.3.3 Inheritance
Someproperties(typicallythoserelatedtotext)canbeinheritedfromtheparentobject'sstyles. Inheritanceisapplied
onlyifthegivenpropertyisnotsetintheobject'sstyles(evenindefaultstate). Inthiscase,ifthepropertyisinheritable,
theproperty'svaluewillbesearchedintheparentsuntilanobjectspecifiesavaluefortheproperty. Theparentswilluse
theirownstatetodeterminethevalue. Soifabuttonispressed,andthetextcolorcomesfromhere,thepressedtextcolor
willbeused.
5.3.4 Forced value inheritance/default value
Sometimesyoumaywanttoforceachildobjecttousetheparent'svalueforagivenstyleproperty. Todothisyoucan
useoneofthefollowing(dependingonwhattypeofstyleyou'reusing):
/* regular style */
lv_style_set_prop_meta(&style, LV_STYLE_TEXT_COLOR, LV_STYLE_PROP_META_INHERIT);
/* local style */
lv_obj_set_local_style_prop_meta(child, LV_STYLE_TEXT_COLOR, LV_STYLE_PROP_META_
,→INHERIT, LV_PART_MAIN);
Thisactslikeavaluehasbeensetonthestyle,sosettingthevalueofthepropertyafterwardswillremovetheflag.
Youmayalsowanttoforcethedefaultvalueofapropertytobeused,withoutneedingtohardcodeitinyourapplication.
To do this you can use the same API but with LV_STYLE_PROP_META_INITIAL instead. In future versions of
LVGL,thiswillusethevaluebaseduponthecurrenttheme,butfornowitjustselectstheinternaldefaultregardlessof
theme.
5.3. Styles 305


--- Page 310 ---


LVGLDocumentation8.3
5.3.5 Parts
Objectscanbecomposedofpartswhichmayeachhavetheirownstyles.
ThefollowingpredefinedpartsexistinLVGL:
• LV_PART_MAINAbackgroundlikerectangle
• LV_PART_SCROLLBARThescrollbar(s)
• LV_PART_INDICATORIndicator,e.g. forslider,bar,switch,orthetickboxofthecheckbox
• LV_PART_KNOBLikeahandletograbtoadjustavalue
• LV_PART_SELECTEDIndicatethecurrentlyselectedoptionorsection
• LV_PART_ITEMSUsedifthewidgethasmultiplesimilarelements(e.g. tablecells)
• LV_PART_TICKSTicksonscalese.g. forachartormeter
• LV_PART_CURSORMarkaspecificplacee.g. textarea'sorchart'scursor
• LV_PART_CUSTOM_FIRSTCustompartidentifierscanbeaddedstartingfromhere.
ForexampleaSliderhasthreeparts:
• Background
• Indicator
• Knob
Thismeansallthreepartsoftheslidercanhavetheirownstyles. Seelaterhowtoaddstylestoobjectsandparts.
5.3.6 Initialize styles and set/get properties
Styles are stored in lv_style_t variables. Style variables should be static, global or dynamically allocated. In
otherwordstheycannotbelocalvariablesinfunctionswhicharedestroyedwhenthefunctionexits. Beforeusingastyle
it should be initialized with lv_style_init(&my_style). After initializing a style, properties can be added or
changed.
Propertysetfunctionslookslikethis: lv_style_set_<property_name>(&style, <value>);Forexam-
ple:
static lv_style_t style_btn;
lv_style_init(&style_btn);
lv_style_set_bg_color(&style_btn, lv_color_hex(0x115588));
lv_style_set_bg_opa(&style_btn, LV_OPA_50);
lv_style_set_border_width(&style_btn, 2);
lv_style_set_border_color(&style_btn, lv_color_black());
static lv_style_t style_btn_red;
lv_style_init(&style_btn_red);
lv_style_set_bg_color(&style_btn_red, lv_plaette_main(LV_PALETTE_RED));
lv_style_set_bg_opa(&style_btn_red, LV_OPA_COVER);
Toremoveapropertyuse:
lv_style_remove_prop(&style, LV_STYLE_BG_COLOR);
Togetaproperty'svaluefromastyle:
5.3. Styles 306


--- Page 311 ---


LVGLDocumentation8.3
lv_style_value_t v;
lv_res_t res = lv_style_get_prop(&style, LV_STYLE_BG_COLOR, &v);
if(res == LV_RES_OK) { /*Found*/
do_something(v.color);
}
lv_style_value_thas3fields:
• numforinteger,booleanandopacityproperties
• colorforcolorproperties
• ptrforpointerproperties
Toresetastyle(freeallitsdata)use:
lv_style_reset(&style);
StylescanbebuiltasconsttootosaveRAM:
const lv_style_const_prop_t style1_props[] = {
LV_STYLE_CONST_WIDTH(50),
LV_STYLE_CONST_HEIGHT(50),
LV_STYLE_PROP_INV,
};
LV_STYLE_CONST_INIT(style1, style1_props);
Laterconststylecanbeusedlikeanyotherstylebut(obviously)newpropertiescannotbeadded.
5.3.7 Add and remove styles to a widget
Astyleonitsownisnotthatuseful. Itmustbeassignedtoanobjecttotakeeffect.
Addstyles
To add a style to an object use lv_obj_add_style(obj, &style, <selector>). <selector> is an
OR-edvalueofpartsandstatetowhichthestyleshouldbeadded. Someexamples:
• LV_PART_MAIN | LV_STATE_DEFAULT
• LV_STATE_PRESSED:Themainpartinpressedstate. LV_PART_MAINcanbeomitted
• LV_PART_SCROLLBAR:Thescrollbarpartinthedefaultstate. LV_STATE_DEFAULTcanbeomitted.
• LV_PART_SCROLLBAR | LV_STATE_SCROLLED:Thescrollbarpartwhentheobjectisbeingscrolled
• 0SameasLV_PART_MAIN | LV_STATE_DEFAULT.
• LV_PART_INDICATOR | LV_STATE_PRESSED | LV_STATE_CHECKEDTheindicatorpartwhenthe
objectispressedandcheckedatthesametime.
Usinglv_obj_add_style:
lv_obj_add_style(btn, &style_btn, 0); /
,→*Default button style*/
lv_obj_add_style(btn, &btn_red, LV_STATE_PRESSED); /*Overwrite only some colors to␣
,→red when pressed*/
5.3. Styles 307


--- Page 312 ---


LVGLDocumentation8.3
Removestyles
Toremoveallstylesfromanobjectuselv_obj_remove_style_all(obj).
Toremovespecificstylesuselv_obj_remove_style(obj, style, selector). Thisfunctionwillremove
styleonlyiftheselectormatcheswiththeselectorusedinlv_obj_add_style. stylecanbeNULL
to check only the selector and remove all matching styles. The selector can use the LV_STATE_ANY and
LV_PART_ANYvaluestoremovethestylefromanystateorpart.
Reportstylechanges
Ifastylewhichisalreadyassignedtoanobjectchanges(i.e. apropertyisaddedorchanged),theobjectsusingthatstyle
shouldbenotified. Thereare3optionstodothis:
1. Ifyouknowthatthechangedpropertiescanbeappliedbyasimpleredraw(e.g. colororopacitychanges)justcall
lv_obj_invalidate(obj)orlv_obj_invalidate(lv_scr_act()).
2. If more complex style properties were changed or added, and you know which object(s) are affected by that
stylecalllv_obj_refresh_style(obj, part, property). Torefreshallpartsandpropertiesuse
lv_obj_refresh_style(obj, LV_PART_ANY, LV_STYLE_PROP_ANY).
3. To make LVGL check all objects to see if they use a style and refresh them when needed, call
lv_obj_report_style_change(&style). IfstyleisNULLallobjectswillbenotifiedaboutastyle
change.
Getaproperty'svalueonanobject
Togetafinalvalueofproperty-consideringcascading,inheritance,localstylesandtransitions(seebelow)-propertyget
functions like this can be used: lv_obj_get_style_<property_name>(obj, <part>). These functions
usetheobject'scurrentstateandifnobettercandidateexiststheyreturnadefaultvalue. Forexample:
lv_color_t color = lv_obj_get_style_bg_color(btn, LV_PART_MAIN);
5.3.8 Local styles
Inadditionto"normal"styles,objectscanalsostorelocalstyles. ThisconceptissimilartoinlinestylesinCSS(e.g. <div
style="color:red">)withsomemodification.
Local styles are like normal styles, but they can't be shared among other objects. If used, local styles are allocated
automatically,andfreedwhentheobjectisdeleted. Theyareusefultoaddlocalcustomizationtoanobject.
UnlikeinCSS,LVGLlocalstylescanbeassignedtostates(pseudo-classes)andparts(pseudo-elements).
To set a local property use functions like lv_obj_set_style_<property_name>(obj, <value>,
<selector>); Forexample:
lv_obj_set_style_bg_color(slider, lv_color_red(), LV_PART_INDICATOR | LV_STATE_
,→FOCUSED);
5.3. Styles 308


--- Page 313 ---


LVGLDocumentation8.3
5.3.9 Properties
Forthefulllistofstylepropertiesclickhere.
Typicalbackgroundproperties
In the documentation of the widgets you will see sentences like "The widget uses the typical background properties".
These"typicalbackgroundproperties"aretheonesrelatedto:
• Background
• Border
• Outline
• Shadow
• Padding
• Widthandheighttransformation
• XandYtranslation
5.3.10 Transitions
By default, when an object changes state (e.g. it's pressed) the new properties from the new state are set immediately.
However,withtransitionsit'spossibletoplayananimationonstatechange. Forexample,onpressingabuttonitsback-
groundcolorcanbeanimatedtothepressedcolorover300ms.
Theparametersofthetransitionsarestoredinthestyles. It'spossibletoset
• thetimeofthetransition
• thedelaybeforestartingthetransition
• theanimationpath(alsoknownasthetimingoreasingfunction)
• thepropertiestoanimate
Thetransitionpropertiescanbedefinedforeachstate. Forexample,settinga500mstransitiontimeinthedefaultstate
meansthatwhentheobjectgoestothedefaultstatea500mstransitiontimeisapplied. Settinga100mstransitiontimein
thepressedstatecausesa100mstransitionwhengoingtothepressedstate. Thisexampleconfigurationresultsingoing
tothepressedstatequicklyandthengoingbacktodefaultslowly.
Todescribeatransitionanlv_transition_dsc_tvariableneedstobeinitializedandaddedtoastyle:
/*Only its pointer is saved so must static, global or dynamically allocated */
static const lv_style_prop_t trans_props[] = {
LV_
,→STYLE_BG_OPA, LV_STYLE_BG_COLOR,
0,
,→ /*End marker*/
};
static lv_style_transition_dsc_t trans1;
lv_style_transition_dsc_init(&trans1, trans_props, lv_anim_path_ease_out, duration_ms,
,→ delay_ms);
lv_style_set_transition(&style1, &trans1);
5.3. Styles 309


--- Page 314 ---


LVGLDocumentation8.3
5.3.11 Opacity, Blend modes and Transformations
Iftheopa,blend_mode,transform_angle,ortransform_zoompropertiesaresettotheirnon-defaultvalue
LVGL creates a snapshot about the widget and all its children in order to blend the whole widget with the set opacity,
blendmodeandtransformationproperties.
ThesepropertieshavethiseffectonlyontheMAINpartofthewidget.
Thecreatedsnapshotiscalled"intermediatelayer"orsimply"layer". Ifonlyopaand/orblend_modeissettoanon-
defaultvalueLVGLcanbuildthelayerfromsmallerchunks. Thesizeofthesechunkscanbeconfiguredbythefollowing
propertiesinlv_conf.h:
• LV_LAYER_SIMPLE_BUF_SIZE:[bytes]theoptimaltargetbuffersize. LVGLwilltrytoallocatethissizeof
memory.
• LV_LAYER_SIMPLE_FALLBACK_BUF_SIZE: [bytes] used if LV_LAYER_SIMPLE_BUF_SIZE couldn't
beallocated.
Iftransformationpropertieswerealsousedthelayercannotberenderedinchunks,butonelargermemoryneedstobe
allocated. Therequiredmemorydependsontheangle, zoomandpivotparameters,andthesizeoftheareatoredraw,
butit'sneverlargerthanthesizeofthewidget(includingtheextradrawsizeusedforshadow,outline,etc).
If the widget can fully cover the area to redraw, LVGL creates an RGB layer (which is faster to render and uses less
memory). If the opposite case ARGB rendering needs to be used. A widget might not cover its area if it has radius,
bg_opa != 255,hasshadow,outline,etc.
Theclickareaofthewidgetisalsotransformedaccordingly.
5.3.12 Color filter
TODO
5.3.13 Themes
Themesareacollectionofstyles. IfthereisanactivethemeLVGLappliesitoneverycreatedwidget. Thiswillgivea
defaultappearancetotheUIwhichcanthenbemodifiedbyaddingfurtherstyles.
Every display can have a different theme. For example, you could have a colorful theme on a TFT and monochrome
themeonasecondarymonochromedisplay.
Tosetathemeforadisplay,twostepsarerequired:
1. Initializeatheme
2. Assigntheinitializedthemetoadisplay.
Themeinitializationfunctionscanhavedifferentprototypes. Thisexampleshowshowtosetthe"default"theme:
lv_theme_t * th = lv_theme_default_init(display, /*Use the DPI, size, etc from this␣
,→display*/
LV_COLOR_PALETTE_BLUE, LV_COLOR_PALETTE_CYAN,␣
,→ /*Primary and secondary palette*/
false, /*Light or dark mode*/
&lv_font_montserrat_10, &lv_font_montserrat_
,→14, &lv_font_montserrat_18); /*Small, normal, large fonts*/
lv_disp_set_theme(display, th); /*Assign the theme to the display*/
5.3. Styles 310


--- Page 315 ---


LVGLDocumentation8.3
Theincludedthemesareenabledinlv_conf.h. IfthedefaultthemeisenabledbyLV_USE_THEME_DEFAULT 1
LVGLautomaticallyinitializesandsetsitwhenadisplayiscreated.
Extendingthemes
Built-inthemescanbeextended. Ifacustomthemeiscreated,aparentthemecanbeselected. Theparenttheme'sstyles
willbeaddedbeforethecustomtheme'sstyles. Anynumberofthemescanbechainedthisway. E.g. defaulttheme->
customtheme->darktheme.
lv_theme_set_parent(new_theme, base_theme)extendsthebase_themewiththenew_theme.
Thereisanexampleforitbelow.
5.3.14 Examples
Sizestyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Using the Size, Position and Padding style properties
*/
void lv_example_style_1(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 5);
/*Make a gradient*/
lv_style_set_width(&style, 150);
lv_style_set_height(&style, LV_SIZE_CONTENT);
lv_style_set_pad_ver(&style, 20);
lv_style_set_pad_left(&style, 5);
lv_style_set_x(&style, lv_pct(50));
lv_style_set_y(&style, 80);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label, "Hello");
}
#endif
#
# Using the Size, Position and Padding style properties
#
style = lv.style_t()
style.init()
style.set_radius(5)
(continuesonnextpage)
5.3. Styles 311


--- Page 316 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Make a gradient
style.set_width(150)
style.set_height(lv.SIZE.CONTENT)
style.set_pad_ver(20)
style.set_pad_left(5)
style.set_x(lv.pct(50))
style.set_y(80)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
label = lv.label(obj)
label.set_text("Hello")
Backgroundstyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the background style properties
*/
void lv_example_style_2(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 5);
/*Make a gradient*/
lv_style_set_bg_opa(&style, LV_OPA_COVER);
static lv_grad_dsc_t grad;
grad.dir = LV_GRAD_DIR_VER;
grad.stops_count = 2;
grad.stops[0].color = lv_palette_lighten(LV_PALETTE_GREY, 1);
grad.stops[1].color = lv_palette_main(LV_PALETTE_BLUE);
/*Shift the gradient to the bottom*/
grad.stops[0].frac = 128;
grad.stops[1].frac = 192;
lv_style_set_bg_grad(&style, &grad);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
5.3. Styles 312


--- Page 317 ---


LVGLDocumentation8.3
#
# Using the background style properties
#
style = lv.style_t()
style.init()
style.set_radius(5)
# Make a gradient
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
style.set_bg_grad_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_bg_grad_dir(lv.GRAD_DIR.VER)
# Shift the gradient to the bottom
style.set_bg_main_stop(128)
style.set_bg_grad_stop(192)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
Borderstyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the border style properties
*/
void lv_example_style_3(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 10);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 1));
/*Add border to the bottom+right*/
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_border_width(&style, 5);
lv_style_set_border_opa(&style, LV_OPA_50);
lv_style_set_border_side(&style, LV_BORDER_SIDE_BOTTOM | LV_BORDER_SIDE_RIGHT);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
5.3. Styles 313


--- Page 318 ---


LVGLDocumentation8.3
#
# Using the border style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(10)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
# Add border to the bottom+right
style.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_border_width(5)
style.set_border_opa(lv.OPA._50)
style.set_border_side(lv.BORDER_SIDE.BOTTOM | lv.BORDER_SIDE.RIGHT)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
Outlinestyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the outline style properties
*/
void lv_example_style_4(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 1));
/*Add outline*/
lv_style_set_outline_width(&style, 2);
lv_style_set_outline_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_outline_pad(&style, 8);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
5.3. Styles 314


--- Page 319 ---


LVGLDocumentation8.3
#
# Using the outline style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
# Add outline
style.set_outline_width(2)
style.set_outline_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_outline_pad(8)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
Shadowstyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Using the Shadow style properties
*/
void lv_example_style_5(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 1));
/*Add a shadow*/
lv_style_set_shadow_width(&style, 55);
lv_style_set_shadow_color(&style, lv_palette_main(LV_PALETTE_BLUE));
// lv_style_set_shadow_ofs_x(&style, 10);
// lv_style_set_shadow_ofs_y(&style, 20);
/*Create an object with the new style*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_obj_center(obj);
}
#endif
5.3. Styles 315


--- Page 320 ---


LVGLDocumentation8.3
#
# Using the Shadow style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 1))
# Add a shadow
style.set_shadow_width(8)
style.set_shadow_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_shadow_ofs_x(10)
style.set_shadow_ofs_y(20)
# Create an object with the new style
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
obj.center()
Imagestyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Using the Image style properties
*/
void lv_example_style_6(void)
{
static lv_style_t style;
lv_style_init(&style);
/*Set a background color and a radius*/
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 3));
lv_style_set_border_width(&style, 2);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_img_recolor(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_img_recolor_opa(&style, LV_OPA_50);
lv_style_set_transform_angle(&style, 300);
/*Create an object with the new style*/
lv_obj_t * obj = lv_img_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
LV_IMG_DECLARE(img_cogwheel_argb);
lv_img_set_src(obj, &img_cogwheel_argb);
lv_obj_center(obj);
(continuesonnextpage)
5.3. Styles 316


--- Page 321 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../assets/img_cogwheel_argb.png', 'rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
#
# Using the Image style properties
#
style = lv.style_t()
style.init()
# Set a background color and a radius
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 3))
style.set_border_width(2)
style.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_img_recolor(lv.palette_main(lv.PALETTE.BLUE))
style.set_img_recolor_opa(lv.OPA._50)
# style.set_transform_angle(300)
# Create an object with the new style
obj = lv.img(lv.scr_act())
obj.add_style(style, 0)
obj.set_src(img_cogwheel_argb)
obj.center()
5.3. Styles 317


--- Page 322 ---


LVGLDocumentation8.3
Arcstyles
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/style/lv_example_style_7.c
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/style/lv_example_style_7.py
Textstyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LABEL
/**
* Using the text style properties
*/
void lv_example_style_8(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 5);
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_bg_color(&style, lv_palette_lighten(LV_PALETTE_GREY, 2));
lv_style_set_border_width(&style, 2);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_pad_all(&style, 10);
lv_style_set_text_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_text_letter_space(&style, 5);
lv_style_set_text_line_space(&style, 20);
lv_style_set_text_decor(&style, LV_TEXT_DECOR_UNDERLINE);
/*Create an object with the new style*/
lv_obj_t * obj = lv_label_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
lv_label_set_text(obj, "Text of\n"
"a label");
lv_obj_center(obj);
}
#endif
#
# Using the text style properties
#
style = lv.style_t()
style.init()
style.set_radius(5)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_lighten(lv.PALETTE.GREY, 3))
style.set_border_width(2)
(continuesonnextpage)
5.3. Styles 318


--- Page 323 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_pad_all(10)
style.set_text_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_text_letter_space(5)
style.set_text_line_space(20)
style.set_text_decor(lv.TEXT_DECOR.UNDERLINE)
# Create an object with the new style
obj = lv.label(lv.scr_act())
obj.add_style(style, 0)
obj.set_text("Text of\n"
"a label")
obj.center()
Linestyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LINE
/**
* Using the line style properties
*/
void lv_example_style_9(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_line_color(&style, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_line_width(&style, 6);
lv_style_set_line_rounded(&style, true);
/*Create an object with the new style*/
lv_obj_t * obj = lv_line_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
static lv_point_t p[] = {{10, 30}, {30, 50}, {100, 0}};
lv_line_set_points(obj, p, 3);
lv_obj_center(obj);
}
#endif
#
# Using the line style properties
#
style = lv.style_t()
style.init()
style.set_line_color(lv.palette_main(lv.PALETTE.GREY))
(continuesonnextpage)
5.3. Styles 319


--- Page 324 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style.set_line_width(6)
style.set_line_rounded(True)
# Create an object with the new style
obj = lv.line(lv.scr_act())
obj.add_style(style, 0)
p = [ {"x":10, "y":30},
{"x":30, "y":50},
{"x":100, "y":0}]
obj.set_points(p, 3)
obj.center()
Transition
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Creating a transition
*/
void lv_example_style_10(void)
{
static const lv_style_prop_t props[] = {LV_STYLE_BG_COLOR, LV_STYLE_BORDER_COLOR,␣
,→LV_STYLE_BORDER_WIDTH, 0};
/* A default transition
* Make it fast (100ms) and start with some delay (200 ms)*/
static lv_style_transition_dsc_t trans_def;
lv_style_transition_dsc_init(&trans_def, props, lv_anim_path_linear, 100, 200,␣
,→NULL);
/* A special transition when going to pressed state
* Make it slow (500 ms) but start without delay*/
static lv_style_transition_dsc_t trans_pr;
lv_style_transition_dsc_init(&trans_pr, props, lv_anim_path_linear, 500, 0, NULL);
static lv_style_t style_def;
lv_style_init(&style_def);
lv_style_set_transition(&style_def, &trans_def);
static lv_style_t style_pr;
lv_style_init(&style_pr);
lv_style_set_bg_color(&style_pr, lv_palette_main(LV_PALETTE_RED));
lv_style_set_border_width(&style_pr, 6);
lv_style_set_border_color(&style_pr, lv_palette_darken(LV_PALETTE_RED, 3));
lv_style_set_transition(&style_pr, &trans_pr);
/*Create an object with the new style_pr*/
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style_def, 0);
lv_obj_add_style(obj, &style_pr, LV_STATE_PRESSED);
lv_obj_center(obj);
(continuesonnextpage)
5.3. Styles 320


--- Page 325 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
#
# Creating a transition
#
props = [lv.STYLE.BG_COLOR, lv.STYLE.BORDER_COLOR, lv.STYLE.BORDER_WIDTH, 0]
# A default transition
# Make it fast (100ms) and start with some delay (200 ms)
trans_def = lv.style_transition_dsc_t()
trans_def.init(props, lv.anim_t.path_linear, 100, 200, None)
# A special transition when going to pressed state
# Make it slow (500 ms) but start without delay
trans_pr = lv.style_transition_dsc_t()
trans_pr.init(props, lv.anim_t.path_linear, 500, 0, None)
style_def = lv.style_t()
style_def.init()
style_def.set_transition(trans_def)
style_pr = lv.style_t()
style_pr.init()
style_pr.set_bg_color(lv.palette_main(lv.PALETTE.RED))
style_pr.set_border_width(6)
style_pr.set_border_color(lv.palette_darken(lv.PALETTE.RED, 3))
style_pr.set_transition(trans_pr)
# Create an object with the new style_pr
obj = lv.obj(lv.scr_act())
obj.add_style(style_def, 0)
obj.add_style(style_pr, lv.STATE.PRESSED)
obj.center()
Usingmultiplestyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Using multiple styles
*/
void lv_example_style_11(void)
{
/*A base style*/
static lv_style_t style_base;
lv_style_init(&style_base);
lv_style_set_bg_color(&style_base, lv_palette_main(LV_PALETTE_LIGHT_BLUE));
(continuesonnextpage)
5.3. Styles 321


--- Page 326 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_set_border_color(&style_base, lv_palette_darken(LV_PALETTE_LIGHT_BLUE,␣
,→3));
lv_style_set_border_width(&style_base, 2);
lv_style_set_radius(&style_base, 10);
lv_style_set_shadow_width(&style_base, 10);
lv_style_set_shadow_ofs_y(&style_base, 5);
lv_style_set_shadow_opa(&style_base, LV_OPA_50);
lv_style_set_text_color(&style_base, lv_color_white());
lv_style_set_width(&style_base, 100);
lv_style_set_height(&style_base, LV_SIZE_CONTENT);
/*Set only the properties that should be different*/
static lv_style_t style_warning;
lv_style_init(&style_warning);
lv_style_set_bg_color(&style_warning, lv_palette_main(LV_PALETTE_YELLOW));
lv_style_set_border_color(&style_warning, lv_palette_darken(LV_PALETTE_YELLOW,␣
,→3));
lv_style_set_text_color(&style_warning, lv_palette_darken(LV_PALETTE_YELLOW, 4));
/*Create an object with the base style only*/
lv_obj_t * obj_base = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj_base, &style_base, 0);
lv_obj_align(obj_base, LV_ALIGN_LEFT_MID, 20, 0);
lv_obj_t * label = lv_label_create(obj_base);
lv_label_set_text(label, "Base");
lv_obj_center(label);
/*Create another object with the base style and earnings style too*/
lv_obj_t * obj_warning = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj_warning, &style_base, 0);
lv_obj_add_style(obj_warning, &style_warning, 0);
lv_obj_align(obj_warning, LV_ALIGN_RIGHT_MID, -20, 0);
label = lv_label_create(obj_warning);
lv_label_set_text(label, "Warning");
lv_obj_center(label);
}
#endif
#
# Using multiple styles
#
# A base style
style_base = lv.style_t()
style_base.init()
style_base.set_bg_color(lv.palette_main(lv.PALETTE.LIGHT_BLUE))
style_base.set_border_color(lv.palette_darken(lv.PALETTE.LIGHT_BLUE, 3))
style_base.set_border_width(2)
style_base.set_radius(10)
style_base.set_shadow_width(10)
style_base.set_shadow_ofs_y(5)
style_base.set_shadow_opa(lv.OPA._50)
style_base.set_text_color(lv.color_white())
(continuesonnextpage)
5.3. Styles 322


--- Page 327 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_base.set_width(100)
style_base.set_height(lv.SIZE.CONTENT)
# Set only the properties that should be different
style_warning = lv.style_t()
style_warning.init()
style_warning.set_bg_color(lv.palette_main(lv.PALETTE.YELLOW))
style_warning.set_border_color(lv.palette_darken(lv.PALETTE.YELLOW, 3))
style_warning.set_text_color(lv.palette_darken(lv.PALETTE.YELLOW, 4))
# Create an object with the base style only
obj_base = lv.obj(lv.scr_act())
obj_base.add_style(style_base, 0)
obj_base.align(lv.ALIGN.LEFT_MID, 20, 0)
label = lv.label(obj_base)
label.set_text("Base")
label.center()
# Create another object with the base style and earnings style too
obj_warning = lv.obj(lv.scr_act())
obj_warning.add_style(style_base, 0)
obj_warning.add_style(style_warning, 0)
obj_warning.align(lv.ALIGN.RIGHT_MID, -20, 0)
label = lv.label(obj_warning)
label.set_text("Warning")
label.center()
Localstyles
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Local styles
*/
void lv_example_style_12(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_GREEN));
lv_style_set_border_color(&style, lv_palette_lighten(LV_PALETTE_GREEN, 3));
lv_style_set_border_width(&style, 3);
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj, &style, 0);
/*Overwrite the background color locally*/
lv_obj_set_style_bg_color(obj, lv_palette_main(LV_PALETTE_ORANGE), LV_PART_MAIN);
lv_obj_center(obj);
}
#endif
5.3. Styles 323


--- Page 328 ---


LVGLDocumentation8.3
#
# Local styles
#
style = lv.style_t()
style.init()
style.set_bg_color(lv.palette_main(lv.PALETTE.GREEN))
style.set_border_color(lv.palette_lighten(lv.PALETTE.GREEN, 3))
style.set_border_width(3)
obj = lv.obj(lv.scr_act())
obj.add_style(style, 0)
# Overwrite the background color locally
obj.set_style_bg_color(lv.palette_main(lv.PALETTE.ORANGE), lv.PART.MAIN)
obj.center()
Addstylestopartsandstates
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
/**
* Add styles to parts and states
*/
void lv_example_style_13(void)
{
static lv_style_t style_indic;
lv_style_init(&style_indic);
lv_style_set_bg_color(&style_indic, lv_palette_lighten(LV_PALETTE_RED, 3));
lv_style_set_bg_grad_color(&style_indic, lv_palette_main(LV_PALETTE_RED));
lv_style_set_bg_grad_dir(&style_indic, LV_GRAD_DIR_HOR);
static lv_style_t style_indic_pr;
lv_style_init(&style_indic_pr);
lv_style_set_shadow_color(&style_indic_pr, lv_palette_main(LV_PALETTE_RED));
lv_style_set_shadow_width(&style_indic_pr, 10);
lv_style_set_shadow_spread(&style_indic_pr, 3);
/*Create an object with the new style_pr*/
lv_obj_t * obj = lv_slider_create(lv_scr_act());
lv_obj_add_style(obj, &style_indic, LV_PART_INDICATOR);
lv_obj_add_style(obj, &style_indic_pr, LV_PART_INDICATOR | LV_STATE_PRESSED);
lv_slider_set_value(obj, 70, LV_ANIM_OFF);
lv_obj_center(obj);
}
#endif
#
# Add styles to parts and states
#
style_indic = lv.style_t()
(continuesonnextpage)
5.3. Styles 324


--- Page 329 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_indic.init()
style_indic.set_bg_color(lv.palette_lighten(lv.PALETTE.RED, 3))
style_indic.set_bg_grad_color(lv.palette_main(lv.PALETTE.RED))
style_indic.set_bg_grad_dir(lv.GRAD_DIR.HOR)
style_indic_pr = lv.style_t()
style_indic_pr.init()
style_indic_pr.set_shadow_color(lv.palette_main(lv.PALETTE.RED))
style_indic_pr.set_shadow_width(10)
style_indic_pr.set_shadow_spread(3)
# Create an object with the new style_pr
obj = lv.slider(lv.scr_act())
obj.add_style(style_indic, lv.PART.INDICATOR)
obj.add_style(style_indic_pr, lv.PART.INDICATOR | lv.STATE.PRESSED)
obj.set_value(70, lv.ANIM.OFF)
obj.center()
Extendingthecurrenttheme
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_IMG
static lv_style_t style_btn;
/*Will be called when the styles of the base theme are already added
to add new styles*/
static void new_theme_apply_cb(lv_theme_t * th, lv_obj_t * obj)
{
LV_UNUSED(th);
if(lv_obj_check_type(obj, &lv_btn_class)) {
lv_obj_add_style(obj, &style_btn, 0);
}
}
static void new_theme_init_and_set(void)
{
/*Initialize the styles*/
lv_style_init(&style_btn);
lv_style_set_bg_color(&style_btn, lv_palette_main(LV_PALETTE_GREEN));
lv_style_set_border_color(&style_btn, lv_palette_darken(LV_PALETTE_GREEN, 3));
lv_style_set_border_width(&style_btn, 3);
/*Initialize the new theme from the current theme*/
lv_theme_t * th_act = lv_disp_get_theme(NULL);
static lv_theme_t th_new;
th_new = *th_act;
/*Set the parent theme and the style apply callback for the new theme*/
lv_theme_set_parent(&th_new, th_act);
lv_theme_set_apply_cb(&th_new, new_theme_apply_cb);
/*Assign the new theme to the current display*/
lv_disp_set_theme(NULL, &th_new);
(continuesonnextpage)
5.3. Styles 325


--- Page 330 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
/**
* Extending the current theme
*/
void lv_example_style_14(void)
{
lv_obj_t * btn;
lv_obj_t * label;
btn = lv_btn_create(lv_scr_act());
lv_obj_align(btn, LV_ALIGN_TOP_MID, 0, 20);
label = lv_label_create(btn);
lv_label_set_text(label, "Original theme");
new_theme_init_and_set();
btn = lv_btn_create(lv_scr_act());
lv_obj_align(btn, LV_ALIGN_BOTTOM_MID, 0, -20);
label = lv_label_create(btn);
lv_label_set_text(label, "New theme");
}
#endif
# Will be called when the styles of the base theme are already added
# to add new styles
class NewTheme(lv.theme_t):
def __init__(self):
super().__init__()
# Initialize the styles
self.style_btn = lv.style_t()
self.style_btn.init()
self.style_btn.set_bg_color(lv.palette_main(lv.PALETTE.GREEN))
self.style_btn.set_border_color(lv.palette_darken(lv.PALETTE.GREEN, 3))
self.style_btn.set_border_width(3)
# This theme is based on active theme
th_act = lv.theme_get_from_obj(lv.scr_act())
# This theme will be applied only after base theme is applied
self.set_parent(th_act)
class ExampleStyle_14:
def __init__(self):
#
# Extending the current theme
#
btn = lv.btn(lv.scr_act())
btn.align(lv.ALIGN.TOP_MID, 0, 20)
(continuesonnextpage)
5.3. Styles 326


--- Page 331 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(btn)
label.set_text("Original theme")
self.new_theme_init_and_set()
btn = lv.btn(lv.scr_act())
btn.align(lv.ALIGN.BOTTOM_MID, 0, -20)
label = lv.label(btn)
label.set_text("New theme")
def new_theme_apply_cb(self, th, obj):
print(th,obj)
if obj.get_class() == lv.btn_class:
obj.add_style(self.th_new.style_btn, 0)
def new_theme_init_and_set(self):
print("new_theme_init_and_set")
# Initialize the new theme from the current theme
self.th_new = NewTheme()
self.th_new.set_apply_cb(self.new_theme_apply_cb)
lv.disp_get_default().set_theme(self.th_new)
exampleStyle_14 = ExampleStyle_14()
OpacityandTransformations
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_BTN && LV_USE_LABEL
/**
* Opacity and Transformations
*/
void lv_example_style_15(void)
{
lv_obj_t * btn;
lv_obj_t * label;
/*Normal button*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 40);
lv_obj_align(btn, LV_ALIGN_CENTER, 0, -70);
label = lv_label_create(btn);
lv_label_set_text(label, "Normal");
lv_obj_center(label);
/*Set opacity
*The button and the label is rendered to a layer first and that layer is␣
,→blended*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 40);
lv_obj_set_style_opa(btn, LV_OPA_50, 0);
(continuesonnextpage)
5.3. Styles 327


--- Page 332 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_align(btn, LV_ALIGN_CENTER, 0, 0);
label = lv_label_create(btn);
lv_label_set_text(label, "Opa:50%");
lv_obj_center(label);
/*Set transformations
*The button and the label is rendered to a layer first and that layer is␣
,→transformed*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 40);
lv_obj_set_style_transform_angle(btn, 150, 0); /*15 deg*/
lv_obj_set_style_transform_zoom(btn, 256 + 64, 0); /*1.25x*/
lv_obj_set_style_transform_pivot_x(btn, 50, 0);
lv_obj_set_style_transform_pivot_y(btn, 20, 0);
lv_obj_set_style_opa(btn, LV_OPA_50, 0);
lv_obj_align(btn, LV_ALIGN_CENTER, 0, 70);
label = lv_label_create(btn);
lv_label_set_text(label, "Transf.");
lv_obj_center(label);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/styles/lv_example_style_15.py
5.3.15 API
Typedefs
typedefuint8_tlv_blend_mode_t
typedefuint8_tlv_text_decor_t
typedefuint8_tlv_border_side_t
typedefuint8_tlv_grad_dir_t
typedefuint8_tlv_dither_mode_t
typedefuint8_tlv_style_res_t
5.3. Styles 328


--- Page 333 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Possibleoptionshowtoblendopaquedrawings
Values:
enumeratorLV_BLEND_MODE_NORMAL
Simplymixaccordingtotheopacityvalue
enumeratorLV_BLEND_MODE_ADDITIVE
Addtherespectivecolorchannels
enumeratorLV_BLEND_MODE_SUBTRACTIVE
Subtracttheforegroundfromthebackground
enumeratorLV_BLEND_MODE_MULTIPLY
Multiplytheforegroundandbackground
enumeratorLV_BLEND_MODE_REPLACE
Replacebackgroundwithforegroundinthearea
enum[anonymous]
Someoptionstoapplydecorationsontexts. 'OR'edvaluescanbeused.
Values:
enumeratorLV_TEXT_DECOR_NONE
enumeratorLV_TEXT_DECOR_UNDERLINE
enumeratorLV_TEXT_DECOR_STRIKETHROUGH
enum[anonymous]
Selectsonwhichsidesbordershouldbedrawn'OR'edvaluescanbeused.
Values:
enumeratorLV_BORDER_SIDE_NONE
enumeratorLV_BORDER_SIDE_BOTTOM
enumeratorLV_BORDER_SIDE_TOP
enumeratorLV_BORDER_SIDE_LEFT
5.3. Styles 329


--- Page 334 ---


LVGLDocumentation8.3
enumeratorLV_BORDER_SIDE_RIGHT
enumeratorLV_BORDER_SIDE_FULL
enumeratorLV_BORDER_SIDE_INTERNAL
FORmatrix-likeobjects(e.g. Buttonmatrix)
enum[anonymous]
Thedirectionofthegradient.
Values:
enumeratorLV_GRAD_DIR_NONE
Nogradient(thegrad_colorpropertyisignored)
enumeratorLV_GRAD_DIR_VER
Vertical(toptobottom)gradient
enumeratorLV_GRAD_DIR_HOR
Horizontal(lefttoright)gradient
enum[anonymous]
TheditheringalgorithmforthegradientDependsonLV_DITHER_GRADIENT
Values:
enumeratorLV_DITHER_NONE
Nodithering,colorsarejustquantizedtotheoutputresolution
enumeratorLV_DITHER_ORDERED
Ordereddithering. Fastertocomputeanduselessmemorybutlowerquality
enumeratorLV_DITHER_ERR_DIFF
Errordiffusionmode. Slowertocomputeandusemorememorybutgivehighestditherquality
enumlv_style_prop_t
Enumerationofallbuiltinstyleproperties
Propsaresplitintogroupsof16. Whenaddinganewproptoagroup,ensureitdoesnotoverflowintothenextone.
Values:
enumeratorLV_STYLE_PROP_INV
enumeratorLV_STYLE_WIDTH
enumeratorLV_STYLE_MIN_WIDTH
5.3. Styles 330


--- Page 335 ---


LVGLDocumentation8.3
enumeratorLV_STYLE_MAX_WIDTH
enumeratorLV_STYLE_HEIGHT
enumeratorLV_STYLE_MIN_HEIGHT
enumeratorLV_STYLE_MAX_HEIGHT
enumeratorLV_STYLE_X
enumeratorLV_STYLE_Y
enumeratorLV_STYLE_ALIGN
enumeratorLV_STYLE_LAYOUT
enumeratorLV_STYLE_RADIUS
enumeratorLV_STYLE_PAD_TOP
enumeratorLV_STYLE_PAD_BOTTOM
enumeratorLV_STYLE_PAD_LEFT
enumeratorLV_STYLE_PAD_RIGHT
enumeratorLV_STYLE_PAD_ROW
enumeratorLV_STYLE_PAD_COLUMN
enumeratorLV_STYLE_BASE_DIR
enumeratorLV_STYLE_CLIP_CORNER
enumeratorLV_STYLE_BG_COLOR
enumeratorLV_STYLE_BG_OPA
enumeratorLV_STYLE_BG_GRAD_COLOR
enumeratorLV_STYLE_BG_GRAD_DIR
5.3. Styles 331


--- Page 336 ---


LVGLDocumentation8.3
enumeratorLV_STYLE_BG_MAIN_STOP
enumeratorLV_STYLE_BG_GRAD_STOP
enumeratorLV_STYLE_BG_GRAD
enumeratorLV_STYLE_BG_DITHER_MODE
enumeratorLV_STYLE_BG_IMG_SRC
enumeratorLV_STYLE_BG_IMG_OPA
enumeratorLV_STYLE_BG_IMG_RECOLOR
enumeratorLV_STYLE_BG_IMG_RECOLOR_OPA
enumeratorLV_STYLE_BG_IMG_TILED
enumeratorLV_STYLE_BORDER_COLOR
enumeratorLV_STYLE_BORDER_OPA
enumeratorLV_STYLE_BORDER_WIDTH
enumeratorLV_STYLE_BORDER_SIDE
enumeratorLV_STYLE_BORDER_POST
enumeratorLV_STYLE_OUTLINE_WIDTH
enumeratorLV_STYLE_OUTLINE_COLOR
enumeratorLV_STYLE_OUTLINE_OPA
enumeratorLV_STYLE_OUTLINE_PAD
enumeratorLV_STYLE_SHADOW_WIDTH
enumeratorLV_STYLE_SHADOW_OFS_X
enumeratorLV_STYLE_SHADOW_OFS_Y
5.3. Styles 332


--- Page 337 ---


LVGLDocumentation8.3
enumeratorLV_STYLE_SHADOW_SPREAD
enumeratorLV_STYLE_SHADOW_COLOR
enumeratorLV_STYLE_SHADOW_OPA
enumeratorLV_STYLE_IMG_OPA
enumeratorLV_STYLE_IMG_RECOLOR
enumeratorLV_STYLE_IMG_RECOLOR_OPA
enumeratorLV_STYLE_LINE_WIDTH
enumeratorLV_STYLE_LINE_DASH_WIDTH
enumeratorLV_STYLE_LINE_DASH_GAP
enumeratorLV_STYLE_LINE_ROUNDED
enumeratorLV_STYLE_LINE_COLOR
enumeratorLV_STYLE_LINE_OPA
enumeratorLV_STYLE_ARC_WIDTH
enumeratorLV_STYLE_ARC_ROUNDED
enumeratorLV_STYLE_ARC_COLOR
enumeratorLV_STYLE_ARC_OPA
enumeratorLV_STYLE_ARC_IMG_SRC
enumeratorLV_STYLE_TEXT_COLOR
enumeratorLV_STYLE_TEXT_OPA
enumeratorLV_STYLE_TEXT_FONT
enumeratorLV_STYLE_TEXT_LETTER_SPACE
5.3. Styles 333


--- Page 338 ---


LVGLDocumentation8.3
enumeratorLV_STYLE_TEXT_LINE_SPACE
enumeratorLV_STYLE_TEXT_DECOR
enumeratorLV_STYLE_TEXT_ALIGN
enumeratorLV_STYLE_OPA
enumeratorLV_STYLE_OPA_LAYERED
enumeratorLV_STYLE_COLOR_FILTER_DSC
enumeratorLV_STYLE_COLOR_FILTER_OPA
enumeratorLV_STYLE_ANIM
enumeratorLV_STYLE_ANIM_TIME
enumeratorLV_STYLE_ANIM_SPEED
enumeratorLV_STYLE_TRANSITION
enumeratorLV_STYLE_BLEND_MODE
enumeratorLV_STYLE_TRANSFORM_WIDTH
enumeratorLV_STYLE_TRANSFORM_HEIGHT
enumeratorLV_STYLE_TRANSLATE_X
enumeratorLV_STYLE_TRANSLATE_Y
enumeratorLV_STYLE_TRANSFORM_ZOOM
enumeratorLV_STYLE_TRANSFORM_ANGLE
enumeratorLV_STYLE_TRANSFORM_PIVOT_X
enumeratorLV_STYLE_TRANSFORM_PIVOT_Y
enumerator_LV_STYLE_LAST_BUILT_IN_PROP
5.3. Styles 334


--- Page 339 ---


LVGLDocumentation8.3
enumerator_LV_STYLE_NUM_BUILT_IN_PROPS
enumeratorLV_STYLE_PROP_ANY
enumerator_LV_STYLE_PROP_CONST
enum[anonymous]
Values:
enumeratorLV_STYLE_RES_NOT_FOUND
enumeratorLV_STYLE_RES_FOUND
enumeratorLV_STYLE_RES_INHERIT
Functions
LV_EXPORT_CONST_INT(LV_IMG_ZOOM_NONE)
voidlv_style_init(lv_style_t*style)
Initializeastyle
Note: Donotcalllv_style_initonstylesthatalreadyhavesomepropertiesbecausethisfunctionwon'tfree
theusedmemory,justsetsadefaultstateforthestyle. Inotherwordsbesuretoinitializestylesonlyonce!
Parameters style--pointertoastyletoinitialize
voidlv_style_reset(lv_style_t*style)
Clearallpropertiesfromastyleandfreeallallocatedmemories.
Parameters style--pointertoastyle
lv_style_prop_tlv_style_register_prop(uint8_tflag)
lv_style_prop_tlv_style_get_num_custom_props(void)
Getthenumberofcustompropertiesthathavebeenregisteredthusfar.
boollv_style_remove_prop(lv_style_t*style,lv_style_prop_tprop)
Removeapropertyfromastyle
Parameters
• style--pointertoastyle
• prop--astylepropertyORedwithastate.
Returns true: thepropertywasfoundandremoved;false: thepropertywasn'tfound
5.3. Styles 335


--- Page 340 ---


LVGLDocumentation8.3
voidlv_style_set_prop(lv_style_t*style,lv_style_prop_tprop,lv_style_value_tvalue)
Set the value of property in a style. This function shouldn't be used directly by the user. Instead use
lv_style_set_<prop_name>(). E.g. lv_style_set_bg_color()
Parameters
• style--pointertostyle
• prop--theIDofaproperty(e.g. LV_STYLE_BG_COLOR)
• value -- lv_style_value_t variable in which a field is set according to the type of
prop
voidlv_style_set_prop_meta(lv_style_t*style,lv_style_prop_tprop,uint16_tmeta)
Setaspecialmetastateforapropertyinastyle. Thisfunctionshouldn'tbeuseddirectlybytheuser.
Parameters
• style--pointertostyle
• prop--theIDofaproperty(e.g. LV_STYLE_BG_COLOR)
• meta--themetavaluetoattachtothepropertyinthestyle
lv_style_res_tlv_style_get_prop(constlv_style_t*style,lv_style_prop_tprop,lv_style_value_t*value)
Getthevalueofaproperty
Note: Forperformancereasonstherearenosanitycheckonstyle
Parameters
• style--pointertoastyle
• prop--theIDofaproperty
• value--pointertoalv_style_value_tvariabletostorethevalue
Returns LV_RES_INV:thepropertywasn'tfoundinthestyle(valueisunchanged)LV_RES_OK:
thepropertywasfond,andvalueissetaccordingly
voidlv_style_transition_dsc_init(lv_style_transition_dsc_t*tr,constlv_style_prop_tprops[],
lv_anim_path_cb_tpath_cb,uint32_ttime,uint32_tdelay,void
*user_data)
lv_style_value_tlv_style_prop_get_default(lv_style_prop_tprop)
Getthedefaultvalueofaproperty
Parameters prop--theIDofaproperty
Returns thedefaultvalue
staticinlinelv_style_res_tlv_style_get_prop_inlined(constlv_style_t*style,lv_style_prop_tprop,
lv_style_value_t*value)
Getthevalueofaproperty
Note: Forperformancereasonstherearenosanitycheckonstyle
5.3. Styles 336


--- Page 341 ---


LVGLDocumentation8.3
Note: Thisfunctionisthesameaslv_style_get_propbutinlined. Useitonlyonperformancecriticalplaces
Parameters
• style--pointertoastyle
• prop--theIDofaproperty
• value--pointertoalv_style_value_tvariabletostorethevalue
Returns LV_RES_INV:thepropertywasn'tfoundinthestyle(valueisunchanged)LV_RES_OK:
thepropertywasfond,andvalueissetaccordingly
boollv_style_is_empty(constlv_style_t*style)
Checksifastyleisempty(hasnoproperties)
Parameters style--pointertoastyle
Returns trueifthestyleisempty
uint8_t_lv_style_get_prop_group(lv_style_prop_tprop)
Tellthegroupofaproperty. Iftheapropertyfromagroupissetinastylethe(1<<group)bitofstyle->has_group
isset. Itallowsearlyskippingthestyleifthepropertyisnotexistsinthestyleatall.
Parameters prop--astyleproperty
Returns thegroup[0..7]7meansallthecustompropertieswithindex>112
uint8_t_lv_style_prop_lookup_flags(lv_style_prop_tprop)
Gettheflagsofabuilt-inorcustomproperty.
Parameters prop--astyleproperty
Returns theflagsoftheproperty
staticinlinevoidlv_style_set_size(lv_style_t*style,lv_coord_tvalue)
staticinlinevoidlv_style_set_pad_all(lv_style_t*style,lv_coord_tvalue)
staticinlinevoidlv_style_set_pad_hor(lv_style_t*style,lv_coord_tvalue)
staticinlinevoidlv_style_set_pad_ver(lv_style_t*style,lv_coord_tvalue)
staticinlinevoidlv_style_set_pad_gap(lv_style_t*style,lv_coord_tvalue)
staticinlineboollv_style_prop_has_flag(lv_style_prop_tprop,uint8_tflag)
Checkifthestylepropertyhasaspecifiedbehavioralflag.
Donotpassmultipleflagstothisfunctionasbackwards-compatibilityisnotguaranteedforthat.
Parameters
• prop--PropertyID
• flag--Flag
Returns trueiftheflagissetforthisproperty
structlv_gradient_stop_t
#include<lv_style.h>Agradientstopdefinition. Thismatchesacolorandapositioninavirtual0-255scale.
5.3. Styles 337


--- Page 342 ---


LVGLDocumentation8.3
PublicMembers
lv_color_tcolor
Thestopcolor
uint8_tfrac
Thestoppositionin1/255unit
structlv_grad_dsc_t
#include<lv_style.h>Adescriptorofagradient.
PublicMembers
lv_gradient_stop_tstops[LV_GRADIENT_MAX_STOPS]
Agradientstoparray
uint8_tstops_count
Thenumberofusedstopsinthearray
lv_grad_dir_tdir
Thegradientdirection. AnyofLV_GRAD_DIR_HOR,LV_GRAD_DIR_VER,LV_GRAD_DIR_NONE
lv_dither_mode_tdither
Whether to dither the gradient or not. Any of LV_DITHER_NONE, LV_DITHER_ORDERED,
LV_DITHER_ERR_DIFF
unionlv_style_value_t
#include<lv_style.h>Acommontypetohandleallthepropertytypesinthesameway.
PublicMembers
int32_tnum
Numberintegernumber(opacity,enums,booleansor"normal"numbers)
constvoid*ptr
Constantpointers(font,conetext,etc)
lv_color_tcolor
Colors
structlv_style_transition_dsc_t
#include<lv_style.h>Descriptorforstyletransitions
5.3. Styles 338


--- Page 343 ---


LVGLDocumentation8.3
PublicMembers
constlv_style_prop_t*props
Anarraywiththepropertiestoanimate.
void*user_data
Acustomuserdatathatwillbepassedtotheanimation'suser_data
lv_anim_path_cb_tpath_xcb
Apathfortheanimation.
uint32_ttime
Durationofthetransitionin[ms]
uint32_tdelay
Delaybeforethetransitionin[ms]
structlv_style_const_prop_t
#include<lv_style.h>Descriptorofaconstantstyleproperty.
PublicMembers
lv_style_prop_tprop
lv_style_value_tvalue
structlv_style_t
#include<lv_style.h>Descriptorofastyle(acollectionofpropertiesandvalues).
PublicMembers
uint32_tsentinel
lv_style_value_tvalue1
uint8_t*values_and_props
constlv_style_const_prop_t*const_props
unionlv_style_t::[anonymous]v_p
uint16_tprop1
5.3. Styles 339


--- Page 344 ---


LVGLDocumentation8.3
uint8_thas_group
uint8_tprop_cnt
Typedefs
typedefvoid(*lv_theme_apply_cb_t)(struct_lv_theme_t*,lv_obj_t*)
typedefstruct_lv_theme_tlv_theme_t
Functions
lv_theme_t*lv_theme_get_from_obj(lv_obj_t*obj)
Getthethemeassignedtothedisplayoftheobject
Parameters obj--pointertoathemeobject
Returns thethemeoftheobject'sdisplay(canbeNULL)
voidlv_theme_apply(lv_obj_t*obj)
Applytheactivethemeonanobject
Parameters obj--pointertoanobject
voidlv_theme_set_parent(lv_theme_t*new_theme,lv_theme_t*parent)
Setabasethemeforatheme. Thestylesfromthebasethemwillbeaddedbeforethestylesofthecurrenttheme.
Arbitrarylongchainofthemescanbecreatedbysettingbasethemes.
Parameters
• new_theme--pointertothemewhichbaseshouldbeset
• parent--pointertothebasetheme
voidlv_theme_set_apply_cb(lv_theme_t*theme,lv_theme_apply_cb_tapply_cb)
Setanapplycallbackforatheme. Theapplycallbackisusedtoaddstylestodifferentobjects
Parameters
• theme--pointertothemewhichcallbackshouldbeset
• apply_cb--pointertothecallback
constlv_font_t*lv_theme_get_font_small(lv_obj_t*obj)
Getthesmallfontofthetheme
Parameters obj--pointertoanobject
Returns pointertothefont
constlv_font_t*lv_theme_get_font_normal(lv_obj_t*obj)
Getthenormalfontofthetheme
Parameters obj--pointertoanobject
Returns pointertothefont
5.3. Styles 340


--- Page 345 ---


LVGLDocumentation8.3
constlv_font_t*lv_theme_get_font_large(lv_obj_t*obj)
Getthesubtitlefontofthetheme
Parameters obj--pointertoanobject
Returns pointertothefont
lv_color_tlv_theme_get_color_primary(lv_obj_t*obj)
Gettheprimarycolorofthetheme
Parameters obj--pointertoanobject
Returns thecolor
lv_color_tlv_theme_get_color_secondary(lv_obj_t*obj)
Getthesecondarycolorofthetheme
Parameters obj--pointertoanobject
Returns thecolor
struct_lv_theme_t
PublicMembers
lv_theme_apply_cb_tapply_cb
struct_lv_theme_t*parent
Applythecurrenttheme'sstyleontopofthistheme.
void*user_data
struct_lv_disp_t*disp
lv_color_tcolor_primary
lv_color_tcolor_secondary
constlv_font_t*font_small
constlv_font_t*font_normal
constlv_font_t*font_large
uint32_tflags
5.3. Styles 341


--- Page 346 ---


LVGLDocumentation8.3
Functions
staticinlinelv_coord_tlv_obj_get_style_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_min_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_max_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_height(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_min_height(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_max_height(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_x(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_y(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_align_tlv_obj_get_style_align(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_transform_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_transform_height(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_translate_x(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_translate_y(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_transform_zoom(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_transform_angle(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_transform_pivot_x(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_transform_pivot_y(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_pad_top(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_pad_bottom(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_pad_left(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_pad_right(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_pad_row(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_pad_column(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_bg_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_bg_color_filtered(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_opa_tlv_obj_get_style_bg_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_bg_grad_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_bg_grad_color_filtered(conststruct_lv_obj_t*obj,
uint32_tpart)
staticinlinelv_grad_dir_tlv_obj_get_style_bg_grad_dir(conststruct_lv_obj_t*obj,uint32_tpart)
5.3. Styles 342


--- Page 347 ---


LVGLDocumentation8.3
staticinlinelv_coord_tlv_obj_get_style_bg_main_stop(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_bg_grad_stop(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineconstlv_grad_dsc_t*lv_obj_get_style_bg_grad(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_dither_mode_tlv_obj_get_style_bg_dither_mode(conststruct_lv_obj_t*obj,uint32_t
part)
staticinlineconstvoid*lv_obj_get_style_bg_img_src(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_opa_tlv_obj_get_style_bg_img_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_bg_img_recolor(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_bg_img_recolor_filtered(conststruct_lv_obj_t*obj,
uint32_tpart)
staticinlinelv_opa_tlv_obj_get_style_bg_img_recolor_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineboollv_obj_get_style_bg_img_tiled(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_border_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_border_color_filtered(conststruct_lv_obj_t*obj,uint32_t
part)
staticinlinelv_opa_tlv_obj_get_style_border_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_border_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_border_side_tlv_obj_get_style_border_side(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineboollv_obj_get_style_border_post(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_outline_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_outline_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_outline_color_filtered(conststruct_lv_obj_t*obj,
uint32_tpart)
staticinlinelv_opa_tlv_obj_get_style_outline_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_outline_pad(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_shadow_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_shadow_ofs_x(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_shadow_ofs_y(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_shadow_spread(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_shadow_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_shadow_color_filtered(conststruct_lv_obj_t*obj,uint32_t
part)
staticinlinelv_opa_tlv_obj_get_style_shadow_opa(conststruct_lv_obj_t*obj,uint32_tpart)
5.3. Styles 343


--- Page 348 ---


LVGLDocumentation8.3
staticinlinelv_opa_tlv_obj_get_style_img_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_img_recolor(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_img_recolor_filtered(conststruct_lv_obj_t*obj,uint32_t
part)
staticinlinelv_opa_tlv_obj_get_style_img_recolor_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_line_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_line_dash_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_line_dash_gap(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineboollv_obj_get_style_line_rounded(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_line_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_line_color_filtered(conststruct_lv_obj_t*obj,uint32_t
part)
staticinlinelv_opa_tlv_obj_get_style_line_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_arc_width(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineboollv_obj_get_style_arc_rounded(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_arc_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_arc_color_filtered(conststruct_lv_obj_t*obj,uint32_t
part)
staticinlinelv_opa_tlv_obj_get_style_arc_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineconstvoid*lv_obj_get_style_arc_img_src(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_text_color(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_color_tlv_obj_get_style_text_color_filtered(conststruct_lv_obj_t*obj,uint32_t
part)
staticinlinelv_opa_tlv_obj_get_style_text_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineconstlv_font_t*lv_obj_get_style_text_font(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_text_letter_space(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_text_line_space(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_text_decor_tlv_obj_get_style_text_decor(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_text_align_tlv_obj_get_style_text_align(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_radius(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineboollv_obj_get_style_clip_corner(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_opa_tlv_obj_get_style_opa(conststruct_lv_obj_t*obj,uint32_tpart)
5.3. Styles 344


--- Page 349 ---


LVGLDocumentation8.3
staticinlinelv_opa_tlv_obj_get_style_opa_layered(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineconstlv_color_filter_dsc_t*lv_obj_get_style_color_filter_dsc(conststruct_lv_obj_t*obj,
uint32_tpart)
staticinlinelv_opa_tlv_obj_get_style_color_filter_opa(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineconstlv_anim_t*lv_obj_get_style_anim(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineuint32_tlv_obj_get_style_anim_time(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineuint32_tlv_obj_get_style_anim_speed(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineconstlv_style_transition_dsc_t*lv_obj_get_style_transition(conststruct_lv_obj_t*obj,
uint32_tpart)
staticinlinelv_blend_mode_tlv_obj_get_style_blend_mode(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlineuint16_tlv_obj_get_style_layout(conststruct_lv_obj_t*obj,uint32_tpart)
staticinlinelv_base_dir_tlv_obj_get_style_base_dir(conststruct_lv_obj_t*obj,uint32_tpart)
voidlv_obj_set_style_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_min_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_max_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_height(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_min_height(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_max_height(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_x(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_y(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_align(struct_lv_obj_t*obj,lv_align_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_transform_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_transform_height(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_translate_x(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_translate_y(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_transform_zoom(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_transform_angle(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_transform_pivot_x(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
5.3. Styles 345


--- Page 350 ---


LVGLDocumentation8.3
voidlv_obj_set_style_transform_pivot_y(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_pad_top(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_pad_bottom(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_pad_left(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_pad_right(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_pad_row(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_pad_column(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_bg_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_bg_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_bg_grad_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_bg_grad_dir(struct_lv_obj_t*obj,lv_grad_dir_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_bg_main_stop(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_bg_grad_stop(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_bg_grad(struct_lv_obj_t*obj,constlv_grad_dsc_t*value,lv_style_selector_t
selector)
voidlv_obj_set_style_bg_dither_mode(struct_lv_obj_t*obj,lv_dither_mode_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_bg_img_src(struct_lv_obj_t*obj,constvoid*value,lv_style_selector_tselector)
voidlv_obj_set_style_bg_img_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_bg_img_recolor(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_bg_img_recolor_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_bg_img_tiled(struct_lv_obj_t*obj,boolvalue,lv_style_selector_tselector)
voidlv_obj_set_style_border_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_border_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_border_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_border_side(struct_lv_obj_t*obj,lv_border_side_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_border_post(struct_lv_obj_t*obj,boolvalue,lv_style_selector_tselector)
voidlv_obj_set_style_outline_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
5.3. Styles 346


--- Page 351 ---


LVGLDocumentation8.3
voidlv_obj_set_style_outline_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_outline_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_outline_pad(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_shadow_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_shadow_ofs_x(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_shadow_ofs_y(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_shadow_spread(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_shadow_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_shadow_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_img_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_img_recolor(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_img_recolor_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_line_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_line_dash_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_line_dash_gap(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_line_rounded(struct_lv_obj_t*obj,boolvalue,lv_style_selector_tselector)
voidlv_obj_set_style_line_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_line_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_arc_width(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_arc_rounded(struct_lv_obj_t*obj,boolvalue,lv_style_selector_tselector)
voidlv_obj_set_style_arc_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_arc_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_arc_img_src(struct_lv_obj_t*obj,constvoid*value,lv_style_selector_tselector)
voidlv_obj_set_style_text_color(struct_lv_obj_t*obj,lv_color_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_text_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_text_font(struct_lv_obj_t*obj,constlv_font_t*value,lv_style_selector_tselector)
voidlv_obj_set_style_text_letter_space(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
5.3. Styles 347


--- Page 352 ---


LVGLDocumentation8.3
voidlv_obj_set_style_text_line_space(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_text_decor(struct_lv_obj_t*obj,lv_text_decor_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_text_align(struct_lv_obj_t*obj,lv_text_align_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_radius(struct_lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_clip_corner(struct_lv_obj_t*obj,boolvalue,lv_style_selector_tselector)
voidlv_obj_set_style_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_opa_layered(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_color_filter_dsc(struct_lv_obj_t*obj,constlv_color_filter_dsc_t*value,
lv_style_selector_tselector)
voidlv_obj_set_style_color_filter_opa(struct_lv_obj_t*obj,lv_opa_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_anim(struct_lv_obj_t*obj,constlv_anim_t*value,lv_style_selector_tselector)
voidlv_obj_set_style_anim_time(struct_lv_obj_t*obj,uint32_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_anim_speed(struct_lv_obj_t*obj,uint32_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_transition(struct_lv_obj_t*obj,constlv_style_transition_dsc_t*value,
lv_style_selector_tselector)
voidlv_obj_set_style_blend_mode(struct_lv_obj_t*obj,lv_blend_mode_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_layout(struct_lv_obj_t*obj,uint16_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_base_dir(struct_lv_obj_t*obj,lv_base_dir_tvalue,lv_style_selector_tselector)
Functions
voidlv_style_set_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_min_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_max_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_height(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_min_height(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_max_height(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_x(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_y(lv_style_t*style,lv_coord_tvalue)
5.3. Styles 348


--- Page 353 ---


LVGLDocumentation8.3
voidlv_style_set_align(lv_style_t*style,lv_align_tvalue)
voidlv_style_set_transform_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_transform_height(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_translate_x(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_translate_y(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_transform_zoom(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_transform_angle(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_transform_pivot_x(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_transform_pivot_y(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_pad_top(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_pad_bottom(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_pad_left(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_pad_right(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_pad_row(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_pad_column(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_bg_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_bg_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_bg_grad_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_bg_grad_dir(lv_style_t*style,lv_grad_dir_tvalue)
voidlv_style_set_bg_main_stop(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_bg_grad_stop(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_bg_grad(lv_style_t*style,constlv_grad_dsc_t*value)
voidlv_style_set_bg_dither_mode(lv_style_t*style,lv_dither_mode_tvalue)
voidlv_style_set_bg_img_src(lv_style_t*style,constvoid*value)
voidlv_style_set_bg_img_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_bg_img_recolor(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_bg_img_recolor_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_bg_img_tiled(lv_style_t*style,boolvalue)
voidlv_style_set_border_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_border_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_border_width(lv_style_t*style,lv_coord_tvalue)
5.3. Styles 349


--- Page 354 ---


LVGLDocumentation8.3
voidlv_style_set_border_side(lv_style_t*style,lv_border_side_tvalue)
voidlv_style_set_border_post(lv_style_t*style,boolvalue)
voidlv_style_set_outline_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_outline_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_outline_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_outline_pad(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_shadow_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_shadow_ofs_x(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_shadow_ofs_y(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_shadow_spread(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_shadow_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_shadow_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_img_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_img_recolor(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_img_recolor_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_line_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_line_dash_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_line_dash_gap(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_line_rounded(lv_style_t*style,boolvalue)
voidlv_style_set_line_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_line_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_arc_width(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_arc_rounded(lv_style_t*style,boolvalue)
voidlv_style_set_arc_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_arc_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_arc_img_src(lv_style_t*style,constvoid*value)
voidlv_style_set_text_color(lv_style_t*style,lv_color_tvalue)
voidlv_style_set_text_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_text_font(lv_style_t*style,constlv_font_t*value)
voidlv_style_set_text_letter_space(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_text_line_space(lv_style_t*style,lv_coord_tvalue)
5.3. Styles 350


--- Page 355 ---


LVGLDocumentation8.3
voidlv_style_set_text_decor(lv_style_t*style,lv_text_decor_tvalue)
voidlv_style_set_text_align(lv_style_t*style,lv_text_align_tvalue)
voidlv_style_set_radius(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_clip_corner(lv_style_t*style,boolvalue)
voidlv_style_set_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_opa_layered(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_color_filter_dsc(lv_style_t*style,constlv_color_filter_dsc_t*value)
voidlv_style_set_color_filter_opa(lv_style_t*style,lv_opa_tvalue)
voidlv_style_set_anim(lv_style_t*style,constlv_anim_t*value)
voidlv_style_set_anim_time(lv_style_t*style,uint32_tvalue)
voidlv_style_set_anim_speed(lv_style_t*style,uint32_tvalue)
voidlv_style_set_transition(lv_style_t*style,constlv_style_transition_dsc_t*value)
voidlv_style_set_blend_mode(lv_style_t*style,lv_blend_mode_tvalue)
voidlv_style_set_layout(lv_style_t*style,uint16_tvalue)
voidlv_style_set_base_dir(lv_style_t*style,lv_base_dir_tvalue)
5.4 Style properties
5.4.1 Size and position
Propertiesrelatedtosize,position,alignmentandlayoutoftheobjects.
width
Setsthewidthofobject. Pixel,percentageandLV_SIZE_CONTENTvaluescanbeused. Percentagevaluesarerelative
tothewidthoftheparent'scontentarea.
min_width
Setsaminimalwidth. Pixelandpercentagevaluescanbeused. Percentagevaluesarerelativetothewidthoftheparent's
contentarea.
5.4. Styleproperties 351


--- Page 356 ---


LVGLDocumentation8.3
max_width
Setsamaximalwidth. Pixelandpercentagevaluescanbeused. Percentagevaluesarerelativetothewidthoftheparent's
contentarea.
height
Setstheheightofobject. Pixel,percentageandLV_SIZE_CONTENTcanbeused. Percentagevaluesarerelativetothe
heightoftheparent'scontentarea.
min_height
Setsaminimalheight. Pixelandpercentagevaluescanbeused. Percentagevaluesarerelativetothewidthoftheparent's
contentarea.
max_height
Setsamaximalheight. Pixelandpercentagevaluescanbeused. Percentagevaluesarerelativetotheheightoftheparent's
contentarea.
x
SettheXcoordinateoftheobjectconsideringthesetalign. Pixelandpercentagevaluescanbeused. Percentagevalues
arerelativetothewidthoftheparent'scontentarea.
y
SettheYcoordinateoftheobjectconsideringthesetalign. Pixelandpercentagevaluescanbeused. Percentagevalues
arerelativetotheheightoftheparent'scontentarea.
align
SetthealignmentwhichtellsfromwhichpointoftheparenttheXandYcoordinatesshouldbeinterpreted. Thepossible
values are: LV_ALIGN_DEFAULT, LV_ALIGN_TOP_LEFT/MID/RIGHT, LV_ALIGN_BOTTOM_LEFT/
MID/RIGHT, LV_ALIGN_LEFT/RIGHT_MID, LV_ALIGN_CENTER. LV_ALIGN_DEFAULT means
LV_ALIGN_TOP_LEFTwithLTRbasedirectionandLV_ALIGN_TOP_RIGHTwithRTLbasedirection.
transform_width
Make the object wider on both sides with this value. Pixel and percentage (with lv_pct(x)) values can be used.
Percentagevaluesarerelativetotheobject'swidth.
5.4. Styleproperties 352


--- Page 357 ---


LVGLDocumentation8.3
transform_height
Make the object higher on both sides with this value. Pixel and percentage (with lv_pct(x)) values can be used.
Percentagevaluesarerelativetotheobject'sheight.
translate_x
MovetheobjectwiththisvalueinXdirection. Appliedafterlayouts,alignsandotherpositioning. Pixelandpercentage
(withlv_pct(x))valuescanbeused. Percentagevaluesarerelativetotheobject'swidth.
translate_y
MovetheobjectwiththisvalueinYdirection. Appliedafterlayouts,alignsandotherpositioning. Pixelandpercentage
(withlv_pct(x))valuescanbeused. Percentagevaluesarerelativetotheobject'sheight.
transform_zoom
Zoomanobjects. Thevalue256(orLV_IMG_ZOOM_NONE)meansnormalsize,128halfsize,512doublesize,andso
on
transform_angle
Rotateanobjects. Thevalueisinterpretedin0.1degreeunits. E.g. 450means45deg.
transform_pivot_x
Setthepivotpoint'sXcoordinatefortransformations. Relativetotheobject'stopleftcorner'
transform_pivot_y
Setthepivotpoint'sYcoordinatefortransformations. Relativetotheobject'stopleftcorner'
5.4.2 Padding
Propertiestodescribespacingbetweentheparent'ssidesandthechildrenandamongthechildren. Verysimilartothe
paddingpropertiesinHTML.
pad_top
Setsthepaddingonthetop. Itmakesthecontentareasmallerinthisdirection.
5.4. Styleproperties 353


--- Page 358 ---


LVGLDocumentation8.3
pad_bottom
Setsthepaddingonthebottom. Itmakesthecontentareasmallerinthisdirection.
pad_left
Setsthepaddingontheleft. Itmakesthecontentareasmallerinthisdirection.
pad_right
Setsthepaddingontheright. Itmakesthecontentareasmallerinthisdirection.
pad_row
Setsthepaddingbetweentherows. Usedbythelayouts.
pad_column
Setsthepaddingbetweenthecolumns. Usedbythelayouts.
5.4.3 Background
Propertiestodescribethebackgroundcolorandimageoftheobjects.
bg_color
Setthebackgroundcoloroftheobject.
bg_opa
Set the opacity of the background. Value 0, LV_OPA_0 or LV_OPA_TRANSP means fully transparent, 255,
LV_OPA_100orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemi
transparency.
bg_grad_color
Setthegradientcolorofthebackground. Usedonlyifgrad_dirisnotLV_GRAD_DIR_NONE
5.4. Styleproperties 354


--- Page 359 ---


LVGLDocumentation8.3
bg_grad_dir
Setthedirectionofthegradientofthebackground. ThepossiblevaluesareLV_GRAD_DIR_NONE/HOR/VER.
bg_main_stop
Setthepointfromwhichthebackgroundcolorshouldstartforgradients. 0meanstotop/leftside,255thebottom/right
side,128thecenter,andsoon
bg_grad_stop
Setthepointfromwhichthebackground'sgradientcolorshouldstart. 0meanstotop/leftside,255thebottom/rightside,
128thecenter,andsoon
bg_grad
Set the gradient definition. The pointed instance must exist while the object is alive. NULL to disable. It wraps
BG_GRAD_COLOR, BG_GRAD_DIR, BG_MAIN_STOP and BG_GRAD_STOP into one descriptor and allows creat-
inggradientswithmorecolorstoo.
bg_dither_mode
Setthe dithering mode of thegradient of the background. Thepossible values are LV_DITHER_NONE/ORDERED/
ERR_DIFF.
bg_img_src
Setabackgroundimage. Canbeapointertolv_img_dsc_t,apathtoafileoranLV_SYMBOL_...
bg_img_opa
Set the opacity of the background image. Value 0, LV_OPA_0 or LV_OPA_TRANSP means fully transparent, 255,
LV_OPA_100orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemi
transparency.
bg_img_recolor
Setacolortomixtothebackgroundimage.
5.4. Styleproperties 355


--- Page 360 ---


LVGLDocumentation8.3
bg_img_recolor_opa
Settheintensityofbackgroundimagerecoloring. Value0,LV_OPA_0orLV_OPA_TRANSPmeansnomixing,255,
LV_OPA_100 or LV_OPA_COVER means full recoloring, other values or LV_OPA_10, LV_OPA_20, etc are inter-
pretedproportionally.
bg_img_tiled
Ifenabledthebackgroundimagewillbetiled. Thepossiblevaluesaretrueorfalse.
5.4.4 Border
Propertiestodescribetheborders
border_color
Setthecoloroftheborder
border_opa
Settheopacityoftheborder. Value0,LV_OPA_0orLV_OPA_TRANSPmeansfullytransparent,255,LV_OPA_100
orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemitransparency.
border_width
Setthewidthoftheborder. Onlypixelvaluescanbeused.
border_side
Set only which side(s) the border should be drawn. The possible values are LV_BORDER_SIDE_NONE/TOP/
BOTTOM/LEFT/RIGHT/INTERNAL. OR-ed values can be used as well, e.g. LV_BORDER_SIDE_TOP |
LV_BORDER_SIDE_LEFT.
border_post
Setswhetherthebordershouldbedrawnbeforeorafterthechildrenaredrawn. true: afterchildren,false: before
children
5.4.5 Outline
Propertiestodescribetheoutline. It'slikeaborderbutdrawnoutsideoftherectangles.
5.4. Styleproperties 356


--- Page 361 ---


LVGLDocumentation8.3
outline_width
Setthewidthoftheoutlineinpixels.
outline_color
Setthecoloroftheoutline.
outline_opa
Settheopacityoftheoutline. Value0,LV_OPA_0orLV_OPA_TRANSPmeansfullytransparent,255,LV_OPA_100
orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemitransparency.
outline_pad
Setthepaddingoftheoutline,i.e. thegapbetweenobjectandtheoutline.
5.4.6 Shadow
Propertiestodescribetheshadowdrawnundertherectangles.
shadow_width
Setthewidthoftheshadowinpixels. Thevalueshouldbe>=0.
shadow_ofs_x
SetanoffsetontheshadowinpixelsinXdirection.
shadow_ofs_y
SetanoffsetontheshadowinpixelsinYdirection.
shadow_spread
Make the shadow calculation to use a larger or smaller rectangle as base. The value can be in pixel to make the area
larger/smaller
5.4. Styleproperties 357


--- Page 362 ---


LVGLDocumentation8.3
shadow_color
Setthecoloroftheshadow
shadow_opa
Settheopacityoftheshadow. Value0,LV_OPA_0orLV_OPA_TRANSPmeansfullytransparent,255,LV_OPA_100
orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemitransparency.
5.4.7 Image
Propertiestodescribetheimages
img_opa
Settheopacityofanimage. Value0,LV_OPA_0orLV_OPA_TRANSPmeansfullytransparent,255,LV_OPA_100
orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemitransparency.
img_recolor
Setcolortomixttotheimage.
img_recolor_opa
Set the intensity of the color mixing. Value 0, LV_OPA_0 or LV_OPA_TRANSP means fully transparent, 255,
LV_OPA_100orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemi
transparency.
5.4.8 Line
Propertiestodescribeline-likeobjects
line_width
Setthewidthofthelinesinpixel.
line_dash_width
Setthewidthofdashesinpixel. Notethatdashworksonlyonhorizontalandverticallines
5.4. Styleproperties 358


--- Page 363 ---


LVGLDocumentation8.3
line_dash_gap
Setthegapbetweendashesinpixel. Notethatdashworksonlyonhorizontalandverticallines
line_rounded
Maketheendpointsofthelinesrounded. true: rounded,false: perpendicularlineending
line_color
Setthecolorfothelines.
line_opa
Settheopacityofthelines.
5.4.9 Arc
TODO
arc_width
Setthewidth(thickness)ofthearcsinpixel.
arc_rounded
Maketheendpointsofthearcsrounded. true: rounded,false: perpendicularlineending
arc_color
Setthecolorofthearc.
arc_opa
Settheopacityofthearcs.
arc_img_src
Setanimagefromwhichthearcwillbemaskedout. It'susefultodisplaycomplexeffectsonthearcs. Canbeapointer
tolv_img_dsc_torapathtoafile
5.4. Styleproperties 359


--- Page 364 ---


LVGLDocumentation8.3
5.4.10 Text
Propertiestodescribethepropertiesoftext. Allthesepropertiesareinherited.
text_color
Setsthecolorofthetext.
text_opa
Settheopacityofthetext. Value0,LV_OPA_0orLV_OPA_TRANSPmeansfullytransparent,255,LV_OPA_100or
LV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,etcmeanssemitransparency.
text_font
Setthefontofthetext(apointerlv_font_t *).
text_letter_space
Settheletterspaceinpixels
text_line_space
Setthelinespaceinpixels.
text_decor
Set decoration for the text. The possible values are LV_TEXT_DECOR_NONE/UNDERLINE/STRIKETHROUGH.
OR-edvaluescanbeusedaswell.
text_align
Set how to align the lines of the text. Note that it doesn't align the object itself, only the lines inside the object. The
possible values are LV_TEXT_ALIGN_LEFT/CENTER/RIGHT/AUTO. LV_TEXT_ALIGN_AUTO detect the text
basedirectionandusesleftorrightalignmentaccordingly
5.4.11 Miscellaneous
Mixedpropertiesforvariouspurposes.
5.4. Styleproperties 360


--- Page 365 ---


LVGLDocumentation8.3
radius
Settheradiusoneverycorner. Thevalueisinterpretedinpixel(>=0)orLV_RADIUS_CIRCLEformax. radius
clip_corner
Enabletocliptheoverflowedcontentontheroundedcorner. Canbetrueorfalse.
opa
Scale down all opacity values of the object by this factor. Value 0, LV_OPA_0 or LV_OPA_TRANSP means fully
transparent,255,LV_OPA_100orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,LV_OPA_20,
etcmeanssemitransparency.
opa_layered
First draw the object on the layer, then scale down layer opacity factor. Value 0, LV_OPA_0 or LV_OPA_TRANSP
meansfullytransparent,255,LV_OPA_100orLV_OPA_COVERmeansfullycovering,othervaluesorLV_OPA_10,
LV_OPA_20,etcmeanssemitransparency.
color_filter_dsc
Mixacolortoallcolorsoftheobject.
color_filter_opa
Theintensityofmixingofcolorfilter.
anim
Theanimationtemplatefortheobject'sanimation. Shouldbeapointertolv_anim_t. Theanimationparametersare
widgetspecific,e.g. animationtimecouldbetheE.g. blinktimeofthecursoronthetextareaorscrolltimeofaroller.
Seethewidgets'documentationtolearnmore.
anim_time
Theanimationtimeinmilliseconds. Itsmeaningiswidgetspecific. E.g. blinktimeofthecursoronthetextareaorscroll
timeofaroller. Seethewidgets'documentationtolearnmore.
5.4. Styleproperties 361


--- Page 366 ---


LVGLDocumentation8.3
anim_speed
Theanimationspeedinpixel/sec. Itsmeaningiswidgetspecific. E.g. scrollspeedoflabel. Seethewidgets'documentation
tolearnmore.
transition
Aninitializedlv_style_transition_dsc_ttodescribeatransition.
blend_mode
Describes how to blend the colors to the background. The possible values are LV_BLEND_MODE_NORMAL/
ADDITIVE/SUBTRACTIVE/MULTIPLY
layout
Setthelayoutoftheobject. Thechildrenwillberepositionedandresizedaccordingtothepoliciessetforthelayout. For
thepossiblevaluesseethedocumentationofthelayouts.
base_dir
Setthebasedirectionoftheobject. ThepossiblevaluesareLV_BIDI_DIR_LTR/RTL/AUTO.
5.5 Scroll
5.5.1 Overview
InLVGLscrollingworksveryintuitively: ifanobjectisoutsideitsparentcontentarea(thesizewithoutpadding), the
parentbecomesscrollableandscrollbar(s)willappear. That'sit.
Anyobjectcanbescrollableincludinglv_obj_t,lv_img,lv_btn,lv_meter,etc
Theobjectcaneitherbescrolledhorizontallyorverticallyinonestroke;diagonalscrollingisnotpossible.
Scrollbar
Mode
Scrollbarsaredisplayedaccordingtoaconfiguredmode. Thefollowingmodesexist:
• LV_SCROLLBAR_MODE_OFFNevershowthescrollbars
• LV_SCROLLBAR_MODE_ONAlwaysshowthescrollbars
• LV_SCROLLBAR_MODE_ACTIVEShowscrollbarswhileanobjectisbeingscrolled
• LV_SCROLLBAR_MODE_AUTOShowscrollbarswhenthecontentislargeenoughtobescrolled
lv_obj_set_scrollbar_mode(obj, LV_SCROLLBAR_MODE_...)setsthescrollbarmodeonanobject.
5.5. Scroll 362


--- Page 367 ---


LVGLDocumentation8.3
Styling
Thescrollbarshavetheirowndedicatedpart,calledLV_PART_SCROLLBAR.Forexampleascrollbarcanturntored
likethis:
static lv_style_t style_red;
lv_style_init(&style_red);
lv_style_set_bg_color(&style_red, lv_color_red());
...
lv_obj_add_style(obj, &style_red, LV_PART_SCROLLBAR);
AnobjectgoestotheLV_STATE_SCROLLEDstatewhileit'sbeingscrolled. Thisallowsaddingdifferentstylestothe
scrollbarortheobjectitselfwhenscrolled. Thiscodemakesthescrollbarbluewhentheobjectisscrolled:
static lv_style_t style_blue;
lv_style_init(&style_blue);
lv_style_set_bg_color(&style_blue, lv_color_blue());
...
lv_obj_add_style(obj, &style_blue, LV_STATE_SCROLLED | LV_PART_SCROLLBAR);
If the base direction of the LV_PART_SCROLLBAR is RTL (LV_BASE_DIR_RTL) the vertical scrollbar will be
placed on the left. Note that, the base_dir style property is inherited. Therefore, it can be set directly on the
LV_PART_SCROLLBAR part of an object or on the object's or any parent's main part to make a scrollbar inherit the
basedirection.
pad_left/right/top/bottomsetsthespacingaroundthescrollbarsandwidthsetsthescrollbar'swidth.
Events
Thefollowingeventsarerelatedtoscrolling:
• LV_EVENT_SCROLL_BEGIN Scrolling begins. The event parameter is NULL or an lv_anim_t * with a
scrollanimationdescriptorthatcanbemodifiedifrequired.
• LV_EVENT_SCROLL_ENDScrollingends.
• LV_EVENT_SCROLLScrollhappened. Triggeredoneverypositionchange. Scrollevents
5.5.2 Basic example
TODO
5.5. Scroll 363


--- Page 368 ---


LVGLDocumentation8.3
5.5.3 Features of scrolling
Besides,managing"normal"scrollingtherearemanyinterestingandusefuladditionalfeatures.
Scrollable
It'spossibletomakeanobjectnon-scrollablewithlv_obj_clear_flag(obj, LV_OBJ_FLAG_SCROLLABLE).
Non-scrollableobjectscanstillpropagatethescrolling(chain)totheirparents.
Thedirectioninwhichscrollinghappenscanbecontrolledbylv_obj_set_scroll_dir(obj, LV_DIR_...).
Thefollowingvaluesarepossibleforthedirection:
• LV_DIR_TOPonlyscrollup
• LV_DIR_LEFTonlyscrollleft
• LV_DIR_BOTTOMonlyscrolldown
• LV_DIR_RIGHTonlyscrollright
• LV_DIR_HORonlyscrollhorizontally
• LV_DIR_VERonlyscrollvertically
• LV_DIR_ALLscrollanydirections
OR-edvaluesarealsopossible. E.g. LV_DIR_TOP | LV_DIR_LEFT.
Scrollchain
Ifanobjectcan'tbescrolledfurther(e.g. itscontenthasreachedthebottom-mostposition)additionalscrollingispropa-
gatedtoitsparent. Iftheparentcanbescrolledinthatdirectionthanitwillbescrolledinstead. Itcontinuespropagating
tothegrandparentandgrand-grandparentsaswell.
The propagation on scrolling is called "scroll chaining" and it can be enabled/disabled with
LV_OBJ_FLAG_SCROLL_CHAIN_HOR/VER flag. If chaining is disabled the propagation stops on the object
andtheparent(s)won'tbescrolled.
Scrollmomentum
Whentheuserscrollsanobjectandreleasesit,LVGLcanemulateinertialmomentumforthescrolling. It'sliketheobject
wasthrownandscrollingslowsdownsmoothly.
Thescrollmomentumcanbeenabled/disabledwiththeLV_OBJ_FLAG_SCROLL_MOMENTUMflag.
Elasticscroll
Normallyanobjectcan'tbescrolledpasttheextremetiesofitscontent. Thatisthetopsideofthecontentcan'tbebelow
thetopsideoftheobject.
However,withLV_OBJ_FLAG_SCROLL_ELASTICafancyeffectisaddedwhentheuser"over-scrolls"thecontent.
The scrolling slows down, and the content can be scrolled inside the object. When the object is released the content
scrolledinitwillbeanimatedbacktothevalidposition.
5.5. Scroll 364


--- Page 369 ---


LVGLDocumentation8.3
Snapping
Thechildrenofanobjectcanbesnappedaccordingtospecificruleswhenscrollingends. Childrencanbemadesnappable
individuallywiththeLV_OBJ_FLAG_SNAPPABLEflag.
Anobjectcanalignsnappedchildreninfourways:
• LV_SCROLL_SNAP_NONESnappingisdisabled. (default)
• LV_SCROLL_SNAP_STARTAlignthechildrentotheleft/topsideofascrolledobject
• LV_SCROLL_SNAP_ENDAlignthechildrentotheright/bottomsideofascrolledobject
• LV_SCROLL_SNAP_CENTERAlignthechildrentothecenterofascrolledobject
Snapalignmentissetwithlv_obj_set_scroll_snap_x/y(obj, LV_SCROLL_SNAP_...):
Underthehoodthefollowinghappens:
1. Userscrollsanobjectandreleasesthescreen
2. LVGLcalculateswherethescrollwouldendconsideringscrollmomentum
3. LVGLfindsthenearestscrollpoint
4. LVGLscrollstothesnappointwithananimation
Scrollone
The "scroll one" feature tells LVGL to allow scrolling only one snappable child at a time. This requires making the
childrensnappableandsettingascrollsnapalignmentdifferentfromLV_SCROLL_SNAP_NONE.
ThisfeaturecanbeenabledbytheLV_OBJ_FLAG_SCROLL_ONEflag.
Scrollonfocus
Imaginethattherealotofobjectsinagroupthatareonascrollableobject. Pressingthe"Tab"buttonfocusesthenext
objectbutitmightbeoutsidethevisibleareaofthescrollableobject. Ifthe"scrollonfocus"featureisenabledLVGL
willautomaticallyscrollobjectstobringtheirchildrenintoview. Thescrollinghappensrecursivelythereforeevennested
scrollableobjectsarehandledproperly. Theobjectwillbescrolledintoviewevenifit'sonadifferentpageofatabview.
5.5.4 Scroll manually
ThefollowingAPIfunctionsallowmanualscrollingofobjects:
• lv_obj_scroll_by(obj, x, y, LV_ANIM_ON/OFF)scrollbyxandyvalues
• lv_obj_scroll_to(obj, x, y, LV_ANIM_ON/OFF)scrolltobringthegivencoordinatetothetop
leftcorner
• lv_obj_scroll_to_x(obj, x, LV_ANIM_ON/OFF)scrolltobringthegivencoordinatetotheleftside
• lv_obj_scroll_to_y(obj, y, LV_ANIM_ON/OFF)scrolltobringthegivencoordinatetothetopside
From time to time you may need to retrieve the scroll position of an element, either to restore it later, or to display
dynamicallysomeelementsaccordingtothecurrentscroll. Hereisanexampletoseehowtocombinescrolleventand
storethescrolltopposition.
5.5. Scroll 365


--- Page 370 ---


LVGLDocumentation8.3
static int scroll_value = 0;
static void store_scroll_value_event_cb(lv_event_t* e) {
lv_obj_t* screen = lv_event_get_target(e);
scroll_value = lv_obj_get_scroll_top(screen);
printf("%d pixels are scrolled out on the top\n", scroll_value);
}
lv_obj_t* container = lv_obj_create(NULL);
lv_obj_add_event_cb(container, store_scroll_value_event_cb, LV_EVENT_SCROLL, NULL);
Scroolcoordinatescanberetrievefromdifferentsaxeswiththesefunctions:
• lv_obj_get_scroll_x(obj)Getthexcoordinateofobject
• lv_obj_get_scroll_y(obj)Gettheycoordinateofobject
• lv_obj_get_scroll_top(obj)Getthescrollcoordinatefromthetop
• lv_obj_get_scroll_bottom(obj)Getthescrollcoordinatefromthebottom
• lv_obj_get_scroll_left(obj)Getthescrollcoordinatefromtheleft
• lv_obj_get_scroll_right(obj)Getthescrollcoordinatefromtheright
5.5.5 Self size
Selfsizeisapropertyofanobject. Normally,theusershouldn'tusethisparameterbutifacustomwidgetiscreatedit
mightbeuseful.
Inshort,selfsizeestablishesthesizeofanobject'scontent. Tounderstanditbettertaketheexampleofatable. Let'ssay
ithas10rowseachwith50pxheight. Sothetotalheightofthecontentis500px. Inotherwordsthe"selfheight"is500
px. Iftheusersetsonly200pxheightforthetableLVGLwillseethattheselfsizeislargerandmakethetablescrollable.
Thismeansnotonlythechildrencanmakeanobjectscrollablebutalargerselfsizewilltoo.
LVGLusestheLV_EVENT_GET_SELF_SIZEeventtogettheselfsizeofanobject. Hereisanexampletoseehow
tohandletheevent:
if(event_code == LV_EVENT_GET_SELF_SIZE) {
lv_point_t * p = lv_event_get_param(e);
//If x or y < 0 then it doesn't neesd to be calculated now
if(p->x >= 0) {
p->x = 200; //Set or calculate the self width
}
if(p->y >= 0) {
p->y = 50; //Set or calculate the self height
}
}
5.5. Scroll 366


--- Page 371 ---


LVGLDocumentation8.3
5.5.6 Examples
Nestedscrolling
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES
/**
* Demonstrate how scrolling appears automatically
*/
void lv_example_scroll_1(void)
{
/*Create an object with the new style*/
lv_obj_t * panel = lv_obj_create(lv_scr_act());
lv_obj_set_size(panel, 200, 200);
lv_obj_center(panel);
lv_obj_t * child;
lv_obj_t * label;
child = lv_obj_create(panel);
lv_obj_set_pos(child, 0, 0);
lv_obj_set_size(child, 70, 70);
label = lv_label_create(child);
lv_label_set_text(label, "Zero");
lv_obj_center(label);
child = lv_obj_create(panel);
lv_obj_set_pos(child, 160, 80);
lv_obj_set_size(child, 80, 80);
lv_obj_t * child2 = lv_btn_create(child);
lv_obj_set_size(child2, 100, 50);
label = lv_label_create(child2);
lv_label_set_text(label, "Right");
lv_obj_center(label);
child = lv_obj_create(panel);
lv_obj_set_pos(child, 40, 160);
lv_obj_set_size(child, 100, 70);
label = lv_label_create(child);
lv_label_set_text(label, "Bottom");
lv_obj_center(label);
}
#endif
#
# Demonstrate how scrolling appears automatically
#
# Create an object with the new style
panel = lv.obj(lv.scr_act())
panel.set_size(200, 200)
panel.center()
child = lv.obj(panel)
(continuesonnextpage)
5.5. Scroll 367


--- Page 372 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
child.set_pos(0, 0)
label = lv.label(child)
label.set_text("Zero")
label.center()
child = lv.obj(panel)
child.set_pos(-40, 100)
label = lv.label(child)
label.set_text("Left")
label.center()
child = lv.obj(panel)
child.set_pos(90, -30)
label = lv.label(child)
label.set_text("Top")
label.center()
child = lv.obj(panel)
child.set_pos(150, 80)
label = lv.label(child)
label.set_text("Right")
label.center()
child = lv.obj(panel)
child.set_pos(60, 170)
label = lv.label(child)
label.set_text("Bottom")
label.center()
Snapping
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_FLEX
static void sw_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * sw = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
lv_obj_t * list = lv_event_get_user_data(e);
if(lv_obj_has_state(sw, LV_STATE_CHECKED)) lv_obj_add_flag(list, LV_OBJ_FLAG_
,→SCROLL_ONE);
else lv_obj_clear_flag(list, LV_OBJ_FLAG_SCROLL_ONE);
}
}
/**
* Show an example to scroll snap
*/
void lv_example_scroll_2(void)
{
lv_obj_t * panel = lv_obj_create(lv_scr_act());
(continuesonnextpage)
5.5. Scroll 368


--- Page 373 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(panel, 280, 120);
lv_obj_set_scroll_snap_x(panel, LV_SCROLL_SNAP_CENTER);
lv_obj_set_flex_flow(panel, LV_FLEX_FLOW_ROW);
lv_obj_align(panel, LV_ALIGN_CENTER, 0, 20);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_obj_t * btn = lv_btn_create(panel);
lv_obj_set_size(btn, 150, lv_pct(100));
lv_obj_t * label = lv_label_create(btn);
if(i == 3) {
lv_label_set_text_fmt(label, "Panel %"LV_PRIu32"\nno snap", i);
lv_obj_clear_flag(btn, LV_OBJ_FLAG_SNAPPABLE);
}
else {
lv_label_set_text_fmt(label, "Panel %"LV_PRIu32, i);
}
lv_obj_center(label);
}
lv_obj_update_snap(panel, LV_ANIM_ON);
#if LV_USE_SWITCH
/*Switch between "One scroll" and "Normal scroll" mode*/
lv_obj_t * sw = lv_switch_create(lv_scr_act());
lv_obj_align(sw, LV_ALIGN_TOP_RIGHT, -20, 10);
lv_obj_add_event_cb(sw, sw_event_cb, LV_EVENT_ALL, panel);
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "One scroll");
lv_obj_align_to(label, sw, LV_ALIGN_OUT_BOTTOM_MID, 0, 5);
#endif
}
#endif
def sw_event_cb(e,panel):
code = e.get_code()
sw = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
if sw.has_state(lv.STATE.CHECKED):
panel.add_flag(lv.obj.FLAG.SCROLL_ONE)
else:
panel.clear_flag(lv.obj.FLAG.SCROLL_ONE)
#
# Show an example to scroll snap
#
panel = lv.obj(lv.scr_act())
panel.set_size(280, 150)
panel.set_scroll_snap_x(lv.SCROLL_SNAP.CENTER)
(continuesonnextpage)
5.5. Scroll 369


--- Page 374 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
panel.set_flex_flow(lv.FLEX_FLOW.ROW)
panel.center()
for i in range(10):
btn = lv.btn(panel)
btn.set_size(150, 100)
label = lv.label(btn)
if i == 3:
label.set_text("Panel {:d}\nno snap".format(i))
btn.clear_flag(lv.obj.FLAG.SNAPPABLE)
else:
label.set_text("Panel {:d}".format(i))
label.center()
panel.update_snap(lv.ANIM.ON)
# Switch between "One scroll" and "Normal scroll" mode
sw = lv.switch(lv.scr_act())
sw.align(lv.ALIGN.TOP_RIGHT, -20, 10)
sw.add_event_cb(lambda evt: sw_event_cb(evt,panel), lv.EVENT.ALL, None)
label = lv.label(lv.scr_act())
label.set_text("One scroll")
label.align_to(sw, lv.ALIGN.OUT_BOTTOM_MID, 0, 5)
Floatingbutton
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LIST
static uint32_t btn_cnt = 1;
static void float_btn_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * float_btn = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
lv_obj_t * list = lv_event_get_user_data(e);
char buf[32];
lv_snprintf(buf, sizeof(buf), "Track %d", (int)btn_cnt);
lv_obj_t * list_btn = lv_list_add_btn(list, LV_SYMBOL_AUDIO, buf);
btn_cnt++;
lv_obj_move_foreground(float_btn);
lv_obj_scroll_to_view(list_btn, LV_ANIM_ON);
}
}
/**
* Create a list with a floating button
(continuesonnextpage)
5.5. Scroll 370


--- Page 375 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
*/
void lv_example_scroll_3(void)
{
lv_obj_t * list = lv_list_create(lv_scr_act());
lv_obj_set_size(list, 280, 220);
lv_obj_center(list);
for(btn_cnt = 1; btn_cnt <= 2; btn_cnt++) {
char buf[32];
lv_snprintf(buf, sizeof(buf), "Track %d", (int)btn_cnt);
lv_list_add_btn(list, LV_SYMBOL_AUDIO, buf);
}
lv_obj_t * float_btn = lv_btn_create(list);
lv_obj_set_size(float_btn, 50, 50);
lv_obj_add_flag(float_btn, LV_OBJ_FLAG_FLOATING);
lv_obj_align(float_btn, LV_ALIGN_BOTTOM_RIGHT, 0, -lv_obj_get_style_pad_
,→right(list, LV_PART_MAIN));
lv_obj_add_event_cb(float_btn, float_btn_event_cb, LV_EVENT_ALL, list);
lv_obj_set_style_radius(float_btn, LV_RADIUS_CIRCLE, 0);
lv_obj_set_style_bg_img_src(float_btn, LV_SYMBOL_PLUS, 0);
lv_obj_set_style_text_font(float_btn, lv_theme_get_font_large(float_btn), 0);
}
#endif
class ScrollExample_3():
def __init__(self):
self.btn_cnt = 1
#
# Create a list with a floating button
#
list = lv.list(lv.scr_act())
list.set_size(280, 220)
list.center()
for btn_cnt in range(2):
list.add_btn(lv.SYMBOL.AUDIO,"Track {:d}".format(btn_cnt))
float_btn = lv.btn(list)
float_btn.set_size(50, 50)
float_btn.add_flag(lv.obj.FLAG.FLOATING)
float_btn.align(lv.ALIGN.BOTTOM_RIGHT, 0, -list.get_style_pad_right(lv.PART.
,→MAIN))
float_btn.add_event_cb(lambda evt: self.float_btn_event_cb(evt,list), lv.
,→EVENT.ALL, None)
float_btn.set_style_radius(lv.RADIUS.CIRCLE, 0)
float_btn.set_style_bg_img_src(lv.SYMBOL.PLUS, 0)
float_btn.set_style_text_font(lv.theme_get_font_large(float_btn), 0)
def float_btn_event_cb(self,e,list):
code = e.get_code()
float_btn = e.get_target()
if code == lv.EVENT.CLICKED:
(continuesonnextpage)
5.5. Scroll 371


--- Page 376 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
list_btn = list.add_btn(lv.SYMBOL.AUDIO, "Track {:d}".format(self.btn_
,→cnt))
self.btn_cnt += 1
float_btn.move_foreground()
list_btn.scroll_to_view(lv.ANIM.ON)
scroll_example_3 = ScrollExample_3()
Stylingthescrollbars
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LIST
/**
* Styling the scrollbars
*/
void lv_example_scroll_4(void)
{
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_set_size(obj, 200, 100);
lv_obj_center(obj);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label,
"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n"
"Etiam dictum, tortor vestibulum lacinia laoreet, mi neque␣
,→consectetur neque, vel mattis odio dolor egestas ligula. \n"
"Sed vestibulum sapien nulla, id convallis ex porttitor nec. \n"
"Duis et massa eu libero accumsan faucibus a in arcu. \n"
"Ut pulvinar odio lorem, vel tempus turpis condimentum quis.␣
,→Nam consectetur condimentum sem in auctor. \n"
"Sed nisl augue, venenatis in blandit et, gravida ac tortor. \n"
"Etiam dapibus elementum suscipit. \n"
"Proin mollis sollicitudin convallis. \n"
"Integer dapibus tempus arcu nec viverra. \n"
"Donec molestie nulla enim, eu interdum velit placerat quis. \n"
"Donec id efficitur risus, at molestie turpis. \n"
"Suspendisse vestibulum consectetur nunc ut commodo. \n"
"Fusce molestie rhoncus nisi sit amet tincidunt. \n"
"Suspendisse a nunc ut magna ornare volutpat.");
/*Remove the style of scrollbar to have clean start*/
lv_obj_remove_style(obj, NULL, LV_PART_SCROLLBAR | LV_STATE_ANY);
/*Create a transition the animate the some properties on state change*/
static const lv_style_prop_t props[] = {LV_STYLE_BG_OPA, LV_STYLE_WIDTH, 0};
static lv_style_transition_dsc_t trans;
lv_style_transition_dsc_init(&trans, props, lv_anim_path_linear, 200, 0, NULL);
/*Create a style for the scrollbars*/
static lv_style_t style;
(continuesonnextpage)
5.5. Scroll 372


--- Page 377 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_init(&style);
lv_style_set_width(&style, 4); /*Width of the scrollbar*/
lv_style_set_pad_right(&style, 5); /*Space from the parallel side*/
lv_style_set_pad_top(&style, 5); /*Space from the perpendicular side*/
lv_style_set_radius(&style, 2);
lv_style_set_bg_opa(&style, LV_OPA_70);
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_border_color(&style, lv_palette_darken(LV_PALETTE_BLUE, 3));
lv_style_set_border_width(&style, 2);
lv_style_set_shadow_width(&style, 8);
lv_style_set_shadow_spread(&style, 2);
lv_style_set_shadow_color(&style, lv_palette_darken(LV_PALETTE_BLUE, 1));
lv_style_set_transition(&style, &trans);
/*Make the scrollbars wider and use 100% opacity when scrolled*/
static lv_style_t style_scrolled;
lv_style_init(&style_scrolled);
lv_style_set_width(&style_scrolled, 8);
lv_style_set_bg_opa(&style_scrolled, LV_OPA_COVER);
lv_obj_add_style(obj, &style, LV_PART_SCROLLBAR);
lv_obj_add_style(obj, &style_scrolled, LV_PART_SCROLLBAR | LV_STATE_SCROLLED);
}
#endif
#
# Styling the scrollbars
#
obj = lv.obj(lv.scr_act())
obj.set_size(200, 100)
obj.center()
label = lv.label(obj)
label.set_text(
"""
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Etiam dictum, tortor vestibulum lacinia laoreet, mi neque consectetur neque, vel␣
,→mattis odio dolor egestas ligula.
Sed vestibulum sapien nulla, id convallis ex porttitor nec.
Duis et massa eu libero accumsan faucibus a in arcu.
Ut pulvinar odio lorem, vel tempus turpis condimentum quis. Nam consectetur␣
,→condimentum sem in auctor.
Sed nisl augue, venenatis in blandit et, gravida ac tortor.
Etiam dapibus elementum suscipit.
Proin mollis sollicitudin convallis.
Integer dapibus tempus arcu nec viverra.
Donec molestie nulla enim, eu interdum velit placerat quis.
Donec id efficitur risus, at molestie turpis.
Suspendisse vestibulum consectetur nunc ut commodo.
Fusce molestie rhoncus nisi sit amet tincidunt.
Suspendisse a nunc ut magna ornare volutpat.
""")
(continuesonnextpage)
5.5. Scroll 373


--- Page 378 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Remove the style of scrollbar to have clean start
obj.remove_style(None, lv.PART.SCROLLBAR | lv.STATE.ANY)
# Create a transition the animate the some properties on state change
props = [lv.STYLE.BG_OPA, lv.STYLE.WIDTH, 0]
trans = lv.style_transition_dsc_t()
trans.init(props, lv.anim_t.path_linear, 200, 0, None)
# Create a style for the scrollbars
style = lv.style_t()
style.init()
style.set_width(4) # Width of the scrollbar
style.set_pad_right(5) # Space from the parallel side
style.set_pad_top(5) # Space from the perpendicular side
style.set_radius(2)
style.set_bg_opa(lv.OPA._70)
style.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_border_color(lv.palette_darken(lv.PALETTE.BLUE, 3))
style.set_border_width(2)
style.set_shadow_width(8)
style.set_shadow_spread(2)
style.set_shadow_color(lv.palette_darken(lv.PALETTE.BLUE, 1))
style.set_transition(trans)
# Make the scrollbars wider and use 100% opacity when scrolled
style_scrolled = lv.style_t()
style_scrolled.init()
style_scrolled.set_width(8)
style_scrolled.set_bg_opa(lv.OPA.COVER)
obj.add_style(style, lv.PART.SCROLLBAR)
obj.add_style(style_scrolled, lv.PART.SCROLLBAR | lv.STATE.SCROLLED)
Righttoleftscrolling
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_FONT_DEJAVU_16_PERSIAN_HEBREW
/**
* Scrolling with Right To Left base direction
*/
void lv_example_scroll_5(void)
{
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_set_style_base_dir(obj, LV_BASE_DIR_RTL, 0);
lv_obj_set_size(obj, 200, 100);
lv_obj_center(obj);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label,
"رلورتنکُورکیم هب) :یسیلگنا Microcontroller) یا هنوگ هدنزادرپزیر␣
,→تسا هک یاراد هٔظفاح یسرتسد یفداصت (RAM) و هٔظفاح یندناوخ طقف (ROM)، ،رمیات(coیnاtinهu تesرoوnپn␣extpage)
,→یدورو و یجورخ (I/O) و هاگرد یبیترت (Serial Port تروپ ،(لایرس نورد دوخ هشارت ،تسا و␣
,→دناوت یم هب ییاهنت یاهرازبا رگید ار لرتنک .دنک هب ترابع رگید کی ،رلرتنکورکیم رادم␣
5.5. Scroll 374
,→عمتجم یکچوک تسا هک زا کی CPU کچوک و یازجا یرگید دننام ،رمیات یاه هاگرد یدورو و یجورخ␣
,→گولانآ و لاتیجید و هظفاح لیکشت .تسا هدش");


--- Page 379 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_width(label, 400);
lv_obj_set_style_text_font(label, &lv_font_dejavu_16_persian_hebrew, 0);
}
#endif
#
# Scrolling with Right To Left base direction
#
obj = lv.obj(lv.scr_act())
obj.set_style_base_dir(lv.BASE_DIR.RTL, 0)
obj.set_size(200, 100)
obj.center()
label = lv.label(obj)
label.set_text("رلورتنکُورکیم هب) :یسیلگنا Microcontroller) یا هنوگ هدنزادرپزیر تسا هک␣
,→یاراد هٔظفاح یسرتسد یفداصت (RAM) و هٔظفاح یندناوخ طقف (ROM)، ،رمیات یاه تروپ یدورو و␣
,→یجورخ (I/O) و هاگرد یبیترت (Serial Port تروپ ،(لایرس نورد دوخ هشارت ،تسا و دناوت یم␣
,→هب ییاهنت یاهرازبا رگید ار لرتنک .دنک هب ترابع رگید کی ،رلرتنکورکیم رادم عمتجم␣
,→یکچوک تسا هک زا کی CPU کچوک و یازجا یرگید دننام ،رمیات یاه هاگرد یدورو و یجورخ␣
,→گولانآ و لاتیجید و هظفاح لیکشت .تسا هدش")
label.set_width(400)
label.set_style_text_font(lv.font_dejavu_16_persian_hebrew, 0)
Translateonscroll
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_FLEX
static void scroll_event_cb(lv_event_t * e)
{
lv_obj_t * cont = lv_event_get_target(e);
lv_area_t cont_a;
lv_obj_get_coords(cont, &cont_a);
lv_coord_t cont_y_center = cont_a.y1 + lv_area_get_height(&cont_a) / 2;
lv_coord_t r = lv_obj_get_height(cont) * 7 / 10;
uint32_t i;
uint32_t child_cnt = lv_obj_get_child_cnt(cont);
for(i = 0; i < child_cnt; i++) {
lv_obj_t * child = lv_obj_get_child(cont, i);
lv_area_t child_a;
lv_obj_get_coords(child, &child_a);
lv_coord_t child_y_center = child_a.y1 + lv_area_get_height(&child_a) / 2;
lv_coord_t diff_y = child_y_center - cont_y_center;
diff_y = LV_ABS(diff_y);
/*Get the x of diff_y on a circle.*/
lv_coord_t x;
(continuesonnextpage)
5.5. Scroll 375


--- Page 380 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*If diff_y is out of the circle use the last point of the circle (the␣
,→radius)*/
if(diff_y >= r) {
x = r;
}
else {
/*Use Pythagoras theorem to get x from radius and y*/
uint32_t x_sqr = r * r - diff_y * diff_y;
lv_sqrt_res_t res;
lv_sqrt(x_sqr, &res, 0x8000); /*Use lvgl's built in sqrt root function*/
x = r - res.i;
}
/*Translate the item by the calculated X coordinate*/
lv_obj_set_style_translate_x(child, x, 0);
/*Use some opacity with larger translations*/
lv_opa_t opa = lv_map(x, 0, r, LV_OPA_TRANSP, LV_OPA_COVER);
lv_obj_set_style_opa(child, LV_OPA_COVER - opa, 0);
}
}
/**
* Translate the object as they scroll
*/
void lv_example_scroll_6(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 200, 200);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_COLUMN);
lv_obj_add_event_cb(cont, scroll_event_cb, LV_EVENT_SCROLL, NULL);
lv_obj_set_style_radius(cont, LV_RADIUS_CIRCLE, 0);
lv_obj_set_style_clip_corner(cont, true, 0);
lv_obj_set_scroll_dir(cont, LV_DIR_VER);
lv_obj_set_scroll_snap_y(cont, LV_SCROLL_SNAP_CENTER);
lv_obj_set_scrollbar_mode(cont, LV_SCROLLBAR_MODE_OFF);
uint32_t i;
for(i = 0; i < 20; i++) {
lv_obj_t * btn = lv_btn_create(cont);
lv_obj_set_width(btn, lv_pct(100));
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text_fmt(label, "Button %"LV_PRIu32, i);
}
/*Update the buttons position manually for first*/
lv_event_send(cont, LV_EVENT_SCROLL, NULL);
/*Be sure the fist button is in the middle*/
lv_obj_scroll_to_view(lv_obj_get_child(cont, 0), LV_ANIM_OFF);
}
#endif
5.5. Scroll 376


--- Page 381 ---


LVGLDocumentation8.3
def scroll_event_cb(e):
cont = e.get_target()
cont_a = lv.area_t()
cont.get_coords(cont_a)
cont_y_center = cont_a.y1 + cont_a.get_height() // 2
r = cont.get_height() * 7 // 10
child_cnt = cont.get_child_cnt()
for i in range(child_cnt):
child = cont.get_child(i)
child_a = lv.area_t()
child.get_coords(child_a)
child_y_center = child_a.y1 + child_a.get_height() // 2
diff_y = child_y_center - cont_y_center
diff_y = abs(diff_y)
# Get the x of diff_y on a circle.
# If diff_y is out of the circle use the last point of the circle (the radius)
if diff_y >= r:
x = r
else:
# Use Pythagoras theorem to get x from radius and y
x_sqr = r * r - diff_y * diff_y
res = lv.sqrt_res_t()
lv.sqrt(x_sqr, res, 0x8000) # Use lvgl's built in sqrt root function
x = r - res.i
# Translate the item by the calculated X coordinate
child.set_style_translate_x(x, 0)
# Use some opacity with larger translations
opa = lv.map(x, 0, r, lv.OPA.TRANSP, lv.OPA.COVER)
child.set_style_opa(lv.OPA.COVER - opa, 0)
#
# Translate the object as they scroll
#
cont = lv.obj(lv.scr_act())
cont.set_size(200, 200)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.COLUMN)
cont.add_event_cb(scroll_event_cb, lv.EVENT.SCROLL, None)
cont.set_style_radius(lv.RADIUS.CIRCLE, 0)
cont.set_style_clip_corner(True, 0)
cont.set_scroll_dir(lv.DIR.VER)
cont.set_scroll_snap_y(lv.SCROLL_SNAP.CENTER)
cont.set_scrollbar_mode(lv.SCROLLBAR_MODE.OFF)
for i in range(20):
btn = lv.btn(cont)
(continuesonnextpage)
5.5. Scroll 377


--- Page 382 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn.set_width(lv.pct(100))
label = lv.label(btn)
label.set_text("Button " + str(i))
# Update the buttons position manually for first*
lv.event_send(cont, lv.EVENT.SCROLL, None)
# Be sure the fist button is in the middle
#lv.obj.scroll_to_view(cont.get_child(0), lv.ANIM.OFF)
cont.get_child(0).scroll_to_view(lv.ANIM.OFF)
5.6 Layers
5.6.1 Order of creation
Bydefault,LVGLdrawsnewobjectsontopofoldobjects.
Forexample,assumeweaddabuttontoaparentobjectnamedbutton1andthenanotherbuttonnamedbutton2. Then
button1(alongwithitschildobject(s))willbeinthebackgroundandcanbecoveredbybutton2anditschildren.
/*Create a screen*/
lv_obj_t * scr = lv_obj_create(NULL, NULL);
lv_scr_load(scr); /*Load the screen*/
/*Create 2 buttons*/
lv_obj_t * btn1 = lv_btn_create(scr, NULL); /*Create a button on the screen*/
lv_btn_set_fit(btn1, true, true); /*Enable automatically setting␣
,→the size according to content*/
lv_obj_set_pos(btn1, 60, 40); /*Set the position of the␣
,→button*/
(continuesonnextpage)
5.6. Layers 378


--- Page 383 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * btn2 = lv_btn_create(scr, btn1); /*Copy the first button*/
lv_obj_set_pos(btn2, 180, 80); /*Set the position of the button*/
/*Add labels to the buttons*/
lv_obj_t * label1 = lv_label_create(btn1, NULL); /*Create a label on the first␣
,→button*/
lv_label_set_text(label1, "Button 1"); /*Set the text of the label*/
lv_obj_t * label2 = lv_label_create(btn2, NULL); /*Create a label on the␣
,→second button*/
lv_label_set_text(label2, "Button 2"); /*Set the text of the␣
,→label*/
/*Delete the second label*/
lv_obj_del(label2);
5.6.2 Change order
Therearefourexplicitwaystobringanobjecttotheforeground:
• Use lv_obj_move_foreground(obj) to bring an object to the foreground. Similarly, use
lv_obj_move_background(obj)tomoveittothebackground.
• Use lv_obj_move_to_index(obj, idx) to move an object to a given index in the order of
children. (0: backgroud, child_num - 1: foreground, <0: count from the top, to move forward (up):
lv_obj_move_to_index(obj, lv_obj_get_index(obj) - 1))
• Uselv_obj_swap(obj1, obj2)toswaptherelativelayerpositionoftwoobjects.
• When lv_obj_set_parent(obj, new_parent) is used, obj will be on the foreground of the
new_parent.
5.6.3 Top and sys layers
LVGLusestwospeciallayersnamedlayer_topandlayer_sys. Botharevisibleandcommononallscreensofa
display. Theyarenot,however,sharedamongmultiplephysicaldisplays. Thelayer_topisalwaysontopofthe
defaultscreen(lv_scr_act()),andlayer_sysisontopoflayer_top.
Thelayer_topcanbeusedbytheusertocreatesomecontentvisibleeverywhere. Forexample,amenubar,apop-up,
etc. Iftheclickattributeisenabled,thenlayer_topwillabsorballuserclicksandactsasamodal.
lv_obj_add_flag(lv_layer_top(), LV_OBJ_FLAG_CLICKABLE);
Thelayer_sysisalsousedforsimilarpurposesinLVGL.Forexample,itplacesthemousecursorabovealllayersto
besureit'salwaysvisible.
5.6. Layers 379


--- Page 384 ---


LVGLDocumentation8.3
5.7 Events
EventsaretriggeredinLVGLwhensomethinghappenswhichmightbeinterestingtotheuser,e.g. whenanobject
• isclicked
• isscrolled
• hasitsvaluechanged
• isredrawn,etc.
5.7.1 Add events to the object
Theusercanassigncallbackfunctionstoanobjecttoseeitsevents. Inpractice,itlookslikethis:
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_add_event_cb(btn, my_event_cb, LV_EVENT_CLICKED, NULL); /*Assign an event␣
,→callback*/
...
static void my_event_cb(lv_event_t * event)
{
printf("Clicked\n");
}
IntheexampleLV_EVENT_CLICKEDmeansthatonlytheclickeventwillcallmy_event_cb. Seethelistofevent
codesforalltheoptions. LV_EVENT_ALLcanbeusedtoreceiveallevents.
Thelastparameteroflv_obj_add_event_cbisapointertoanycustomdatathatwillbeavailableintheevent. It
willbedescribedlaterinmoredetail.
Moreeventscanbeaddedtoanobject,likethis:
lv_obj_add_event_cb(obj, my_event_cb_1, LV_EVENT_CLICKED, NULL);
lv_obj_add_event_cb(obj, my_event_cb_2, LV_EVENT_PRESSED, NULL);
lv_obj_add_event_cb(obj, my_event_cb_3, LV_EVENT_ALL, NULL); /*No␣
,→filtering, receive all events*/
Eventhesameeventcallbackcanbeusedonanobjectwithdifferentuser_data. Forexample:
lv_obj_add_event_cb(obj, increment_on_click, LV_EVENT_CLICKED, &num1);
lv_obj_add_event_cb(obj, increment_on_click, LV_EVENT_CLICKED, &num2);
Theeventswillbecalledintheorderastheywereadded.
Otherobjectscanusethesameeventcallback.
5.7. Events 380


--- Page 385 ---


LVGLDocumentation8.3
5.7.2 Remove event(s) from an object
Events can be removed from an object with the lv_obj_remove_event_cb(obj, event_cb) func-
tion or lv_obj_remove_event_dsc(obj, event_dsc). event_dsc is a pointer returned by
lv_obj_add_event_cb.
5.7.3 Event codes
Theeventcodescanbegroupedintothesecategories:
• Inputdeviceevents
• Drawingevents
• Otherevents
• Specialevents
• Customevents
Allobjects(suchasButtons/Labels/Slidersetc.) regardlesstheirtypereceivetheInputdevice,DrawingandOtherevents.
However, theSpecialeventsarespecifictoaparticularwidgettype. Seethewidgets'documentationtolearnwhenthey
aresent,
CustomeventsareaddedbytheuserandareneversentbyLVGL.
Thefollowingeventcodesexist:
Inputdeviceevents
• LV_EVENT_PRESSEDAnobjecthasbeenpressed
• LV_EVENT_PRESSINGAnobjectisbeingpressed(calledcontinuouslywhilepressing)
• LV_EVENT_PRESS_LOSTAnobjectisstillbeingpressedbutslidcursor/fingeroffoftheobject
• LV_EVENT_SHORT_CLICKED An object was pressed fora short period oftime, then released. Not called if
scrolled.
• LV_EVENT_LONG_PRESSEDAnobjecthasbeenpressedforatleastthelong_press_timespecifiedinthe
inputdevicedriver. Notcalledifscrolled.
• LV_EVENT_LONG_PRESSED_REPEAT Called after long_press_time in every
long_press_repeat_timems. Notcalledifscrolled.
• LV_EVENT_CLICKEDCalledonreleaseifanobjectdidnotscroll(regardlessoflongpress)
• LV_EVENT_RELEASEDCalledineverycasewhenanobjecthasbeenreleased
• LV_EVENT_SCROLL_BEGIN Scrolling begins. The event parameter is NULL or an lv_anim_t * with a
scrollanimationdescriptorthatcanbemodifiedifrequired.
• LV_EVENT_SCROLL_ENDScrollingends.
• LV_EVENT_SCROLLAnobjectwasscrolled
• LV_EVENT_GESTURE A gesture is detected. Get the gesture with
lv_indev_get_gesture_dir(lv_indev_get_act());
• LV_EVENT_KEY A key is sent to an object. Get the key with
lv_indev_get_key(lv_indev_get_act());
5.7. Events 381


--- Page 386 ---


LVGLDocumentation8.3
• LV_EVENT_FOCUSEDAnobjectisfocused
• LV_EVENT_DEFOCUSEDAnobjectisunfocused
• LV_EVENT_LEAVEAnobjectisunfocusedbutstillselected
• LV_EVENT_HIT_TEST Perform advanced hit-testing. Use lv_hit_test_info_t * a =
lv_event_get_hit_test_info(e) and check if a->point can click the object or not. If not set
a->res = false
Drawingevents
• LV_EVENT_COVER_CHECK Check if an object fully covers an area. The event parameter is
lv_cover_check_info_t *.
• LV_EVENT_REFR_EXT_DRAW_SIZEGettherequiredextradrawareaaroundanobject(e.g. forashadow).
Theeventparameterislv_coord_t *tostorethesize. Onlyoverwriteitwithalargervalue.
• LV_EVENT_DRAW_MAIN_BEGINStartingthemaindrawingphase.
• LV_EVENT_DRAW_MAINPerformthemaindrawing
• LV_EVENT_DRAW_MAIN_ENDFinishingthemaindrawingphase
• LV_EVENT_DRAW_POST_BEGINStartingthepostdrawphase(whenallchildrenaredrawn)
• LV_EVENT_DRAW_POSTPerformthepostdrawphase(whenallchildrenaredrawn)
• LV_EVENT_DRAW_POST_ENDFinishingthepostdrawphase(whenallchildrenaredrawn)
• LV_EVENT_DRAW_PART_BEGINStartingtodrawapart. Theeventparameterislv_obj_draw_dsc_t *.
Learnmorehere.
• LV_EVENT_DRAW_PART_ENDFinishingtodrawapart. Theeventparameterislv_obj_draw_dsc_t *.
Learnmorehere.
In LV_EVENT_DRAW_... events it's not allowed to adjust the widgets' properties. E.g. you can not call
lv_obj_set_width(). Inotherwordsonlygetfunctionscanbecalled.
Otherevents
• LV_EVENT_DELETEObjectisbeingdeleted
• LV_EVENT_CHILD_CHANGEDChildwasremoved/added
• LV_EVENT_CHILD_CREATEDChildwascreated,alwaysbubblesuptoallparents
• LV_EVENT_CHILD_DELETEDChildwasdeleted,alwaysbubblesuptoallparents
• LV_EVENT_SIZE_CHANGEDObjectcoordinates/sizehavechanged
• LV_EVENT_STYLE_CHANGEDObject'sstylehaschanged
• LV_EVENT_BASE_DIR_CHANGEDThebasedirhaschanged
• LV_EVENT_GET_SELF_SIZEGettheinternalsizeofawidget
• LV_EVENT_SCREEN_UNLOAD_START A screen unload started, fired immediately when
lv_scr_load/lv_scr_load_animiscalled
• LV_EVENT_SCREEN_LOAD_STARTAscreenloadstarted,firedwhenthescreenchangedelayisexpired
• LV_EVENT_SCREEN_LOADEDAscreenwasloaded,calledwhenallanimationsarefinished
5.7. Events 382


--- Page 387 ---


LVGLDocumentation8.3
• LV_EVENT_SCREEN_UNLOADEDAscreenwasunloaded,calledwhenallanimationsarefinished
Specialevents
• LV_EVENT_VALUE_CHANGEDTheobject'svaluehaschanged(i.e. slidermoved)
• LV_EVENT_INSERTTextisbeinginsertedintotheobject. Theeventdataischar *beinginserted.
• LV_EVENT_REFRESHNotifytheobjecttorefreshsomethingonit(fortheuser)
• LV_EVENT_READYAprocesshasfinished
• LV_EVENT_CANCELAprocesshasbeencanceled
Customevents
Anycustomeventcodescanberegisteredbyuint32_t MY_EVENT_1 = lv_event_register_id();
Theycanbesenttoanyobjectwithlv_event_send(obj, MY_EVENT_1, &some_data)
5.7.4 Sending events
Tomanuallysendeventstoanobject,uselv_event_send(obj, <EVENT_CODE> &some_data).
Forexample,thiscanbeusedtomanuallycloseamessageboxbysimulatingabuttonpress(althoughtherearesimpler
waystodothis):
/*Simulate the press of the first button (indexes start from zero)*/
uint32_t btn_id = 0;
lv_event_send(mbox, LV_EVENT_VALUE_CHANGED, &btn_id);
Refreshevent
LV_EVENT_REFRESH is a special event because it's designed to let the user notify an object to refresh itself. Some
examples:
• notifyalabeltorefreshitstextaccordingtooneormorevariables(e.g. currenttime)
• refreshalabelwhenthelanguagechanges
• enableabuttonifsomeconditionsaremet(e.g. thecorrectPINisentered)
• add/removestylesto/fromanobjectifalimitisexceeded,etc
5.7.5 Fields of lv_event_t
lv_event_tistheonlyparameterpassedtotheeventcallbackanditcontainsalldataabouttheevent. Thefollowing
valuescanbegottenfromit:
• lv_event_get_code(e)gettheeventcode
• lv_event_get_current_target(e) get the object to which an event was sent. I.e. the object whose
eventhandlerisbeingcalled.
• lv_event_get_target(e) get the object that originally triggered the event (different from
lv_event_get_targetifeventbubblingisenabled)
5.7. Events 383


--- Page 388 ---


LVGLDocumentation8.3
• lv_event_get_user_data(e)getthepointerpassedasthelastparameteroflv_obj_add_event_cb.
• lv_event_get_param(e)gettheparameterpassedasthelastparameteroflv_event_send
5.7.6 Event bubbling
Iflv_obj_add_flag(obj, LV_OBJ_FLAG_EVENT_BUBBLE)isenabledalleventswillbesenttoanobject's
parenttoo. IftheparentalsohasLV_OBJ_FLAG_EVENT_BUBBLEenabledtheeventwillbesenttoitsparentandso
on.
Thetargetparameteroftheeventisalwaysthecurrenttargetobject,nottheoriginalobject. Togettheoriginaltargetcall
lv_event_get_original_target(e)intheeventhandler.
5.7.7 Examples
Buttonclickevent
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void event_cb(lv_event_t * e)
{
LV_LOG_USER("Clicked");
static uint32_t cnt = 1;
lv_obj_t * btn = lv_event_get_target(e);
lv_obj_t * label = lv_obj_get_child(btn, 0);
lv_label_set_text_fmt(label, "%"LV_PRIu32, cnt);
cnt++;
}
/**
* Add click event to a button
*/
void lv_example_event_1(void)
{
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 50);
lv_obj_center(btn);
lv_obj_add_event_cb(btn, event_cb, LV_EVENT_CLICKED, NULL);
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text(label, "Click me!");
lv_obj_center(label);
}
#endif
class Event_1():
def __init__(self):
self.cnt = 1
#
# Add click event to a button
#
(continuesonnextpage)
5.7. Events 384


--- Page 389 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn = lv.btn(lv.scr_act())
btn.set_size(100, 50)
btn.center()
btn.add_event_cb(self.event_cb, lv.EVENT.CLICKED, None)
label = lv.label(btn)
label.set_text("Click me!")
label.center()
def event_cb(self,e):
print("Clicked")
btn = e.get_target()
label = btn.get_child(0)
label.set_text(str(self.cnt))
self.cnt += 1
evt1 = Event_1()
Handlemultipleevents
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * label = lv_event_get_user_data(e);
switch(code) {
case LV_EVENT_PRESSED:
lv_label_set_text(label, "The last button event:\nLV_EVENT_PRESSED");
break;
case LV_EVENT_CLICKED:
lv_label_set_text(label, "The last button event:\nLV_EVENT_CLICKED");
break;
case LV_EVENT_LONG_PRESSED:
lv_label_set_text(label, "The last button event:\nLV_EVENT_LONG_PRESSED");
break;
case LV_EVENT_LONG_PRESSED_REPEAT:
lv_label_set_text(label, "The last button event:\nLV_EVENT_LONG_PRESSED_
,→REPEAT");
break;
default:
break;
}
}
/**
* Handle multiple events
*/
void lv_example_event_2(void)
{
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, 100, 50);
(continuesonnextpage)
5.7. Events 385


--- Page 390 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_center(btn);
lv_obj_t * btn_label = lv_label_create(btn);
lv_label_set_text(btn_label, "Click me!");
lv_obj_center(btn_label);
lv_obj_t * info_label = lv_label_create(lv_scr_act());
lv_label_set_text(info_label, "The last button event:\nNone");
lv_obj_add_event_cb(btn, event_cb, LV_EVENT_ALL, info_label);
}
#endif
def event_cb(e,label):
code = e.get_code()
if code == lv.EVENT.PRESSED:
label.set_text("The last button event:\nLV_EVENT_PRESSED")
elif code == lv.EVENT.CLICKED:
label.set_text("The last button event:\nLV_EVENT_CLICKED")
elif code == lv.EVENT.LONG_PRESSED:
label.set_text("The last button event:\nLV_EVENT_LONG_PRESSED")
elif code == lv.EVENT.LONG_PRESSED_REPEAT:
label.set_text("The last button event:\nLV_EVENT_LONG_PRESSED_REPEAT")
btn = lv.btn(lv.scr_act())
btn.set_size(100, 50)
btn.center()
btn_label = lv.label(btn)
btn_label.set_text("Click me!")
btn_label.center()
info_label = lv.label(lv.scr_act())
info_label.set_text("The last button event:\nNone")
btn.add_event_cb(lambda e: event_cb(e,info_label), lv.EVENT.ALL, None)
Eventbubbling
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_FLEX
static void event_cb(lv_event_t * e)
{
/*The original target of the event. Can be the buttons or the container*/
lv_obj_t * target = lv_event_get_target(e);
/*The current target is always the container as the event is added to it*/
lv_obj_t * cont = lv_event_get_current_target(e);
/*If container was clicked do nothing*/
if(target == cont) return;
/*Make the clicked buttons red*/
(continuesonnextpage)
5.7. Events 386


--- Page 391 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_bg_color(target, lv_palette_main(LV_PALETTE_RED), 0);
}
/**
* Demonstrate event bubbling
*/
void lv_example_event_3(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 290, 200);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW_WRAP);
uint32_t i;
for(i = 0; i < 30; i++) {
lv_obj_t * btn = lv_btn_create(cont);
lv_obj_set_size(btn, 80, 50);
lv_obj_add_flag(btn, LV_OBJ_FLAG_EVENT_BUBBLE);
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
lv_obj_add_event_cb(cont, event_cb, LV_EVENT_CLICKED, NULL);
}
#endif
def event_cb(e):
# The original target of the event. Can be the buttons or the container
target = e.get_target()
# print(type(target))
# If container was clicked do nothing
if type(target) != type(lv.btn()):
return
# Make the clicked buttons red
target.set_style_bg_color(lv.palette_main(lv.PALETTE.RED), 0)
#
# Demonstrate event bubbling
#
cont = lv.obj(lv.scr_act())
cont.set_size(320, 200)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
for i in range(30):
btn = lv.btn(cont)
btn.set_size(80, 50)
btn.add_flag(lv.obj.FLAG.EVENT_BUBBLE)
(continuesonnextpage)
5.7. Events 387


--- Page 392 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(btn)
label.set_text(str(i))
label.center()
cont.add_event_cb(event_cb, lv.EVENT.CLICKED, None)
5.8 Input devices
Aninputdeviceusuallymeans:
• Pointer-likeinputdeviceliketouchpadormouse
• Keypadslikeanormalkeyboardorsimplenumerickeypad
• Encoderswithleft/rightturnandpushoptions
• Externalhardwarebuttonswhichareassignedtospecificpointsonthescreen
Important: Beforereadingfurther,pleasereadthe[Porting](/porting/indev)sectionofInputdevices
5.8.1 Pointers
Cursor
Pointerinputdevices(likeamouse)canhaveacursor.
...
lv_indev_t * mouse_indev = lv_indev_drv_register(&indev_drv);
LV_IMG_DECLARE(mouse_cursor_icon); /*Declare the image␣
,→source.*/
lv_obj_t * cursor_obj = lv_img_create(lv_scr_act()); /*Create an image object␣
,→for the cursor */
lv_img_set_src(cursor_obj, &mouse_cursor_icon); /*Set the image source*/
lv_indev_set_cursor(mouse_indev, cursor_obj); /*Connect the image ␣
,→object to the driver*/
Notethatthecursorobjectshouldhavelv_obj_clear_flag(cursor_obj, LV_OBJ_FLAG_CLICKABLE).
Forimages,clickingisdisabledbydefault.
5.8. Inputdevices 388


--- Page 393 ---


LVGLDocumentation8.3
Gestures
Pointerinputdevicescandetectbasicgestures. Bydefault,mostofthewidgetssendthegesturestoitsparent,sofinally
thegesturescanbedetectedonthescreenobjectinaformofanLV_EVENT_GESTUREevent. Forexample:
void my_event(lv_event_t * e)
{
lv_obj_t * screen = lv_event_get_current_target(e);
lv_dir_t dir = lv_indev_get_gesture_dir(lv_indev_act());
switch(dir) {
case LV_DIR_LEFT:
...
break;
case LV_DIR_RIGHT:
...
break;
case LV_DIR_TOP:
...
break;
case LV_DIR_BOTTOM:
...
break;
}
}
...
lv_obj_add_event_cb(screen1, my_event, LV_EVENT_GESTURE, NULL);
To prevent passing the gesture event to the parent from an object use lv_obj_clear_flag(obj,
LV_OBJ_FLAG_GESTURE_BUBBLE).
Notethat,gesturesarenottriggeredifanobjectisbeingscrolled.
If you did some action on a gesture you can call lv_indev_wait_release(lv_indev_get_act()) in the
eventhandlertopreventLVGLsendingfurtherinputdevicerelatedevents.
5.8.2 Keypad and encoder
Youcanfullycontroltheuserinterfacewithoutatouchpadormousebyusingakeypadorencoder(s). Itworkssimilarto
theTABkeyonthePCtoselectanelementinanapplicationorawebpage.
Groups
ObjectsyouwanttocontrolwithakeypadorencoderneedtobeaddedtoaGroup. Ineverygroupthereisexactlyone
focused object which receives the pressed keys or the encoder actions. For example, if a Text area is focused and you
presssomeletteronakeyboard,thekeyswillbesentandinsertedintothetextarea. Similarly,ifaSliderisfocusedand
youpresstheleftorrightarrows,theslider'svaluewillbechanged.
Youneedtoassociateaninputdevicewithagroup. Aninputdevicecansendkeyeventstoonlyonegroupbutagroup
canreceivedatafrommorethanoneinputdevice.
To create a group use lv_group_t * g = lv_group_create() and to add an object to the group use
lv_group_add_obj(g, obj).
To associate a group with an input device use lv_indev_set_group(indev, g), where indev is the return
valueoflv_indev_drv_register()
5.8. Inputdevices 389


--- Page 394 ---


LVGLDocumentation8.3
Keys
Therearesomepredefinedkeyswhichhavespecialmeaning:
• LV_KEY_NEXTFocusonthenextobject
• LV_KEY_PREVFocusonthepreviousobject
• LV_KEY_ENTERTriggersLV_EVENT_PRESSED/CLICKED/LONG_PRESSEDetc. events
• LV_KEY_UPIncreasevalueormoveupwards
• LV_KEY_DOWNDecreasevalueormovedownwards
• LV_KEY_RIGHTIncreasevalueormovetotheright
• LV_KEY_LEFTDecreasevalueormovetotheleft
• LV_KEY_ESCCloseorexit(E.g. closeaDropdownlist)
• LV_KEY_DELDelete(E.g. acharacterontherightinaTextarea)
• LV_KEY_BACKSPACEDeleteacharacterontheleft(E.g. inaTextarea)
• LV_KEY_HOMEGotothebeginning/top(E.g. inaTextarea)
• LV_KEY_ENDGototheend(E.g. inaTextarea)
The most important special keys are LV_KEY_NEXT/PREV, LV_KEY_ENTER and LV_KEY_UP/DOWN/LEFT/
RIGHT.Inyourread_cbfunction,youshouldtranslatesomeofyourkeystothesespecialkeystosupportnavigation
inagroupandinteractwithselectedobjects.
Usually,it'senoughtouseonlyLV_KEY_LEFT/RIGHTbecausemostobjectscanbefullycontrolledwiththem.
WithanencoderyoushoulduseonlyLV_KEY_LEFT,LV_KEY_RIGHT,andLV_KEY_ENTER.
Editandnavigatemode
Sinceakeypadhasplentyofkeys, it'seasytonavigatebetweenobjectsandeditthemusingthekeypad. Butencoders
havealimitednumberof"keys"andhenceitisdifficulttonavigateusingthedefaultoptions. NavigateandEdit modes
areusedtoavoidthisproblemwithencoders.
InNavigatemode,anencoder'sLV_KEY_LEFT/RIGHTistranslatedtoLV_KEY_NEXT/PREV.Therefore,thenext
orpreviousobjectwillbeselectedbyturningtheencoder. PressingLV_KEY_ENTERwillchangetoEditmode.
InEdit mode, LV_KEY_NEXT/PREVisusuallyusedtomodifyanobject. Dependingontheobject'stype, ashortor
long press of LV_KEY_ENTER changes back to Navigate mode. Usually, an object which cannot be pressed (like a
Slider)leavesEdit modeuponashortclick. Butwithobjectswhereashortclickhasmeaning(e.g. Button),alongpress
isrequired.
Defaultgroup
Interactive widgets - such as buttons, checkboxes, sliders, etc. - can be automatically added to a default group.
Just create a group with lv_group_t * g = lv_group_create(); and set the default group with
lv_group_set_default(g);
Don'tforgettoassignoneormoreinputdevicestothedefaultgroupwith lv_indev_set_group(my_indev,
g);.
5.8. Inputdevices 390


--- Page 395 ---


LVGLDocumentation8.3
Styling
If an object is focused either by clicking it via touchpad or focused via an encoder or keypad it goes to the
LV_STATE_FOCUSEDstate. Hence,focusedstyleswillbeappliedtoit.
IfanobjectswitchestoeditmodeitenterstheLV_STATE_FOCUSED | LV_STATE_EDITEDstatessothesestyle
propertieswillbeshown.
ForamoredetaileddescriptionreadtheStylesection.
5.8.3 API
Inputdevice
Functions
voidlv_indev_read_timer_cb(lv_timer_t*timer)
Calledperiodicallytoreadtheinputdevices
Parameters timer--pointertoatimertoread
voidlv_indev_enable(lv_indev_t*indev,boolen)
Enableordisableoneorallinputdevices(defaultenabled)
Parameters
• indev--pointertoaninputdeviceorNULLtoenable/disableallofthem
• en--truetoenable,falsetodisable
lv_indev_t*lv_indev_get_act(void)
Getthecurrentlyprocessedinputdevice. Canbeusedinactionfunctionstoo.
Returns pointertothecurrentlyprocessedinputdeviceorNULLifnoinputdeviceprocessingright
now
lv_indev_type_tlv_indev_get_type(constlv_indev_t*indev)
Getthetypeofaninputdevice
Parameters indev--pointertoaninputdevice
Returns thetypeoftheinputdevicefromlv_hal_indev_type_t(LV_INDEV_TYPE_...)
voidlv_indev_reset(lv_indev_t*indev,lv_obj_t*obj)
Resetoneorallinputdevices
Parameters
• indev--pointertoaninputdevicetoresetorNULLtoresetallofthem
• obj--pointertoanobjectwhichtriggersthereset.
voidlv_indev_reset_long_press(lv_indev_t*indev)
Resetthelongpressstateofaninputdevice
Parameters indev--pointertoaninputdevice
5.8. Inputdevices 391


--- Page 396 ---


LVGLDocumentation8.3
voidlv_indev_set_cursor(lv_indev_t*indev,lv_obj_t*cur_obj)
Setacursorforapointerinputdevice(forLV_INPUT_TYPE_POINTERandLV_INPUT_TYPE_BUTTON)
Parameters
• indev--pointertoaninputdevice
• cur_obj--pointertoanobjecttobeusedascursor
voidlv_indev_set_group(lv_indev_t*indev,lv_group_t*group)
Setadestinationgroupforakeypadinputdevice(forLV_INDEV_TYPE_KEYPAD)
Parameters
• indev--pointertoaninputdevice
• group--pointtoagroup
voidlv_indev_set_button_points(lv_indev_t*indev,constlv_point_tpoints[])
SettheanarrayofpointsforLV_INDEV_TYPE_BUTTON.Thesepointswillbeassignedtothebuttonstopress
aspecificpointonthescreen
Parameters
• indev--pointertoaninputdevice
• group--pointtoagroup
voidlv_indev_get_point(constlv_indev_t*indev,lv_point_t*point)
Getthelastpointofaninputdevice(forLV_INDEV_TYPE_POINTERandLV_INDEV_TYPE_BUTTON)
Parameters
• indev--pointertoaninputdevice
• point--pointertoapointtostoretheresult
lv_dir_tlv_indev_get_gesture_dir(constlv_indev_t*indev)
Getthecurrentgesturedirect
Parameters indev--pointertoaninputdevice
Returns currentgesturedirect
uint32_tlv_indev_get_key(constlv_indev_t*indev)
Getthelastpressedkeyofaninputdevice(forLV_INDEV_TYPE_KEYPAD)
Parameters indev--pointertoaninputdevice
Returns thelastpressedkey(0onerror)
lv_dir_tlv_indev_get_scroll_dir(constlv_indev_t*indev)
Check the current scroll direction of an input device (for LV_INDEV_TYPE_POINTER and
LV_INDEV_TYPE_BUTTON)
Parameters indev--pointertoaninputdevice
Returns LV_DIR_NONE:noscrollingnowLV_DIR_HOR/VER
lv_obj_t*lv_indev_get_scroll_obj(constlv_indev_t*indev)
Getthecurrentlyscrolledobject(forLV_INDEV_TYPE_POINTERandLV_INDEV_TYPE_BUTTON)
Parameters indev--pointertoaninputdevice
Returns pointertothecurrentlyscrolledobjectorNULLifnoscrollingbythisindev
5.8. Inputdevices 392


--- Page 397 ---


LVGLDocumentation8.3
voidlv_indev_get_vect(constlv_indev_t*indev,lv_point_t*point)
Get the movement vector of an input device (for LV_INDEV_TYPE_POINTER and
LV_INDEV_TYPE_BUTTON)
Parameters
• indev--pointertoaninputdevice
• point--pointertoapointtostorethetypes.pointer.vector
voidlv_indev_wait_release(lv_indev_t*indev)
Donothinguntilthenextrelease
Parameters indev--pointertoaninputdevice
lv_obj_t*lv_indev_get_obj_act(void)
Getsapointertothecurrentlyactiveobjectinthecurrentlyprocessedinputdevice.
Returns pointertocurrentlyactiveobjectorNULLifnoactiveobject
lv_timer_t*lv_indev_get_read_timer(lv_disp_t*indev)
Getapointertotheindevreadtimertomodifyitsparameterswithlv_timer_...functions.
Parameters indev--pointertoaninputdevice
Returns pointertotheindevreadrefreshertimer. (NULLonerror)
lv_obj_t*lv_indev_search_obj(lv_obj_t*obj,lv_point_t*point)
Searchthemosttop,clickableobjectbyapoint
Parameters
• obj--pointertoastartobject,typicallythescreen
• point--pointertoapointforsearchingthemosttopchild
Returns pointertothefoundobjectorNULLiftherewasnosuitableobject
Groups
Typedefs
typedefuint8_tlv_key_t
typedefvoid(*lv_group_focus_cb_t)(struct_lv_group_t*)
typedefvoid(*lv_group_edge_cb_t)(struct_lv_group_t*,bool)
typedefstruct_lv_group_tlv_group_t
Groupscanbeusedtologicallyholdobjectssothattheycanbeindividuallyfocused. TheyareNOTforlayingout
objectsonascreen(trylayoutsforthat).
5.8. Inputdevices 393


--- Page 398 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Values:
enumeratorLV_KEY_UP
enumeratorLV_KEY_DOWN
enumeratorLV_KEY_RIGHT
enumeratorLV_KEY_LEFT
enumeratorLV_KEY_ESC
enumeratorLV_KEY_DEL
enumeratorLV_KEY_BACKSPACE
enumeratorLV_KEY_ENTER
enumeratorLV_KEY_NEXT
enumeratorLV_KEY_PREV
enumeratorLV_KEY_HOME
enumeratorLV_KEY_END
enumlv_group_refocus_policy_t
Values:
enumeratorLV_GROUP_REFOCUS_POLICY_NEXT
enumeratorLV_GROUP_REFOCUS_POLICY_PREV
5.8. Inputdevices 394


--- Page 399 ---


LVGLDocumentation8.3
Functions
void_lv_group_init(void)
Init. thegroupmodule
Remark Internalfunction,donotcalldirectly.
lv_group_t*lv_group_create(void)
Createanewobjectgroup
Returns pointertothenewobjectgroup
voidlv_group_del(lv_group_t*group)
Deleteagroupobject
Parameters group--pointertoagroup
voidlv_group_set_default(lv_group_t*group)
Setadefaultgroup. Newobjectareaddedtothisgroupifit'senabledintheirclasswithadd_to_def_group
= true
Parameters group--pointertoagroup(canbeNULL)
lv_group_t*lv_group_get_default(void)
Getthedefaultgroup
Returns pointertothedefaultgroup
voidlv_group_add_obj(lv_group_t*group,struct_lv_obj_t*obj)
Addanobjecttoagroup
Parameters
• group--pointertoagroup
• obj--pointertoanobjecttoadd
voidlv_group_swap_obj(struct_lv_obj_t*obj1,struct_lv_obj_t*obj2)
Swap2objectinagroup. Theobjectmustbeinthesamegroup
Parameters
• obj1--pointertoanobject
• obj2--pointertoanotherobject
voidlv_group_remove_obj(struct_lv_obj_t*obj)
Removeanobjectfromitsgroup
Parameters obj--pointertoanobjecttoremove
voidlv_group_remove_all_objs(lv_group_t*group)
Removeallobjectsfromagroup
Parameters group--pointertoagroup
voidlv_group_focus_obj(struct_lv_obj_t*obj)
Focusonanobject(defocusthecurrent)
Parameters obj--pointertoanobjecttofocuson
5.8. Inputdevices 395


--- Page 400 ---


LVGLDocumentation8.3
voidlv_group_focus_next(lv_group_t*group)
Focusthenextobjectinagroup(defocusthecurrent)
Parameters group--pointertoagroup
voidlv_group_focus_prev(lv_group_t*group)
Focusthepreviousobjectinagroup(defocusthecurrent)
Parameters group--pointertoagroup
voidlv_group_focus_freeze(lv_group_t*group,boolen)
Donotlettochangethefocusfromthecurrentobject
Parameters
• group--pointertoagroup
• en--true: freeze,false: releasefreezing(normalmode)
lv_res_tlv_group_send_data(lv_group_t*group,uint32_tc)
Sendacontrolcharactertothefocusesobjectofagroup
Parameters
• group--pointertoagroup
• c--acharacter(useLV_KEY_.. tonavigate)
Returns resultoffocusedobjectingroup.
voidlv_group_set_focus_cb(lv_group_t*group,lv_group_focus_cb_tfocus_cb)
Setafunctionforagroupwhichwillbecalledwhenanewobjectisfocused
Parameters
• group--pointertoagroup
• focus_cb--thecallbackfunctionorNULLifunused
voidlv_group_set_edge_cb(lv_group_t*group,lv_group_edge_cb_tedge_cb)
Setafunctionforagroupwhichwillbecalledwhenafocusedgeisreached
Parameters
• group--pointertoagroup
• edge_cb--thecallbackfunctionorNULLifunused
voidlv_group_set_refocus_policy(lv_group_t*group,lv_group_refocus_policy_tpolicy)
Setwhetherthenextorpreviousiteminagroupisfocusedifthecurrentlyfocusedobjisdeleted.
Parameters
• group--pointertoagroup
• policy--newrefocuspolicyenum
voidlv_group_set_editing(lv_group_t*group,booledit)
Manuallysetthecurrentmode(editornavigate).
Parameters
• group--pointertogroup
• edit--true: editmode;false: navigatemode
5.8. Inputdevices 396


--- Page 401 ---


LVGLDocumentation8.3
voidlv_group_set_wrap(lv_group_t*group,boolen)
Setwhetherfocusnext/prevwillallowwrappingfromfirst->lastorlast->firstobject.
Parameters
• group--pointertogroup
• en--true: wrappingenabled;false: wrappingdisabled
struct_lv_obj_t*lv_group_get_focused(constlv_group_t*group)
GetthefocusedobjectorNULLifthereisn'tone
Parameters group--pointertoagroup
Returns pointertothefocusedobject
lv_group_focus_cb_tlv_group_get_focus_cb(constlv_group_t*group)
Getthefocuscallbackfunctionofagroup
Parameters group--pointertoagroup
Returns thecallbackfunctionorNULLifnotset
lv_group_edge_cb_tlv_group_get_edge_cb(constlv_group_t*group)
Gettheedgecallbackfunctionofagroup
Parameters group--pointertoagroup
Returns thecallbackfunctionorNULLifnotset
boollv_group_get_editing(constlv_group_t*group)
Getthecurrentmode(editornavigate).
Parameters group--pointertogroup
Returns true: editmode;false: navigatemode
boollv_group_get_wrap(lv_group_t*group)
Getwhetherfocusnext/prevwillallowwrappingfromfirst->lastorlast->firstobject.
Parameters
• group--pointertogroup
• en--true: wrappingenabled;false: wrappingdisabled
uint32_tlv_group_get_obj_count(lv_group_t*group)
Getthenumberofobjectinthegroup
Parameters group--pointertoagroup
Returns numberofobjectsinthegroup
struct_lv_group_t
#include<lv_group.h>Groupscanbeusedtologicallyholdobjectssothattheycanbeindividuallyfocused. They
areNOTforlayingoutobjectsonascreen(trylayoutsforthat).
5.8. Inputdevices 397


--- Page 402 ---


LVGLDocumentation8.3
PublicMembers
lv_ll_tobj_ll
Linkedlisttostoretheobjectsinthegroup
struct_lv_obj_t**obj_focus
Theobjectinfocus
lv_group_focus_cb_tfocus_cb
Afunctiontocallwhenanewobjectisfocused(optional)
lv_group_edge_cb_tedge_cb
Afunctiontocallwhenanedgeisreached,nomorefocustargetsareavailableinthisdirection(toallowedge
feedbacklikeasoundorascrollbounce)
void*user_data
uint8_tfrozen
1: can'tfocustonewobject
uint8_tediting
1: Editmode,0: Navigatemode
uint8_trefocus_policy
1: Focuspreviffocusedondeletion. 0: Focusnextiffocusedondeletion.
uint8_twrap
1: Focusnext/prevcanwrapatendoflist. 0: Focusnext/prevstopsatendoflist.
5.9 Displays
Important: ThebasicconceptofadisplayinLVGLisexplainedinthe[Porting](/porting/display)section. Sobefore
readingfurther,pleasereadthe[Porting](/porting/display)sectionfirst.
5.9.1 Multiple display support
InLVGLyoucanhavemultipledisplays,eachwiththeirowndriverandobjects. Theonlylimitationisthateverydisplay
needstohavethesamecolordepth(asdefinedinLV_COLOR_DEPTH).Ifthedisplaysaredifferentinthisregardthe
renderedimagecanbeconvertedtothecorrectformatinthedriversflush_cb.
Creatingmoredisplaysiseasy: justinitializemoredisplaybuffersandregisteranotherdriverforeverydisplay. When
youcreatetheUI,uselv_disp_set_default(disp)totellthelibraryonwhichdisplaytocreateobjects.
Whywouldyouwantmulti-displaysupport? Herearesomeexamples:
5.9. Displays 398


--- Page 403 ---


LVGLDocumentation8.3
• Have a "normal"TFT displaywithlocal UI andcreate"virtual"screensonVNC ondemand. (Youneedto add
yourVNCdriver).
• HavealargeTFTdisplayandasmallmonochromedisplay.
• Havesomesmallerandsimpledisplaysinalargeinstrumentortechnology.
• HavetwolargeTFTdisplays: oneforacustomerandonefortheshopassistant.
Usingonlyonedisplay
Using more displays can be useful but in most cases it's not required. Therefore, the whole concept of multi-display
handlingiscompletelyhiddenifyouregisteronlyonedisplay. Bydefault,thelastcreated(andonly)displayisused.
lv_scr_act(), lv_scr_load(scr), lv_layer_top(), lv_layer_sys(), LV_HOR_RES and
LV_VER_RESarealwaysappliedonthemostrecentlycreated(default)display. IfyoupassNULLasdispparameter
todisplayrelatedfunctionsthedefaultdisplaywillusuallybeused. E.g. lv_disp_trig_activity(NULL)will
triggerauseractivityonthedefaultdisplay. (SeebelowinInactivity).
Mirrordisplay
Tomirrortheimageofadisplaytoanotherdisplay,youdon'tneedtousemulti-displaysupport. Justtransferthebuffer
receivedindrv.flush_cbtotheotherdisplaytoo.
Splitimage
Youcancreatealargervirtualdisplayfromanarrayofsmallerones. Youcancreateitasbelow:
1. Settheresolutionofthedisplaystothelargedisplay'sresolution.
2. Indrv.flush_cb,truncateandmodifytheareaparameterforeachdisplay.
3. Sendthebuffer'scontenttoeachrealdisplaywiththetruncatedarea.
5.9.2 Screens
Everydisplayhasitsownsetofscreensandtheobjectsoneachscreen.
Besurenottoconfusedisplaysandscreens:
• Displaysarethephysicalhardwaredrawingthepixels.
• Screensarethehigh-levelrootobjectsassociatedwithaparticulardisplay. Onedisplaycanhavemultiplescreens
associatedwithit,butnotviceversa.
Screens can be considered the highest level containers which have no parent. A screen's size is always equal to its
display and their origin is (0;0). Therefore, a screen's coordinates can't be changed, i.e. lv_obj_set_pos(),
lv_obj_set_size()orsimilarfunctionscan'tbeusedonscreens.
A screen can be created from any object type but the two most typical types are Base object and Image (to create a
wallpaper).
Tocreateascreen,uselv_obj_t * scr = lv_<type>_create(NULL, copy). copycanbeanexisting
screencopiedintothenewscreen.
Toloadascreen,uselv_scr_load(scr). Togettheactivescreen,uselv_scr_act(). Thesefunctionswork
onthedefaultdisplay. Ifyouwanttospecifywhichdisplaytoworkon,uselv_disp_get_scr_act(disp)and
lv_disp_load_scr(disp, scr). Ascreencanbeloadedwithanimationstoo. Readmorehere.
5.9. Displays 399


--- Page 404 ---


LVGLDocumentation8.3
Screenscanbedeletedwithlv_obj_del(scr),butensurethatyoudonotdeletethecurrentlyloadedscreen.
Transparentscreens
Usually,theopacityofthescreenisLV_OPA_COVERtoprovideasolidbackgroundforitschildren. Ifthisisnotthe
case(opacity<100%)thedisplay'sbackgroundcolororimagewillbevisible. SeetheDisplaybackground sectionfor
moredetails. Ifthedisplay'sbackgroundopacityisalsonotLV_OPA_COVERLVGLhasnosolidbackgroundtodraw.
This configuration (transparent screen and display) could be used to create for example OSD menus where a video is
playedonalowerlayer,andamenuisoverlayedonanupperlayer.
Tohandletransparentdisplays,special(slower)colormixingalgorithmsneedtobeusedbyLVGLsothisfeatureneeds
toenabledwithLV_COLOR_SCREEN_TRANSPinlv_conf.h. TheAlphachannelof32-bitcolorswillbe0where
therearenoobjectsand255wheretherearesolidobjects.
Insummary,toenabletransparentscreensanddisplaysforOSDmenu-likeUIs:
• EnableLV_COLOR_SCREEN_TRANSPinlv_conf.h
• Setthescreen'sopacitytoLV_OPA_TRANSPe.g. withlv_obj_set_style_bg_opa(lv_scr_act(),
LV_OPA_TRANSP, LV_PART_MAIN)
• SetthedisplayopacitytoLV_OPA_TRANSPwithlv_disp_set_bg_opa(NULL, LV_OPA_TRANSP);
5.9.3 Features of displays
Inactivity
Auser'sinactivitytimeismeasuredoneachdisplay. EveryuseofanInputdevice(ifassociatedwiththedisplay)counts
asanactivity. Togettimeelapsedsincethelastactivity,uselv_disp_get_inactive_time(disp). IfNULLis
passed,thelowestinactivitytimeamongalldisplayswillbereturned(NULLisn'tjustthedefaultdisplay).
Youcanmanuallytriggeranactivityusinglv_disp_trig_activity(disp). IfdispisNULL,thedefaultscreen
willbeused(andnotalldisplays).
Background
Everydisplayhasabackgroundcolor,backgroundimageandbackgroundopacityproperties. Theybecomevisiblewhen
thecurrentscreenistransparentornotpositionedtocoverthewholedisplay.
Thebackgroundcolorisasimplecolortofillthedisplay. Itcanbeadjustedwithlv_disp_set_bg_color(disp,
color);
Thedisplaybackgroundimageisapathtoafileorapointertoanlv_img_dsc_tvariable(convertedimagedata)to
beusedaswallpaper. Itcanbesetwithlv_disp_set_bg_image(disp, &my_img);Ifabackgroundimageis
configuredthebackgroundwon'tbefilledwithbg_color.
Theopacityofthebackgroundcolororimagecanbeadjustedwithlv_disp_set_bg_opa(disp, opa).
ThedispparameterofthesefunctionscanbeNULLtoselectthedefaultdisplay.
5.9. Displays 400


--- Page 405 ---


LVGLDocumentation8.3
5.9.4 API
Enums
enumlv_scr_load_anim_t
Values:
enumeratorLV_SCR_LOAD_ANIM_NONE
enumeratorLV_SCR_LOAD_ANIM_OVER_LEFT
enumeratorLV_SCR_LOAD_ANIM_OVER_RIGHT
enumeratorLV_SCR_LOAD_ANIM_OVER_TOP
enumeratorLV_SCR_LOAD_ANIM_OVER_BOTTOM
enumeratorLV_SCR_LOAD_ANIM_MOVE_LEFT
enumeratorLV_SCR_LOAD_ANIM_MOVE_RIGHT
enumeratorLV_SCR_LOAD_ANIM_MOVE_TOP
enumeratorLV_SCR_LOAD_ANIM_MOVE_BOTTOM
enumeratorLV_SCR_LOAD_ANIM_FADE_IN
enumeratorLV_SCR_LOAD_ANIM_FADE_ON
enumeratorLV_SCR_LOAD_ANIM_FADE_OUT
enumeratorLV_SCR_LOAD_ANIM_OUT_LEFT
enumeratorLV_SCR_LOAD_ANIM_OUT_RIGHT
enumeratorLV_SCR_LOAD_ANIM_OUT_TOP
enumeratorLV_SCR_LOAD_ANIM_OUT_BOTTOM
5.9. Displays 401


--- Page 406 ---


LVGLDocumentation8.3
Functions
lv_obj_t*lv_disp_get_scr_act(lv_disp_t*disp)
Returnwithapointertotheactivescreen
Parameters disp--pointertodisplaywhichactivescreenshouldbeget. (NULLtousethedefault
screen)
Returns pointertotheactivescreenobject(loadedby'lv_scr_load()')
lv_obj_t*lv_disp_get_scr_prev(lv_disp_t*disp)
Returnwithapointertothepreviousscreen. Onlyusedduringscreentransitions.
Parameters disp--pointertodisplaywhichpreviousscreenshouldbeget. (NULLtousethedefault
screen)
Returns pointertothepreviousscreenobjectorNULLifnotusednow
voidlv_disp_load_scr(lv_obj_t*scr)
Makeascreenactive
Parameters scr--pointertoascreen
lv_obj_t*lv_disp_get_layer_top(lv_disp_t*disp)
Returnwiththetoplayer. (Sameoneveryscreenanditisabovethenormalscreenlayer)
Parameters disp--pointertodisplaywhichtoplayershouldbeget. (NULLtousethedefaultscreen)
Returns pointertothetoplayerobject(transparentscreensizedlv_obj)
lv_obj_t*lv_disp_get_layer_sys(lv_disp_t*disp)
Returnwiththesys. layer. (Sameoneveryscreenanditisabovethenormalscreenandthetoplayer)
Parameters disp--pointertodisplaywhichsys. layershouldberetrieved. (NULLtousethedefault
screen)
Returns pointertothesyslayerobject(transparentscreensizedlv_obj)
voidlv_disp_set_theme(lv_disp_t*disp,lv_theme_t*th)
Setthethemeofadisplay
Parameters disp--pointertoadisplay
lv_theme_t*lv_disp_get_theme(lv_disp_t*disp)
Getthethemeofadisplay
Parameters disp--pointertoadisplay
Returns thedisplay'stheme(canbeNULL)
voidlv_disp_set_bg_color(lv_disp_t*disp,lv_color_tcolor)
Setthebackgroundcolorofadisplay
Parameters
• disp--pointertoadisplay
• color--colorofthebackground
voidlv_disp_set_bg_image(lv_disp_t*disp,constvoid*img_src)
Setthebackgroundimageofadisplay
Parameters
5.9. Displays 402


--- Page 407 ---


LVGLDocumentation8.3
• disp--pointertoadisplay
• img_src--pathtofileorpointertoanlv_img_dsc_tvariable
voidlv_disp_set_bg_opa(lv_disp_t*disp,lv_opa_topa)
Setopacityofthebackground
Parameters
• disp--pointertoadisplay
• opa--opacity(0..255)
voidlv_scr_load_anim(lv_obj_t*scr,lv_scr_load_anim_tanim_type,uint32_ttime,uint32_tdelay,bool
auto_del)
Switchscreenwithanimation
Parameters
• scr--pointertothenewscreentoload
• anim_type -- type of the animation from lv_scr_load_anim_t, e.g.
LV_SCR_LOAD_ANIM_MOVE_LEFT
• time--timeoftheanimation
• delay--delaybeforethetransition
• auto_del--true: automaticallydeletetheoldscreen
uint32_tlv_disp_get_inactive_time(constlv_disp_t*disp)
Getelapsedtimesincelastuseractivityonadisplay(e.g. click)
Parameters disp--pointertoadisplay(NULLtogettheoverallsmallestinactivity)
Returns elapsedticks(milliseconds)sincethelastactivity
voidlv_disp_trig_activity(lv_disp_t*disp)
Manuallytriggeranactivityonadisplay
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
voidlv_disp_clean_dcache(lv_disp_t*disp)
CleananyCPUcachethatisrelatedtothedisplay.
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
voidlv_disp_enable_invalidation(lv_disp_t*disp,boolen)
Temporarilyenableanddisabletheinvalidationofthedisplay.
Parameters
• disp--pointertoadisplay(NULLtousethedefaultdisplay)
• en--true: enableinvalidation;false: invalidation
boollv_disp_is_invalidation_enabled(lv_disp_t*disp)
Getdisplayinvalidationisenabled.
Parameters disp--pointertoadisplay(NULLtousethedefaultdisplay)
Returns returntrueifinvalidationisenabled
5.9. Displays 403


--- Page 408 ---


LVGLDocumentation8.3
lv_timer_t*_lv_disp_get_refr_timer(lv_disp_t*disp)
Getapointertothescreenrefreshertimertomodifyitsparameterswithlv_timer_...functions.
Parameters disp--pointertoadisplay
Returns pointertothedisplayrefreshertimer. (NULLonerror)
staticinlinelv_obj_t*lv_scr_act(void)
Gettheactivescreenofthedefaultdisplay
Returns pointertotheactivescreen
staticinlinelv_obj_t*lv_layer_top(void)
Getthetoplayerofthedefaultdisplay
Returns pointertothetoplayer
staticinlinelv_obj_t*lv_layer_sys(void)
Gettheactivescreenofthedefaultdisplay
Returns pointertothesyslayer
staticinlinevoidlv_scr_load(lv_obj_t*scr)
staticinlinelv_coord_tlv_dpx(lv_coord_tn)
Scalethegivennumberofpixels(adistanceorsize)relativetoa160DPIdisplayconsideringtheDPIofthedefault
display. Itensuresthate.g. lv_dpx(100)willhavethesamephysicalsizeregardlesstotheDPIofthedisplay.
Parameters n--thenumberofpixelstoscale
Returns n x current_dpi/160
staticinlinelv_coord_tlv_disp_dpx(constlv_disp_t*disp,lv_coord_tn)
Scalethegivennumberofpixels(adistanceorsize)relativetoa160DPIdisplayconsideringtheDPIofthegiven
display. Itensuresthate.g. lv_dpx(100)willhavethesamephysicalsizeregardlesstotheDPIofthedisplay.
Parameters
• obj--adisplaywhosedpishouldbeconsidered
• n--thenumberofpixelstoscale
Returns n x current_dpi/160
5.10 Colors
Thecolormodulehandlesallcolor-relatedfunctionslikechangingcolordepth,creatingcolorsfromhexcode,converting
betweencolordepths,mixingcolors,etc.
Thetypelv_color_tisusedtostoreacolor. ItsfieldsaresetaccordingtoLV_COLOR_DEPTHinlv_conf.h.
(Seebelow)
YoumaysetLV_COLOR_16_SWAPinlv_conf.htoswapbytesofRGB565colors. Youmayneedthiswhensending
16-bit colors via a byte-oriented interface like SPI. As 16-bit numbers are stored in little-endian format (lower byte at
the lower address), the interface will send the lower byte first. However, displays usually need the higher byte first. A
mismatchinthebyteorderwillresultinhighlydistortedcolors.
5.10. Colors 404


--- Page 409 ---


LVGLDocumentation8.3
5.10.1 Creating colors
RGB
CreatecolorsfromRed,GreenandBluechannelvalues:
//All channels are 0-255
lv_color_t c = lv_color_make(red, green, blue);
//From hex code 0x000000..0xFFFFFF interpreted as RED + GREEN + BLUE
lv_color_t c = lv_color_hex(0x123456);
//From 3 digits. Same as lv_color_hex(0x112233)
lv_color_t c = lv_color_hex3(0x123);
HSV
CreatecolorsfromHue,SaturationandValuevalues:
//h = 0..359, s = 0..100, v = 0..100
lv_color_t c = lv_color_hsv_to_rgb(h, s, v);
//All channels are 0-255
lv_color_hsv_t c_hsv = lv_color_rgb_to_hsv(r, g, b);
//From lv_color_t variable
lv_color_hsv_t c_hsv = lv_color_to_hsv(color);
Palette
LVGLincludesMaterialDesign'spaletteofcolors. Inthissystemallnamedcolorshaveanominalmaincoloraswellas
fourdarkerandfivelightervariants.
Thenamesofthecolorsareasfollows:
• LV_PALETTE_RED
• LV_PALETTE_PINK
• LV_PALETTE_PURPLE
• LV_PALETTE_DEEP_PURPLE
• LV_PALETTE_INDIGO
• LV_PALETTE_BLUE
• LV_PALETTE_LIGHT_BLUE
• LV_PALETTE_CYAN
• LV_PALETTE_TEAL
• LV_PALETTE_GREEN
• LV_PALETTE_LIGHT_GREEN
• LV_PALETTE_LIME
5.10. Colors 405


--- Page 410 ---


LVGLDocumentation8.3
• LV_PALETTE_YELLOW
• LV_PALETTE_AMBER
• LV_PALETTE_ORANGE
• LV_PALETTE_DEEP_ORANGE
• LV_PALETTE_BROWN
• LV_PALETTE_BLUE_GREY
• LV_PALETTE_GREY
Togetthemaincoloruselv_color_t c = lv_palette_main(LV_PALETTE_...).
For the lighter variants of a palette color use lv_color_t c = lv_palette_lighten(LV_PALETTE_.
.., v). v can be 1..5. For the darker variants of a palette color use lv_color_t c =
lv_palette_darken(LV_PALETTE_..., v). vcanbe1..4.
Modifyandmixcolors
Thefollowingfunctionscanmodifyacolor:
// Lighten a color. 0: no change, 255: white
lv_color_t c = lv_color_lighten(c, lvl);
// Darken a color. 0: no change, 255: black
lv_color_t c = lv_color_darken(lv_color_t c, lv_opa_t lvl);
// Lighten or darken a color. 0: black, 128: no change 255: white
lv_color_t c = lv_color_change_lightness(lv_color_t c, lv_opa_t lvl);
// Mix two colors with a given ratio 0: full c2, 255: full c1, 128: half c1 and half␣
,→c2
lv_color_t c = lv_color_mix(c1, c2, ratio);
Built-incolors
lv_color_white()andlv_color_black()return0xFFFFFFand0x000000respectively.
5.10.2 Opacity
Todescribeopacitythelv_opa_ttypeiscreatedfromuint8_t. Somespecialpurposedefinesarealsointroduced:
• LV_OPA_TRANSPValue: 0,meansnoopacitymakingthecolorcompletelytransparent
• LV_OPA_10Value: 25,meansthecolorcoversonlyalittle
• LV_OPA_20 ... OPA_80followlogically
• LV_OPA_90Value: 229,meansthecolornearcompletelycovers
• LV_OPA_COVERValue: 255,meansthecolorcompletelycovers(fullopacity)
YoucanalsousetheLV_OPA_*definesinlv_color_mix()asamixingratio.
5.10. Colors 406


--- Page 411 ---


LVGLDocumentation8.3
5.10.3 Color types
Thefollowingvariabletypesaredefinedbythecolormodule:
• lv_color1_tMonochromecolor. AlsohasR,G,Bfieldsforcompatibilitybuttheyarealwaysthesamevalue
(1byte)
• lv_color8_tAstructuretostoreR(3bit),G(3bit),B(2bit)componentsfor8-bitcolors(1byte)
• lv_color16_tAstructuretostoreR(5bit),G(6bit),B(5bit)componentsfor16-bitcolors(2byte)
• lv_color32_tAstructuretostoreR(8bit),G(8bit),B(8bit)componentsfor24-bitcolors(4byte)
• lv_color_tEqualtolv_color1/8/16/24_tdependingontheconfiguredcolordepthsetting
• lv_color_int_tuint8_t,uint16_toruint32_tdependingonthecolordepthsetting. Usedtobuild
colorarraysfromplainnumbers.
• lv_opa_tAsimpleuint8_ttypetodescribeopacity.
Thelv_color_t,lv_color1_t,lv_color8_t,lv_color16_tandlv_color32_ttypeshavefourfields:
• ch.redredchannel
• ch.greengreenchannel
• ch.bluebluechannel
• full*red+green+blueasonenumber
Youcansetthecurrentcolordepthinlv_conf.h,bysettingtheLV_COLOR_DEPTHdefineto1(monochrome),8,16or
32.
Convertcolor
Youcanconvertacolorfromthecurrentcolordepthtoanother. Theconverterfunctionsreturnwithanumber,soyou
havetousethefullfieldtomapaconvertedcolorbackintoastructure:
lv_color_t c;
c.red = 0x38;
c.green = 0x70;
c.blue = 0xCC;
lv_color1_t c1;
c1.full = lv_color_to1(c); /*Return 1 for light colors, 0 for dark colors*/
lv_color8_t c8;
c8.full = lv_color_to8(c); /*Give a 8 bit number with the converted color*/
lv_color16_t c16;
c16.full = lv_color_to16(c); /*Give a 16 bit number with the converted color*/
lv_color32_t c24;
c32.full = lv_color_to32(c); /*Give a 32 bit number with the converted color*/
5.10. Colors 407


--- Page 412 ---


LVGLDocumentation8.3
5.10.4 API
Typedefs
typedeflv_color_t(*lv_color_filter_cb_t)(conststruct_lv_color_filter_dsc_t*,lv_color_t,lv_opa_t)
typedefstruct_lv_color_filter_dsc_tlv_color_filter_dsc_t
Enums
enum[anonymous]
Opacitypercentages.
Values:
enumeratorLV_OPA_TRANSP
enumeratorLV_OPA_0
enumeratorLV_OPA_10
enumeratorLV_OPA_20
enumeratorLV_OPA_30
enumeratorLV_OPA_40
enumeratorLV_OPA_50
enumeratorLV_OPA_60
enumeratorLV_OPA_70
enumeratorLV_OPA_80
enumeratorLV_OPA_90
enumeratorLV_OPA_100
enumeratorLV_OPA_COVER
enumlv_palette_t
Values:
5.10. Colors 408


--- Page 413 ---


LVGLDocumentation8.3
enumeratorLV_PALETTE_RED
enumeratorLV_PALETTE_PINK
enumeratorLV_PALETTE_PURPLE
enumeratorLV_PALETTE_DEEP_PURPLE
enumeratorLV_PALETTE_INDIGO
enumeratorLV_PALETTE_BLUE
enumeratorLV_PALETTE_LIGHT_BLUE
enumeratorLV_PALETTE_CYAN
enumeratorLV_PALETTE_TEAL
enumeratorLV_PALETTE_GREEN
enumeratorLV_PALETTE_LIGHT_GREEN
enumeratorLV_PALETTE_LIME
enumeratorLV_PALETTE_YELLOW
enumeratorLV_PALETTE_AMBER
enumeratorLV_PALETTE_ORANGE
enumeratorLV_PALETTE_DEEP_ORANGE
enumeratorLV_PALETTE_BROWN
enumeratorLV_PALETTE_BLUE_GREY
enumeratorLV_PALETTE_GREY
enumerator_LV_PALETTE_LAST
enumeratorLV_PALETTE_NONE
5.10. Colors 409


--- Page 414 ---


LVGLDocumentation8.3
Functions
LV_EXPORT_CONST_INT(LV_COLOR_DEPTH)
LV_EXPORT_CONST_INT(LV_COLOR_16_SWAP)
typedef LV_CONCAT3 (uint, LV_COLOR_SIZE, _t) lv_color_int_t
typedef LV_CONCAT3 (lv_color, LV_COLOR_DEPTH, _t) lv_color_t
staticinlineuint8_tlv_color_to1(lv_color_tcolor)
staticinlineuint8_tlv_color_to8(lv_color_tcolor)
staticinlineuint16_tlv_color_to16(lv_color_tcolor)
staticinlineuint32_tlv_color_to32(lv_color_tcolor)
staticinlineuint8_tlv_color_brightness(lv_color_tcolor)
Getthebrightnessofacolor
Parameters color--acolor
Returns thebrightness[0..255]
staticinlinelv_color_tlv_color_make(uint8_tr,uint8_tg,uint8_tb)
staticinlinelv_color_tlv_color_hex(uint32_tc)
staticinlinelv_color_tlv_color_hex3(uint32_tc)
staticinlinevoidlv_color_filter_dsc_init(lv_color_filter_dsc_t*dsc,lv_color_filter_cb_tcb)
lv_color_tlv_color_lighten(lv_color_tc,lv_opa_tlvl)
lv_color_tlv_color_darken(lv_color_tc,lv_opa_tlvl)
lv_color_tlv_color_change_lightness(lv_color_tc,lv_opa_tlvl)
lv_color_tlv_color_hsv_to_rgb(uint16_th,uint8_ts,uint8_tv)
ConvertaHSVcolortoRGB
Parameters
• h--hue[0..359]
• s--saturation[0..100]
• v--value[0..100]
Returns thegivenRGBcolorinRGB(withLV_COLOR_DEPTHdepth)
lv_color_hsv_tlv_color_rgb_to_hsv(uint8_tr8,uint8_tg8,uint8_tb8)
Converta32-bitRGBcolortoHSV
Parameters
• r8--8-bitred
• g8--8-bitgreen
• b8--8-bitblue
5.10. Colors 410


--- Page 415 ---


LVGLDocumentation8.3
Returns thegivenRGBcolorinHSV
lv_color_hsv_tlv_color_to_hsv(lv_color_tcolor)
ConvertacolortoHSV
Parameters color--color
Returns thegivencolorinHSV
staticinlinelv_color_tlv_color_chroma_key(void)
JustawrapperaroundLV_COLOR_CHROMA_KEYbecauseitmightbemoreconvenienttouseafunctionin
somecases
Returns LV_COLOR_CHROMA_KEY
lv_color_tlv_palette_main(lv_palette_tp)
staticinlinelv_color_tlv_color_white(void)
staticinlinelv_color_tlv_color_black(void)
lv_color_tlv_palette_lighten(lv_palette_tp,uint8_tlvl)
lv_color_tlv_palette_darken(lv_palette_tp,uint8_tlvl)
unionlv_color1_t
PublicMembers
uint8_tfull
uint8_tblue
uint8_tgreen
uint8_tred
unionlv_color1_t::[anonymous]ch
unionlv_color8_t
PublicMembers
uint8_tblue
uint8_tgreen
uint8_tred
5.10. Colors 411


--- Page 416 ---


LVGLDocumentation8.3
structlv_color8_t::[anonymous]ch
uint8_tfull
unionlv_color16_t
PublicMembers
uint16_tblue
uint16_tgreen
uint16_tred
uint16_tgreen_h
uint16_tgreen_l
structlv_color16_t::[anonymous]ch
uint16_tfull
unionlv_color32_t
PublicMembers
uint8_tblue
uint8_tgreen
uint8_tred
uint8_talpha
structlv_color32_t::[anonymous]ch
uint32_tfull
structlv_color_hsv_t
5.10. Colors 412


--- Page 417 ---


LVGLDocumentation8.3
PublicMembers
uint16_th
uint8_ts
uint8_tv
struct_lv_color_filter_dsc_t
PublicMembers
lv_color_filter_cb_tfilter_cb
void*user_data
5.11 Fonts
InLVGLfontsarecollectionsofbitmapsandotherinformationrequiredtorenderimagesofindividualletters(glyph).
Afontisstoredinalv_font_tvariableandcanbesetinastyle'stext_fontfield. Forexample:
lv_style_set_text_font(&my_style, &lv_font_montserrat_28); /*Set a larger font*/
Fonts have a bpp (bits per pixel) property. It shows how many bits are used to describe a pixel in a font. The value
storedforapixeldeterminesthepixel'sopacity. Thisway,withhigherbpp,theedgesofthelettercanbesmoother. The
possiblebppvaluesare1,2,4and8(highervaluesmeanbetterquality).
Thebpppropertyalsoaffectstheamountofmemoryneededtostoreafont. Forexample,bpp=4makesafontnearly
fourtimeslargercomparedtobpp=1.
5.11.1 Unicode support
LVGLsupportsUTF-8encodedUnicodecharacters. Youreditorneedstobeconfiguredtosaveyourcode/textasUTF-8
(usuallythisthedefault)andbesurethat,LV_TXT_ENCissettoLV_TXT_ENC_UTF8inlv_conf.h. (Thisisthedefault
value)
Totestittry
lv_obj_t * label1 = lv_label_create(lv_scr_act(), NULL);
lv_label_set_text(label1, LV_SYMBOL_OK);
Ifallworkswell,a✓charactershouldbedisplayed.
5.11. Fonts 413


--- Page 418 ---


LVGLDocumentation8.3
5.11.2 Built-in fonts
Thereareseveralbuilt-infontsindifferentsizes,whichcanbeenabledinlv_conf.hwithLV_FONT_... defines.
Normalfonts
ContainingalltheASCIIcharacters,thedegreesymbol(U+00B0),thebulletsymbol(U+2022)andthebuilt-insymbols
(seebelow).
• LV_FONT_MONTSERRAT_1212pxfont
• LV_FONT_MONTSERRAT_1414pxfont
• LV_FONT_MONTSERRAT_1616pxfont
• LV_FONT_MONTSERRAT_1818pxfont
• LV_FONT_MONTSERRAT_2020pxfont
• LV_FONT_MONTSERRAT_2222pxfont
• LV_FONT_MONTSERRAT_2424pxfont
• LV_FONT_MONTSERRAT_2626pxfont
• LV_FONT_MONTSERRAT_2828pxfont
• LV_FONT_MONTSERRAT_3030pxfont
• LV_FONT_MONTSERRAT_3232pxfont
• LV_FONT_MONTSERRAT_3434pxfont
• LV_FONT_MONTSERRAT_3636pxfont
• LV_FONT_MONTSERRAT_3838pxfont
• LV_FONT_MONTSERRAT_4040pxfont
• LV_FONT_MONTSERRAT_4242pxfont
• LV_FONT_MONTSERRAT_4444pxfont
• LV_FONT_MONTSERRAT_4646pxfont
• LV_FONT_MONTSERRAT_4848pxfont
Specialfonts
• LV_FONT_MONTSERRAT_12_SUBPXSameasnormal12pxfontbutwithsubpixelrendering
• LV_FONT_MONTSERRAT_28_COMPRESSEDSameasnormal28pxfontbutstoredasacompressedfontwith
3bpp
• LV_FONT_DEJAVU_16_PERSIAN_HEBREW16pxfontwithnormalrange+Hebrew,Arabic,Persianletters
andalltheirforms
• LV_FONT_SIMSUN_16_CJK16pxfontwithnormalrangeplus1000ofthemostcommonCJKradicals
• LV_FONT_UNSCII_88pxpixelperfectfontwithonlyASCIIcharacters
• LV_FONT_UNSCII_1616pxpixelperfectfontwithonlyASCIIcharacters
5.11. Fonts 414


--- Page 419 ---


LVGLDocumentation8.3
Thebuilt-infontsareglobalvariableswithnameslikelv_font_montserrat_16fora16pxheightfont. Touse
theminastyle,justaddapointertoafontvariablelikeshownabove.
Thebuilt-infontswithbpp=4containtheASCIIcharactersandusetheMontserratfont.
InadditiontotheASCIIrange,thefollowingsymbolsarealsoaddedtothebuilt-infontsfromtheFontAwesomefont.
Thesymbolscanbeusedsinglyas:
lv_label_set_text(my_label, LV_SYMBOL_OK);
Ortogetherwithstrings(compiletimestringconcatenation):
5.11. Fonts 415


--- Page 420 ---


LVGLDocumentation8.3
lv_label_set_text(my_label, LV_SYMBOL_OK "Apply");
Ormoresymbolstogether:
lv_label_set_text(my_label, LV_SYMBOL_OK LV_SYMBOL_WIFI LV_SYMBOL_PLAY);
5.11.3 Special features
Bidirectionalsupport
MostlanguagesuseaLeft-to-Right(LTRforshort)writingdirection,howeversomelanguages(suchasHebrew,Persian
orArabic)useRight-to-Left(RTLforshort)direction.
LVGLnotonlysupportsRTLtextsbutsupportsmixed(a.k.a. bidirectional,BiDi)textrenderingtoo. Someexamples:
BiDisupportisenabledbyLV_USE_BIDIinlv_conf.h
Alltextshaveabasedirection(LTRorRTL)whichdeterminessomerenderingrulesandthedefaultalignmentofthe
text(LeftorRight). However,inLVGL,thebasedirectionisnotonlyappliedtolabels. It'sageneralpropertywhichcan
besetforeveryobject. Ifnotsetthenitwillbeinheritedfromtheparent. Thismeansit'senoughtosetthebasedirection
ofascreenandeveryobjectwillinheritit.
ThedefaultbasedirectionforscreenscanbesetbyLV_BIDI_BASE_DIR_DEFinlv_conf.handotherobjectsinherit
thebasedirectionfromtheirparent.
To set an object's base direction use lv_obj_set_style_base_dir(obj, base_dir,selector). The
possiblebasedirectionsare:
• LV_BASE_DIR_LTR:LefttoRightbasedirection
• LV_BASE_DIR_RTL:RighttoLeftbasedirection
• LV_BASE_DIR_AUTO:Autodetectbasedirection
• LV_BASE_DIR_NEUTRAL
• LV_BASE_DIR_WEAK
ThislistsummarizestheeffectofRTLbasedirectiononobjects:
• Createobjectsbydefaultontheright
• lv_tabview: Displaystabsfromrighttoleft
• lv_checkbox: Showstheboxontheright
• lv_btnmatrix: Showsbuttonsfromrighttoleft
5.11. Fonts 416


--- Page 421 ---


LVGLDocumentation8.3
• lv_list: Showsiconsontheright
• lv_dropdown: Alignsoptionstotheright
• lv_bar: Showsprogressfromrighttoleft
• Thetextsinlv_table, lv_btnmatrix, lv_keyboard, lv_tabview, lv_dropdown, lv_roller
are"BiDiprocessed"tobedisplayedcorrectly
ArabicandPersiansupport
TherearesomespecialrulestodisplayArabicandPersiancharacters: theformofacharacterdependsonitspositionin
thetext. Adifferentformofthesameletterneedstobeusedwhenitisisolated,atstart,middleorendpositions. Besides
these,someconjunctionrulesshouldalsobetakenintoaccount.
LVGLsupportstheserulesifLV_USE_ARABIC_PERSIAN_CHARSisenabled.
However,therearesomelimitations:
• Onlydisplayingtextissupported(e.g. onlabels),textinputs(e.g. textarea)don'tsupportthisfeature.
• Statictext(i.e. const)isnotprocessed. E.g. textssetbylv_label_set_text()willbe"Arabicprocessed"
butlv_lable_set_text_static()won't.
• Textgetfunctions(e.g. lv_label_get_text())willreturntheprocessedtext.
Subpixelrendering
Subpixelrenderingallowsfortriplingthehorizontalresolutionbyrenderinganti-aliasededgesonRed,GreenandBlue
channelsinsteadofatpixellevelgranularity. Thistakesadvantageofthepositionofphysicalcolorchannelsofeachpixel,
resultinginhigherqualityletteranti-aliasing. Learnmorehere.
Forsubpixelrendering,thefontsneedtobegeneratedwithspecialsettings:
• IntheonlineconverterticktheSubpixelbox
• Inthecommandlinetooluse--lcdflag. Notethatthegeneratedfontneedsaboutthreetimesmorememory.
Subpixelrenderingworksonlyifthecolorchannelsofthepixelshaveahorizontallayout. ThatistheR,G,Bchannels
arenexttoeachotherandnotaboveeachother. Theorderofcolorchannelsalsoneedstomatchwiththelibrarysettings.
Bydefault,LVGLassumesRGBorder,howeverthiscanbeswappedbysettingLV_SUBPX_BGR 1inlv_conf.h.
Compressedfonts
Thebitmapsoffontscanbecompressedby
• tickingtheCompressedcheckboxintheonlineconverter
• notpassingthe--no-compressflagtotheofflineconverter(compressionisappliedbydefault)
Compressionismoreeffectivewithlargerfontsandhigherbpp. However,it'sabout30%slowertorendercompressed
fonts. Therefore,it'srecommendedtocompressonlythelargestfontsofauserinterface,because
• theyneedthemostmemory
• theycanbecompressedbetter
• andprobablytheyareusedlessfrequentlythenthemedium-sizedfonts,sotheperformancecostissmaller.
5.11. Fonts 417


--- Page 422 ---


LVGLDocumentation8.3
5.11.4 Add a new font
Thereareseveralwaystoaddanewfonttoyourproject:
1. ThesimplestmethodistousetheOnlinefontconverter. Justsettheparameters, clicktheConvert button, copy
thefonttoyourprojectanduseit. Besuretocarefullyreadthestepsprovidedonthatsiteoryouwillgetan
errorwhileconverting.
2. UsetheOfflinefontconverter. (RequiresNode.jstobeinstalled)
3. Ifyouwanttocreatesomethinglikethebuilt-infonts(Montserratfontandsymbols)butinadifferentsizeand/or
ranges, you can use the built_in_font_gen.py script in lvgl/scripts/built_in_font folder.
(ThisrequiresPythonandlv_font_convtobeinstalled)
Todeclareafontinafile,useLV_FONT_DECLARE(my_font_name).
Tomakefontsgloballyavailable(likethebuilt-infonts),addthemtoLV_FONT_CUSTOM_DECLAREinlv_conf.h.
5.11.5 Add new symbols
Thebuilt-insymbolsarecreatedfromtheFontAwesomefont.
1. Searchforasymbolonhttps://fontawesome.com. ForexampletheUSBsymbol. CopyitsUnicodeIDwhichis
0xf287inthiscase.
2. OpentheOnlinefontconverter. AddFontAwesome.woff. .
3. SettheparameterssuchasName,Size,BPP.You'llusethisnametodeclareandusethefontinyourcode.
4. AddtheUnicodeIDofthesymboltotherangefield. E.g. 0xf287fortheUSBsymbol. Moresymbolscanbe
enumeratedwith,.
5. Convertthefontandcopythegeneratedsourcecodetoyourproject. Makesuretocompilethe.cfileofyourfont.
6. Declare the font using extern lv_font_t my_font_name; or simply use
LV_FONT_DECLARE(my_font_name);.
Usingthesymbol
1. ConverttheUnicodevaluetoUTF8,forexampleonthissite. For0xf287theHexUTF-8bytesareEF 8A 87.
2. CreateadefinestringfromtheUTF8values: #define MY_USB_SYMBOL "\xEF\x8A\x87"
3. Createalabelandsetthetext. Eg. lv_label_set_text(label, MY_USB_SYMBOL)
Note-lv_label_set_text(label, MY_USB_SYMBOL)searchesforthissymbolinthefontdefinedinstyle.
text.fontproperties. Tousethesymbolyoumayneedtochangeit. Eg style.text.font = my_font_name
5.11.6 Load a font at run-time
lv_font_loadcanbeusedtoloadafontfromafile. Thefontneedstohaveaspecialbinaryformat. (NotTTFor
WOFF).Uselv_font_convwiththe--format binoptiontogenerateanLVGLcompatiblefontfile.
NotethattoloadafontLVGL'sfilesystemneedstobeenabledandadrivermustbeadded.
Example
lv_font_t * my_font;
my_font = lv_font_load(X/path/to/my_font.bin);
/*Use the font*/
(continuesonnextpage)
5.11. Fonts 418


--- Page 423 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Free the font if not required anymore*/
lv_font_free(my_font);
5.11.7 Add a new font engine
LVGL'sfontinterfaceisdesignedtobeveryflexiblebut,evenso,youcanaddyourownfontengineinplaceofLVGL's
internalone. Forexample,youcanuseFreeTypetoreal-timerenderglyphsfromTTFfontsoruseanexternalflashto
storethefont'sbitmapandreadthemwhenthelibraryneedsthem.
AreadytouseFreeTypecanbefoundinlv_freetyperepository.
Todothis,acustomlv_font_tvariableneedstobecreated:
/*Describe the properties of a font*/
lv_font_t my_font;
my_font.get_glyph_dsc = my_get_glyph_dsc_cb; /*Set a callback to get info␣
,→about glyphs*/
my_font.get_glyph_bitmap = my_get_glyph_bitmap_cb; /*Set a callback to get bitmap of␣
,→a glyph*/
my_font.line_height = height; /*The real line height where any␣
,→text fits*/
my_font.base_line = base_line; /*Base line measured from the top␣
,→of line_height*/
my_font.dsc = something_required; /*Store any implementation␣
,→specific data here*/
my_font.user_data = user_data; /*Optionally some extra user␣
,→data*/
...
/* Get info about glyph of `unicode_letter` in `font` font.
* Store the result in `dsc_out`.
* The next letter (`unicode_letter_next`) might be used to calculate the width␣
,→required by this glyph (kerning)
*/
bool my_get_glyph_dsc_cb(const lv_font_t * font, lv_font_glyph_dsc_t * dsc_out,␣
,→uint32_t unicode_letter, uint32_t unicode_letter_next)
{
/*Your code here*/
/* Store the result.
* For example ...
*/
dsc_out->adv_w = 12; /*Horizontal space required by the glyph in [px]*/
dsc_out->box_h = 8; /*Height of the bitmap in [px]*/
dsc_out->box_w = 6; /*Width of the bitmap in [px]*/
dsc_out->ofs_x = 0; /*X offset of the bitmap in [pf]*/
dsc_out->ofs_y = 3; /*Y offset of the bitmap measured from the as line*/
dsc_out->bpp = 2; /*Bits per pixel: 1/2/4/8*/
return true; /*true: glyph found; false: glyph was not found*/
}
(continuesonnextpage)
5.11. Fonts 419


--- Page 424 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/* Get the bitmap of `unicode_letter` from `font`. */
const uint8_t * my_get_glyph_bitmap_cb(const lv_font_t * font, uint32_t unicode_
,→letter)
{
/* Your code here */
/* The bitmap should be a continuous bitstream where
* each pixel is represented by `bpp` bits */
return bitmap; /*Or NULL if not found*/
}
5.11.8 Use font fallback
Youcanspecifyfallbackinlv_font_ttoprovidefallbacktothefont. Whenthefontfailstofindglyphtoaletter,
itwilltrytoletfontfromfallbacktohandle.
fallbackcanbechained,soitwilltrytosolveuntilthereisnofallbackset.
/* Roboto font doesn't have support for CJK glyphs */
lv_font_t *roboto = my_font_load_function();
/* Droid Sans Fallback has more glyphs but its typeface doesn't look good as Roboto */
lv_font_t *droid_sans_fallback = my_font_load_function();
/* So now we can display Roboto for supported characters while having wider␣
,→characters set support */
roboto->fallback = droid_sans_fallback;
5.12 Images
Animagecanbeafileoravariablewhichstoresthebitmapitselfandsomemetadata.
5.12.1 Store images
Youcanstoreimagesintwoplaces
• asavariableininternalmemory(RAMorROM)
• asafile
Variables
Imagesstoredinternallyinavariablearecomposedmainlyofanlv_img_dsc_tstructurewiththefollowingfields:
• header
– cf Colorformat. Seebelow
– wwidthinpixels(<=2048)
– hheightinpixels(<=2048)
– alwayszero3bitswhichneedtobealwayszero
5.12. Images 420


--- Page 425 ---


LVGLDocumentation8.3
– reservedreservedforfutureuse
• datapointertoanarraywheretheimageitselfisstored
• data_sizelengthofdatainbytes
TheseareusuallystoredwithinaprojectasCfiles. Theyarelinkedintotheresultingexecutablelikeanyotherconstant
data.
Files
TodealwithfilesyouneedtoaddastorageDrivetoLVGL.Inshort,aDriveisacollectionoffunctions(open,read,close,
etc.) registeredinLVGLtomakefileoperations. Youcanaddaninterfacetoastandardfilesystem(FAT32onSDcard)
oryoucreateyoursimplefilesystemtoreaddatafromanSPIFlashmemory. Ineverycase,aDriveisjustanabstraction
toreadand/orwritedatatomemory. SeetheFilesystemsectiontolearnmore.
Imagesstoredasfilesarenotlinkedintotheresultingexecutable,andmustbereadintoRAMbeforebeingdrawn. As
aresult,theyarenotasresource-friendlyasimageslinkedatcompiletime. However,theyareeasiertoreplacewithout
needingtorebuildthemainprogram.
5.12.2 Color formats
Variousbuilt-incolorformatsaresupported:
• LV_IMG_CF_TRUE_COLORSimplystorestheRGBcolors(inwhatevercolordepthLVGLisconfiguredfor).
• LV_IMG_CF_TRUE_COLOR_ALPHA Like LV_IMG_CF_TRUE_COLOR butit also addsan alpha (trans-
parency)byteforeverypixel.
• LV_IMG_CF_TRUE_COLOR_CHROMA_KEYEDLikeLV_IMG_CF_TRUE_COLORbutifapixelhasthe
LV_COLOR_TRANSPcolor(setinlv_conf.h)itwillbetransparent.
• LV_IMG_CF_INDEXED_1/2/4/8BITUsesapalettewith2,4,16or256colorsandstoreseachpixelin1,2,4
or8bits.
• LV_IMG_CF_ALPHA_1/2/4/8BIT Only stores the Alpha value with 1, 2, 4 or 8 bits. The pixels take the
colorofstyle.img_recolorandthesetopacity. Thesourceimagehastobeanalphachannel. Thisisideal
forbitmapssimilartofontswherethewholeimageisonecolorthatcanbealtered.
ThebytesofLV_IMG_CF_TRUE_COLORimagesarestoredinthefollowingorder.
For32-bitcolordepth:
• Byte0: Blue
• Byte1: Green
• Byte2: Red
• Byte3: Alpha
For16-bitcolordepth:
• Byte0: Green3lowerbit,Blue5bit
• Byte1: Red5bit,Green3higherbit
• Byte2: Alphabyte(onlywithLV_IMG_CF_TRUE_COLOR_ALPHA)
For8-bitcolordepth:
• Byte0: Red3bit,Green3bit,Blue2bit
5.12. Images 421


--- Page 426 ---


LVGLDocumentation8.3
• Byte2: Alphabyte(onlywithLV_IMG_CF_TRUE_COLOR_ALPHA)
You can store images in a Raw format to indicate that it's not encoded with one of the built-in color formats and an
externalImagedecoderneedstobeusedtodecodetheimage.
• LV_IMG_CF_RAWIndicatesabasicrawimage(e.g. aPNGorJPGimage).
• LV_IMG_CF_RAW_ALPHAIndicatesthatanimagehasalphaandanalphabyteisaddedforeverypixel.
• LV_IMG_CF_RAW_CHROMA_KEYED Indicates that an image is chroma-keyed as described in
LV_IMG_CF_TRUE_COLOR_CHROMA_KEYEDabove.
5.12.3 Add and use images
YoucanaddimagestoLVGLintwoways:
• usingtheonlineconverter
• manuallycreateimages
Onlineconverter
TheonlineImageconverterisavailablehere: https://lvgl.io/tools/imageconverter
AddinganimagetoLVGLviatheonlineconverteriseasy.
1. YouneedtoselectaBMP,PNGorJPGimagefirst.
2. GivetheimageanamethatwillbeusedwithinLVGL.
3. SelecttheColorformat.
4. Selectthetypeofimageyouwant. Choosingabinarywillgeneratea.binfilethatmustbestoredseparatelyand
readusingthefilesupport. ChoosingavariablewillgenerateastandardCfilethatcanbelinkedintoyourproject.
5. Hit the Convert button. Once the conversion is finished, your browser will automatically download the resulting
file.
InthegeneratedCarrays(variables),bitmapsforallthecolordepths(1,8,16or32)areincludedintheCfile,butonly
thecolordepththatmatchesLV_COLOR_DEPTHinlv_conf.hwillactuallybelinkedintotheresultingexecutable.
Inthecaseofbinaryfiles,youneedtospecifythecolorformatyouwant:
• RGB332for8-bitcolordepth
• RGB565for16-bitcolordepth
• RGB565Swapfor16-bitcolordepth(twobytesareswapped)
• RGB888for32-bitcolordepth
5.12. Images 422


--- Page 427 ---


LVGLDocumentation8.3
Manuallycreateanimage
Ifyouaregeneratinganimageatrun-time,youcancraftanimagevariabletodisplayitusingLVGL.Forexample:
uint8_t my_img_data[] = {0x00, 0x01, 0x02, ...};
static lv_img_dsc_t my_img_dsc = {
.header.always_zero = 0,
.header.w = 80,
.header.h = 60,
.data_size = 80 * 60 * LV_COLOR_DEPTH / 8,
.header.cf = LV_IMG_CF_TRUE_COLOR, /*Set the color format*/
.data = my_img_data,
};
If the color format is LV_IMG_CF_TRUE_COLOR_ALPHA you can set data_size like 80 * 60 *
LV_IMG_PX_SIZE_ALPHA_BYTE.
Another(possiblysimpler)optiontocreateanddisplayanimageatrun-timeistousetheCanvasobject.
Useimages
ThesimplestwaytouseanimageinLVGListodisplayitwithanlv_imgobject:
lv_obj_t * icon = lv_img_create(lv_scr_act(), NULL);
/*From variable*/
lv_img_set_src(icon, &my_icon_dsc);
/*From file*/
lv_img_set_src(icon, "S:my_icon.bin");
Iftheimagewasconvertedwiththeonlineconverter,youshoulduseLV_IMG_DECLARE(my_icon_dsc)todeclare
theimageinthefilewhereyouwanttouseit.
5.12.4 Image decoder
AsyoucanseeintheColorformatssection,LVGLsupportsseveralbuilt-inimageformats. Inmanycases,thesewillbe
allyouneed. LVGLdoesn'tdirectlysupport,however,genericimageformatslikePNGorJPG.
Tohandlenon-built-inimageformats,youneedtouseexternallibrariesandattachthemtoLVGLviatheImagedecoder
interface.
Animagedecoderconsistsof4callbacks:
• infogetsomebasicinfoabouttheimage(width,heightandcolorformat).
• openopenanimage: eitherstoreadecodedimageorsetittoNULLtoindicatetheimagecanbereadline-by-line.
• read if open didn't fully open an image this function should give some decoded data (max 1 line) from a given
position.
• closecloseanopenedimage,freetheallocatedresources.
Youcan add anynumber of imagedecoders. When an image needs to be drawn, the librarywill try allthe registered
imagedecodersuntilitfindsonewhichcanopentheimage,i.e. onewhichknowsthatformat.
TheLV_IMG_CF_TRUE_COLOR_...,LV_IMG_INDEXED_...andLV_IMG_ALPHA_...formats(essentially,
allnon-RAWformats)areunderstoodbythebuilt-indecoder.
5.12. Images 423


--- Page 428 ---


LVGLDocumentation8.3
Customimageformats
TheeasiestwaytocreateacustomimageistousetheonlineimageconverterandselectRaw,Raw with alphaor
Raw with chroma-keyed format. It will just take every byte of the binary file you uploaded and write it as an
image"bitmap". Youthenneedtoattachanimagedecoderthatwillparsethatbitmapandgeneratethereal,renderable
bitmap.
header.cfwillbeLV_IMG_CF_RAW,LV_IMG_CF_RAW_ALPHAorLV_IMG_CF_RAW_CHROMA_KEYEDac-
cordingly. Youshouldchoosethecorrectformataccordingtoyourneeds: afullyopaqueimage,usinganalphachannel
orusingachromakey.
Afterdecoding,therawformatsareconsideredTruecolorbythelibrary. Inotherwords,theimagedecodermustdecode
theRawimagestoTruecoloraccordingtotheformatdescribedintheColorformatssection.
Ifyouwanttocreateacustomimage,youshoulduseLV_IMG_CF_USER_ENCODED_0..7colorformats. However,
the library can draw images only in True color format (or Raw but ultimately it will be in True color format). The
LV_IMG_CF_USER_ENCODED_... formats are not known by the library and therefore they should be decoded to
oneoftheknownformatsfromtheColorformatssection. It'spossibletodecodeanimagetoanon-truecolorformatfirst
(forexample: LV_IMG_INDEXED_4BITS)andthencallthebuilt-indecoderfunctionstoconvertittoTruecolor.
WithUserencoded formats,thecolorformatintheopenfunction(dsc->header.cf)shouldbechangedaccording
tothenewformat.
Registeranimagedecoder
Here'sanexampleofgettingLVGLtoworkwithPNGimages.
First,youneedtocreateanewimagedecoderandsetsomefunctionstoopen/closethePNGfiles. Itshouldlooklikethis:
/*Create a new decoder and register functions */
lv_img_decoder_t * dec = lv_img_decoder_create();
lv_img_decoder_set_info_cb(dec, decoder_info);
lv_img_decoder_set_open_cb(dec, decoder_open);
lv_img_decoder_set_close_cb(dec, decoder_close);
/**
* Get info about a PNG image
* @param decoder pointer to the decoder where this function belongs
* @param src can be file name or pointer to a C array
* @param header store the info here
* @return LV_RES_OK: no error; LV_RES_INV: can't get the info
*/
static lv_res_t decoder_info(lv_img_decoder_t * decoder, const void * src, lv_img_
,→header_t * header)
{
/*Check whether the type `src` is known by the decoder*/
if(is_png(src) == false) return LV_RES_INV;
/* Read the PNG header and find `width` and `height` */
...
header->cf = LV_IMG_CF_RAW_ALPHA;
header->w = width;
header->h = height;
}
(continuesonnextpage)
5.12. Images 424


--- Page 429 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/**
* Open a PNG image and return the decided image
* @param decoder pointer to the decoder where this function belongs
* @param dsc pointer to a descriptor which describes this decoding session
* @return LV_RES_OK: no error; LV_RES_INV: can't get the info
*/
static lv_res_t decoder_open(lv_img_decoder_t * decoder, lv_img_decoder_dsc_t * dsc)
{
/*Check whether the type `src` is known by the decoder*/
if(is_png(src) == false) return LV_RES_INV;
/*Decode and store the image. If `dsc->img_data` is `NULL`, the `read_line`␣
,→function will be called to get the image data line-by-line*/
dsc->img_data = my_png_decoder(src);
/*Change the color format if required. For PNG usually 'Raw' is fine*/
dsc->header.cf = LV_IMG_CF_...
/*Call a built in decoder function if required. It's not required if`my_png_
,→decoder` opened the image in true color format.*/
lv_res_t res = lv_img_decoder_built_in_open(decoder, dsc);
return res;
}
/**
* Decode `len` pixels starting from the given `x`, `y` coordinates and store them in␣
,→`buf`.
* Required only if the "open" function can't open the whole decoded pixel array.␣
,→(dsc->img_data == NULL)
* @param decoder pointer to the decoder the function associated with
* @param dsc pointer to decoder descriptor
* @param x start x coordinate
* @param y start y coordinate
* @param len number of pixels to decode
* @param buf a buffer to store the decoded pixels
* @return LV_RES_OK: ok; LV_RES_INV: failed
*/
lv_res_t decoder_built_in_read_line(lv_img_decoder_t * decoder, lv_img_decoder_dsc_t␣
,→* dsc, lv_coord_t x,
lv_coord_t y, lv_coord_t len, uint8_
,→t * buf)
{
/*With PNG it's usually not required*/
/*Copy `len` pixels from `x` and `y` coordinates in True color format to `buf` */
}
/**
* Free the allocated resources
* @param decoder pointer to the decoder where this function belongs
* @param dsc pointer to a descriptor which describes this decoding session
*/
static void decoder_close(lv_img_decoder_t * decoder, lv_img_decoder_dsc_t * dsc)
{
(continuesonnextpage)
5.12. Images 425


--- Page 430 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Free all allocated data*/
/*Call the built-in close function if the built-in open/read_line was used*/
lv_img_decoder_built_in_close(decoder, dsc);
}
Soinsummary:
• Indecoder_info,youshouldcollectsomebasicinformationabouttheimageandstoreitinheader.
• In decoder_open, you should try to open the image source pointed by dsc->src. Its type is already in
dsc->src_type == LV_IMG_SRC_FILE/VARIABLE.Ifthisformat/typeisnotsupportedbythedecoder,
returnLV_RES_INV.However,ifyoucanopentheimage,apointertothedecodedTruecolorimageshouldbe
setindsc->img_data. Iftheformatisknown,butyoudon'twanttodecodetheentireimage(e.g. nomemory
forit),setdsc->img_data = NULLanduseread_linetogetthepixeldata.
• Indecoder_closeyoushouldfreeallallocatedresources.
• decoder_readisoptional. Decodingthewholeimagerequiresextramemoryandsomecomputationalover-
head. However,itcandecodeonelineoftheimagewithoutdecodingthewholeimage,youcansavememoryand
time. Toindicatethatthelinereadfunctionshouldbeused,setdsc->img_data = NULLintheopenfunction.
Manuallyuseanimagedecoder
LVGLwilluseregisteredimagedecodersautomaticallyifyoutryanddrawarawimage(i.e. usingthelv_imgobject)
butyoucanusethemmanuallytoo. Createanlv_img_decoder_dsc_tvariabletodescribethedecodingsession
andcalllv_img_decoder_open().
The color parameter is used only with LV_IMG_CF_ALPHA_1/2/4/8BIT images to tell color of the image.
frame_idcanbeusediftheimagetoopenisananimation.
lv_res_t res;
lv_img_decoder_dsc_t dsc;
res = lv_img_decoder_open(&dsc, &my_img_dsc, color, frame_id);
if(res == LV_RES_OK) {
/*Do something with `dsc->img_data`*/
lv_img_decoder_close(&dsc);
}
5.12.5 Image caching
Sometimesittakesalotoftimetoopenanimage. ContinuouslydecodingaPNGimageorloadingimagesfromaslow
externalmemorywouldbeinefficientanddetrimentaltotheuserexperience.
Therefore, LVGL caches a given number of images. Caching means some images will be left open, hence LVGL can
quicklyaccessthemfromdsc->img_datainsteadofneedingtodecodethemagain.
Ofcourse,cachingimagesisresourceintensiveasitusesmoreRAMtostorethedecodedimage. LVGLtriestooptimize
theprocessasmuchaspossible(seebelow),butyouwillstillneedtoevaluateifthiswouldbebeneficialforyourplatform
or not. Image caching may not be worth it if you have a deeply embedded target which decodes small images from a
relativelyfaststoragemedium.
5.12. Images 426


--- Page 431 ---


LVGLDocumentation8.3
Cachesize
ThenumberofcacheentriescanbedefinedwithLV_IMG_CACHE_DEF_SIZEinlv_conf.h. Thedefaultvalueis1so
onlythemostrecentlyusedimagewillbeleftopen.
Thesizeofthecachecanbechangedatrun-timewithlv_img_cache_set_size(entry_num).
Valueofimages
Whenyouusemoreimagesthancacheentries,LVGLcan'tcachealltheimages. Instead,thelibrarywillcloseoneofthe
cachedimagestofreespace.
Todecidewhichimagetoclose,LVGLusesameasurementitpreviouslymadeofhowlongittooktoopentheimage.
Cacheentriesthatholdslower-to-openimagesareconsideredmorevaluableandarekeptinthecacheaslongaspossible.
IfyouwantorneedtooverrideLVGL'smeasurement,youcanmanuallysetthetimetoopenvalueinthedecoderopen
functionindsc->time_to_open = time_mstogiveahigherorlowervalue. (LeaveitunchangedtoletLVGL
controlit.)
Every cache entry has a "life" value. Every time an image is opened through the cache, the life value of all entries is
decreasedtomakethemolder. Whenacachedimageisused,itslifevalueisincreasedbythetimetoopenvaluetomake
itmorealive.
Ifthereisnomorespaceinthecache,theentrywiththelowestlifevaluewillbeclosed.
Memoryusage
Notethatacachedimagemightcontinuouslyconsumememory. Forexample,ifthreePNGimagesarecached,theywill
consumememorywhiletheyareopen.
Therefore,it'stheuser'sresponsibilitytobesurethereisenoughRAMtocacheeventhelargestimagesatthesametime.
Cleanthecache
Let'ssayyouhaveloadedaPNGimageintoalv_img_dsc_t my_pngvariableanduseitinanlv_imgobject. If
theimageisalreadycachedandyouthenchangetheunderlyingPNGfile,youneedtonotifyLVGLtocachetheimage
again. Otherwise, there is no easy way of detecting that the underlying file changed and LVGL will still draw the old
imagefromcache.
To do this, use lv_img_cache_invalidate_src(&my_png). If NULL is passed as a parameter, the whole
cachewillbecleaned.
5.12.6 API
Imagebuffer
Typedefs
typedefuint8_tlv_img_cf_t
5.12. Images 427


--- Page 432 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Values:
enumeratorLV_IMG_CF_UNKNOWN
enumeratorLV_IMG_CF_RAW
Containsthefileasitis. Needscustomdecoderfunction
enumeratorLV_IMG_CF_RAW_ALPHA
Containsthefileasitis. Theimagehasalpha. Needscustomdecoderfunction
enumeratorLV_IMG_CF_RAW_CHROMA_KEYED
Containsthefileasitis. Theimageischromakeyed. Needscustomdecoderfunction
enumeratorLV_IMG_CF_TRUE_COLOR
ColorformatanddepthshouldmatchwithLV_COLORsettings
enumeratorLV_IMG_CF_TRUE_COLOR_ALPHA
SameasLV_IMG_CF_TRUE_COLORbuteverypixelhasanalphabyte
enumeratorLV_IMG_CF_TRUE_COLOR_CHROMA_KEYED
SameasLV_IMG_CF_TRUE_COLORbutLV_COLOR_TRANSPpixelswillbetransparent
enumeratorLV_IMG_CF_INDEXED_1BIT
Canhave2differentcolorsinapalette(can'tbechromakeyed)
enumeratorLV_IMG_CF_INDEXED_2BIT
Canhave4differentcolorsinapalette(can'tbechromakeyed)
enumeratorLV_IMG_CF_INDEXED_4BIT
Canhave16differentcolorsinapalette(can'tbechromakeyed)
enumeratorLV_IMG_CF_INDEXED_8BIT
Canhave256differentcolorsinapalette(can'tbechromakeyed)
enumeratorLV_IMG_CF_ALPHA_1BIT
Canhaveonecoloranditcanbedrawnornot
enumeratorLV_IMG_CF_ALPHA_2BIT
Canhaveonecolorbut4differentalphavalue
enumeratorLV_IMG_CF_ALPHA_4BIT
Canhaveonecolorbut16differentalphavalue
5.12. Images 428


--- Page 433 ---


LVGLDocumentation8.3
enumeratorLV_IMG_CF_ALPHA_8BIT
Canhaveonecolorbut256differentalphavalue
enumeratorLV_IMG_CF_RGB888
enumeratorLV_IMG_CF_RGBA8888
enumeratorLV_IMG_CF_RGBX8888
enumeratorLV_IMG_CF_RGB565
enumeratorLV_IMG_CF_RGBA5658
enumeratorLV_IMG_CF_RGB565A8
enumeratorLV_IMG_CF_RESERVED_15
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_16
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_17
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_18
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_19
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_20
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_21
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_22
Reservedforfurtheruse.
enumeratorLV_IMG_CF_RESERVED_23
Reservedforfurtheruse.
enumeratorLV_IMG_CF_USER_ENCODED_0
Userholderencodingformat.
5.12. Images 429


--- Page 434 ---


LVGLDocumentation8.3
enumeratorLV_IMG_CF_USER_ENCODED_1
Userholderencodingformat.
enumeratorLV_IMG_CF_USER_ENCODED_2
Userholderencodingformat.
enumeratorLV_IMG_CF_USER_ENCODED_3
Userholderencodingformat.
enumeratorLV_IMG_CF_USER_ENCODED_4
Userholderencodingformat.
enumeratorLV_IMG_CF_USER_ENCODED_5
Userholderencodingformat.
enumeratorLV_IMG_CF_USER_ENCODED_6
Userholderencodingformat.
enumeratorLV_IMG_CF_USER_ENCODED_7
Userholderencodingformat.
Functions
lv_img_dsc_t*lv_img_buf_alloc(lv_coord_tw,lv_coord_th,lv_img_cf_tcf)
AllocateanimagebufferinRAM
Parameters
• w--widthofimage
• h--heightofimage
• cf--acolorformat(LV_IMG_CF_...)
Returns anallocatedimage,orNULLonfailure
lv_color_tlv_img_buf_get_px_color(constlv_img_dsc_t*dsc,lv_coord_tx,lv_coord_ty,lv_color_tcolor)
Getthecolorofanimage'spixel
Parameters
• dsc--animagedescriptor
• x--xcoordinateofthepointtoget
• y--xcoordinateofthepointtoget
• color--thecoloroftheimage. IncaseofLV_IMG_CF_ALPHA_1/2/4/8thiscoloris
used. Notusedinothercases.
• safe--true: checkoutofbounds
Returns colorofthepoint
5.12. Images 430


--- Page 435 ---


LVGLDocumentation8.3
lv_opa_tlv_img_buf_get_px_alpha(constlv_img_dsc_t*dsc,lv_coord_tx,lv_coord_ty)
Getthealphavalueofanimage'spixel
Parameters
• dsc--pointertoanimagedescriptor
• x--xcoordinateofthepointtoset
• y--xcoordinateofthepointtoset
• safe--true: checkoutofbounds
Returns alphavalueofthepoint
voidlv_img_buf_set_px_color(constlv_img_dsc_t*dsc,lv_coord_tx,lv_coord_ty,lv_color_tc)
Setthecolorofapixelofanimage. Thealphachannelwon'tbeaffected.
Parameters
• dsc--pointertoanimagedescriptor
• x--xcoordinateofthepointtoset
• y--xcoordinateofthepointtoset
• c--colorofthepoint
• safe--true: checkoutofbounds
voidlv_img_buf_set_px_alpha(constlv_img_dsc_t*dsc,lv_coord_tx,lv_coord_ty,lv_opa_topa)
Setthealphavalueofapixelofanimage. Thecolorwon'tbeaffected
Parameters
• dsc--pointertoanimagedescriptor
• x--xcoordinateofthepointtoset
• y--xcoordinateofthepointtoset
• opa--thedesiredopacity
• safe--true: checkoutofbounds
voidlv_img_buf_set_palette(constlv_img_dsc_t*dsc,uint8_tid,lv_color_tc)
Setthepalettecolorofanindexedimage. ValidonlyforLV_IMG_CF_INDEXED1/2/4/8
Parameters
• dsc--pointertoanimagedescriptor
• id--thepalettecolortoset:
– forLV_IMG_CF_INDEXED1: 0..1
– forLV_IMG_CF_INDEXED2: 0..3
– forLV_IMG_CF_INDEXED4: 0..15
– forLV_IMG_CF_INDEXED8: 0..255
• c--thecolortoset
voidlv_img_buf_free(lv_img_dsc_t*dsc)
Freeanallocatedimagebuffer
Parameters dsc--imagebuffertofree
5.12. Images 431


--- Page 436 ---


LVGLDocumentation8.3
uint32_tlv_img_buf_get_img_size(lv_coord_tw,lv_coord_th,lv_img_cf_tcf)
Getthememoryconsumptionofarawbitmap,givencolorformatanddimensions.
Parameters
• w--width
• h--height
• cf--colorformat
Returns sizeinbytes
void_lv_img_buf_get_transformed_area(lv_area_t*res,lv_coord_tw,lv_coord_th,int16_tangle,
uint16_tzoom,constlv_point_t*pivot)
Gettheareaofarectangleifitsrotatedandscaled
Parameters
• res--storethecoordinateshere
• w--widthoftherectangletotransform
• h--heightoftherectangletotransform
• angle--angleofrotation
• zoom--zoom,(256nozoom)
• pivot--x,ypivotcoordinatesofrotation
structlv_img_header_t
#include<lv_img_buf.h>Thefirst8bitisveryimportanttodistinguishthedifferentsourcetypes. Formoreinfo
seelv_img_get_src_type()inlv_img.cOnbigendiansystemstheorderisreversedsocfandalways_zero
mustbeattheendofthestruct.
PublicMembers
uint32_th
uint32_tw
uint32_treserved
uint32_talways_zero
uint32_tcf
structlv_img_dsc_t
#include<lv_img_buf.h>Imageheaderitiscompatiblewiththeresultfromimageconverterutility
5.12. Images 432


--- Page 437 ---


LVGLDocumentation8.3
PublicMembers
lv_img_header_theader
Aheaderdescribingthebasicsoftheimage
uint32_tdata_size
Sizeoftheimageinbytes
constuint8_t*data
Pointertothedataoftheimage
5.13 File system
LVGLhasa'Filesystem'abstractionmodulethatenablesyoutoattachanytypeoffilesystem. Afilesystemisidentified
by an assigned drive letter. For example, if an SD card is associated with the letter 'S', a file can be reached using
"S:path/to/file.txt".
5.13.1 Ready to use drivers
Thelv_fs_ifrepositorycontainsprepareddriversusingPOSIX,standardCandtheFATFSAPI.SeeitsREADMEfor
thedetails.
5.13.2 Adding a driver
Registeringadriver
Toaddadriver,alv_fs_drv_tneedstobeinitializedlikebelow. Thelv_fs_drv_tneedstobestatic,globalor
dynamicallyallocatedandnotalocalvariable.
static lv_fs_drv_t drv; /*Needs to be static or global*/
lv_fs_drv_init(&drv); /*Basic initialization*/
drv.letter = 'S'; /*An uppercase letter to identify the drive␣
,→*/
drv.cache_size = my_cache_size; /*Cache size for reading in bytes. 0 to not␣
,→cache.*/
drv.ready_cb = my_ready_cb; /*Callback to tell if the drive is ready to␣
,→use */
drv.open_cb = my_open_cb; /*Callback to open a file */
drv.close_cb = my_close_cb; /*Callback to close a file */
drv.read_cb = my_read_cb; /*Callback to read a file */
drv.write_cb = my_write_cb; /*Callback to write a file */
drv.seek_cb = my_seek_cb; /*Callback to seek in a file (Move cursor)␣
,→*/
drv.tell_cb = my_tell_cb; /*Callback to tell the cursor position */
drv.dir_open_cb = my_dir_open_cb; /*Callback to open directory to read its␣
,→content */
(continuesonnextpage)
5.13. Filesystem 433


--- Page 438 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
drv.dir_read_cb = my_dir_read_cb; /*Callback to read a directory's content */
drv.dir_close_cb = my_dir_close_cb; /*Callback to close a directory */
drv.user_data = my_user_data; /*Any custom data if required*/
lv_fs_drv_register(&drv); /*Finally register the drive*/
AnyofthecallbackscanbeNULLtoindicatethatoperationisnotsupported.
Implementingthecallbacks
Opencallback
Theprototypeofopen_cblookslikethis:
void * (*open_cb)(lv_fs_drv_t * drv, const char * path, lv_fs_mode_t mode);
pathisthepathafterthedriveletter(e.g. "S:path/to/file.txt"->"path/to/file.txt"). modecanbeLV_FS_MODE_WRor
LV_FS_MODE_RDtoopenforwritesorreads.
Thereturnvalueisapointertoafileobject thatdescribestheopenedfileorNULLiftherewereanyissues(e.g. thefile
wasn'tfound). Thereturnedfileobjectwillbepassedtootherfilesystemrelatedcallbacks. (seebelow)
Othercallbacks
Theothercallbacksarequitesimilar. Forexamplewrite_cblookslikethis:
lv_fs_res_t (*write_cb)(lv_fs_drv_t * drv, void * file_p, const void * buf, uint32_t␣
,→btw, uint32_t * bw);
Forfile_p,LVGLpassesthereturnvalueofopen_cb,bufisthedatatowrite,btwistheBytesToWrite,bwis
theactuallywrittenbytes.
Foratemplateofthesecallbacksseelv_fs_template.c.
5.13.3 Usage example
Theexamplebelowshowshowtoreadfromafile:
lv_fs_file_t f;
lv_fs_res_t res;
res = lv_fs_open(&f, "S:folder/file.txt", LV_FS_MODE_RD);
if(res != LV_FS_RES_OK) my_error_handling();
uint32_t read_num;
uint8_t buf[8];
res = lv_fs_read(&f, buf, 8, &read_num);
if(res != LV_FS_RES_OK || read_num != 8) my_error_handling();
lv_fs_close(&f);
The mode in lv_fs_open can be LV_FS_MODE_WR to open for writes only or LV_FS_MODE_RD |
LV_FS_MODE_WRforboth
5.13. Filesystem 434


--- Page 439 ---


LVGLDocumentation8.3
Thisexampleshowshowtoreadadirectory'scontent. It'suptothedriverhowtomarkdirectoriesintheresultbutitcan
beagoodpracticetoinserta'/'infrontofeachdirectoryname.
lv_fs_dir_t dir;
lv_fs_res_t res;
res = lv_fs_dir_open(&dir, "S:/folder");
if(res != LV_FS_RES_OK) my_error_handling();
char fn[256];
while(1) {
res = lv_fs_dir_read(&dir, fn);
if(res != LV_FS_RES_OK) {
my_error_handling();
break;
}
/*fn is empty, if not more files to read*/
if(strlen(fn) == 0) {
break;
}
printf("%s\n", fn);
}
lv_fs_dir_close(&dir);
5.13.4 Use drives for images
Imageobjectscanbeopenedfromfilestoo(besidesvariablesstoredinthecompiledprogram).
Tousefilesinimagewidgetsthefollowingcallbacksarerequired:
• open
• close
• read
• seek
• tell
5.13.5 API
Typedefs
typedefuint8_tlv_fs_res_t
typedefuint8_tlv_fs_mode_t
typedefstruct_lv_fs_drv_tlv_fs_drv_t
5.13. Filesystem 435


--- Page 440 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Errorsinthefilesystemmodule.
Values:
enumeratorLV_FS_RES_OK
enumeratorLV_FS_RES_HW_ERR
enumeratorLV_FS_RES_FS_ERR
enumeratorLV_FS_RES_NOT_EX
enumeratorLV_FS_RES_FULL
enumeratorLV_FS_RES_LOCKED
enumeratorLV_FS_RES_DENIED
enumeratorLV_FS_RES_BUSY
enumeratorLV_FS_RES_TOUT
enumeratorLV_FS_RES_NOT_IMP
enumeratorLV_FS_RES_OUT_OF_MEM
enumeratorLV_FS_RES_INV_PARAM
enumeratorLV_FS_RES_UNKNOWN
enum[anonymous]
Fileopenmode.
Values:
enumeratorLV_FS_MODE_WR
enumeratorLV_FS_MODE_RD
enumlv_fs_whence_t
Seekmodes.
Values:
5.13. Filesystem 436


--- Page 441 ---


LVGLDocumentation8.3
enumeratorLV_FS_SEEK_SET
Setthepositionfromabsolutely(fromthestartoffile)
enumeratorLV_FS_SEEK_CUR
Setthepositionfromthecurrentposition
enumeratorLV_FS_SEEK_END
Setthepositionfromtheendofthefile
Functions
void_lv_fs_init(void)
InitializetheFilesysteminterface
voidlv_fs_drv_init(lv_fs_drv_t*drv)
Initializeafilesystemdriverwithdefaultvalues. Itisusedtosurlyhaveknownvaluesinthefieldsantnotmemory
junk. Afterityoucansetthefields.
Parameters drv--pointertodrivervariabletoinitialize
voidlv_fs_drv_register(lv_fs_drv_t*drv)
Addanewdrive
Parameters drv--pointertoanlv_fs_drv_tstructurewhichisinitedwiththecorrespondingfunction
pointers. Onlypointerissaved,sothedrivershouldbestaticordynamicallyallocated.
lv_fs_drv_t*lv_fs_get_drv(charletter)
Giveapointertoadriverfromitsletter
Parameters letter--thedriverletter
Returns pointertoadriverorNULLifnotfound
boollv_fs_is_ready(charletter)
Testifadriveisreadyornot. Ifthereadyfunctionwasnotinitializedtruewillbereturned.
Parameters letter--letterofthedrive
Returns true: driveisready;false: driveisnotready
lv_fs_res_tlv_fs_open(lv_fs_file_t*file_p,constchar*path,lv_fs_mode_tmode)
Openafile
Parameters
• file_p--pointertoalv_fs_file_tvariable
• path--pathtothefilebeginningwiththedriverletter(e.g. S:/folder/file.txt)
• mode -- read: FS_MODE_RD, write: FS_MODE_WR, both: FS_MODE_RD |
FS_MODE_WR
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
lv_fs_res_tlv_fs_close(lv_fs_file_t*file_p)
Closeanalreadyopenedfile
Parameters file_p--pointertoalv_fs_file_tvariable
5.13. Filesystem 437


--- Page 442 ---


LVGLDocumentation8.3
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
lv_fs_res_tlv_fs_read(lv_fs_file_t*file_p,void*buf,uint32_tbtr,uint32_t*br)
Readfromafile
Parameters
• file_p--pointertoalv_fs_file_tvariable
• buf--pointertoabufferwherethereadbytesarestored
• btr--BytesToRead
• br--thenumberofrealreadbytes(BytesRead). NULLifunused.
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
lv_fs_res_tlv_fs_write(lv_fs_file_t*file_p,constvoid*buf,uint32_tbtw,uint32_t*bw)
Writeintoafile
Parameters
• file_p--pointertoalv_fs_file_tvariable
• buf--pointertoabufferwiththebytestowrite
• btw--BytesToWrite
• bw--thenumberofrealwrittenbytes(BytesWritten). NULLifunused.
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
lv_fs_res_tlv_fs_seek(lv_fs_file_t*file_p,uint32_tpos,lv_fs_whence_twhence)
Setthepositionofthe'cursor'(readwritepointer)inafile
Parameters
• file_p--pointertoalv_fs_file_tvariable
• pos--thenewpositionexpressedinbytesindex(0: startoffile)
• whence--tellsfromwheresettheposition. See@lv_fs_whence_t
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
lv_fs_res_tlv_fs_tell(lv_fs_file_t*file_p,uint32_t*pos)
Givethepositionofthereadwritepointer
Parameters
• file_p--pointertoalv_fs_file_tvariable
• pos_p--pointertostorethepositionofthereadwritepointer
Returns LV_FS_RES_OKoranyerrorfrom'fs_res_t'
lv_fs_res_tlv_fs_dir_open(lv_fs_dir_t*rddir_p,constchar*path)
Initializea'fs_dir_t'variablefordirectoryreading
Parameters
• rddir_p--pointertoa'lv_fs_dir_t'variable
• path--pathtoadirectory
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
5.13. Filesystem 438


--- Page 443 ---


LVGLDocumentation8.3
lv_fs_res_tlv_fs_dir_read(lv_fs_dir_t*rddir_p,char*fn)
Readthenextfilenameformadirectory. Thenameofthedirectorieswillbeginwith'/'
Parameters
• rddir_p--pointertoaninitialized'fs_dir_t'variable
• fn--pointertoabuffertostorethefilename
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
lv_fs_res_tlv_fs_dir_close(lv_fs_dir_t*rddir_p)
Closethedirectoryreading
Parameters rddir_p--pointertoaninitialized'fs_dir_t'variable
Returns LV_FS_RES_OKoranyerrorfromlv_fs_res_tenum
char*lv_fs_get_letters(char*buf)
Fillabufferwiththelettersofexistingdrivers
Parameters buf--buffertostoretheletters('\0'addedafterthelastletter)
Returns thebuffer
constchar*lv_fs_get_ext(constchar*fn)
Returnwiththeextensionofthefilename
Parameters fn--stringwithafilename
Returns pointertothebeginningextensionoremptystringifnoextension
char*lv_fs_up(char*path)
Stepuponelevel
Parameters path--pointertoafilename
Returns thetruncatedfilename
constchar*lv_fs_get_last(constchar*path)
Getthelastelementofapath(e.g. U:/folder/file->file)
Parameters path--pointertoafilename
Returns pointertothebeginningofthelastelementinthepath
struct_lv_fs_drv_t
PublicMembers
charletter
uint16_tcache_size
bool(*ready_cb)(struct_lv_fs_drv_t*drv)
void*(*open_cb)(struct_lv_fs_drv_t*drv,constchar*path,lv_fs_mode_tmode)
5.13. Filesystem 439


--- Page 444 ---


LVGLDocumentation8.3
lv_fs_res_t(*close_cb)(struct_lv_fs_drv_t*drv,void*file_p)
lv_fs_res_t(*read_cb)(struct_lv_fs_drv_t*drv,void*file_p,void*buf,uint32_tbtr,uint32_t*br)
lv_fs_res_t(*write_cb)(struct_lv_fs_drv_t*drv,void*file_p,constvoid*buf,uint32_tbtw,uint32_t*bw)
lv_fs_res_t(*seek_cb)(struct_lv_fs_drv_t*drv,void*file_p,uint32_tpos,lv_fs_whence_twhence)
lv_fs_res_t(*tell_cb)(struct_lv_fs_drv_t*drv,void*file_p,uint32_t*pos_p)
void*(*dir_open_cb)(struct_lv_fs_drv_t*drv,constchar*path)
lv_fs_res_t(*dir_read_cb)(struct_lv_fs_drv_t*drv,void*rddir_p,char*fn)
lv_fs_res_t(*dir_close_cb)(struct_lv_fs_drv_t*drv,void*rddir_p)
void*user_data
Customfileuserdata
structlv_fs_file_cache_t
PublicMembers
uint32_tstart
uint32_tend
uint32_tfile_position
void*buffer
structlv_fs_file_t
PublicMembers
void*file_d
lv_fs_drv_t*drv
lv_fs_file_cache_t*cache
structlv_fs_dir_t
5.13. Filesystem 440


--- Page 445 ---


LVGLDocumentation8.3
PublicMembers
void*dir_d
lv_fs_drv_t*drv
5.14 Animations
Youcanautomaticallychangethevalueofavariablebetweenastartandanendvalueusinganimations. Animationwill
happenbyperiodicallycallingan"animator"functionwiththecorrespondingvalueparameter.
Theanimatorfunctionshavethefollowingprototype:
void func(void * var, lv_anim_var_t value);
This prototype is compatible with the majority of the property set functions in LVGL. For example
lv_obj_set_x(obj, value)orlv_obj_set_width(obj, value)
5.14.1 Create an animation
To create an animation an lv_anim_t variable has to be initialized and configured with lv_anim_set_...()
functions.
/* INITIALIZE AN ANIMATION
*-----------------------*/
lv_anim_t a;
lv_anim_init(&a);
/* MANDATORY SETTINGS
*------------------*/
/*Set the "animator" function*/
lv_anim_set_exec_cb(&a, (lv_anim_exec_xcb_t) lv_obj_set_x);
/*Set target of the animation*/
lv_anim_set_var(&a, obj);
/*Length of the animation [ms]*/
lv_anim_set_time(&a, duration);
/*Set start and end values. E.g. 0, 150*/
lv_anim_set_values(&a, start, end);
/* OPTIONAL SETTINGS
*------------------*/
/*Time to wait before starting the animation [ms]*/
lv_anim_set_delay(&a, delay);
/*Set path (curve). Default is linear*/
(continuesonnextpage)
5.14. Animations 441


--- Page 446 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_set_path(&a, lv_anim_path_ease_in);
/*Set a callback to indicate when the animation is ready (idle).*/
lv_anim_set_ready_cb(&a, ready_cb);
/*Set a callback to indicate when the animation is deleted (idle).*/
lv_anim_set_deleted_cb(&a, deleted_cb);
/*Set a callback to indicate when the animation is started (after delay).*/
lv_anim_set_start_cb(&a, start_cb);
/*When ready, play the animation backward with this duration. Default is 0 (disabled)␣
,→[ms]*/
lv_anim_set_playback_time(&a, time);
/*Delay before playback. Default is 0 (disabled) [ms]*/
lv_anim_set_playback_delay(&a, delay);
/*Number of repetitions. Default is 1. LV_ANIM_REPEAT_INFINITE for infinite␣
,→repetition*/
lv_anim_set_repeat_count(&a, cnt);
/*Delay before repeat. Default is 0 (disabled) [ms]*/
lv_anim_set_repeat_delay(&a, delay);
/*true (default): apply the start value immediately, false: apply start value after␣
,→delay when the anim. really starts. */
lv_anim_set_early_apply(&a, true/false);
/* START THE ANIMATION
*------------------*/
lv_anim_start(&a); /*Start the animation*/
Youcanapplymultipledifferentanimationsonthesamevariableatthesametime. Forexample, animatethexandy
coordinateswithlv_obj_set_xandlv_obj_set_y. However,onlyoneanimationcanexistwithagivenvariable
andfunctionpairandlv_anim_start()willremoveanyexistinganimationsforsuchapair.
5.14.2 Animation path
Youcancontrolthepathofananimation. Themostsimplecaseislinear,meaningthecurrentvaluebetweenstart and
endischangedwithfixedsteps. Apathisafunctionwhichcalculatesthenextvaluetosetbasedonthecurrentstateof
theanimation. Currently,therearethefollowingbuilt-inpathfunctions:
• lv_anim_path_linearlinearanimation
• lv_anim_path_stepchangeinonestepattheend
• lv_anim_path_ease_inslowatthebeginning
• lv_anim_path_ease_outslowattheend
• lv_anim_path_ease_in_outslowatthebeginningandend
• lv_anim_path_overshootovershoottheendvalue
• lv_anim_path_bouncebouncebackalittlefromtheendvalue(likehittingawall)
5.14. Animations 442


--- Page 447 ---


LVGLDocumentation8.3
5.14.3 Speed vs time
Bydefault,yousettheanimationtimedirectly. Butinsomecases,settingtheanimationspeedismorepractical.
Thelv_anim_speed_to_time(speed, start, end)functioncalculatestherequiredtimeinmilliseconds
to reach the end value from a start value with the given speed. The speed is interpreted in unit/sec dimension. For
example, lv_anim_speed_to_time(20,0,100) will yield 5000 milliseconds. For example, in the case of
lv_obj_set_xunitispixelsso20means20px/secspeed.
5.14.4 Delete animations
Youcandeleteananimationwithlv_anim_del(var, func)ifyouprovidetheanimatedvariableanditsanimator
function.
5.14.5 Timeline
Atimelineisacollectionofmultipleanimationswhichmakesiteasytocreatecomplexcompositeanimations.
Firstly,createananimationelementbutdon’tcalllv_anim_start().
Secondly,createananimationtimelineobjectbycallinglv_anim_timeline_create().
Thirdly, add animation elements to the animation timeline by calling lv_anim_timeline_add(at,
start_time, &a). start_time is the start time of the animation on the timeline. Note that start_time
willoverridethevalueofdelay.
Finally,calllv_anim_timeline_start(at)tostarttheanimationtimeline.
It supports forward and backward playback of the entire animation group, using
lv_anim_timeline_set_reverse(at, reverse).
Calllv_anim_timeline_stop(at)tostoptheanimationtimeline.
Calllv_anim_timeline_set_progress(at, progress)functiontosetthestateoftheobjectcorrespond-
ingtotheprogressofthetimeline.
Calllv_anim_timeline_get_playtime(at)functiontogetthetotaldurationoftheentireanimationtimeline.
Calllv_anim_timeline_get_reverse(at)functiontogetwhethertoreversetheanimationtimeline.
Calllv_anim_timeline_del(at)functiontodeletetheanimationtimeline.
5.14. Animations 443


--- Page 448 ---


LVGLDocumentation8.3
5.14.6 Examples
Startanimationonanevent
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void anim_x_cb(void * var, int32_t v)
{
lv_obj_set_x(var, v);
}
static void sw_event_cb(lv_event_t * e)
{
lv_obj_t * sw = lv_event_get_target(e);
lv_obj_t * label = lv_event_get_user_data(e);
if(lv_obj_has_state(sw, LV_STATE_CHECKED)) {
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, label);
lv_anim_set_values(&a, lv_obj_get_x(label), 100);
lv_anim_set_time(&a, 500);
lv_anim_set_exec_cb(&a, anim_x_cb);
lv_anim_set_path_cb(&a, lv_anim_path_overshoot);
lv_anim_start(&a);
(continuesonnextpage)
5.14. Animations 444


--- Page 449 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
else {
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, label);
lv_anim_set_values(&a, lv_obj_get_x(label), -lv_obj_get_width(label));
lv_anim_set_time(&a, 500);
lv_anim_set_exec_cb(&a, anim_x_cb);
lv_anim_set_path_cb(&a, lv_anim_path_ease_in);
lv_anim_start(&a);
}
}
/**
* Start animation on an event
*/
void lv_example_anim_1(void)
{
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Hello animations!");
lv_obj_set_pos(label, 100, 10);
lv_obj_t * sw = lv_switch_create(lv_scr_act());
lv_obj_center(sw);
lv_obj_add_state(sw, LV_STATE_CHECKED);
lv_obj_add_event_cb(sw, sw_event_cb, LV_EVENT_VALUE_CHANGED, label);
}
#endif
def anim_x_cb(label, v):
label.set_x(v)
def sw_event_cb(e,label):
sw = e.get_target()
if sw.has_state(lv.STATE.CHECKED):
a = lv.anim_t()
a.init()
a.set_var(label)
a.set_values(label.get_x(), 100)
a.set_time(500)
a.set_path_cb(lv.anim_t.path_overshoot)
a.set_custom_exec_cb(lambda a,val: anim_x_cb(label,val))
lv.anim_t.start(a)
else:
a = lv.anim_t()
a.init()
a.set_var(label)
a.set_values(label.get_x(), -label.get_width())
a.set_time(500)
a.set_path_cb(lv.anim_t.path_ease_in)
a.set_custom_exec_cb(lambda a,val: anim_x_cb(label,val))
lv.anim_t.start(a)
(continuesonnextpage)
5.14. Animations 445


--- Page 450 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#
# Start animation on an event
#
label = lv.label(lv.scr_act())
label.set_text("Hello animations!")
label.set_pos(100, 10)
sw = lv.switch(lv.scr_act())
sw.center()
sw.add_state(lv.STATE.CHECKED)
sw.add_event_cb(lambda e: sw_event_cb(e,label), lv.EVENT.VALUE_CHANGED, None)
Playbackanimation
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SWITCH
static void anim_x_cb(void * var, int32_t v)
{
lv_obj_set_x(var, v);
}
static void anim_size_cb(void * var, int32_t v)
{
lv_obj_set_size(var, v, v);
}
/**
* Create a playback animation
*/
void lv_example_anim_2(void)
{
lv_obj_t * obj = lv_obj_create(lv_scr_act());
lv_obj_set_style_bg_color(obj, lv_palette_main(LV_PALETTE_RED), 0);
lv_obj_set_style_radius(obj, LV_RADIUS_CIRCLE, 0);
lv_obj_align(obj, LV_ALIGN_LEFT_MID, 10, 0);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, obj);
lv_anim_set_values(&a, 10, 50);
lv_anim_set_time(&a, 1000);
lv_anim_set_playback_delay(&a, 100);
lv_anim_set_playback_time(&a, 300);
lv_anim_set_repeat_delay(&a, 500);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_path_cb(&a, lv_anim_path_ease_in_out);
(continuesonnextpage)
5.14. Animations 446


--- Page 451 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_set_exec_cb(&a, anim_size_cb);
lv_anim_start(&a);
lv_anim_set_exec_cb(&a, anim_x_cb);
lv_anim_set_values(&a, 10, 240);
lv_anim_start(&a);
}
#endif
def anim_x_cb(obj, v):
obj.set_x(v)
def anim_size_cb(obj, v):
obj.set_size(v, v)
#
# Create a playback animation
#
obj = lv.obj(lv.scr_act())
obj.set_style_bg_color(lv.palette_main(lv.PALETTE.RED), 0)
obj.set_style_radius(lv.RADIUS.CIRCLE, 0)
obj.align(lv.ALIGN.LEFT_MID, 10, 0)
a1 = lv.anim_t()
a1.init()
a1.set_var(obj)
a1.set_values(10, 50)
a1.set_time(1000)
a1.set_playback_delay(100)
a1.set_playback_time(300)
a1.set_repeat_delay(500)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a1.set_path_cb(lv.anim_t.path_ease_in_out)
a1.set_custom_exec_cb(lambda a1,val: anim_size_cb(obj,val))
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_var(obj)
a2.set_values(10, 240)
a2.set_time(1000)
a2.set_playback_delay(100)
a2.set_playback_time(300)
a2.set_repeat_delay(500)
a2.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a2.set_path_cb(lv.anim_t.path_ease_in_out)
a2.set_custom_exec_cb(lambda a1,val: anim_x_cb(obj,val))
lv.anim_t.start(a2)
5.14. Animations 447


--- Page 452 ---


LVGLDocumentation8.3
Animationtimeline
#include "../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
static lv_anim_timeline_t * anim_timeline = NULL;
static lv_obj_t * obj1 = NULL;
static lv_obj_t * obj2 = NULL;
static lv_obj_t * obj3 = NULL;
static const lv_coord_t obj_width = 90;
static const lv_coord_t obj_height = 70;
static void set_width(void * var, int32_t v)
{
lv_obj_set_width((lv_obj_t *)var, v);
}
static void set_height(void * var, int32_t v)
{
lv_obj_set_height((lv_obj_t *)var, v);
}
static void anim_timeline_create(void)
{
/* obj1 */
lv_anim_t a1;
lv_anim_init(&a1);
lv_anim_set_var(&a1, obj1);
lv_anim_set_values(&a1, 0, obj_width);
lv_anim_set_early_apply(&a1, false);
lv_anim_set_exec_cb(&a1, (lv_anim_exec_xcb_t)set_width);
lv_anim_set_path_cb(&a1, lv_anim_path_overshoot);
lv_anim_set_time(&a1, 300);
lv_anim_t a2;
lv_anim_init(&a2);
lv_anim_set_var(&a2, obj1);
lv_anim_set_values(&a2, 0, obj_height);
lv_anim_set_early_apply(&a2, false);
lv_anim_set_exec_cb(&a2, (lv_anim_exec_xcb_t)set_height);
lv_anim_set_path_cb(&a2, lv_anim_path_ease_out);
lv_anim_set_time(&a2, 300);
/* obj2 */
lv_anim_t a3;
lv_anim_init(&a3);
lv_anim_set_var(&a3, obj2);
lv_anim_set_values(&a3, 0, obj_width);
lv_anim_set_early_apply(&a3, false);
lv_anim_set_exec_cb(&a3, (lv_anim_exec_xcb_t)set_width);
lv_anim_set_path_cb(&a3, lv_anim_path_overshoot);
lv_anim_set_time(&a3, 300);
lv_anim_t a4;
lv_anim_init(&a4);
(continuesonnextpage)
5.14. Animations 448


--- Page 453 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_set_var(&a4, obj2);
lv_anim_set_values(&a4, 0, obj_height);
lv_anim_set_early_apply(&a4, false);
lv_anim_set_exec_cb(&a4, (lv_anim_exec_xcb_t)set_height);
lv_anim_set_path_cb(&a4, lv_anim_path_ease_out);
lv_anim_set_time(&a4, 300);
/* obj3 */
lv_anim_t a5;
lv_anim_init(&a5);
lv_anim_set_var(&a5, obj3);
lv_anim_set_values(&a5, 0, obj_width);
lv_anim_set_early_apply(&a5, false);
lv_anim_set_exec_cb(&a5, (lv_anim_exec_xcb_t)set_width);
lv_anim_set_path_cb(&a5, lv_anim_path_overshoot);
lv_anim_set_time(&a5, 300);
lv_anim_t a6;
lv_anim_init(&a6);
lv_anim_set_var(&a6, obj3);
lv_anim_set_values(&a6, 0, obj_height);
lv_anim_set_early_apply(&a6, false);
lv_anim_set_exec_cb(&a6, (lv_anim_exec_xcb_t)set_height);
lv_anim_set_path_cb(&a6, lv_anim_path_ease_out);
lv_anim_set_time(&a6, 300);
/* Create anim timeline */
anim_timeline = lv_anim_timeline_create();
lv_anim_timeline_add(anim_timeline, 0, &a1);
lv_anim_timeline_add(anim_timeline, 0, &a2);
lv_anim_timeline_add(anim_timeline, 200, &a3);
lv_anim_timeline_add(anim_timeline, 200, &a4);
lv_anim_timeline_add(anim_timeline, 400, &a5);
lv_anim_timeline_add(anim_timeline, 400, &a6);
}
static void btn_start_event_handler(lv_event_t * e)
{
lv_obj_t * btn = lv_event_get_target(e);
if(!anim_timeline) {
anim_timeline_create();
}
bool reverse = lv_obj_has_state(btn, LV_STATE_CHECKED);
lv_anim_timeline_set_reverse(anim_timeline, reverse);
lv_anim_timeline_start(anim_timeline);
}
static void btn_del_event_handler(lv_event_t * e)
{
LV_UNUSED(e);
if(anim_timeline) {
lv_anim_timeline_del(anim_timeline);
anim_timeline = NULL;
}
}
(continuesonnextpage)
5.14. Animations 449


--- Page 454 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static void btn_stop_event_handler(lv_event_t * e)
{
LV_UNUSED(e);
if(anim_timeline) {
lv_anim_timeline_stop(anim_timeline);
}
}
static void slider_prg_event_handler(lv_event_t * e)
{
lv_obj_t * slider = lv_event_get_target(e);
if(!anim_timeline) {
anim_timeline_create();
}
int32_t progress = lv_slider_get_value(slider);
lv_anim_timeline_set_progress(anim_timeline, progress);
}
/**
* Create an animation timeline
*/
void lv_example_anim_timeline_1(void)
{
lv_obj_t * par = lv_scr_act();
lv_obj_set_flex_flow(par, LV_FLEX_FLOW_ROW);
lv_obj_set_flex_align(par, LV_FLEX_ALIGN_SPACE_AROUND, LV_FLEX_ALIGN_CENTER, LV_
,→FLEX_ALIGN_CENTER);
/* create btn_start */
lv_obj_t * btn_start = lv_btn_create(par);
lv_obj_add_event_cb(btn_start, btn_start_event_handler, LV_EVENT_VALUE_CHANGED,␣
,→NULL);
lv_obj_add_flag(btn_start, LV_OBJ_FLAG_IGNORE_LAYOUT);
lv_obj_add_flag(btn_start, LV_OBJ_FLAG_CHECKABLE);
lv_obj_align(btn_start, LV_ALIGN_TOP_MID, -100, 20);
lv_obj_t * label_start = lv_label_create(btn_start);
lv_label_set_text(label_start, "Start");
lv_obj_center(label_start);
/* create btn_del */
lv_obj_t * btn_del = lv_btn_create(par);
lv_obj_add_event_cb(btn_del, btn_del_event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_add_flag(btn_del, LV_OBJ_FLAG_IGNORE_LAYOUT);
lv_obj_align(btn_del, LV_ALIGN_TOP_MID, 0, 20);
lv_obj_t * label_del = lv_label_create(btn_del);
lv_label_set_text(label_del, "Delete");
lv_obj_center(label_del);
/* create btn_stop */
lv_obj_t * btn_stop = lv_btn_create(par);
lv_obj_add_event_cb(btn_stop, btn_stop_event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_add_flag(btn_stop, LV_OBJ_FLAG_IGNORE_LAYOUT);
(continuesonnextpage)
5.14. Animations 450


--- Page 455 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_align(btn_stop, LV_ALIGN_TOP_MID, 100, 20);
lv_obj_t * label_stop = lv_label_create(btn_stop);
lv_label_set_text(label_stop, "Stop");
lv_obj_center(label_stop);
/* create slider_prg */
lv_obj_t * slider_prg = lv_slider_create(par);
lv_obj_add_event_cb(slider_prg, slider_prg_event_handler, LV_EVENT_VALUE_CHANGED,␣
,→NULL);
lv_obj_add_flag(slider_prg, LV_OBJ_FLAG_IGNORE_LAYOUT);
lv_obj_align(slider_prg, LV_ALIGN_BOTTOM_MID, 0, -20);
lv_slider_set_range(slider_prg, 0, 65535);
/* create 3 objects */
obj1 = lv_obj_create(par);
lv_obj_set_size(obj1, obj_width, obj_height);
obj2 = lv_obj_create(par);
lv_obj_set_size(obj2, obj_width, obj_height);
obj3 = lv_obj_create(par);
lv_obj_set_size(obj3, obj_width, obj_height);
}
#endif
class LV_ExampleAnimTimeline_1(object):
def __init__(self):
self.obj_width = 120
self.obj_height = 150
#
# Create an animation timeline
#
self.par = lv.scr_act()
self.par.set_flex_flow(lv.FLEX_FLOW.ROW)
self.par.set_flex_align(lv.FLEX_ALIGN.SPACE_AROUND, lv.FLEX_ALIGN.CENTER, lv.
,→FLEX_ALIGN.CENTER)
self.btn_run = lv.btn(self.par)
self.btn_run.add_event_cb(self.btn_run_event_handler, lv.EVENT.VALUE_CHANGED,␣
,→None)
self.btn_run.add_flag(lv.obj.FLAG.IGNORE_LAYOUT)
self.btn_run.add_flag(lv.obj.FLAG.CHECKABLE)
self.btn_run.align(lv.ALIGN.TOP_MID, -50, 20)
self.label_run = lv.label(self.btn_run)
self.label_run.set_text("Run")
self.label_run.center()
self.btn_del = lv.btn(self.par)
self.btn_del.add_event_cb(self.btn_del_event_handler, lv.EVENT.CLICKED, None)
self.btn_del.add_flag(lv.obj.FLAG.IGNORE_LAYOUT)
self.btn_del.align(lv.ALIGN.TOP_MID, 50, 20)
(continuesonnextpage)
5.14. Animations 451


--- Page 456 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
self.label_del = lv.label(self.btn_del)
self.label_del.set_text("Stop")
self.label_del.center()
self.slider = lv.slider(self.par)
self.slider.add_event_cb(self.slider_prg_event_handler, lv.EVENT.VALUE_
,→CHANGED, None)
self.slider.add_flag(lv.obj.FLAG.IGNORE_LAYOUT)
self.slider.align(lv.ALIGN.BOTTOM_RIGHT, -20, -20)
self.slider.set_range(0, 65535)
self.obj1 = lv.obj(self.par)
self.obj1.set_size(self.obj_width, self.obj_height)
self.obj2 = lv.obj(self.par)
self.obj2.set_size(self.obj_width, self.obj_height)
self.obj3 = lv.obj(self.par)
self.obj3.set_size(self.obj_width, self.obj_height)
self.anim_timeline = None
def set_width(self,obj, v):
obj.set_width(v)
def set_height(self,obj, v):
obj.set_height(v)
def anim_timeline_create(self):
# obj1
self.a1 = lv.anim_t()
self.a1.init()
self.a1.set_values(0, self.obj_width)
self.a1.set_early_apply(False)
self.a1.set_custom_exec_cb(lambda a,v: self.set_width(self.obj1,v))
self.a1.set_path_cb(lv.anim_t.path_overshoot)
self.a1.set_time(300)
self.a2 = lv.anim_t()
self.a2.init()
self.a2.set_values(0, self.obj_height)
self.a2.set_early_apply(False)
self.a2.set_custom_exec_cb(lambda a,v: self.set_height(self.obj1,v))
self.a2.set_path_cb(lv.anim_t.path_ease_out)
self.a2.set_time(300)
# obj2
self.a3=lv.anim_t()
self.a3.init()
self.a3.set_values(0, self.obj_width)
self.a3.set_early_apply(False)
self.a3.set_custom_exec_cb(lambda a,v: self.set_width(self.obj2,v))
self.a3.set_path_cb(lv.anim_t.path_overshoot)
self.a3.set_time(300)
self.a4 = lv.anim_t()
(continuesonnextpage)
5.14. Animations 452


--- Page 457 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
self.a4.init()
self.a4.set_values(0, self.obj_height)
self.a4.set_early_apply(False)
self.a4.set_custom_exec_cb(lambda a,v: self.set_height(self.obj2,v))
self.a4.set_path_cb(lv.anim_t.path_ease_out)
self.a4.set_time(300)
# obj3
self.a5 = lv.anim_t()
self.a5.init()
self.a5.set_values(0, self.obj_width)
self.a5.set_early_apply(False)
self.a5.set_custom_exec_cb(lambda a,v: self.set_width(self.obj3,v))
self.a5.set_path_cb(lv.anim_t.path_overshoot)
self.a5.set_time(300)
self.a6 = lv.anim_t()
self.a6.init()
self.a6.set_values(0, self.obj_height)
self.a6.set_early_apply(False)
self.a6.set_custom_exec_cb(lambda a,v: self.set_height(self.obj3,v))
self.a6.set_path_cb(lv.anim_t.path_ease_out)
self.a6.set_time(300)
# Create anim timeline
print("Create new anim_timeline")
self.anim_timeline = lv.anim_timeline_create()
lv.anim_timeline_add(self.anim_timeline, 0, self.a1)
lv.anim_timeline_add(self.anim_timeline, 0, self.a2)
lv.anim_timeline_add(self.anim_timeline, 200, self.a3)
lv.anim_timeline_add(self.anim_timeline, 200, self.a4)
lv.anim_timeline_add(self.anim_timeline, 400, self.a5)
lv.anim_timeline_add(self.anim_timeline, 400, self.a6)
def slider_prg_event_handler(self,e):
slider = e.get_target()
if not self.anim_timeline:
self.anim_timeline_create()
progress = slider.get_value()
lv.anim_timeline_set_progress(self.anim_timeline, progress)
def btn_run_event_handler(self,e):
btn = e.get_target()
if not self.anim_timeline:
self.anim_timeline_create()
reverse = btn.has_state(lv.STATE.CHECKED)
lv.anim_timeline_set_reverse(self.anim_timeline,reverse)
lv.anim_timeline_start(self.anim_timeline)
def btn_del_event_handler(self,e):
if self.anim_timeline:
lv.anim_timeline_del(self.anim_timeline)
self.anim_timeline = None
(continuesonnextpage)
5.14. Animations 453


--- Page 458 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_example_anim_timeline_1 = LV_ExampleAnimTimeline_1()
5.14.7 API
Typedefs
typedefint32_t(*lv_anim_path_cb_t)(conststruct_lv_anim_t*)
Getthecurrentvalueduringananimation
typedefvoid(*lv_anim_exec_xcb_t)(void*,int32_t)
Generic prototype of "animator" functions. First parameter is the variable to animate. Second parameter is the
valuetoset. Compatiblewithlv_xxx_set_yyy(obj, value)functionsThexin_xcb_tmeansit'snot
afullygenericprototypebecauseitdoesn'treceivelv_anim_t *asitsfirstargument
typedefvoid(*lv_anim_custom_exec_cb_t)(struct_lv_anim_t*,int32_t)
Sameaslv_anim_exec_xcb_tbutreceiveslv_anim_t *asthefirstparameter. It'smoreconsistentbut
lessconvenient. Mightbeusedbybindinggeneratorfunctions.
typedefvoid(*lv_anim_ready_cb_t)(struct_lv_anim_t*)
Callbacktocallwhentheanimationisready
typedefvoid(*lv_anim_start_cb_t)(struct_lv_anim_t*)
Callbacktocallwhentheanimationreallystars(consideringdelay)
typedefint32_t(*lv_anim_get_value_cb_t)(struct_lv_anim_t*)
Callbackusedwhentheanimationvaluesarerelativetogetthecurrentvalue
typedefvoid(*lv_anim_deleted_cb_t)(struct_lv_anim_t*)
Callbackusedwhentheanimationisdeleted
typedefstruct_lv_anim_tlv_anim_t
Describesananimation
Enums
enumlv_anim_enable_t
Canbeusedtoindicateifanimationsareenabledordisabledinacase
Values:
enumeratorLV_ANIM_OFF
enumeratorLV_ANIM_ON
5.14. Animations 454


--- Page 459 ---


LVGLDocumentation8.3
Functions
LV_EXPORT_CONST_INT(LV_ANIM_REPEAT_INFINITE)
LV_EXPORT_CONST_INT(LV_ANIM_PLAYTIME_INFINITE)
void_lv_anim_core_init(void)
Init. theanimationmodule
voidlv_anim_init(lv_anim_t*a)
Initializeananimationvariable. E.g.: lv_anim_ta;lv_anim_init(&a);lv_anim_set_...(&a);lv_anim_start(&a);
Parameters a--pointertoanlv_anim_tvariabletoinitialize
staticinlinevoidlv_anim_set_var(lv_anim_t*a,void*var)
Setavariabletoanimate
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• var--pointertoavariabletoanimate
staticinlinevoidlv_anim_set_exec_cb(lv_anim_t*a,lv_anim_exec_xcb_texec_cb)
Setafunctiontoanimatevar
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• exec_cb--afunctiontoexecuteduringanimationLVGL'sbuilt-infunctionscanbeused.
E.g. lv_obj_set_x
staticinlinevoidlv_anim_set_time(lv_anim_t*a,uint32_tduration)
Setthedurationofananimation
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• duration--durationoftheanimationinmilliseconds
staticinlinevoidlv_anim_set_delay(lv_anim_t*a,uint32_tdelay)
Setadelaybeforestartingtheanimation
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• delay--delaybeforetheanimationinmilliseconds
staticinlinevoidlv_anim_set_values(lv_anim_t*a,int32_tstart,int32_tend)
Setthestartandendvaluesofananimation
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• start--thestartvalue
• end--theendvalue
5.14. Animations 455


--- Page 460 ---


LVGLDocumentation8.3
staticinlinevoidlv_anim_set_custom_exec_cb(lv_anim_t*a,lv_anim_custom_exec_cb_texec_cb)
Similartolv_anim_set_exec_cbbutlv_anim_custom_exec_cb_treceiveslv_anim_t *asits
firstparameterinsteadofvoid *. ThisfunctionmightbeusedwhenLVGLisboundtootherlanguagesbecause
it's more consistent to have lv_anim_t * as first parameter. The variable to animate can be stored in the
animation'suser_data
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• exec_cb--afunctiontoexecute.
staticinlinevoidlv_anim_set_path_cb(lv_anim_t*a,lv_anim_path_cb_tpath_cb)
Setthepath(curve)oftheanimation.
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• path_cb--afunctiontosetthecurrentvalueoftheanimation.
staticinlinevoidlv_anim_set_start_cb(lv_anim_t*a,lv_anim_start_cb_tstart_cb)
Setafunctioncallwhentheanimationreallystarts(consideringdelay)
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• start_cb--afunctioncallwhentheanimationstarts
staticinlinevoidlv_anim_set_get_value_cb(lv_anim_t*a,lv_anim_get_value_cb_tget_value_cb)
Setafunctiontousethecurrentvalueofthevariableandmakestartandendvaluerelativetothereturnedcurrent
value.
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• get_value_cb--afunctioncallwhentheanimationstarts
staticinlinevoidlv_anim_set_ready_cb(lv_anim_t*a,lv_anim_ready_cb_tready_cb)
Setafunctioncallwhentheanimationisready
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• ready_cb--afunctioncallwhentheanimationisready
staticinlinevoidlv_anim_set_deleted_cb(lv_anim_t*a,lv_anim_deleted_cb_tdeleted_cb)
Setafunctioncallwhentheanimationisdeleted.
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• deleted_cb--afunctioncallwhentheanimationisdeleted
staticinlinevoidlv_anim_set_playback_time(lv_anim_t*a,uint32_ttime)
Maketheanimationtoplaybacktowhentheforwarddirectionisready
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• time--thedurationoftheplaybackanimationinmilliseconds. 0: disableplayback
5.14. Animations 456


--- Page 461 ---


LVGLDocumentation8.3
staticinlinevoidlv_anim_set_playback_delay(lv_anim_t*a,uint32_tdelay)
Maketheanimationtoplaybacktowhentheforwarddirectionisready
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• delay--delayinmillisecondsbeforestartingtheplaybackanimation.
staticinlinevoidlv_anim_set_repeat_count(lv_anim_t*a,uint16_tcnt)
Maketheanimationrepeatitself.
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• cnt--repeatcountorLV_ANIM_REPEAT_INFINITEforinfiniterepetition. 0: todisable
repetition.
staticinlinevoidlv_anim_set_repeat_delay(lv_anim_t*a,uint32_tdelay)
Setadelaybeforerepeatingtheanimation.
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• delay--delayinmillisecondsbeforerepeatingtheanimation.
staticinlinevoidlv_anim_set_early_apply(lv_anim_t*a,boolen)
Setawhethertheanimation'sshouldbeappliedimmediatelyoronlywhenthedelayexpired.
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• en--true: applythestartvalueimmediatelyinlv_anim_start;false: applythestartvalue
onlywhendelaymsiselapsedandtheanimationsreallystarts
staticinlinevoidlv_anim_set_user_data(lv_anim_t*a,void*user_data)
Setthecustomuserdatafieldoftheanimation.
Parameters
• a--pointertoaninitializedlv_anim_tvariable
• user_data--pointertothenewuser_data.
lv_anim_t*lv_anim_start(constlv_anim_t*a)
Createananimation
Parameters a--aninitialized'anim_t'variable. Notrequiredaftercall.
Returns pointertothecreatedanimation(differentfromtheaparameter)
staticinlineuint32_tlv_anim_get_delay(lv_anim_t*a)
Getadelaybeforestartingtheanimation
Parameters a--pointertoaninitializedlv_anim_tvariable
Returns delaybeforetheanimationinmilliseconds
uint32_tlv_anim_get_playtime(lv_anim_t*a)
Getthetimeusedtoplaytheanimation.
Parameters a--pointertoananimation.
5.14. Animations 457


--- Page 462 ---


LVGLDocumentation8.3
Returns theplaytimeinmilliseconds.
staticinlinevoid*lv_anim_get_user_data(lv_anim_t*a)
Gettheuser_datafieldoftheanimation
Parameters a--pointertoaninitializedlv_anim_tvariable
Returns thepointertothecustomuser_dataoftheanimation
boollv_anim_del(void*var,lv_anim_exec_xcb_texec_cb)
Deleteananimationofavariablewithagivenanimatorfunction
Parameters
• var--pointertovariable
• exec_cb--afunctionpointerwhichisanimating'var',orNULLtoignoreitanddeleteall
theanimationsof'var
Returns true: atleast1animationisdeleted,false: noanimationisdeleted
voidlv_anim_del_all(void)
Deletealltheanimations
lv_anim_t*lv_anim_get(void*var,lv_anim_exec_xcb_texec_cb)
Gettheanimationofavariableanditsexec_cb.
Parameters
• var--pointertovariable
• exec_cb--afunctionpointerwhichisanimating'var',orNULLtoreturnfirstmatching'var'
Returns pointertotheanimation.
struct_lv_timer_t*lv_anim_get_timer(void)
Getglobalanimationrefreshertimer.
Returns pointertotheanimationrefreshertimer.
staticinlineboollv_anim_custom_del(lv_anim_t*a,lv_anim_custom_exec_cb_texec_cb)
Delete an animation by getting the animated variable from a. Only animations with exec_cb will be deleted.
Thisfunctionexistsbecauseit'slogicalthatallanim. functionsreceivesanlv_anim_tastheirfirstparameter.
It'snotpracticalinCbutmightmaketheAPImoreconsequentandmakeseasiertogeneratebindings.
Parameters
• a--pointertoananimation.
• exec_cb--afunctionpointerwhichisanimating'var',orNULLtoignoreitanddeleteall
theanimationsof'var
Returns true: atleast1animationisdeleted,false: noanimationisdeleted
staticinlinelv_anim_t*lv_anim_custom_get(lv_anim_t*a,lv_anim_custom_exec_cb_texec_cb)
Gettheanimationofavariableanditsexec_cb. Thisfunctionexistsbecauseit'slogicalthatallanim. functions
receivesanlv_anim_tastheirfirstparameter. It'snotpracticalinCbutmightmaketheAPImoreconsequent
andmakeseasiertogeneratebindings.
Parameters
• a--pointertoananimation.
• exec_cb--afunctionpointerwhichisanimating'var',orNULLtoreturnfirstmatching'var'
5.14. Animations 458


--- Page 463 ---


LVGLDocumentation8.3
Returns pointertotheanimation.
uint16_tlv_anim_count_running(void)
Getthenumberofcurrentlyrunninganimations
Returns thenumberofrunninganimations
uint32_tlv_anim_speed_to_time(uint32_tspeed,int32_tstart,int32_tend)
Calculatethetimeofananimationwithagivenspeedandthestartandendvalues
Parameters
• speed--speedofanimationinunit/sec
• start--startvalueoftheanimation
• end--endvalueoftheanimation
Returns therequiredtime[ms]fortheanimationwiththegivenparameters
voidlv_anim_refr_now(void)
Manuallyrefreshthestateoftheanimations. Usefultomaketheanimationsrunninginablockingprocesswhere
lv_timer_handlercan'trunforawhile. Shouldn'tbeuseddirectlybecauseitiscalledinlv_refr_now().
int32_tlv_anim_path_linear(constlv_anim_t*a)
Calculatethecurrentvalueofananimationapplyinglinearcharacteristic
Parameters a--pointertoananimation
Returns thecurrentvaluetoset
int32_tlv_anim_path_ease_in(constlv_anim_t*a)
Calculatethecurrentvalueofananimationslowingdownthestartphase
Parameters a--pointertoananimation
Returns thecurrentvaluetoset
int32_tlv_anim_path_ease_out(constlv_anim_t*a)
Calculatethecurrentvalueofananimationslowingdowntheendphase
Parameters a--pointertoananimation
Returns thecurrentvaluetoset
int32_tlv_anim_path_ease_in_out(constlv_anim_t*a)
Calculatethecurrentvalueofananimationapplyingan"S"characteristic(cosine)
Parameters a--pointertoananimation
Returns thecurrentvaluetoset
int32_tlv_anim_path_overshoot(constlv_anim_t*a)
Calculatethecurrentvalueofananimationwithovershootattheend
Parameters a--pointertoananimation
Returns thecurrentvaluetoset
int32_tlv_anim_path_bounce(constlv_anim_t*a)
Calculatethecurrentvalueofananimationwith3bounces
Parameters a--pointertoananimation
Returns thecurrentvaluetoset
5.14. Animations 459


--- Page 464 ---


LVGLDocumentation8.3
int32_tlv_anim_path_step(constlv_anim_t*a)
Calculatethecurrentvalueofananimationapplyingstepcharacteristic. (Setendvalueontheendoftheanimation)
Parameters a--pointertoananimation
Returns thecurrentvaluetoset
struct_lv_anim_t
#include<lv_anim.h>Describesananimation
PublicMembers
void*var
Variabletoanimate
lv_anim_exec_xcb_texec_cb
Functiontoexecutetoanimate
lv_anim_start_cb_tstart_cb
Callitwhentheanimationisstarts(consideringdelay)
lv_anim_ready_cb_tready_cb
Callitwhentheanimationisready
lv_anim_deleted_cb_tdeleted_cb
Callitwhentheanimationisdeleted
lv_anim_get_value_cb_tget_value_cb
Getthecurrentvalueinrelativemode
void*user_data
Customuserdata
lv_anim_path_cb_tpath_cb
Describethepath(curve)ofanimations
int32_tstart_value
Startvalue
int32_tcurrent_value
Currentvalue
int32_tend_value
Endvalue
int32_ttime
Animationtimeinms
5.14. Animations 460


--- Page 465 ---


LVGLDocumentation8.3
int32_tact_time
Currenttimeinanimation. Settonegativetomakedelay.
uint32_tplayback_delay
Waitbeforeplayback
uint32_tplayback_time
Durationofplaybackanimation
uint32_trepeat_delay
Waitbeforerepeat
uint16_trepeat_cnt
Repeatcountfortheanimation
uint8_tearly_apply
1: Applystartvalueimmediatelyevenisthereisdelay
uint8_tplayback_now
Playbackisinprogress
uint8_trun_round
Indicatestheanimationhasruninthisround
uint8_tstart_cb_called
Indicatesthatthestart_cbwasalreadycalled
5.15 Timers
LVGLhasabuilt-intimersystem. Youcanregisterafunctiontohaveitbecalledperiodically. Thetimersarehandledand
calledinlv_timer_handler(),whichneedstobecalledeveryfewmilliseconds. SeePortingformoreinformation.
Timers are non-preemptive, which means a timer cannot interrupt another timer. Therefore, you can call any LVGL
relatedfunctioninatimer.
5.15.1 Create a timer
To create a new timer, use lv_timer_create(timer_cb, period_ms, user_data). It will
create an lv_timer_t * variable, which can be used later to modify the parameters of the timer.
lv_timer_create_basic()canalsobeused. Thisallowsyoutocreateanewtimerwithoutspecifyinganypa-
rameters.
Atimercallbackshouldhaveavoid (*lv_timer_cb_t)(lv_timer_t *);prototype.
Forexample:
5.15. Timers 461


--- Page 466 ---


LVGLDocumentation8.3
void my_timer(lv_timer_t * timer)
{
/*Use the user_data*/
uint32_t * user_data = timer->user_data;
printf("my_timer called with user data: %d\n", *user_data);
/*Do something with LVGL*/
if(something_happened) {
something_happened = false;
lv_btn_create(lv_scr_act(), NULL);
}
}
...
static uint32_t user_data = 10;
lv_timer_t * timer = lv_timer_create(my_timer, 500, &user_data);
5.15.2 Ready and Reset
lv_timer_ready(timer)makesatimerrunonthenextcalloflv_timer_handler().
lv_timer_reset(timer)resetstheperiodofatimer. Itwillbecalledagainafterthedefinedperiodofmilliseconds
haselapsed.
5.15.3 Set parameters
Youcanmodifysometimerparameterslater:
• lv_timer_set_cb(timer, new_cb)
• lv_timer_set_period(timer, new_period)
5.15.4 Repeat count
You can make a timer repeat only a given number of times with lv_timer_set_repeat_count(timer,
count). The timer will automatically be deleted after it's called the defined number of times. Set the count to -1
torepeatindefinitely.
5.15.5 Measure idle time
Youcangettheidlepercentagetimeoflv_timer_handlerwithlv_timer_get_idle(). Notethat,itdoesn't
measuretheidletimeoftheoverallsystem,onlylv_timer_handler. Itcanbemisleadingifyouuseanoperating
systemandcalllv_timer_handlerinatimer,asitwon'tactuallymeasurethetimetheOSspendsinanidlethread.
5.15. Timers 462


--- Page 467 ---


LVGLDocumentation8.3
5.15.6 Asynchronous calls
Insomecases,youcan'tperformanactionimmediately. Forexample,youcan'tdeleteanobjectbecausesomethingelse
isstillusingit, oryoudon'twanttoblocktheexecutionnow. Forthesecases, lv_async_call(my_function,
data_p) can be used to call my_function on the next invocation of lv_timer_handler. data_p will be
passedtothefunctionwhenit'scalled. Notethatonlythedatapointerissaved,soyouneedtoensurethatthevariable
willbe"alive"whilethefunctioniscalled. Itcanbestatic,globalordynamicallyallocateddata. Ifyouwanttocancelan
asynchronouscall,calllv_async_call_cancel(my_function, data_p),whichwillclearallasynchronous
callsmatchingmy_functionanddata_p.
Forexample:
void my_screen_clean_up(void * scr)
{
/*Free some resources related to `scr`*/
/*Finally delete the screen*/
lv_obj_del(scr);
}
...
/*Do something with the object on the current screen*/
/*Delete screen on next call of `lv_timer_handler`, not right now.*/
lv_async_call(my_screen_clean_up, lv_scr_act());
/*The screen is still valid so you can do other things with it*/
Ifyoujustwanttodeleteanobjectanddon'tneedtocleananythingupinmy_screen_cleanupyoucouldjustuse
lv_obj_del_asyncwhichwilldeletetheobjectonthenextcalltolv_timer_handler.
5.15.7 API
Typedefs
typedefvoid(*lv_timer_cb_t)(struct_lv_timer_t*)
Timersexecutethistypeoffunctions.
typedefstruct_lv_timer_tlv_timer_t
Descriptorofalv_timer
Functions
void_lv_timer_core_init(void)
Initthelv_timermodule
static in-
line uint32_t LV_ATTRIBUTE_TIMER_HANDLER lv_timer_handler_run_in_period (uint32_t ms)
Callitinthesuper-loopofmain()orthreads. Itwillrunlv_timer_handler()withagivenperiodinms. Youcan
useitwithsleepordelayinOSenvironment. Thisfunctionisusedtosimplifytheporting.
5.15. Timers 463


--- Page 468 ---


LVGLDocumentation8.3
Parameters __ms--theperiodforrunninglv_timer_handler()
lv_timer_t*lv_timer_create_basic(void)
Create an "empty" timer. It needs to initialized with at least lv_timer_set_cb and
lv_timer_set_period
Returns pointertothecreatedtimer
lv_timer_t*lv_timer_create(lv_timer_cb_ttimer_xcb,uint32_tperiod,void*user_data)
Createanewlv_timer
Parameters
• timer_xcb--acallbacktocallperiodically. (the'x'intheargumentnameindicatesthatit's
notafullygenericfunctionbecauseitnotfollowsthefunc_name(object, callback,
...)convention)
• period--callperiodinmsunit
• user_data--customparameter
Returns pointertothenewtimer
voidlv_timer_del(lv_timer_t*timer)
Deletealv_timer
Parameters timer--pointertoanlv_timer
voidlv_timer_pause(lv_timer_t*timer)
Pause/resumeatimer.
Parameters timer--pointertoanlv_timer
voidlv_timer_resume(lv_timer_t*timer)
voidlv_timer_set_cb(lv_timer_t*timer,lv_timer_cb_ttimer_cb)
Setthecallbackthetimer(thefunctiontocallperiodically)
Parameters
• timer--pointertoatimer
• timer_cb--thefunctiontocallperiodically
voidlv_timer_set_period(lv_timer_t*timer,uint32_tperiod)
Setnewperiodforalv_timer
Parameters
• timer--pointertoalv_timer
• period--thenewperiod
voidlv_timer_ready(lv_timer_t*timer)
Makealv_timerready. Itwillnotwaititsperiod.
Parameters timer--pointertoalv_timer.
voidlv_timer_set_repeat_count(lv_timer_t*timer,int32_trepeat_count)
Setthenumberoftimesatimerwillrepeat.
Parameters
• timer--pointertoalv_timer.
5.15. Timers 464


--- Page 469 ---


LVGLDocumentation8.3
• repeat_count---1: infinity;0: stop;n>0: residualtimes
voidlv_timer_reset(lv_timer_t*timer)
Resetalv_timer. Itwillbecalledthepreviouslysetperiodmillisecondslater.
Parameters timer--pointertoalv_timer.
voidlv_timer_enable(boolen)
Enableordisablethewholelv_timerhandling
Parameters en--true: lv_timerhandlingisrunning,false: lv_timerhandlingissuspended
uint8_tlv_timer_get_idle(void)
Getidlepercentage
Returns thelv_timeridleinpercentage
lv_timer_t*lv_timer_get_next(lv_timer_t*timer)
Iteratethroughthetimers
Parameters timer--NULLtostartiterationorthepreviousreturnvaluetogetthenexttimer
Returns thenexttimerorNULLifthereisnomoretimer
struct_lv_timer_t
#include<lv_timer.h>Descriptorofalv_timer
PublicMembers
uint32_tperiod
Howoftenthetimershouldrun
uint32_tlast_run
Lasttimethetimerran
lv_timer_cb_ttimer_cb
Timerfunction
void*user_data
Customuserdata
int32_trepeat_count
1: Onetime;-1: infinity;n>0: residualtimes
uint32_tpaused
5.15. Timers 465


--- Page 470 ---


LVGLDocumentation8.3
Typedefs
typedefvoid(*lv_async_cb_t)(void*)
Typeforasynccallback.
Functions
lv_res_tlv_async_call(lv_async_cb_tasync_xcb,void*user_data)
Callanasynchronousfunctionthenexttimelv_timer_handler()isrun. Thisfunctionislikelytoreturnbeforethe
callactuallyhappens!
Parameters
• async_xcb -- a callback which is the task itself. (the 'x' in the argument name indi-
catesthatit'snotafullygenericfunctionbecauseitnotfollowsthefunc_name(object,
callback, ...)convention)
• user_data--customparameter
lv_res_tlv_async_call_cancel(lv_async_cb_tasync_xcb,void*user_data)
Cancelanasynchronousfunctioncall
Parameters
• async_xcb--acallbackwhichisthetaskitself.
• user_data--customparameter
5.16 Drawing
With LVGL, you don't need to draw anything manually. Just create objects (like buttons, labels, arc, etc.), move and
changethem,andLVGLwillrefreshandredrawwhatisrequired.
However,itcanbeusefultohaveabasicunderstandingofhowdrawinghappensinLVGLtoaddcustomization,makeit
easiertofindbugsorjustoutofcuriosity.
The basic concept is to not draw directly onto the display but rather to first draw on an internal draw buffer. When a
drawing(rendering)isreadythatbufferiscopiedtothedisplay.
Thedrawbuffercanbesmallerthanadisplay'ssize. LVGLwillsimplyrenderin"tiles"thatfitintothegivendrawbuffer.
Thisapproachhastwomainadvantagescomparedtodirectlydrawingtothedisplay:
1. It avoids flickering while the layers of the UI are drawn. For example, if LVGL drew directly onto the display,
whendrawingabackground+button+text,each"stage"wouldbevisibleforashorttime.
2. It'sfastertomodifyabufferininternalRAMandfinallywriteonepixelonlyoncethanreading/writingthedisplay
directlyoneachpixelaccess. (e.g. viaadisplaycontrollerwithSPIinterface).
Note that this concept is different from "traditional" double buffering where there are two display sized frame buffers:
oneholdsthecurrentimagetoshowonthedisplay,andrenderinghappenstotheother(inactive)framebuffer,andthey
areswappedwhentherenderingisfinished. ThemaindifferenceisthatwithLVGLyoudon'thavetostoretwoframe
buffers(whichusuallyrequiresexternalRAM)butonlysmallerdrawbuffer(s)thatcaneasilyfitintointernalRAM.
5.16. Drawing 466


--- Page 471 ---


LVGLDocumentation8.3
5.16.1 Mechanism of screen refreshing
BesuretogetfamiliarwiththeBufferingmodesofLVGLfirst.
LVGLrefreshesthescreeninthefollowingsteps:
1. SomethinghappensintheUIwhichrequiresredrawing. Forexample,abuttonispressed,achartischanged,an
animationhappened,etc.
2. LVGLsavesthechangedobject'soldandnewareaintoabuffer,calledanInvalidareabuffer. Foroptimization,in
somecases,objectsarenotaddedtothebuffer:
• Hiddenobjectsarenotadded.
• Objectscompletelyoutoftheirparentarenotadded.
• Areaspartiallyoutoftheparentarecroppedtotheparent'sarea.
• Objectsonotherscreensarenotadded.
3. IneveryLV_DISP_DEF_REFR_PERIOD(setinlv_conf.h)thefollowinghappens:
• LVGLcheckstheinvalidareasandjoinsthosethatareadjacentorintersecting.
• Takesthefirstjoinedarea,ifit'ssmallerthanthedrawbuffer,thensimplyrendersthearea'scontentintothe
drawbuffer. Iftheareadoesn'tfitintothebuffer,drawasmanylinesaspossibletothedrawbuffer.
• Whentheareaisrendered,callflush_cbfromthedisplaydrivertorefreshthedisplay.
• Iftheareawaslargerthanthebuffer,rendertheremainingpartstoo.
• Repeatthesamewithremainingjoinedareas.
When an area is redrawn the library searches the top-most object which covers that area and starts drawing from that
object. Forexample,ifabutton'slabelhaschanged,thelibrarywillseethatit'senoughtodrawthebuttonunderthetext
andit'snotnecessarytoredrawthedisplayundertherestofthebuttontoo.
Thedifferencebetweenbufferingmodesregardingthedrawingmechanismisthefollowing:
1. Onebuffer-LVGLneedstowaitforlv_disp_flush_ready()(calledfromflush_cb)beforestarting
toredrawthenextpart.
2. Twobuffers-LVGLcanimmediatelydrawtothesecondbufferwhenthefirstissenttoflush_cbbecausethe
flushingshouldbedonebyDMA(orsimilarhardware)inthebackground.
3. Doublebuffering-flush_cbshouldonlyswaptheaddressesoftheframebuffers.
5.16.2 Masking
Masking is the basic concept of LVGL's draw engine. To use LVGL it's not required to know about the mechanisms
describedherebutyoumightfindinterestingtoknowhowdrawingworksunderhood. Knowingaboutmaskingcomesin
handyifyouwanttocustomizedrawing.
Tolearnaboutmaskinglet'sseethestepsofdrawingfirst. LVGLperformsthefollowingstepstorenderanyshape,image
ortext. Itcanbeconsideredasadrawingpipeline.
1. PreparethedrawdescriptorsCreateadrawdescriptorfromanobject'sstyles(e.g. lv_draw_rect_dsc_t).
Thisgivesustheparametersfordrawing,forexamplecolors,widths,opacity,fonts,radius,etc.
2. Call the draw function Call the draw function with the draw descriptor and some other parameters (e.g.
lv_draw_rect()). Itwillrendertheprimitiveshapetothecurrentdrawbuffer.
3. Create masks If the shape is very simple and doesn't require masks, go to #5. Otherwise, create the required
masksinthedrawfunction. (e.g. aroundedrectanglemask)
5.16. Drawing 467


--- Page 472 ---


LVGLDocumentation8.3
4. Calculate all the added mask It composites opacity values into a mask buffer with the "shape" of the created
masks. E.g. incaseofa"linemask"accordingtotheparametersofthemask,keeponesideofthebufferasitis
(255bydefault)andsettherestto0toindicatethatthissideshouldberemoved.
5. Blend a color or image During blending, masking (make some pixels transparent or opaque), blending modes
(additive,subtractive,etc.) andcolor/imageopacityarehandled.
LVGLhasthefollowingbuilt-inmasktypeswhichcanbecalculatedandappliedreal-time:
• LV_DRAW_MASK_TYPE_LINERemovesasidefromaline(top,bottom,leftorright). lv_draw_lineuses
fourinstancesofit. Essentially,every(skew)lineisboundedwithfourlinemasksformingarectangle.
• LV_DRAW_MASK_TYPE_RADIUSRemovestheinneroroutercornersofarectanglewitharadiusedtransition.
It'salsousedtocreatecirclesbysettingtheradiustolargevalue(LV_RADIUS_CIRCLE)
• LV_DRAW_MASK_TYPE_ANGLE Removes a circular sector. It is used by lv_draw_arc to remove the
"empty"sector.
• LV_DRAW_MASK_TYPE_FADECreateaverticalfade(changeopacity)
• LV_DRAW_MASK_TYPE_MAPThemaskisstoredinabitmaparrayandthenecessarypartsareapplied
Masksareusedtocreatealmosteverybasicprimitive:
• lettersCreateamaskfromtheletteranddrawarectanglewiththeletter'scolorusingthemask.
• lineCreatedfromfour"linemasks"tomaskouttheleft,right,topandbottompartofthelinetogetaperfectly
perpendicularperimeter.
• roundedrectangleAmaskiscreatedreal-timetoaddaradiustothecorners.
• clip corner To clip overflowing content (usually children) on rounded corners, a rounded rectangle mask is also
applied.
• rectangleborderSameasaroundedrectanglebuttheinnerpartismaskedouttoo.
• arcdrawingAcircularborderisdrawnbutanarcmaskisappliedtoo.
• ARGBimagesThealphachannelisseparatedintoamaskandtheimageisdrawnasanormalRGBimage.
Usingmasks
Everymasktypehasarelatedparameterstructuretodescribethemask'sdata. Thefollowingparametertypesexist:
• lv_draw_mask_line_param_t
• lv_draw_mask_radius_param_t
• lv_draw_mask_angle_param_t
• lv_draw_mask_fade_param_t
• lv_draw_mask_map_param_t
1. Initialize a mask parameter with lv_draw_mask_<type>_init. See lv_draw_mask.h for the whole
API.
2. Addthemaskparametertothedrawenginewithint16_t mask_id = lv_draw_mask_add(&param,
ptr). ptrcanbeanypointertoidentifythemask,(NULLifunused).
3. Callthedrawfunctions
4. Remove the mask from the draw engine with lv_draw_mask_remove_id(mask_id) or
lv_draw_mask_remove_custom(ptr).
5. Freetheparameterwithlv_draw_mask_free_param(&param).
5.16. Drawing 468


--- Page 473 ---


LVGLDocumentation8.3
Aparametercanbeaddedandremovedanynumberoftimes,butitneedstobefreedwhennotrequiredanymore.
lv_draw_mask_addsavesonlythepointerofthemasksotheparameterneedstobevalidwhileinuse.
5.16.3 Hook drawing
Althoughwidgetscanbeeasilycustomizedbystylestheremightbecaseswhensomethingmorecustomisrequired. To
ensureagreatlevelofflexibilityLVGLsendsalotofeventsduringdrawingwithparametersthattellwhatLVGLisabout
todraw. Somefieldsoftheseparameterscanbemodifiedtodrawsomethingelseoranycustomdrawingoperationscan
beaddedmanually.
AgoodusecaseforthisistheButtonmatrixwidget. Bydefault,itsbuttonscanbestyledindifferentstates,butyoucan't
style the buttons one by one. However, an event is sent for every button and you can, for example, tell LVGL to use
differentcolorsonaspecificbuttonortomanuallydrawanimageonsomebuttons.
Eachoftheseeventsisdescribedindetailbelow.
Maindrawing
Theseeventsarerelatedtotheactualdrawingofanobject. E.g. thedrawingofbuttons,texts,etc. happenshere.
lv_event_get_clip_area(event)canbeusedtogetthecurrentcliparea. Theclipareaisrequiredindraw
functionstomakethemdrawonlyonalimitedarea.
LV_EVENT_DRAW_MAIN_BEGIN
Sentbeforestartingtodrawanobject. Thisisagoodplacetoaddmasksmanually. E.g. addalinemaskthat"removes"
therightsideofanobject.
LV_EVENT_DRAW_MAIN
The actual drawing of an object happens in this event. E.g. a rectangle for a button is drawn here. First, the widgets'
internaleventsarecalledtoperformdrawingandafterthatyoucandrawanythingontopofthem. Forexampleyoucan
addacustomtextoranimage.
LV_EVENT_DRAW_MAIN_END
Calledwhenthemaindrawingisfinished. Youcandrawanythinghereaswellandit'salsoagoodplacetoremoveany
maskscreatedinLV_EVENT_DRAW_MAIN_BEGIN.
Postdrawing
Postdrawingeventsarecalledwhenallthechildrenofanobjectaredrawn. ForexampleLVGLusethepostdrawing
phasetodrawscrollbarsbecausetheyshouldbeaboveallofthechildren.
lv_event_get_clip_area(event)canbeusedtogetthecurrentcliparea.
5.16. Drawing 469


--- Page 474 ---


LVGLDocumentation8.3
LV_EVENT_DRAW_POST_BEGIN
Sentbeforestartingthepostdrawphase. Maskscanbeaddedheretootomaskoutthepostdrawncontent.
LV_EVENT_DRAW_POST
Theactualdrawingshouldhappenhere.
LV_EVENT_DRAW_POST_END
Calledwhenpostdrawinghasfinished. IfmaskswerenotremovedinLV_EVENT_DRAW_MAIN_ENDtheyshouldbe
removedhere.
Partdrawing
WhenLVGLdrawsapartofanobject(e.g. aslider'sindicator,atable'scellorabuttonmatrix'sbutton)itsendsevents
beforeandafterdrawingthatpartwithsomecontextofthedrawing. Thisallowschangingthepartsonaverylowlevel
withmasks,extradrawing,orchangingtheparametersthatLVGLisplanningtousefordrawing.
Intheseeventsanlv_obj_draw_part_tstructureisusedtodescribethecontextofthedrawing. Notallfieldsare
setforeverypartandwidget. Toseewhichfieldsaresetforawidgetrefertothewidget'sdocumentation.
lv_obj_draw_part_thasthefollowingfields:
// Always set
const lv_area_t * clip_area; // The current clip area, required if you need to␣
,→draw something in the event
uint32_t part; // The current part for which the event is sent
uint32_t id; // The index of the part. E.g. a button's index␣
,→on button matrix or table cell index.
// Draw desciptors, set only if related
lv_draw_rect_dsc_t * rect_dsc; // A draw descriptor that can be modified to␣
,→changed what LVGL will draw. Set only for rectangle-like parts
lv_draw_label_dsc_t * label_dsc; // A draw descriptor that can be modified to␣
,→changed what LVGL will draw. Set only for text-like parts
lv_draw_line_dsc_t * line_dsc; // A draw descriptor that can be modified to␣
,→changed what LVGL will draw. Set only for line-like parts
lv_draw_img_dsc_t * img_dsc; // A draw descriptor that can be modified to␣
,→changed what LVGL will draw. Set only for image-like parts
lv_draw_arc_dsc_t * arc_dsc; // A draw descriptor that can be modified to␣
,→changed what LVGL will draw. Set only for arc-like parts
// Other parameters
lv_area_t * draw_area; // The area of the part being drawn
const lv_point_t * p1; // A point calculated during drawing. E.g. a␣
,→point of a chart or the center of an arc.
const lv_point_t * p2; // A point calculated during drawing. E.g. a␣
,→point of a chart.
char text[16]; // A text calculated during drawing. Can be␣
,→modified. E.g. tick labels on a chart axis.
lv_coord_t radius; // E.g. the radius of an arc (not the corner␣
,→radius).
(continuesonnextpage)
5.16. Drawing 470


--- Page 475 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
int32_t value; // A value calculated during drawing. E.g. Chart
,→'s tick line value.
const void * sub_part_ptr; // A pointer the identifies something in the part.
,→ E.g. chart series.
lv_event_get_draw_part_dsc(event)canbeusedtogetapointertolv_obj_draw_part_t.
LV_EVENT_DRAW_PART_BEGIN
Startthedrawingofapart. Thisisagoodplacetomodifythedrawdescriptors(e.g. rect_dsc),oraddmasks.
LV_EVENT_DRAW_PART_END
Finish the drawing of a part. This is a good place to draw extra content on the part or remove masks added in
LV_EVENT_DRAW_PART_BEGIN.
Others
LV_EVENT_COVER_CHECK
Thiseventisusedtocheckwhetheranobjectfullycoversanareaornot.
lv_event_get_cover_area(event) returns a pointer to an area to check and
lv_event_set_cover_res(event, res)canbeusedtosetoneoftheseresults:
• LV_COVER_RES_COVERtheareaisfullycoveredbytheobject
• LV_COVER_RES_NOT_COVERtheareaisnotcoveredbytheobject
• LV_COVER_RES_MASKEDthereisamaskontheobject,soitdoesnotfullycoverthearea
Herearesomereasonswhyanobjectwouldbeunabletofullycoveranarea:
• It'ssimplynotfullyinarea
• Ithasaradius
• Itdoesn'thave100%backgroundopacity
• It'sanARGBorchromakeyedimage
• It does not have normal blending mode. In this case LVGL needs to know the colors under the object to apply
blendingproperly
• It'satext,etc
Inshortifforanyreasontheareabelowanobjectisvisiblethantheobjectdoesn'tcoverthatarea.
BeforesendingthiseventLVGLchecksifatleastthewidget'scoordinatesfullycovertheareaornot. Ifnottheeventis
notcalled.
Youneedtocheckonlythedrawingyouhaveadded. Theexistingpropertiesknownbyawidgetarehandledinitsinternal
events. E.g. ifawidgethas>0radiusitmightnotcoveranarea,butyouneedtohandleradiusonlyifyouwillmodify
itandthewidgetwon'tknowaboutit.
5.16. Drawing 471


--- Page 476 ---


LVGLDocumentation8.3
LV_EVENT_REFR_EXT_DRAW_SIZE
Ifyouneedtodrawoutsideawidget, LVGLneedstoknowaboutitto provideextraspacefordrawing. Let'ssayyou
createaneventwhichwritesthecurrentvalueofaslideraboveitsknob. InthiscaseLVGLneedstoknowthattheslider's
drawareashouldbelargerwiththesizerequiredforthetext.
Youcansimplysettherequireddrawareawithlv_event_set_ext_draw_size(e, size).
5.17 Renderers and GPUs
5.17.1 Software renderer
TODO
5.17.2 SDL renderer
TODO
5.17.3 Arm-2D GPU
Arm-2DisnotaGPUbutanabstractionlayerfor2DGPUsdedicatedtoMicrocontrollers. ItsupportsallCortex-M
processorsrangingfromCortex-M0tothelatestCortex-M85.
Arm-2Disanopen-sourceprojectonGithub. Formore,pleasereferto: https://github.com/ARM-software/Arm-2D.
HowtoUse
Ingeneral,youcansetthemacroLV_USE_GPU_ARM2Dto1inlv_conf.htoenableArm-2DaccelerationforLVGL.
IfyouareusingCMSIS-PacktodeploytheLVGL.Youdon'thavetodefinethemacroLV_USE_GPU_ARM2Dmanually,
instead,pleaseselectthecomponentGPU Arm-2DintheRTEdialog. Thisstepwilldefinethemacroforus.
DesignConsiderations
Asmentionedbefore,Arm-2Disanabstractionlayerfor2DGPU;henceifthereisnoacceleratorordedicatedinstruction
set(suchasHeliumorACI)availableforArm-2D,itprovidesnegligibleperformanceboostforLVGL(sometimesworse)
forregularCortex-Mprocessors.
WehighlyrecommendyouenableArm-2DaccelerationforLVGLwhen:
• ThetargetprocessorsareCortex-M55and/orCortex-M85
• ThetargetprocessorssupportHelium.
• Thedevicevendorprovidesanarm-2dcompliantdriverfortheirpropriotory2Dacceleratorsand/orcustomized
instructionset.
• ThetargetdevicecontainsDMA-350
5.17. RenderersandGPUs 472


--- Page 477 ---


LVGLDocumentation8.3
Examples
5.17.4 NXP PXP and VGLite GPU
TODO
5.17.5 DMA2D GPU
TODO
5.18 New widget
5.18. Newwidget 473


--- Page 478 ---


CHAPTER
SIX
WIDGETS
6.1 Base object (lv_obj)
6.1.1 Overview
The'BaseObject'implementsthebasicpropertiesofwidgetsonascreen,suchas:
• coordinates
• parentobject
• children
• containsthestyles
• attributeslikeClickable,Scrollable,etc.
Inobject-orientedthinking,itisthebaseclassfromwhichallotherobjectsinLVGLareinherited.
The functions and functionalities of the Base object can be used with other widgets too. For example
lv_obj_set_width(slider, 100)
TheBaseobjectcanbedirectlyusedasasimplewidget: it'snothingmorethanarectangle. InHTMLterms,thinkofit
asa<div>.
Coordinates
Onlyasmallsubsetofcoordinatesettingsisdescribedhere. ToseeallthefeaturesofLVGL(padding, coordinatesin
styles,layouts,etc)visittheCoordinatespage.
Size
The object size can be modified on individual axes with lv_obj_set_width(obj, new_width) and
lv_obj_set_height(obj, new_height), or both axes can be modified at the same time with
lv_obj_set_size(obj, new_width, new_height).
474


--- Page 479 ---


LVGLDocumentation8.3
Position
Youcansetthepositionrelativetotheparentwithlv_obj_set_x(obj, new_x)andlv_obj_set_y(obj,
new_y),orbothaxesatthesametimewithlv_obj_set_pos(obj, new_x, new_y).
Alignment
Youcanaligntheobjectonitsparentwithlv_obj_set_align(obj, LV_ALIGN_...). Afterthiseveryxand
ysettingwillberelativetothesetalignmentmode. Forexample,thiswillshifttheobjectby10;20pxfromthecenterof
itsparent:
lv_obj_set_align(obj, LV_ALIGN_CENTER);
lv_obj_set_pos(obj, 10, 20);
//Or in one function
lv_obj_align(obj, LV_ALIGN_CENTER, 10, 20);
Toalignoneobjecttoanotheruse: lv_obj_align_to(obj_to_align, obj_referece, LV_ALIGN_..
., x, y)
For example, to align a text below an image: lv_obj_align_to(text, image,
LV_ALIGN_OUT_BOTTOM_MID, 0, 10).
Thefollowingaligntypesexist:
6.1. Baseobject(lv_obj) 475


--- Page 480 ---


LVGLDocumentation8.3
Parentsandchildren
You can set a new parent for an object with lv_obj_set_parent(obj, new_parent). To get the current
parent,uselv_obj_get_parent(obj).
Togetaspecificchildofaparentuselv_obj_get_child(parent, idx). Someexamplesforidx:
• 0getthechildcreatedfirst
• 1getthechildcreatedsecond
• -1getthechildcreatedlast
Thechildrencanbeiteratedlkethis:
uint32_t i;
for(i = 0; i < lv_obj_get_child_cnt(parent); i++) {
lv_obj_t * child = lv_obj_get_child(parent, i);
/*Do something with child*/
}
lv_obj_get_index(obj)returnstheindexoftheobjectinitsparent. Itisequivalenttothenumberofyounger
childrenintheparent.
You can bring an object to the foreground or send it to the background with lv_obj_move_foreground(obj)
andlv_obj_move_background(obj).
Youcanchangetheindexofanobjectinitsparentusinglv_obj_move_to_index(obj, index).
Youcanswapthepositionoftwoobjectswithlv_obj_swap(obj1, obj2).
DisplayandScreens
AtthehighestleveloftheLVGLobjecthierarchyisthedisplaywhichrepresentsthedriverforadisplaydevice(physical
display or simulator). A display can have one or more screens associated with it. Each screen contains a hierarchy of
objectsforgraphicalwidgetsrepresentingalayoutthatcoverstheentiredisplay.
Whenyouhavecreatedascreenlikelv_obj_t * screen = lv_obj_create(NULL),youcanmakeitactive
withlv_scr_load(screen). Thelv_scr_act()functiongivesyouapointertotheactivescreen.
Ifyouhavemultipledisplays,it'simportanttoknowthatthescreenfunctionsoperateonthemostrecentlycreateddisplay
ortheoneexplicitlyselectedwithlv_disp_set_default.
Togetanobject'sscreenusethelv_obj_get_screen(obj)function.
Events
To set an event callback for an object, use lv_obj_add_event_cb(obj, event_cb, LV_EVENT_...,
user_data),
Tomanuallysendaneventtoanobject,uselv_event_send(obj, LV_EVENT_..., param)
ReadtheEventoverviewtolearnmoreaboutevents.
6.1. Baseobject(lv_obj) 476


--- Page 481 ---


LVGLDocumentation8.3
Styles
BesuretoreadtheStyleoverview. Hereonlythemostessentialfunctionsaredescribed.
Anewstylecanbeaddedtoanobjectwiththelv_obj_add_style(obj, &new_style, selector)function.
selectorisanORedcombinationofpartandstate(s). E.g. LV_PART_SCROLLBAR | LV_STATE_PRESSED.
ThebaseobjectsuseLV_PART_MAINstylepropertiesandLV_PART_SCROLLBARwiththetypicalbackgroundstyle
properties.
Flags
Therearesomeattributeswhichcanbeenabled/disabledbylv_obj_add/clear_flag(obj, LV_OBJ_FLAG_.
..):
• LV_OBJ_FLAG_HIDDENMaketheobjecthidden. (Likeitwasn'tthereatall)
• LV_OBJ_FLAG_CLICKABLEMaketheobjectclickablebyinputdevices
• LV_OBJ_FLAG_CLICK_FOCUSABLEAddfocusedstatetotheobjectwhenclicked
• LV_OBJ_FLAG_CHECKABLETogglecheckedstatewhentheobjectisclicked
• LV_OBJ_FLAG_SCROLLABLEMaketheobjectscrollable
• LV_OBJ_FLAG_SCROLL_ELASTICAllowscrollinginsidebutwithslowerspeed
• LV_OBJ_FLAG_SCROLL_MOMENTUMMaketheobjectscrollfurtherwhen"thrown"
• LV_OBJ_FLAG_SCROLL_ONEAllowscrollingonlyonesnappablechildren
• LV_OBJ_FLAG_SCROLL_CHAIN_HORAllowpropagatingthehorizontalscrolltoaparent
• LV_OBJ_FLAG_SCROLL_CHAIN_VERAllowpropagatingtheverticalscrolltoaparent
• LV_OBJ_FLAG_SCROLL_CHAIN Simple packaging for (LV_OBJ_FLAG_SCROLL_CHAIN_HOR |
LV_OBJ_FLAG_SCROLL_CHAIN_VER)
• LV_OBJ_FLAG_SCROLL_ON_FOCUSAutomaticallyscrollobjecttomakeitvisiblewhenfocused
• LV_OBJ_FLAG_SCROLL_WITH_ARROWAllowscrollingthefocusedobjectwitharrowkeys
• LV_OBJ_FLAG_SNAPPABLEIfscrollsnapisenabledontheparentitcansnaptothisobject
• LV_OBJ_FLAG_PRESS_LOCKKeeptheobjectpressedevenifthepressslidfromtheobject
• LV_OBJ_FLAG_EVENT_BUBBLEPropagatetheeventstotheparenttoo
• LV_OBJ_FLAG_GESTURE_BUBBLEPropagatethegesturestotheparent
• LV_OBJ_FLAG_ADV_HITTESTAllowperformingmoreaccuratehit(click)test. E.g. accountingforrounded
corners
• LV_OBJ_FLAG_IGNORE_LAYOUTMaketheobjectpositionablebythelayouts
• LV_OBJ_FLAG_FLOATINGDonotscrolltheobjectwhentheparentscrollsandignorelayout
• LV_OBJ_FLAG_OVERFLOW_VISIBLEDonotclipthechildren'scontenttotheparent'sboundary
• LV_OBJ_FLAG_LAYOUT_1Customflag,freetousebylayouts
• LV_OBJ_FLAG_LAYOUT_2Customflag,freetousebylayouts
• LV_OBJ_FLAG_WIDGET_1Customflag,freetousebywidget
• LV_OBJ_FLAG_WIDGET_2Customflag,freetousebywidget
6.1. Baseobject(lv_obj) 477


--- Page 482 ---


LVGLDocumentation8.3
• LV_OBJ_FLAG_USER_1Customflag,freetousebyuser
• LV_OBJ_FLAG_USER_2Customflag,freetousebyuser
• LV_OBJ_FLAG_USER_3Customflag,freetousebyuser
• LV_OBJ_FLAG_USER_4Customflag,freetousebyuser
Someexamples:
/*Hide on object*/
lv_obj_add_flag(obj, LV_OBJ_FLAG_HIDDEN);
/*Make an object non-clickable*/
lv_obj_clear_flag(obj, LV_OBJ_FLAG_CLICKABLE);
Groups
ReadtheInputdevicesoverviewtolearnmoreaboutGroups.
Objects are added to a group with lv_group_add_obj(group, obj), and you can use
lv_obj_get_group(obj)toseewhichgroupanobjectbelongsto.
lv_obj_is_focused(obj)returnsiftheobjectiscurrentlyfocusedonitsgroupornot. Iftheobjectisnotadded
toagroup,falsewillbereturned.
Extendedclickarea
By default, the objects can be clicked only within their bounding area. However, this can be extended with
lv_obj_set_ext_click_area(obj, size).
6.1.2 Events
• LV_EVENT_VALUE_CHANGEDwhentheLV_OBJ_FLAG_CHECKABLEflagisenabledandtheobjectclicked
(ontransitionto/fromthecheckedstate)
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDissentforthefollowingtypes:
– LV_OBJ_DRAW_PART_RECTANGLEThemainrectangle
∗ part: LV_PART_MAIN
∗ rect_dsc
∗ draw_area: theareaoftherectangle
– LV_OBJ_DRAW_PART_BORDER_POSTTheborderiftheborder_poststylepropertyistrue
∗ part: LV_PART_MAIN
∗ rect_dsc
∗ draw_area: theareaoftherectangle
– LV_OBJ_DRAW_PART_SCROLLBARthescrollbars
∗ part: LV_PART_SCROLLBAR
∗ rect_dsc
∗ draw_area: theareaoftherectangle
6.1. Baseobject(lv_obj) 478


--- Page 483 ---


LVGLDocumentation8.3
LearnmoreaboutEvents.
6.1.3 Keys
If LV_OBJ_FLAG_CHECKABLE is enabled, LV_KEY_RIGHT and LV_KEY_UP make the object checked, and
LV_KEY_LEFTandLV_KEY_DOWNmakeitunchecked.
IfLV_OBJ_FLAG_SCROLLABLEisenabled,buttheobjectisnoteditable(asdeclaredbythewidgetclass),thearrow
keys(LV_KEY_UP,LV_KEY_DOWN,LV_KEY_LEFT,LV_KEY_RIGHT)scrolltheobject. Iftheobjectcanonlyscroll
vertically, LV_KEY_LEFT and LV_KEY_RIGHT will scroll up/down instead, making it compatible with an encoder
inputdevice. SeeInputdevicesoverviewformoreonencoderbehaviorsandtheeditmode.
LearnmoreaboutKeys.
6.1.4 Example
Baseobjectswithcustomstyles
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
void lv_example_obj_1(void)
{
lv_obj_t * obj1;
obj1 = lv_obj_create(lv_scr_act());
lv_obj_set_size(obj1, 100, 50);
lv_obj_align(obj1, LV_ALIGN_CENTER, -60, -30);
static lv_style_t style_shadow;
lv_style_init(&style_shadow);
lv_style_set_shadow_width(&style_shadow, 10);
lv_style_set_shadow_spread(&style_shadow, 5);
lv_style_set_shadow_color(&style_shadow, lv_palette_main(LV_PALETTE_BLUE));
lv_obj_t * obj2;
obj2 = lv_obj_create(lv_scr_act());
lv_obj_add_style(obj2, &style_shadow, 0);
lv_obj_align(obj2, LV_ALIGN_CENTER, 60, 30);
}
#endif
obj1 = lv.obj(lv.scr_act())
obj1.set_size(100, 50)
obj1.align(lv.ALIGN.CENTER, -60, -30)
style_shadow = lv.style_t()
style_shadow.init()
style_shadow.set_shadow_width(10)
style_shadow.set_shadow_spread(5)
style_shadow.set_shadow_color(lv.palette_main(lv.PALETTE.BLUE))
obj2 = lv.obj(lv.scr_act())
obj2.add_style(style_shadow, 0)
obj2.align(lv.ALIGN.CENTER, 60, 30)
6.1. Baseobject(lv_obj) 479


--- Page 484 ---


LVGLDocumentation8.3
Makeanobjectdraggable
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
static void drag_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_indev_t * indev = lv_indev_get_act();
if(indev == NULL) return;
lv_point_t vect;
lv_indev_get_vect(indev, &vect);
lv_coord_t x = lv_obj_get_x(obj) + vect.x;
lv_coord_t y = lv_obj_get_y(obj) + vect.y;
lv_obj_set_pos(obj, x, y);
}
/**
* Make an object dragable.
*/
void lv_example_obj_2(void)
{
lv_obj_t * obj;
obj = lv_obj_create(lv_scr_act());
lv_obj_set_size(obj, 150, 100);
lv_obj_add_event_cb(obj, drag_event_handler, LV_EVENT_PRESSING, NULL);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text(label, "Drag me");
lv_obj_center(label);
}
#endif
def drag_event_handler(e):
obj = e.get_target()
indev = lv.indev_get_act()
vect = lv.point_t()
indev.get_vect(vect)
x = obj.get_x() + vect.x
y = obj.get_y() + vect.y
obj.set_pos(x, y)
#
# Make an object dragable.
#
obj = lv.obj(lv.scr_act())
obj.set_size(150, 100)
obj.add_event_cb(drag_event_handler, lv.EVENT.PRESSING, None)
(continuesonnextpage)
6.1. Baseobject(lv_obj) 480


--- Page 485 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(obj)
label.set_text("Drag me")
label.center()
6.1.5 API
Typedefs
typedefuint16_tlv_state_t
typedefuint32_tlv_part_t
typedefuint32_tlv_obj_flag_t
typedefstruct_lv_obj_tlv_obj_t
Enums
enum[anonymous]
Possiblestatesofawidget. OR-edvaluesarepossible
Values:
enumeratorLV_STATE_DEFAULT
enumeratorLV_STATE_CHECKED
enumeratorLV_STATE_FOCUSED
enumeratorLV_STATE_FOCUS_KEY
enumeratorLV_STATE_EDITED
enumeratorLV_STATE_HOVERED
enumeratorLV_STATE_PRESSED
enumeratorLV_STATE_SCROLLED
enumeratorLV_STATE_DISABLED
6.1. Baseobject(lv_obj) 481


--- Page 486 ---


LVGLDocumentation8.3
enumeratorLV_STATE_USER_1
enumeratorLV_STATE_USER_2
enumeratorLV_STATE_USER_3
enumeratorLV_STATE_USER_4
enumeratorLV_STATE_ANY
Specialvaluecanbeusedinsomefunctionstotargetallstates
enum[anonymous]
Thepossiblepartsofwidgets. Thepartscanbeconsideredastheinternalbuildingblockofthewidgets. E.g. slider
=background+indicator+knobNotallpartsareusedbyeverywidget
Values:
enumeratorLV_PART_MAIN
Abackgroundlikerectangle
enumeratorLV_PART_SCROLLBAR
Thescrollbar(s)
enumeratorLV_PART_INDICATOR
Indicator,e.g. forslider,bar,switch,orthetickboxofthecheckbox
enumeratorLV_PART_KNOB
Likehandletograbtoadjustthevalue
enumeratorLV_PART_SELECTED
Indicatethecurrentlyselectedoptionorsection
enumeratorLV_PART_ITEMS
Usedifthewidgethasmultiplesimilarelements(e.g. tablecells)
enumeratorLV_PART_TICKS
Ticksonscalee.g. forachartormeter
enumeratorLV_PART_CURSOR
Markaspecificplacee.g. fortextarea'scursororonachart
enumeratorLV_PART_CUSTOM_FIRST
Extensionpointforcustomwidgets
enumeratorLV_PART_ANY
Specialvaluecanbeusedinsomefunctionstotargetallparts
6.1. Baseobject(lv_obj) 482


--- Page 487 ---


LVGLDocumentation8.3
enum[anonymous]
On/Offfeaturescontrollingtheobject'sbehavior. OR-edvaluesarepossible
Values:
enumeratorLV_OBJ_FLAG_HIDDEN
Maketheobjecthidden. (Likeitwasn'tthereatall)
enumeratorLV_OBJ_FLAG_CLICKABLE
Maketheobjectclickablebytheinputdevices
enumeratorLV_OBJ_FLAG_CLICK_FOCUSABLE
Addfocusedstatetotheobjectwhenclicked
enumeratorLV_OBJ_FLAG_CHECKABLE
Togglecheckedstatewhentheobjectisclicked
enumeratorLV_OBJ_FLAG_SCROLLABLE
Maketheobjectscrollable
enumeratorLV_OBJ_FLAG_SCROLL_ELASTIC
Allowscrollinginsidebutwithslowerspeed
enumeratorLV_OBJ_FLAG_SCROLL_MOMENTUM
Maketheobjectscrollfurtherwhen"thrown"
enumeratorLV_OBJ_FLAG_SCROLL_ONE
Allowscrollingonlyonesnappablechildren
enumeratorLV_OBJ_FLAG_SCROLL_CHAIN_HOR
Allowpropagatingthehorizontalscrolltoaparent
enumeratorLV_OBJ_FLAG_SCROLL_CHAIN_VER
Allowpropagatingtheverticalscrolltoaparent
enumeratorLV_OBJ_FLAG_SCROLL_CHAIN
enumeratorLV_OBJ_FLAG_SCROLL_ON_FOCUS
Automaticallyscrollobjecttomakeitvisiblewhenfocused
enumeratorLV_OBJ_FLAG_SCROLL_WITH_ARROW
Allowscrollingthefocusedobjectwitharrowkeys
enumeratorLV_OBJ_FLAG_SNAPPABLE
Ifscrollsnapisenabledontheparentitcansnaptothisobject
6.1. Baseobject(lv_obj) 483


--- Page 488 ---


LVGLDocumentation8.3
enumeratorLV_OBJ_FLAG_PRESS_LOCK
Keeptheobjectpressedevenifthepressslidfromtheobject
enumeratorLV_OBJ_FLAG_EVENT_BUBBLE
Propagatetheeventstotheparenttoo
enumeratorLV_OBJ_FLAG_GESTURE_BUBBLE
Propagatethegesturestotheparent
enumeratorLV_OBJ_FLAG_ADV_HITTEST
Allowperformingmoreaccuratehit(click)test. E.g. considerroundedcorners.
enumeratorLV_OBJ_FLAG_IGNORE_LAYOUT
Maketheobjectposition-ablebythelayouts
enumeratorLV_OBJ_FLAG_FLOATING
Donotscrolltheobjectwhentheparentscrollsandignorelayout
enumeratorLV_OBJ_FLAG_OVERFLOW_VISIBLE
Donotclipthechildren'scontenttotheparent'sboundary
enumeratorLV_OBJ_FLAG_LAYOUT_1
Customflag,freetousebylayouts
enumeratorLV_OBJ_FLAG_LAYOUT_2
Customflag,freetousebylayouts
enumeratorLV_OBJ_FLAG_WIDGET_1
Customflag,freetousebywidget
enumeratorLV_OBJ_FLAG_WIDGET_2
Customflag,freetousebywidget
enumeratorLV_OBJ_FLAG_USER_1
Customflag,freetousebyuser
enumeratorLV_OBJ_FLAG_USER_2
Customflag,freetousebyuser
enumeratorLV_OBJ_FLAG_USER_3
Customflag,freetousebyuser
enumeratorLV_OBJ_FLAG_USER_4
Customflag,freetousebyuser
6.1. Baseobject(lv_obj) 484


--- Page 489 ---


LVGLDocumentation8.3
enumlv_obj_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_obj_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_OBJ_DRAW_PART_RECTANGLE
Themainrectangle
enumeratorLV_OBJ_DRAW_PART_BORDER_POST
Theborderifstyle_border_post=true
enumeratorLV_OBJ_DRAW_PART_SCROLLBAR
Thescrollbar
Functions
voidlv_init(void)
InitializeLVGLlibrary. ShouldbecalledbeforeanyotherLVGLrelatedfunction.
voidlv_deinit(void)
Deinitthe'lv'libraryCurrentlyonlyimplementedwhennotusingcustomallocators,orGCisenabled.
boollv_is_initialized(void)
Returnswhetherthe'lv'libraryiscurrentlyinitialized
lv_obj_t*lv_obj_create(lv_obj_t*parent)
Createabaseobject(arectangle)
Parameters parent--pointertoaparentobject. IfNULLthenascreenwillbecreated.
Returns pointertothenewobject
voidlv_obj_add_flag(lv_obj_t*obj,lv_obj_flag_tf)
Setoneormoreflags
Parameters
• obj--pointertoanobject
• f--R-edvaluesfromlv_obj_flag_ttoset.
voidlv_obj_clear_flag(lv_obj_t*obj,lv_obj_flag_tf)
Clearoneormoreflags
Parameters
• obj--pointertoanobject
• f--OR-edvaluesfromlv_obj_flag_ttoset.
voidlv_obj_add_state(lv_obj_t*obj,lv_state_tstate)
Addoneormorestatestotheobject. Theotherstatebitswillremainunchanged. Ifspecifiedinthestyles,transition
animationwillbestartedfromthepreviousstatetothecurrent.
Parameters
6.1. Baseobject(lv_obj) 485


--- Page 490 ---


LVGLDocumentation8.3
• obj--pointertoanobject
• state--thestatestoadd. E.gLV_STATE_PRESSED | LV_STATE_FOCUSED
voidlv_obj_clear_state(lv_obj_t*obj,lv_state_tstate)
Remove one or more states to the object. The other state bits will remain unchanged. If specified in the styles,
transitionanimationwillbestartedfromthepreviousstatetothecurrent.
Parameters
• obj--pointertoanobject
• state--thestatestoadd. E.gLV_STATE_PRESSED | LV_STATE_FOCUSED
staticinlinevoidlv_obj_set_user_data(lv_obj_t*obj,void*user_data)
Settheuser_datafieldoftheobject
Parameters
• obj--pointertoanobject
• user_data--pointertothenewuser_data.
boollv_obj_has_flag(constlv_obj_t*obj,lv_obj_flag_tf)
Checkifagivenflagorallthegivenflagsaresetonanobject.
Parameters
• obj--pointertoanobject
• f--theflag(s)tocheck(OR-edvaluescanbeused)
Returns true: allflagsareset;false: notallflagsareset
boollv_obj_has_flag_any(constlv_obj_t*obj,lv_obj_flag_tf)
Checkifagivenflagoranyoftheflagsaresetonanobject.
Parameters
• obj--pointertoanobject
• f--theflag(s)tocheck(OR-edvaluescanbeused)
Returns true: atlestoneflagflagisset;false: noneoftheflagsareset
lv_state_tlv_obj_get_state(constlv_obj_t*obj)
Getthestateofanobject
Parameters obj--pointertoanobject
Returns thestate(OR-edvaluesfromlv_state_t)
boollv_obj_has_state(constlv_obj_t*obj,lv_state_tstate)
Checkiftheobjectisinagivenstateornot.
Parameters
• obj--pointertoanobject
• state--astateorcombinationofstatestocheck
Returns true: objisinstate;false: objisnotinstate
6.1. Baseobject(lv_obj) 486


--- Page 491 ---


LVGLDocumentation8.3
void*lv_obj_get_group(constlv_obj_t*obj)
Getthegroupoftheobject
Parameters obj--pointertoanobject
Returns thepointertogroupoftheobject
staticinlinevoid*lv_obj_get_user_data(lv_obj_t*obj)
Gettheuser_datafieldoftheobject
Parameters obj--pointertoanobject
Returns thepointertotheuser_dataoftheobject
voidlv_obj_allocate_spec_attr(lv_obj_t*obj)
Allocatespecialdataforanobjectifnotallocatedyet.
Parameters obj--pointertoanobject
boollv_obj_check_type(constlv_obj_t*obj,constlv_obj_class_t*class_p)
Checkthetypeofobj.
Parameters
• obj--pointertoanobject
• class_p--aclasstocheck(e.g. lv_slider_class)
Returns true: class_pistheobjclass.
boollv_obj_has_class(constlv_obj_t*obj,constlv_obj_class_t*class_p)
Checkifanyobjecthasagivenclass(type). Itcheckstheancestorclassestoo.
Parameters
• obj--pointertoanobject
• class_p--aclasstocheck(e.g. lv_slider_class)
Returns true: objhasthegivenclass
constlv_obj_class_t*lv_obj_get_class(constlv_obj_t*obj)
Gettheclass(type)oftheobject
Parameters obj--pointertoanobject
Returns theclass(type)oftheobject
boollv_obj_is_valid(constlv_obj_t*obj)
Checkifanyobjectisstill"alive".
Parameters obj--pointertoanobject
Returns true: valid
staticinlinelv_coord_tlv_obj_dpx(constlv_obj_t*obj,lv_coord_tn)
Scalethegivennumberofpixels(adistanceorsize)relativetoa160DPIdisplayconsideringtheDPIoftheobj's
display. Itensuresthate.g. lv_dpx(100)willhavethesamephysicalsizeregardlesstotheDPIofthedisplay.
Parameters
• obj--anobjectwhosedisplay'sdpishouldbeconsidered
• n--thenumberofpixelstoscale
Returns n x current_dpi/160
6.1. Baseobject(lv_obj) 487


--- Page 492 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_obj_class
Makethebaseobject'sclasspubliclyavailable.
struct_lv_obj_spec_attr_t
#include<lv_obj.h>Special,rarelyusedattributes. Theyareallocatedautomaticallyifanyelementsisset.
PublicMembers
struct_lv_obj_t**children
Storethepointerofthechildreninanarray.
uint32_tchild_cnt
Numberofchildren
lv_group_t*group_p
struct_lv_event_dsc_t*event_dsc
Dynamicallyallocatedeventcallbackanduserdataarray
lv_point_tscroll
ThecurrentX/Yscrolloffset
lv_coord_text_click_pad
Extraclickpaddinginalldirection
lv_coord_text_draw_size
EXTendthesizeineverydirectionfordrawing.
lv_scrollbar_mode_tscrollbar_mode
Howtodisplayscrollbars
lv_scroll_snap_tscroll_snap_x
Wheretoalignthesnappablechildrenhorizontally
lv_scroll_snap_tscroll_snap_y
Wheretoalignthesnappablechildrenvertically
lv_dir_tscroll_dir
Theallowedscrolldirection(s)
uint8_tevent_dsc_cnt
Numberofeventcallbacksstoredinevent_dscarray
6.1. Baseobject(lv_obj) 488


--- Page 493 ---


LVGLDocumentation8.3
uint8_tlayer_type
Cachethelayertypehere. Elementof@lv_intermediate_layer_type_t
struct_lv_obj_t
PublicMembers
constlv_obj_class_t*class_p
struct_lv_obj_t*parent
_lv_obj_spec_attr_t*spec_attr
_lv_obj_style_t*styles
void*user_data
lv_area_tcoords
lv_obj_flag_tflags
lv_state_tstate
uint16_tlayout_inv
uint16_treadjust_scroll_after_layout
uint16_tscr_layout_inv
uint16_tskip_trans
uint16_tstyle_cnt
uint16_th_layout
uint16_tw_layout
uint16_tbeing_deleted
6.1. Baseobject(lv_obj) 489


--- Page 494 ---


LVGLDocumentation8.3
6.2 Core widgets
6.2.1 Arc (lv_arc)
Overview
TheArcconsistsofabackgroundandaforegroundarc. Theforeground(indicator)canbetouch-adjusted.
PartsandStyles
• LV_PART_MAINDrawsabackgroundusingthetypicalbackgroundstylepropertiesandanarcusingthearcstyle
properties. Thearc'ssizeandpositionwillrespectthepaddingstyleproperties.
• LV_PART_INDICATOR Draws another arc using the arc style properties. Its padding values are interpreted
relativetothebackgroundarc.
• LV_PART_KNOBDrawsahandleontheendoftheindicatorusingallbackgroundpropertiesandpaddingvalues.
With zero padding the knob size is the same as the indicator's width. Larger padding makes it larger, smaller
paddingmakesitsmaller.
Usage
Valueandrange
A new value can be set using lv_arc_set_value(arc, new_value). The value is interpreted in a range
(minimum and maximum values) which can be modified with lv_arc_set_range(arc, min, max). The
defaultrangeis0..100.
Theindicatorarcisdrawnonthemainpart'sarc. Thisifthevalueissettomaximumtheindicatorarcwillcovertheentire
"background"arc. Tosetthestartandendangleofthebackgroundarcusethelv_arc_set_bg_angles(arc,
start_angle, end_angle)functionsorlv_arc_set_bg_start/end_angle(arc, angle).
Zerodegreesisatthemiddleright(3o'clock)oftheobjectandthedegreesareincreasinginclockwisedirection. The
anglesshouldbeinthe[0;360]range.
Rotation
Anoffsettothe0degreepositioncanbeaddedwithlv_arc_set_rotation(arc, deg).
Mode
Thearccanbeoneofthefollowingmodes:
• LV_ARC_MODE_NORMALTheindicatorarcisdrawnfromtheminimumvaluetothecurrent.
• LV_ARC_MODE_REVERSETheindicatorarcisdrawncounter-clockwisefromthemaximumvaluetothecurrent.
• LV_ARC_MODE_SYMMETRICALTheindicatorarcisdrawnfromthemiddlepointtothecurrentvalue.
The mode can be set by lv_arc_set_mode(arc, LV_ARC_MODE_...) and used only if the angle is set by
lv_arc_set_value()orthearcisadjustedbyfinger.
6.2. Corewidgets 490


--- Page 495 ---


LVGLDocumentation8.3
Changerate
Ifthearcispressedthecurrentvaluewillsetwithalimitedspeedaccordingtothesetchangerate. Thechangerateis
definedindegree/secondunitandcanbesetwithlv_arc_set_change_rage(arc, rate)
Settingtheindicatormanually
It'salsopossibletosettheanglesoftheindicatorarcdirectlywithlv_arc_set_angles(arc, start_angle,
end_angle) function or lv_arc_set_start/end_angle(arc, start_angle). In this case the set
"value"and"mode"areignored.
Inotherwords,theangleandvaluesettingsareindependent. Youshouldexclusivelyuseoneortheother. Mixingthetwo
mightresultinunintendedbehavior.
Tomakethearcnon-adjustable,removethestyleoftheknobandmaketheobjectnon-clickable:
lv_obj_remove_style(arc, NULL, LV_PART_KNOB);
lv_obj_clear_flag(arc, LV_OBJ_FLAG_CLICKABLE);
Advancedhittest
IftheLV_OBJ_FLAG_ADV_HITTESTflagisenabledthearccanbeclickedthroughinthemiddle. Clicksarerecog-
nizedonlyontheringofthebackgroundarc. lv_obj_set_ext_click_size()makesthesensitivearealarger
insideandoutsidewiththegivennumberofpixels.
Placeanotherobjecttotheknob
Another object can be positioned according to the current position of the arc in order to follow the arc's current value
(angle). Todothisuselv_arc_align_obj_to_angle(arc, obj_to_align, radius_offset).
Similarly lv_arc_rotate_obj_to_angle(arc, obj_to_rotate, radius_offset) can be used to
rotatetheobjecttothecurrentvalueofthearc.
It'satypicalusecasetocallthesefunctionsintheVALUE_CHANGEDeventofthearc.
Events
• LV_EVENT_VALUE_CHANGEDsentwhenthearcispressed/draggedtosetanewvalue.
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDaresentwiththefollowingtypes:
– LV_ARC_DRAW_PART_BACKGROUNDThebackgroundarc.
∗ part: LV_PART_MAIN
∗ p1: centerofthearc
∗ radius: radiusofthearc
∗ arc_dsc
– LV_ARC_DRAW_PART_FOREGROUNDTheforegroundarc.
∗ part: LV_PART_INDICATOR
∗ p1: centerofthearc
6.2. Corewidgets 491


--- Page 496 ---


LVGLDocumentation8.3
∗ radius: radiusofthearc
∗ arc_dsc
– LV_ARC_DRAW_PART_KNOBTheknob
∗ part: LV_PART_KNOB
∗ draw_area: theareaoftheknob
∗ rect_dsc:
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
• LV_KEY_RIGHT/UPIncreasesthevaluebyone.
• LV_KEY_LEFT/DOWNDecreasesthevaluebyone.
LearnmoreaboutKeys.
Example
SimpleArc
#include "../../lv_examples.h"
#if LV_USE_ARC && LV_BUILD_EXAMPLES
static void value_changed_event_cb(lv_event_t * e);
void lv_example_arc_1(void)
{
lv_obj_t * label = lv_label_create(lv_scr_act());
/*Create an Arc*/
lv_obj_t * arc = lv_arc_create(lv_scr_act());
lv_obj_set_size(arc, 150, 150);
lv_arc_set_rotation(arc, 135);
lv_arc_set_bg_angles(arc, 0, 270);
lv_arc_set_value(arc, 10);
lv_obj_center(arc);
lv_obj_add_event_cb(arc, value_changed_event_cb, LV_EVENT_VALUE_CHANGED, label);
/*Manually update the label for the first time*/
lv_event_send(arc, LV_EVENT_VALUE_CHANGED, NULL);
}
static void value_changed_event_cb(lv_event_t * e)
{
lv_obj_t * arc = lv_event_get_target(e);
lv_obj_t * label = lv_event_get_user_data(e);
lv_label_set_text_fmt(label, "%d%%", lv_arc_get_value(arc));
(continuesonnextpage)
6.2. Corewidgets 492


--- Page 497 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Rotate the label to the current position of the arc*/
lv_arc_rotate_obj_to_angle(arc, label, 25);
}
#endif
# Create an Arc
arc = lv.arc(lv.scr_act())
arc.set_end_angle(200)
arc.set_size(150, 150)
arc.center()
LoaderwithArc
#include "../../lv_examples.h"
#if LV_USE_ARC && LV_BUILD_EXAMPLES
static void set_angle(void * obj, int32_t v)
{
lv_arc_set_value(obj, v);
}
/**
* Create an arc which acts as a loader.
*/
void lv_example_arc_2(void)
{
/*Create an Arc*/
lv_obj_t * arc = lv_arc_create(lv_scr_act());
lv_arc_set_rotation(arc, 270);
lv_arc_set_bg_angles(arc, 0, 360);
lv_obj_remove_style(arc, NULL, LV_PART_KNOB); /*Be sure the knob is not␣
,→displayed*/
lv_obj_clear_flag(arc, LV_OBJ_FLAG_CLICKABLE); /*To not allow adjusting by␣
,→click*/
lv_obj_center(arc);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, arc);
lv_anim_set_exec_cb(&a, set_angle);
lv_anim_set_time(&a, 1000);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE); /*Just for the demo*/
lv_anim_set_repeat_delay(&a, 500);
lv_anim_set_values(&a, 0, 100);
lv_anim_start(&a);
}
#endif
6.2. Corewidgets 493


--- Page 498 ---


LVGLDocumentation8.3
#
# An `lv_timer` to call periodically to set the angles of the arc
#
class ArcLoader():
def __init__(self):
self.a = 270
def arc_loader_cb(self,tim,arc):
# print(tim,arc)
self.a += 5
arc.set_end_angle(self.a)
if self.a >= 270 + 360:
tim._del()
#
# Create an arc which acts as a loader.
#
# Create an Arc
arc = lv.arc(lv.scr_act())
arc.set_bg_angles(0, 360)
arc.set_angles(270, 270)
arc.center()
# create the loader
arc_loader = ArcLoader()
# Create an `lv_timer` to update the arc.
timer = lv.timer_create_basic()
timer.set_period(20)
timer.set_cb(lambda src: arc_loader.arc_loader_cb(timer,arc))
API
Typedefs
typedefuint8_tlv_arc_mode_t
6.2. Corewidgets 494


--- Page 499 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Values:
enumeratorLV_ARC_MODE_NORMAL
enumeratorLV_ARC_MODE_SYMMETRICAL
enumeratorLV_ARC_MODE_REVERSE
enumlv_arc_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_arc_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_ARC_DRAW_PART_BACKGROUND
Thebackgroundarc
enumeratorLV_ARC_DRAW_PART_FOREGROUND
Theforegroundarc
enumeratorLV_ARC_DRAW_PART_KNOB
Theknob
Functions
lv_obj_t*lv_arc_create(lv_obj_t*parent)
Createanarcobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewarc
Returns pointertothecreatedarc
voidlv_arc_set_start_angle(lv_obj_t*obj,uint16_tstart)
Setthestartangleofanarc. 0deg: right,90bottom,etc.
Parameters
• obj--pointertoanarcobject
• start--thestartangle
voidlv_arc_set_end_angle(lv_obj_t*obj,uint16_tend)
Settheendangleofanarc. 0deg: right,90bottom,etc.
Parameters
• obj--pointertoanarcobject
• end--theendangle
6.2. Corewidgets 495


--- Page 500 ---


LVGLDocumentation8.3
voidlv_arc_set_angles(lv_obj_t*obj,uint16_tstart,uint16_tend)
Setthestartandendangles
Parameters
• obj--pointertoanarcobject
• start--thestartangle
• end--theendangle
voidlv_arc_set_bg_start_angle(lv_obj_t*obj,uint16_tstart)
Setthestartangleofanarcbackground. 0deg: right,90bottom,etc.
Parameters
• obj--pointertoanarcobject
• start--thestartangle
voidlv_arc_set_bg_end_angle(lv_obj_t*obj,uint16_tend)
Setthestartangleofanarcbackground. 0deg: right,90bottometc.
Parameters
• obj--pointertoanarcobject
• end--theendangle
voidlv_arc_set_bg_angles(lv_obj_t*obj,uint16_tstart,uint16_tend)
Setthestartandendanglesofthearcbackground
Parameters
• obj--pointertoanarcobject
• start--thestartangle
• end--theendangle
voidlv_arc_set_rotation(lv_obj_t*obj,uint16_trotation)
Settherotationforthewholearc
Parameters
• obj--pointertoanarcobject
• rotation--rotationangle
voidlv_arc_set_mode(lv_obj_t*obj,lv_arc_mode_ttype)
Setthetypeofarc.
Parameters
• obj--pointertoarcobject
• mode--arc'smode
voidlv_arc_set_value(lv_obj_t*obj,int16_tvalue)
Setanewvalueonthearc
Parameters
• obj--pointertoanarcobject
• value--newvalue
6.2. Corewidgets 496


--- Page 501 ---


LVGLDocumentation8.3
voidlv_arc_set_range(lv_obj_t*obj,int16_tmin,int16_tmax)
Setminimumandthemaximumvaluesofanarc
Parameters
• obj--pointertothearcobject
• min--minimumvalue
• max--maximumvalue
voidlv_arc_set_change_rate(lv_obj_t*obj,uint16_trate)
Setachangeratetolimitthespeedhowfastthearcshouldreachthepressedpoint.
Parameters
• obj--pointertoanarcobject
• rate--thechangerate
uint16_tlv_arc_get_angle_start(lv_obj_t*obj)
Getthestartangleofanarc.
Parameters obj--pointertoanarcobject
Returns thestartangle[0..360]
uint16_tlv_arc_get_angle_end(lv_obj_t*obj)
Gettheendangleofanarc.
Parameters obj--pointertoanarcobject
Returns theendangle[0..360]
uint16_tlv_arc_get_bg_angle_start(lv_obj_t*obj)
Getthestartangleofanarcbackground.
Parameters obj--pointertoanarcobject
Returns thestartangle[0..360]
uint16_tlv_arc_get_bg_angle_end(lv_obj_t*obj)
Gettheendangleofanarcbackground.
Parameters obj--pointertoanarcobject
Returns theendangle[0..360]
int16_tlv_arc_get_value(constlv_obj_t*obj)
Getthevalueofanarc
Parameters obj--pointertoanarcobject
Returns thevalueofthearc
int16_tlv_arc_get_min_value(constlv_obj_t*obj)
Gettheminimumvalueofanarc
Parameters obj--pointertoanarcobject
Returns theminimumvalueofthearc
6.2. Corewidgets 497


--- Page 502 ---


LVGLDocumentation8.3
int16_tlv_arc_get_max_value(constlv_obj_t*obj)
Getthemaximumvalueofanarc
Parameters obj--pointertoanarcobject
Returns themaximumvalueofthearc
lv_arc_mode_tlv_arc_get_mode(constlv_obj_t*obj)
Getwhetherthearcistypeornot.
Parameters obj--pointertoanarcobject
Returns arc'smode
voidlv_arc_align_obj_to_angle(constlv_obj_t*obj,lv_obj_t*obj_to_align,lv_coord_tr_offset)
Alignanobjecttothecurrentpositionofthearc(knob)
Parameters
• obj--pointertoanarcobject
• obj_to_align--pointertoanobjecttoalign
• r_offset--considertheradiuslargerwiththisvalue(<0: forsmallerradius)
voidlv_arc_rotate_obj_to_angle(constlv_obj_t*obj,lv_obj_t*obj_to_rotate,lv_coord_tr_offset)
Rotateanobjecttothecurrentpositionofthearc(knob)
Parameters
• obj--pointertoanarcobject
• obj_to_align--pointertoanobjecttorotate
• r_offset--considertheradiuslargerwiththisvalue(<0: forsmallerradius)
Variables
constlv_obj_class_tlv_arc_class
structlv_arc_t
PublicMembers
lv_obj_tobj
uint16_trotation
uint16_tindic_angle_start
uint16_tindic_angle_end
uint16_tbg_angle_start
6.2. Corewidgets 498


--- Page 503 ---


LVGLDocumentation8.3
uint16_tbg_angle_end
int16_tvalue
int16_tmin_value
int16_tmax_value
uint32_tdragging
uint32_ttype
uint32_tmin_close
uint32_tin_out
uint32_tchg_rate
uint32_tlast_tick
int16_tlast_angle
6.2.2 Bar (lv_bar)
Overview
Thebarobjecthasabackgroundandanindicatoronit. Thewidthoftheindicatorissetaccordingtothecurrentvalue
ofthebar.
Verticalbarscanbecreatedifthewidthoftheobjectissmallerthanitsheight.
Notonlytheend,butalsothestartvalueofthebarcanbeset,whichchangesthestartpositionoftheindicator.
PartsandStyles
• LV_PART_MAINThebackgroundofthebaranditusesthetypicalbackgroundstyleproperties. Addingpadding
makes the indicator smaller or larger. The anim_time style property sets the animation time if the values set
withLV_ANIM_ON.
• LV_PART_INDICATORTheindicatoritself;alsousesallthetypicalbackgroundproperties.
6.2. Corewidgets 499


--- Page 504 ---


LVGLDocumentation8.3
Usage
Valueandrange
Anewvaluecanbesetbylv_bar_set_value(bar, new_value, LV_ANIM_ON/OFF).Thevalueisinter-
pretedinarange(minimumandmaximumvalues)whichcanbemodifiedwithlv_bar_set_range(bar, min,
max). Thedefaultrangeis0..100.
The new value in lv_bar_set_value can be set with or without an animation depending on the last parameter
(LV_ANIM_ON/OFF).
Modes
Thebarcanbeoneofthefollowingmodes:
• LV_BAR_MODE_NORMALAnormalbarasdescribedabove
• LV_BAR_MODE_SYMMETRICALDrawtheindicatorfromthezerovaluetocurrentvalue. Requiresanegative
minimumrangeandpositivemaximumrange.
• LV_BAR_MODE_RANGE Allows setting the start value too by lv_bar_set_start_value(bar,
new_value, LV_ANIM_ON/OFF).Thestartvaluealwayshastobesmallerthantheendvalue.
Events
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDaresentforthefollowingparts:
– LV_BAR_DRAW_PART_INDICATORTheindicatorofthebar
∗ part: LV_PART_INDICATOR
∗ draw_area: areaoftheindicator
∗ rect_dsc
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
SimpleBar
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
void lv_example_bar_1(void)
{
lv_obj_t * bar1 = lv_bar_create(lv_scr_act());
(continuesonnextpage)
6.2. Corewidgets 500


--- Page 505 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(bar1, 200, 20);
lv_obj_center(bar1);
lv_bar_set_value(bar1, 70, LV_ANIM_OFF);
}
#endif
bar1 = lv.bar(lv.scr_act())
bar1.set_size(200, 20)
bar1.center()
bar1.set_value(70, lv.ANIM.OFF)
Stylingabar
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
/**
* Example of styling the bar
*/
void lv_example_bar_2(void)
{
static lv_style_t style_bg;
static lv_style_t style_indic;
lv_style_init(&style_bg);
lv_style_set_border_color(&style_bg, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_border_width(&style_bg, 2);
lv_style_set_pad_all(&style_bg, 6); /*To make the indicator smaller*/
lv_style_set_radius(&style_bg, 6);
lv_style_set_anim_time(&style_bg, 1000);
lv_style_init(&style_indic);
lv_style_set_bg_opa(&style_indic, LV_OPA_COVER);
lv_style_set_bg_color(&style_indic, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_radius(&style_indic, 3);
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_remove_style_all(bar); /*To have a clean start*/
lv_obj_add_style(bar, &style_bg, 0);
lv_obj_add_style(bar, &style_indic, LV_PART_INDICATOR);
lv_obj_set_size(bar, 200, 20);
lv_obj_center(bar);
lv_bar_set_value(bar, 100, LV_ANIM_ON);
}
#endif
#
# Example of styling the bar
#
style_bg = lv.style_t()
(continuesonnextpage)
6.2. Corewidgets 501


--- Page 506 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_indic = lv.style_t()
style_bg.init()
style_bg.set_border_color(lv.palette_main(lv.PALETTE.BLUE))
style_bg.set_border_width(2)
style_bg.set_pad_all(6) # To make the indicator smaller
style_bg.set_radius(6)
style_bg.set_anim_time(1000)
style_indic.init()
style_indic.set_bg_opa(lv.OPA.COVER)
style_indic.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style_indic.set_radius(3)
bar = lv.bar(lv.scr_act())
bar.remove_style_all() # To have a clean start
bar.add_style(style_bg, 0)
bar.add_style(style_indic, lv.PART.INDICATOR)
bar.set_size(200, 20)
bar.center()
bar.set_value(100, lv.ANIM.ON)
Temperaturemeter
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
static void set_temp(void * bar, int32_t temp)
{
lv_bar_set_value(bar, temp, LV_ANIM_ON);
}
/**
* A temperature meter example
*/
void lv_example_bar_3(void)
{
static lv_style_t style_indic;
lv_style_init(&style_indic);
lv_style_set_bg_opa(&style_indic, LV_OPA_COVER);
lv_style_set_bg_color(&style_indic, lv_palette_main(LV_PALETTE_RED));
lv_style_set_bg_grad_color(&style_indic, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_bg_grad_dir(&style_indic, LV_GRAD_DIR_VER);
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_add_style(bar, &style_indic, LV_PART_INDICATOR);
lv_obj_set_size(bar, 20, 200);
lv_obj_center(bar);
lv_bar_set_range(bar, -20, 40);
lv_anim_t a;
(continuesonnextpage)
6.2. Corewidgets 502


--- Page 507 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_temp);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 3000);
lv_anim_set_var(&a, bar);
lv_anim_set_values(&a, -20, 40);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
def set_temp(bar, temp):
bar.set_value(temp, lv.ANIM.ON)
#
# A temperature meter example
#
style_indic = lv.style_t()
style_indic.init()
style_indic.set_bg_opa(lv.OPA.COVER)
style_indic.set_bg_color(lv.palette_main(lv.PALETTE.RED))
style_indic.set_bg_grad_color(lv.palette_main(lv.PALETTE.BLUE))
style_indic.set_bg_grad_dir(lv.GRAD_DIR.VER)
bar = lv.bar(lv.scr_act())
bar.add_style(style_indic, lv.PART.INDICATOR)
bar.set_size(20, 200)
bar.center()
bar.set_range(-20, 40)
a = lv.anim_t()
a.init()
a.set_time(3000)
a.set_playback_time(3000)
a.set_var(bar)
a.set_values(-20, 40)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a.set_custom_exec_cb(lambda a, val: set_temp(bar,val))
lv.anim_t.start(a)
6.2. Corewidgets 503


--- Page 508 ---


LVGLDocumentation8.3
Stripepatternandrangevalue
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
/**
* Bar with stripe pattern and ranged value
*/
void lv_example_bar_4(void)
{
LV_IMG_DECLARE(img_skew_strip);
static lv_style_t style_indic;
lv_style_init(&style_indic);
lv_style_set_bg_img_src(&style_indic, &img_skew_strip);
lv_style_set_bg_img_tiled(&style_indic, true);
lv_style_set_bg_img_opa(&style_indic, LV_OPA_30);
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_add_style(bar, &style_indic, LV_PART_INDICATOR);
lv_obj_set_size(bar, 260, 20);
lv_obj_center(bar);
lv_bar_set_mode(bar, LV_BAR_MODE_RANGE);
lv_bar_set_value(bar, 90, LV_ANIM_OFF);
lv_bar_set_start_value(bar, 20, LV_ANIM_OFF);
}
#endif
#
# get an icon
#
def get_icon(filename,xres,yres):
try:
sdl_filename = "../../assets/" + filename + "_" + str(xres) + "x" + str(yres)␣
,→+ "_argb8888.fnt"
print("file name: ", sdl_filename)
with open(sdl_filename,'rb') as f:
icon_data = f.read()
except:
print("Could not find image file: " + filename)
return None
icon_dsc = lv.img_dsc_t(
{
"header": {"always_zero": 0, "w": xres, "h": yres, "cf": lv.img.CF.TRUE_
,→COLOR_ALPHA},
"data": icon_data,
"data_size": len(icon_data),
}
)
return icon_dsc
#
# Bar with stripe pattern and ranged value
#
(continuesonnextpage)
6.2. Corewidgets 504


--- Page 509 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
img_skew_strip_dsc = get_icon("img_skew_strip",80,20)
style_indic = lv.style_t()
style_indic.init()
style_indic.set_bg_img_src(img_skew_strip_dsc)
style_indic.set_bg_img_tiled(True)
style_indic.set_bg_img_opa(lv.OPA._30)
bar = lv.bar(lv.scr_act())
bar.add_style(style_indic, lv.PART.INDICATOR)
bar.set_size(260, 20)
bar.center()
bar.set_mode(lv.bar.MODE.RANGE)
bar.set_value(90, lv.ANIM.OFF)
bar.set_start_value(20, lv.ANIM.OFF)
BarwithLTRandRTLbasedirection
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
/**
* Bar with LTR and RTL base direction
*/
void lv_example_bar_5(void)
{
lv_obj_t * label;
lv_obj_t * bar_ltr = lv_bar_create(lv_scr_act());
lv_obj_set_size(bar_ltr, 200, 20);
lv_bar_set_value(bar_ltr, 70, LV_ANIM_OFF);
lv_obj_align(bar_ltr, LV_ALIGN_CENTER, 0, -30);
label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Left to Right base direction");
lv_obj_align_to(label, bar_ltr, LV_ALIGN_OUT_TOP_MID, 0, -5);
lv_obj_t * bar_rtl = lv_bar_create(lv_scr_act());
lv_obj_set_style_base_dir(bar_rtl, LV_BASE_DIR_RTL, 0);
lv_obj_set_size(bar_rtl, 200, 20);
lv_bar_set_value(bar_rtl, 70, LV_ANIM_OFF);
lv_obj_align(bar_rtl, LV_ALIGN_CENTER, 0, 30);
label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Right to Left base direction");
lv_obj_align_to(label, bar_rtl, LV_ALIGN_OUT_TOP_MID, 0, -5);
}
#endif
6.2. Corewidgets 505


--- Page 510 ---


LVGLDocumentation8.3
#
# Bar with LTR and RTL base direction
#
bar_ltr = lv.bar(lv.scr_act())
bar_ltr.set_size(200, 20)
bar_ltr.set_value(70, lv.ANIM.OFF)
bar_ltr.align(lv.ALIGN.CENTER, 0, -30)
label = lv.label(lv.scr_act())
label.set_text("Left to Right base direction")
label.align_to(bar_ltr, lv.ALIGN.OUT_TOP_MID, 0, -5)
bar_rtl = lv.bar(lv.scr_act())
bar_rtl.set_style_base_dir(lv.BASE_DIR.RTL,0)
bar_rtl.set_size(200, 20)
bar_rtl.set_value(70, lv.ANIM.OFF)
bar_rtl.align(lv.ALIGN.CENTER, 0, 30)
label = lv.label(lv.scr_act())
label.set_text("Right to Left base direction")
label.align_to(bar_rtl, lv.ALIGN.OUT_TOP_MID, 0, -5)
Customdrawertoshowthecurrentvalue
#include "../../lv_examples.h"
#if LV_USE_BAR && LV_BUILD_EXAMPLES
static void set_value(void * bar, int32_t v)
{
lv_bar_set_value(bar, v, LV_ANIM_OFF);
}
static void event_cb(lv_event_t * e)
{
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part != LV_PART_INDICATOR) return;
lv_obj_t * obj = lv_event_get_target(e);
lv_draw_label_dsc_t label_dsc;
lv_draw_label_dsc_init(&label_dsc);
label_dsc.font = LV_FONT_DEFAULT;
char buf[8];
lv_snprintf(buf, sizeof(buf), "%d", (int)lv_bar_get_value(obj));
lv_point_t txt_size;
lv_txt_get_size(&txt_size, buf, label_dsc.font, label_dsc.letter_space, label_dsc.
,→line_space, LV_COORD_MAX,
label_dsc.flag);
lv_area_t txt_area;
/*If the indicator is long enough put the text inside on the right*/
if(lv_area_get_width(dsc->draw_area) > txt_size.x + 20) {
(continuesonnextpage)
6.2. Corewidgets 506


--- Page 511 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
txt_area.x2 = dsc->draw_area->x2 - 5;
txt_area.x1 = txt_area.x2 - txt_size.x + 1;
label_dsc.color = lv_color_white();
}
/*If the indicator is still short put the text out of it on the right*/
else {
txt_area.x1 = dsc->draw_area->x2 + 5;
txt_area.x2 = txt_area.x1 + txt_size.x - 1;
label_dsc.color = lv_color_black();
}
txt_area.y1 = dsc->draw_area->y1 + (lv_area_get_height(dsc->draw_area) - txt_size.
,→y) / 2;
txt_area.y2 = txt_area.y1 + txt_size.y - 1;
lv_draw_label(dsc->draw_ctx, &label_dsc, &txt_area, buf, NULL);
}
/**
* Custom drawer on the bar to display the current value
*/
void lv_example_bar_6(void)
{
lv_obj_t * bar = lv_bar_create(lv_scr_act());
lv_obj_add_event_cb(bar, event_cb, LV_EVENT_DRAW_PART_END, NULL);
lv_obj_set_size(bar, 200, 20);
lv_obj_center(bar);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, bar);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_time(&a, 2000);
lv_anim_set_playback_time(&a, 2000);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
def set_value(bar, v):
bar.set_value(v, lv.ANIM.OFF)
def event_cb(e):
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if dsc.part != lv.PART.INDICATOR:
return
obj= e.get_target()
label_dsc = lv.draw_label_dsc_t()
label_dsc.init()
# label_dsc.font = LV_FONT_DEFAULT;
(continuesonnextpage)
6.2. Corewidgets 507


--- Page 512 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
value_txt = str(obj.get_value())
txt_size = lv.point_t()
lv.txt_get_size(txt_size, value_txt, label_dsc.font, label_dsc.letter_space,␣
,→label_dsc.line_space, lv.COORD.MAX, label_dsc.flag)
txt_area = lv.area_t()
# If the indicator is long enough put the text inside on the right
if dsc.draw_area.get_width() > txt_size.x + 20:
txt_area.x2 = dsc.draw_area.x2 - 5
txt_area.x1 = txt_area.x2 - txt_size.x + 1
label_dsc.color = lv.color_white()
# If the indicator is still short put the text out of it on the right*/
else:
txt_area.x1 = dsc.draw_area.x2 + 5
txt_area.x2 = txt_area.x1 + txt_size.x - 1
label_dsc.color = lv.color_black()
txt_area.y1 = dsc.draw_area.y1 + (dsc.draw_area.get_height() - txt_size.y) // 2
txt_area.y2 = txt_area.y1 + txt_size.y - 1
dsc.draw_ctx.label(label_dsc, txt_area, value_txt, None)
#
# Custom drawer on the bar to display the current value
#
bar = lv.bar(lv.scr_act())
bar.add_event_cb(event_cb, lv.EVENT.DRAW_PART_END, None)
bar.set_size(200, 20)
bar.center()
a = lv.anim_t()
a.init()
a.set_var(bar)
a.set_values(0, 100)
a.set_custom_exec_cb(lambda a,val: set_value(bar,val))
a.set_time(2000)
a.set_playback_time(2000)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
lv.anim_t.start(a)
API
Typedefs
typedefuint8_tlv_bar_mode_t
6.2. Corewidgets 508


--- Page 513 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Values:
enumeratorLV_BAR_MODE_NORMAL
enumeratorLV_BAR_MODE_SYMMETRICAL
enumeratorLV_BAR_MODE_RANGE
enumlv_bar_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_bar_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_BAR_DRAW_PART_INDICATOR
Theindicator
Functions
lv_obj_t*lv_bar_create(lv_obj_t*parent)
Createabarobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewbar
Returns pointertothecreatedbar
voidlv_bar_set_value(lv_obj_t*obj,int32_tvalue,lv_anim_enable_tanim)
Setanewvalueonthebar
Parameters
• bar--pointertoabarobject
• value--newvalue
• anim--LV_ANIM_ON:setthevaluewithananimation;LV_ANIM_OFF:changethevalue
immediately
voidlv_bar_set_start_value(lv_obj_t*obj,int32_tstart_value,lv_anim_enable_tanim)
Setanewstartvalueonthebar
Parameters
• obj--pointertoabarobject
• value--newstartvalue
• anim--LV_ANIM_ON:setthevaluewithananimation;LV_ANIM_OFF:changethevalue
immediately
6.2. Corewidgets 509


--- Page 514 ---


LVGLDocumentation8.3
voidlv_bar_set_range(lv_obj_t*obj,int32_tmin,int32_tmax)
Setminimumandthemaximumvaluesofabar
Parameters
• obj--pointertothebarobject
• min--minimumvalue
• max--maximumvalue
voidlv_bar_set_mode(lv_obj_t*obj,lv_bar_mode_tmode)
Setthetypeofbar.
Parameters
• obj--pointertobarobject
• mode--bartypefrom::lv_bar_mode_t
int32_tlv_bar_get_value(constlv_obj_t*obj)
Getthevalueofabar
Parameters obj--pointertoabarobject
Returns thevalueofthebar
int32_tlv_bar_get_start_value(constlv_obj_t*obj)
Getthestartvalueofabar
Parameters obj--pointertoabarobject
Returns thestartvalueofthebar
int32_tlv_bar_get_min_value(constlv_obj_t*obj)
Gettheminimumvalueofabar
Parameters obj--pointertoabarobject
Returns theminimumvalueofthebar
int32_tlv_bar_get_max_value(constlv_obj_t*obj)
Getthemaximumvalueofabar
Parameters obj--pointertoabarobject
Returns themaximumvalueofthebar
lv_bar_mode_tlv_bar_get_mode(lv_obj_t*obj)
Getthetypeofbar.
Parameters obj--pointertobarobject
Returns bartypefrom::lv_bar_mode_t
6.2. Corewidgets 510


--- Page 515 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_bar_class
struct_lv_bar_anim_t
PublicMembers
lv_obj_t*bar
int32_tanim_start
int32_tanim_end
int32_tanim_state
structlv_bar_t
PublicMembers
lv_obj_tobj
int32_tcur_value
Currentvalueofthebar
int32_tmin_value
Minimumvalueofthebar
int32_tmax_value
Maximumvalueofthebar
int32_tstart_value
Startvalueofthebar
lv_area_tindic_area
Savetheindicatorarea. Mightbeusedbyderivedtypes
_lv_bar_anim_tcur_value_anim
_lv_bar_anim_tstart_value_anim
lv_bar_mode_tmode
Typeofbar
6.2. Corewidgets 511


--- Page 516 ---


LVGLDocumentation8.3
6.2.3 Button (lv_btn)
Overview
Buttons have no new features compared to the Base object. They are useful for semantic purposes and have slightly
differentdefaultsettings.
Buttons,bydefault,differfromBaseobjectinthefollowingways:
• Notscrollable
• Addedtothedefaultgroup
• DefaultheightandwidthsettoLV_SIZE_CONTENT
PartsandStyles
• LV_PART_MAINThebackgroundofthebutton. Usesthetypicalbackgroundstyleproperties.
Usage
TherearenonewfeaturescomparedtoBaseobject.
Events
• LV_EVENT_VALUE_CHANGED when the LV_OBJ_FLAG_CHECKABLE flag is enabled and the object is
clicked. Theeventhappensontransitionto/fromthecheckedstate.
LearnmoreaboutEvents.
Keys
NotethatthestateofLV_KEY_ENTERistranslatedtoLV_EVENT_PRESSED/PRESSING/RELEASEDetc.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutKeys.
Example
SimpleButtons
#include "../../lv_examples.h"
#if LV_USE_BTN && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED) {
LV_LOG_USER("Clicked");
}
else if(code == LV_EVENT_VALUE_CHANGED) {
(continuesonnextpage)
6.2. Corewidgets 512


--- Page 517 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
LV_LOG_USER("Toggled");
}
}
void lv_example_btn_1(void)
{
lv_obj_t * label;
lv_obj_t * btn1 = lv_btn_create(lv_scr_act());
lv_obj_add_event_cb(btn1, event_handler, LV_EVENT_ALL, NULL);
lv_obj_align(btn1, LV_ALIGN_CENTER, 0, -40);
label = lv_label_create(btn1);
lv_label_set_text(label, "Button");
lv_obj_center(label);
lv_obj_t * btn2 = lv_btn_create(lv_scr_act());
lv_obj_add_event_cb(btn2, event_handler, LV_EVENT_ALL, NULL);
lv_obj_align(btn2, LV_ALIGN_CENTER, 0, 40);
lv_obj_add_flag(btn2, LV_OBJ_FLAG_CHECKABLE);
lv_obj_set_height(btn2, LV_SIZE_CONTENT);
label = lv_label_create(btn2);
lv_label_set_text(label, "Toggle");
lv_obj_center(label);
}
#endif
def event_handler(evt):
code = evt.get_code()
if code == lv.EVENT.CLICKED:
print("Clicked event seen")
elif code == lv.EVENT.VALUE_CHANGED:
print("Value changed seen")
# create a simple button
btn1 = lv.btn(lv.scr_act())
# attach the callback
btn1.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn1.align(lv.ALIGN.CENTER,0,-40)
label=lv.label(btn1)
label.set_text("Button")
# create a toggle button
btn2 = lv.btn(lv.scr_act())
# attach the callback
#btn2.add_event_cb(event_handler,lv.EVENT.VALUE_CHANGED,None)
btn2.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn2.align(lv.ALIGN.CENTER,0,40)
btn2.add_flag(lv.obj.FLAG.CHECKABLE)
btn2.set_height(lv.SIZE.CONTENT)
(continuesonnextpage)
6.2. Corewidgets 513


--- Page 518 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label=lv.label(btn2)
label.set_text("Toggle")
label.center()
Stylingbuttons
#include "../../lv_examples.h"
#if LV_USE_BTN && LV_BUILD_EXAMPLES
/**
* Style a button from scratch
*/
void lv_example_btn_2(void)
{
/*Init the style for the default state*/
static lv_style_t style;
lv_style_init(&style);
lv_style_set_radius(&style, 3);
lv_style_set_bg_opa(&style, LV_OPA_100);
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_bg_grad_color(&style, lv_palette_darken(LV_PALETTE_BLUE, 2));
lv_style_set_bg_grad_dir(&style, LV_GRAD_DIR_VER);
lv_style_set_border_opa(&style, LV_OPA_40);
lv_style_set_border_width(&style, 2);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_shadow_width(&style, 8);
lv_style_set_shadow_color(&style, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_shadow_ofs_y(&style, 8);
lv_style_set_outline_opa(&style, LV_OPA_COVER);
lv_style_set_outline_color(&style, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_text_color(&style, lv_color_white());
lv_style_set_pad_all(&style, 10);
/*Init the pressed style*/
static lv_style_t style_pr;
lv_style_init(&style_pr);
/*Add a large outline when pressed*/
lv_style_set_outline_width(&style_pr, 30);
lv_style_set_outline_opa(&style_pr, LV_OPA_TRANSP);
lv_style_set_translate_y(&style_pr, 5);
lv_style_set_shadow_ofs_y(&style_pr, 3);
lv_style_set_bg_color(&style_pr, lv_palette_darken(LV_PALETTE_BLUE, 2));
lv_style_set_bg_grad_color(&style_pr, lv_palette_darken(LV_PALETTE_BLUE, 4));
/*Add a transition to the outline*/
(continuesonnextpage)
6.2. Corewidgets 514


--- Page 519 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static lv_style_transition_dsc_t trans;
static lv_style_prop_t props[] = {LV_STYLE_OUTLINE_WIDTH, LV_STYLE_OUTLINE_OPA, 0}
,→;
lv_style_transition_dsc_init(&trans, props, lv_anim_path_linear, 300, 0, NULL);
lv_style_set_transition(&style_pr, &trans);
lv_obj_t * btn1 = lv_btn_create(lv_scr_act());
lv_obj_remove_style_all(btn1); /*Remove the style coming␣
,→from the theme*/
lv_obj_add_style(btn1, &style, 0);
lv_obj_add_style(btn1, &style_pr, LV_STATE_PRESSED);
lv_obj_set_size(btn1, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_center(btn1);
lv_obj_t * label = lv_label_create(btn1);
lv_label_set_text(label, "Button");
lv_obj_center(label);
}
#endif
#
# Style a button from scratch
#
# Init the style for the default state
style = lv.style_t()
style.init()
style.set_radius(3)
style.set_bg_opa(lv.OPA.COVER)
style.set_bg_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_bg_grad_color(lv.palette_darken(lv.PALETTE.BLUE, 2))
style.set_bg_grad_dir(lv.GRAD_DIR.VER)
style.set_border_opa(lv.OPA._40)
style.set_border_width(2)
style.set_border_color(lv.palette_main(lv.PALETTE.GREY))
style.set_shadow_width(8)
style.set_shadow_color(lv.palette_main(lv.PALETTE.GREY))
style.set_shadow_ofs_y(8)
style.set_outline_opa(lv.OPA.COVER)
style.set_outline_color(lv.palette_main(lv.PALETTE.BLUE))
style.set_text_color(lv.color_white())
style.set_pad_all(10)
# Init the pressed style
style_pr = lv.style_t()
style_pr.init()
# Add a large outline when pressed
style_pr.set_outline_width(30)
(continuesonnextpage)
6.2. Corewidgets 515


--- Page 520 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_pr.set_outline_opa(lv.OPA.TRANSP)
style_pr.set_translate_y(5)
style_pr.set_shadow_ofs_y(3)
style_pr.set_bg_color(lv.palette_darken(lv.PALETTE.BLUE, 2))
style_pr.set_bg_grad_color(lv.palette_darken(lv.PALETTE.BLUE, 4))
# Add a transition to the outline
trans = lv.style_transition_dsc_t()
props = [lv.STYLE.OUTLINE_WIDTH, lv.STYLE.OUTLINE_OPA, 0]
trans.init(props, lv.anim_t.path_linear, 300, 0, None)
style_pr.set_transition(trans)
btn1 = lv.btn(lv.scr_act())
btn1.remove_style_all() # Remove the style coming from the␣
,→theme
btn1.add_style(style, 0)
btn1.add_style(style_pr, lv.STATE.PRESSED)
btn1.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
btn1.center()
label = lv.label(btn1)
label.set_text("Button")
label.center()
Gummybutton
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_BTN
/**
* Create a style transition on a button to act like a gum when clicked
*/
void lv_example_btn_3(void)
{
/*Properties to transition*/
static lv_style_prop_t props[] = {
LV_STYLE_TRANSFORM_WIDTH, LV_STYLE_TRANSFORM_HEIGHT, LV_STYLE_TEXT_LETTER_
,→SPACE, 0
};
/*Transition descriptor when going back to the default state.
*Add some delay to be sure the press transition is visible even if the press was␣
,→very short*/
static lv_style_transition_dsc_t transition_dsc_def;
lv_style_transition_dsc_init(&transition_dsc_def, props, lv_anim_path_overshoot,␣
,→250, 100, NULL);
/*Transition descriptor when going to pressed state.
*No delay, go to presses state immediately*/
static lv_style_transition_dsc_t transition_dsc_pr;
lv_style_transition_dsc_init(&transition_dsc_pr, props, lv_anim_path_ease_in_out,␣
,→250, 0, NULL);
(continuesonnextpage)
6.2. Corewidgets 516


--- Page 521 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Add only the new transition to he default state*/
static lv_style_t style_def;
lv_style_init(&style_def);
lv_style_set_transition(&style_def, &transition_dsc_def);
/*Add the transition and some transformation to the presses state.*/
static lv_style_t style_pr;
lv_style_init(&style_pr);
lv_style_set_transform_width(&style_pr, 10);
lv_style_set_transform_height(&style_pr, -10);
lv_style_set_text_letter_space(&style_pr, 10);
lv_style_set_transition(&style_pr, &transition_dsc_pr);
lv_obj_t * btn1 = lv_btn_create(lv_scr_act());
lv_obj_align(btn1, LV_ALIGN_CENTER, 0, -80);
lv_obj_add_style(btn1, &style_pr, LV_STATE_PRESSED);
lv_obj_add_style(btn1, &style_def, 0);
lv_obj_t * label = lv_label_create(btn1);
lv_label_set_text(label, "Gum");
}
#endif
#
# Create a style transition on a button to act like a gum when clicked
#
# Properties to transition
props = [lv.STYLE.TRANSFORM_WIDTH, lv.STYLE.TRANSFORM_HEIGHT, lv.STYLE.TEXT_LETTER_
,→SPACE, 0]
# Transition descriptor when going back to the default state.
# Add some delay to be sure the press transition is visible even if the press was␣
,→very short*/
transition_dsc_def = lv.style_transition_dsc_t()
transition_dsc_def.init(props, lv.anim_t.path_overshoot, 250, 100, None)
# Transition descriptor when going to pressed state.
# No delay, go to pressed state immediately
transition_dsc_pr = lv.style_transition_dsc_t()
transition_dsc_pr.init(props, lv.anim_t.path_ease_in_out, 250, 0, None)
# Add only the new transition to the default state
style_def = lv.style_t()
style_def.init()
style_def.set_transition(transition_dsc_def)
# Add the transition and some transformation to the presses state.
style_pr = lv.style_t()
style_pr.init()
style_pr.set_transform_width(10)
style_pr.set_transform_height(-10)
style_pr.set_text_letter_space(10)
style_pr.set_transition(transition_dsc_pr)
(continuesonnextpage)
6.2. Corewidgets 517


--- Page 522 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn1 = lv.btn(lv.scr_act())
btn1.align(lv.ALIGN.CENTER, 0, -80)
btn1.add_style(style_pr, lv.STATE.PRESSED)
btn1.add_style(style_def, 0)
label = lv.label(btn1)
label.set_text("Gum")
API
Functions
lv_obj_t*lv_btn_create(lv_obj_t*parent)
Createabuttonobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewbutton
Returns pointertothecreatedbutton
Variables
constlv_obj_class_tlv_btn_class
structlv_btn_t
PublicMembers
lv_obj_tobj
6.2.4 Button matrix (lv_btnmatrix)
Overview
TheButtonMatrixobjectisalightweightwaytodisplaymultiplebuttonsinrowsandcolumns. Lightweightbecausethe
buttons are not actually created but just virtually drawn on the fly. This way, one button use only eight extra bytes of
memoryinsteadofthe~100-150bytesanormalButtonobjectplusthe100orsobytesfortheLabelobject.
TheButtonmatrixisaddedtothedefaultgroup(ifoneisset). BesidestheButtonmatrixisaneditableobjecttoallow
selectingandclickingthebuttonswithencodernavigationtoo.
6.2. Corewidgets 518


--- Page 523 ---


LVGLDocumentation8.3
PartsandStyles
• LV_PART_MAINThebackgroundofthebuttonmatrix,usesthetypicalbackgroundstyleproperties. pad_row
andpad_columnsetsthespacebetweenthebuttons.
• LV_PART_ITEMS The buttons all use the text and typical background style properties except translations and
transformations.
Usage
Button'stext
Thereisatextoneachbutton. Tospecifythemadescriptorstringarray,calledmap,needstobeused. Themapcanbe
setwithlv_btnmatrix_set_map(btnm, my_map). Thedeclarationofamapshouldlooklikeconst char
* map[] = {"btn1", "btn2", "btn3", NULL}.NotethatthelastelementhastobeeitherNULLoran
emptystring("")!
Use"\n"inthemaptoinsertalinebreak. E.g. {"btn1", "btn2", "\n", "btn3", ""}. Eachline'sbuttons
havetheirwidthcalculatedautomatically. Sointheexamplethefirstrowwillhave2buttonseachwith50%widthanda
secondrowwith1buttonhaving100%width.
Controlbuttons
The buttons' width can be set relative to the other button in the same row with
lv_btnmatrix_set_btn_width(btnm, btn_id, width) E.g. in a line with two buttons: btnA,
width = 1 and btnB, width = 2, btnA will have 33 % width and btnB will have 66 % width. It's similar to how the
flex-growpropertyworksinCSS.Thewidthmustbeinthe[1..15]rangeandthedefaultwidthis1.
Inadditiontothewidth,eachbuttoncanbecustomizedwiththefollowingparameters:
• LV_BTNMATRIX_CTRL_HIDDENMakesabuttonhidden(hiddenbuttonsstilltakeupspaceinthelayout,they
arejustnotvisibleorclickable)
• LV_BTNMATRIX_CTRL_NO_REPEATDisablerepeatingwhenthebuttonislongpressed
• LV_BTNMATRIX_CTRL_DISABLEDMakesabuttondisabledLikeLV_STATE_DISABLEDonnormalobjects
• LV_BTNMATRIX_CTRL_CHECKABLE Enable toggling of a button. I.e. LV_STATE_CHECHED will be
added/removedasthebuttonisclicked
• LV_BTNMATRIX_CTRL_CHECKEDMakethebuttonchecked. ItwillusetheLV_STATE_CHECHKEDstyles.
• LV_BTNMATRIX_CTRL_CLICK_TRIG Enabled: send LV_EVENT_VALUE_CHANGE on CLICK, Dis-
abled: sendLV_EVENT_VALUE_CHANGEonPRESS
• LV_BTNMATRIX_CTRL_POPOVERShowthebuttonlabelinapopoverwhenpressingthiskey
• LV_BTNMATRIX_CTRL_RECOLOREnablerecoloringofbuttontextswith#. E.g. "It's #ff0000 red#"
• LV_BTNMATRIX_CTRL_CUSTOM_1Customfreetouseflag
• LV_BTNMATRIX_CTRL_CUSTOM_2Customfreetouseflag
Bydefault,allflagsaredisabled.
To set or clear a button's control attribute, use lv_btnmatrix_set_btn_ctrl(btnm,
btn_id, LV_BTNM_CTRL_...) and lv_btnmatrix_clear_btn_ctrl(btnm, btn_id,
LV_BTNMATRIX_CTRL_...)respectively. MoreLV_BTNM_CTRL_...valuescanbeOR-ed
6.2. Corewidgets 519


--- Page 524 ---


LVGLDocumentation8.3
To set/clear the same control attribute for all buttons of a button matrix, use
lv_btnmatrix_set_btn_ctrl_all(btnm, LV_BTNM_CTRL_...) and
lv_btnmatrix_clear_btn_ctrl_all(btnm, LV_BTNMATRIX_CTRL_...).
The set a control map for a button matrix (similarly to the map for the text), use
lv_btnmatrix_set_ctrl_map(btnm, ctrl_map). An element of ctrl_map should look like
ctrl_map[0] = width | LV_BTNM_CTRL_NO_REPEAT | LV_BTNM_CTRL_CHECHKABLE. The
numberofelementsshouldbeequaltothenumberofbuttons(excludingnewlinescharacters).
Onecheck
The"Onecheck"featurecanbeenabledwithlv_btnmatrix_set_one_checked(btnm, true)toallowonly
onebuttontobecheckedatatime.
Events
• LV_EVENT_VALUE_CHANGEDSentwhenabuttonispressed/releasedorrepeatedafterlongpress. Theevent
parameterissettotheIDofthepressed/releasedbutton.
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDaresentforthefollowingtypes:
– LV_BTNMATRIX_DRAW_PART_BTNTheindividualbuttons.
∗ part: LV_PART_ITEMS
∗ id:indexofthebuttonbeingdrawn
∗ draw_area: theareaoftehbutton
∗ rect_dsc
SeetheeventsoftheBaseobjecttoo.
lv_btnmatrix_get_selected_btn(btnm)returnstheindexofthemostrecentlyreleasedorfocusedbutton
orLV_BTNMATRIX_BTN_NONEifnosuchbutton.
lv_btnmatrix_get_btn_text(btnm, btn_id)returnsapointertothetextofbtn_idthbutton.
LearnmoreaboutEvents.
Keys
• LV_KEY_RIGHT/UP/LEFT/RIGHTTonavigateamongthebuttonstoselectone
• LV_KEY_ENTERTopress/releasetheselectedbutton
LearnmoreaboutKeys.
6.2. Corewidgets 520


--- Page 525 ---


LVGLDocumentation8.3
Example
SimpleButtonmatrix
#include "../../lv_examples.h"
#if LV_USE_BTNMATRIX && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
uint32_t id = lv_btnmatrix_get_selected_btn(obj);
const char * txt = lv_btnmatrix_get_btn_text(obj, id);
LV_LOG_USER("%s was pressed\n", txt);
}
}
static const char * btnm_map[] = {"1", "2", "3", "4", "5", "\n",
"6", "7", "8", "9", "0", "\n",
"Action1", "Action2", ""
};
void lv_example_btnmatrix_1(void)
{
lv_obj_t * btnm1 = lv_btnmatrix_create(lv_scr_act());
lv_btnmatrix_set_map(btnm1, btnm_map);
lv_btnmatrix_set_btn_width(btnm1, 10, 2); /*Make "Action1" twice as wide␣
,→as "Action2"*/
lv_btnmatrix_set_btn_ctrl(btnm1, 10, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_set_btn_ctrl(btnm1, 11, LV_BTNMATRIX_CTRL_CHECKED);
lv_obj_align(btnm1, LV_ALIGN_CENTER, 0, 0);
lv_obj_add_event_cb(btnm1, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(evt):
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.VALUE_CHANGED :
id = obj.get_selected_btn()
txt = obj.get_btn_text(id)
print("%s was pressed"%txt)
btnm_map = ["1", "2", "3", "4", "5", "\n",
"6", "7", "8", "9", "0", "\n",
"Action1", "Action2", ""]
btnm1 = lv.btnmatrix(lv.scr_act())
btnm1.set_map(btnm_map)
btnm1.set_btn_width(10, 2) # Make "Action1" twice as wide as "Action2"
btnm1.set_btn_ctrl(10, lv.btnmatrix.CTRL.CHECKABLE)
(continuesonnextpage)
6.2. Corewidgets 521


--- Page 526 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btnm1.set_btn_ctrl(11, lv.btnmatrix.CTRL.CHECKED)
btnm1.align(lv.ALIGN.CENTER, 0, 0)
btnm1.add_event_cb(event_handler, lv.EVENT.ALL, None)
#endif
Custombuttons
#include "../../lv_examples.h"
#if LV_USE_BTNMATRIX && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_DRAW_PART_BEGIN) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*When the button matrix draws the buttons...*/
if(dsc->class_p == &lv_btnmatrix_class && dsc->type == LV_BTNMATRIX_DRAW_PART_
,→BTN) {
/*Change the draw descriptor of the 2nd button*/
if(dsc->id == 1) {
dsc->rect_dsc->radius = 0;
if(lv_btnmatrix_get_selected_btn(obj) == dsc->id) dsc->rect_dsc->bg_
,→color = lv_palette_darken(LV_PALETTE_BLUE, 3);
else dsc->rect_dsc->bg_color = lv_palette_main(LV_PALETTE_BLUE);
dsc->rect_dsc->shadow_width = 6;
dsc->rect_dsc->shadow_ofs_x = 3;
dsc->rect_dsc->shadow_ofs_y = 3;
dsc->label_dsc->color = lv_color_white();
}
/*Change the draw descriptor of the 3rd button*/
else if(dsc->id == 2) {
dsc->rect_dsc->radius = LV_RADIUS_CIRCLE;
if(lv_btnmatrix_get_selected_btn(obj) == dsc->id) dsc->rect_dsc->bg_
,→color = lv_palette_darken(LV_PALETTE_RED, 3);
else dsc->rect_dsc->bg_color = lv_palette_main(LV_PALETTE_RED);
dsc->label_dsc->color = lv_color_white();
}
else if(dsc->id == 3) {
dsc->label_dsc->opa = LV_OPA_TRANSP; /*Hide the text if any*/
}
}
}
if(code == LV_EVENT_DRAW_PART_END) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*When the button matrix draws the buttons...*/
if(dsc->class_p == &lv_btnmatrix_class && dsc->type == LV_BTNMATRIX_DRAW_PART_
,→BTN) {
(continuesonnextpage)
6.2. Corewidgets 522


--- Page 527 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Add custom content to the 4th button when the button itself was drawn*/
if(dsc->id == 3) {
LV_IMG_DECLARE(img_star);
lv_img_header_t header;
lv_res_t res = lv_img_decoder_get_info(&img_star, &header);
if(res != LV_RES_OK) return;
lv_area_t a;
a.x1 = dsc->draw_area->x1 + (lv_area_get_width(dsc->draw_area) -␣
,→header.w) / 2;
a.x2 = a.x1 + header.w - 1;
a.y1 = dsc->draw_area->y1 + (lv_area_get_height(dsc->draw_area) -␣
,→header.h) / 2;
a.y2 = a.y1 + header.h - 1;
lv_draw_img_dsc_t img_draw_dsc;
lv_draw_img_dsc_init(&img_draw_dsc);
img_draw_dsc.recolor = lv_color_black();
if(lv_btnmatrix_get_selected_btn(obj) == dsc->id) img_draw_dsc.
,→recolor_opa = LV_OPA_30;
lv_draw_img(dsc->draw_ctx, &img_draw_dsc, &a, &img_star);
}
}
}
}
/**
* Add custom drawer to the button matrix to customize buttons one by one
*/
void lv_example_btnmatrix_2(void)
{
lv_obj_t * btnm = lv_btnmatrix_create(lv_scr_act());
lv_obj_add_event_cb(btnm, event_cb, LV_EVENT_ALL, NULL);
lv_obj_center(btnm);
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_star.png','rb') as f:
png_data = f.read()
except:
print("Could not find star.png")
sys.exit()
img_star_argb = lv.img_dsc_t({
'data_size': len(png_data),
(continuesonnextpage)
6.2. Corewidgets 523


--- Page 528 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
'data': png_data
})
def event_cb(e):
code = e.get_code()
obj = e.get_target()
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if code == lv.EVENT.DRAW_PART_BEGIN:
# Change the draw descriptor the 2nd button
if dsc.id == 1:
dsc.rect_dsc.radius = 0
if obj.get_selected_btn() == dsc.id:
dsc.rect_dsc.bg_color = lv.palette_darken(lv.PALETTE.GREY, 3)
else:
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.BLUE)
dsc.rect_dsc.shadow_width = 6
dsc.rect_dsc.shadow_ofs_x = 3
dsc.rect_dsc.shadow_ofs_y = 3
dsc.label_dsc.color = lv.color_white()
# Change the draw descriptor the 3rd button
elif dsc.id == 2:
dsc.rect_dsc.radius = lv.RADIUS.CIRCLE
if obj.get_selected_btn() == dsc.id:
dsc.rect_dsc.bg_color = lv.palette_darken(lv.PALETTE.RED, 3)
else:
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.RED)
dsc.label_dsc.color = lv.color_white()
elif dsc.id == 3:
dsc.label_dsc.opa = lv.OPA.TRANSP # Hide the text if any
if code == lv.EVENT.DRAW_PART_END:
# Add custom content to the 4th button when the button itself was drawn
if dsc.id == 3:
# LV_IMG_DECLARE(img_star)
header = lv.img_header_t()
res = lv.img.decoder_get_info(img_star_argb, header)
if res != lv.RES.OK:
print("error when getting image header")
return
else:
a = lv.area_t()
a.x1 = dsc.draw_area.x1 + (dsc.draw_area.get_width() - header.w) // 2
a.x2 = a.x1 + header.w - 1
a.y1 = dsc.draw_area.y1 + (dsc.draw_area.get_height() - header.h) // 2
a.y2 = a.y1 + header.h - 1
img_draw_dsc = lv.draw_img_dsc_t()
img_draw_dsc.init()
img_draw_dsc.recolor = lv.color_black()
if obj.get_selected_btn() == dsc.id:
img_draw_dsc.recolor_opa = lv.OPA._30
dsc.draw_ctx.img(img_draw_dsc, a, img_star_argb)
(continuesonnextpage)
6.2. Corewidgets 524


--- Page 529 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#
# Add custom drawer to the button matrix to c
#
btnm = lv.btnmatrix(lv.scr_act())
btnm.add_event_cb(event_cb, lv.EVENT.ALL, None)
btnm.center()
Pagination
#include "../../lv_examples.h"
#if LV_USE_BTNMATRIX && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
uint32_t id = lv_btnmatrix_get_selected_btn(obj);
bool prev = id == 0 ? true : false;
bool next = id == 6 ? true : false;
if(prev || next) {
/*Find the checked button*/
uint32_t i;
for(i = 1; i < 7; i++) {
if(lv_btnmatrix_has_btn_ctrl(obj, i, LV_BTNMATRIX_CTRL_CHECKED)) break;
}
if(prev && i > 1) i--;
else if(next && i < 5) i++;
lv_btnmatrix_set_btn_ctrl(obj, i, LV_BTNMATRIX_CTRL_CHECKED);
}
}
/**
* Make a button group (pagination)
*/
void lv_example_btnmatrix_3(void)
{
static lv_style_t style_bg;
lv_style_init(&style_bg);
lv_style_set_pad_all(&style_bg, 0);
lv_style_set_pad_gap(&style_bg, 0);
lv_style_set_clip_corner(&style_bg, true);
lv_style_set_radius(&style_bg, LV_RADIUS_CIRCLE);
lv_style_set_border_width(&style_bg, 0);
static lv_style_t style_btn;
lv_style_init(&style_btn);
lv_style_set_radius(&style_btn, 0);
lv_style_set_border_width(&style_btn, 1);
lv_style_set_border_opa(&style_btn, LV_OPA_50);
lv_style_set_border_color(&style_btn, lv_palette_main(LV_PALETTE_GREY));
lv_style_set_border_side(&style_btn, LV_BORDER_SIDE_INTERNAL);
lv_style_set_radius(&style_btn, 0);
(continuesonnextpage)
6.2. Corewidgets 525


--- Page 530 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static const char * map[] = {LV_SYMBOL_LEFT, "1", "2", "3", "4", "5", LV_SYMBOL_
,→RIGHT, ""};
lv_obj_t * btnm = lv_btnmatrix_create(lv_scr_act());
lv_btnmatrix_set_map(btnm, map);
lv_obj_add_style(btnm, &style_bg, 0);
lv_obj_add_style(btnm, &style_btn, LV_PART_ITEMS);
lv_obj_add_event_cb(btnm, event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_set_size(btnm, 225, 35);
/*Allow selecting on one number at time*/
lv_btnmatrix_set_btn_ctrl_all(btnm, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_clear_btn_ctrl(btnm, 0, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_clear_btn_ctrl(btnm, 6, LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_set_one_checked(btnm, true);
lv_btnmatrix_set_btn_ctrl(btnm, 1, LV_BTNMATRIX_CTRL_CHECKED);
lv_obj_center(btnm);
}
#endif
def event_cb(e):
obj = e.get_target()
id = obj.get_selected_btn()
if id == 0:
prev = True
else:
prev = False
if id == 6:
next = True
else:
next = False
if prev or next:
# Find the checked butto
for i in range(7):
if obj.has_btn_ctrl(i, lv.btnmatrix.CTRL.CHECKED):
break
if prev and i > 1:
i-=1
elif next and i < 5:
i+=1
obj.set_btn_ctrl(i, lv.btnmatrix.CTRL.CHECKED)
#
# Make a button group
#
style_bg = lv.style_t()
style_bg.init()
style_bg.set_pad_all(0)
style_bg.set_pad_gap(0)
(continuesonnextpage)
6.2. Corewidgets 526


--- Page 531 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_bg.set_clip_corner(True)
style_bg.set_radius(lv.RADIUS.CIRCLE)
style_bg.set_border_width(0)
style_btn = lv.style_t()
style_btn.init()
style_btn.set_radius(0)
style_btn.set_border_width(1)
style_btn.set_border_opa(lv.OPA._50)
style_btn.set_border_color(lv.palette_main(lv.PALETTE.GREY))
style_btn.set_border_side(lv.BORDER_SIDE.INTERNAL)
style_btn.set_radius(0)
map = [lv.SYMBOL.LEFT,"1","2", "3", "4", "5",lv.SYMBOL.RIGHT, ""]
btnm = lv.btnmatrix(lv.scr_act())
btnm.set_map(map)
btnm.add_style(style_bg, 0)
btnm.add_style(style_btn, lv.PART.ITEMS)
btnm.add_event_cb(event_cb, lv.EVENT.VALUE_CHANGED, None)
btnm.set_size(225, 35)
# Allow selecting on one number at time
btnm.set_btn_ctrl_all(lv.btnmatrix.CTRL.CHECKABLE)
btnm.clear_btn_ctrl(0, lv.btnmatrix.CTRL.CHECKABLE)
btnm.clear_btn_ctrl(6, lv.btnmatrix.CTRL.CHECKABLE)
btnm.set_one_checked(True)
btnm.set_btn_ctrl(1, lv.btnmatrix.CTRL.CHECKED)
btnm.center()
API
Typedefs
typedefuint16_tlv_btnmatrix_ctrl_t
typedefbool(*lv_btnmatrix_btn_draw_cb_t)(lv_obj_t*btnm,uint32_tbtn_id,constlv_area_t*draw_area,
constlv_area_t*clip_area)
6.2. Corewidgets 527


--- Page 532 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Typetostorebuttoncontrolbits(disabled,hiddenetc.) Thefirst3bitsareusedtostorethewidth
Values:
enumerator_LV_BTNMATRIX_WIDTH
Reservedtostorethesizeunits
enumeratorLV_BTNMATRIX_CTRL_HIDDEN
Buttonhidden
enumeratorLV_BTNMATRIX_CTRL_NO_REPEAT
Donotrepeatpressthisbutton.
enumeratorLV_BTNMATRIX_CTRL_DISABLED
Disablethisbutton.
enumeratorLV_BTNMATRIX_CTRL_CHECKABLE
Thebuttoncanbetoggled.
enumeratorLV_BTNMATRIX_CTRL_CHECKED
Buttoniscurrentlytoggled(e.g. checked).
enumeratorLV_BTNMATRIX_CTRL_CLICK_TRIG
1: SendLV_EVENT_VALUE_CHANGEonCLICK,0: SendLV_EVENT_VALUE_CHANGEonPRESS
enumeratorLV_BTNMATRIX_CTRL_POPOVER
Showapopoverwhenpressingthiskey
enumeratorLV_BTNMATRIX_CTRL_RECOLOR
Enabletextrecoloringwith#color
enumerator_LV_BTNMATRIX_CTRL_RESERVED_1
Reservedforlateruse
enumerator_LV_BTNMATRIX_CTRL_RESERVED_2
Reservedforlateruse
enumeratorLV_BTNMATRIX_CTRL_CUSTOM_1
Customfreetouseflag
enumeratorLV_BTNMATRIX_CTRL_CUSTOM_2
Customfreetouseflag
6.2. Corewidgets 528


--- Page 533 ---


LVGLDocumentation8.3
enumlv_btnmatrix_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_btnmatrix_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_BTNMATRIX_DRAW_PART_BTN
Therectangleandlabelofbuttons
Functions
LV_EXPORT_CONST_INT(LV_BTNMATRIX_BTN_NONE)
lv_obj_t*lv_btnmatrix_create(lv_obj_t*parent)
Createabuttonmatrixobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewbuttonmatrix
Returns pointertothecreatedbuttonmatrix
voidlv_btnmatrix_set_map(lv_obj_t*obj,constchar*map[])
Setanewmap. Buttonswillbecreated/deletedaccordingtothemap. Thebuttonmatrixkeepsareferencetothe
mapandsothestringarraymustnotbedeallocatedduringthelifeofthematrix.
Parameters
• obj--pointertoabuttonmatrixobject
• map--pointerastringarray. Thelaststringhastobe: "". Use"\n"tomakealinebreak.
voidlv_btnmatrix_set_ctrl_map(lv_obj_t*obj,constlv_btnmatrix_ctrl_tctrl_map[])
Setthebuttoncontrolmap(hidden,disabledetc.) forabuttonmatrix. Thecontrolmaparraywillbecopiedand
somaybedeallocatedafterthisfunctionreturns.
Parameters
• obj--pointertoabuttonmatrixobject
• ctrl_map -- pointer to an array of lv_btn_ctrl_t control bytes. The length of
the array and position of the elements must match the number and order of the indi-
vidual buttons (i.e. excludes newline entries). An element of the map should look like
e.g.: ctrl_map[0] = width | LV_BTNMATRIX_CTRL_NO_REPEAT |
LV_BTNMATRIX_CTRL_TGL_ENABLE
voidlv_btnmatrix_set_selected_btn(lv_obj_t*obj,uint16_tbtn_id)
Settheselectedbuttons
Parameters
• obj--pointertobuttonmatrixobject
• btn_id--0basedindexofthebuttontomodify. (Notcountingnewlines)
voidlv_btnmatrix_set_btn_ctrl(lv_obj_t*obj,uint16_tbtn_id,lv_btnmatrix_ctrl_tctrl)
Settheattributesofabuttonofthebuttonmatrix
Parameters
• obj--pointertobuttonmatrixobject
6.2. Corewidgets 529


--- Page 534 ---


LVGLDocumentation8.3
• btn_id--0basedindexofthebuttontomodify. (Notcountingnewlines)
• ctrl -- OR-ed attributs. E.g. LV_BTNMATRIX_CTRL_NO_REPEAT |
LV_BTNMATRIX_CTRL_CHECKABLE
voidlv_btnmatrix_clear_btn_ctrl(lv_obj_t*obj,uint16_tbtn_id,lv_btnmatrix_ctrl_tctrl)
Cleartheattributesofabuttonofthebuttonmatrix
Parameters
• obj--pointertobuttonmatrixobject
• btn_id--0basedindexofthebuttontomodify. (Notcountingnewlines)
• ctrl -- OR-ed attributs. E.g. LV_BTNMATRIX_CTRL_NO_REPEAT |
LV_BTNMATRIX_CTRL_CHECKABLE
voidlv_btnmatrix_set_btn_ctrl_all(lv_obj_t*obj,lv_btnmatrix_ctrl_tctrl)
Setattributesofallbuttonsofabuttonmatrix
Parameters
• obj--pointertoabuttonmatrixobject
• ctrl--attribute(s)tosetfromlv_btnmatrix_ctrl_t. ValuescanbeORed.
voidlv_btnmatrix_clear_btn_ctrl_all(lv_obj_t*obj,lv_btnmatrix_ctrl_tctrl)
Cleartheattributesofallbuttonsofabuttonmatrix
Parameters
• obj--pointertoabuttonmatrixobject
• ctrl--attribute(s)tosetfromlv_btnmatrix_ctrl_t. ValuescanbeORed.
• en--true: settheattributes;false: cleartheattributes
voidlv_btnmatrix_set_btn_width(lv_obj_t*obj,uint16_tbtn_id,uint8_twidth)
Setasinglebutton'srelativewidth. Thismethodwillcausethematrixberegeneratedandisarelativelyexpensive
operation. Itisrecommendedthatinitialwidthbespecifiedusinglv_btnmatrix_set_ctrl_mapandthis
methodonlybeusedfordynamicchanges.
Parameters
• obj--pointertobuttonmatrixobject
• btn_id--0basedindexofthebuttontomodify.
• width--relativewidthcomparedtothebuttonsinthesamerow. [1..7]
voidlv_btnmatrix_set_one_checked(lv_obj_t*obj,boolen)
Make the button matrix like a selector widget (only one button may be checked at a time).
LV_BTNMATRIX_CTRL_CHECKABLE must be enabled on the buttons to be selected using
lv_btnmatrix_set_ctrl()orlv_btnmatrix_set_btn_ctrl_all().
Parameters
• obj--pointertoabuttonmatrixobject
• en--whether"onecheck"modeisenabled
constchar**lv_btnmatrix_get_map(constlv_obj_t*obj)
Getthecurrentmapofabuttonmatrix
Parameters obj--pointertoabuttonmatrixobject
6.2. Corewidgets 530


--- Page 535 ---


LVGLDocumentation8.3
Returns thecurrentmap
uint16_tlv_btnmatrix_get_selected_btn(constlv_obj_t*obj)
Gettheindexofthelastly"activated"buttonbytheuser(pressed,released,focusedetc)Usefulintheevent_cb
togetthetextofthebutton,checkifhiddenetc.
Parameters obj--pointertobuttonmatrixobject
Returns indexofthelastreleasedbutton(LV_BTNMATRIX_BTN_NONE:ifunset)
constchar*lv_btnmatrix_get_btn_text(constlv_obj_t*obj,uint16_tbtn_id)
Getthebutton'stext
Parameters
• obj--pointertobuttonmatrixobject
• btn_id--theindexabuttonnotcountingnewlinecharacters.
Returns textofbtn_index`button
boollv_btnmatrix_has_btn_ctrl(lv_obj_t*obj,uint16_tbtn_id,lv_btnmatrix_ctrl_tctrl)
Getthewhetheracontrolvalueisenabledordisabledforbuttonofabuttonmatrix
Parameters
• obj--pointertoabuttonmatrixobject
• btn_id--theindexofabuttonnotcountingnewlinecharacters.
• ctrl--controlvaluestocheck(ORedvaluecanbeused)
Returns true: thecontrolattributeisenabledfalse: disabled
boollv_btnmatrix_get_one_checked(constlv_obj_t*obj)
Tellwhether"onecheck"modeisenabledornot.
Parameters obj--Buttonmatrixobject
Returns true: "onecheck"modeisenabled;false: disabled
Variables
constlv_obj_class_tlv_btnmatrix_class
structlv_btnmatrix_t
PublicMembers
lv_obj_tobj
constchar**map_p
lv_area_t*button_areas
6.2. Corewidgets 531


--- Page 536 ---


LVGLDocumentation8.3
lv_btnmatrix_ctrl_t*ctrl_bits
uint16_tbtn_cnt
uint16_trow_cnt
uint16_tbtn_id_sel
uint8_tone_check
6.2.5 Canvas (lv_canvas)
Overview
ACanvasinheritsfromImagewheretheusercandrawanything. Rectangles,texts,images,lines,arcscanbedrawnhere
usinglvgl'sdrawingengine. Additionally"effects"canbeapplied,suchasrotation,zoomandblur.
PartsandStyles
LV_PART_MAINUsesthetypicalrectanglestylepropertiesandimagestyleproperties.
Usage
Buffer
The Canvas needs a buffer in which stores the drawn image. To assign a buffer to a Canvas, use
lv_canvas_set_buffer(canvas, buffer, width, height, LV_IMG_CF_...). Wherebuffer
is a static buffer (not just a local variable) to hold the image of the canvas. For example, static lv_color_t
buffer[LV_CANVAS_BUF_SIZE_TRUE_COLOR(width, height)]. LV_CANVAS_BUF_SIZE_...
macroshelptodeterminethesizeofthebufferwithdifferentcolorformats.
The canvas supports all the built-in color formats like LV_IMG_CF_TRUE_COLOR or
LV_IMG_CF_INDEXED_2BIT.SeethefulllistintheColorformatssection.
Indexedcolors
For LV_IMG_CF_INDEXED_1/2/4/8 color formats a palette needs to be initialized with
lv_canvas_set_palette(canvas, 3, LV_COLOR_RED).Itsetspixelswithindex=3tored.
6.2. Corewidgets 532


--- Page 537 ---


LVGLDocumentation8.3
Drawing
Tosetapixel'scoloronthecanvas,uselv_canvas_set_px_color(canvas, x, y, LV_COLOR_RED).With
LV_IMG_CF_INDEXED_...theindexofthecolorneedstobepassedascolor. E.g. lv_color_t c; c.full
= 3;
Tosetapixel'sopacitywithLV_IMG_CF_TRUE_COLOR_ALPHAorLV_IMG_CF_ALPHA_...formatonthecan-
vas,uselv_canvas_set_px_opa(canvas, x, y, opa).
lv_canvas_fill_bg(canvas, LV_COLOR_BLUE, LV_OPA_50) fills the whole canvas to blue with 50%
opacity. Notethatifthecurrentcolorformatdoesn'tsupportcolors(e.g. LV_IMG_CF_ALPHA_2BIT)thecolorwill
beignored. Similarly,ifopacityisnotsupported(e.g. LV_IMG_CF_TRUE_COLOR)itwillbeignored.
Anarrayofpixelscanbecopiedtothecanvaswithlv_canvas_copy_buf(canvas, buffer_to_copy, x,
y, width, height). Thecolorformatofthebufferandthecanvasneedtomatch.
Todrawsomethingtothecanvasuse
• lv_canvas_draw_rect(canvas, x, y, width, heigth, &draw_dsc)
• lv_canvas_draw_text(canvas, x, y, max_width, &draw_dsc, txt)
• lv_canvas_draw_img(canvas, x, y, &img_src, &draw_dsc)
• lv_canvas_draw_line(canvas, point_array, point_cnt, &draw_dsc)
• lv_canvas_draw_polygon(canvas, points_array, point_cnt, &draw_dsc)
• lv_canvas_draw_arc(canvas, x, y, radius, start_angle, end_angle, &draw_dsc)
draw_dscisalv_draw_rect/label/img/line/arc_dsc_tvariablewhichshouldbefirstinitializedwith
one of lv_draw_rect/label/img/line/arc_dsc_init() and then modified with the desired colors and
othervalues.
The draw function can draw to any color format. For example, it's possible to draw a text to an
LV_IMG_VF_ALPHA_8BITcanvasandusetheresultimageasadrawmasklater.
Transformations
lv_canvas_transform() can be used to rotate and/or scale the image of an image and store the result on the
canvas. Thefunctionneedsthefollowingparameters:
• canvaspointertoacanvasobjecttostoretheresultofthetransformation.
• img pointer to an image descriptor to transform. Can be the image descriptor of another canvas too
(lv_canvas_get_img()).
• angletheangleofrotation(0..3600),0.1degresolution
• zoomzoomfactor(256: nozoom,512: doublesize,128: halfsize);
• offset_xoffsetXtotellwheretoputtheresultdataondestinationcanvas
• offset_yoffsetXtotellwheretoputtheresultdataondestinationcanvas
• pivot_xpivotXofrotation. Relativetothesourcecanvas. Settosource width / 2torotatearoundthe
center
• pivot_ypivotYofrotation. Relativetothesourcecanvas. Settosource height / 2torotatearoundthe
center
• antialiastrue: applyanti-aliasingduringthetransformation. Looksbetterbutslower.
Notethatacanvascan'tberotatedonitself. Youneedasourceanddestinationcanvasorimage.
6.2. Corewidgets 533


--- Page 538 ---


LVGLDocumentation8.3
Blur
Agivenareaofthecanvascanbe blurredhorizontallywith lv_canvas_blur_hor(canvas, &area, r) or
verticallywithlv_canvas_blur_ver(canvas, &area, r). ristheradiusoftheblur(greatervaluemeans
moreintensiveburring). areaistheareawheretheblurshouldbeapplied(interpretedrelativetothecanvas).
Events
Nospecialeventsaresentbycanvasobjects. Thesameeventsaresentasforthe
SeetheeventsoftheImagestoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
DrawingontheCanvasandrotate
#include "../../lv_examples.h"
#if LV_USE_CANVAS && LV_BUILD_EXAMPLES
#define CANVAS_WIDTH 200
#define CANVAS_HEIGHT 150
void lv_example_canvas_1(void)
{
lv_draw_rect_dsc_t rect_dsc;
lv_draw_rect_dsc_init(&rect_dsc);
rect_dsc.radius = 10;
rect_dsc.bg_opa = LV_OPA_COVER;
rect_dsc.bg_grad.dir = LV_GRAD_DIR_HOR;
rect_dsc.bg_grad.stops[0].color = lv_palette_main(LV_PALETTE_RED);
rect_dsc.bg_grad.stops[1].color = lv_palette_main(LV_PALETTE_BLUE);
rect_dsc.border_width = 2;
rect_dsc.border_opa = LV_OPA_90;
rect_dsc.border_color = lv_color_white();
rect_dsc.shadow_width = 5;
rect_dsc.shadow_ofs_x = 5;
rect_dsc.shadow_ofs_y = 5;
lv_draw_label_dsc_t label_dsc;
lv_draw_label_dsc_init(&label_dsc);
label_dsc.color = lv_palette_main(LV_PALETTE_ORANGE);
static lv_color_t cbuf[LV_CANVAS_BUF_SIZE_TRUE_COLOR(CANVAS_WIDTH, CANVAS_
,→HEIGHT)];
lv_obj_t * canvas = lv_canvas_create(lv_scr_act());
(continuesonnextpage)
6.2. Corewidgets 534


--- Page 539 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_canvas_set_buffer(canvas, cbuf, CANVAS_WIDTH, CANVAS_HEIGHT, LV_IMG_CF_TRUE_
,→COLOR);
lv_obj_center(canvas);
lv_canvas_fill_bg(canvas, lv_palette_lighten(LV_PALETTE_GREY, 3), LV_OPA_COVER);
lv_canvas_draw_rect(canvas, 70, 60, 100, 70, &rect_dsc);
lv_canvas_draw_text(canvas, 40, 20, 100, &label_dsc, "Some text on text canvas");
/*Test the rotation. It requires another buffer where the original image is␣
,→stored.
*So copy the current image to buffer and rotate it to the canvas*/
static lv_color_t cbuf_tmp[CANVAS_WIDTH * CANVAS_HEIGHT];
memcpy(cbuf_tmp, cbuf, sizeof(cbuf_tmp));
lv_img_dsc_t img;
img.data = (void *)cbuf_tmp;
img.header.cf = LV_IMG_CF_TRUE_COLOR;
img.header.w = CANVAS_WIDTH;
img.header.h = CANVAS_HEIGHT;
lv_canvas_fill_bg(canvas, lv_palette_lighten(LV_PALETTE_GREY, 3), LV_OPA_COVER);
lv_canvas_transform(canvas, &img, 120, LV_IMG_ZOOM_NONE, 0, 0, CANVAS_WIDTH / 2,␣
,→CANVAS_HEIGHT / 2, true);
}
#endif
_CANVAS_WIDTH = 200
_CANVAS_HEIGHT = 150
LV_IMG_ZOOM_NONE = 256
rect_dsc = lv.draw_rect_dsc_t()
rect_dsc.init()
rect_dsc.radius = 10
rect_dsc.bg_opa = lv.OPA.COVER
rect_dsc.bg_grad.dir = lv.GRAD_DIR.HOR
rect_dsc.bg_grad.stops[0].color = lv.palette_main(lv.PALETTE.RED)
rect_dsc.bg_grad.stops[1].color = lv.palette_main(lv.PALETTE.BLUE)
rect_dsc.border_width = 2
rect_dsc.border_opa = lv.OPA._90
rect_dsc.border_color = lv.color_white()
rect_dsc.shadow_width = 5
rect_dsc.shadow_ofs_x = 5
rect_dsc.shadow_ofs_y = 5
label_dsc = lv.draw_label_dsc_t()
label_dsc.init()
label_dsc.color = lv.palette_main(lv.PALETTE.YELLOW)
cbuf = bytearray(_CANVAS_WIDTH * _CANVAS_HEIGHT * 4)
canvas = lv.canvas(lv.scr_act())
canvas.set_buffer(cbuf, _CANVAS_WIDTH, _CANVAS_HEIGHT, lv.img.CF.TRUE_COLOR)
canvas.center()
canvas.fill_bg(lv.palette_lighten(lv.PALETTE.GREY, 3), lv.OPA.COVER)
(continuesonnextpage)
6.2. Corewidgets 535


--- Page 540 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
canvas.draw_rect(70, 60, 100, 70, rect_dsc)
canvas.draw_text(40, 20, 100, label_dsc, "Some text on text canvas")
# Test the rotation. It requires another buffer where the original image is stored.
# So copy the current image to buffer and rotate it to the canvas
img = lv.img_dsc_t()
img.data = cbuf[:]
img.header.cf = lv.img.CF.TRUE_COLOR
img.header.w = _CANVAS_WIDTH
img.header.h = _CANVAS_HEIGHT
canvas.fill_bg(lv.palette_lighten(lv.PALETTE.GREY, 3), lv.OPA.COVER)
canvas.transform(img, 30, LV_IMG_ZOOM_NONE, 0, 0, _CANVAS_WIDTH // 2, _CANVAS_HEIGHT /
,→/ 2, True)
TransparentCanvaswithchromakeying
#include "../../lv_examples.h"
#if LV_USE_CANVAS && LV_BUILD_EXAMPLES
#define CANVAS_WIDTH 50
#define CANVAS_HEIGHT 50
/**
* Create a transparent canvas with Chroma keying and indexed color format (palette).
*/
void lv_example_canvas_2(void)
{
/*Create a button to better see the transparency*/
lv_btn_create(lv_scr_act());
/*Create a buffer for the canvas*/
static lv_color_t cbuf[LV_CANVAS_BUF_SIZE_INDEXED_1BIT(CANVAS_WIDTH, CANVAS_
,→HEIGHT)];
/*Create a canvas and initialize its palette*/
lv_obj_t * canvas = lv_canvas_create(lv_scr_act());
lv_canvas_set_buffer(canvas, cbuf, CANVAS_WIDTH, CANVAS_HEIGHT, LV_IMG_CF_INDEXED_
,→1BIT);
lv_canvas_set_palette(canvas, 0, LV_COLOR_CHROMA_KEY);
lv_canvas_set_palette(canvas, 1, lv_palette_main(LV_PALETTE_RED));
/*Create colors with the indices of the palette*/
lv_color_t c0;
lv_color_t c1;
c0.full = 0;
c1.full = 1;
/*Red background (There is no dedicated alpha channel in indexed images so LV_OPA_
,→COVER is ignored)*/
lv_canvas_fill_bg(canvas, c1, LV_OPA_COVER);
(continuesonnextpage)
6.2. Corewidgets 536


--- Page 541 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create hole on the canvas*/
uint32_t x;
uint32_t y;
for(y = 10; y < 30; y++) {
for(x = 5; x < 20; x++) {
lv_canvas_set_px_color(canvas, x, y, c0);
}
}
}
#endif
CANVAS_WIDTH = 50
CANVAS_HEIGHT = 50
LV_COLOR_CHROMA_KEY = lv.color_hex(0x00ff00)
def LV_IMG_BUF_SIZE_ALPHA_1BIT(w, h):
return int(((w / 8) + 1) * h)
def LV_IMG_BUF_SIZE_INDEXED_1BIT(w, h):
return LV_IMG_BUF_SIZE_ALPHA_1BIT(w, h) + 4 * 2
def LV_CANVAS_BUF_SIZE_INDEXED_1BIT(w, h):
return LV_IMG_BUF_SIZE_INDEXED_1BIT(w, h)
#
# Create a transparent canvas with Chroma keying and indexed color format (palette).
#
# Create a button to better see the transparency
btn=lv.btn(lv.scr_act())
# Create a buffer for the canvas
cbuf= bytearray(LV_CANVAS_BUF_SIZE_INDEXED_1BIT(CANVAS_WIDTH, CANVAS_HEIGHT))
# Create a canvas and initialize its palette
canvas = lv.canvas(lv.scr_act())
canvas.set_buffer(cbuf, CANVAS_WIDTH, CANVAS_HEIGHT, lv.img.CF.INDEXED_1BIT)
canvas.set_palette(0, LV_COLOR_CHROMA_KEY)
canvas.set_palette(1, lv.palette_main(lv.PALETTE.RED))
# Create colors with the indices of the palette
c0 = lv.color_t()
c1 = lv.color_t()
c0.full = 0
c1.full = 1
# Red background (There is no dedicated alpha channel in indexed images so LV_OPA_
,→COVER is ignored)
canvas.fill_bg(c1, lv.OPA.COVER)
# Create hole on the canvas
for y in range(10,30):
for x in range(5,20):
canvas.set_px(x, y, c0)
6.2. Corewidgets 537


--- Page 542 ---


LVGLDocumentation8.3
API
Functions
lv_obj_t*lv_canvas_create(lv_obj_t*parent)
Createacanvasobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewcanvas
Returns pointertothecreatedcanvas
voidlv_canvas_set_buffer(lv_obj_t*canvas,void*buf,lv_coord_tw,lv_coord_th,lv_img_cf_tcf)
Setabufferforthecanvas.
Parameters
• buf -- a buffer where the content of the canvas will be. The required size
is (lv_img_color_format_get_px_size(cf) * w) / 8 * h) It can be allocated with
lv_mem_alloc()oritcanbestaticallyallocatedarray(e.g. staticlv_color_tbuf[100*50])
oritcanbeanaddressinRAMorexternalSRAM
• canvas--pointertoacanvasobject
• w--widthofthecanvas
• h--heightofthecanvas
• cf--colorformat. LV_IMG_CF_...
voidlv_canvas_set_px_color(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty,lv_color_tc)
Setthecolorofapixelonthecanvas
Parameters
• canvas--
• x--xcoordinateofthepointtoset
• y--xcoordinateofthepointtoset
• c--colorofthepixel
staticinlinevoidlv_canvas_set_px(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty,lv_color_tc)
DEPRECATED:addedonlyforbackwardcompatibility
voidlv_canvas_set_px_opa(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty,lv_opa_topa)
Settheopacityofapixelonthecanvas
Parameters
• canvas--
• x--xcoordinateofthepointtoset
• y--xcoordinateofthepointtoset
• opa--opacityofthepixel(0..255)
voidlv_canvas_set_palette(lv_obj_t*canvas,uint8_tid,lv_color_tc)
Setthepalettecolorofacanvaswithindexformat. ValidonlyforLV_IMG_CF_INDEXED1/2/4/8
Parameters
• canvas--pointertocanvasobject
6.2. Corewidgets 538


--- Page 543 ---


LVGLDocumentation8.3
• id--thepalettecolortoset:
– forLV_IMG_CF_INDEXED1: 0..1
– forLV_IMG_CF_INDEXED2: 0..3
– forLV_IMG_CF_INDEXED4: 0..15
– forLV_IMG_CF_INDEXED8: 0..255
• c--thecolortoset
lv_color_tlv_canvas_get_px(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty)
Getthecolorofapixelonthecanvas
Parameters
• canvas--
• x--xcoordinateofthepointtoset
• y--xcoordinateofthepointtoset
Returns colorofthepoint
lv_img_dsc_t*lv_canvas_get_img(lv_obj_t*canvas)
Gettheimageofthecanvasasapointertoanlv_img_dsc_tvariable.
Parameters canvas--pointertoacanvasobject
Returns pointertotheimagedescriptor.
voidlv_canvas_copy_buf(lv_obj_t*canvas,constvoid*to_copy,lv_coord_tx,lv_coord_ty,lv_coord_tw,
lv_coord_th)
Copyabuffertothecanvas
Parameters
• canvas--pointertoacanvasobject
• to_copy -- buffer to copy. The color format has to match with the canvas's buffer color
format
• x--leftsideofthedestinationposition
• y--topsideofthedestinationposition
• w--widthofthebuffertocopy
• h--heightofthebuffertocopy
voidlv_canvas_transform(lv_obj_t*canvas,lv_img_dsc_t*img,int16_tangle,uint16_tzoom,lv_coord_t
offset_x,lv_coord_toffset_y,int32_tpivot_x,int32_tpivot_y,boolantialias)
Transformandimageandstoretheresultonacanvas.
Parameters
• canvas--pointertoacanvasobjecttostoretheresultofthetransformation.
• img--pointertoanimagedescriptortotransform. Canbetheimagedescriptorofanother
canvastoo(lv_canvas_get_img()).
• angle--theangleofrotation(0..3600),0.1degresolution
• zoom--zoomfactor(256nozoom);
• offset_x--offsetXtotellwheretoputtheresultdataondestinationcanvas
6.2. Corewidgets 539


--- Page 544 ---


LVGLDocumentation8.3
• offset_y--offsetXtotellwheretoputtheresultdataondestinationcanvas
• pivot_x--pivotXofrotation. RelativetothesourcecanvasSettosource width /
2torotatearoundthecenter
• pivot_y--pivotYofrotation. RelativetothesourcecanvasSettosource height /
2torotatearoundthecenter
• antialias--applyanti-aliasingduringthetransformation. Looksbetterbutslower.
voidlv_canvas_blur_hor(lv_obj_t*canvas,constlv_area_t*area,uint16_tr)
Applyhorizontalbluronthecanvas
Parameters
• canvas--pointertoacanvasobject
• area--theareatoblur. IfNULLthewholecanvaswillbeblurred.
• r--radiusoftheblur
voidlv_canvas_blur_ver(lv_obj_t*canvas,constlv_area_t*area,uint16_tr)
Applyverticalbluronthecanvas
Parameters
• canvas--pointertoacanvasobject
• area--theareatoblur. IfNULLthewholecanvaswillbeblurred.
• r--radiusoftheblur
voidlv_canvas_fill_bg(lv_obj_t*canvas,lv_color_tcolor,lv_opa_topa)
Fillthecanvaswithcolor
Parameters
• canvas--pointertoacanvas
• color--thebackgroundcolor
• opa--thedesiredopacity
voidlv_canvas_draw_rect(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty,lv_coord_tw,lv_coord_th,const
lv_draw_rect_dsc_t*draw_dsc)
Drawarectangleonthecanvas
Parameters
• canvas--pointertoacanvasobject
• x--leftcoordinateoftherectangle
• y--topcoordinateoftherectangle
• w--widthoftherectangle
• h--heightoftherectangle
• draw_dsc--descriptoroftherectangle
voidlv_canvas_draw_text(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty,lv_coord_tmax_w,
lv_draw_label_dsc_t*draw_dsc,constchar*txt)
Drawatextonthecanvas.
Parameters
6.2. Corewidgets 540


--- Page 545 ---


LVGLDocumentation8.3
• canvas--pointertoacanvasobject
• x--leftcoordinateofthetext
• y--topcoordinateofthetext
• max_w--maxwidthofthetext. Thetextwillbewrappedtofitintothissize
• draw_dsc--pointertoavalidlabeldescriptorlv_draw_label_dsc_t
• txt--texttodisplay
voidlv_canvas_draw_img(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty,constvoid*src,const
lv_draw_img_dsc_t*draw_dsc)
Drawanimageonthecanvas
Parameters
• canvas--pointertoacanvasobject
• x--leftcoordinateoftheimage
• y--topcoordinateoftheimage
• src--imagesource. Canbeapointeranlv_img_dsc_tvariableorapathanimage.
• draw_dsc--pointertoavalidlabeldescriptorlv_draw_img_dsc_t
voidlv_canvas_draw_line(lv_obj_t*canvas,constlv_point_tpoints[],uint32_tpoint_cnt,const
lv_draw_line_dsc_t*draw_dsc)
Drawalineonthecanvas
Parameters
• canvas--pointertoacanvasobject
• points--pointoftheline
• point_cnt--numberofpoints
• draw_dsc--pointertoaninitializedlv_draw_line_dsc_tvariable
voidlv_canvas_draw_polygon(lv_obj_t*canvas,constlv_point_tpoints[],uint32_tpoint_cnt,const
lv_draw_rect_dsc_t*draw_dsc)
Drawapolygononthecanvas
Parameters
• canvas--pointertoacanvasobject
• points--pointofthepolygon
• point_cnt--numberofpoints
• draw_dsc--pointertoaninitializedlv_draw_rect_dsc_tvariable
voidlv_canvas_draw_arc(lv_obj_t*canvas,lv_coord_tx,lv_coord_ty,lv_coord_tr,int32_tstart_angle,
int32_tend_angle,constlv_draw_arc_dsc_t*draw_dsc)
Drawanarconthecanvas
Parameters
• canvas--pointertoacanvasobject
• x--origoxofthearc
• y--origoyofthearc
6.2. Corewidgets 541


--- Page 546 ---


LVGLDocumentation8.3
• r--radiusofthearc
• start_angle--startangleindegrees
• end_angle--endangleindegrees
• draw_dsc--pointertoaninitializedlv_draw_line_dsc_tvariable
Variables
constlv_obj_class_tlv_canvas_class
structlv_canvas_t
PublicMembers
lv_img_timg
lv_img_dsc_tdsc
6.2.6 Checkbox (lv_checkbox)
Overview
TheCheckboxobjectiscreatedfroma"tickbox"andalabel. WhentheCheckboxisclickedthetickboxistoggled.
PartsandStyles
• LV_PART_MAINTheisthebackgroundoftheCheckboxanditusesthetextandallthetypicalbackgroundstyle
properties. pad_columnadjuststhespacingbetweenthetickboxandthelabel
• LV_PART_INDICATOR The "tick box" is a square that uses all the typical background style properties. By
default, itssizeisequaltotheheightofthemainpart'sfont. Paddingpropertiesmakethetickboxlargerinthe
respectivedirections.
TheCheckboxisaddedtothedefaultgroup(ifitisset).
Usage
Text
Thetextcanbemodifiedwiththelv_checkbox_set_text(cb, "New text")functionandwillbedynamically
allocated.
Tosetastatictext,uselv_checkbox_set_static_text(cb, txt). Thisway,onlyapointertotxtwillbe
stored. Thetextthenshouldn'tbedeallocatedwhilethecheckboxexists.
6.2. Corewidgets 542


--- Page 547 ---


LVGLDocumentation8.3
Check,uncheck,disable
Youcanmanuallycheck,un-check,anddisabletheCheckboxbyusingthecommonstateadd/clearfunction:
lv_obj_add_state(cb, LV_STATE_CHECKED); /*Make the chekbox checked*/
lv_obj_clear_state(cb, LV_STATE_CHECKED); /*MAke the checkbox unchecked*/
lv_obj_add_state(cb, LV_STATE_CHECKED | LV_STATE_DISABLED); /*Make the checkbox␣
,→checked and disabled*/
Events
• LV_EVENT_VALUE_CHANGEDSentwhenthecheckboxistoggled.
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDaresentforthefollowingtypes:
– LV_CHECKBOX_DRAW_PART_BOXThetickboxofthecheckbox
∗ part: LV_PART_INDICATOR
∗ draw_area: theareaofthetickbox
∗ rect_dsc
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
ThefollowingKeysareprocessedbythe'Buttons':
• LV_KEY_RIGHT/UPGototoggledstateiftogglingisenabled
• LV_KEY_LEFT/DOWNGotonon-toggledstateiftogglingisenabled
• LV_KEY_ENTERClicksthecheckboxandtogglesit
Note that, as usual, the state of LV_KEY_ENTER is translated to LV_EVENT_PRESSED/PRESSING/RELEASED
etc.
LearnmoreaboutKeys.
Example
SimpleCheckboxes
#include "../../lv_examples.h"
#if LV_USE_CHECKBOX && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
const char * txt = lv_checkbox_get_text(obj);
const char * state = lv_obj_get_state(obj) & LV_STATE_CHECKED ? "Checked" :
,→"Unchecked";
(continuesonnextpage)
6.2. Corewidgets 543


--- Page 548 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
LV_LOG_USER("%s: %s", txt, state);
}
}
void lv_example_checkbox_1(void)
{
lv_obj_set_flex_flow(lv_scr_act(), LV_FLEX_FLOW_COLUMN);
lv_obj_set_flex_align(lv_scr_act(), LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_START, LV_
,→FLEX_ALIGN_CENTER);
lv_obj_t * cb;
cb = lv_checkbox_create(lv_scr_act());
lv_checkbox_set_text(cb, "Apple");
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
cb = lv_checkbox_create(lv_scr_act());
lv_checkbox_set_text(cb, "Banana");
lv_obj_add_state(cb, LV_STATE_CHECKED);
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
cb = lv_checkbox_create(lv_scr_act());
lv_checkbox_set_text(cb, "Lemon");
lv_obj_add_state(cb, LV_STATE_DISABLED);
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
cb = lv_checkbox_create(lv_scr_act());
lv_obj_add_state(cb, LV_STATE_CHECKED | LV_STATE_DISABLED);
lv_checkbox_set_text(cb, "Melon\nand a new line");
lv_obj_add_event_cb(cb, event_handler, LV_EVENT_ALL, NULL);
lv_obj_update_layout(cb);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
txt = obj.get_text()
if obj.get_state() & lv.STATE.CHECKED:
state = "Checked"
else:
state = "Unchecked"
print(txt + ":" + state)
lv.scr_act().set_flex_flow(lv.FLEX_FLOW.COLUMN)
lv.scr_act().set_flex_align(lv.FLEX_ALIGN.CENTER, lv.FLEX_ALIGN.START, lv.FLEX_ALIGN.
,→CENTER)
cb = lv.checkbox(lv.scr_act())
cb.set_text("Apple")
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb = lv.checkbox(lv.scr_act())
(continuesonnextpage)
6.2. Corewidgets 544


--- Page 549 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
cb.set_text("Banana")
cb.add_state(lv.STATE.CHECKED)
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb = lv.checkbox(lv.scr_act())
cb.set_text("Lemon")
cb.add_state(lv.STATE.DISABLED)
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb = lv.checkbox(lv.scr_act())
cb.add_state(lv.STATE.CHECKED | lv.STATE.DISABLED)
cb.set_text("Melon")
cb.add_event_cb(event_handler, lv.EVENT.ALL, None)
cb.update_layout()
Checkboxesasradiobuttons
#include "../../lv_examples.h"
#if LV_USE_CHECKBOX && LV_BUILD_EXAMPLES
static lv_style_t style_radio;
static lv_style_t style_radio_chk;
static uint32_t active_index_1 = 0;
static uint32_t active_index_2 = 0;
static void radio_event_handler(lv_event_t * e)
{
uint32_t * active_id = lv_event_get_user_data(e);
lv_obj_t * cont = lv_event_get_current_target(e);
lv_obj_t * act_cb = lv_event_get_target(e);
lv_obj_t * old_cb = lv_obj_get_child(cont, *active_id);
/*Do nothing if the container was clicked*/
if(act_cb == cont) return;
lv_obj_clear_state(old_cb, LV_STATE_CHECKED); /*Uncheck the previous radio␣
,→button*/
lv_obj_add_state(act_cb, LV_STATE_CHECKED); /*Uncheck the current radio␣
,→button*/
*active_id = lv_obj_get_index(act_cb);
LV_LOG_USER("Selected radio buttons: %d, %d", (int)active_index_1, (int)active_
,→index_2);
}
static void radiobutton_create(lv_obj_t * parent, const char * txt)
{
lv_obj_t * obj = lv_checkbox_create(parent);
lv_checkbox_set_text(obj, txt);
lv_obj_add_flag(obj, LV_OBJ_FLAG_EVENT_BUBBLE);
lv_obj_add_style(obj, &style_radio, LV_PART_INDICATOR);
(continuesonnextpage)
6.2. Corewidgets 545


--- Page 550 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_add_style(obj, &style_radio_chk, LV_PART_INDICATOR | LV_STATE_CHECKED);
}
/**
* Checkboxes as radio buttons
*/
void lv_example_checkbox_2(void)
{
/* The idea is to enable `LV_OBJ_FLAG_EVENT_BUBBLE` on checkboxes and process the
* `LV_EVENT_CLICKED` on the container.
* A variable is passed as event user data where the index of the active
* radiobutton is saved */
lv_style_init(&style_radio);
lv_style_set_radius(&style_radio, LV_RADIUS_CIRCLE);
lv_style_init(&style_radio_chk);
lv_style_set_bg_img_src(&style_radio_chk, NULL);
uint32_t i;
char buf[32];
lv_obj_t * cont1 = lv_obj_create(lv_scr_act());
lv_obj_set_flex_flow(cont1, LV_FLEX_FLOW_COLUMN);
lv_obj_set_size(cont1, lv_pct(40), lv_pct(80));
lv_obj_add_event_cb(cont1, radio_event_handler, LV_EVENT_CLICKED, &active_index_
,→1);
for(i = 0; i < 5; i++) {
lv_snprintf(buf, sizeof(buf), "A %d", (int)i + 1);
radiobutton_create(cont1, buf);
}
/*Make the first checkbox checked*/
lv_obj_add_state(lv_obj_get_child(cont1, 0), LV_STATE_CHECKED);
lv_obj_t * cont2 = lv_obj_create(lv_scr_act());
lv_obj_set_flex_flow(cont2, LV_FLEX_FLOW_COLUMN);
lv_obj_set_size(cont2, lv_pct(40), lv_pct(80));
lv_obj_set_x(cont2, lv_pct(50));
lv_obj_add_event_cb(cont2, radio_event_handler, LV_EVENT_CLICKED, &active_index_
,→2);
for(i = 0; i < 3; i++) {
lv_snprintf(buf, sizeof(buf), "B %d", (int)i + 1);
radiobutton_create(cont2, buf);
}
/*Make the first checkbox checked*/
lv_obj_add_state(lv_obj_get_child(cont2, 0), LV_STATE_CHECKED);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/widgets/checkbox/lv_example_checkbox_2.py
6.2. Corewidgets 546


--- Page 551 ---


LVGLDocumentation8.3
API
Enums
enumlv_checkbox_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_checkbox_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_CHECKBOX_DRAW_PART_BOX
Thetickbox
Functions
lv_obj_t*lv_checkbox_create(lv_obj_t*parent)
Createacheckboxobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewbutton
Returns pointertothecreatedcheckbox
voidlv_checkbox_set_text(lv_obj_t*obj,constchar*txt)
Setthetextofacheckbox. txtwillbecopiedandmaybedeallocatedafterthisfunctionreturns.
Parameters
• cb--pointertoacheckbox
• txt--thetextofthecheckbox. NULLtorefreshwiththecurrenttext.
voidlv_checkbox_set_text_static(lv_obj_t*obj,constchar*txt)
Setthetextofacheckbox. txtmustnotbedeallocatedduringthelifeofthischeckbox.
Parameters
• cb--pointertoacheckbox
• txt--thetextofthecheckbox.
constchar*lv_checkbox_get_text(constlv_obj_t*obj)
Getthetextofacheckbox
Parameters cb--pointertocheckboxobject
Returns pointertothetextofthecheckbox
Variables
constlv_obj_class_tlv_checkbox_class
structlv_checkbox_t
6.2. Corewidgets 547


--- Page 552 ---


LVGLDocumentation8.3
PublicMembers
lv_obj_tobj
constchar*txt
uint32_tstatic_txt
6.2.7 Drop-down list (lv_dropdown)
Overview
Thedrop-downlistallowstheusertoselectonevaluefromalist.
Thedrop-downlistisclosedbydefaultanddisplaysasinglevalueorapredefinedtext. Whenactivated(byclickonthe
drop-downlist),alistiscreatedfromwhichtheusermayselectoneoption. Whentheuserselectsanewvalue,thelistis
deletedagain.
TheDrop-downlistisaddedtothedefaultgroup(ifitisset). BesidestheDrop-downlistisaneditableobjecttoallow
selectinganoptionwithencodernavigationtoo.
PartsandStyles
TheDropdownwidgetisbuiltfromtheelements: "button"and"list"(bothnotrelatedtothebuttonandlistwidgets)
Button
• LV_PART_MAINThebackgroundofthebutton. Usesthetypicalbackgroundpropertiesandtextpropertiesfor
thetextonit.
• LV_PART_INDICATORTypicallyanarrowsymbolthatcanbeanimageoratext(LV_SYMBOL).
ThebuttongoestoLV_STATE_CHECKEDwhenit'sopened.
List
• LV_PART_MAINThelistitself. Usesthetypicalbackgroundproperties. max_heightcanbeusedtolimitthe
heightofthelist.
• LV_PART_SCROLLBARThescrollbarbackground,border,shadowpropertiesandwidth(foritsownwidth)and
rightpaddingforthespacingontheright.
• LV_PART_SELECTEDReferstothecurrentlypressed,checkedorpressed+checkedoption. Alsousesthetypical
backgroundproperties.
Thelistishidden/shownonopen/close. Toaddstylestoituselv_dropdown_get_list(dropdown)togetthe
listobject. Forexample:
lv_obj_t * list = lv_dropdown_get_list(dropdown) /*Get the list*/
lv_obj_add_style(list, &my_style, ...) /*Add the styles to the list*/}`
Alternativelythethemecanbeextendedwiththenewstyles.
6.2. Corewidgets 548


--- Page 553 ---


LVGLDocumentation8.3
Usage
Overview
Setoptions
Optionsarepassedtothedrop-downlistasastringwithlv_dropdown_set_options(dropdown, options).
Options should be separated by \n. For example: "First\nSecond\nThird". This string will be saved in the
drop-downlist,soitcaninalocalvariable.
Thelv_dropdown_add_option(dropdown, "New option", pos)functioninsertsanewoptiontopos
index.
To save memory the options can set from a static(constant) string too with
lv_dropdown_set_options_static(dropdown, options). In this case the options string should
bealivewhilethedrop-downlistexistsandlv_dropdown_add_optioncan'tbeused
Youcanselectanoptionmanuallywithlv_dropdown_set_selected(dropdown, id),whereidistheindex
ofanoption.
Getselectedoption
Thegettheindexoftheselectedoption,uselv_dropdown_get_selected(dropdown).
lv_dropdown_get_selected_str(dropdown, buf, buf_size)copiesthenameoftheselectedoption
tobuf.
Direction
The list can be created on any side. The default LV_DIR_BOTTOM can be modified by
lv_dropdown_set_dir(dropdown, LV_DIR_LEFT/RIGHT/UP/BOTTOM)function.
Ifthelistwouldbeverticallyoutofthescreen,itwillbealignedtotheedge.
Symbol
Asymbol(typicallyanarrow)canbeaddedtothedropdownlistwithlv_dropdown_set_symbol(dropdown,
LV_SYMBOL_...)
Ifthedirectionofthedrop-downlistisLV_DIR_LEFTthesymbolwillbeshownontheleft,otherwiseontheright.
Showselected
The main part can either show the selected option or a static text. If a static is set with
lv_dropdown_set_text(dropdown, "Some text") it will be shown regardless to th selected op-
tion. IfthetextisNULLtheselectedoptionisdisplayedonthebutton.
6.2. Corewidgets 549


--- Page 554 ---


LVGLDocumentation8.3
Manuallyopen/close
Tomanuallyopenorclosethedrop-downlistthelv_dropdown_open/close(dropdown)functioncanbeused.
Events
ApartfromtheGenericevents,thefollowingSpecialeventsaresentbythedrop-downlist:
• LV_EVENT_VALUE_CHANGEDSentwhenthenewoptionisselectedorthelistisopened/closed.
• LV_EVENT_CANCELSentwhenthelistisclosed
• LV_EVENT_READYSentwhenthelistisopened
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
• LV_KEY_RIGHT/DOWNSelectthenextoption.
• LV_KEY_LEFT/UPSelectthepreviousoption.
• LY_KEY_ENTERApplytheselectedoption(SendsLV_EVENT_VALUE_CHANGEDeventandclosesthedrop-
downlist).
LearnmoreaboutKeys.
Example
SimpleDropdownlist
#include "../../lv_examples.h"
#if LV_USE_DROPDOWN && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
char buf[32];
lv_dropdown_get_selected_str(obj, buf, sizeof(buf));
LV_LOG_USER("Option: %s", buf);
}
}
void lv_example_dropdown_1(void)
{
/*Create a normal drop down list*/
lv_obj_t * dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options(dd, "Apple\n"
"Banana\n"
"Orange\n"
"Cherry\n"
(continuesonnextpage)
6.2. Corewidgets 550


--- Page 555 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
"Grape\n"
"Raspberry\n"
"Melon\n"
"Orange\n"
"Lemon\n"
"Nuts");
lv_obj_align(dd, LV_ALIGN_TOP_MID, 0, 20);
lv_obj_add_event_cb(dd, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
option = " "*10 # should be large enough to store the option
obj.get_selected_str(option, len(option))
# .strip() removes trailing spaces
print("Option: \"%s\"" % option.strip())
# Create a normal drop down list
dd = lv.dropdown(lv.scr_act())
dd.set_options("\n".join([
"Apple",
"Banana",
"Orange",
"Cherry",
"Grape",
"Raspberry",
"Melon",
"Orange",
"Lemon",
"Nuts"]))
dd.align(lv.ALIGN.TOP_MID, 0, 20)
dd.add_event_cb(event_handler, lv.EVENT.ALL, None)
Dropdowninfourdirections
#include "../../lv_examples.h"
#if LV_USE_DROPDOWN && LV_BUILD_EXAMPLES
/**
* Create a drop down, up, left and right menus
*/
void lv_example_dropdown_2(void)
{
static const char * opts = "Apple\n"
"Banana\n"
"Orange\n"
"Melon";
(continuesonnextpage)
6.2. Corewidgets 551


--- Page 556 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * dd;
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_obj_align(dd, LV_ALIGN_TOP_MID, 0, 10);
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_dropdown_set_dir(dd, LV_DIR_BOTTOM);
lv_dropdown_set_symbol(dd, LV_SYMBOL_UP);
lv_obj_align(dd, LV_ALIGN_BOTTOM_MID, 0, -10);
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_dropdown_set_dir(dd, LV_DIR_RIGHT);
lv_dropdown_set_symbol(dd, LV_SYMBOL_RIGHT);
lv_obj_align(dd, LV_ALIGN_LEFT_MID, 10, 0);
dd = lv_dropdown_create(lv_scr_act());
lv_dropdown_set_options_static(dd, opts);
lv_dropdown_set_dir(dd, LV_DIR_LEFT);
lv_dropdown_set_symbol(dd, LV_SYMBOL_LEFT);
lv_obj_align(dd, LV_ALIGN_RIGHT_MID, -10, 0);
}
#endif
#
# Create a drop down, up, left and right menus
#
opts = "\n".join([
"Apple",
"Banana",
"Orange",
"Melon",
"Grape",
"Raspberry"])
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
dd.align(lv.ALIGN.TOP_MID, 0, 10)
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
dd.set_dir(lv.DIR.BOTTOM)
dd.set_symbol(lv.SYMBOL.UP)
dd.align(lv.ALIGN.BOTTOM_MID, 0, -10)
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
dd.set_dir(lv.DIR.RIGHT)
dd.set_symbol(lv.SYMBOL.RIGHT)
dd.align(lv.ALIGN.LEFT_MID, 10, 0)
dd = lv.dropdown(lv.scr_act())
dd.set_options_static(opts)
(continuesonnextpage)
6.2. Corewidgets 552


--- Page 557 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
dd.set_dir(lv.DIR.LEFT)
dd.set_symbol(lv.SYMBOL.LEFT)
dd.align(lv.ALIGN.RIGHT_MID, -10, 0)
Menu
#include "../../lv_examples.h"
#if LV_USE_DROPDOWN && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_obj_t * dropdown = lv_event_get_target(e);
char buf[64];
lv_dropdown_get_selected_str(dropdown, buf, sizeof(buf));
LV_LOG_USER("'%s' is selected", buf);
}
/**
* Create a menu from a drop-down list and show some drop-down list features and␣
,→styling
*/
void lv_example_dropdown_3(void)
{
/*Create a drop down list*/
lv_obj_t * dropdown = lv_dropdown_create(lv_scr_act());
lv_obj_align(dropdown, LV_ALIGN_TOP_LEFT, 10, 10);
lv_dropdown_set_options(dropdown, "New project\n"
"New file\n"
"Save\n"
"Save as ...\n"
"Open project\n"
"Recent projects\n"
"Preferences\n"
"Exit");
/*Set a fixed text to display on the button of the drop-down list*/
lv_dropdown_set_text(dropdown, "Menu");
/*Use a custom image as down icon and flip it when the list is opened*/
LV_IMG_DECLARE(img_caret_down)
lv_dropdown_set_symbol(dropdown, &img_caret_down);
lv_obj_set_style_transform_angle(dropdown, 1800, LV_PART_INDICATOR | LV_STATE_
,→CHECKED);
/*In a menu we don't need to show the last clicked item*/
lv_dropdown_set_selected_highlight(dropdown, false);
lv_obj_add_event_cb(dropdown, event_cb, LV_EVENT_VALUE_CHANGED, NULL);
}
#endif
6.2. Corewidgets 553


--- Page 558 ---


LVGLDocumentation8.3
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_caret_down.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_caret_down.png")
sys.exit()
img_caret_down_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def event_cb(e):
dropdown = e.get_target()
option = " "*64 # should be large enough to store the option
dropdown.get_selected_str(option, len(option))
print(option.strip() +" is selected")
#
# Create a menu from a drop-down list and show some drop-down list features and␣
,→styling
#
# Create a drop down list
dropdown = lv.dropdown(lv.scr_act())
dropdown.align(lv.ALIGN.TOP_LEFT, 10, 10)
dropdown.set_options("\n".join([
"New project",
"New file",
"Open project",
"Recent projects",
"Preferences",
"Exit"]))
# Set a fixed text to display on the button of the drop-down list
dropdown.set_text("Menu")
# Use a custom image as down icon and flip it when the list is opened
# LV_IMG_DECLARE(img_caret_down)
dropdown.set_symbol(img_caret_down_argb)
dropdown.set_style_transform_angle(1800, lv.PART.INDICATOR | lv.STATE.CHECKED)
# In a menu we don't need to show the last clicked item
dropdown.set_selected_highlight(False)
dropdown.add_event_cb(event_cb, lv.EVENT.VALUE_CHANGED, None)
6.2. Corewidgets 554


--- Page 559 ---


LVGLDocumentation8.3
API
Functions
LV_EXPORT_CONST_INT(LV_DROPDOWN_POS_LAST)
lv_obj_t*lv_dropdown_create(lv_obj_t*parent)
Createadrop-downlistobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewdrop-downlist
Returns pointertothecreateddrop-downlist
voidlv_dropdown_set_text(lv_obj_t*obj,constchar*txt)
Settextofthedrop-downlist'sbutton. IfsettoNULLtheselectedoption'stextwillbedisplayedonthebutton. If
settoaspecifictextthenthattextwillbeshownregardlessoftheselectedoption.
Parameters
• obj--pointertoadrop-downlistobject
• txt--thetextasastring(Onlyitspointerissaved)
voidlv_dropdown_set_options(lv_obj_t*obj,constchar*options)
Settheoptionsinadrop-downlistfromastring. Theoptionswillbecopiedandsavedintheobjectsotheoptions
canbedestroyedaftercallingthisfunction
Parameters
• obj--pointertodrop-downlistobject
• options--astringwith'
'separatedoptions. E.g. "One\nTwo\nThree"
voidlv_dropdown_set_options_static(lv_obj_t*obj,constchar*options)
Settheoptionsinadrop-downlistfromastaticstring(global,staticordynamicallyallocated). Onlythepointerof
theoptionstringwillbesaved.
Parameters
• obj--pointertodrop-downlistobject
• options--astaticstringwith'
'separatedoptions. E.g. "One\nTwo\nThree"
voidlv_dropdown_add_option(lv_obj_t*obj,constchar*option,uint32_tpos)
Addanoptionstoadrop-downlistfromastring. Onlyworksfornon-staticoptions.
Parameters
• obj--pointertodrop-downlistobject
• option--astringwithout'
'. E.g. "Four"
• pos--theinsertposition,indexedfrom0,LV_DROPDOWN_POS_LAST=endofstring
voidlv_dropdown_clear_options(lv_obj_t*obj)
Clearalloptionsinadrop-downlist. Workswithbothstaticanddynamicoptions.
Parameters obj--pointertodrop-downlistobject
6.2. Corewidgets 555


--- Page 560 ---


LVGLDocumentation8.3
voidlv_dropdown_set_selected(lv_obj_t*obj,uint16_tsel_opt)
Settheselectedoption
Parameters
• obj--pointertodrop-downlistobject
• sel_opt--idoftheselectedoption(0... numberofoption-1);
voidlv_dropdown_set_dir(lv_obj_t*obj,lv_dir_tdir)
Setthedirectionoftheadrop-downlist
Parameters
• obj--pointertoadrop-downlistobject
• dir--LV_DIR_LEFT/RIGHT/TOP/BOTTOM
voidlv_dropdown_set_symbol(lv_obj_t*obj,constvoid*symbol)
Setanarroworothersymboltodisplaywhenondrop-downlist'sbutton. Typicallyadowncaretorarrow.
Note: angleandzoomtransformationcanbeappliedifthesymbolisanimage. E.g. whendropdownischecked
(opened)rotatethesymbolby180degree
Parameters
• obj--pointertodrop-downlistobject
• symbol--atextlikeLV_SYMBOL_DOWN,animage(pointerorpath)orNULLtonotdraw
symbolicon
voidlv_dropdown_set_selected_highlight(lv_obj_t*obj,boolen)
Setwhethertheselectedoptioninthelistshouldbehighlightedornot
Parameters
• obj--pointertodrop-downlistobject
• en--true: highlightenabled;false: disabled
lv_obj_t*lv_dropdown_get_list(lv_obj_t*obj)
Getthelistofadrop-downtoallowstylingorothermodifications
Parameters obj--pointertoadrop-downlistobject
Returns pointertothelistofthedrop-down
constchar*lv_dropdown_get_text(lv_obj_t*obj)
Gettextofthedrop-downlist'sbutton.
Parameters obj--pointertoadrop-downlistobject
Returns thetextasstring,NULLifnotext
constchar*lv_dropdown_get_options(constlv_obj_t*obj)
Gettheoptionsofadrop-downlist
Parameters obj--pointertodrop-downlistobject
6.2. Corewidgets 556


--- Page 561 ---


LVGLDocumentation8.3
Returns
theoptionsseparatedby'
'-s(E.g. "Option1\nOption2\nOption3")
uint16_tlv_dropdown_get_selected(constlv_obj_t*obj)
Gettheindexoftheselectedoption
Parameters obj--pointertodrop-downlistobject
Returns indexoftheselectedoption(0... numberofoption-1);
uint16_tlv_dropdown_get_option_cnt(constlv_obj_t*obj)
Getthetotalnumberofoptions
Parameters obj--pointertodrop-downlistobject
Returns thetotalnumberofoptionsinthelist
voidlv_dropdown_get_selected_str(constlv_obj_t*obj,char*buf,uint32_tbuf_size)
Getthecurrentselectedoptionasastring
Parameters
• obj--pointertodrop-downobject
• buf--pointertoanarraytostorethestring
• buf_size--sizeofbufinbytes. 0: toignoreit.
int32_tlv_dropdown_get_option_index(lv_obj_t*obj,constchar*option)
Gettheindexofanoption.
Parameters
• obj--pointertodrop-downobject
• option--anoptionasstring
Returns indexofoptioninthelistofalloptions. -1ifnotfound.
constchar*lv_dropdown_get_symbol(lv_obj_t*obj)
Getthesymbolonthedrop-downlist. Typicallyadowncaretorarrow.
Parameters obj--pointertodrop-downlistobject
Returns thesymbolorNULLifnotenabled
boollv_dropdown_get_selected_highlight(lv_obj_t*obj)
Getwhethertheselectedoptioninthelistshouldbehighlightedornot
Parameters obj--pointertodrop-downlistobject
Returns true: highlightenabled;false: disabled
lv_dir_tlv_dropdown_get_dir(constlv_obj_t*obj)
Getthedirectionofthedrop-downlist
Parameters obj--pointertoadrop-downlistobject
Returns LV_DIR_LEF/RIGHT/TOP/BOTTOM
6.2. Corewidgets 557


--- Page 562 ---


LVGLDocumentation8.3
voidlv_dropdown_open(lv_obj_t*dropdown_obj)
Openthedrop.downlist
Parameters obj--pointertodrop-downlistobject
voidlv_dropdown_close(lv_obj_t*obj)
Close(Collapse)thedrop-downlist
Parameters obj--pointertodrop-downlistobject
boollv_dropdown_is_open(lv_obj_t*obj)
Tellswhetherthelistisopenedornot
Parameters obj--pointertoadrop-downlistobject
Returns trueifthelistosopened
Variables
constlv_obj_class_tlv_dropdown_class
constlv_obj_class_tlv_dropdownlist_class
structlv_dropdown_t
PublicMembers
lv_obj_tobj
lv_obj_t*list
Thedroppeddownlist
constchar*text
Texttodisplayonthedropdown'sbutton
constvoid*symbol
Arroworothericonwhenthedrop-downlistisclosed
char*options
Optionsina'
'separatedlist
uint16_toption_cnt
Numberofoptions
uint16_tsel_opt_id
Indexofthecurrentlyselectedoption
6.2. Corewidgets 558


--- Page 563 ---


LVGLDocumentation8.3
uint16_tsel_opt_id_orig
Storetheoriginalindexonfocus
uint16_tpr_opt_id
Indexofthecurrentlypressedoption
lv_dir_tdir
Directioninwhichthelistshouldopen
uint8_tstatic_txt
1: Onlyapointerissavedinoptions
uint8_tselected_highlight
1: Maketheselectedoptionhighlightedinthelist
structlv_dropdown_list_t
PublicMembers
lv_obj_tobj
lv_obj_t*dropdown
6.2.8 Image (lv_img)
Overview
Images are the basic object to display images from flash (as arrays) or from files. Images can display symbols
(LV_SYMBOL_...)too.
UsingtheImagedecoderinterfacecustomimageformatscanbesupportedaswell.
PartsandStyles
• LV_PART_MAINAbackgroundrectanglethatusesthetypicalbackgroundstylepropertiesandtheimageitself
usingtheimagestyleproperties.
6.2. Corewidgets 559


--- Page 564 ---


LVGLDocumentation8.3
Usage
Imagesource
Toprovidemaximumflexibility,thesourceoftheimagecanbe:
• avariableincode(aCarraywiththepixels).
• afilestoredexternally(e.g. onanSDcard).
• atextwithSymbols.
Tosetthesourceofanimage,uselv_img_set_src(img, src).
TogenerateapixelarrayfromaPNG,JPGorBMPimage, usetheOnlineimageconvertertoolandsettheconverted
image with its pointer: lv_img_set_src(img1, &converted_img_var); To make the variable visible in
theCfile,youneedtodeclareitwithLV_IMG_DECLARE(converted_img_var).
To use external files, you also need to convert the image files using the online converter tool but now you should se-
lect the binary output format. You also need to use LVGL's file system module and register a driver with some func-
tions for the basic file operation. Go to the File system to learn more. To set an image sourced from a file, use
lv_img_set_src(img, "S:folder1/my_img.bin").
You can also set a symbol similarly to Labels. In this case, the image will be rendered as text according to the font
specifiedinthestyle. Itenablestouseoflight-weightmonochrome"letters"insteadofrealimages. Youcansetsymbol
likelv_img_set_src(img1, LV_SYMBOL_OK).
Labelasanimage
Imagesandlabelsaresometimesusedtoconveythesamething. Forexample,todescribewhatabuttondoes. Therefore,
imagesandlabelsaresomewhatinterchangeable,thatistheimagescandisplaytextsbyusingLV_SYMBOL_DUMMYas
theprefixofthetext. Forexample,lv_img_set_src(img, LV_SYMBOL_DUMMY "Some text").
Transparency
Theinternal(variable)andexternalimagessupport2transparencyhandlingmethods:
• Chroma-keying-PixelswithLV_COLOR_CHROMA_KEY(lv_conf.h)colorwillbetransparent.
• Alphabyte-Analphabyteisaddedtoeverypixelthatcontainsthepixel'sopacity
PaletteandAlphaindex
BesidestheTruecolor(RGB)colorformat,thefollowingformatsaresupported:
• Indexed-Imagehasapalette.
• Alphaindexed-Onlyalphavaluesarestored.
Theseoptionscanbeselectedintheimageconverter. Tolearnmoreaboutthecolorformats,readtheImagessection.
6.2. Corewidgets 560


--- Page 565 ---


LVGLDocumentation8.3
Recolor
A color can be mixed with every pixel of an image with a given intensity. This can be useful to show different states
(checked,inactive,pressed,etc.) ofanimagewithoutstoringmoreversionsofthesameimage. Thisfeaturecanbeenabled
inthestylebysettingimg_recolor_opabetweenLV_OPA_TRANSP(norecolor,value: 0)andLV_OPA_COVER
(fullrecolor,value: 255). ThedefaultvalueisLV_OPA_TRANSPsothisfeatureisdisabled.
Thecolortomixissetbyimg_recolor.
Auto-size
IfthewidthorheightoftheimageobjectissettoLV_SIZE_CONTENTtheobject'ssizewillbesetaccordingtothesize
oftheimagesourceintherespectivedirection.
Mosaic
Iftheobject'ssizeisgreaterthantheimagesizeinanydirections, thentheimagewillberepeatedlikeamosaic. This
allowscreationalargeimagefromonlyaverynarrowsource. Forexample,youcanhavea300x5imagewithaspecial
gradientandsetitasawallpaperusingthemosaicfeature.
Offset
Withlv_img_set_offset_x(img, x_ofs)andlv_img_set_offset_y(img, y_ofs),youcanadd
some offset to the displayed image. Useful if the object size is smaller than the image source size. Using the offset
parameteraTextureatlasora"runningimage"effectcanbecreatedbyAnimatingthexoryoffset.
Transformations
Using the lv_img_set_zoom(img, factor) the images will be zoomed. Set factor to 256 or
LV_IMG_ZOOM_NONEtodisablezooming. Alargervalueenlargestheimages(e.g. 512doublesize),asmallervalue
shrinksit(e.g. 128halfsize). Fractionalscaleworksaswell. E.g. 281for10%enlargement.
Torotatetheimageuselv_img_set_angle(img, angle). Anglehas0.1degreeprecision,sofor45.8°set458.
Thetransform_zoomandtransform_anglestylepropertiesarealsousedtodeterminethefinalzoomandangle.
By default, the pivot point of the rotation is the center of the image. It can be changed with
lv_img_set_pivot(img, pivot_x, pivot_y). 0;0isthetopleftcorner.
Thequalityofthetransformationcanbeadjustedwithlv_img_set_antialias(img, true/false). With
enabledanti-aliasingthetransformationsarehigherqualitybutslower.
The transformations require the whole image to be available. Therefore indexed images (LV_IMG_CF_INDEXED_.
..), alpha only images (LV_IMG_CF_ALPHA_...) or images from files can not be transformed. In other words
transformationsworkonlyontruecolorimagesstoredasCarray,orifacustomImagedecoderreturnsthewholeimage.
Notethattherealcoordinatesofimageobjectswon'tchangeduringtransformation. Thatislv_obj_get_width/
height/x/y()willreturntheoriginal,non-zoomedcoordinates.
IMPORTANT The transformation of the image is independent of the transformation properties coming from styles.
(Seehere). Themaindifferencesarethatpureimagewidgettransformation
• doesn'ttransformthechildrenoftheimagewidget
• imageistransformeddirectlywithoutcreatinganintermediatelayer(buffer)tosnapshotthewidget
6.2. Corewidgets 561


--- Page 566 ---


LVGLDocumentation8.3
Sizemode
By default, when theimageis zoomedorrotated therealcoordinatesof theimageobject arenotchanged. Thelarger
contentsimplyoverflowstheobject'sboundaries. Italsomeansthelayoutsarenotaffectedthebythetransformations.
If you need the object size to be updated to the transformed size set lv_img_set_size_mode(img,
LV_IMG_SIZE_MODE_REAL). (The previous mode is the default and called LV_IMG_SIZE_MODE_VIRTUAL).
Inthiscaseifthewidth/heightoftheobjectissettoLV_SIZE_CONTENTtheobject'ssizewillbesettothezoomed
androtatedsize. Ifanexplicitsizeissetthentheoverflowingcontentwillbecropped.
Roundedimage
You can use lv_obj_set_style_radius to set radius to an image, and enable
lv_obj_set_style_clip_corner to clip the content to rounded rectangle or circular shape. Please note
thiswillhavesomenegativeperformanceimpacttoCPUbasedrenderers.
Events
Nospecialeventsaresentbyimageobjects.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
Imagefromvariableandsymbol
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_BUILD_EXAMPLES
void lv_example_img_1(void)
{
LV_IMG_DECLARE(img_cogwheel_argb);
lv_obj_t * img1 = lv_img_create(lv_scr_act());
lv_img_set_src(img1, &img_cogwheel_argb);
lv_obj_align(img1, LV_ALIGN_CENTER, 0, -20);
lv_obj_set_size(img1, 200, 200);
lv_obj_t * img2 = lv_img_create(lv_scr_act());
lv_img_set_src(img2, LV_SYMBOL_OK "Accept");
lv_obj_align_to(img2, img1, LV_ALIGN_OUT_BOTTOM_MID, 0, 20);
}
#endif
6.2. Corewidgets 562


--- Page 567 ---


LVGLDocumentation8.3
#!/opt/bin/lv_micropython -i
import usys as sys
import lvgl as lv
import display_driver
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_cogwheel_argb.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
img1 = lv.img(lv.scr_act())
img1.set_src(img_cogwheel_argb)
img1.align(lv.ALIGN.CENTER, 0, -20)
img1.set_size(200, 200)
img2 = lv.img(lv.scr_act())
img2.set_src(lv.SYMBOL.OK + "Accept")
img2.align_to(img1, lv.ALIGN.OUT_BOTTOM_MID, 0, 20)
Imagerecoloring
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_USE_SLIDER && LV_BUILD_EXAMPLES
static lv_obj_t * create_slider(lv_color_t color);
static void slider_event_cb(lv_event_t * e);
static lv_obj_t * red_slider, * green_slider, * blue_slider, * intense_slider;
static lv_obj_t * img1;
/**
* Demonstrate runtime image re-coloring
*/
void lv_example_img_2(void)
{
/*Create 4 sliders to adjust RGB color and re-color intensity*/
red_slider = create_slider(lv_palette_main(LV_PALETTE_RED));
green_slider = create_slider(lv_palette_main(LV_PALETTE_GREEN));
blue_slider = create_slider(lv_palette_main(LV_PALETTE_BLUE));
intense_slider = create_slider(lv_palette_main(LV_PALETTE_GREY));
(continuesonnextpage)
6.2. Corewidgets 563


--- Page 568 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_slider_set_value(red_slider, LV_OPA_20, LV_ANIM_OFF);
lv_slider_set_value(green_slider, LV_OPA_90, LV_ANIM_OFF);
lv_slider_set_value(blue_slider, LV_OPA_60, LV_ANIM_OFF);
lv_slider_set_value(intense_slider, LV_OPA_50, LV_ANIM_OFF);
lv_obj_align(red_slider, LV_ALIGN_LEFT_MID, 25, 0);
lv_obj_align_to(green_slider, red_slider, LV_ALIGN_OUT_RIGHT_MID, 25, 0);
lv_obj_align_to(blue_slider, green_slider, LV_ALIGN_OUT_RIGHT_MID, 25, 0);
lv_obj_align_to(intense_slider, blue_slider, LV_ALIGN_OUT_RIGHT_MID, 25, 0);
/*Now create the actual image*/
LV_IMG_DECLARE(img_cogwheel_argb)
img1 = lv_img_create(lv_scr_act());
lv_img_set_src(img1, &img_cogwheel_argb);
lv_obj_align(img1, LV_ALIGN_RIGHT_MID, -20, 0);
lv_event_send(intense_slider, LV_EVENT_VALUE_CHANGED, NULL);
}
static void slider_event_cb(lv_event_t * e)
{
LV_UNUSED(e);
/*Recolor the image based on the sliders' values*/
lv_color_t color = lv_color_make(lv_slider_get_value(red_slider), lv_slider_get_
,→value(green_slider),
lv_slider_get_value(blue_slider));
lv_opa_t intense = lv_slider_get_value(intense_slider);
lv_obj_set_style_img_recolor_opa(img1, intense, 0);
lv_obj_set_style_img_recolor(img1, color, 0);
}
static lv_obj_t * create_slider(lv_color_t color)
{
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_slider_set_range(slider, 0, 255);
lv_obj_set_size(slider, 10, 200);
lv_obj_set_style_bg_color(slider, color, LV_PART_KNOB);
lv_obj_set_style_bg_color(slider, lv_color_darken(color, LV_OPA_40), LV_PART_
,→INDICATOR);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
return slider;
}
#endif
#!/opt/bin/lv_micropython -i
import usys as sys
import lvgl as lv
import display_driver
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
(continuesonnextpage)
6.2. Corewidgets 564


--- Page 569 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Create an image from the png file
try:
with open('../../assets/img_cogwheel_argb.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def create_slider(color):
slider = lv.slider(lv.scr_act())
slider.set_range(0, 255)
slider.set_size(10, 200)
slider.set_style_bg_color(color, lv.PART.KNOB)
slider.set_style_bg_color(color.color_darken(lv.OPA._40), lv.PART.INDICATOR)
slider.add_event_cb(slider_event_cb, lv.EVENT.VALUE_CHANGED, None)
return slider
def slider_event_cb(e):
# Recolor the image based on the sliders' values
color = lv.color_make(red_slider.get_value(), green_slider.get_value(), blue_
,→slider.get_value())
intense = intense_slider.get_value()
img1.set_style_img_recolor_opa(intense, 0)
img1.set_style_img_recolor(color, 0)
#
# Demonstrate runtime image re-coloring
#
# Create 4 sliders to adjust RGB color and re-color intensity
red_slider = create_slider(lv.palette_main(lv.PALETTE.RED))
green_slider = create_slider(lv.palette_main(lv.PALETTE.GREEN))
blue_slider = create_slider(lv.palette_main(lv.PALETTE.BLUE))
intense_slider = create_slider(lv.palette_main(lv.PALETTE.GREY))
red_slider.set_value(lv.OPA._20, lv.ANIM.OFF)
green_slider.set_value(lv.OPA._90, lv.ANIM.OFF)
blue_slider.set_value(lv.OPA._60, lv.ANIM.OFF)
intense_slider.set_value(lv.OPA._50, lv.ANIM.OFF)
red_slider.align(lv.ALIGN.LEFT_MID, 25, 0)
green_slider.align_to(red_slider, lv.ALIGN.OUT_RIGHT_MID, 25, 0)
blue_slider.align_to(green_slider, lv.ALIGN.OUT_RIGHT_MID, 25, 0)
intense_slider.align_to(blue_slider, lv.ALIGN.OUT_RIGHT_MID, 25, 0)
# Now create the actual image
img1 = lv.img(lv.scr_act())
img1.set_src(img_cogwheel_argb)
img1.align(lv.ALIGN.RIGHT_MID, -20, 0)
lv.event_send(intense_slider, lv.EVENT.VALUE_CHANGED, None)
(continuesonnextpage)
6.2. Corewidgets 565


--- Page 570 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
Rotateandzoom
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_BUILD_EXAMPLES
static void set_angle(void * img, int32_t v)
{
lv_img_set_angle(img, v);
}
static void set_zoom(void * img, int32_t v)
{
lv_img_set_zoom(img, v);
}
/**
* Show transformations (zoom and rotation) using a pivot point.
*/
void lv_example_img_3(void)
{
LV_IMG_DECLARE(img_cogwheel_argb);
/*Now create the actual image*/
lv_obj_t * img = lv_img_create(lv_scr_act());
lv_img_set_src(img, &img_cogwheel_argb);
lv_obj_align(img, LV_ALIGN_CENTER, 50, 50);
lv_img_set_pivot(img, 0, 0); /*Rotate around the top left corner*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, img);
lv_anim_set_exec_cb(&a, set_angle);
lv_anim_set_values(&a, 0, 3600);
lv_anim_set_time(&a, 5000);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
lv_anim_set_exec_cb(&a, set_zoom);
lv_anim_set_values(&a, 128, 256);
lv_anim_set_playback_time(&a, 3000);
lv_anim_start(&a);
}
#endif
#!/opt/bin/lv_micropython -i
import usys as sys
import lvgl as lv
import display_driver
(continuesonnextpage)
6.2. Corewidgets 566


--- Page 571 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_cogwheel_argb.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_cogwheel_argb.png")
sys.exit()
img_cogwheel_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def set_angle(img, v):
img.set_angle(v)
def set_zoom(img, v):
img.set_zoom(v)
#
# Show transformations (zoom and rotation) using a pivot point.
#
# Now create the actual image
img = lv.img(lv.scr_act())
img.set_src(img_cogwheel_argb)
img.align(lv.ALIGN.CENTER, 50, 50)
img.set_pivot(0, 0) # Rotate around the top left corner
a1 = lv.anim_t()
a1.init()
a1.set_var(img)
a1.set_custom_exec_cb(lambda a,val: set_angle(img,val))
a1.set_values(0, 3600)
a1.set_time(5000)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_var(img)
a2.set_custom_exec_cb(lambda a,val: set_zoom(img,val))
a2.set_values(128, 256)
a2.set_time(5000)
a2.set_playback_time(3000)
a2.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
lv.anim_t.start(a2)
6.2. Corewidgets 567


--- Page 572 ---


LVGLDocumentation8.3
Imageoffsetandstyling
#include "../../lv_examples.h"
#if LV_USE_IMG && LV_BUILD_EXAMPLES
static void ofs_y_anim(void * img, int32_t v)
{
lv_img_set_offset_y(img, v);
}
/**
* Image styling and offset
*/
void lv_example_img_4(void)
{
LV_IMG_DECLARE(img_skew_strip);
static lv_style_t style;
lv_style_init(&style);
lv_style_set_bg_color(&style, lv_palette_main(LV_PALETTE_YELLOW));
lv_style_set_bg_opa(&style, LV_OPA_COVER);
lv_style_set_img_recolor_opa(&style, LV_OPA_COVER);
lv_style_set_img_recolor(&style, lv_color_black());
lv_obj_t * img = lv_img_create(lv_scr_act());
lv_obj_add_style(img, &style, 0);
lv_img_set_src(img, &img_skew_strip);
lv_obj_set_size(img, 150, 100);
lv_obj_center(img);
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, img);
lv_anim_set_exec_cb(&a, ofs_y_anim);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 500);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
from imagetools import get_png_info, open_png
def ofs_y_anim(img, v):
img.set_offset_y(v)
# print(img,v)
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
(continuesonnextpage)
6.2. Corewidgets 568


--- Page 573 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
with open('../../assets/img_skew_strip.png','rb') as f:
png_data = f.read()
except:
print("Could not find img_skew_strip.png")
sys.exit()
img_skew_strip = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
#
# Image styling and offset
#
style = lv.style_t()
style.init()
style.set_bg_color(lv.palette_main(lv.PALETTE.YELLOW))
style.set_bg_opa(lv.OPA.COVER)
style.set_img_recolor_opa(lv.OPA.COVER)
style.set_img_recolor(lv.color_black())
img = lv.img(lv.scr_act())
img.add_style(style, 0)
img.set_src(img_skew_strip)
img.set_size(150, 100)
img.center()
a = lv.anim_t()
a.init()
a.set_var(img)
a.set_values(0, 100)
a.set_time(3000)
a.set_playback_time(500)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a.set_custom_exec_cb(lambda a,val: ofs_y_anim(img,val))
lv.anim_t.start(a)
API
Typedefs
typedefuint8_tlv_img_size_mode_t
6.2. Corewidgets 569


--- Page 574 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Imagesizemode,whenimagesizeandobjectsizeisdifferent
Values:
enumeratorLV_IMG_SIZE_MODE_VIRTUAL
Zoom doesn't affect the coordinates of the object, however if zoomed in the image is drawn out of the its
coordinates. Thelayout'swon'tchangeonzoom
enumeratorLV_IMG_SIZE_MODE_REAL
If the object size is set to SIZE_CONTENT, then object size equals zoomed image size. It causes layout
recalculation. Iftheobjectsizeissetexplicitly,theimagewillbecroppedwhenzoomedin.
Functions
lv_obj_t*lv_img_create(lv_obj_t*parent)
Createanimageobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewimage
Returns pointertothecreatedimage
voidlv_img_set_src(lv_obj_t*obj,constvoid*src)
Settheimagedatatodisplayontheobject
Parameters
• obj--pointertoanimageobject
• src_img--1)pointertoanlv_img_dsc_tdescriptor(convertedbyLVGL'simageconverter)
(e.g. &my_img) or 2) path to an image file (e.g. "S:/dir/img.bin")or 3) a SYMBOL (e.g.
LV_SYMBOL_OK)
voidlv_img_set_offset_x(lv_obj_t*obj,lv_coord_tx)
Setanoffsetforthesourceofanimagesotheimagewillbedisplayedfromtheneworigin.
Parameters
• obj--pointertoanimage
• x--thenewoffsetalongxaxis.
voidlv_img_set_offset_y(lv_obj_t*obj,lv_coord_ty)
Setanoffsetforthesourceofanimage. sotheimagewillbedisplayedfromtheneworigin.
Parameters
• obj--pointertoanimage
• y--thenewoffsetalongyaxis.
voidlv_img_set_angle(lv_obj_t*obj,int16_tangle)
Settherotationangleoftheimage. Theimagewillberotatedaroundthesetpivotsetbylv_img_set_pivot()
Notethatindexedandalphaonlyimagescan'tbetransformed.
Parameters
6.2. Corewidgets 570


--- Page 575 ---


LVGLDocumentation8.3
• obj--pointertoanimageobject
• angle--rotationangleindegreewith0.1degreeresolution(0..3600: clockwise)
voidlv_img_set_pivot(lv_obj_t*obj,lv_coord_tx,lv_coord_ty)
Settherotationcenteroftheimage. Theimagewillberotatedaroundthispoint.
Parameters
• obj--pointertoanimageobject
• x--rotationcenterxoftheimage
• y--rotationcenteryoftheimage
voidlv_img_set_zoom(lv_obj_t*obj,uint16_tzoom)
voidlv_img_set_antialias(lv_obj_t*obj,boolantialias)
Enable/disableanti-aliasingforthetransformations(rotate,zoom)ornot. Thequalityisbetterwithanti-aliasing
looksbetterbutslower.
Parameters
• obj--pointertoanimageobject
• antialias--true: anti-aliased;false: notanti-aliased
voidlv_img_set_size_mode(lv_obj_t*obj,lv_img_size_mode_tmode)
Settheimageobjectsizemode.
Parameters
• obj--pointertoanimageobject
• mode--thenewsizemode.
constvoid*lv_img_get_src(lv_obj_t*obj)
Getthesourceoftheimage
Parameters obj--pointertoanimageobject
Returns theimagesource(symbol,filenameor::lv-img_dsc_tforCarrays)
lv_coord_tlv_img_get_offset_x(lv_obj_t*obj)
Gettheoffset'sxattributeoftheimageobject.
Parameters img--pointertoanimage
Returns offsetXvalue.
lv_coord_tlv_img_get_offset_y(lv_obj_t*obj)
Gettheoffset'syattributeoftheimageobject.
Parameters obj--pointertoanimage
Returns offsetYvalue.
uint16_tlv_img_get_angle(lv_obj_t*obj)
Gettherotationangleoftheimage.
Parameters obj--pointertoanimageobject
Returns rotationanglein0.1degrees(0..3600)
6.2. Corewidgets 571


--- Page 576 ---


LVGLDocumentation8.3
voidlv_img_get_pivot(lv_obj_t*obj,lv_point_t*pivot)
Getthepivot(rotationcenter)oftheimage.
Parameters
• img--pointertoanimageobject
• pivot--storetherotationcenterhere
uint16_tlv_img_get_zoom(lv_obj_t*obj)
Getthezoomfactoroftheimage.
Parameters obj--pointertoanimageobject
Returns zoomfactor(256: nozoom)
boollv_img_get_antialias(lv_obj_t*obj)
Getwhetherthetransformations(rotate,zoom)areanti-aliasedornot
Parameters obj--pointertoanimageobject
Returns true: anti-aliased;false: notanti-aliased
lv_img_size_mode_tlv_img_get_size_mode(lv_obj_t*obj)
Getthesizemodeoftheimage
Parameters obj--pointertoanimageobject
Returns elementoflv_img_size_mode_t
Variables
constlv_obj_class_tlv_img_class
structlv_img_t
#include<lv_img.h>Dataofimage
PublicMembers
lv_obj_tobj
constvoid*src
lv_point_toffset
lv_coord_tw
lv_coord_th
uint16_tangle
6.2. Corewidgets 572


--- Page 577 ---


LVGLDocumentation8.3
lv_point_tpivot
uint16_tzoom
uint8_tsrc_type
uint8_tcf
uint8_tantialias
uint8_tobj_size_mode
6.2.9 Label (lv_label)
Overview
Alabelisthebasicobjecttypethatisusedtodisplaytext.
PartsandStyles
• LV_PART_MAINUsesallthetypicalbackgroundpropertiesandthetextproperties. Thepaddingvaluescanbe
usedtoaddspacebetweenthetextandthebackground.
• LV_PART_SCROLLBARThescrollbarthatisshownwhenthetextislargerthanthewidget'ssize.
• LV_PART_SELECTEDTellsthestyleoftheselectedtext. Onlytext_colorandbg_colorstyleproperties
canbeused.
Usage
Settext
Youcansetthetextonalabelatruntimewithlv_label_set_text(label, "New text"). Thiswillallocate
abufferdynamically,andtheprovidedstringwillbecopiedintothatbuffer. Therefore,youdon'tneedtokeepthetext
youpasstolv_label_set_textinscopeafterthatfunctionreturns.
Withlv_label_set_text_fmt(label, "Value: %d", 15)printfformattingcanbeusedtosetthetext.
Labelsareabletoshowtextfromastaticcharacterbuffer. Todoso,uselv_label_set_text_static(label,
"Text"). Inthiscase,thetextisnotstoredinthedynamicmemoryandthegivenbufferisuseddirectlyinstead. This
meansthatthearraycan'tbealocalvariablewhichgoesoutofscopewhenthefunctionexits. Constantstringsaresafe
to use with lv_label_set_text_static (except when used with LV_LABEL_LONG_DOT, as it modifies the
bufferin-place),astheyarestoredinROMmemory,whichisalwaysaccessible.
6.2. Corewidgets 573


--- Page 578 ---


LVGLDocumentation8.3
Newline
Newlinecharactersarehandledautomaticallybythelabelobject. Youcanuse\ntomakealinebreak. Forexample:
"line1\nline2\n\nline4"
Longmodes
Bydefault,thewidthandheightofthelabelissettoLV_SIZE_CONTENT.Therefore,thesizeofthelabelisautomatically
expanded to the text size. Otherwise, if the width or height are explicitly set (using e.g.lv_obj_set_width or a
layout),thelineswiderthanthelabel'swidthcanbemanipulatedaccordingtoseverallongmodepolicies. Similarly,the
policiescanbeappliediftheheightofthetextisgreaterthantheheightofthelabel.
• LV_LABEL_LONG_WRAPWraptoolonglines. IftheheightisLV_SIZE_CONTENTthelabel'sheightwillbe
expanded,otherwisethetextwillbeclipped. (Default)
• LV_LABEL_LONG_DOTReplacesthelast3charactersfrombottomrightcornerofthelabelwithdots(.)
• LV_LABEL_LONG_SCROLLIfthetextiswiderthanthelabelscrollithorizontallybackandforth. Ifit'shigher,
scrollvertically. Onlyonedirectionisscrolledandhorizontalscrollinghashigherprecedence.
• LV_LABEL_LONG_SCROLL_CIRCULARIfthetextiswiderthanthelabelscrollithorizontallycontinuously.
Ifit'shigher,scrollvertically. Onlyonedirectionisscrolledandhorizontalscrollinghashigherprecedence.
• LV_LABEL_LONG_CLIPSimplyclipthepartsofthetextoutsidethelabel.
Youcanspecifythelongmodewithlv_label_set_long_mode(label, LV_LABEL_LONG_...)
Note that LV_LABEL_LONG_DOT manipulates the text buffer in-place in order to add/remove the dots. When
lv_label_set_text or lv_label_set_array_text are used, a separate buffer is allocated and this im-
plementationdetailisunnoticed. Thisisnotthecasewithlv_label_set_text_static. Thebufferyoupassto
lv_label_set_text_staticmustbewritableifyouplantouseLV_LABEL_LONG_DOT.
Textrecolor
Inthetext,youcanusecommandstorecolorpartsofthetext. Forexample: "Write a #ff0000 red# word".
Thisfeaturecanbeenabledindividuallyforeachlabelbylv_label_set_recolor()function,recoloringisonly
supportedwhenthetextwrappedwith##ff0000 ... #sintaxisinoneline,itisnotsupportedinwrappedtext,see
exampleLine wrap, recoloring and scrolling.
Textselection
If enabled by LV_LABEL_TEXT_SELECTION part of the text can be selected. It's similar to when
you use your mouse on a PC to select a text. The whole mechanism (click and select the text
as you drag your finger/mouse) is implemented in Text area and the Label widget only allows man-
ual text selection with lv_label_get_text_selection_start(label, start_char_index) and
lv_label_get_text_selection_start(label, end_char_index).
6.2. Corewidgets 574


--- Page 579 ---


LVGLDocumentation8.3
Verylongtexts
LVGLcanefficientlyhandleverylong(e.g. >40kcharacters)labelsbysavingsomeextradata(~12bytes)tospeedup
drawing. Toenablethisfeature,setLV_LABEL_LONG_TXT_HINT 1inlv_conf.h.
Customscrollinganimations
Some aspects of the scrolling animations in long modes LV_LABEL_LONG_SCROLL and
LV_LABEL_LONG_SCROLL_CIRCULAR can be customized by setting the animation property of a style, using
lv_style_set_anim(). Currently, only the start and repeat delay of the circular scrolling animation can be
customized. Ifyouneedtocustomizeanotheraspectofthescrollinganimation,feelfreetoopenanissueonGithubto
requestthefeature.
Symbols
Thelabelscandisplaysymbolsalongsideletters(orontheirown). ReadtheFontsectiontolearnmoreaboutthesymbols.
Events
NospecialeventsaresentbytheLabel.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
Linewrap,recoloringandscrolling
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES
/**
* Show line wrap, re-color, line align and text scrolling.
*/
void lv_example_label_1(void)
{
lv_obj_t * label1 = lv_label_create(lv_scr_act());
lv_label_set_long_mode(label1, LV_LABEL_LONG_WRAP); /*Break the long lines*/
lv_label_set_recolor(label1, true); /*Enable re-coloring by␣
,→commands in the text*/
lv_label_set_text(label1, "#0000ff Re-color# #ff00ff words# #ff0000 of a# label,␣
,→align the lines to the center "
"and wrap long text automatically.");
lv_obj_set_width(label1, 150); /*Set smaller width to make the lines wrap*/
(continuesonnextpage)
6.2. Corewidgets 575


--- Page 580 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_text_align(label1, LV_TEXT_ALIGN_CENTER, 0);
lv_obj_align(label1, LV_ALIGN_CENTER, 0, -40);
lv_obj_t * label2 = lv_label_create(lv_scr_act());
lv_label_set_long_mode(label2, LV_LABEL_LONG_SCROLL_CIRCULAR); /*Circular␣
,→scroll*/
lv_obj_set_width(label2, 150);
lv_label_set_text(label2, "It is a circularly scrolling text. ");
lv_obj_align(label2, LV_ALIGN_CENTER, 0, 40);
}
#endif
#
# Show line wrap, re-color, line align and text scrolling.
#
label1 = lv.label(lv.scr_act())
label1.set_long_mode(lv.label.LONG.WRAP) # Break the long lines*/
label1.set_recolor(True) # Enable re-coloring by commands in the␣
,→text
label1.set_text("#0000ff Re-color# #ff00ff words# #ff0000 of a# label, align the␣
,→lines to the center"
"and wrap long text automatically.")
label1.set_width(150) # Set smaller width to make the lines␣
,→wrap
label1.set_style_text_align(lv.ALIGN.CENTER, 0)
label1.align(lv.ALIGN.CENTER, 0, -40)
label2 = lv.label(lv.scr_act())
label2.set_long_mode(lv.label.LONG.SCROLL_CIRCULAR) # Circular scroll
label2.set_width(150)
label2.set_text("It is a circularly scrolling text. ")
label2.align(lv.ALIGN.CENTER, 0, 40)
Textshadow
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES
/**
* Create a fake text shadow
*/
void lv_example_label_2(void)
{
/*Create a style for the shadow*/
static lv_style_t style_shadow;
lv_style_init(&style_shadow);
lv_style_set_text_opa(&style_shadow, LV_OPA_30);
lv_style_set_text_color(&style_shadow, lv_color_black());
/*Create a label for the shadow first (it's in the background)*/
lv_obj_t * shadow_label = lv_label_create(lv_scr_act());
(continuesonnextpage)
6.2. Corewidgets 576


--- Page 581 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_add_style(shadow_label, &style_shadow, 0);
/*Create the main label*/
lv_obj_t * main_label = lv_label_create(lv_scr_act());
lv_label_set_text(main_label, "A simple method to create\n"
"shadows on a text.\n"
"It even works with\n\n"
"newlines and spaces.");
/*Set the same text for the shadow label*/
lv_label_set_text(shadow_label, lv_label_get_text(main_label));
/*Position the main label*/
lv_obj_align(main_label, LV_ALIGN_CENTER, 0, 0);
/*Shift the second label down and to the right by 2 pixel*/
lv_obj_align_to(shadow_label, main_label, LV_ALIGN_TOP_LEFT, 2, 2);
}
#endif
#
# Create a fake text shadow
#
# Create a style for the shadow
style_shadow = lv.style_t()
style_shadow.init()
style_shadow.set_text_opa(lv.OPA._30)
style_shadow.set_text_color(lv.color_black())
# Create a label for the shadow first (it's in the background)
shadow_label = lv.label(lv.scr_act())
shadow_label.add_style(style_shadow, 0)
# Create the main label
main_label = lv.label(lv.scr_act())
main_label.set_text("A simple method to create\n"
"shadows on a text.\n"
"It even works with\n\n"
"newlines and spaces.")
# Set the same text for the shadow label
shadow_label.set_text(lv.label.get_text(main_label))
# Position the main label
main_label.align(lv.ALIGN.CENTER, 0, 0)
# Shift the second label down and to the right by 2 pixel
shadow_label.align_to(main_label, lv.ALIGN.TOP_LEFT, 2, 2)
6.2. Corewidgets 577


--- Page 582 ---


LVGLDocumentation8.3
ShowLTR,RTLandChinesetexts
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES && LV_FONT_DEJAVU_16_PERSIAN_HEBREW && LV_FONT_
,→SIMSUN_16_CJK && LV_USE_BIDI
/**
* Show mixed LTR, RTL and Chinese label
*/
void lv_example_label_3(void)
{
lv_obj_t * ltr_label = lv_label_create(lv_scr_act());
lv_label_set_text(ltr_label, "In modern terminology, a microcontroller is similar␣
,→to a system on a chip (SoC).");
lv_obj_set_style_text_font(ltr_label, &lv_font_montserrat_16, 0);
lv_obj_set_width(ltr_label, 310);
lv_obj_align(ltr_label, LV_ALIGN_TOP_LEFT, 5, 5);
lv_obj_t * rtl_label = lv_label_create(lv_scr_act());
lv_label_set_text(rtl_label,
",(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0) :(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)) CPU - Central␣
,→Processing Unit).");
lv_obj_set_style_base_dir(rtl_label, LV_BASE_DIR_RTL, 0);
lv_obj_set_style_text_font(rtl_label, &lv_font_dejavu_16_persian_hebrew, 0);
lv_obj_set_width(rtl_label, 310);
lv_obj_align(rtl_label, LV_ALIGN_LEFT_MID, 5, 0);
lv_obj_t * cz_label = lv_label_create(lv_scr_act());
lv_label_set_text(cz_label,
"(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)Embedded System(cid:0)(cid:0)\n(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)");
lv_obj_set_style_text_font(cz_label, &lv_font_simsun_16_cjk, 0);
lv_obj_set_width(cz_label, 310);
lv_obj_align(cz_label, LV_ALIGN_BOTTOM_LEFT, 5, -5);
}
#endif
import fs_driver
#
# Show mixed LTR, RTL and Chinese label
#
ltr_label = lv.label(lv.scr_act())
ltr_label.set_text("In modern terminology, a microcontroller is similar to a system␣
,→on a chip (SoC).")
# ltr_label.set_style_text_font(ltr_label, &lv_font_montserrat_16, 0);
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
try:
ltr_label.set_style_text_font(ltr_label, lv.font_montserrat_16, 0)
except:
font_montserrat_16 = lv.font_load("S:../../assets/font/montserrat-16.fnt")
ltr_label.set_style_text_font(font_montserrat_16, 0)
ltr_label.set_width(310)
(continuesonnextpage)
6.2. Corewidgets 578


--- Page 583 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
ltr_label.align(lv.ALIGN.TOP_LEFT, 5, 5)
rtl_label = lv.label(lv.scr_act())
rtl_label.set_text(",(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0) (cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0) :(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)) CPU - Central␣
,→Processing Unit).")
rtl_label.set_style_base_dir(lv.BASE_DIR.RTL, 0)
rtl_label.set_style_text_font(lv.font_dejavu_16_persian_hebrew, 0)
rtl_label.set_width(310)
rtl_label.align(lv.ALIGN.LEFT_MID, 5, 0)
font_simsun_16_cjk = lv.font_load("S:../../assets/font/lv_font_simsun_16_cjk.fnt")
cz_label = lv.label(lv.scr_act())
cz_label.set_style_text_font(font_simsun_16_cjk, 0)
cz_label.set_text("(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)Embedded System(cid:0)(cid:0)\n(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)")
cz_label.set_width(310)
cz_label.align(lv.ALIGN.BOTTOM_LEFT, 5, -5)
Drawlabelwithgradientcolor
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_USE_CANVAS && LV_BUILD_EXAMPLES && LV_DRAW_COMPLEX
#define MASK_WIDTH 100
#define MASK_HEIGHT 45
static void add_mask_event_cb(lv_event_t * e)
{
static lv_draw_mask_map_param_t m;
static int16_t mask_id;
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
lv_opa_t * mask_map = lv_event_get_user_data(e);
if(code == LV_EVENT_COVER_CHECK) {
lv_event_set_cover_res(e, LV_COVER_RES_MASKED);
}
else if(code == LV_EVENT_DRAW_MAIN_BEGIN) {
lv_draw_mask_map_init(&m, &obj->coords, mask_map);
mask_id = lv_draw_mask_add(&m, NULL);
}
else if(code == LV_EVENT_DRAW_MAIN_END) {
lv_draw_mask_free_param(&m);
lv_draw_mask_remove_id(mask_id);
}
}
/**
* Draw label with gradient color
*/
void lv_example_label_4(void)
{
(continuesonnextpage)
6.2. Corewidgets 579


--- Page 584 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/* Create the mask of a text by drawing it to a canvas*/
static lv_opa_t mask_map[MASK_WIDTH * MASK_HEIGHT];
/*Create a "8 bit alpha" canvas and clear it*/
lv_obj_t * canvas = lv_canvas_create(lv_scr_act());
lv_canvas_set_buffer(canvas, mask_map, MASK_WIDTH, MASK_HEIGHT, LV_IMG_CF_ALPHA_
,→8BIT);
lv_canvas_fill_bg(canvas, lv_color_black(), LV_OPA_TRANSP);
/*Draw a label to the canvas. The result "image" will be used as mask*/
lv_draw_label_dsc_t label_dsc;
lv_draw_label_dsc_init(&label_dsc);
label_dsc.color = lv_color_white();
label_dsc.align = LV_TEXT_ALIGN_CENTER;
lv_canvas_draw_text(canvas, 5, 5, MASK_WIDTH, &label_dsc, "Text with gradient");
/*The mask is reads the canvas is not required anymore*/
lv_obj_del(canvas);
/* Create an object from where the text will be masked out.
* Now it's a rectangle with a gradient but it could be an image too*/
lv_obj_t * grad = lv_obj_create(lv_scr_act());
lv_obj_set_size(grad, MASK_WIDTH, MASK_HEIGHT);
lv_obj_center(grad);
lv_obj_set_style_bg_color(grad, lv_color_hex(0xff0000), 0);
lv_obj_set_style_bg_grad_color(grad, lv_color_hex(0x0000ff), 0);
lv_obj_set_style_bg_grad_dir(grad, LV_GRAD_DIR_HOR, 0);
lv_obj_add_event_cb(grad, add_mask_event_cb, LV_EVENT_ALL, mask_map);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/widgets/label/lv_example_label_4.py
Customizecircularscrollinganimation
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_BUILD_EXAMPLES
/**
* Show customizing the circular scrolling animation of a label with `LV_LABEL_LONG_
,→SCROLL_CIRCULAR`
* long mode.
*/
void lv_example_label_5(void)
{
static lv_anim_t animation_template;
static lv_style_t label_style;
lv_anim_init(&animation_template);
lv_anim_set_delay(&animation_template, 1000); /*Wait 1 second to start␣
,→the first scroll*/
lv_anim_set_repeat_delay(&animation_template,
(continuesonnextpage)
6.2. Corewidgets 580


--- Page 585 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
3000); /*Repeat the scroll 3 seconds after the label␣
,→scrolls back to the initial position*/
/*Initialize the label style with the animation template*/
lv_style_init(&label_style);
lv_style_set_anim(&label_style, &animation_template);
lv_obj_t * label1 = lv_label_create(lv_scr_act());
lv_label_set_long_mode(label1, LV_LABEL_LONG_SCROLL_CIRCULAR); /*Circular␣
,→scroll*/
lv_obj_set_width(label1, 150);
lv_label_set_text(label1, "It is a circularly scrolling text. ");
lv_obj_align(label1, LV_ALIGN_CENTER, 0, 40);
lv_obj_add_style(label1, &label_style, LV_STATE_DEFAULT); /*Add the␣
,→style to the label*/
}
#endif
#
# Show customizing the circular scrolling animation of a label with `LV_LABEL_LONG_
,→SCROLL_CIRCULAR` long mode.
#
label1 = lv.label(lv.scr_act())
label1.set_long_mode(lv.label.LONG.SCROLL_CIRCULAR) # Circular scroll
label1.set_width(150)
label1.set_text("It is a circularly scrolling text. ")
label1.align(lv.ALIGN.CENTER, 0, 40)
API
Typedefs
typedefuint8_tlv_label_long_mode_t
Enums
enum[anonymous]
Longmodebehaviors. Usedin'lv_label_ext_t'
Values:
enumeratorLV_LABEL_LONG_WRAP
Keeptheobjectwidth,wrapthetoolonglinesandexpandtheobjectheight
enumeratorLV_LABEL_LONG_DOT
Keepthesizeandwritedotsattheendifthetextistoolong
6.2. Corewidgets 581


--- Page 586 ---


LVGLDocumentation8.3
enumeratorLV_LABEL_LONG_SCROLL
Keepthesizeandrollthetextbackandforth
enumeratorLV_LABEL_LONG_SCROLL_CIRCULAR
Keepthesizeandrollthetextcircularly
enumeratorLV_LABEL_LONG_CLIP
Keepthesizeandclipthetextoutofit
Functions
LV_EXPORT_CONST_INT(LV_LABEL_DOT_NUM)
LV_EXPORT_CONST_INT(LV_LABEL_POS_LAST)
LV_EXPORT_CONST_INT(LV_LABEL_TEXT_SELECTION_OFF)
lv_obj_t*lv_label_create(lv_obj_t*parent)
Createalabelobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewlabel.
Returns pointertothecreatedbutton
voidlv_label_set_text(lv_obj_t*obj,constchar*text)
Setanewtextforalabel. Memorywillbeallocatedtostorethetextbythelabel.
Parameters
• obj--pointertoalabelobject
• text--'\0'terminatedcharacterstring. NULLtorefreshwiththecurrenttext.
void lv_label_set_text_fmt (lv_obj_t *obj, const char *fmt,...
) LV_FORMAT_ATTRIBUTE(2
void void lv_label_set_text_static (lv_obj_t *obj, const char *text)
Setastatictext. Itwillnotbesavedbythelabelsothe'text'variablehastobe'alive'whilethelabelexists.
Parameters
• obj--pointertoalabelobject
• text--pointertoatext. NULLtorefreshwiththecurrenttext.
voidlv_label_set_long_mode(lv_obj_t*obj,lv_label_long_mode_tlong_mode)
Setthebehaviorofthelabelwithlongertextthentheobjectsize
Parameters
• obj--pointertoalabelobject
• long_mode -- the new mode from 'lv_label_long_mode' enum. In
LV_LONG_WRAP/DOT/SCROLL/SCROLL_CIRC the size of the label should be
setAFTERthisfunction
6.2. Corewidgets 582


--- Page 587 ---


LVGLDocumentation8.3
voidlv_label_set_recolor(lv_obj_t*obj,boolen)
voidlv_label_set_text_sel_start(lv_obj_t*obj,uint32_tindex)
Setwheretextselectionshouldstart
Parameters
• obj--pointertoalabelobject
• index -- character index from where selection should start.
LV_LABEL_TEXT_SELECTION_OFFfornoselection
voidlv_label_set_text_sel_end(lv_obj_t*obj,uint32_tindex)
Setwheretextselectionshouldend
Parameters
• obj--pointertoalabelobject
• index -- character index where selection should end.
LV_LABEL_TEXT_SELECTION_OFFfornoselection
char*lv_label_get_text(constlv_obj_t*obj)
Getthetextofalabel
Parameters obj--pointertoalabelobject
Returns thetextofthelabel
lv_label_long_mode_tlv_label_get_long_mode(constlv_obj_t*obj)
Getthelongmodeofalabel
Parameters obj--pointertoalabelobject
Returns thecurrentlongmode
boollv_label_get_recolor(constlv_obj_t*obj)
Gettherecoloringattribute
Parameters obj--pointertoalabelobject
Returns true: recoloringisenabled,false: disable
voidlv_label_get_letter_pos(constlv_obj_t*obj,uint32_tchar_id,lv_point_t*pos)
Gettherelativexandycoordinatesofaletter
Parameters
• obj--pointertoalabelobject
• index--indexofthecharacter[0... textlength-1]. Expressedincharacterindex,notbyte
index(differentinUTF-8)
• pos--storetheresulthere(E.g. index=0gives0;0coordinatesifthetextifalignedtothe
left)
uint32_tlv_label_get_letter_on(constlv_obj_t*obj,lv_point_t*pos_in)
Gettheindexofletteronarelativepointofalabel.
Parameters
• obj--pointertolabelobject
• pos--pointertopointwithcoordinatesonathelabel
6.2. Corewidgets 583


--- Page 588 ---


LVGLDocumentation8.3
Returns Theindexoftheletteronthe'pos_p'point(E.g. on0;0isthe0. letterifalignedtotheleft)
Expressedincharacterindexandnotbyteindex(differentinUTF-8)
boollv_label_is_char_under_pos(constlv_obj_t*obj,lv_point_t*pos)
Checkifacharacterisdrawnunderapoint.
Parameters
• obj--pointertoalabelobject
• pos--Pointtocheckforcharacterunder
Returns whetheracharacterisdrawnunderthepoint
uint32_tlv_label_get_text_selection_start(constlv_obj_t*obj)
Gettheselectionstartindex.
Parameters obj--pointertoalabelobject.
Returns selectionstartindex. LV_LABEL_TEXT_SELECTION_OFFifnothingisselected.
uint32_tlv_label_get_text_selection_end(constlv_obj_t*obj)
Gettheselectionendindex.
Parameters obj--pointertoalabelobject.
Returns selectionendindex. LV_LABEL_TXT_SEL_OFFifnothingisselected.
voidlv_label_ins_text(lv_obj_t*obj,uint32_tpos,constchar*txt)
Insertatexttoalabel. Thelabeltextcannotbestatic.
Parameters
• obj--pointertoalabelobject
• pos--characterindextoinsert. Expressedincharacterindexandnotbyteindex. 0: before
firstchar. LV_LABEL_POS_LAST:afterlastchar.
• txt--pointertothetexttoinsert
voidlv_label_cut_text(lv_obj_t*obj,uint32_tpos,uint32_tcnt)
Deletecharactersfromalabel. Thelabeltextcannotbestatic.
Parameters
• obj--pointertoalabelobject
• pos--characterindexfromwheretocut. Expressedincharacterindexandnotbyteindex. 0:
startinfromofthefirstcharacter
• cnt--numberofcharacterstocut
Variables
constlv_obj_class_tlv_label_class
structlv_label_t
6.2. Corewidgets 584


--- Page 589 ---


LVGLDocumentation8.3
PublicMembers
lv_obj_tobj
char*text
char*tmp_ptr
chartmp[LV_LABEL_DOT_NUM+1]
unionlv_label_t::[anonymous]dot
uint32_tdot_end
lv_draw_label_hint_thint
uint32_tsel_start
uint32_tsel_end
lv_point_toffset
lv_label_long_mode_tlong_mode
uint8_tstatic_txt
uint8_trecolor
uint8_texpand
uint8_tdot_tmp_alloc
6.2.10 Line (lv_line)
Overview
TheLineobjectiscapableofdrawingstraightlinesbetweenasetofpoints.
6.2. Corewidgets 585


--- Page 590 ---


LVGLDocumentation8.3
PartsandStyles
• LV_PART_MAINusesallthetypicalbackgroundpropertiesandlinestyleproperties.
Usage
Setpoints
The points have to be stored in an lv_point_t array and passed to the object by the
lv_line_set_points(lines, point_array, point_cnt)function.
Auto-size
Bydefault,theLine'swidthandheightaresettoLV_SIZE_CONTENT.Thismeansitwillautomaticallysetitssizeto
fitallthepoints. Ifthesizeissetexplicitly,partsonthelinemaynotbevisible.
Inverty
Bydefault,they==0pointisinthetopoftheobject. Itmightbecounter-intuitiveinsomecasessotheycoordinates
can be inverted with lv_line_set_y_invert(line, true). In this case, y == 0 will be the bottom of the
object. yinvertisdisabledbydefault.
Events
OnlytheGenericeventsaresentbytheobjecttype.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
SimpleLine
#include "../../lv_examples.h"
#if LV_USE_LINE && LV_BUILD_EXAMPLES
void lv_example_line_1(void)
{
/*Create an array for the points of the line*/
static lv_point_t line_points[] = { {5, 5}, {70, 70}, {120, 10}, {180, 60}, {240,␣
,→10} };
(continuesonnextpage)
6.2. Corewidgets 586


--- Page 591 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create style*/
static lv_style_t style_line;
lv_style_init(&style_line);
lv_style_set_line_width(&style_line, 8);
lv_style_set_line_color(&style_line, lv_palette_main(LV_PALETTE_BLUE));
lv_style_set_line_rounded(&style_line, true);
/*Create a line and apply the new style*/
lv_obj_t * line1;
line1 = lv_line_create(lv_scr_act());
lv_line_set_points(line1, line_points, 5); /*Set the points*/
lv_obj_add_style(line1, &style_line, 0);
lv_obj_center(line1);
}
#endif
# Create an array for the points of the line
line_points = [ {"x":5, "y":5},
{"x":70, "y":70},
{"x":120, "y":10},
{"x":180, "y":60},
{"x":240, "y":10}]
# Create style
style_line = lv.style_t()
style_line.init()
style_line.set_line_width(8)
style_line.set_line_color(lv.palette_main(lv.PALETTE.BLUE))
style_line.set_line_rounded(True)
# Create a line and apply the new style
line1 = lv.line(lv.scr_act())
line1.set_points(line_points, 5) # Set the points
line1.add_style(style_line, 0)
line1.center()
API
Functions
lv_obj_t*lv_line_create(lv_obj_t*parent)
Createalineobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewline
Returns pointertothecreatedline
voidlv_line_set_points(lv_obj_t*obj,constlv_point_tpoints[],uint16_tpoint_num)
Setanarrayofpoints. Thelineobjectwillconnectthesepoints.
Parameters
• obj--pointertoalineobject
6.2. Corewidgets 587


--- Page 592 ---


LVGLDocumentation8.3
• points--anarrayofpoints. Onlytheaddressissaved,sothearrayneedstobealivewhile
thelineexists
• point_num--numberofpointsin'point_a'
voidlv_line_set_y_invert(lv_obj_t*obj,boolen)
Enable(ordisable)theycoordinateinversion. Ifenabledthenywillbesubtractedfromtheheightoftheobject,
thereforethey=0coordinatewillbeonthebottom.
Parameters
• obj--pointertoalineobject
• en--true: enabletheyinversion,false:disabletheyinversion
boollv_line_get_y_invert(constlv_obj_t*obj)
Gettheyinversionattribute
Parameters obj--pointertoalineobject
Returns true: yinversionisenabled,false: disabled
Variables
constlv_obj_class_tlv_line_class
structlv_line_t
PublicMembers
lv_obj_tobj
constlv_point_t*point_array
Pointertoanarraywiththepointsoftheline
uint16_tpoint_num
Numberofpointsin'point_array'
uint8_ty_inv
1: y==0willbeonthebottom
6.2.11 Roller (lv_roller)
Overview
Rollerallowsyoutosimplyselectoneoptionfromalistbyscrolling.
6.2. Corewidgets 588


--- Page 593 ---


LVGLDocumentation8.3
PartsandStyles
• LV_PART_MAINThebackgroundoftherollerusesallthetypicalbackgroundpropertiesandtextstyleproperties.
style_text_line_space adjusts the space between the options. When the Roller is scrolled and doesn't
stop exactly on an option it will scroll to the nearest valid option automatically in anim_time milliseconds as
specifiedinthestyle.
• LV_PART_SELECTEDTheselectedoptioninthemiddle. Besidesthetypicalbackgroundpropertiesitusesthe
textstylepropertiestochangetheappearanceofthetextintheselectedarea.
Usage
Setoptions
Options are passed to the Roller as a string with lv_roller_set_options(roller, options,
LV_ROLLER_MODE_NORMAL/INFINITE). The options should be separated by \n. For example: "First\
nSecond\nThird".
LV_ROLLER_MODE_INFINITEmakestherollercircular.
You can select an option manually with lv_roller_set_selected(roller, id, LV_ANIM_ON/OFF),
whereidistheindexofanoption.
Iftherollerhasalotofoptionsthenespeciallyininfinitemodetherenderedoptionsofthedisplaymightlookscrambled.
InthiscaseLV_USE_LARGE_COORDshouldbeenabledinlv_conf.h
Getselectedoption
Togettheindexofthecurrentlyselectedoptionuselv_roller_get_selected(roller).
lv_roller_get_selected_str(roller, buf, buf_size)willcopythenameoftheselectedoptionto
buf.
Visiblerows
Thenumberofvisiblerowscanbeadjustedwithlv_roller_set_visible_row_count(roller, num).
Thisfunctioncalculatestheheightwiththecurrentstyle. Ifthefont,linespace,borderwidth,etc. oftherollerchanges
thisfunctionneedstobecalledagain.
Events
• LV_EVENT_VALUE_CHANGEDSentwhenanewoptionisselected.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
6.2. Corewidgets 589


--- Page 594 ---


LVGLDocumentation8.3
Keys
• LV_KEY_RIGHT/DOWNSelectthenextoption
• LV_KEY_LEFT/UPSelectthepreviousoption
• LY_KEY_ENTERApplytheselectedoption(SendLV_EVENT_VALUE_CHANGEDevent)
Example
SimpleRoller
#include "../../lv_examples.h"
#if LV_USE_ROLLER && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
char buf[32];
lv_roller_get_selected_str(obj, buf, sizeof(buf));
LV_LOG_USER("Selected month: %s\n", buf);
}
}
/**
* An infinite roller with the name of the months
*/
void lv_example_roller_1(void)
{
lv_obj_t * roller1 = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller1,
"January\n"
"February\n"
"March\n"
"April\n"
"May\n"
"June\n"
"July\n"
"August\n"
"September\n"
"October\n"
"November\n"
"December",
LV_ROLLER_MODE_INFINITE);
lv_roller_set_visible_row_count(roller1, 4);
lv_obj_center(roller1);
lv_obj_add_event_cb(roller1, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
(continuesonnextpage)
6.2. Corewidgets 590


--- Page 595 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
option = " "*10
obj.get_selected_str(option, len(option))
print("Selected month: " + option.strip())
#
# An infinite roller with the name of the months
#
roller1 = lv.roller(lv.scr_act())
roller1.set_options("\n".join([
"January",
"February",
"March",
"April",
"May",
"June",
"July",
"August",
"September",
"October",
"November",
"December"]),lv.roller.MODE.INFINITE)
roller1.set_visible_row_count(4)
roller1.center()
roller1.add_event_cb(event_handler, lv.EVENT.ALL, None)
Stylingtheroller
#include "../../lv_examples.h"
#if LV_USE_ROLLER && LV_FONT_MONTSERRAT_22 && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
char buf[32];
lv_roller_get_selected_str(obj, buf, sizeof(buf));
LV_LOG_USER("Selected value: %s", buf);
}
}
/**
* Roller with various alignments and larger text in the selected area
*/
void lv_example_roller_2(void)
{
/*A style to make the selected option larger*/
static lv_style_t style_sel;
lv_style_init(&style_sel);
(continuesonnextpage)
6.2. Corewidgets 591


--- Page 596 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_style_set_text_font(&style_sel, &lv_font_montserrat_22);
const char * opts = "1\n2\n3\n4\n5\n6\n7\n8\n9\n10";
lv_obj_t * roller;
/*A roller on the left with left aligned text, and custom width*/
roller = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller, opts, LV_ROLLER_MODE_NORMAL);
lv_roller_set_visible_row_count(roller, 2);
lv_obj_set_width(roller, 100);
lv_obj_add_style(roller, &style_sel, LV_PART_SELECTED);
lv_obj_set_style_text_align(roller, LV_TEXT_ALIGN_LEFT, 0);
lv_obj_align(roller, LV_ALIGN_LEFT_MID, 10, 0);
lv_obj_add_event_cb(roller, event_handler, LV_EVENT_ALL, NULL);
lv_roller_set_selected(roller, 2, LV_ANIM_OFF);
/*A roller on the middle with center aligned text, and auto (default) width*/
roller = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller, opts, LV_ROLLER_MODE_NORMAL);
lv_roller_set_visible_row_count(roller, 3);
lv_obj_add_style(roller, &style_sel, LV_PART_SELECTED);
lv_obj_align(roller, LV_ALIGN_CENTER, 0, 0);
lv_obj_add_event_cb(roller, event_handler, LV_EVENT_ALL, NULL);
lv_roller_set_selected(roller, 5, LV_ANIM_OFF);
/*A roller on the right with right aligned text, and custom width*/
roller = lv_roller_create(lv_scr_act());
lv_roller_set_options(roller, opts, LV_ROLLER_MODE_NORMAL);
lv_roller_set_visible_row_count(roller, 4);
lv_obj_set_width(roller, 80);
lv_obj_add_style(roller, &style_sel, LV_PART_SELECTED);
lv_obj_set_style_text_align(roller, LV_TEXT_ALIGN_RIGHT, 0);
lv_obj_align(roller, LV_ALIGN_RIGHT_MID, -10, 0);
lv_obj_add_event_cb(roller, event_handler, LV_EVENT_ALL, NULL);
lv_roller_set_selected(roller, 8, LV_ANIM_OFF);
}
#endif
import fs_driver
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
option = " "*10
obj.get_selected_str(option, len(option))
print("Selected value: %s\n" + option.strip())
#
# Roller with various alignments and larger text in the selected area
#
# A style to make the selected option larger
style_sel = lv.style_t()
(continuesonnextpage)
6.2. Corewidgets 592


--- Page 597 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_sel.init()
try:
style_sel.set_text_font(lv.font_montserrat_22)
except:
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
print("montserrat-22 not enabled in lv_conf.h, dynamically loading the font")
font_montserrat_22 = lv.font_load("S:" + "../../assets/font/montserrat-22.fnt")
style_sel.set_text_font(font_montserrat_22)
opts = "\n".join(["1","2","3","4","5","6","7","8","9","10"])
# A roller on the left with left aligned text, and custom width
roller = lv.roller(lv.scr_act())
roller.set_options(opts, lv.roller.MODE.NORMAL)
roller.set_visible_row_count(2)
roller.set_width(100)
roller.add_style(style_sel, lv.PART.SELECTED)
roller.set_style_text_align(lv.TEXT_ALIGN.LEFT, 0)
roller.align(lv.ALIGN.LEFT_MID, 10, 0)
roller.add_event_cb(event_handler, lv.EVENT.ALL, None)
roller.set_selected(2, lv.ANIM.OFF)
# A roller in the middle with center aligned text, and auto (default) width
roller = lv.roller(lv.scr_act())
roller.set_options(opts, lv.roller.MODE.NORMAL)
roller.set_visible_row_count(3)
roller.add_style(style_sel, lv.PART.SELECTED)
roller.align(lv.ALIGN.CENTER, 0, 0)
roller.add_event_cb(event_handler, lv.EVENT.ALL, None)
roller.set_selected(5, lv.ANIM.OFF)
# A roller on the right with right aligned text, and custom width
roller = lv.roller(lv.scr_act())
roller.set_options(opts, lv.roller.MODE.NORMAL)
roller.set_visible_row_count(4)
roller.set_width(80)
roller.add_style(style_sel, lv.PART.SELECTED)
roller.set_style_text_align(lv.TEXT_ALIGN.RIGHT, 0)
roller.align(lv.ALIGN.RIGHT_MID, -10, 0)
roller.add_event_cb(event_handler, lv.EVENT.ALL, None)
roller.set_selected(8, lv.ANIM.OFF)
addfademasktoroller
#include "../../lv_examples.h"
#if LV_USE_ROLLER && LV_DRAW_COMPLEX && LV_BUILD_EXAMPLES
static void mask_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
(continuesonnextpage)
6.2. Corewidgets 593


--- Page 598 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static int16_t mask_top_id = -1;
static int16_t mask_bottom_id = -1;
if(code == LV_EVENT_COVER_CHECK) {
lv_event_set_cover_res(e, LV_COVER_RES_MASKED);
}
else if(code == LV_EVENT_DRAW_MAIN_BEGIN) {
/* add mask */
const lv_font_t * font = lv_obj_get_style_text_font(obj, LV_PART_MAIN);
lv_coord_t line_space = lv_obj_get_style_text_line_space(obj, LV_PART_MAIN);
lv_coord_t font_h = lv_font_get_line_height(font);
lv_area_t roller_coords;
lv_obj_get_coords(obj, &roller_coords);
lv_area_t rect_area;
rect_area.x1 = roller_coords.x1;
rect_area.x2 = roller_coords.x2;
rect_area.y1 = roller_coords.y1;
rect_area.y2 = roller_coords.y1 + (lv_obj_get_height(obj) - font_h - line_
,→space) / 2;
lv_draw_mask_fade_param_t * fade_mask_top = lv_mem_buf_get(sizeof(lv_draw_
,→mask_fade_param_t));
lv_draw_mask_fade_init(fade_mask_top, &rect_area, LV_OPA_TRANSP, rect_area.y1,
,→ LV_OPA_COVER, rect_area.y2);
mask_top_id = lv_draw_mask_add(fade_mask_top, NULL);
rect_area.y1 = rect_area.y2 + font_h + line_space - 1;
rect_area.y2 = roller_coords.y2;
lv_draw_mask_fade_param_t * fade_mask_bottom = lv_mem_buf_get(sizeof(lv_draw_
,→mask_fade_param_t));
lv_draw_mask_fade_init(fade_mask_bottom, &rect_area, LV_OPA_COVER, rect_area.
,→y1, LV_OPA_TRANSP, rect_area.y2);
mask_bottom_id = lv_draw_mask_add(fade_mask_bottom, NULL);
}
else if(code == LV_EVENT_DRAW_POST_END) {
lv_draw_mask_fade_param_t * fade_mask_top = lv_draw_mask_remove_id(mask_top_
,→id);
lv_draw_mask_fade_param_t * fade_mask_bottom = lv_draw_mask_remove_id(mask_
,→bottom_id);
lv_draw_mask_free_param(fade_mask_top);
lv_draw_mask_free_param(fade_mask_bottom);
lv_mem_buf_release(fade_mask_top);
lv_mem_buf_release(fade_mask_bottom);
mask_top_id = -1;
mask_bottom_id = -1;
}
}
/**
* Add a fade mask to roller.
*/
void lv_example_roller_3(void)
(continuesonnextpage)
6.2. Corewidgets 594


--- Page 599 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_bg_color(&style, lv_color_black());
lv_style_set_text_color(&style, lv_color_white());
lv_style_set_border_width(&style, 0);
lv_style_set_pad_all(&style, 0);
lv_obj_add_style(lv_scr_act(), &style, 0);
lv_obj_t * roller1 = lv_roller_create(lv_scr_act());
lv_obj_add_style(roller1, &style, 0);
lv_obj_set_style_bg_opa(roller1, LV_OPA_TRANSP, LV_PART_SELECTED);
#if LV_FONT_MONTSERRAT_22
lv_obj_set_style_text_font(roller1, &lv_font_montserrat_22, LV_PART_SELECTED);
#endif
lv_roller_set_options(roller1,
"January\n"
"February\n"
"March\n"
"April\n"
"May\n"
"June\n"
"July\n"
"August\n"
"September\n"
"October\n"
"November\n"
"December",
LV_ROLLER_MODE_NORMAL);
lv_obj_center(roller1);
lv_roller_set_visible_row_count(roller1, 3);
lv_obj_add_event_cb(roller1, mask_event_cb, LV_EVENT_ALL, NULL);
}
#endif
import fs_driver
import sys
class Lv_Roller_3():
def __init__(self):
self.mask_top_id = -1
self.mask_bottom_id = -1
#
# Add a fade mask to roller.
#
style = lv.style_t()
style.init()
style.set_bg_color(lv.color_black())
style.set_text_color(lv.color_white())
(continuesonnextpage)
6.2. Corewidgets 595


--- Page 600 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv.scr_act().add_style(style, 0)
roller1 = lv.roller(lv.scr_act())
roller1.add_style(style, 0)
roller1.set_style_border_width(0, 0)
roller1.set_style_pad_all(0, 0)
roller1.set_style_bg_opa(lv.OPA.TRANSP, lv.PART.SELECTED)
#if LV_FONT_MONTSERRAT_22
# lv_obj_set_style_text_font(roller1, &lv_font_montserrat_22, LV_PART_
,→SELECTED);
#endif
try:
roller1.set_style_text_font(lv.font_montserrat_22,lv.PART.SELECTED)
except:
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
print("montserrat-22 not enabled in lv_conf.h, dynamically loading the␣
,→font")
font_montserrat_22 = lv.font_load("S:" + "../../assets/font/montserrat-22.
,→fnt")
roller1.set_style_text_font(font_montserrat_22,lv.PART.SELECTED)
roller1.set_options("\n".join([
"January",
"February",
"March",
"April",
"May",
"June",
"July",
"August",
"September",
"October",
"November",
"December"]),lv.roller.MODE.NORMAL)
roller1.center()
roller1.set_visible_row_count(3)
roller1.add_event_cb(self.mask_event_cb, lv.EVENT.ALL, None)
def mask_event_cb(self,e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.COVER_CHECK:
e.set_cover_res(lv.COVER_RES.MASKED)
elif code == lv.EVENT.DRAW_MAIN_BEGIN:
# add mask
font = obj.get_style_text_font(lv.PART.MAIN)
line_space = obj.get_style_text_line_space(lv.PART.MAIN)
font_h = font.get_line_height()
roller_coords = lv.area_t()
obj.get_coords(roller_coords)
(continuesonnextpage)
6.2. Corewidgets 596


--- Page 601 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
rect_area = lv.area_t()
rect_area.x1 = roller_coords.x1
rect_area.x2 = roller_coords.x2
rect_area.y1 = roller_coords.y1
rect_area.y2 = roller_coords.y1 + (obj.get_height() - font_h - line_
,→space) // 2
fade_mask_top = lv.draw_mask_fade_param_t()
fade_mask_top.init(rect_area, lv.OPA.TRANSP, rect_area.y1, lv.OPA.COVER,␣
,→rect_area.y2)
self.mask_top_id = lv.draw_mask_add(fade_mask_top,None)
rect_area.y1 = rect_area.y2 + font_h + line_space - 1
rect_area.y2 = roller_coords.y2
fade_mask_bottom = lv.draw_mask_fade_param_t()
fade_mask_bottom.init(rect_area, lv.OPA.COVER, rect_area.y1, lv.OPA.
,→TRANSP, rect_area.y2)
self.mask_bottom_id = lv.draw_mask_add(fade_mask_bottom, None)
elif code == lv.EVENT.DRAW_POST_END:
fade_mask_top = lv.draw_mask_remove_id(self.mask_top_id)
fade_mask_bottom = lv.draw_mask_remove_id(self.mask_bottom_id)
# Remove the masks
lv.draw_mask_remove_id(self.mask_top_id)
lv.draw_mask_remove_id(self.mask_bottom_id)
self.mask_top_id = -1
self.mask_bottom_id = -1
roller3 = Lv_Roller_3()
API
Typedefs
typedefuint8_tlv_roller_mode_t
Enums
enum[anonymous]
Rollermode.
Values:
enumeratorLV_ROLLER_MODE_NORMAL
Normalmode(rollerendsattheendoftheoptions).
enumeratorLV_ROLLER_MODE_INFINITE
Infinitemode(rollercanbescrolledforever).
6.2. Corewidgets 597


--- Page 602 ---


LVGLDocumentation8.3
Functions
lv_obj_t*lv_roller_create(lv_obj_t*parent)
Createarollerobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewroller.
Returns pointertothecreatedroller
voidlv_roller_set_options(lv_obj_t*obj,constchar*options,lv_roller_mode_tmode)
Settheoptionsonaroller
Parameters
• obj--pointertorollerobject
• options--astringwith'
'separatedoptions. E.g. "One\nTwo\nThree"
• mode--LV_ROLLER_MODE_NORMALorLV_ROLLER_MODE_INFINITE
voidlv_roller_set_selected(lv_obj_t*obj,uint16_tsel_opt,lv_anim_enable_tanim)
Settheselectedoption
Parameters
• obj--pointertoarollerobject
• sel_opt--indexoftheselectedoption(0... numberofoption-1);
• anim_en--LV_ANIM_ON:setwithanimation;LV_ANOM_OFFsetimmediately
voidlv_roller_set_visible_row_count(lv_obj_t*obj,uint8_trow_cnt)
Settheheighttoshowthegivennumberofrows(options)
Parameters
• obj--pointertoarollerobject
• row_cnt--numberofdesiredvisiblerows
uint16_tlv_roller_get_selected(constlv_obj_t*obj)
Gettheindexoftheselectedoption
Parameters obj--pointertoarollerobject
Returns indexoftheselectedoption(0... numberofoption-1);
voidlv_roller_get_selected_str(constlv_obj_t*obj,char*buf,uint32_tbuf_size)
Getthecurrentselectedoptionasastring.
Parameters
• obj--pointertoddlistobject
• buf--pointertoanarraytostorethestring
• buf_size--sizeofbufinbytes. 0: toignoreit.
constchar*lv_roller_get_options(constlv_obj_t*obj)
Gettheoptionsofaroller
Parameters obj--pointertorollerobject
6.2. Corewidgets 598


--- Page 603 ---


LVGLDocumentation8.3
Returns
theoptionsseparatedby'
'-s(E.g. "Option1\nOption2\nOption3")
uint16_tlv_roller_get_option_cnt(constlv_obj_t*obj)
Getthetotalnumberofoptions
Parameters obj--pointertoarollerobject
Returns thetotalnumberofoptions
Variables
constlv_obj_class_tlv_roller_class
structlv_roller_t
PublicMembers
lv_obj_tobj
uint16_toption_cnt
Numberofoptions
uint16_tsel_opt_id
Indexofthecurrentoption
uint16_tsel_opt_id_ori
Storetheoriginalindexonfocus
lv_roller_mode_tmode
uint32_tmoved
6.2.12 Slider (lv_slider)
Overview
TheSliderobjectlookslikeaBarsupplementedwithaknob. Theknobcanbedraggedtosetavalue. JustlikeBar,Slider
canbeverticalorhorizontal.
6.2. Corewidgets 599


--- Page 604 ---


LVGLDocumentation8.3
PartsandStyles
• LV_PART_MAIN The background of the slider. Uses all the typical background style properties. padding
makestheindicatorsmallerintherespectivedirection.
• LV_PART_INDICATORTheindicatorthatshowsthecurrentstateoftheslider. Alsousesallthetypicalback-
groundstyleproperties.
• LV_PART_KNOBArectangle(orcircle)drawnatthecurrentvalue. Alsousesallthetypicalbackgroundproperties
todescribetheknob(s). Bydefault,theknobissquare(withanoptionalcornerradius)withsidelengthequalto
the smaller side of the slider. The knob can be made larger with the padding values. Padding values can be
asymmetrictoo.
Usage
Valueandrange
Tosetaninitialvalueuselv_slider_set_value(slider, new_value, LV_ANIM_ON/OFF).Theani-
mationtimeissetbythestyles'anim_timeproperty.
Tospecifytherange(min,maxvalues),lv_slider_set_range(slider, min , max)canbeused.
Modes
Theslidercanbeoneofthefollowingmodes:
• LV_SLIDER_MODE_NORMALAnormalsliderasdescribedabove
• LV_SLIDER_SYMMETRICALDrawtheindicatorformthezerovaluetocurrentvalue. Requiresnegativemini-
mumrangeandpositivemaximumrange.
• LV_SLIDER_RANGE Allows setting the start value too by lv_bar_set_start_value(bar,
new_value, LV_ANIM_ON/OFF).Thestartvaluehastobealwayssmallerthantheendvalue.
Themodecanbechangedwithlv_slider_set_mode(slider, LV_SLIDER_MODE_...)
Knob-onlymode
Normally, the slider can be adjusted either by dragging the knob, or by clicking on the slider bar. In the latter case
the knob moves to the point clicked and slider value changes accordingly. In some cases it is desirable to set the
slider to react on dragging the knob only. This feature is enabled by adding the LV_OBJ_FLAG_ADV_HITTEST:
lv_obj_add_flag(slider, LV_OBJ_FLAG_ADV_HITTEST).
Theextendedclickarea(setbylv_obj_set_ext_click_area(slider, value))increasestoknob'sclick
area.
6.2. Corewidgets 600


--- Page 605 ---


LVGLDocumentation8.3
Events
• LV_EVENT_VALUE_CHANGEDSentwhilethesliderisbeingdraggedorchangedwithkeys. Theeventissent
continuouslywhilethesliderisbeingdragged.
• LV_EVENT_RELEASEDSentwhenthesliderhasjustbeenreleased.
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDaresentforthefollowingparts.
– LV_SLIDER_DRAW_PART_KNOBThemain(right)knoboftheslider
∗ part: LV_PART_KNOB
∗ draw_area: areaoftheindicator
∗ rect_dsc
∗ id: 0
– LV_SLIDER_DRAW_PART_KNOBTheleftknoboftheslider
∗ part: LV_PART_KNOB
∗ draw_area: areaoftheindicator
∗ rect_dsc
∗ id: 1
SeetheeventsoftheBartoo.
LearnmoreaboutEvents.
Keys
• LV_KEY_UP/RIGHTIncrementtheslider'svalueby1
• LV_KEY_DOWN/LEFTDecrementtheslider'svalueby1
LearnmoreaboutKeys.
Example
SimpleSlider
#include "../../lv_examples.h"
#if LV_USE_SLIDER && LV_BUILD_EXAMPLES
static void slider_event_cb(lv_event_t * e);
static lv_obj_t * slider_label;
/**
* A default slider with a label displaying the current value
*/
void lv_example_slider_1(void)
{
/*Create a slider in the center of the display*/
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_center(slider);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
(continuesonnextpage)
6.2. Corewidgets 601


--- Page 606 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create a label below the slider*/
slider_label = lv_label_create(lv_scr_act());
lv_label_set_text(slider_label, "0%");
lv_obj_align_to(slider_label, slider, LV_ALIGN_OUT_BOTTOM_MID, 0, 10);
}
static void slider_event_cb(lv_event_t * e)
{
lv_obj_t * slider = lv_event_get_target(e);
char buf[8];
lv_snprintf(buf, sizeof(buf), "%d%%", (int)lv_slider_get_value(slider));
lv_label_set_text(slider_label, buf);
lv_obj_align_to(slider_label, slider, LV_ALIGN_OUT_BOTTOM_MID, 0, 10);
}
#endif
#
# A default slider with a label displaying the current value
#
def slider_event_cb(e):
slider = e.get_target()
slider_label.set_text("{:d}%".format(slider.get_value()))
slider_label.align_to(slider, lv.ALIGN.OUT_BOTTOM_MID, 0, 10)
# Create a slider in the center of the display
slider = lv.slider(lv.scr_act())
slider.center()
slider.add_event_cb(slider_event_cb, lv.EVENT.VALUE_CHANGED, None)
# Create a label below the slider
slider_label = lv.label(lv.scr_act())
slider_label.set_text("0%")
slider_label.align_to(slider, lv.ALIGN.OUT_BOTTOM_MID, 0, 10)
Sliderwithcustomstyle
#include "../../lv_examples.h"
#if LV_USE_SLIDER && LV_BUILD_EXAMPLES
/**
* Show how to style a slider.
*/
void lv_example_slider_2(void)
{
/*Create a transition*/
static const lv_style_prop_t props[] = {LV_STYLE_BG_COLOR, 0};
static lv_style_transition_dsc_t transition_dsc;
lv_style_transition_dsc_init(&transition_dsc, props, lv_anim_path_linear, 300, 0,␣
,→NULL);
(continuesonnextpage)
6.2. Corewidgets 602


--- Page 607 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static lv_style_t style_main;
static lv_style_t style_indicator;
static lv_style_t style_knob;
static lv_style_t style_pressed_color;
lv_style_init(&style_main);
lv_style_set_bg_opa(&style_main, LV_OPA_COVER);
lv_style_set_bg_color(&style_main, lv_color_hex3(0xbbb));
lv_style_set_radius(&style_main, LV_RADIUS_CIRCLE);
lv_style_set_pad_ver(&style_main, -2); /*Makes the indicator larger*/
lv_style_init(&style_indicator);
lv_style_set_bg_opa(&style_indicator, LV_OPA_COVER);
lv_style_set_bg_color(&style_indicator, lv_palette_main(LV_PALETTE_CYAN));
lv_style_set_radius(&style_indicator, LV_RADIUS_CIRCLE);
lv_style_set_transition(&style_indicator, &transition_dsc);
lv_style_init(&style_knob);
lv_style_set_bg_opa(&style_knob, LV_OPA_COVER);
lv_style_set_bg_color(&style_knob, lv_palette_main(LV_PALETTE_CYAN));
lv_style_set_border_color(&style_knob, lv_palette_darken(LV_PALETTE_CYAN, 3));
lv_style_set_border_width(&style_knob, 2);
lv_style_set_radius(&style_knob, LV_RADIUS_CIRCLE);
lv_style_set_pad_all(&style_knob, 6); /*Makes the knob larger*/
lv_style_set_transition(&style_knob, &transition_dsc);
lv_style_init(&style_pressed_color);
lv_style_set_bg_color(&style_pressed_color, lv_palette_darken(LV_PALETTE_CYAN,␣
,→2));
/*Create a slider and add the style*/
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_remove_style_all(slider); /*Remove the styles coming from the␣
,→theme*/
lv_obj_add_style(slider, &style_main, LV_PART_MAIN);
lv_obj_add_style(slider, &style_indicator, LV_PART_INDICATOR);
lv_obj_add_style(slider, &style_pressed_color, LV_PART_INDICATOR | LV_STATE_
,→PRESSED);
lv_obj_add_style(slider, &style_knob, LV_PART_KNOB);
lv_obj_add_style(slider, &style_pressed_color, LV_PART_KNOB | LV_STATE_PRESSED);
lv_obj_center(slider);
}
#endif
#
# Show how to style a slider.
#
# Create a transition
props = [lv.STYLE.BG_COLOR, 0]
transition_dsc = lv.style_transition_dsc_t()
transition_dsc.init(props, lv.anim_t.path_linear, 300, 0, None)
style_main = lv.style_t()
(continuesonnextpage)
6.2. Corewidgets 603


--- Page 608 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_indicator = lv.style_t()
style_knob = lv.style_t()
style_pressed_color = lv.style_t()
style_main.init()
style_main.set_bg_opa(lv.OPA.COVER)
style_main.set_bg_color(lv.color_hex3(0xbbb))
style_main.set_radius(lv.RADIUS.CIRCLE)
style_main.set_pad_ver(-2) # Makes the indicator larger
style_indicator.init()
style_indicator.set_bg_opa(lv.OPA.COVER)
style_indicator.set_bg_color(lv.palette_main(lv.PALETTE.CYAN))
style_indicator.set_radius(lv.RADIUS.CIRCLE)
style_indicator.set_transition(transition_dsc)
style_knob.init()
style_knob.set_bg_opa(lv.OPA.COVER)
style_knob.set_bg_color(lv.palette_main(lv.PALETTE.CYAN))
style_knob.set_border_color(lv.palette_darken(lv.PALETTE.CYAN, 3))
style_knob.set_border_width(2)
style_knob.set_radius(lv.RADIUS.CIRCLE)
style_knob.set_pad_all(6) # Makes the knob larger
style_knob.set_transition(transition_dsc)
style_pressed_color.init()
style_pressed_color.set_bg_color(lv.palette_darken(lv.PALETTE.CYAN, 2))
# Create a slider and add the style
slider = lv.slider(lv.scr_act())
slider.remove_style_all() # Remove the styles coming from the theme
slider.add_style(style_main, lv.PART.MAIN)
slider.add_style(style_indicator, lv.PART.INDICATOR)
slider.add_style(style_pressed_color, lv.PART.INDICATOR | lv.STATE.PRESSED)
slider.add_style(style_knob, lv.PART.KNOB)
slider.add_style(style_pressed_color, lv.PART.KNOB | lv.STATE.PRESSED)
slider.center()
Sliderwithextendeddrawer
#include "../../lv_examples.h"
#if LV_USE_SLIDER && LV_BUILD_EXAMPLES
static void slider_event_cb(lv_event_t * e);
/**
* Show the current value when the slider is pressed by extending the drawer
*
*/
void lv_example_slider_3(void)
{
/*Create a slider in the center of the display*/
(continuesonnextpage)
6.2. Corewidgets 604


--- Page 609 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * slider;
slider = lv_slider_create(lv_scr_act());
lv_obj_center(slider);
lv_slider_set_mode(slider, LV_SLIDER_MODE_RANGE);
lv_slider_set_value(slider, 70, LV_ANIM_OFF);
lv_slider_set_left_value(slider, 20, LV_ANIM_OFF);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_ALL, NULL);
lv_obj_refresh_ext_draw_size(slider);
}
static void slider_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
/*Provide some extra space for the value*/
if(code == LV_EVENT_REFR_EXT_DRAW_SIZE) {
lv_event_set_ext_draw_size(e, 50);
}
else if(code == LV_EVENT_DRAW_PART_END) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_INDICATOR) {
char buf[16];
lv_snprintf(buf, sizeof(buf), "%d - %d", (int)lv_slider_get_left_
,→value(obj), (int)lv_slider_get_value(obj));
lv_point_t label_size;
lv_txt_get_size(&label_size, buf, LV_FONT_DEFAULT, 0, 0, LV_COORD_MAX, 0);
lv_area_t label_area;
label_area.x1 = dsc->draw_area->x1 + lv_area_get_width(dsc->draw_area) /␣
,→2 - label_size.x / 2;
label_area.x2 = label_area.x1 + label_size.x;
label_area.y2 = dsc->draw_area->y1 - 10;
label_area.y1 = label_area.y2 - label_size.y;
lv_draw_label_dsc_t label_draw_dsc;
lv_draw_label_dsc_init(&label_draw_dsc);
label_draw_dsc.color = lv_color_hex3(0x888);
lv_draw_label(dsc->draw_ctx, &label_draw_dsc, &label_area, buf, NULL);
}
}
}
#endif
def slider_event_cb(e):
code = e.get_code()
obj = e.get_target()
# Provide some extra space for the value
if code == lv.EVENT.REFR_EXT_DRAW_SIZE:
e.set_ext_draw_size(50)
elif code == lv.EVENT.DRAW_PART_END:
(continuesonnextpage)
6.2. Corewidgets 605


--- Page 610 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# print("DRAW_PART_END")
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# print(dsc)
if dsc.part == lv.PART.INDICATOR:
label_text = "{:d} - {:d}".format(obj.get_left_value(),slider.get_value())
label_size = lv.point_t()
lv.txt_get_size(label_size, label_text, lv.font_default(), 0, 0, lv.COORD.
,→MAX, 0)
# print(label_size.x,label_size.y)
label_area = lv.area_t()
label_area.x1 = dsc.draw_area.x1 + dsc.draw_area.get_width() // 2 - label_
,→size.x // 2
label_area.x2 = label_area.x1 + label_size.x
label_area.y2 = dsc.draw_area.y1 - 10
label_area.y1 = label_area.y2 - label_size.y
label_draw_dsc = lv.draw_label_dsc_t()
label_draw_dsc.init()
dsc.draw_ctx.label(label_draw_dsc, label_area, label_text, None)
#
# Show the current value when the slider if pressed by extending the drawer
#
#
#Create a slider in the center of the display
slider = lv.slider(lv.scr_act())
slider.center()
slider.set_mode(lv.slider.MODE.RANGE)
slider.set_value(70, lv.ANIM.OFF)
slider.set_left_value(20, lv.ANIM.OFF)
slider.add_event_cb(slider_event_cb, lv.EVENT.ALL, None)
slider.refresh_ext_draw_size()
API
Typedefs
typedefuint8_tlv_slider_mode_t
6.2. Corewidgets 606


--- Page 611 ---


LVGLDocumentation8.3
Enums
enum[anonymous]
Values:
enumeratorLV_SLIDER_MODE_NORMAL
enumeratorLV_SLIDER_MODE_SYMMETRICAL
enumeratorLV_SLIDER_MODE_RANGE
enumlv_slider_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_slider_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_SLIDER_DRAW_PART_KNOB
Themain(right)knob'srectangle
enumeratorLV_SLIDER_DRAW_PART_KNOB_LEFT
Theleftknob'srectangle
Functions
lv_obj_t*lv_slider_create(lv_obj_t*parent)
Createasliderobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewslider.
Returns pointertothecreatedslider
staticinlinevoidlv_slider_set_value(lv_obj_t*obj,int32_tvalue,lv_anim_enable_tanim)
Setanewvalueontheslider
Parameters
• obj--pointertoasliderobject
• value--thenewvalue
• anim--LV_ANIM_ON:setthevaluewithananimation;LV_ANIM_OFF:changethevalue
immediately
staticinlinevoidlv_slider_set_left_value(lv_obj_t*obj,int32_tvalue,lv_anim_enable_tanim)
Setanewvaluefortheleftknobofaslider
Parameters
• obj--pointertoasliderobject
• value--newvalue
• anim--LV_ANIM_ON:setthevaluewithananimation;LV_ANIM_OFF:changethevalue
immediately
6.2. Corewidgets 607


--- Page 612 ---


LVGLDocumentation8.3
staticinlinevoidlv_slider_set_range(lv_obj_t*obj,int32_tmin,int32_tmax)
Setminimumandthemaximumvaluesofabar
Parameters
• obj--pointertothesliderobject
• min--minimumvalue
• max--maximumvalue
staticinlinevoidlv_slider_set_mode(lv_obj_t*obj,lv_slider_mode_tmode)
Setthemodeofslider.
Parameters
• obj--pointertoasliderobject
• mode--themodeoftheslider. See::lv_slider_mode_t
staticinlineint32_tlv_slider_get_value(constlv_obj_t*obj)
Getthevalueofthemainknobofaslider
Parameters obj--pointertoasliderobject
Returns thevalueofthemainknoboftheslider
staticinlineint32_tlv_slider_get_left_value(constlv_obj_t*obj)
Getthevalueoftheleftknobofaslider
Parameters obj--pointertoasliderobject
Returns thevalueoftheleftknoboftheslider
staticinlineint32_tlv_slider_get_min_value(constlv_obj_t*obj)
Gettheminimumvalueofaslider
Parameters obj--pointertoasliderobject
Returns theminimumvalueoftheslider
staticinlineint32_tlv_slider_get_max_value(constlv_obj_t*obj)
Getthemaximumvalueofaslider
Parameters obj--pointertoasliderobject
Returns themaximumvalueoftheslider
boollv_slider_is_dragged(constlv_obj_t*obj)
Givethesliderisbeingdraggedornot
Parameters obj--pointertoasliderobject
Returns true: draginprogressfalse: notdragged
staticinlinelv_slider_mode_tlv_slider_get_mode(lv_obj_t*slider)
Getthemodeoftheslider.
Parameters obj--pointertoabarobject
Returns see::lv_slider_mode_t
6.2. Corewidgets 608


--- Page 613 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_slider_class
structlv_slider_t
PublicMembers
lv_bar_tbar
lv_area_tleft_knob_area
lv_area_tright_knob_area
int32_t*value_to_set
uint8_tdragging
uint8_tleft_knob_focus
6.2.13 Switch (lv_switch)
Overview
TheSwitchlookslikealittlesliderandcanbeusedtoturnsomethingonandoff.
PartsandStyles
• LV_PART_MAINThebackgroundoftheswitchusesallthetypicalbackgroundstyleproperties. paddingmakes
theindicatorsmallerintherespectivedirection.
• LV_PART_INDICATORTheindicatorthatshowsthecurrentstateoftheswitch. Alsousesallthetypicalback-
groundstyleproperties.
• LV_PART_KNOB A rectangle (or circle) drawn at left or right side of the indicator. Also uses all the typical
backgroundpropertiestodescribetheknob(s). Bydefault,theknobissquare(withanoptionalcornerradius)with
sidelengthequaltothesmallersideoftheslider. Theknobcanbemadelargerwiththepaddingvalues. Padding
valuescanbeasymmetrictoo.
6.2. Corewidgets 609


--- Page 614 ---


LVGLDocumentation8.3
Usage
Changestate
TheswitchusesthestandardLV_STATE_CHECKEDstate.
To get the current state of the switch (with true being on), use lv_obj_has_state(switch,
LV_STATE_CHECKED).
Call lv_obj_add_state(switch, LV_STATE_CHECKED) to turn it on, or
lv_obj_clear_state(switch, LV_STATE_CHECKED)toturnitoff.
Events
• LV_EVENT_VALUE_CHANGEDSentwhentheswitchchangesstate.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
• LV_KEY_UP/RIGHTTurnsontheslider
• LV_KEY_DOWN/LEFTTurnsofftheslider
• LV_KEY_ENTERTogglestheswitch
LearnmoreaboutKeys.
Example
SimpleSwitch
#include "../../lv_examples.h"
#if LV_USE_SWITCH && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
LV_LOG_USER("State: %s\n", lv_obj_has_state(obj, LV_STATE_CHECKED) ? "On" :
,→"Off");
}
}
void lv_example_switch_1(void)
{
lv_obj_set_flex_flow(lv_scr_act(), LV_FLEX_FLOW_COLUMN);
lv_obj_set_flex_align(lv_scr_act(), LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_CENTER,␣
,→LV_FLEX_ALIGN_CENTER);
lv_obj_t * sw;
(continuesonnextpage)
6.2. Corewidgets 610


--- Page 615 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
sw = lv_switch_create(lv_scr_act());
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
sw = lv_switch_create(lv_scr_act());
lv_obj_add_state(sw, LV_STATE_CHECKED);
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
sw = lv_switch_create(lv_scr_act());
lv_obj_add_state(sw, LV_STATE_DISABLED);
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
sw = lv_switch_create(lv_scr_act());
lv_obj_add_state(sw, LV_STATE_CHECKED | LV_STATE_DISABLED);
lv_obj_add_event_cb(sw, event_handler, LV_EVENT_ALL, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
if obj.has_state(lv.STATE.CHECKED):
print("State: on")
else:
print("State: off")
lv.scr_act().set_flex_flow(lv.FLEX_FLOW.COLUMN)
lv.scr_act().set_flex_align(lv.FLEX_ALIGN.CENTER, lv.FLEX_ALIGN.CENTER, lv.FLEX_ALIGN.
,→CENTER)
sw = lv.switch(lv.scr_act())
sw.add_event_cb(event_handler,lv.EVENT.ALL, None)
sw = lv.switch(lv.scr_act())
sw.add_state(lv.STATE.CHECKED)
sw.add_event_cb(event_handler, lv.EVENT.ALL, None)
sw = lv.switch(lv.scr_act())
sw.add_state(lv.STATE.DISABLED)
sw.add_event_cb(event_handler, lv.EVENT.ALL, None)
sw = lv.switch(lv.scr_act())
sw.add_state(lv.STATE.CHECKED | lv.STATE.DISABLED)
sw.add_event_cb(event_handler, lv.EVENT.ALL, None)
6.2. Corewidgets 611


--- Page 616 ---


LVGLDocumentation8.3
API
Functions
lv_obj_t*lv_switch_create(lv_obj_t*parent)
Createaswitchobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewswitch
Returns pointertothecreatedswitch
Variables
constlv_obj_class_tlv_switch_class
structlv_switch_t
PublicMembers
lv_obj_tobj
int32_tanim_state
6.2.14 Table (lv_table)
Overview
Tables,asusual,arebuiltfromrows,columns,andcellscontainingtexts.
TheTableobjectisverylightweightbecauseonlythetextsarestored. Norealobjectsarecreatedforcellsbuttheyare
justdrawnonthefly.
TheTableisaddedtothedefaultgroup(ifitisset). BesidestheTableisaneditableobjecttoallowselectingacellwith
encodernavigationtoo.
PartsandStyles
• LV_PART_MAINThebackgroundofthetableusesallthetypicalbackgroundstyleproperties.
• LV_PART_ITEMSThecellsofthetablealsouseallthetypicalbackgroundstylepropertiesandthetextproperties.
6.2. Corewidgets 612


--- Page 617 ---


LVGLDocumentation8.3
Usage
Setcellvalue
Thecellscanstoreonlytextsonumbersneedtobeconvertedtotextbeforedisplayingtheminatable.
lv_table_set_cell_value(table, row, col, "Content"). Thetextissavedbythetablesoitcanbe
evenalocalvariable.
Linebreakscanbeusedinthetextlike"Value\n60.3".
Newrowsandcolumnsareautomaticallyaddedisrequired
RowsandColumns
To explicitly set number of rows and columns use lv_table_set_row_cnt(table, row_cnt) and
lv_table_set_col_cnt(table, col_cnt)
WidthandHeight
Thewidthofthecolumnscanbesetwithlv_table_set_col_width(table, col_id, width). Theoverall
widthoftheTableobjectwillbesettothesumofcolumnswidths.
Theheightiscalculatedautomaticallyfromthecellstyles(font,paddingetc)andthenumberofrows.
Mergecells
Cells can be merged horizontally with lv_table_add_cell_ctrl(table, row, col,
LV_TABLE_CELL_CTRL_MERGE_RIGHT).Tomergemoreadjacentcellscallthisfunctionforeachcell.
Scroll
Ifthelabel'swidthorheightissettoLV_SIZE_CONTENTthatsizewillbeusedtoshowthewholetableintherespective
direction. E.g. lv_obj_set_size(table, LV_SIZE_CONTENT, LV_SIZE_CONTENT)automaticallysets
thetablesizetoshowallthecolumnsandrows.
Ifthewidthorheightissettoasmallernumberthanthe"intrinsic"sizethenthetablebecomesscrollable.
Events
• LV_EVENT_VALUE_CHANGEDSentwhenanewcellisselectedwithkeys.
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDaresentforthefollowingtypes:
– LV_TABLE_DRAW_PART_CELLTheindividualcellsofthetable
∗ part: LV_PART_ITEMS
∗ draw_area: areaoftheindicator
∗ rect_dsc
∗ label_dsc
∗ id: currentrow×colcount+currentcolumn
6.2. Corewidgets 613


--- Page 618 ---


LVGLDocumentation8.3
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
ThefollowingKeysareprocessedbytheTables:
• LV_KEY_RIGHT/LEFT/UP/DOWN/Selectacell.
Note that, as usual, the state of LV_KEY_ENTER is translated to LV_EVENT_PRESSED/PRESSING/RELEASED
etc.
lv_table_get_selected_cell(table, &row, &col)canbeusedtogetthecurrentlyselectedcell. Row
andcolumnwillbesettoLV_TABLE_CELL_NONEnocellisselected.
LearnmoreaboutKeys.
Example
Simpletable
#include "../../lv_examples.h"
#if LV_USE_TABLE && LV_BUILD_EXAMPLES
static void draw_part_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*If the cells are drawn...*/
if(dsc->part == LV_PART_ITEMS) {
uint32_t row = dsc->id / lv_table_get_col_cnt(obj);
uint32_t col = dsc->id - row * lv_table_get_col_cnt(obj);
/*Make the texts in the first cell center aligned*/
if(row == 0) {
dsc->label_dsc->align = LV_TEXT_ALIGN_CENTER;
dsc->rect_dsc->bg_color = lv_color_mix(lv_palette_main(LV_PALETTE_BLUE),␣
,→dsc->rect_dsc->bg_color, LV_OPA_20);
dsc->rect_dsc->bg_opa = LV_OPA_COVER;
}
/*In the first column align the texts to the right*/
else if(col == 0) {
dsc->label_dsc->align = LV_TEXT_ALIGN_RIGHT;
}
/*MAke every 2nd row grayish*/
if((row != 0 && row % 2) == 0) {
dsc->rect_dsc->bg_color = lv_color_mix(lv_palette_main(LV_PALETTE_GREY),␣
,→dsc->rect_dsc->bg_color, LV_OPA_10);
dsc->rect_dsc->bg_opa = LV_OPA_COVER;
}
}
}
void lv_example_table_1(void)
(continuesonnextpage)
6.2. Corewidgets 614


--- Page 619 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
lv_obj_t * table = lv_table_create(lv_scr_act());
/*Fill the first column*/
lv_table_set_cell_value(table, 0, 0, "Name");
lv_table_set_cell_value(table, 1, 0, "Apple");
lv_table_set_cell_value(table, 2, 0, "Banana");
lv_table_set_cell_value(table, 3, 0, "Lemon");
lv_table_set_cell_value(table, 4, 0, "Grape");
lv_table_set_cell_value(table, 5, 0, "Melon");
lv_table_set_cell_value(table, 6, 0, "Peach");
lv_table_set_cell_value(table, 7, 0, "Nuts");
/*Fill the second column*/
lv_table_set_cell_value(table, 0, 1, "Price");
lv_table_set_cell_value(table, 1, 1, "$7");
lv_table_set_cell_value(table, 2, 1, "$4");
lv_table_set_cell_value(table, 3, 1, "$6");
lv_table_set_cell_value(table, 4, 1, "$2");
lv_table_set_cell_value(table, 5, 1, "$5");
lv_table_set_cell_value(table, 6, 1, "$1");
lv_table_set_cell_value(table, 7, 1, "$9");
/*Set a smaller height to the table. It'll make it scrollable*/
lv_obj_set_height(table, 200);
lv_obj_center(table);
/*Add an event callback to to apply some custom drawing*/
lv_obj_add_event_cb(table, draw_part_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
}
#endif
def draw_part_event_cb(e):
obj = e.get_target()
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# If the cells are drawn../
if dsc.part == lv.PART.ITEMS:
row = dsc.id // obj.get_col_cnt()
col = dsc.id - row * obj.get_col_cnt()
# Make the texts in the first cell center aligned
if row == 0:
dsc.label_dsc.align = lv.TEXT_ALIGN.CENTER
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.BLUE).color_mix(dsc.
,→rect_dsc.bg_color, lv.OPA._20)
dsc.rect_dsc.bg_opa = lv.OPA.COVER
# In the first column align the texts to the right
elif col == 0:
dsc.label_dsc.flag = lv.TEXT_ALIGN.RIGHT
# Make every 2nd row grayish
if row != 0 and (row % 2) == 0:
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.GREY).color_mix(dsc.
,→rect_dsc.bg_color, lv.OPA._10)
(continuesonnextpage)
6.2. Corewidgets 615


--- Page 620 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
dsc.rect_dsc.bg_opa = lv.OPA.COVER
table = lv.table(lv.scr_act())
# Fill the first column
table.set_cell_value(0, 0, "Name")
table.set_cell_value(1, 0, "Apple")
table.set_cell_value(2, 0, "Banana")
table.set_cell_value(3, 0, "Lemon")
table.set_cell_value(4, 0, "Grape")
table.set_cell_value(5, 0, "Melon")
table.set_cell_value(6, 0, "Peach")
table.set_cell_value(7, 0, "Nuts")
# Fill the second column
table.set_cell_value(0, 1, "Price")
table.set_cell_value(1, 1, "$7")
table.set_cell_value(2, 1, "$4")
table.set_cell_value(3, 1, "$6")
table.set_cell_value(4, 1, "$2")
table.set_cell_value(5, 1, "$5")
table.set_cell_value(6, 1, "$1")
table.set_cell_value(7, 1, "$9")
# Set a smaller height to the table. It'll make it scrollable
table.set_height(200)
table.center()
# Add an event callback to apply some custom drawing
table.add_event_cb(draw_part_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
Lightweightedlistfromtable
#include "../../lv_examples.h"
#if LV_USE_TABLE && LV_BUILD_EXAMPLES
#define ITEM_CNT 200
static void draw_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
/*If the cells are drawn...*/
if(dsc->part == LV_PART_ITEMS) {
bool chk = lv_table_has_cell_ctrl(obj, dsc->id, 0, LV_TABLE_CELL_CTRL_CUSTOM_
,→1);
lv_draw_rect_dsc_t rect_dsc;
lv_draw_rect_dsc_init(&rect_dsc);
rect_dsc.bg_color = chk ? lv_theme_get_color_primary(obj) : lv_palette_
,→lighten(LV_PALETTE_GREY, 2);
rect_dsc.radius = LV_RADIUS_CIRCLE;
(continuesonnextpage)
6.2. Corewidgets 616


--- Page 621 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_area_t sw_area;
sw_area.x1 = dsc->draw_area->x2 - 50;
sw_area.x2 = sw_area.x1 + 40;
sw_area.y1 = dsc->draw_area->y1 + lv_area_get_height(dsc->draw_area) / 2 - 10;
sw_area.y2 = sw_area.y1 + 20;
lv_draw_rect(dsc->draw_ctx, &rect_dsc, &sw_area);
rect_dsc.bg_color = lv_color_white();
if(chk) {
sw_area.x2 -= 2;
sw_area.x1 = sw_area.x2 - 16;
}
else {
sw_area.x1 += 2;
sw_area.x2 = sw_area.x1 + 16;
}
sw_area.y1 += 2;
sw_area.y2 -= 2;
lv_draw_rect(dsc->draw_ctx, &rect_dsc, &sw_area);
}
}
static void change_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
uint16_t col;
uint16_t row;
lv_table_get_selected_cell(obj, &row, &col);
bool chk = lv_table_has_cell_ctrl(obj, row, 0, LV_TABLE_CELL_CTRL_CUSTOM_1);
if(chk) lv_table_clear_cell_ctrl(obj, row, 0, LV_TABLE_CELL_CTRL_CUSTOM_1);
else lv_table_add_cell_ctrl(obj, row, 0, LV_TABLE_CELL_CTRL_CUSTOM_1);
}
/**
* A very light-weighted list created from table
*/
void lv_example_table_2(void)
{
/*Measure memory usage*/
lv_mem_monitor_t mon1;
lv_mem_monitor(&mon1);
uint32_t t = lv_tick_get();
lv_obj_t * table = lv_table_create(lv_scr_act());
/*Set a smaller height to the table. It'll make it scrollable*/
lv_obj_set_size(table, LV_SIZE_CONTENT, 200);
lv_table_set_col_width(table, 0, 150);
lv_table_set_row_cnt(table, ITEM_CNT); /*Not required but avoids a lot of memory␣
,→reallocation lv_table_set_set_value*/
lv_table_set_col_cnt(table, 1);
/*Don't make the cell pressed, we will draw something different in the event*/
lv_obj_remove_style(table, NULL, LV_PART_ITEMS | LV_STATE_PRESSED);
(continuesonnextpage)
6.2. Corewidgets 617


--- Page 622 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
uint32_t i;
for(i = 0; i < ITEM_CNT; i++) {
lv_table_set_cell_value_fmt(table, i, 0, "Item %"LV_PRIu32, i + 1);
}
lv_obj_align(table, LV_ALIGN_CENTER, 0, -20);
/*Add an event callback to to apply some custom drawing*/
lv_obj_add_event_cb(table, draw_event_cb, LV_EVENT_DRAW_PART_END, NULL);
lv_obj_add_event_cb(table, change_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_mem_monitor_t mon2;
lv_mem_monitor(&mon2);
uint32_t mem_used = mon1.free_size - mon2.free_size;
uint32_t elaps = lv_tick_elaps(t);
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text_fmt(label, "%"LV_PRIu32" items were created in %"LV_PRIu32" ms\n
,→"
"using %"LV_PRIu32" bytes of memory",
ITEM_CNT, elaps, mem_used);
lv_obj_align(label, LV_ALIGN_BOTTOM_MID, 0, -10);
}
#endif
from utime import ticks_ms
import gc
ITEM_CNT = 200
def draw_event_cb(e):
obj = e.get_target()
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# If the cells are drawn...
if dsc.part == lv.PART.ITEMS:
chk = obj.has_cell_ctrl(dsc.id, 0, lv.table.CELL_CTRL.CUSTOM_1)
rect_dsc = lv.draw_rect_dsc_t()
rect_dsc.init()
if chk:
rect_dsc.bg_color = lv.theme_get_color_primary(obj)
else:
rect_dsc.bg_color = lv.palette_lighten(lv.PALETTE.GREY, 2)
rect_dsc.radius = lv.RADIUS.CIRCLE
sw_area = lv.area_t()
sw_area.x1 = dsc.draw_area.x2 - 50
sw_area.x2 = sw_area.x1 + 40
(continuesonnextpage)
6.2. Corewidgets 618


--- Page 623 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
sw_area.y1 = dsc.draw_area.y1 + dsc.draw_area.get_height() // 2 - 10
sw_area.y2 = sw_area.y1 + 20
dsc.draw_ctx.rect(rect_dsc, sw_area)
rect_dsc.bg_color = lv.color_white()
if chk:
sw_area.x2 -= 2
sw_area.x1 = sw_area.x2 - 16
else:
sw_area.x1 += 2
sw_area.x2 = sw_area.x1 + 16
sw_area.y1 += 2
sw_area.y2 -= 2
dsc.draw_ctx.rect(rect_dsc, sw_area)
def change_event_cb(e):
obj = e.get_target()
row = lv.C_Pointer()
col = lv.C_Pointer()
table.get_selected_cell(row, col)
# print("row: ",row.uint_val)
chk = table.has_cell_ctrl(row.uint_val, 0, lv.table.CELL_CTRL.CUSTOM_1)
if chk:
table.clear_cell_ctrl(row.uint_val, 0, lv.table.CELL_CTRL.CUSTOM_1)
else:
table.add_cell_ctrl(row.uint_val, 0, lv.table.CELL_CTRL.CUSTOM_1)
#
# A very light-weighted list created from table
#
# Measure memory usage
gc.enable()
gc.collect()
mem_free = gc.mem_free()
print("mem_free: ", mem_free)
t = ticks_ms()
print("ticks: ", t)
table = lv.table(lv.scr_act())
# Set a smaller height to the table. It'll make it scrollable
table.set_size(150, 200)
table.set_col_width(0, 150)
table.set_row_cnt(ITEM_CNT) # Not required but avoids a lot of memory reallocation␣
,→lv_table_set_set_value
table.set_col_cnt(1)
# Don't make the cell pressed, we will draw something different in the event
table.remove_style(None, lv.PART.ITEMS | lv.STATE.PRESSED)
for i in range(ITEM_CNT):
table.set_cell_value(i, 0, "Item " + str(i+1))
table.align(lv.ALIGN.CENTER, 0, -20)
(continuesonnextpage)
6.2. Corewidgets 619


--- Page 624 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Add an event callback to apply some custom drawing
table.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_END, None)
table.add_event_cb(change_event_cb, lv.EVENT.VALUE_CHANGED, None)
gc.collect()
mem_used = mem_free - gc.mem_free()
elaps = ticks_ms()-t
label = lv.label(lv.scr_act())
label.set_text(str(ITEM_CNT) + " items were created in " + str(elaps) + " ms\n using
,→" + str(mem_used) + " bytes of memory")
#label.set_text(str(ITEM_CNT) + " items were created in " + str(elaps) + " ms")
label.align(lv.ALIGN.BOTTOM_MID, 0, -10)
MicroPython
Noexamplesyet.
API
Typedefs
typedefuint8_tlv_table_cell_ctrl_t
Enums
enum[anonymous]
Values:
enumeratorLV_TABLE_CELL_CTRL_MERGE_RIGHT
enumeratorLV_TABLE_CELL_CTRL_TEXT_CROP
enumeratorLV_TABLE_CELL_CTRL_CUSTOM_1
enumeratorLV_TABLE_CELL_CTRL_CUSTOM_2
enumeratorLV_TABLE_CELL_CTRL_CUSTOM_3
enumeratorLV_TABLE_CELL_CTRL_CUSTOM_4
6.2. Corewidgets 620


--- Page 625 ---


LVGLDocumentation8.3
enumlv_table_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_table_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_TABLE_DRAW_PART_CELL
Acell
Functions
LV_EXPORT_CONST_INT(LV_TABLE_CELL_NONE)
lv_obj_t*lv_table_create(lv_obj_t*parent)
Createatableobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewtable
Returns pointertothecreatedtable
voidlv_table_set_cell_value(lv_obj_t*obj,uint16_trow,uint16_tcol,constchar*txt)
Setthevalueofacell.
Note: Newroes/columnsareaddedautomaticallyifrequired
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
• txt--texttodisplayinthecell. Itwillbecopiedandsavedsothisvariableisnotrequired
afterthisfunctioncall.
voidlv_table_set_cell_value_fmt(lv_obj_t*obj,uint16_trow,uint16_tcol,constchar*fmt,...)
Setthevalueofacell. Memorywillbeallocatedtostorethetextbythetable.
Note: Newroes/columnsareaddedautomaticallyifrequired
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
• fmt--printf-likeformat
6.2. Corewidgets 621


--- Page 626 ---


LVGLDocumentation8.3
voidlv_table_set_row_cnt(lv_obj_t*obj,uint16_trow_cnt)
Setthenumberofrows
Parameters
• obj--tablepointertoaTableobject
• row_cnt--numberofrows
voidlv_table_set_col_cnt(lv_obj_t*obj,uint16_tcol_cnt)
Setthenumberofcolumns
Parameters
• obj--tablepointertoaTableobject
• col_cnt--numberofcolumns.
voidlv_table_set_col_width(lv_obj_t*obj,uint16_tcol_id,lv_coord_tw)
Setthewidthofacolumn
Parameters
• obj--tablepointertoaTableobject
• col_id--idofthecolumn[0.. LV_TABLE_COL_MAX-1]
• w--widthofthecolumn
voidlv_table_add_cell_ctrl(lv_obj_t*obj,uint16_trow,uint16_tcol,lv_table_cell_ctrl_tctrl)
Addcontrolbitstothecell.
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
• ctrl--OR-edvaluesfrom::lv_table_cell_ctrl_t
voidlv_table_clear_cell_ctrl(lv_obj_t*obj,uint16_trow,uint16_tcol,lv_table_cell_ctrl_tctrl)
Clearcontrolbitsofthecell.
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
• ctrl--OR-edvaluesfrom::lv_table_cell_ctrl_t
voidlv_table_set_cell_user_data(lv_obj_t*obj,uint16_trow,uint16_tcol,void*user_data)
Addcustomuserdatatothecell.
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
• user_data--pointertothenewuser_data. Itmustbeallocatedbyuserasitwillbefreed
automatically
6.2. Corewidgets 622


--- Page 627 ---


LVGLDocumentation8.3
constchar*lv_table_get_cell_value(lv_obj_t*obj,uint16_trow,uint16_tcol)
Getthevalueofacell.
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
Returns textinthecell
uint16_tlv_table_get_row_cnt(lv_obj_t*obj)
Getthenumberofrows.
Parameters obj--tablepointertoaTableobject
Returns numberofrows.
uint16_tlv_table_get_col_cnt(lv_obj_t*obj)
Getthenumberofcolumns.
Parameters obj--tablepointertoaTableobject
Returns numberofcolumns.
lv_coord_tlv_table_get_col_width(lv_obj_t*obj,uint16_tcol)
Getthewidthofacolumn
Parameters
• obj--tablepointertoaTableobject
• col--idofthecolumn[0.. LV_TABLE_COL_MAX-1]
Returns widthofthecolumn
boollv_table_has_cell_ctrl(lv_obj_t*obj,uint16_trow,uint16_tcol,lv_table_cell_ctrl_tctrl)
Getwhetheracellhasthecontrolbits
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
• ctrl--OR-edvaluesfrom::lv_table_cell_ctrl_t
Returns true: allcontrolbitsareset;false: notallcontrolbitsareset
voidlv_table_get_selected_cell(lv_obj_t*obj,uint16_t*row,uint16_t*col)
Gettheselectedcell(pressedandorfocused)
Parameters
• obj--pointertoatableobject
• row -- pointer to variable to store the selected row (LV_TABLE_CELL_NONE: if no cell
selected)
• col--pointertovariabletostoretheselectedcolumn(LV_TABLE_CELL_NONE:ifnocell
selected)
6.2. Corewidgets 623


--- Page 628 ---


LVGLDocumentation8.3
void*lv_table_get_cell_user_data(lv_obj_t*obj,uint16_trow,uint16_tcol)
Getcustomuserdatatothecell.
Parameters
• obj--pointertoaTableobject
• row--idoftherow[0.. row_cnt-1]
• col--idofthecolumn[0.. col_cnt-1]
Variables
constlv_obj_class_tlv_table_class
structlv_table_cell_t
PublicMembers
lv_table_cell_ctrl_tctrl
void*user_data
Customuserdata
chartxt[]
structlv_table_t
PublicMembers
lv_obj_tobj
uint16_tcol_cnt
uint16_trow_cnt
lv_table_cell_t**cell_data
lv_coord_t*row_h
lv_coord_t*col_w
uint16_tcol_act
uint16_trow_act
6.2. Corewidgets 624


--- Page 629 ---


LVGLDocumentation8.3
6.2.15 Text area (lv_textarea)
Overview
TheTextArea isa Base object witha Label anda cursor onit. Texts orcharacters canbe addedto it. Long linesare
wrappedandwhenthetextbecomeslongenoughtheTextareacanbescrolled.
Onelinemodeandpasswordmodesaresupported.
PartsandStyles
• LV_PART_MAINThebackgroundofthetextarea. Usesallthetypicalbackgroundstylepropertiesandthetext
relatedstylepropertiesincludingtext_aligntoalignthetexttotheleft,rightorcenter.
• LV_PART_SCROLLBARThescrollbarthatisshownwhenthetextistoolong.
• LV_PART_SELECTED Determines the style of the selected text. Only text_color and bg_color style
propertiescanbeused. bg_colorshouldbesetdirectlyonthelabelofthetextarea.
• LV_PART_CURSORMarksthepositionwherethecharactersareinserted. Thecursor'sareaisalwaysthebounding
boxofthecurrentcharacter. Ablockcursorcanbecreatedbyaddingabackgroundcolorandbackgroundopacity
to LV_PART_CURSOR's style. The create line cursor leave the cursor transparent and set a left border. The
anim_timestylepropertysetsthecursor'sblinktime.
• LV_PART_TEXTAREA_PLACEHOLDERUniquetoTextArea,allowsstylingtheplaceholdertext.
Usage
Addtext
Youcaninserttextorcharacterstothecurrentcursor'spositionwith:
• lv_textarea_add_char(textarea, 'c')
• lv_textarea_add_text(textarea, "insert this text")
Toaddwidecharacterslike'á','ß'orCJKcharactersuselv_textarea_add_text(ta, "á").
lv_textarea_set_text(ta, "New text")changesthewholetext.
Placeholder
A placeholder text can be specified - which is displayed when the Text area is empty - with
lv_textarea_set_placeholder_text(ta, "Placeholder text")
6.2. Corewidgets 625


--- Page 630 ---


LVGLDocumentation8.3
Deletecharacter
Todeleteacharacterfromtheleftofthecurrentcursorpositionuselv_textarea_del_char(textarea). To
deletefromtherightuselv_textarea_del_char_forward(textarea)
Movethecursor
Thecursorpositioncanbemodifieddirectlylikelv_textarea_set_cursor_pos(textarea, 10). The0
positionmeans"beforethefirstcharacters",LV_TA_CURSOR_LASTmeans"afterthelastcharacter"
Youcanstepthecursorwith
• lv_textarea_cursor_right(textarea)
• lv_textarea_cursor_left(textarea)
• lv_textarea_cursor_up(textarea)
• lv_textarea_cursor_down(textarea)
Iflv_textarea_set_cursor_click_pos(textarea, true)isappliedthecursorwilljumptotheposition
wheretheTextareawasclicked.
Hidethecursor
Thecursorisalwaysvisible,howeveritcanbeagoodideatostyleittobevisibleonlyinLV_STATE_FOCUSEDstate.
Onelinemode
TheTextareacanbeconfiguredtobeonasinglelinewithlv_textarea_set_one_line(textarea, true).
In this mode the height is set automatically to show only one line, line break characters are ignored, and word wrap is
disabled.
Passwordmode
Thetextareasupportspasswordmodewhichcanbeenabledwithlv_textarea_set_password_mode(textarea,
true).
Bydefault, ifthe•(Bullet, U+2022)characterexistsinthefont, theenteredcharactersareconvertedtoitaftersome
time or when a new character is entered. If • does not exist in the font, * will be used. You can override the default
characterwithlv_textarea_set_password_bullet(textarea, "x").
Inpasswordmodelv_textarea_get_text(textarea)returnstheactualtextentered,notthebulletcharacters.
ThevisibilitytimecanbeadjustedwithLV_TEXTAREA_DEF_PWD_SHOW_TIME)inlv_conf.h.
6.2. Corewidgets 626


--- Page 631 ---


LVGLDocumentation8.3
Acceptedcharacters
You can set a list of accepted characters with lv_textarea_set_accepted_chars(textarea,
"0123456789.+-"). Othercharacterswillbeignored.
Maxtextlength
The maximum number of characters can be limited with lv_textarea_set_max_length(textarea,
max_char_num)
Verylongtexts
IfthereisaverylongtextintheTextarea(e.g. >20kcharacters), scrollinganddrawingmightbeslow. However, by
enablingLV_LABEL_LONG_TXT_HINT 1inlv_conf.htheperformancecanbehugelyimproved. Thiswillsave
someadditionalinformationaboutthelabeltospeedupitsdrawing. UsingLV_LABEL_LONG_TXT_HINTthescrolling
anddrawingwillasfastaswith"normal"shorttexts.
Selecttext
Any part of the text can be selected if enabled with lv_textarea_set_text_selection(textarea,
true). ThisworksmuchlikewhenyouselecttextonyourPCwithyourmouse.
Events
• LV_EVENT_INSERTSentrightbeforeacharacterortextisinserted. Theeventparameteristhetextaboutto
beinserted. lv_textarea_set_insert_replace(textarea, "New text") replacesthetextto
insert. Thenewtextcannotbeinalocalvariablewhichisdestroyedwhentheeventcallbackexists. ""meansdo
notinsertanything.
• LV_EVENT_VALUE_CHANGEDSentwhenthecontentofthetextareahasbeenchanged.
• LV_EVENT_READYSentwhenLV_KEY_ENTERispressed(orsent)toaonelinetextarea.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
• LV_KEY_UP/DOWN/LEFT/RIGHTMovethecursor
• Any characterAddthecharactertothecurrentcursorposition
LearnmoreaboutKeys.
6.2. Corewidgets 627


--- Page 632 ---


LVGLDocumentation8.3
Example
SimpleTextarea
#include "../../lv_examples.h"
#if LV_USE_TEXTAREA && LV_BUILD_EXAMPLES
static void textarea_event_handler(lv_event_t * e)
{
lv_obj_t * ta = lv_event_get_target(e);
LV_LOG_USER("Enter was pressed. The current text is: %s", lv_textarea_get_
,→text(ta));
}
static void btnm_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_t * ta = lv_event_get_user_data(e);
const char * txt = lv_btnmatrix_get_btn_text(obj, lv_btnmatrix_get_selected_
,→btn(obj));
if(strcmp(txt, LV_SYMBOL_BACKSPACE) == 0) lv_textarea_del_char(ta);
else if(strcmp(txt, LV_SYMBOL_NEW_LINE) == 0) lv_event_send(ta, LV_EVENT_READY,␣
,→NULL);
else lv_textarea_add_text(ta, txt);
}
void lv_example_textarea_1(void)
{
lv_obj_t * ta = lv_textarea_create(lv_scr_act());
lv_textarea_set_one_line(ta, true);
lv_obj_align(ta, LV_ALIGN_TOP_MID, 0, 10);
lv_obj_add_event_cb(ta, textarea_event_handler, LV_EVENT_READY, ta);
lv_obj_add_state(ta, LV_STATE_FOCUSED); /*To be sure the cursor is visible*/
static const char * btnm_map[] = {"1", "2", "3", "\n",
"4", "5", "6", "\n",
"7", "8", "9", "\n",
LV_SYMBOL_BACKSPACE, "0", LV_SYMBOL_NEW_LINE, ""
};
lv_obj_t * btnm = lv_btnmatrix_create(lv_scr_act());
lv_obj_set_size(btnm, 200, 150);
lv_obj_align(btnm, LV_ALIGN_BOTTOM_MID, 0, -10);
lv_obj_add_event_cb(btnm, btnm_event_handler, LV_EVENT_VALUE_CHANGED, ta);
lv_obj_clear_flag(btnm, LV_OBJ_FLAG_CLICK_FOCUSABLE); /*To keep the text area␣
,→focused on button clicks*/
lv_btnmatrix_set_map(btnm, btnm_map);
}
#endif
def textarea_event_handler(e, ta):
print("Enter was pressed. The current text is: " + ta.get_text())
(continuesonnextpage)
6.2. Corewidgets 628


--- Page 633 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
def btnm_event_handler(e, ta):
obj = e.get_target()
txt = obj.get_btn_text(obj.get_selected_btn())
if txt == lv.SYMBOL.BACKSPACE:
ta.del_char()
elif txt == lv.SYMBOL.NEW_LINE:
lv.event_send(ta, lv.EVENT.READY, None)
elif txt:
ta.add_text(txt)
ta = lv.textarea(lv.scr_act())
ta.set_one_line(True)
ta.align(lv.ALIGN.TOP_MID, 0, 10)
ta.add_event_cb(lambda e: textarea_event_handler(e, ta), lv.EVENT.READY, None)
ta.add_state(lv.STATE.FOCUSED) # To be sure the cursor is visible
btnm_map = ["1", "2", "3", "\n",
"4", "5", "6", "\n",
"7", "8", "9", "\n",
lv.SYMBOL.BACKSPACE, "0", lv.SYMBOL.NEW_LINE, ""]
btnm = lv.btnmatrix(lv.scr_act())
btnm.set_size(200, 150)
btnm.align(lv.ALIGN.BOTTOM_MID, 0, -10)
btnm.add_event_cb(lambda e: btnm_event_handler(e, ta), lv.EVENT.VALUE_CHANGED, None)
btnm.clear_flag(lv.obj.FLAG.CLICK_FOCUSABLE) # To keep the text area focused on␣
,→button clicks
btnm.set_map(btnm_map)
Textareawithpasswordfield
#include "../../lv_examples.h"
#if LV_USE_TEXTAREA && LV_USE_KEYBOARD && LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e);
static lv_obj_t * kb;
void lv_example_textarea_2(void)
{
/*Create the password box*/
lv_obj_t * pwd_ta = lv_textarea_create(lv_scr_act());
lv_textarea_set_text(pwd_ta, "");
lv_textarea_set_password_mode(pwd_ta, true);
lv_textarea_set_one_line(pwd_ta, true);
lv_obj_set_width(pwd_ta, lv_pct(40));
lv_obj_set_pos(pwd_ta, 5, 20);
lv_obj_add_event_cb(pwd_ta, ta_event_cb, LV_EVENT_ALL, NULL);
/*Create a label and position it above the text box*/
lv_obj_t * pwd_label = lv_label_create(lv_scr_act());
lv_label_set_text(pwd_label, "Password:");
(continuesonnextpage)
6.2. Corewidgets 629


--- Page 634 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_align_to(pwd_label, pwd_ta, LV_ALIGN_OUT_TOP_LEFT, 0, 0);
/*Create the one-line mode text area*/
lv_obj_t * text_ta = lv_textarea_create(lv_scr_act());
lv_textarea_set_one_line(text_ta, true);
lv_textarea_set_password_mode(text_ta, false);
lv_obj_set_width(text_ta, lv_pct(40));
lv_obj_add_event_cb(text_ta, ta_event_cb, LV_EVENT_ALL, NULL);
lv_obj_align(text_ta, LV_ALIGN_TOP_RIGHT, -5, 20);
/*Create a label and position it above the text box*/
lv_obj_t * oneline_label = lv_label_create(lv_scr_act());
lv_label_set_text(oneline_label, "Text:");
lv_obj_align_to(oneline_label, text_ta, LV_ALIGN_OUT_TOP_LEFT, 0, 0);
/*Create a keyboard*/
kb = lv_keyboard_create(lv_scr_act());
lv_obj_set_size(kb, LV_HOR_RES, LV_VER_RES / 2);
lv_keyboard_set_textarea(kb, pwd_ta); /*Focus it on one of the text areas to␣
,→start*/
}
static void ta_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * ta = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED || code == LV_EVENT_FOCUSED) {
/*Focus on the clicked text area*/
if(kb != NULL) lv_keyboard_set_textarea(kb, ta);
}
else if(code == LV_EVENT_READY) {
LV_LOG_USER("Ready, current text: %s", lv_textarea_get_text(ta));
}
}
#endif
def ta_event_cb(e):
code = e.get_code()
ta = e.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.FOCUSED:
# Focus on the clicked text area
if kb != None:
kb.set_textarea(ta)
elif code == lv.EVENT.READY:
print("Ready, current text: " + ta.get_text())
# Create the password box
LV_HOR_RES = lv.scr_act().get_disp().driver.hor_res
LV_VER_RES = lv.scr_act().get_disp().driver.ver_res
pwd_ta = lv.textarea(lv.scr_act())
(continuesonnextpage)
6.2. Corewidgets 630


--- Page 635 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
pwd_ta.set_text("")
pwd_ta.set_password_mode(True)
pwd_ta.set_one_line(True)
pwd_ta.set_width(LV_HOR_RES // 2 - 20)
pwd_ta.set_pos(5, 20)
pwd_ta.add_event_cb(ta_event_cb, lv.EVENT.ALL, None)
# Create a label and position it above the text box
pwd_label = lv.label(lv.scr_act())
pwd_label.set_text("Password:")
pwd_label.align_to(pwd_ta, lv.ALIGN.OUT_TOP_LEFT, 0, 0)
# Create the one-line mode text area
text_ta = lv.textarea(lv.scr_act())
text_ta.set_width(LV_HOR_RES // 2 - 20)
text_ta.set_one_line(True)
text_ta.add_event_cb(ta_event_cb, lv.EVENT.ALL, None)
text_ta.set_password_mode(False)
text_ta.align(lv.ALIGN.TOP_RIGHT, -5, 20)
# Create a label and position it above the text box
oneline_label = lv.label(lv.scr_act())
oneline_label.set_text("Text:")
oneline_label.align_to(text_ta, lv.ALIGN.OUT_TOP_LEFT, 0, 0)
# Create a keyboard
kb = lv.keyboard(lv.scr_act())
kb.set_size(LV_HOR_RES, LV_VER_RES // 2)
kb.set_textarea(pwd_ta) # Focus it on one of the text areas to start
Textauto-formatting
#include "../../lv_examples.h"
#if LV_USE_TEXTAREA && LV_USE_KEYBOARD && LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e);
static lv_obj_t * kb;
/**
* Automatically format text like a clock. E.g. "12:34"
* Add the ':' automatically.
*/
void lv_example_textarea_3(void)
{
/*Create the text area*/
lv_obj_t * ta = lv_textarea_create(lv_scr_act());
lv_obj_add_event_cb(ta, ta_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_textarea_set_accepted_chars(ta, "0123456789:");
lv_textarea_set_max_length(ta, 5);
lv_textarea_set_one_line(ta, true);
(continuesonnextpage)
6.2. Corewidgets 631


--- Page 636 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_textarea_set_text(ta, "");
/*Create a keyboard*/
kb = lv_keyboard_create(lv_scr_act());
lv_obj_set_size(kb, LV_HOR_RES, LV_VER_RES / 2);
lv_keyboard_set_mode(kb, LV_KEYBOARD_MODE_NUMBER);
lv_keyboard_set_textarea(kb, ta);
}
static void ta_event_cb(lv_event_t * e)
{
lv_obj_t * ta = lv_event_get_target(e);
const char * txt = lv_textarea_get_text(ta);
if(txt[0] >= '0' && txt[0] <= '9' &&
txt[1] >= '0' && txt[1] <= '9' &&
txt[2] != ':') {
lv_textarea_set_cursor_pos(ta, 2);
lv_textarea_add_char(ta, ':');
}
}
#endif
def ta_event_cb(e):
ta = e.get_target()
txt = ta.get_text()
# print(txt)
pos = ta.get_cursor_pos()
# print("cursor pos: ",pos)
# find position of ":" in text
colon_pos= txt.find(":")
# if there are more than 2 digits before the colon, remove the last one entered
if colon_pos == 3:
ta.del_char()
if colon_pos != -1:
# if there are more than 3 digits after the ":" remove the last one entered
rest = txt[colon_pos:]
if len(rest) > 3:
ta.del_char()
if len(txt) < 2:
return
if ":" in txt:
return
if txt[0] >= '0' and txt[0] <= '9' and \
txt[1] >= '0' and txt[1] <= '9':
if len(txt) == 2 or txt[2] != ':' :
ta.set_cursor_pos(2)
ta.add_char(ord(':'))
#
# Automatically format text like a clock. E.g. "12:34"
# Add the ':' automatically
#
# Create the text area
LV_HOR_RES = lv.scr_act().get_disp().driver.hor_res
(continuesonnextpage)
6.2. Corewidgets 632


--- Page 637 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
LV_VER_RES = lv.scr_act().get_disp().driver.ver_res
ta = lv.textarea(lv.scr_act())
ta.add_event_cb(ta_event_cb, lv.EVENT.VALUE_CHANGED, None)
ta.set_accepted_chars("0123456789:")
ta.set_max_length(5)
ta.set_one_line(True)
ta.set_text("")
ta.add_state(lv.STATE.FOCUSED)
# Create a keyboard
kb = lv.keyboard(lv.scr_act())
kb.set_size(LV_HOR_RES, LV_VER_RES // 2)
kb.set_mode(lv.keyboard.MODE.NUMBER)
kb.set_textarea(ta)
API
Enums
enum[anonymous]
Values:
enumeratorLV_PART_TEXTAREA_PLACEHOLDER
Functions
LV_EXPORT_CONST_INT(LV_TEXTAREA_CURSOR_LAST)
lv_obj_t*lv_textarea_create(lv_obj_t*parent)
Createatextareaobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewtextarea
Returns pointertothecreatedtextarea
voidlv_textarea_add_char(lv_obj_t*obj,uint32_tc)
Insertacharactertothecurrentcursorposition. Toaddawidechar,e.g. 'Á'use_lv_txt_encoded_conv_wc('Á)`
Parameters
• obj--pointertoatextareaobject
• c--acharacter(e.g. 'a')
voidlv_textarea_add_text(lv_obj_t*obj,constchar*txt)
Insertatexttothecurrentcursorposition
Parameters
• obj--pointertoatextareaobject
• txt--a'\0'terminatedstringtoinsert
6.2. Corewidgets 633


--- Page 638 ---


LVGLDocumentation8.3
voidlv_textarea_del_char(lv_obj_t*obj)
Deleteatheleftcharacterfromthecurrentcursorposition
Parameters obj--pointertoatextareaobject
voidlv_textarea_del_char_forward(lv_obj_t*obj)
Deletetherightcharacterfromthecurrentcursorposition
Parameters obj--pointertoatextareaobject
voidlv_textarea_set_text(lv_obj_t*obj,constchar*txt)
Setthetextofatextarea
Parameters
• obj--pointertoatextareaobject
• txt--pointertothetext
voidlv_textarea_set_placeholder_text(lv_obj_t*obj,constchar*txt)
Settheplaceholdertextofatextarea
Parameters
• obj--pointertoatextareaobject
• txt--pointertothetext
voidlv_textarea_set_cursor_pos(lv_obj_t*obj,int32_tpos)
Setthecursorposition
Parameters
• obj--pointertoatextareaobject
• pos -- the new cursor position in character index < 0 : index from the end of the text
LV_TEXTAREA_CURSOR_LAST:goafterthelastcharacter
voidlv_textarea_set_cursor_click_pos(lv_obj_t*obj,boolen)
Enable/Disablethepositioningofthecursorbyclickingthetextonthetextarea.
Parameters
• obj--pointertoatextareaobject
• en--true: enableclickpositions;false: disable
voidlv_textarea_set_password_mode(lv_obj_t*obj,boolen)
Enable/Disablepasswordmode
Parameters
• obj--pointertoatextareaobject
• en--true: enable,false: disable
voidlv_textarea_set_password_bullet(lv_obj_t*obj,constchar*bullet)
Setthereplacementcharacterstoshowinpasswordmode
Parameters
• obj--pointertoatextareaobject
• bullet--pointertothereplacementtext
6.2. Corewidgets 634


--- Page 639 ---


LVGLDocumentation8.3
voidlv_textarea_set_one_line(lv_obj_t*obj,boolen)
Configurethetextareatoonelineorbacktonormal
Parameters
• obj--pointertoatextareaobject
• en--true: oneline,false: normal
voidlv_textarea_set_accepted_chars(lv_obj_t*obj,constchar*list)
Setalistofcharacters. Onlythesecharacterswillbeacceptedbythetextarea
Parameters
• obj--pointertoatextareaobject
• list--listofcharacters. Onlythepointerissaved. E.g. "+-.,0123456789"
voidlv_textarea_set_max_length(lv_obj_t*obj,uint32_tnum)
SetmaxlengthofaTextArea.
Parameters
• obj--pointertoatextareaobject
• num -- the maximal number of characters can be added (lv_textarea_set_text ig-
noresit)
voidlv_textarea_set_insert_replace(lv_obj_t*obj,constchar*txt)
InLV_EVENT_INSERTthetextwhichplannedtobeinsertedcanbereplacedbyanothertext. Itcanbeusedto
addautomaticformattingtothetextarea.
Parameters
• obj--pointertoatextareaobject
• txt--pointertoanewstringtoinsert. If""notextwillbeadded. Thevariablemustbelive
aftertheevent_cbexists. (Shouldbeglobalorstatic)
voidlv_textarea_set_text_selection(lv_obj_t*obj,boolen)
Enable/disableselectionmode.
Parameters
• obj--pointertoatextareaobject
• en--trueorfalsetoenable/disableselectionmode
voidlv_textarea_set_password_show_time(lv_obj_t*obj,uint16_ttime)
Sethowlongshowthepasswordbeforechangingitto'*'
Parameters
• obj--pointertoatextareaobject
• time--showtimeinmilliseconds. 0: hideimmediately.
voidlv_textarea_set_align(lv_obj_t*obj,lv_text_align_talign)
Deprecated: use the normal text_align style property instead Set the label's alignment. It sets where the label is
aligned(inonelinemodeitcanbesmallerthanthetextarea)andhowthelinesoftheareaalignincaseofmultiline
textarea
Parameters
• obj--pointertoatextareaobject
6.2. Corewidgets 635


--- Page 640 ---


LVGLDocumentation8.3
• align--thealignmodefrom::lv_text_align_t
constchar*lv_textarea_get_text(constlv_obj_t*obj)
Getthetextofatextarea. Inpasswordmodeitgivestherealtext(not'*'s).
Parameters obj--pointertoatextareaobject
Returns pointertothetext
constchar*lv_textarea_get_placeholder_text(lv_obj_t*obj)
Gettheplaceholdertextofatextarea
Parameters obj--pointertoatextareaobject
Returns pointertothetext
lv_obj_t*lv_textarea_get_label(constlv_obj_t*obj)
Getthelabelofatextarea
Parameters obj--pointertoatextareaobject
Returns pointertothelabelobject
uint32_tlv_textarea_get_cursor_pos(constlv_obj_t*obj)
Getthecurrentcursorpositionincharacterindex
Parameters obj--pointertoatextareaobject
Returns thecursorposition
boollv_textarea_get_cursor_click_pos(lv_obj_t*obj)
Getwhetherthecursorclickpositioningisenabledornot.
Parameters obj--pointertoatextareaobject
Returns true: enableclickpositions;false: disable
boollv_textarea_get_password_mode(constlv_obj_t*obj)
Getthepasswordmodeattribute
Parameters obj--pointertoatextareaobject
Returns true: passwordmodeisenabled,false: disabled
constchar*lv_textarea_get_password_bullet(lv_obj_t*obj)
Getthereplacementcharacterstoshowinpasswordmode
Parameters obj--pointertoatextareaobject
Returns pointertothereplacementtext
boollv_textarea_get_one_line(constlv_obj_t*obj)
Gettheonelineconfigurationattribute
Parameters obj--pointertoatextareaobject
Returns true: onelineconfigurationisenabled,false: disabled
constchar*lv_textarea_get_accepted_chars(lv_obj_t*obj)
Getalistofacceptedcharacters.
Parameters obj--pointertoatextareaobject
Returns listofaccentedcharacters.
6.2. Corewidgets 636


--- Page 641 ---


LVGLDocumentation8.3
uint32_tlv_textarea_get_max_length(lv_obj_t*obj)
GetmaxlengthofaTextArea.
Parameters obj--pointertoatextareaobject
Returns themaximalnumberofcharacterstobeadd
boollv_textarea_text_is_selected(constlv_obj_t*obj)
Findwhethertextisselectedornot.
Parameters obj--pointertoatextareaobject
Returns whethertextisselectedornot
boollv_textarea_get_text_selection(lv_obj_t*obj)
Findwhetherselectionmodeisenabled.
Parameters obj--pointertoatextareaobject
Returns true: selectionmodeisenabled,false: disabled
uint16_tlv_textarea_get_password_show_time(lv_obj_t*obj)
Sethowlongshowthepasswordbeforechangingitto'*'
Parameters obj--pointertoatextareaobject
Returns showtimeinmilliseconds. 0: hideimmediately.
voidlv_textarea_clear_selection(lv_obj_t*obj)
Cleartheselectiononthetextarea.
Parameters obj--pointertoatextareaobject
voidlv_textarea_cursor_right(lv_obj_t*obj)
Movethecursoronecharacterright
Parameters obj--pointertoatextareaobject
voidlv_textarea_cursor_left(lv_obj_t*obj)
Movethecursoronecharacterleft
Parameters obj--pointertoatextareaobject
voidlv_textarea_cursor_down(lv_obj_t*obj)
Movethecursoronelinedown
Parameters obj--pointertoatextareaobject
voidlv_textarea_cursor_up(lv_obj_t*obj)
Movethecursoronelineup
Parameters obj--pointertoatextareaobject
6.2. Corewidgets 637


--- Page 642 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_textarea_class
structlv_textarea_t
PublicMembers
lv_obj_tobj
lv_obj_t*label
char*placeholder_txt
char*pwd_tmp
char*pwd_bullet
constchar*accepted_chars
uint32_tmax_length
uint16_tpwd_show_time
lv_coord_tvalid_x
uint32_tpos
lv_area_tarea
uint32_ttxt_byte_pos
uint8_tshow
uint8_tclick_pos
structlv_textarea_t::[anonymous]cursor
uint32_tsel_start
uint32_tsel_end
6.2. Corewidgets 638


--- Page 643 ---


LVGLDocumentation8.3
uint8_ttext_sel_in_prog
uint8_ttext_sel_en
uint8_tpwd_mode
uint8_tone_line
6.3 Extra widgets
6.3.1 Animation Image (lv_animimg)
Overview
Theanimationimageissimilartothenormal'Image'object. Theonlydifferenceisthatinsteadofonesourceimage,you
setanarrayofmultiplesourceimages.
Youcanspecifyadurationandrepeatcount.
PartsandStyles
• LV_PART_MAINAbackgroundrectanglethatusesthetypicalbackgroundstylepropertiesandtheimageitself
usingtheimagestyleproperties.
Usage
Imagesources
Tosettheimageinastate,usethelv_animimg_set_src(imgbtn, dsc[], num).
Events
Nospecialeventsaresentbyimageobjects.
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
6.3. Extrawidgets 639


--- Page 644 ---


LVGLDocumentation8.3
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
SimpleAnimationImage
#include "../../lv_examples.h"
#if LV_USE_ANIMIMG && LV_BUILD_EXAMPLES
LV_IMG_DECLARE(animimg001)
LV_IMG_DECLARE(animimg002)
LV_IMG_DECLARE(animimg003)
static const lv_img_dsc_t * anim_imgs[3] = {
&animimg001,
&animimg002,
&animimg003,
};
void lv_example_animimg_1(void)
{
lv_obj_t * animimg0 = lv_animimg_create(lv_scr_act());
lv_obj_center(animimg0);
lv_animimg_set_src(animimg0, (const void **) anim_imgs, 3);
lv_animimg_set_duration(animimg0, 1000);
lv_animimg_set_repeat_count(animimg0, LV_ANIM_REPEAT_INFINITE);
lv_animimg_start(animimg0);
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
anim_imgs = [None]*3
# Create an image from the png file
try:
with open('../../assets/animimg001.png','rb') as f:
anim001_data = f.read()
except:
print("Could not find animimg001.png")
sys.exit()
anim_imgs[0] = lv.img_dsc_t({
'data_size': len(anim001_data),
'data': anim001_data
})
try:
(continuesonnextpage)
6.3. Extrawidgets 640


--- Page 645 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
with open('../../assets/animimg002.png','rb') as f:
anim002_data = f.read()
except:
print("Could not find animimg002.png")
sys.exit()
anim_imgs[1] = lv.img_dsc_t({
'data_size': len(anim002_data),
'data': anim002_data
})
try:
with open('../../assets/animimg003.png','rb') as f:
anim003_data = f.read()
except:
print("Could not find animimg003.png")
sys.exit()
anim_imgs[2] = lv.img_dsc_t({
'data_size': len(anim003_data),
'data': anim003_data
})
animimg0 = lv.animimg(lv.scr_act())
animimg0.center()
animimg0.set_src(anim_imgs, 3)
animimg0.set_duration(1000)
animimg0.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
animimg0.start()
API
Typedefs
typedefuint8_tlv_animimg_part_t
Enums
enum[anonymous]
Values:
enumeratorLV_ANIM_IMG_PART_MAIN
6.3. Extrawidgets 641


--- Page 646 ---


LVGLDocumentation8.3
Functions
lv_obj_t*lv_animimg_create(lv_obj_t*parent)
Createananimationimageobjects
Parameters parent--pointertoanobject,itwillbetheparentofthenewbutton
Returns pointertothecreatedanimationimageobject
voidlv_animimg_set_src(lv_obj_t*img,constvoid*dsc[],uint8_tnum)
Settheimageanimationimagessource.
Parameters
• img--pointertoananimationimageobject
• dsc--pointertoaseriesimages
• num--images'number
voidlv_animimg_start(lv_obj_t*obj)
Startuptheimageanimation.
Parameters obj--pointertoananimationimageobject
voidlv_animimg_set_duration(lv_obj_t*img,uint32_tduration)
Settheimageanimationdurationtime. unit:ms
Parameters img--pointertoananimationimageobject
voidlv_animimg_set_repeat_count(lv_obj_t*img,uint16_tcount)
Settheimageanimationreapeatlyplaytimes.
Parameters
• img--pointertoananimationimageobject
• count--thenumberoftimestorepeattheanimation
Variables
constlv_obj_class_tlv_animimg_class
structlv_animimg_t
PublicMembers
lv_img_timg
lv_anim_tanim
constvoid**dsc
int8_tpic_count
6.3. Extrawidgets 642


--- Page 647 ---


LVGLDocumentation8.3
6.3.2 Calendar (lv_calendar)
Fromv8.1theheaderisaddeddirectlyintotheCalendarwidgetandtheAPIoftheheadershasbeenchanged.
Overview
TheCalendarobjectisaclassiccalendarwhichcan:
• showthedaysofanymonthina7x7matrix
• Showthenameofthedays
• highlightthecurrentday(today)
• highlightanyuser-defineddates
TheCalendarisaddedtothedefaultgroup(ifitisset). Calendarisaneditableobjectwhichallowselectingandclicking
thedateswithencodernavigationtoo.
TomaketheCalendarflexible,bydefaultitdoesn'tshowthecurrentyearormonth. Instead,thereareoptional"headers"
thatcanbeattachedtothecalendar.
PartsandStyles
TheCalendariscomposedof3widegets
• Container: ArectanglewhichisacontainerfortheHeaderandtheDays. UsesonlyLV_PART_MAINwhereall
thebackgroundrelatedstylepropertiesareworking.
• Days: It's a Button matrix object under the hood to arrange the days into a matrix.
lv_calendar_get_btnmatrix(calendar)canbeusedtogetit.
– LV_PART_MAINThebackgroundofthecalendar. Usesallthebackgroundrelatedstyleproperties.
– LV_PART_ITEMSReferstothedatesanddaynames. Buttonmatrixcontrolflagsaresettodifferentiatethe
buttonsandacustomdrawereventisaddedmodifythepropertiesofthebuttonsasfollows:
∗ daynameshavenoborder,nobackgroundanddrawnwithagraycolor
∗ daysofthepreviousandnextmonthhaveLV_BTNMATRIX_CTRL_DISABLEDflag
∗ todayhasathickerborderwiththetheme'sprimarycolor
∗ highlighteddayshavesomeopacitywiththetheme'sprimarycolor.
• Header: Notcreatedbydefault,thedetailsareuptothegivenheader.
Usage
Somefunctionsusethelv_calendar_date_ttypewhichisastructurewithyear,monthanddayfields.
6.3. Extrawidgets 643


--- Page 648 ---


LVGLDocumentation8.3
Currentdate
Tosetthecurrentdate(today),usethelv_calendar_set_today_date(calendar, year, month, day)
function. monthneedstobein1..12rangeanddayin1..31range.
Showndate
Tosettheshowndate,uselv_calendar_set_shown_date(calendar, year, month);
Highlighteddays
The list of highlighted dates should be stored in a lv_calendar_date_t array loaded by
lv_calendar_set_highlighted_dates(calendar, highlighted_dates, date_num).
Onlythearray'spointerwillbesavedsothearrayshouldbeastaticorglobalvariable.
Nameofthedays
Thenameofthedayscanbeadjustedwithlv_calendar_set_day_names(calendar, day_names)where
day_nameslookslikeconst char * day_names[7] = {"Su", "Mo", ...};Onlythepointerofthe
daynamesissavedsotheelementsshouldbestatic,globalorconstantvariables.
Customyearlist
Sets a custom year list with lv_calendar_header_dropdown_set_year_list(calendar,
years_list) where years_list is a pointer to the custom years list. It can be a constant string like static
const char * years = "2023\n2022\n2021\n2020\n2019";,orcanbegenerateddynamicallyintoa
bufferaswell.
Events
• LV_EVENT_VALUE_CHANGEDSentifadateisclicked. lv_calendar_get_pressed_date(calendar,
&date)setdatetothedatecurrentlybeingpressed. ReturnsLV_RES_OKifthereisavalidpresseddate,else
LV_RES_INV.
LearnmoreaboutEvents.
Keys
• LV_KEY_RIGHT/UP/LEFT/RIGHTTonavigateamongthebuttonstodates
• LV_KEY_ENTERTopress/releasetheselecteddate
LearnmoreaboutKeys.
6.3. Extrawidgets 644


--- Page 649 ---


LVGLDocumentation8.3
Headers
Arrowbuttons
lv_calendar_header_arrow_create(calendar)createsaheaderthatcontainsaleftandrightarrowonthe
sidesandatextwiththecurrentyearandmonthbetweenthem.
Drop-down
lv_calendar_header_dropdown_create(calendar)createsaheaderthatcontains2drop-drownlists:one
fortheyearandanotherforthemonth.
Example
Calendarwithheader
#include "../../lv_examples.h"
#if LV_USE_CALENDAR && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_current_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
lv_calendar_date_t date;
if(lv_calendar_get_pressed_date(obj, &date)) {
LV_LOG_USER("Clicked date: %02d.%02d.%d", date.day, date.month, date.
,→year);
}
}
}
void lv_example_calendar_1(void)
{
lv_obj_t * calendar = lv_calendar_create(lv_scr_act());
lv_obj_set_size(calendar, 185, 185);
lv_obj_align(calendar, LV_ALIGN_CENTER, 0, 27);
lv_obj_add_event_cb(calendar, event_handler, LV_EVENT_ALL, NULL);
lv_calendar_set_today_date(calendar, 2021, 02, 23);
lv_calendar_set_showed_date(calendar, 2021, 02);
/*Highlight a few days*/
static lv_calendar_date_t highlighted_days[3]; /*Only its pointer will be␣
,→saved so should be static*/
highlighted_days[0].year = 2021;
highlighted_days[0].month = 02;
highlighted_days[0].day = 6;
highlighted_days[1].year = 2021;
highlighted_days[1].month = 02;
highlighted_days[1].day = 11;
(continuesonnextpage)
6.3. Extrawidgets 645


--- Page 650 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
highlighted_days[2].year = 2022;
highlighted_days[2].month = 02;
highlighted_days[2].day = 22;
lv_calendar_set_highlighted_dates(calendar, highlighted_days, 3);
#if LV_USE_CALENDAR_HEADER_DROPDOWN
lv_calendar_header_dropdown_create(calendar);
#elif LV_USE_CALENDAR_HEADER_ARROW
lv_calendar_header_arrow_create(calendar);
#endif
lv_calendar_set_showed_date(calendar, 2021, 10);
}
#endif
def event_handler(evt):
code = evt.get_code()
if code == lv.EVENT.VALUE_CHANGED:
source = evt.get_current_target()
date = lv.calendar_date_t()
if source.get_pressed_date(date) == lv.RES.OK:
calendar.set_today_date(date.year, date.month, date.day)
print("Clicked date: %02d.%02d.%02d"%(date.day, date.month, date.year))
calendar = lv.calendar(lv.scr_act())
calendar.set_size(200, 200)
calendar.align(lv.ALIGN.CENTER, 0, 20)
calendar.add_event_cb(event_handler, lv.EVENT.ALL, None)
calendar.set_today_date(2021, 02, 23)
calendar.set_showed_date(2021, 02)
# Highlight a few days
highlighted_days=[
lv.calendar_date_t({'year':2021, 'month':2, 'day':6}),
lv.calendar_date_t({'year':2021, 'month':2, 'day':11}),
lv.calendar_date_t({'year':2021, 'month':2, 'day':22})
]
calendar.set_highlighted_dates(highlighted_days, len(highlighted_days))
lv.calendar_header_dropdown(calendar)
6.3. Extrawidgets 646


--- Page 651 ---


LVGLDocumentation8.3
API
Functions
lv_obj_t*lv_calendar_create(lv_obj_t*parent)
voidlv_calendar_set_today_date(lv_obj_t*obj,uint32_tyear,uint32_tmonth,uint32_tday)
Setthetoday'sdate
Parameters
• obj--pointertoacalendarobject
• year--today'syear
• month--today'smonth[1..12]
• day--today'sday[1..31]
voidlv_calendar_set_showed_date(lv_obj_t*obj,uint32_tyear,uint32_tmonth)
Setthecurrentlyshowed
Parameters
• obj--pointertoacalendarobject
• year--today'syear
• month--today'smonth[1..12]
voidlv_calendar_set_highlighted_dates(lv_obj_t*obj,lv_calendar_date_thighlighted[],uint16_t
date_num)
Setthehighlighteddates
Parameters
• obj--pointertoacalendarobject
• highlighted--pointertoanlv_calendar_date_tarraycontainingthedates. Only
thepointerwillbesavedsothisvariablecan'tbelocalwhichwillbedestroyedlater.
• date_num--numberofdatesinthearray
voidlv_calendar_set_day_names(lv_obj_t*obj,constchar**day_names)
Setthenameofthedays
Parameters
• obj--pointertoacalendarobject
• day_names--pointertoanarraywiththenames. E.g. const char * days[7] =
{"Sun", "Mon", ...}Onlythepointerwillbesavedsothisvariablecan'tbelocalwhich
willbedestroyedlater.
lv_obj_t*lv_calendar_get_btnmatrix(constlv_obj_t*obj)
Getthebuttonmatrixobjectofthecalendar. Itshowsthedatesanddaynames.
Parameters obj--pointertoacalendarobject
Returns pointertoathebuttonmatrix
6.3. Extrawidgets 647


--- Page 652 ---


LVGLDocumentation8.3
constlv_calendar_date_t*lv_calendar_get_today_date(constlv_obj_t*calendar)
Getthetoday'sdate
Parameters calendar--pointertoacalendarobject
Returns returnpointertoanlv_calendar_date_tvariablecontainingthedateoftoday.
constlv_calendar_date_t*lv_calendar_get_showed_date(constlv_obj_t*calendar)
Getthecurrentlyshowed
Parameters calendar--pointertoacalendarobject
Returns pointertoanlv_calendar_date_tvariablecontainingthedateisbeingshown.
lv_calendar_date_t*lv_calendar_get_highlighted_dates(constlv_obj_t*calendar)
Getthehighlighteddates
Parameters calendar--pointertoacalendarobject
Returns pointertoanlv_calendar_date_tarraycontainingthedates.
uint16_tlv_calendar_get_highlighted_dates_num(constlv_obj_t*calendar)
Getthenumberofthehighlighteddates
Parameters calendar--pointertoacalendarobject
Returns numberofhighlighteddays
lv_res_tlv_calendar_get_pressed_date(constlv_obj_t*calendar,lv_calendar_date_t*date)
Getthecurrentlypressedday
Parameters
• calendar--pointertoacalendarobject
• date--storethepresseddatehere
Returns LV_RES_OK:thereisavalidpresseddate;LV_RES_INV:thereisnopresseddata
Variables
constlv_obj_class_tlv_calendar_class
structlv_calendar_date_t
#include<lv_calendar.h>Representsadateonthecalendarobject(platform-agnostic).
PublicMembers
uint16_tyear
int8_tmonth
int8_tday
1..12
structlv_calendar_t
6.3. Extrawidgets 648


--- Page 653 ---


LVGLDocumentation8.3
PublicMembers
lv_obj_tobj
lv_obj_t*btnm
lv_calendar_date_ttoday
lv_calendar_date_tshowed_date
lv_calendar_date_t*highlighted_dates
uint16_thighlighted_dates_num
constchar*map[8*7]
charnums[7*6][4]
6.3.3 Chart (lv_chart)
Overview
Chartsareabasicobjecttovisualizedatapoints. CurrentlyLinecharts(connectpointswithlinesand/ordrawpointson
them)andBarchartsaresupported.
Chartscanhave:
• divisionlines
• 2yaxis
• axisticksandtextsonticks
• cursors
• scrollingandzooming
PartsandStyles
• LV_PART_MAINThebackgroundofthechart. Usesallthetypicalbackgroundandline(forthedivisionlines)
relatedstyleproperties. Paddingmakestheseriesareasmaller. Forcolumnchartspad_columnsetsthespace
betweenthecolumnsoftheadjacentindices.
• LV_PART_SCROLLBAR The scrollbar used if the chart is zoomed. See the Base object's documentation for
details.
• LV_PART_ITEMSReferstothelineorbarseries.
– Linechart: Thelinepropertiesareusedbythelines. width,height,bg_colorandradiusisused
tosettheappearanceofpoints.
6.3. Extrawidgets 649


--- Page 654 ---


LVGLDocumentation8.3
– Barchart:Thetypicalbackgroundpropertiesareusedtostylethebars. pad_columnsetsthespacebetween
thecolumnsonthesameindex.
• LV_PART_INDICATORReferstothepointsonlineandscatterchart(smallcirclesorsquares).
• LV_PART_CURSORLinepropertiesareusedtostylethecursors. width,height,bg_colorandradius
areusedtosettheappearanceofpoints.
• LV_PART_TICKSLineandTextstylepropertiesareusedtostyletheticks
Usage
Charttype
Thefollowingdatadisplaytypesexist:
• LV_CHART_TYPE_NONEDonotdisplayanydata. Canbeusedtohidetheseries.
• LV_CHART_TYPE_LINE Draw lines between the data points and/or points (rectangles or circles) on the data
points.
• LV_CHART_TYPE_BAR-Drawbars.
• LV_CHART_TYPE_SCATTER-X/Ychartdrawingpoint'sandlinesbetweenthepoints. .
Youcanspecifythedisplaytypewithlv_chart_set_type(chart, LV_CHART_TYPE_...).
Dataseries
You can add any number of series to the charts by lv_chart_add_series(chart, color, axis). This
allocates an lv_chart_series_t structure which contains the chosen color and an array for the data points.
axiscanhavethefollowingvalues:
• LV_CHART_AXIS_PRIMARY_YLeftaxis
• LV_CHART_AXIS_SECONDARY_YRightaxis
• LV_CHART_AXIS_PRIMARY_XBottomaxis
• LV_CHART_AXIS_SECONDARY_XTopaxis
axistellswhichaxis'srangeshouldbeusedtescalethevalues.
lv_chart_set_ext_y_array(chart, ser, value_array)makesthechartuseanexternalarrayforthe
givenseries. value_arrayshouldlooklikethis: lv_coord_t * value_array[num_points]. Thearray
sizeneedstobelargeenoughtoholdallthepointsofthatseries. Thearray'spointerwillbesavedinthechartsoitneeds
tobeglobal,staticordynamicallyallocated. Note: youshouldcalllv_chart_refresh(chart)aftertheexternal
datasourcehasbeenupdatedtoupdatethechart.
The value array of a series can be obtained with lv_chart_get_y_array(chart, ser), which can be used
withext_arrayornormalarrays.
ForLV_CHART_TYPE_SCATTERtypelv_chart_set_ext_x_array(chart, ser, value_array)and
lv_chart_get_x_array(chart, ser)canbeusedaswell.
6.3. Extrawidgets 650


--- Page 655 ---


LVGLDocumentation8.3
Modifythedata
Youhaveseveraloptionstosetthedataofseries:
1. Set the values manually in the array like ser1->points[3] = 7 and refresh the chart with
lv_chart_refresh(chart).
2. Uselv_chart_set_value_by_id(chart, ser, id, value)whereidistheindexofthepoint
youwishtoupdate.
3. Usethelv_chart_set_next_value(chart, ser, value).
4. Initializeallpointstoagivenvaluewith: lv_chart_set_all_value(chart, ser, value).
UseLV_CHART_POINT_NONEasvaluetomakethelibraryskipdrawingthatpoint,column,orlinesegment.
ForLV_CHART_TYPE_SCATTERtypelv_chart_set_value_by_id2(chart, ser, id, value)and
lv_chart_set_next_value2(chart, ser, x_valuem y_value)canbeusedaswell.
Updatemodes
lv_chart_set_next_valuecanbehaveintwowaysdependingonupdatemode:
• LV_CHART_UPDATE_MODE_SHIFTShiftolddatatotheleftandaddthenewonetotheright.
• LV_CHART_UPDATE_MODE_CIRCULAR-Addthenewdataincircularfashion,likeanECGdiagram.
The update mode can be changed with lv_chart_set_update_mode(chart,
LV_CHART_UPDATE_MODE_...).
Numberofpoints
Thenumberofpointsintheseriescanbemodifiedbylv_chart_set_point_count(chart, point_num).
Thedefaultvalueis10. Note: thisalsoaffectsthenumberofpointsprocessedwhenanexternalbufferisassignedtoa
series,soyouneedtobesuretheexternalarrayislargeenough.
Handlinglargenumberofpoints
Onlinecharts, ifthenumberofpointsisgreaterthanthepixelshorizontally, theChartwilldrawonlyverticallinesto
makethedrawingoflargeamountofdataeffective. Ifthereare,let'ssay,10pointstoapixel,LVGLsearchesthesmallest
andthelargestvalueanddrawsaverticallinesbetweenthemtoensurenopeaksaremissed.
Verticalrange
Youcanspecifytheminimumandmaximumvaluesiny-directionwithlv_chart_set_range(chart, axis,
min, max). axis can be LV_CHART_AXIS_PRIMARY (left axis) or LV_CHART_AXIS_SECONDARY (right
axis).
Thevalueofthepointswillbescaledproportionally. Thedefaultrangeis: 0..100.
6.3. Extrawidgets 651


--- Page 656 ---


LVGLDocumentation8.3
Divisionlines
The number of horizontal and vertical division lines can be modified by
lv_chart_set_div_line_count(chart, hdiv_num, vdiv_num). The default settings are 3
horizontaland5verticaldivisionlines. Ifthereisavisibleborderonasideandnopaddingonthatside,thedivisionline
wouldbedrawnontopoftheborderandthereforeitwon'tbedrawn.
Overridedefaultstartpointforseries
Ifyouwantaplottostartfromapointotherthanthedefaultwhichispoint[0]oftheseries,youcansetanalternative
index with the function lv_chart_set_x_start_point(chart, ser, id) where id is the new index
positiontostartplottingfrom.
NotethatLV_CHART_UPDATE_MODE_SHIFTalsochangesthestart_point.
Tickmarksandlabels
Ticks and labels can be added to the axis with lv_chart_set_axis_tick(chart, axis, major_len,
minor_len, major_cnt, minor_cnt, label_en, draw_size).
• axiscanbeLV_CHART_AXIS_X/PRIMARY_Y/SECONDARY_Y
• major_lenisthelengthofmajorticks
• minor_lenisthelengthofminorticks
• major_cntisthenumberofmajorticksontheaxis
• minor_cntinthenumberofminorticksbetweentwomajorticks
• label_entrue: enablelabeldrawingonmajorticks
• draw_sizeextrasizerequiredtodrawthetickandlabels(startwith20pxandincreaseiftheticks/labelsare
clipped)
Zoom
Thechartcanbezoomedindependentlyinxandydirectionswithlv_chart_set_zoom_x(chart, factor)
andlv_chart_set_zoom_y(chart, factor). Iffactoris256thereisnozoom. 512meansdoublezoom,
etc. Fractionalvaluesarealsopossiblebut<256valueisnotallowed.
Cursor
A cursor can be added with lv_chart_cursor_t * c1 = lv_chart_add_cursor(chart, color,
dir);. The possible values of dir LV_DIR_NONE/RIGHT/UP/LEFT/DOWN/HOR/VER/ALL or their OR-ed
valuestotellinwhichdirection(s)shouldthecursorbedrawn.
lv_chart_set_cursor_pos(chart, cursor, &point)setsthepositionofthecursor. posisapointer
toanlv_point_tvariable. E.g. lv_point_t point = {10, 20};. Ifthechartisscrolledthecursorwill
remaininthesameplace.
lv_chart_get_point_pos_by_id(chart, series, id, &point_out)getsthecoordinateofagiven
point. It'susefultoplacethecursoratagivenpoint.
6.3. Extrawidgets 652


--- Page 657 ---


LVGLDocumentation8.3
lv_chart_set_cursor_point(chart, cursor, series, point_id)sticksthecursoratapoint. If
thepoint'spositionchanges(newvalueorscrolling)thecursorwillmovewiththepoint.
Events
• LV_EVENT_VALUE_CHANGED Sent when a new point is clicked pressed.
lv_chart_get_pressed_point(chart)returnsthezero-basedindexofthepressedpoint.
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDaresentwiththefollowingtypes:
– LV_CHART_DRAW_PART_DIV_LINE_INITUsedbefore/afterdrawnthedivlinestoaddmaskstoany
extradrawings. Thefollowingfieldsareset:
∗ part: LV_PART_MAIN
∗ line_dsc
– LV_CHART_DRAW_PART_DIV_LINE_HOR, LV_CHART_DRAW_PART_DIV_LINE_VER Used for
eachhorizontalandverticaldivisionlines.
∗ part: LV_PART_MAIN
∗ id: indexoftheline
∗ p1,p2: pointsoftheline
∗ line_dsc
– LV_CHART_DRAW_PART_LINE_AND_POINTUsedonlineandscatterchartsforlinesandpoints.
∗ part: LV_PART_ITEMS
∗ id: indexofthepoint
∗ value: valueofidthpoint
∗ p1,p2: pointsoftheline
∗ draw_area: areaofthepoint
∗ line_dsc
∗ rect_dsc
∗ sub_part_ptr: pointertotheseries
– LV_CHART_DRAW_PART_BARUsedonbarchartsfortherectangles.
∗ part: LV_PART_ITEMS
∗ id: indexofthepoint
∗ value: valueofidthpoint
∗ draw_area: areaofthepoint
∗ rect_dsc:
∗ sub_part_ptr: pointertotheseries
– LV_CHART_DRAW_PART_CURSORUsedoncursorlinesandpoints.
∗ part: LV_PART_CURSOR
∗ p1,p2: pointsoftheline
∗ line_dsc
6.3. Extrawidgets 653


--- Page 658 ---


LVGLDocumentation8.3
∗ rect_dsc
∗ draw_area: areaofthepoints
– LV_CHART_DRAW_PART_TICK_LABELUsedonticklinesandlabels.
∗ part: LV_PART_TICKS
∗ id: axis
∗ value: valueofthetick
∗ text: valueconvertedtodecimalorNULLforminorticks
∗ line_dsc,
∗ label_dsc,
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
LineChart
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
void lv_example_chart_1(void)
{
/*Create a chart*/
lv_obj_t * chart;
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_center(chart);
lv_chart_set_type(chart, LV_CHART_TYPE_LINE); /*Show lines and points too*/
/*Add two data series*/
lv_chart_series_t * ser1 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
lv_chart_series_t * ser2 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→GREEN), LV_CHART_AXIS_SECONDARY_Y);
/*Set the next points on 'ser1'*/
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 30);
(continuesonnextpage)
6.3. Extrawidgets 654


--- Page 659 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_chart_set_next_value(chart, ser1, 70);
lv_chart_set_next_value(chart, ser1, 90);
/*Directly set points on 'ser2'*/
ser2->y_points[0] = 90;
ser2->y_points[1] = 70;
ser2->y_points[2] = 65;
ser2->y_points[3] = 65;
ser2->y_points[4] = 65;
ser2->y_points[5] = 65;
ser2->y_points[6] = 65;
ser2->y_points[7] = 65;
ser2->y_points[8] = 65;
ser2->y_points[9] = 65;
lv_chart_refresh(chart); /*Required after direct set*/
}
#endif
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.center()
chart.set_type(lv.chart.TYPE.LINE) # Show lines and points too
# Add two data series
ser1 = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
ser2 = chart.add_series(lv.palette_main(lv.PALETTE.GREEN), lv.chart.AXIS.SECONDARY_Y)
print(ser2)
# Set next points on ser1
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,10)
chart.set_next_value(ser1,30)
chart.set_next_value(ser1,70)
chart.set_next_value(ser1,90)
# Directly set points on 'ser2'
ser2.y_points = [90, 70, 65, 65, 65, 65, 65, 65, 65, 65]
chart.refresh() # Required after direct set
6.3. Extrawidgets 655


--- Page 660 ---


LVGLDocumentation8.3
Fadedarealinechartwithcustomdivisionlines
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_DRAW_COMPLEX && LV_BUILD_EXAMPLES
static lv_obj_t * chart1;
static lv_chart_series_t * ser1;
static lv_chart_series_t * ser2;
static void draw_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
/*Add the faded area before the lines are drawn*/
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_ITEMS) {
if(!dsc->p1 || !dsc->p2) return;
/*Add a line mask that keeps the area below the line*/
lv_draw_mask_line_param_t line_mask_param;
lv_draw_mask_line_points_init(&line_mask_param, dsc->p1->x, dsc->p1->y, dsc->
,→p2->x, dsc->p2->y,
LV_DRAW_MASK_LINE_SIDE_BOTTOM);
int16_t line_mask_id = lv_draw_mask_add(&line_mask_param, NULL);
/*Add a fade effect: transparent bottom covering top*/
lv_coord_t h = lv_obj_get_height(obj);
lv_draw_mask_fade_param_t fade_mask_param;
lv_draw_mask_fade_init(&fade_mask_param, &obj->coords, LV_OPA_COVER, obj->
,→coords.y1 + h / 8, LV_OPA_TRANSP,
obj->coords.y2);
int16_t fade_mask_id = lv_draw_mask_add(&fade_mask_param, NULL);
/*Draw a rectangle that will be affected by the mask*/
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_opa = LV_OPA_20;
draw_rect_dsc.bg_color = dsc->line_dsc->color;
lv_area_t a;
a.x1 = dsc->p1->x;
a.x2 = dsc->p2->x - 1;
a.y1 = LV_MIN(dsc->p1->y, dsc->p2->y);
a.y2 = obj->coords.y2;
lv_draw_rect(dsc->draw_ctx, &draw_rect_dsc, &a);
/*Remove the masks*/
lv_draw_mask_free_param(&line_mask_param);
lv_draw_mask_free_param(&fade_mask_param);
lv_draw_mask_remove_id(line_mask_id);
lv_draw_mask_remove_id(fade_mask_id);
}
/*Hook the division lines too*/
else if(dsc->part == LV_PART_MAIN) {
if(dsc->line_dsc == NULL || dsc->p1 == NULL || dsc->p2 == NULL) return;
/*Vertical line*/
(continuesonnextpage)
6.3. Extrawidgets 656


--- Page 661 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
if(dsc->p1->x == dsc->p2->x) {
dsc->line_dsc->color = lv_palette_lighten(LV_PALETTE_GREY, 1);
if(dsc->id == 3) {
dsc->line_dsc->width = 2;
dsc->line_dsc->dash_gap = 0;
dsc->line_dsc->dash_width = 0;
}
else {
dsc->line_dsc->width = 1;
dsc->line_dsc->dash_gap = 6;
dsc->line_dsc->dash_width = 6;
}
}
/*Horizontal line*/
else {
if(dsc->id == 2) {
dsc->line_dsc->width = 2;
dsc->line_dsc->dash_gap = 0;
dsc->line_dsc->dash_width = 0;
}
else {
dsc->line_dsc->width = 2;
dsc->line_dsc->dash_gap = 6;
dsc->line_dsc->dash_width = 6;
}
if(dsc->id == 1 || dsc->id == 3) {
dsc->line_dsc->color = lv_palette_main(LV_PALETTE_GREEN);
}
else {
dsc->line_dsc->color = lv_palette_lighten(LV_PALETTE_GREY, 1);
}
}
}
}
static void add_data(lv_timer_t * timer)
{
LV_UNUSED(timer);
static uint32_t cnt = 0;
lv_chart_set_next_value(chart1, ser1, lv_rand(20, 90));
if(cnt % 4 == 0) lv_chart_set_next_value(chart1, ser2, lv_rand(40, 60));
cnt++;
}
/**
* Add a faded area effect to the line chart and make some division lines ticker
*/
void lv_example_chart_2(void)
{
/*Create a chart1*/
chart1 = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart1, 200, 150);
lv_obj_center(chart1);
lv_chart_set_type(chart1, LV_CHART_TYPE_LINE); /*Show lines and points too*/
(continuesonnextpage)
6.3. Extrawidgets 657


--- Page 662 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_chart_set_div_line_count(chart1, 5, 7);
lv_obj_add_event_cb(chart1, draw_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
lv_chart_set_update_mode(chart1, LV_CHART_UPDATE_MODE_CIRCULAR);
/*Add two data series*/
ser1 = lv_chart_add_series(chart1, lv_palette_main(LV_PALETTE_RED), LV_CHART_AXIS_
,→PRIMARY_Y);
ser2 = lv_chart_add_series(chart1, lv_palette_main(LV_PALETTE_BLUE), LV_CHART_
,→AXIS_SECONDARY_Y);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_chart_set_next_value(chart1, ser1, lv_rand(20, 90));
lv_chart_set_next_value(chart1, ser2, lv_rand(30, 70));
}
lv_timer_create(add_data, 200, NULL);
}
#endif
def draw_event_cb(e):
obj = e.get_target()
# Add the faded area before the lines are drawn
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if dsc.part != lv.PART.ITEMS:
return
if not dsc.p1 or not dsc.p2:
return
# Add a line mask that keeps the area below the line
line_mask_param = lv.draw_mask_line_param_t()
line_mask_param.points_init(dsc.p1.x, dsc.p1.y, dsc.p2.x, dsc.p2.y, lv.DRAW_MASK_
,→LINE_SIDE.BOTTOM)
# line_mask_id = line_mask_param.draw_mask_add(None)
line_mask_id = lv.draw_mask_add(line_mask_param, None)
# Add a fade effect: transparent bottom covering top
h = obj.get_height()
fade_mask_param = lv.draw_mask_fade_param_t()
coords = lv.area_t()
obj.get_coords(coords)
fade_mask_param.init(coords, lv.OPA.COVER, coords.y1 + h // 8, lv.OPA.TRANSP,
,→coords.y2)
fade_mask_id = lv.draw_mask_add(fade_mask_param,None)
# Draw a rectangle that will be affected by the mask
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_opa = lv.OPA._20
draw_rect_dsc.bg_color = dsc.line_dsc.color
a = lv.area_t()
(continuesonnextpage)
6.3. Extrawidgets 658


--- Page 663 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a.x1 = dsc.p1.x
a.x2 = dsc.p2.x - 1
a.y1 = min(dsc.p1.y, dsc.p2.y)
coords = lv.area_t()
obj.get_coords(coords)
a.y2 = coords.y2
dsc.draw_ctx.rect(draw_rect_dsc, a)
# Remove the masks
lv.draw_mask_remove_id(line_mask_id)
lv.draw_mask_remove_id(fade_mask_id)
def add_data(timer):
# LV_UNUSED(timer);
cnt = 0
chart1.set_next_value(ser1, lv.rand(20, 90))
if cnt % 4 == 0:
chart1.set_next_value(ser2, lv.rand(40, 60))
cnt +=1
#
# Add a faded area effect to the line chart
#
# Create a chart1
chart1 = lv.chart(lv.scr_act())
chart1.set_size(200, 150)
chart1.center()
chart1.set_type(lv.chart.TYPE.LINE) # Show lines and points too
chart1.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
chart1.set_update_mode(lv.chart.UPDATE_MODE.CIRCULAR)
# Add two data series
ser1 = chart1.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
ser2 = chart1.add_series(lv.palette_main(lv.PALETTE.BLUE), lv.chart.AXIS.SECONDARY_Y)
for i in range(10):
chart1.set_next_value(ser1, lv.rand(20, 90))
chart1.set_next_value(ser2, lv.rand(30, 70))
timer = lv.timer_create(add_data, 200, None)
6.3. Extrawidgets 659


--- Page 664 ---


LVGLDocumentation8.3
Axisticksandlabelswithscrolling
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static void draw_event_cb(lv_event_t * e)
{
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(!lv_obj_draw_part_check_type(dsc, &lv_chart_class, LV_CHART_DRAW_PART_TICK_
,→LABEL)) return;
if(dsc->id == LV_CHART_AXIS_PRIMARY_X && dsc->text) {
const char * month[] = {"Jan", "Febr", "March", "Apr", "May", "Jun", "July",
,→"Aug", "Sept", "Oct", "Nov", "Dec"};
lv_snprintf(dsc->text, dsc->text_length, "%s", month[dsc->value]);
}
}
/**
* Add ticks and labels to the axis and demonstrate scrolling
*/
void lv_example_chart_3(void)
{
/*Create a chart*/
lv_obj_t * chart;
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_center(chart);
lv_chart_set_type(chart, LV_CHART_TYPE_BAR);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_Y, 0, 100);
lv_chart_set_range(chart, LV_CHART_AXIS_SECONDARY_Y, 0, 400);
lv_chart_set_point_count(chart, 12);
lv_obj_add_event_cb(chart, draw_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
/*Add ticks and label to every axis*/
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_X, 10, 5, 12, 3, true, 40);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_Y, 10, 5, 6, 2, true, 50);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_SECONDARY_Y, 10, 5, 3, 4, true, 50);
/*Zoom in a little in X*/
lv_chart_set_zoom_x(chart, 800);
/*Add two data series*/
lv_chart_series_t * ser1 = lv_chart_add_series(chart, lv_palette_lighten(LV_
,→PALETTE_GREEN, 2), LV_CHART_AXIS_PRIMARY_Y);
lv_chart_series_t * ser2 = lv_chart_add_series(chart, lv_palette_darken(LV_
,→PALETTE_GREEN, 2),
LV_CHART_AXIS_SECONDARY_Y);
/*Set the next points on 'ser1'*/
lv_chart_set_next_value(chart, ser1, 31);
lv_chart_set_next_value(chart, ser1, 66);
lv_chart_set_next_value(chart, ser1, 10);
lv_chart_set_next_value(chart, ser1, 89);
lv_chart_set_next_value(chart, ser1, 63);
lv_chart_set_next_value(chart, ser1, 56);
lv_chart_set_next_value(chart, ser1, 32);
(continuesonnextpage)
6.3. Extrawidgets 660


--- Page 665 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_chart_set_next_value(chart, ser1, 35);
lv_chart_set_next_value(chart, ser1, 57);
lv_chart_set_next_value(chart, ser1, 85);
lv_chart_set_next_value(chart, ser1, 22);
lv_chart_set_next_value(chart, ser1, 58);
lv_coord_t * ser2_array = lv_chart_get_y_array(chart, ser2);
/*Directly set points on 'ser2'*/
ser2_array[0] = 92;
ser2_array[1] = 71;
ser2_array[2] = 61;
ser2_array[3] = 15;
ser2_array[4] = 21;
ser2_array[5] = 35;
ser2_array[6] = 35;
ser2_array[7] = 58;
ser2_array[8] = 31;
ser2_array[9] = 53;
ser2_array[10] = 33;
ser2_array[11] = 73;
lv_chart_refresh(chart); /*Required after direct set*/
}
#endif
def draw_event_cb(e):
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
if dsc.part == lv.PART.TICKS and dsc.id == lv.chart.AXIS.PRIMARY_X:
month = ["Jan", "Febr", "March", "Apr", "May", "Jun", "July", "Aug", "Sept",
,→"Oct", "Nov", "Dec"]
# dsc.text is defined char text[16], I must therefore convert the Python␣
,→string to a byte_array
dsc.text = bytes(month[dsc.value],"ascii")
#
# Add ticks and labels to the axis and demonstrate scrolling
#
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.center()
chart.set_type(lv.chart.TYPE.BAR)
chart.set_range(lv.chart.AXIS.PRIMARY_Y, 0, 100)
chart.set_range(lv.chart.AXIS.SECONDARY_Y, 0, 400)
chart.set_point_count(12)
chart.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
# Add ticks and label to every axis
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_X, 10, 5, 12, 3, True, 40)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 10, 5, 6, 2, True, 50)
chart.set_axis_tick(lv.chart.AXIS.SECONDARY_Y, 10, 5, 3, 4,True, 50)
# Zoom in a little in X
chart.set_zoom_x(800)
(continuesonnextpage)
6.3. Extrawidgets 661


--- Page 666 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Add two data series
ser1 = lv.chart.add_series(chart, lv.palette_lighten(lv.PALETTE.GREEN, 2), lv.chart.
,→AXIS.PRIMARY_Y)
ser2 = lv.chart.add_series(chart, lv.palette_darken(lv.PALETTE.GREEN, 2), lv.chart.
,→AXIS.SECONDARY_Y)
# Set the next points on 'ser1'
chart.set_next_value(ser1, 31)
chart.set_next_value(ser1, 66)
chart.set_next_value(ser1, 10)
chart.set_next_value(ser1, 89)
chart.set_next_value(ser1, 63)
chart.set_next_value(ser1, 56)
chart.set_next_value(ser1, 32)
chart.set_next_value(ser1, 35)
chart.set_next_value(ser1, 57)
chart.set_next_value(ser1, 85)
chart.set_next_value(ser1, 22)
chart.set_next_value(ser1, 58)
# Directly set points on 'ser2'
ser2.y_points = [92,71,61,15,21,35,35,58,31,53,33,73]
chart.refresh() # Required after direct set
Showthevalueofthepressedpoints
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * chart = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
lv_obj_invalidate(chart);
}
if(code == LV_EVENT_REFR_EXT_DRAW_SIZE) {
lv_coord_t * s = lv_event_get_param(e);
*s = LV_MAX(*s, 20);
}
else if(code == LV_EVENT_DRAW_POST_END) {
int32_t id = lv_chart_get_pressed_point(chart);
if(id == LV_CHART_POINT_NONE) return;
LV_LOG_USER("Selected point %d", (int)id);
lv_chart_series_t * ser = lv_chart_get_series_next(chart, NULL);
while(ser) {
lv_point_t p;
lv_chart_get_point_pos_by_id(chart, ser, id, &p);
(continuesonnextpage)
6.3. Extrawidgets 662


--- Page 667 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_coord_t * y_array = lv_chart_get_y_array(chart, ser);
lv_coord_t value = y_array[id];
char buf[16];
lv_snprintf(buf, sizeof(buf), LV_SYMBOL_DUMMY"$%d", value);
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_color = lv_color_black();
draw_rect_dsc.bg_opa = LV_OPA_50;
draw_rect_dsc.radius = 3;
draw_rect_dsc.bg_img_src = buf;
draw_rect_dsc.bg_img_recolor = lv_color_white();
lv_area_t a;
a.x1 = chart->coords.x1 + p.x - 20;
a.x2 = chart->coords.x1 + p.x + 20;
a.y1 = chart->coords.y1 + p.y - 30;
a.y2 = chart->coords.y1 + p.y - 10;
lv_draw_ctx_t * draw_ctx = lv_event_get_draw_ctx(e);
lv_draw_rect(draw_ctx, &draw_rect_dsc, &a);
ser = lv_chart_get_series_next(chart, ser);
}
}
else if(code == LV_EVENT_RELEASED) {
lv_obj_invalidate(chart);
}
}
/**
* Show the value of the pressed points
*/
void lv_example_chart_4(void)
{
/*Create a chart*/
lv_obj_t * chart;
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_center(chart);
lv_obj_add_event_cb(chart, event_cb, LV_EVENT_ALL, NULL);
lv_obj_refresh_ext_draw_size(chart);
/*Zoom in a little in X*/
lv_chart_set_zoom_x(chart, 800);
/*Add two data series*/
lv_chart_series_t * ser1 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
lv_chart_series_t * ser2 = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→GREEN), LV_CHART_AXIS_PRIMARY_Y);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_chart_set_next_value(chart, ser1, lv_rand(60, 90));
(continuesonnextpage)
6.3. Extrawidgets 663


--- Page 668 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_chart_set_next_value(chart, ser2, lv_rand(10, 40));
}
}
#endif
def event_cb(e):
code = e.get_code()
chart = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
chart.invalidate()
if code == lv.EVENT.REFR_EXT_DRAW_SIZE:
e.set_ext_draw_size(20)
elif code == lv.EVENT.DRAW_POST_END:
id = lv.chart.get_pressed_point(chart)
if id == lv.CHART_POINT.NONE:
return
# print("Selected point ", id)
for i in range(len(series)):
p = lv.point_t()
chart.get_point_pos_by_id(series[i], id, p)
value = series_points[i][id]
buf = lv.SYMBOL.DUMMY + "$" + str(value)
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_color = lv.color_black()
draw_rect_dsc.bg_opa = lv.OPA._50
draw_rect_dsc.radius = 3
draw_rect_dsc.bg_img_src = buf
draw_rect_dsc.bg_img_recolor = lv.color_white()
a = lv.area_t()
coords = lv.area_t()
chart.get_coords(coords)
a.x1 = coords.x1 + p.x - 20
a.x2 = coords.x1 + p.x + 20
a.y1 = coords.y1 + p.y - 30
a.y2 = coords.y1 + p.y - 10
clip_area = lv.area_t.__cast__(e.get_param())
lv.draw_rect(a, clip_area, draw_rect_dsc)
elif code == lv.EVENT.RELEASED:
chart.invalidate()
#
# Add ticks and labels to the axis and demonstrate scrolling
#
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
(continuesonnextpage)
6.3. Extrawidgets 664


--- Page 669 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
chart.center()
chart.add_event_cb(event_cb, lv.EVENT.ALL, None)
chart.refresh_ext_draw_size()
# Zoom in a little in X
chart.set_zoom_x(800)
# Add two data series
ser1 = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
ser2 = chart.add_series(lv.palette_main(lv.PALETTE.GREEN), lv.chart.AXIS.PRIMARY_Y)
ser1_p = []
ser2_p = []
for i in range(10):
ser1_p.append(lv.rand(60,90))
ser2_p.append(lv.rand(10,40))
ser1.y_points = ser1_p
ser2.y_points = ser2_p
series = [ser1,ser2]
series_points=[ser1_p,ser2_p]
Display1000datapointswithzoomingandscrolling
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_USE_SLIDER && LV_BUILD_EXAMPLES
static lv_obj_t * chart;
/* Source: https://github.com/ankur219/ECG-Arrhythmia-classification/blob/
,→642230149583adfae1e4bd26c6f0e1fd8af2be0e/sample.csv*/
static const lv_coord_t ecg_sample[] = {
-2, 2, 0, -15, -39, -63, -71, -68, -67, -69, -84, -95, -104, -107, -108, -107, -
,→107, -107, -107, -114, -118, -117,
-112, -100, -89, -83, -71, -64, -58, -58, -62, -62, -58, -51, -46, -39, -27, -10,␣
,→4, 7, 1, -3, 0, 14, 24, 30, 25, 19,
13, 7, 12, 15, 18, 21, 13, 6, 9, 8, 17, 19, 13, 11, 11, 11, 23, 30, 37, 34, 25,␣
,→14, 15, 19, 28, 31, 26, 23, 25, 31,
39, 37, 37, 34, 30, 32, 22, 29, 31, 33, 37, 23, 13, 7, 2, 4, -2, 2, 11, 22, 33,␣
,→19, -1, -27, -55, -67, -72, -71, -63,
-49, -18, 35, 113, 230, 369, 525, 651, 722, 730, 667, 563, 454, 357, 305, 288,␣
,→274, 255, 212, 173, 143, 117, 82, 39,
-13, -53, -78, -91, -101, -113, -124, -131, -131, -131, -129, -128, -129, -125, -
,→123, -123, -129, -139, -148, -153,
-159, -166, -183, -205, -227, -243, -248, -246, -254, -280, -327, -381, -429, -
,→473, -517, -556, -592, -612, -620,
-620, -614, -604, -591, -574, -540, -497, -441, -389, -358, -336, -313, -284, -
,→222, -167, -114, -70, -47, -28, -4, 12,
38, 52, 58, 56, 56, 57, 68, 77, 86, 86, 80, 69, 67, 70, 82, 85, 89, 90, 89, 89,␣
,→88, 91, 96, 97, 91, 83, 78, 82, 88, 95,
96, 105, 106, 110, 102, 100, 96, 98, 97, 101, 98, 99, 100, 107, 113, 119, 115,␣
,→110, 96, 85, 73, 64, 69, 76, 79,
78, 75, 85, 100, 114, 113, 105, 96, 84, 74, 66, 60, 75, 85, 89, 83, 67, 61, 67,␣
,→73, 79, 74, 63, 57, 56, 58, 61, 55,
(continuesonnextpage)
6.3. Extrawidgets 665


--- Page 670 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
48, 45, 46, 55, 62, 55, 49, 43, 50, 59, 63, 57, 40, 31, 23, 25, 27, 31, 35, 34,␣
,→30, 36, 34, 42, 38, 36, 40, 46, 50,
47, 32, 30, 32, 52, 67, 73, 71, 63, 54, 53, 45, 41, 28, 13, 3, 1, 4, 4, -8, -23, -
,→32, -31, -19, -5, 3, 9, 13, 19,
24, 27, 29, 25, 22, 26, 32, 42, 51, 56, 60, 57, 55, 53, 53, 54, 59, 54, 49, 26, -
,→3, -11, -20, -47, -100, -194, -236,
-212, -123, 8, 103, 142, 147, 120, 105, 98, 93, 81, 61, 40, 26, 28, 30, 30, 27,␣
,→19, 17, 21, 20, 19, 19, 22, 36, 40,
35, 20, 7, 1, 10, 18, 27, 22, 6, -4, -2, 3, 6, -2, -13, -14, -10, -2, 3, 2, -1, -
,→5, -10, -19, -32, -42, -55, -60,
-68, -77, -86, -101, -110, -117, -115, -104, -92, -84, -85, -84, -73, -65, -52, -
,→50, -45, -35, -20, -3, 12, 20, 25,
26, 28, 28, 30, 28, 25, 28, 33, 42, 42, 36, 23, 9, 0, 1, -4, 1, -4, -4, 1, 5, 9,␣
,→9, -3, -1, -18, -50, -108, -190,
-272, -340, -408, -446, -537, -643, -777, -894, -920, -853, -697, -461, -251, -60,
,→ 58, 103, 129, 139, 155, 170, 173,
178, 185, 190, 193, 200, 208, 215, 225, 224, 232, 234, 240, 240, 236, 229, 226,␣
,→224, 232, 233, 232, 224, 219, 219,
223, 231, 226, 223, 219, 218, 223, 223, 223, 233, 245, 268, 286, 296, 295, 283,␣
,→271, 263, 252, 243, 226, 210, 197,
186, 171, 152, 133, 117, 114, 110, 107, 96, 80, 63, 48, 40, 38, 34, 28, 15, 2, -7,
,→ -11, -14, -18, -29, -37, -44, -50,
-58, -63, -61, -52, -50, -48, -61, -59, -58, -54, -47, -52, -62, -61, -64, -54, -
,→52, -59, -69, -76, -76, -69, -67,
-74, -78, -81, -80, -73, -65, -57, -53, -51, -47, -35, -27, -22, -22, -24, -21, -
,→17, -13, -10, -11, -13, -20, -20,
-12, -2, 7, -1, -12, -16, -13, -2, 2, -4, -5, -2, 9, 19, 19, 14, 11, 13, 19, 21,␣
,→20, 18, 19, 19, 19, 16, 15, 13, 14,
9, 3, -5, -9, -5, -3, -2, -3, -3, 2, 8, 9, 9, 5, 6, 8, 8, 7, 4, 3, 4, 5, 3, 5, 5,␣
,→13, 13, 12, 10, 10, 15, 22, 17,
14, 7, 10, 15, 16, 11, 12, 10, 13, 9, -2, -4, -2, 7, 16, 16, 17, 16, 7, -1, -16, -
,→18, -16, -9, -4, -5, -10, -9, -8,
-3, -4, -10, -19, -20, -16, -9, -9, -23, -40, -48, -43, -33, -19, -21, -26, -31, -
,→33, -19, 0, 17, 24, 9, -17, -47,
-63, -67, -59, -52, -51, -50, -49, -42, -26, -21, -15, -20, -23, -22, -19, -12, -
,→8, 5, 18, 27, 32, 26, 25, 26, 22,
23, 17, 14, 17, 21, 25, 2, -45, -121, -196, -226, -200, -118, -9, 73, 126, 131,␣
,→114, 87, 60, 42, 29, 26, 34, 35, 34,
25, 12, 9, 7, 3, 2, -8, -11, 2, 23, 38, 41, 23, 9, 10, 13, 16, 8, -8, -17, -23, -
,→26, -25, -21, -15, -10, -13, -13,
-19, -22, -29, -40, -48, -48, -54, -55, -66, -82, -85, -90, -92, -98, -114, -119,␣
,→-124, -129, -132, -146, -146, -138,
-124, -99, -85, -72, -65, -65, -65, -66, -63, -64, -64, -58, -46, -26, -9, 2, 2,␣
,→4, 0, 1, 4, 3, 10, 11, 10, 2, -4,
0, 10, 18, 20, 6, 2, -9, -7, -3, -3, -2, -7, -12, -5, 5, 24, 36, 31, 25, 6, 3, 7,␣
,→12, 17, 11, 0, -6, -9, -8, -7, -5,
-6, -2, -2, -6, -2, 2, 14, 24, 22, 15, 8, 4, 6, 7, 12, 16, 25, 20, 7, -16, -41, -
,→60, -67, -65, -54, -35, -11, 30,
84, 175, 302, 455, 603, 707, 743, 714, 625, 519, 414, 337, 300, 281, 263, 239,␣
,→197, 163, 136, 109, 77, 34, -18, -50,
-66, -74, -79, -92, -107, -117, -127, -129, -135, -139, -141, -155, -159, -167, -
,→171, -169, -174, -175, -178, -191,
-202, -223, -235, -243, -237, -240, -256, -298, -345, -393, -432, -475, -518, -
,→565, -596, -619, -623, -623, -614,
-599, -583, -559, -524, -477, -425, -383, -357, -331, -301, -252, -198, -143, -96,
,→ -57, -29, -8, 10, 31, 45, 60, 65,
70, 74, 76, 79, 82, 79, 75, 62,
(continuesonnextpage)
6.3. Extrawidgets 666


--- Page 671 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
};
static void slider_x_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
int32_t v = lv_slider_get_value(obj);
lv_chart_set_zoom_x(chart, v);
}
static void slider_y_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
int32_t v = lv_slider_get_value(obj);
lv_chart_set_zoom_y(chart, v);
}
/**
* Display 1000 data points with zooming and scrolling.
* See how the chart changes drawing mode (draw only vertical lines) when
* the points get too crowded.
*/
void lv_example_chart_5(void)
{
/*Create a chart*/
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_align(chart, LV_ALIGN_CENTER, -30, -30);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_Y, -1000, 1000);
/*Do not display points on the data*/
lv_obj_set_style_size(chart, 0, LV_PART_INDICATOR);
lv_chart_series_t * ser = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
uint32_t pcnt = sizeof(ecg_sample) / sizeof(ecg_sample[0]);
lv_chart_set_point_count(chart, pcnt);
lv_chart_set_ext_y_array(chart, ser, (lv_coord_t *)ecg_sample);
lv_obj_t * slider;
slider = lv_slider_create(lv_scr_act());
lv_slider_set_range(slider, LV_IMG_ZOOM_NONE, LV_IMG_ZOOM_NONE * 10);
lv_obj_add_event_cb(slider, slider_x_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_set_size(slider, 200, 10);
lv_obj_align_to(slider, chart, LV_ALIGN_OUT_BOTTOM_MID, 0, 20);
slider = lv_slider_create(lv_scr_act());
lv_slider_set_range(slider, LV_IMG_ZOOM_NONE, LV_IMG_ZOOM_NONE * 10);
lv_obj_add_event_cb(slider, slider_y_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_set_size(slider, 10, 150);
lv_obj_align_to(slider, chart, LV_ALIGN_OUT_RIGHT_MID, 20, 0);
}
#endif
# Source: https://github.com/ankur219/ECG-Arrhythmia-classification/blob/
,→642230149583adfae1e4bd26c6f0e1fd8af2be0e/sample.csv
(continuesonnextpage)
6.3. Extrawidgets 667


--- Page 672 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
ecg_sample = [
-2, 2, 0, -15, -39, -63, -71, -68, -67, -69, -84, -95, -104, -107, -108, -107, -
,→107, -107, -107, -114, -118, -117,
-112, -100, -89, -83, -71, -64, -58, -58, -62, -62, -58, -51, -46, -39, -27, -10,␣
,→4, 7, 1, -3, 0, 14, 24, 30, 25, 19,
13, 7, 12, 15, 18, 21, 13, 6, 9, 8, 17, 19, 13, 11, 11, 11, 23, 30, 37, 34, 25,␣
,→14, 15, 19, 28, 31, 26, 23, 25, 31,
39, 37, 37, 34, 30, 32, 22, 29, 31, 33, 37, 23, 13, 7, 2, 4, -2, 2, 11, 22, 33,␣
,→19, -1, -27, -55, -67, -72, -71, -63,
-49, -18, 35, 113, 230, 369, 525, 651, 722, 730, 667, 563, 454, 357, 305, 288,␣
,→274, 255, 212, 173, 143, 117, 82, 39,
-13, -53, -78, -91, -101, -113, -124, -131, -131, -131, -129, -128, -129, -125, -
,→123, -123, -129, -139, -148, -153,
-159, -166, -183, -205, -227, -243, -248, -246, -254, -280, -327, -381, -429, -
,→473, -517, -556, -592, -612, -620,
-620, -614, -604, -591, -574, -540, -497, -441, -389, -358, -336, -313, -284, -
,→222, -167, -114, -70, -47, -28, -4, 12,
38, 52, 58, 56, 56, 57, 68, 77, 86, 86, 80, 69, 67, 70, 82, 85, 89, 90, 89, 89,␣
,→88, 91, 96, 97, 91, 83, 78, 82, 88, 95,
96, 105, 106, 110, 102, 100, 96, 98, 97, 101, 98, 99, 100, 107, 113, 119, 115,␣
,→110, 96, 85, 73, 64, 69, 76, 79,
78, 75, 85, 100, 114, 113, 105, 96, 84, 74, 66, 60, 75, 85, 89, 83, 67, 61, 67,␣
,→73, 79, 74, 63, 57, 56, 58, 61, 55,
48, 45, 46, 55, 62, 55, 49, 43, 50, 59, 63, 57, 40, 31, 23, 25, 27, 31, 35, 34,␣
,→30, 36, 34, 42, 38, 36, 40, 46, 50,
47, 32, 30, 32, 52, 67, 73, 71, 63, 54, 53, 45, 41, 28, 13, 3, 1, 4, 4, -8, -23, -
,→32, -31, -19, -5, 3, 9, 13, 19,
24, 27, 29, 25, 22, 26, 32, 42, 51, 56, 60, 57, 55, 53, 53, 54, 59, 54, 49, 26, -
,→3, -11, -20, -47, -100, -194, -236,
-212, -123, 8, 103, 142, 147, 120, 105, 98, 93, 81, 61, 40, 26, 28, 30, 30, 27,␣
,→19, 17, 21, 20, 19, 19, 22, 36, 40,
35, 20, 7, 1, 10, 18, 27, 22, 6, -4, -2, 3, 6, -2, -13, -14, -10, -2, 3, 2, -1, -
,→5, -10, -19, -32, -42, -55, -60,
-68, -77, -86, -101, -110, -117, -115, -104, -92, -84, -85, -84, -73, -65, -52, -
,→50, -45, -35, -20, -3, 12, 20, 25,
26, 28, 28, 30, 28, 25, 28, 33, 42, 42, 36, 23, 9, 0, 1, -4, 1, -4, -4, 1, 5, 9,␣
,→9, -3, -1, -18, -50, -108, -190,
-272, -340, -408, -446, -537, -643, -777, -894, -920, -853, -697, -461, -251, -60,
,→ 58, 103, 129, 139, 155, 170, 173,
178, 185, 190, 193, 200, 208, 215, 225, 224, 232, 234, 240, 240, 236, 229, 226,␣
,→224, 232, 233, 232, 224, 219, 219,
223, 231, 226, 223, 219, 218, 223, 223, 223, 233, 245, 268, 286, 296, 295, 283,␣
,→271, 263, 252, 243, 226, 210, 197,
186, 171, 152, 133, 117, 114, 110, 107, 96, 80, 63, 48, 40, 38, 34, 28, 15, 2, -7,
,→ -11, -14, -18, -29, -37, -44, -50,
-58, -63, -61, -52, -50, -48, -61, -59, -58, -54, -47, -52, -62, -61, -64, -54, -
,→52, -59, -69, -76, -76, -69, -67,
-74, -78, -81, -80, -73, -65, -57, -53, -51, -47, -35, -27, -22, -22, -24, -21, -
,→17, -13, -10, -11, -13, -20, -20,
-12, -2, 7, -1, -12, -16, -13, -2, 2, -4, -5, -2, 9, 19, 19, 14, 11, 13, 19, 21,␣
,→20, 18, 19, 19, 19, 16, 15, 13, 14,
9, 3, -5, -9, -5, -3, -2, -3, -3, 2, 8, 9, 9, 5, 6, 8, 8, 7, 4, 3, 4, 5, 3, 5, 5,␣
,→13, 13, 12, 10, 10, 15, 22, 17,
14, 7, 10, 15, 16, 11, 12, 10, 13, 9, -2, -4, -2, 7, 16, 16, 17, 16, 7, -1, -16, -
,→18, -16, -9, -4, -5, -10, -9, -8,
-3, -4, -10, -19, -20, -16, -9, -9, -23, -40, -48, -43, -33, -19, -21, -26, -31, -
,→33, -19, 0, 17, 24, 9, -17, -47,
(continuesonnextpage)
6.3. Extrawidgets 668


--- Page 673 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
-63, -67, -59, -52, -51, -50, -49, -42, -26, -21, -15, -20, -23, -22, -19, -12, -
,→8, 5, 18, 27, 32, 26, 25, 26, 22,
23, 17, 14, 17, 21, 25, 2, -45, -121, -196, -226, -200, -118, -9, 73, 126, 131,␣
,→114, 87, 60, 42, 29, 26, 34, 35, 34,
25, 12, 9, 7, 3, 2, -8, -11, 2, 23, 38, 41, 23, 9, 10, 13, 16, 8, -8, -17, -23, -
,→26, -25, -21, -15, -10, -13, -13,
-19, -22, -29, -40, -48, -48, -54, -55, -66, -82, -85, -90, -92, -98, -114, -119,␣
,→-124, -129, -132, -146, -146, -138,
-124, -99, -85, -72, -65, -65, -65, -66, -63, -64, -64, -58, -46, -26, -9, 2, 2,␣
,→4, 0, 1, 4, 3, 10, 11, 10, 2, -4,
0, 10, 18, 20, 6, 2, -9, -7, -3, -3, -2, -7, -12, -5, 5, 24, 36, 31, 25, 6, 3, 7,␣
,→12, 17, 11, 0, -6, -9, -8, -7, -5,
-6, -2, -2, -6, -2, 2, 14, 24, 22, 15, 8, 4, 6, 7, 12, 16, 25, 20, 7, -16, -41, -
,→60, -67, -65, -54, -35, -11, 30,
84, 175, 302, 455, 603, 707, 743, 714, 625, 519, 414, 337, 300, 281, 263, 239,␣
,→197, 163, 136, 109, 77, 34, -18, -50,
-66, -74, -79, -92, -107, -117, -127, -129, -135, -139, -141, -155, -159, -167, -
,→171, -169, -174, -175, -178, -191,
-202, -223, -235, -243, -237, -240, -256, -298, -345, -393, -432, -475, -518, -
,→565, -596, -619, -623, -623, -614,
-599, -583, -559, -524, -477, -425, -383, -357, -331, -301, -252, -198, -143, -96,
,→ -57, -29, -8, 10, 31, 45, 60, 65,
70, 74, 76, 79, 82, 79, 75, 62,
]
def slider_x_event_cb(e):
slider = e.get_target()
v = slider.get_value()
chart.set_zoom_x(v)
def slider_y_event_cb(e):
slider = e.get_target()
v = slider.get_value()
chart.set_zoom_y(v)
#
# Display 1000 data points with zooming and scrolling.
# See how the chart changes drawing mode (draw only vertical lines) when
# the points get too crowded.
# Create a chart
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.align(lv.ALIGN.CENTER, -30, -30)
chart.set_range(lv.chart.AXIS.PRIMARY_Y, -1000, 1000)
# Do not display points on the data
chart.set_style_size(0, lv.PART.INDICATOR)
ser = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
pcnt = len(ecg_sample)
chart.set_point_count(pcnt)
chart.set_ext_y_array(ser, ecg_sample)
(continuesonnextpage)
6.3. Extrawidgets 669


--- Page 674 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
slider = lv.slider(lv.scr_act())
slider.set_range(lv.IMG_ZOOM.NONE, lv.IMG_ZOOM.NONE * 10)
slider.add_event_cb(slider_x_event_cb, lv.EVENT.VALUE_CHANGED, None)
slider.set_size(200,10)
slider.align_to(chart, lv.ALIGN.OUT_BOTTOM_MID, 0, 20)
slider = lv.slider(lv.scr_act())
slider.set_range(lv.IMG_ZOOM.NONE, lv.IMG_ZOOM.NONE * 10)
slider.add_event_cb(slider_y_event_cb, lv.EVENT.VALUE_CHANGED, None)
slider.set_size(10, 150)
slider.align_to(chart, lv.ALIGN.OUT_RIGHT_MID, 20, 0)
Showcursorontheclickedpoint
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static lv_obj_t * chart;
static lv_chart_series_t * ser;
static lv_chart_cursor_t * cursor;
static void event_cb(lv_event_t * e)
{
static int32_t last_id = -1;
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
last_id = lv_chart_get_pressed_point(obj);
if(last_id != LV_CHART_POINT_NONE) {
lv_chart_set_cursor_point(obj, cursor, NULL, last_id);
}
}
else if(code == LV_EVENT_DRAW_PART_END) {
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(!lv_obj_draw_part_check_type(dsc, &lv_chart_class, LV_CHART_DRAW_PART_
,→CURSOR)) return;
if(dsc->p1 == NULL || dsc->p2 == NULL || dsc->p1->y != dsc->p2->y || last_id
,→< 0) return;
lv_coord_t * data_array = lv_chart_get_y_array(chart, ser);
lv_coord_t v = data_array[last_id];
char buf[16];
lv_snprintf(buf, sizeof(buf), "%d", v);
lv_point_t size;
lv_txt_get_size(&size, buf, LV_FONT_DEFAULT, 0, 0, LV_COORD_MAX, LV_TEXT_FLAG_
,→NONE);
lv_area_t a;
a.y2 = dsc->p1->y - 5;
a.y1 = a.y2 - size.y - 10;
(continuesonnextpage)
6.3. Extrawidgets 670


--- Page 675 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a.x1 = dsc->p1->x + 10;
a.x2 = a.x1 + size.x + 10;
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_color = lv_palette_main(LV_PALETTE_BLUE);
draw_rect_dsc.radius = 3;
lv_draw_rect(dsc->draw_ctx, &draw_rect_dsc, &a);
lv_draw_label_dsc_t draw_label_dsc;
lv_draw_label_dsc_init(&draw_label_dsc);
draw_label_dsc.color = lv_color_white();
a.x1 += 5;
a.x2 -= 5;
a.y1 += 5;
a.y2 -= 5;
lv_draw_label(dsc->draw_ctx, &draw_label_dsc, &a, buf, NULL);
}
}
/**
* Show cursor on the clicked point
*/
void lv_example_chart_6(void)
{
chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_align(chart, LV_ALIGN_CENTER, 0, -10);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_Y, 10, 5, 6, 5, true, 40);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_X, 10, 5, 10, 1, true, 30);
lv_obj_add_event_cb(chart, event_cb, LV_EVENT_ALL, NULL);
lv_obj_refresh_ext_draw_size(chart);
cursor = lv_chart_add_cursor(chart, lv_palette_main(LV_PALETTE_BLUE), LV_DIR_LEFT␣
,→| LV_DIR_BOTTOM);
ser = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_RED), LV_CHART_AXIS_
,→PRIMARY_Y);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_chart_set_next_value(chart, ser, lv_rand(10, 90));
}
lv_chart_set_zoom_x(chart, 500);
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Click on a point");
lv_obj_align_to(label, chart, LV_ALIGN_OUT_TOP_MID, 0, -5);
}
#endif
class ExampleChart_6():
(continuesonnextpage)
6.3. Extrawidgets 671


--- Page 676 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
def __init__(self):
self.last_id = -1
#
# Show cursor on the clicked point
#
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.align(lv.ALIGN.CENTER, 0, -10)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 10, 5, 6, 5, True, 40)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_X, 10, 5, 10, 1, True, 30)
chart.add_event_cb(self.event_cb, lv.EVENT.ALL, None)
chart.refresh_ext_draw_size()
self.cursor = chart.add_cursor(lv.palette_main(lv.PALETTE.BLUE), lv.DIR.LEFT␣
,→| lv.DIR.BOTTOM)
self.ser = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.
,→PRIMARY_Y)
self.ser_p = []
for i in range(10):
self.ser_p.append(lv.rand(10,90))
self.ser.y_points = self.ser_p
newser = chart.get_series_next(None)
# print("length of data points: ",len(newser.points))
chart.set_zoom_x(500)
label = lv.label(lv.scr_act())
label.set_text("Click on a point")
label.align_to(chart, lv.ALIGN.OUT_TOP_MID, 0, -5)
def event_cb(self,e):
code = e.get_code()
chart = e.get_target()
if code == lv.EVENT.VALUE_CHANGED:
# print("last_id: ",self.last_id)
self.last_id = chart.get_pressed_point()
if self.last_id != lv.CHART_POINT.NONE:
p = lv.point_t()
chart.get_point_pos_by_id(self.ser, self.last_id, p)
chart.set_cursor_point(self.cursor, None, self.last_id)
elif code == lv.EVENT.DRAW_PART_END:
# print("EVENT.DRAW_PART_END")
dsc = lv.obj_draw_part_dsc_t.__cast__(e.get_param())
# if dsc.p1 and dsc.p2:
# print("p1, p2", dsc.p1,dsc.p2)
# print("p1.y, p2.y", dsc.p1.y, dsc.p2.y)
# print("last_id: ",self.last_id)
(continuesonnextpage)
6.3. Extrawidgets 672


--- Page 677 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
if dsc.part == lv.PART.CURSOR and dsc.p1 and dsc.p2 and dsc.p1.y == dsc.
,→p2.y and self.last_id >= 0:
v = self.ser_p[self.last_id]
# print("value: ",v)
value_txt = str(v)
size = lv.point_t()
lv.txt_get_size(size, value_txt, lv.font_default(), 0, 0, lv.COORD.
,→MAX, lv.TEXT_FLAG.NONE)
a = lv.area_t()
a.y2 = dsc.p1.y - 5
a.y1 = a.y2 - size.y - 10
a.x1 = dsc.p1.x + 10
a.x2 = a.x1 + size.x + 10
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_color = lv.palette_main(lv.PALETTE.BLUE)
draw_rect_dsc.radius = 3
lv.draw_rect(a, dsc.clip_area, draw_rect_dsc)
draw_label_dsc = lv.draw_label_dsc_t()
draw_label_dsc.init()
draw_label_dsc.color = lv.color_white()
a.x1 += 5
a.x2 -= 5
a.y1 += 5
a.y2 -= 5
lv.draw_label(a, dsc.clip_area, draw_label_dsc, value_txt, None)
example_chart_6 = ExampleChart_6()
Scatterchart
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_BUILD_EXAMPLES
static void draw_event_cb(lv_event_t * e)
{
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_ITEMS) {
lv_obj_t * obj = lv_event_get_target(e);
lv_chart_series_t * ser = lv_chart_get_series_next(obj, NULL);
uint32_t cnt = lv_chart_get_point_count(obj);
/*Make older value more transparent*/
dsc->rect_dsc->bg_opa = (LV_OPA_COVER * dsc->id) / (cnt - 1);
/*Make smaller values blue, higher values red*/
lv_coord_t * x_array = lv_chart_get_x_array(obj, ser);
lv_coord_t * y_array = lv_chart_get_y_array(obj, ser);
/*dsc->id is the tells drawing order, but we need the ID of the point being␣
,→drawn.*/
(continuesonnextpage)
6.3. Extrawidgets 673


--- Page 678 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
uint32_t start_point = lv_chart_get_x_start_point(obj, ser);
uint32_t p_act = (start_point + dsc->id) % cnt; /*Consider start point to get␣
,→the index of the array*/
lv_opa_t x_opa = (x_array[p_act] * LV_OPA_50) / 200;
lv_opa_t y_opa = (y_array[p_act] * LV_OPA_50) / 1000;
dsc->rect_dsc->bg_color = lv_color_mix(lv_palette_main(LV_PALETTE_RED),
lv_palette_main(LV_PALETTE_BLUE),
x_opa + y_opa);
}
}
static void add_data(lv_timer_t * timer)
{
LV_UNUSED(timer);
lv_obj_t * chart = timer->user_data;
lv_chart_set_next_value2(chart, lv_chart_get_series_next(chart, NULL), lv_rand(0,␣
,→200), lv_rand(0, 1000));
}
/**
* A scatter chart
*/
void lv_example_chart_7(void)
{
lv_obj_t * chart = lv_chart_create(lv_scr_act());
lv_obj_set_size(chart, 200, 150);
lv_obj_align(chart, LV_ALIGN_CENTER, 0, 0);
lv_obj_add_event_cb(chart, draw_event_cb, LV_EVENT_DRAW_PART_BEGIN, NULL);
lv_obj_set_style_line_width(chart, 0, LV_PART_ITEMS); /*Remove the lines*/
lv_chart_set_type(chart, LV_CHART_TYPE_SCATTER);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_X, 5, 5, 5, 1, true, 30);
lv_chart_set_axis_tick(chart, LV_CHART_AXIS_PRIMARY_Y, 10, 5, 6, 5, true, 50);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_X, 0, 200);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_Y, 0, 1000);
lv_chart_set_point_count(chart, 50);
lv_chart_series_t * ser = lv_chart_add_series(chart, lv_palette_main(LV_PALETTE_
,→RED), LV_CHART_AXIS_PRIMARY_Y);
uint32_t i;
for(i = 0; i < 50; i++) {
lv_chart_set_next_value2(chart, ser, lv_rand(0, 200), lv_rand(0, 1000));
}
lv_timer_create(add_data, 100, chart);
}
#endif
#!/opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
(continuesonnextpage)
6.3. Extrawidgets 674


--- Page 679 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
import display_driver
def draw_event_cb(e):
dsc = e.get_draw_part_dsc()
if dsc.part == lv.PART.ITEMS:
obj = e.get_target()
ser = obj.get_series_next(None)
cnt = obj.get_point_count()
# print("cnt: ",cnt)
# Make older value more transparent
dsc.rect_dsc.bg_opa = (lv.OPA.COVER * dsc.id) // (cnt - 1)
# Make smaller values blue, higher values red
# x_array = chart.get_x_array(ser)
# y_array = chart.get_y_array(ser)
# dsc->id is the tells drawing order, but we need the ID of the point being␣
,→drawn.
start_point = chart.get_x_start_point(ser)
# print("start point: ",start_point)
p_act = (start_point + dsc.id) % cnt # Consider start point to get the index␣
,→of the array
# print("p_act", p_act)
x_opa = (x_array[p_act] * lv.OPA._50) // 200
y_opa = (y_array[p_act] * lv.OPA._50) // 1000
dsc.rect_dsc.bg_color = lv.palette_main(lv.PALETTE.RED).color_mix(
lv.palette_main(lv.PALETTE.BLUE),
x_opa + y_opa)
def add_data(timer,chart):
# print("add_data")
x = lv.rand(0,200)
y = lv.rand(0,1000)
chart.set_next_value2(ser, x, y)
# chart.set_next_value2(chart.gx, y)
x_array.pop(0)
x_array.append(x)
y_array.pop(0)
y_array.append(y)
#
# A scatter chart
#
chart = lv.chart(lv.scr_act())
chart.set_size(200, 150)
chart.align(lv.ALIGN.CENTER, 0, 0)
chart.add_event_cb(draw_event_cb, lv.EVENT.DRAW_PART_BEGIN, None)
chart.set_style_line_width(0, lv.PART.ITEMS) # Remove the lines
chart.set_type(lv.chart.TYPE.SCATTER)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_X, 5, 5, 5, 1, True, 30)
chart.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 10, 5, 6, 5, True, 50)
chart.set_range(lv.chart.AXIS.PRIMARY_X, 0, 200)
chart.set_range(lv.chart.AXIS.PRIMARY_Y, 0, 1000)
(continuesonnextpage)
6.3. Extrawidgets 675


--- Page 680 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
chart.set_point_count(50)
ser = chart.add_series(lv.palette_main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
x_array = []
y_array = []
for i in range(50):
x_array.append(lv.rand(0, 200))
y_array.append(lv.rand(0, 1000))
ser.x_points = x_array
ser.y_points = y_array
# Create an `lv_timer` to update the chart.
timer = lv.timer_create_basic()
timer.set_period(100)
timer.set_cb(lambda src: add_data(timer,chart))
Stackedareachart
#include "../../lv_examples.h"
#if LV_USE_CHART && LV_DRAW_COMPLEX && LV_BUILD_EXAMPLES
/* A struct is used to keep track of the series list because later we need to draw␣
,→to the series in the reverse order to which they were initialised. */
typedef struct {
lv_obj_t * obj;
lv_chart_series_t * series_list[3];
} stacked_area_chart_t;
static stacked_area_chart_t stacked_area_chart;
/**
* Callback which draws the blocks of colour under the lines
**/
static void draw_event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
/*Add the faded area before the lines are drawn*/
lv_obj_draw_part_dsc_t * dsc = lv_event_get_draw_part_dsc(e);
if(dsc->part == LV_PART_ITEMS) {
if(!dsc->p1 || !dsc->p2)
return;
/*Add a line mask that keeps the area below the line*/
lv_draw_mask_line_param_t line_mask_param;
lv_draw_mask_line_points_init(&line_mask_param, dsc->p1->x, dsc->p1->y, dsc->
,→p2->x, dsc->p2->y,
LV_DRAW_MASK_LINE_SIDE_BOTTOM);
int16_t line_mask_id = lv_draw_mask_add(&line_mask_param, NULL);
(continuesonnextpage)
6.3. Extrawidgets 676


--- Page 681 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Draw a rectangle that will be affected by the mask*/
lv_draw_rect_dsc_t draw_rect_dsc;
lv_draw_rect_dsc_init(&draw_rect_dsc);
draw_rect_dsc.bg_opa = LV_OPA_COVER;
draw_rect_dsc.bg_color = dsc->line_dsc->color;
lv_area_t a;
a.x1 = dsc->p1->x;
a.x2 = dsc->p2->x;
a.y1 = LV_MIN(dsc->p1->y, dsc->p2->y);
a.y2 = obj->coords.y2 -
13; /* -13 cuts off where the rectangle draws over the chart margin.␣
,→Without this an area of 0 doesn't look like 0 */
lv_draw_rect(dsc->draw_ctx, &draw_rect_dsc, &a);
/*Remove the mask*/
lv_draw_mask_free_param(&line_mask_param);
lv_draw_mask_remove_id(line_mask_id);
}
}
/**
* Helper function to round a fixed point number
**/
static int32_t round_fixed_point(int32_t n, int8_t shift)
{
/* Create a bitmask to isolates the decimal part of the fixed point number */
int32_t mask = 1;
for(int32_t bit_pos = 0; bit_pos < shift; bit_pos++) {
mask = (mask << 1) + 1;
}
int32_t decimal_part = n & mask;
/* Get 0.5 as fixed point */
int32_t rounding_boundary = 1 << (shift - 1);
/* Return either the integer part of n or the integer part + 1 */
return (decimal_part < rounding_boundary) ? (n & ~mask) : ((n >> shift) + 1) <<␣
,→shift;
}
/**
* Stacked area chart
*/
void lv_example_chart_8(void)
{
/*Create a stacked_area_chart.obj*/
stacked_area_chart.obj = lv_chart_create(lv_scr_act());
lv_obj_set_size(stacked_area_chart.obj, 200, 150);
lv_obj_center(stacked_area_chart.obj);
lv_chart_set_type(stacked_area_chart.obj, LV_CHART_TYPE_LINE);
lv_chart_set_div_line_count(stacked_area_chart.obj, 5, 7);
lv_obj_add_event_cb(stacked_area_chart.obj, draw_event_cb, LV_EVENT_DRAW_PART_
,→BEGIN, NULL);
/* Set range to 0 to 100 for percentages. Draw ticks */
(continuesonnextpage)
6.3. Extrawidgets 677


--- Page 682 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_chart_set_range(stacked_area_chart.obj, LV_CHART_AXIS_PRIMARY_Y, 0, 100);
lv_chart_set_axis_tick(stacked_area_chart.obj, LV_CHART_AXIS_PRIMARY_Y, 3, 0, 5,␣
,→1, true, 30);
/*Set point size to 0 so the lines are smooth */
lv_obj_set_style_size(stacked_area_chart.obj, 0, LV_PART_INDICATOR);
/*Add some data series*/
stacked_area_chart.series_list[0] = lv_chart_add_series(stacked_area_chart.obj,␣
,→lv_palette_main(LV_PALETTE_RED),
LV_CHART_AXIS_PRIMARY_Y);
stacked_area_chart.series_list[1] = lv_chart_add_series(stacked_area_chart.obj,␣
,→lv_palette_main(LV_PALETTE_BLUE),
LV_CHART_AXIS_PRIMARY_Y);
stacked_area_chart.series_list[2] = lv_chart_add_series(stacked_area_chart.obj,␣
,→lv_palette_main(LV_PALETTE_GREEN),
LV_CHART_AXIS_PRIMARY_Y);
for(int point = 0; point < 10; point++) {
/* Make some random data */
uint32_t vals[3] = {lv_rand(10, 20), lv_rand(20, 30), lv_rand(20, 30)};
int8_t fixed_point_shift = 5;
uint32_t total = vals[0] + vals[1] + vals[2];
uint32_t draw_heights[3];
uint32_t int_sum = 0;
uint32_t decimal_sum = 0;
/* Fixed point cascade rounding ensures percentages add to 100 */
for(int32_t series_index = 0; series_index < 3; series_index++) {
decimal_sum += (((vals[series_index] * 100) << fixed_point_shift) /␣
,→total);
int_sum += (vals[series_index] * 100) / total;
int32_t modifier = (round_fixed_point(decimal_sum, fixed_point_shift) >>␣
,→fixed_point_shift) - int_sum;
/* The draw heights are equal to the percentage of the total each value␣
,→is + the cumulative sum of the previous percentages.
The accumulation is how the values get "stacked" */
draw_heights[series_index] = int_sum + modifier;
/* Draw to the series in the reverse order to which they were␣
,→initialised.
Without this the higher values will draw on top of the lower ones.
This is because the Z-height of a series matches the order it was␣
,→initialised */
lv_chart_set_next_value(stacked_area_chart.obj, stacked_area_chart.series_
,→list[3 - series_index - 1],
draw_heights[series_index]);
}
}
lv_chart_refresh(stacked_area_chart.obj);
}
#endif
6.3. Extrawidgets 678


--- Page 683 ---


LVGLDocumentation8.3
import display_driver
import lvgl as lv
# A class is used to keep track of the series list because later we
# need to draw to the series in the reverse order to which they were initialised.
class StackedAreaChart:
def __init__(self):
self.obj = None
self.series_list = [None, None, None]
stacked_area_chart = StackedAreaChart()
#
# Callback which draws the blocks of colour under the lines
#
def draw_event_cb(e):
obj = e.get_target()
cont_a = lv.area_t()
obj.get_coords(cont_a)
#Add the faded area before the lines are drawn
dsc = e.get_draw_part_dsc()
if dsc.part == lv.PART.ITEMS:
if not dsc.p1 or not dsc.p2:
return
# Add a line mask that keeps the area below the line
line_mask_param = lv.draw_mask_line_param_t()
line_mask_param.points_init(dsc.p1.x, dsc.p1.y, dsc.p2.x, dsc.p2.y, lv.DRAW_
,→MASK_LINE_SIDE.BOTTOM)
line_mask_id = lv.draw_mask_add(line_mask_param, None)
#Draw a rectangle that will be affected by the mask
draw_rect_dsc = lv.draw_rect_dsc_t()
draw_rect_dsc.init()
draw_rect_dsc.bg_opa = lv.OPA.COVER
draw_rect_dsc.bg_color = dsc.line_dsc.color
a = lv.area_t()
a.x1 = dsc.p1.x
a.x2 = dsc.p2.x
a.y1 = min(dsc.p1.y, dsc.p2.y)
a.y2 = cont_a.y2 - 13 # -13 cuts off where the rectangle draws over the chart␣
,→margin. Without this an area of 0 doesn't look like 0
dsc.draw_ctx.rect(draw_rect_dsc, a)
# Remove the mask
lv.draw_mask_free_param(line_mask_param)
lv.draw_mask_remove_id(line_mask_id)
#
# Helper function to round a fixed point number
#
def round_fixed_point(n, shift):
# Create a bitmask to isolates the decimal part of the fixed point number
(continuesonnextpage)
6.3. Extrawidgets 679


--- Page 684 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
mask = 1
for bit_pos in range(shift):
mask = (mask << 1) + 1
decimal_part = n & mask
# Get 0.5 as fixed point
rounding_boundary = 1 << (shift - 1)
# Return either the integer part of n or the integer part + 1
if decimal_part < rounding_boundary:
return (n & ~mask)
return ((n >> shift) + 1) << shift
#
# Stacked area chart
#
def lv_example_chart_8():
#Create a stacked_area_chart.obj
stacked_area_chart.obj = lv.chart(lv.scr_act())
stacked_area_chart.obj.set_size(200, 150)
stacked_area_chart.obj.center()
stacked_area_chart.obj.set_type( lv.chart.TYPE.LINE)
stacked_area_chart.obj.set_div_line_count(5, 7)
stacked_area_chart.obj.add_event_cb( draw_event_cb, lv.EVENT.DRAW_PART_BEGIN,␣
,→None)
# Set range to 0 to 100 for percentages. Draw ticks
stacked_area_chart.obj.set_range(lv.chart.AXIS.PRIMARY_Y,0,100)
stacked_area_chart.obj.set_axis_tick(lv.chart.AXIS.PRIMARY_Y, 3, 0, 5, 1, True,␣
,→30)
#Set point size to 0 so the lines are smooth
stacked_area_chart.obj.set_style_size(0, lv.PART.INDICATOR)
# Add some data series
stacked_area_chart.series_list[0] = stacked_area_chart.obj.add_series(lv.palette_
,→main(lv.PALETTE.RED), lv.chart.AXIS.PRIMARY_Y)
stacked_area_chart.series_list[1] = stacked_area_chart.obj.add_series(lv.palette_
,→main(lv.PALETTE.BLUE), lv.chart.AXIS.PRIMARY_Y)
stacked_area_chart.series_list[2] = stacked_area_chart.obj.add_series(lv.palette_
,→main(lv.PALETTE.GREEN), lv.chart.AXIS.PRIMARY_Y)
for point in range(10):
# Make some random data
vals = [lv.rand(10, 20), lv.rand(20, 30), lv.rand(20, 30)]
fixed_point_shift = 5
total = vals[0] + vals[1] + vals[2]
draw_heights = [0, 0, 0]
int_sum = 0
decimal_sum = 0
# Fixed point cascade rounding ensures percentages add to 100
for series_index in range(3):
(continuesonnextpage)
6.3. Extrawidgets 680


--- Page 685 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
decimal_sum += int(((vals[series_index] * 100) << fixed_point_shift) //␣
,→total)
int_sum += int((vals[series_index] * 100) / total)
modifier = (round_fixed_point(decimal_sum, fixed_point_shift) >> fixed_
,→point_shift) - int_sum
# The draw heights are equal to the percentage of the total each value␣
,→is + the cumulative sum of the previous percentages.
# The accumulation is how the values get "stacked"
draw_heights[series_index] = int(int_sum + modifier)
# Draw to the series in the reverse order to which they were initialised.
# Without this the higher values will draw on top of the lower ones.
# This is because the Z-height of a series matches the order it was␣
,→initialised
stacked_area_chart.obj.set_next_value( stacked_area_chart.series_list[3 -␣
,→series_index - 1], draw_heights[series_index])
stacked_area_chart.obj.refresh()
lv_example_chart_8()
API
Typedefs
typedefuint8_tlv_chart_type_t
typedefuint8_tlv_chart_update_mode_t
typedefuint8_tlv_chart_axis_t
Enums
enum[anonymous]
Charttypes
Values:
enumeratorLV_CHART_TYPE_NONE
Don'tdrawtheseries
enumeratorLV_CHART_TYPE_LINE
Connectthepointswithlines
enumeratorLV_CHART_TYPE_BAR
Drawcolumns
6.3. Extrawidgets 681


--- Page 686 ---


LVGLDocumentation8.3
enumeratorLV_CHART_TYPE_SCATTER
Drawpointsandlinesin2D(x,ycoordinates)
enum[anonymous]
Chartupdatemodeforlv_chart_set_next
Values:
enumeratorLV_CHART_UPDATE_MODE_SHIFT
Shiftolddatatotheleftandaddthenewonetheright
enumeratorLV_CHART_UPDATE_MODE_CIRCULAR
Addthenewdatainacircularway
enum[anonymous]
Enumerationoftheaxis'
Values:
enumeratorLV_CHART_AXIS_PRIMARY_Y
enumeratorLV_CHART_AXIS_SECONDARY_Y
enumeratorLV_CHART_AXIS_PRIMARY_X
enumeratorLV_CHART_AXIS_SECONDARY_X
enumerator_LV_CHART_AXIS_LAST
enumlv_chart_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_chart_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_CHART_DRAW_PART_DIV_LINE_INIT
Usedbefore/afterdrawnthedivlines
enumeratorLV_CHART_DRAW_PART_DIV_LINE_HOR
Usedforeachhorizontaldivisionlines
enumeratorLV_CHART_DRAW_PART_DIV_LINE_VER
Usedforeachverticaldivisionlines
enumeratorLV_CHART_DRAW_PART_LINE_AND_POINT
Usedonlineandscatterchartsforlinesandpoints
6.3. Extrawidgets 682


--- Page 687 ---


LVGLDocumentation8.3
enumeratorLV_CHART_DRAW_PART_BAR
Usedonbarchartsfortherectangles
enumeratorLV_CHART_DRAW_PART_CURSOR
Usedoncursorlinesandpoints
enumeratorLV_CHART_DRAW_PART_TICK_LABEL
Usedonticklinesandlabels
Functions
LV_EXPORT_CONST_INT(LV_CHART_POINT_NONE)
lv_obj_t*lv_chart_create(lv_obj_t*parent)
Createachartobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewchart
Returns pointertothecreatedchart
voidlv_chart_set_type(lv_obj_t*obj,lv_chart_type_ttype)
Setanewtypeforachart
Parameters
• obj--pointertoachartobject
• type--newtypeofthechart(from'lv_chart_type_t'enum)
voidlv_chart_set_point_count(lv_obj_t*obj,uint16_tcnt)
Setthenumberofpointsonadatalineonachart
Parameters
• obj--pointertoachartobject
• cnt--newnumberofpointsonthedatalines
voidlv_chart_set_range(lv_obj_t*obj,lv_chart_axis_taxis,lv_coord_tmin,lv_coord_tmax)
Settheminimalandmaximalyvaluesonanaxis
Parameters
• obj--pointertoachartobject
• axis--LV_CHART_AXIS_PRIMARY_YorLV_CHART_AXIS_SECONDARY_Y
• min--minimumvalueoftheyaxis
• max--maximumvalueoftheyaxis
voidlv_chart_set_update_mode(lv_obj_t*obj,lv_chart_update_mode_tupdate_mode)
Setupdatemodeofthechartobject. Affects
Parameters
• obj--pointertoachartobject
• mode--theupdatemode
6.3. Extrawidgets 683


--- Page 688 ---


LVGLDocumentation8.3
voidlv_chart_set_div_line_count(lv_obj_t*obj,uint8_thdiv,uint8_tvdiv)
Setthenumberofhorizontalandverticaldivisionlines
Parameters
• obj--pointertoachartobject
• hdiv--numberofhorizontaldivisionlines
• vdiv--numberofverticaldivisionlines
voidlv_chart_set_zoom_x(lv_obj_t*obj,uint16_tzoom_x)
ZoomintothechartinXdirection
Parameters
• obj--pointertoachartobject
• zoom_x--zoominxdirection. LV_ZOOM_NONEor256fornozoom,512doublezoom
voidlv_chart_set_zoom_y(lv_obj_t*obj,uint16_tzoom_y)
ZoomintothechartinYdirection
Parameters
• obj--pointertoachartobject
• zoom_y--zoominydirection. LV_ZOOM_NONEor256fornozoom,512doublezoom
uint16_tlv_chart_get_zoom_x(constlv_obj_t*obj)
GetXzoomofachart
Parameters obj--pointertoachartobject
Returns theXzoomvalue
uint16_tlv_chart_get_zoom_y(constlv_obj_t*obj)
GetYzoomofachart
Parameters obj--pointertoachartobject
Returns theYzoomvalue
voidlv_chart_set_axis_tick(lv_obj_t*obj,lv_chart_axis_taxis,lv_coord_tmajor_len,lv_coord_t
minor_len,lv_coord_tmajor_cnt,lv_coord_tminor_cnt,boollabel_en,
lv_coord_tdraw_size)
Setthenumberofticklinesonanaxis
Parameters
• obj--pointertoachartobject
• axis--anaxiswhichtickscountshouldbeset
• major_len--lengthofmajorticks
• minor_len--lengthofminorticks
• major_cnt--numberofmajorticksontheaxis
• minor_cnt--numberofminorticksbetweentwomajorticks
• label_en--true: enablelabeldrawingonmajorticks
• draw_size--extrasizerequiredtodrawthetickandlabels(startwith20pxandincrease
iftheticks/labelsareclipped)
6.3. Extrawidgets 684


--- Page 689 ---


LVGLDocumentation8.3
lv_chart_type_tlv_chart_get_type(constlv_obj_t*obj)
Getthetypeofachart
Parameters obj--pointertochartobject
Returns typeofthechart(from'lv_chart_t'enum)
uint16_tlv_chart_get_point_count(constlv_obj_t*obj)
Getthedatapointnumberperdatalineonchart
Parameters chart--pointertochartobject
Returns pointnumberoneachdataline
uint16_tlv_chart_get_x_start_point(constlv_obj_t*obj,lv_chart_series_t*ser)
Getthecurrentindexofthex-axisstartpointinthedataarray
Parameters
• chart--pointertoachartobject
• ser--pointertoadataserieson'chart'
Returns theindexofthecurrentxstartpointinthedataarray
voidlv_chart_get_point_pos_by_id(lv_obj_t*obj,lv_chart_series_t*ser,uint16_tid,lv_point_t*p_out)
Getthepositionofapointtothechart.
Parameters
• chart--pointertoachartobject
• ser--pointertoseries
• id--theindex.
• p_out--storetheresultpositionhere
voidlv_chart_refresh(lv_obj_t*obj)
Refreshachartifitsdatalinehaschanged
Parameters chart--pointertochartobject
lv_chart_series_t*lv_chart_add_series(lv_obj_t*obj,lv_color_tcolor,lv_chart_axis_taxis)
Allocateandaddadataseriestothechart
Parameters
• obj--pointertoachartobject
• color--colorofthedataseries
• axis -- the y axis to which the series should be attached
(::LV_CHART_AXIS_PRIMARY_Yor::LV_CHART_AXIS_SECONDARY_Y)
Returns pointertotheallocateddataseries
voidlv_chart_remove_series(lv_obj_t*obj,lv_chart_series_t*series)
Deallocateandremoveadataseriesfromachart
Parameters
• chart--pointertoachartobject
• series--pointertoadataserieson'chart'
6.3. Extrawidgets 685


--- Page 690 ---


LVGLDocumentation8.3
voidlv_chart_hide_series(lv_obj_t*chart,lv_chart_series_t*series,boolhide)
Hide/Unhideasingleseriesofachart.
Parameters
• obj--pointertoachartobject.
• series--pointertoaseriesobject
• hide--true: hidetheseries
voidlv_chart_set_series_color(lv_obj_t*chart,lv_chart_series_t*series,lv_color_tcolor)
Changethecolorofaseries
Parameters
• obj--pointertoachartobject.
• series--pointertoaseriesobject
• color--thenewcoloroftheseries
voidlv_chart_set_x_start_point(lv_obj_t*obj,lv_chart_series_t*ser,uint16_tid)
Settheindexofthex-axisstartpointinthedataarray. Thispointwillbeconsidersthefirst(left)pointandthe
otherpointswillbedrawnafterit.
Parameters
• obj--pointertoachartobject
• ser--pointertoadataserieson'chart'
• id--theindexofthexpointinthedataarray
lv_chart_series_t*lv_chart_get_series_next(constlv_obj_t*chart,constlv_chart_series_t*ser)
Getthenextseries.
Parameters
• chart--pointertoachart
• ser--thepreviousseriesorNULLtogetthefirst
Returns thenextseriesorNULLifthereisnomore.
lv_chart_cursor_t*lv_chart_add_cursor(lv_obj_t*obj,lv_color_tcolor,lv_dir_tdir)
Addacursorwithagivencolor
Parameters
• obj--pointertochartobject
• color--colorofthecursor
• dir -- direction of the cursor. LV_DIR_RIGHT/LEFT/TOP/DOWN/HOR/VER/ALL.
OR-edvaluesarepossible
Returns pointertothecreatedcursor
voidlv_chart_set_cursor_pos(lv_obj_t*chart,lv_chart_cursor_t*cursor,lv_point_t*pos)
Setthecoordinateofthecursorwithrespecttothepaddings
Parameters
• obj--pointertoachartobject
• cursor--pointertothecursor
6.3. Extrawidgets 686


--- Page 691 ---


LVGLDocumentation8.3
• pos--thenewcoordinateofcursorrelativetothechart
voidlv_chart_set_cursor_point(lv_obj_t*chart,lv_chart_cursor_t*cursor,lv_chart_series_t*ser,uint16_t
point_id)
Stickthecursortoapoint
Parameters
• obj--pointertoachartobject
• cursor--pointertothecursor
• ser--pointertoaseries
• point_id--thepoint'sindexorLV_CHART_POINT_NONEtonotassigntoanypoints.
lv_point_tlv_chart_get_cursor_point(lv_obj_t*chart,lv_chart_cursor_t*cursor)
Getthecoordinateofthecursorwithrespecttothepaddings
Parameters
• obj--pointertoachartobject
• cursor--pointertocursor
Returns coordinateofthecursoraslv_point_t
voidlv_chart_set_all_value(lv_obj_t*obj,lv_chart_series_t*ser,lv_coord_tvalue)
Initializealldatapointsofaserieswithavalue
Parameters
• obj--pointertochartobject
• ser--pointertoadataserieson'chart'
• value--thenewvalueforallpoints. LV_CHART_POINT_NONEcanbeusedtohidethe
points.
voidlv_chart_set_next_value(lv_obj_t*obj,lv_chart_series_t*ser,lv_coord_tvalue)
Setthenextpoint'sYvalueaccordingtotheupdatemodepolicy.
Parameters
• obj--pointertochartobject
• ser--pointertoadataserieson'chart'
• value--thenewvalueofthenextdata
voidlv_chart_set_next_value2(lv_obj_t*obj,lv_chart_series_t*ser,lv_coord_tx_value,lv_coord_t
y_value)
Setthenextpoint'sXandYvalueaccordingtotheupdatemodepolicy.
Parameters
• obj--pointertochartobject
• ser--pointertoadataserieson'chart'
• x_value--thenewXvalueofthenextdata
• y_value--thenewYvalueofthenextdata
6.3. Extrawidgets 687


--- Page 692 ---


LVGLDocumentation8.3
voidlv_chart_set_value_by_id(lv_obj_t*obj,lv_chart_series_t*ser,uint16_tid,lv_coord_tvalue)
Setanindividualpoint'syvalueofachart'sseriesdirectlybasedonitsindex
Parameters
• obj--pointertoachartobject
• ser--pointertoadataserieson'chart'
• id--theindexofthexpointinthearray
• value--valuetoassigntoarraypoint
voidlv_chart_set_value_by_id2(lv_obj_t*obj,lv_chart_series_t*ser,uint16_tid,lv_coord_tx_value,
lv_coord_ty_value)
Set an individual point's x and y value of a chart's series directly based on its index Can be used only with
LV_CHART_TYPE_SCATTER.
Parameters
• obj--pointertochartobject
• ser--pointertoadataserieson'chart'
• id--theindexofthexpointinthearray
• x_value--thenewXvalueofthenextdata
• y_value--thenewYvalueofthenextdata
voidlv_chart_set_ext_y_array(lv_obj_t*obj,lv_chart_series_t*ser,lv_coord_tarray[])
SetanexternalarrayfortheydatapointstouseforthechartNOTE:Itistheusersresponsibilitytomakesurethe
point_cntmatchestheexternalarraysize.
Parameters
• obj--pointertoachartobject
• ser--pointertoadataserieson'chart'
• array--externalarrayofpointsforchart
voidlv_chart_set_ext_x_array(lv_obj_t*obj,lv_chart_series_t*ser,lv_coord_tarray[])
SetanexternalarrayforthexdatapointstouseforthechartNOTE:Itistheusersresponsibilitytomakesurethe
point_cntmatchestheexternalarraysize.
Parameters
• obj--pointertoachartobject
• ser--pointertoadataserieson'chart'
• array--externalarrayofpointsforchart
lv_coord_t*lv_chart_get_y_array(constlv_obj_t*obj,lv_chart_series_t*ser)
Getthearrayofyvaluesofaseries
Parameters
• obj--pointertoachartobject
• ser--pointertoadataserieson'chart'
Returns thearrayofvalueswith'point_count'elements
6.3. Extrawidgets 688


--- Page 693 ---


LVGLDocumentation8.3
lv_coord_t*lv_chart_get_x_array(constlv_obj_t*obj,lv_chart_series_t*ser)
Getthearrayofxvaluesofaseries
Parameters
• obj--pointertoachartobject
• ser--pointertoadataserieson'chart'
Returns thearrayofvalueswith'point_count'elements
uint32_tlv_chart_get_pressed_point(constlv_obj_t*obj)
Gettheindexofthecurrentlypressedpoint. It'sthesameforeveryseries.
Parameters obj--pointertoachartobject
Returns theindexofthepoint[0.. pointcount]orLV_CHART_POINT_ID_NONEifnopointis
beingpressed
Variables
constlv_obj_class_tlv_chart_class
structlv_chart_series_t
#include<lv_chart.h>Descriptorachartseries
PublicMembers
lv_coord_t*x_points
lv_coord_t*y_points
lv_color_tcolor
uint16_tstart_point
uint8_thidden
uint8_tx_ext_buf_assigned
uint8_ty_ext_buf_assigned
uint8_tx_axis_sec
uint8_ty_axis_sec
structlv_chart_cursor_t
6.3. Extrawidgets 689


--- Page 694 ---


LVGLDocumentation8.3
PublicMembers
lv_point_tpos
lv_coord_tpoint_id
lv_color_tcolor
lv_chart_series_t*ser
lv_dir_tdir
uint8_tpos_set
structlv_chart_tick_dsc_t
PublicMembers
lv_coord_tmajor_len
lv_coord_tminor_len
lv_coord_tdraw_size
uint32_tminor_cnt
uint32_tmajor_cnt
uint32_tlabel_en
structlv_chart_t
PublicMembers
lv_obj_tobj
lv_ll_tseries_ll
Linkedlistfortheseries(storeslv_chart_series_t)
lv_ll_tcursor_ll
Linkedlistforthecursors(storeslv_chart_cursor_t)
6.3. Extrawidgets 690


--- Page 695 ---


LVGLDocumentation8.3
lv_chart_tick_dsc_ttick[4]
lv_coord_tymin[2]
lv_coord_tymax[2]
lv_coord_txmin[2]
lv_coord_txmax[2]
lv_coord_tpressed_point_id
uint16_thdiv_cnt
Numberofhorizontaldivisionlines
uint16_tvdiv_cnt
Numberofverticaldivisionlines
uint16_tpoint_cnt
Pointnumberinadataline
uint16_tzoom_x
uint16_tzoom_y
lv_chart_type_ttype
Lineorcolumnchart
lv_chart_update_mode_tupdate_mode
6.3.4 Color wheel (lv_colorwheel)
Overview
As its name implies Color wheel allows the user to select a color. The Hue, Saturation and Value of the color can be
selectedseparately.
Long pressing the object, the color wheel will change to the next parameter of the color (hue, saturation or value). A
doubleclickwillresetthecurrentparameter.
6.3. Extrawidgets 691


--- Page 696 ---


LVGLDocumentation8.3
PartsandStyles
• LV_PART_MAINOnlyarc_widthisusedtosetthewidthofthecolorwheel
• LV_PART_KNOBArectangle(orcircle)drawnonthecurrentvalue. Itusesalltherectanglelikestyleproperties
andpaddingtomakeitlargerthanthewidthofthearc.
Usage
Createacolorwheel
lv_colorwheel_create(parent, knob_recolor) creates a new color wheel. With
knob_recolor=truetheknob'sbackgroundcolorwillbesettothecurrentcolor.
Setcolor
The color can be set manually with lv_colorwheel_set_hue/saturation/
value(colorwheel, x) or all at once with lv_colorwheel_set_hsv(colorwheel, hsv) or
lv_colorwheel_set_color(colorwheel, rgb)
Colormode
The current color mode can be manually selected with lv_colorwheel_set_mode(colorwheel,
LV_COLORWHEEL_MODE_HUE/SATURATION/VALUE).
The color mode can be fixed (so as to not change with long press) using
lv_colorwheel_set_mode_fixed(colorwheel, true)
Events
• LV_EVENT_VALUE_CHANGEDSentifanewcolorisselected.
LearnmoreaboutEvents.
Keys
• LV_KEY_UP,LV_KEY_RIGHTIncrementthecurrentparameter'svalueby1
• LV_KEY_DOWN,LV_KEY_LEFTDecrementthecurrentparameter'svalueby1
• LV_KEY_ENTERAlongpresswillshowthenextmode. Doubleclicktoresetthecurrentparameter.
LearnmoreaboutKeys.
6.3. Extrawidgets 692


--- Page 697 ---


LVGLDocumentation8.3
Example
SimpleColorwheel
#include "../../lv_examples.h"
#if LV_USE_COLORWHEEL && LV_BUILD_EXAMPLES
void lv_example_colorwheel_1(void)
{
lv_obj_t * cw;
cw = lv_colorwheel_create(lv_scr_act(), true);
lv_obj_set_size(cw, 200, 200);
lv_obj_center(cw);
}
#endif
cw = lv.colorwheel(lv.scr_act(), True)
cw.set_size(200, 200)
cw.center()
API
Typedefs
typedefuint8_tlv_colorwheel_mode_t
Enums
enum[anonymous]
Values:
enumeratorLV_COLORWHEEL_MODE_HUE
enumeratorLV_COLORWHEEL_MODE_SATURATION
enumeratorLV_COLORWHEEL_MODE_VALUE
6.3. Extrawidgets 693


--- Page 698 ---


LVGLDocumentation8.3
Functions
lv_obj_t*lv_colorwheel_create(lv_obj_t*parent,boolknob_recolor)
Createacolorpickerobjectwithdiscshape
Parameters
• parent--pointertoanobject,itwillbetheparentofthenewcolorpicker
• knob_recolor--true: settheknob'scolortothecurrentcolor
Returns pointertothecreatedcolorpicker
boollv_colorwheel_set_hsv(lv_obj_t*obj,lv_color_hsv_thsv)
Setthecurrenthsvofacolorwheel.
Parameters
• colorwheel--pointertocolorwheelobject
• color--currentselectedhsv
Returns trueifchanged,otherwisefalse
boollv_colorwheel_set_rgb(lv_obj_t*obj,lv_color_tcolor)
Setthecurrentcolorofacolorwheel.
Parameters
• colorwheel--pointertocolorwheelobject
• color--currentselectedcolor
Returns trueifchanged,otherwisefalse
voidlv_colorwheel_set_mode(lv_obj_t*obj,lv_colorwheel_mode_tmode)
Setthecurrentcolormode.
Parameters
• colorwheel--pointertocolorwheelobject
• mode--colormode(hue/sat/val)
voidlv_colorwheel_set_mode_fixed(lv_obj_t*obj,boolfixed)
Setifthecolormodeischangedonlongpressoncenter
Parameters
• colorwheel--pointertocolorwheelobject
• fixed--colormodecannotbechangedonlongpress
lv_color_hsv_tlv_colorwheel_get_hsv(lv_obj_t*obj)
Getthecurrentselectedhsvofacolorwheel.
Parameters colorwheel--pointertocolorwheelobject
Returns currentselectedhsv
lv_color_tlv_colorwheel_get_rgb(lv_obj_t*obj)
Getthecurrentselectedcolorofacolorwheel.
Parameters colorwheel--pointertocolorwheelobject
Returns colorcurrentselectedcolor
6.3. Extrawidgets 694


--- Page 699 ---


LVGLDocumentation8.3
lv_colorwheel_mode_tlv_colorwheel_get_color_mode(lv_obj_t*obj)
Getthecurrentcolormode.
Parameters colorwheel--pointertocolorwheelobject
Returns colormode(hue/sat/val)
boollv_colorwheel_get_color_mode_fixed(lv_obj_t*obj)
Getifthecolormodeischangedonlongpressoncenter
Parameters colorwheel--pointertocolorwheelobject
Returns modecannotbechangedonlongpress
Variables
constlv_obj_class_tlv_colorwheel_class
structlv_colorwheel_t
PublicMembers
lv_obj_tobj
lv_color_hsv_thsv
lv_point_tpos
uint8_trecolor
structlv_colorwheel_t::[anonymous]knob
uint32_tlast_click_time
uint32_tlast_change_time
lv_point_tlast_press_point
lv_colorwheel_mode_tmode
uint8_tmode_fixed
6.3. Extrawidgets 695


--- Page 700 ---


LVGLDocumentation8.3
6.3.5 Image button (lv_imgbtn)
Overview
TheImagebuttonisverysimilartothesimple'Button'object. Theonlydifferenceisthatitdisplaysuser-definedimages
ineachstateinsteadofdrawingarectangle.
Youcansetaleft,rightandcenterimage,andthecenterimagewillberepeatedtomatchthewidthoftheobject.
PartsandStyles
• LV_PART_MAINReferstotheimage(s). Ifbackgroundstylepropertiesareused,arectanglewillbedrawnbehind
theimagebutton.
Usage
Imagesources
Tosettheimageinastate,usethelv_imgbtn_set_src(imgbtn, LV_IMGBTN_STATE_..., src_left,
src_center, src_right).
TheimagesourcesworkthesameasdescribedintheImageobjectexceptthat"Symbols"arenotsupportedbytheImage
button. AnyofthesourcescanNULL.
Thepossiblestatesare:
• LV_IMGBTN_STATE_RELEASED
• LV_IMGBTN_STATE_PRESSED
• LV_IMGBTN_STATE_DISABLED
• LV_IMGBTN_STATE_CHECKED_RELEASED
• LV_IMGBTN_STATE_CHECKED_PRESSED
• LV_IMGBTN_STATE_CHECKED_DISABLED
IfyousetsourcesonlyinLV_IMGBTN_STATE_RELEASED,thesesourceswillbeusedinotherstatestoo. Ifyouset
e.g. LV_IMGBTN_STATE_PRESSEDtheywillbeusedinpressedstateinsteadofthereleasedimages.
States
Instead of the regular lv_obj_add/clear_state() functions the lv_imgbtn_set_state(imgbtn,
LV_IMGBTN_STATE_...)functionsshouldbeusedtomanuallysetastate.
6.3. Extrawidgets 696


--- Page 701 ---


LVGLDocumentation8.3
Events
• LV_EVENT_VALUE_CHANGEDSentwhenthebuttonistoggled.
LearnmoreaboutEvents.
Keys
• LV_KEY_RIGHT/UPGototoggledstateifLV_OBJ_FLAG_CHECKABLEisenabled.
• LV_KEY_LEFT/DOWNGotonon-toggledstateifLV_OBJ_FLAG_CHECKABLEisenabled.
• LV_KEY_ENTERClicksthebutton
LearnmoreaboutKeys.
Example
SimpleImagebutton
#include "../../lv_examples.h"
#if LV_USE_IMGBTN && LV_BUILD_EXAMPLES
void lv_example_imgbtn_1(void)
{
LV_IMG_DECLARE(imgbtn_left);
LV_IMG_DECLARE(imgbtn_right);
LV_IMG_DECLARE(imgbtn_mid);
/*Create a transition animation on width transformation and recolor.*/
static lv_style_prop_t tr_prop[] = {LV_STYLE_TRANSFORM_WIDTH, LV_STYLE_IMG_
,→RECOLOR_OPA, 0};
static lv_style_transition_dsc_t tr;
lv_style_transition_dsc_init(&tr, tr_prop, lv_anim_path_linear, 200, 0, NULL);
static lv_style_t style_def;
lv_style_init(&style_def);
lv_style_set_text_color(&style_def, lv_color_white());
lv_style_set_transition(&style_def, &tr);
/*Darken the button when pressed and make it wider*/
static lv_style_t style_pr;
lv_style_init(&style_pr);
lv_style_set_img_recolor_opa(&style_pr, LV_OPA_30);
lv_style_set_img_recolor(&style_pr, lv_color_black());
lv_style_set_transform_width(&style_pr, 20);
/*Create an image button*/
lv_obj_t * imgbtn1 = lv_imgbtn_create(lv_scr_act());
lv_imgbtn_set_src(imgbtn1, LV_IMGBTN_STATE_RELEASED, &imgbtn_left, &imgbtn_mid, &
,→imgbtn_right);
lv_obj_add_style(imgbtn1, &style_def, 0);
lv_obj_add_style(imgbtn1, &style_pr, LV_STATE_PRESSED);
lv_obj_align(imgbtn1, LV_ALIGN_CENTER, 0, 0);
(continuesonnextpage)
6.3. Extrawidgets 697


--- Page 702 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create a label on the image button*/
lv_obj_t * label = lv_label_create(imgbtn1);
lv_label_set_text(label, "Button");
lv_obj_align(label, LV_ALIGN_CENTER, 0, -4);
}
#endif
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/imgbtn_left.png','rb') as f:
imgbtn_left_data = f.read()
except:
print("Could not find imgbtn_left.png")
sys.exit()
imgbtn_left_dsc = lv.img_dsc_t({
'data_size': len(imgbtn_left_data),
'data': imgbtn_left_data
})
try:
with open('../../assets/imgbtn_mid.png','rb') as f:
imgbtn_mid_data = f.read()
except:
print("Could not find imgbtn_mid.png")
sys.exit()
imgbtn_mid_dsc = lv.img_dsc_t({
'data_size': len(imgbtn_mid_data),
'data': imgbtn_mid_data
})
try:
with open('../../assets/imgbtn_right.png','rb') as f:
imgbtn_right_data = f.read()
except:
print("Could not find imgbtn_right.png")
sys.exit()
imgbtn_right_dsc = lv.img_dsc_t({
'data_size': len(imgbtn_right_data),
'data': imgbtn_right_data
})
# Create a transition animation on width transformation and recolor.
tr_prop = [lv.STYLE.TRANSFORM_WIDTH, lv.STYLE.IMG_RECOLOR_OPA, 0]
tr = lv.style_transition_dsc_t()
tr.init(tr_prop, lv.anim_t.path_linear, 200, 0, None)
(continuesonnextpage)
6.3. Extrawidgets 698


--- Page 703 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
style_def = lv.style_t()
style_def.init()
style_def.set_text_color(lv.color_white())
style_def.set_transition(tr)
# Darken the button when pressed and make it wider
style_pr = lv.style_t()
style_pr.init()
style_pr.set_img_recolor_opa(lv.OPA._30)
style_pr.set_img_recolor(lv.color_black())
style_pr.set_transform_width(20)
# Create an image button
imgbtn1 = lv.imgbtn(lv.scr_act())
imgbtn1.set_src(lv.imgbtn.STATE.RELEASED, imgbtn_left_dsc, imgbtn_mid_dsc, imgbtn_
,→right_dsc)
imgbtn1.add_style(style_def, 0)
imgbtn1.add_style(style_pr, lv.STATE.PRESSED)
imgbtn1.align(lv.ALIGN.CENTER, 0, 0)
# Create a label on the image button
label = lv.label(imgbtn1)
label.set_text("Button")
label.align(lv.ALIGN.CENTER, 0, -4)
API
Enums
enumlv_imgbtn_state_t
Values:
enumeratorLV_IMGBTN_STATE_RELEASED
enumeratorLV_IMGBTN_STATE_PRESSED
enumeratorLV_IMGBTN_STATE_DISABLED
enumeratorLV_IMGBTN_STATE_CHECKED_RELEASED
enumeratorLV_IMGBTN_STATE_CHECKED_PRESSED
enumeratorLV_IMGBTN_STATE_CHECKED_DISABLED
enumerator_LV_IMGBTN_STATE_NUM
6.3. Extrawidgets 699


--- Page 704 ---


LVGLDocumentation8.3
Functions
lv_obj_t*lv_imgbtn_create(lv_obj_t*parent)
Createanimagebuttonobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewimagebutton
Returns pointertothecreatedimagebutton
voidlv_imgbtn_set_src(lv_obj_t*imgbtn,lv_imgbtn_state_tstate,constvoid*src_left,constvoid*src_mid,
constvoid*src_right)
Setimagesforastateoftheimagebutton
Parameters
• imgbtn--pointertoanimagebuttonobject
• state--forwhichstatesetthenewimage
• src_left--pointertoanimagesourcefortheleftsideofthebutton(aCarrayorpathto
afile)
• src_mid--pointertoanimagesourceforthemiddleofthebutton(ideally1pxwide)(aC
arrayorpathtoafile)
• src_right--pointertoanimagesourcefortherightsideofthebutton(aCarrayorpath
toafile)
voidlv_imgbtn_set_state(lv_obj_t*imgbtn,lv_imgbtn_state_tstate)
Usethisfunctioninsteadoflv_obj_add/clear_statetosetastatemanually
Parameters
• imgbtn--pointertoanimagebuttonobject
• state--thenewstate
constvoid*lv_imgbtn_get_src_left(lv_obj_t*imgbtn,lv_imgbtn_state_tstate)
Gettheleftimageinagivenstate
Parameters
• imgbtn--pointertoanimagebuttonobject
• state--thestatewheretogettheimage(fromlv_btn_state_t)`
Returns pointertotheleftimagesource(aCarrayorpathtoafile)
constvoid*lv_imgbtn_get_src_middle(lv_obj_t*imgbtn,lv_imgbtn_state_tstate)
Getthemiddleimageinagivenstate
Parameters
• imgbtn--pointertoanimagebuttonobject
• state--thestatewheretogettheimage(fromlv_btn_state_t)`
Returns pointertothemiddleimagesource(aCarrayorpathtoafile)
constvoid*lv_imgbtn_get_src_right(lv_obj_t*imgbtn,lv_imgbtn_state_tstate)
Gettherightimageinagivenstate
Parameters
• imgbtn--pointertoanimagebuttonobject
6.3. Extrawidgets 700


--- Page 705 ---


LVGLDocumentation8.3
• state--thestatewheretogettheimage(fromlv_btn_state_t)`
Returns pointertotheleftimagesource(aCarrayorpathtoafile)
Variables
constlv_obj_class_tlv_imgbtn_class
structlv_imgbtn_t
PublicMembers
lv_obj_tobj
constvoid*img_src_mid[_LV_IMGBTN_STATE_NUM]
constvoid*img_src_left[_LV_IMGBTN_STATE_NUM]
constvoid*img_src_right[_LV_IMGBTN_STATE_NUM]
lv_img_cf_tact_cf
6.3.6 Keyboard (lv_keyboard)
Overview
TheKeyboardobjectisaspecialButtonmatrixwithpredefinedkeymapsandotherfeaturestorealizeavirtualkeyboard
towritetextsintoaTextarea.
PartsandStyles
SimilarlytoButtonmatricesKeyboardsconsistof2part:
• LV_PART_MAINThemainpart. Usesallthetypicalbackgroundproperties
• LV_PART_ITEMSThebuttons. Alsousesalltypicalbackgroundpropertiesaswellasthetextproperties.
Usage
Modes
TheKeyboardshavethefollowingmodes:
• LV_KEYBOARD_MODE_TEXT_LOWERDisplaylowercaseletters
• LV_KEYBOARD_MODE_TEXT_UPPERDisplayuppercaseletters
• LV_KEYBOARD_MODE_TEXT_SPECIALDisplayspecialcharacters
6.3. Extrawidgets 701


--- Page 706 ---


LVGLDocumentation8.3
• LV_KEYBOARD_MODE_NUMBERDisplaynumbers,+/-sign,anddecimaldot
• LV_KEYBOARD_MODE_USER_1throughLV_KEYBOARD_MODE_USER_4User-definedmodes.
TheTEXTmodes'layoutcontainsbuttonstochangemode.
To set the mode manually, use lv_keyboard_set_mode(kb, mode). The default mode is
LV_KEYBOARD_MODE_TEXT_UPPER.
AssignTextarea
YoucanassignaTextareatotheKeyboardtoautomaticallyputtheclickedcharactersthere. Toassignthetextarea,use
lv_keyboard_set_textarea(kb, ta).
KeyPopovers
To enable key popovers on press, like on common Android and iOS keyboards, use
lv_keyboard_set_popovers(kb, true). The default control maps are preconfigured to only show
the popovers on keys that produce a symbol and not on e.g. space. If you use a custom keymap, set the
LV_BTNMATRIX_CTRL_POPOVERflagforallkeysthatyouwanttoshowapopover.
Notethatpopoversforkeysinthetoprowwilldrawoutsidethewidgetboundaries. Toaccountforthis,reserveextrafree
spaceontopofthekeyboardorensurethatthekeyboardisaddedafteranywidgetsadjacenttoitstopboundarysothat
thepopoverscandrawoverthose.
Thepopoverscurrentlyaremerelyavisualeffectanddon'tallowselectingadditionalcharacterssuchasaccentsyet.
NewKeymap
You can specify a new map (layout) for the keyboard with lv_keyboard_set_map(kb, map) and
lv_keyboard_set_ctrl_map(kb, ctrl_map). Learn more about the Button matrix object. Keep in mind
thatusingfollowingkeywordswillhavethesameeffectaswiththeoriginalmap:
• LV_SYMBOL_OKApply.
• LV_SYMBOL_CLOSEorLV_SYMBOL_KEYBOARDClose.
• LV_SYMBOL_BACKSPACEDeleteontheleft.
• LV_SYMBOL_LEFTMovethecursorleft.
• LV_SYMBOL_RIGHTMovethecursorright.
• LV_SYMBOL_NEW_LINENewline.
• "ABC" Loadtheuppercasemap.
• "abc" Loadthelowercasemap.
• "1#" Loadthelowercasemap.
6.3. Extrawidgets 702


--- Page 707 ---


LVGLDocumentation8.3
Events
• LV_EVENT_VALUE_CHANGEDSentwhenthebuttonispressed/releasedorrepeatedafterlongpress. Theevent
dataissettotheIDofthepressed/releasedbutton.
• LV_EVENT_READY-TheOkbuttonisclicked.
• LV_EVENT_CANCEL-TheClosebuttonisclicked.
Thekeyboardhasadefaulteventhandlercallbackcalledlv_keyboard_def_event_cb,whichhandlesthebutton
pressing,mapchanging,theassignedtextarea,etc. Youcanremoveitandreplaceitwithacustomeventhandlerifyou
wish.
Note: In8.0andnewer,addinganeventhandlertothekeyboarddoesnotremovethedefaulteventhandler. Thisbehavior
differsfromv7,whereaddinganeventhandlerwouldalwaysreplacethepreviousone.
LearnmoreaboutEvents.
Keys
• LV_KEY_RIGHT/UP/LEFT/RIGHTTonavigateamongthebuttonsandselectone.
• LV_KEY_ENTERTopress/releasetheselectedbutton.
LearnmoreaboutKeys.
Examples
Keyboardwithtextarea
#include "../../lv_examples.h"
#if LV_USE_KEYBOARD && LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * ta = lv_event_get_target(e);
lv_obj_t * kb = lv_event_get_user_data(e);
if(code == LV_EVENT_FOCUSED) {
lv_keyboard_set_textarea(kb, ta);
lv_obj_clear_flag(kb, LV_OBJ_FLAG_HIDDEN);
}
if(code == LV_EVENT_DEFOCUSED) {
lv_keyboard_set_textarea(kb, NULL);
lv_obj_add_flag(kb, LV_OBJ_FLAG_HIDDEN);
}
}
void lv_example_keyboard_1(void)
{
/*Create a keyboard to use it with an of the text areas*/
lv_obj_t * kb = lv_keyboard_create(lv_scr_act());
(continuesonnextpage)
6.3. Extrawidgets 703


--- Page 708 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create a text area. The keyboard will write here*/
lv_obj_t * ta;
ta = lv_textarea_create(lv_scr_act());
lv_obj_align(ta, LV_ALIGN_TOP_LEFT, 10, 10);
lv_obj_add_event_cb(ta, ta_event_cb, LV_EVENT_ALL, kb);
lv_textarea_set_placeholder_text(ta, "Hello");
lv_obj_set_size(ta, 140, 80);
ta = lv_textarea_create(lv_scr_act());
lv_obj_align(ta, LV_ALIGN_TOP_RIGHT, -10, 10);
lv_obj_add_event_cb(ta, ta_event_cb, LV_EVENT_ALL, kb);
lv_obj_set_size(ta, 140, 80);
lv_keyboard_set_textarea(kb, ta);
}
#endif
def ta_event_cb(e,kb):
code = e.get_code()
ta = e.get_target()
if code == lv.EVENT.FOCUSED:
kb.set_textarea(ta)
kb.clear_flag(lv.obj.FLAG.HIDDEN)
if code == lv.EVENT.DEFOCUSED:
kb.set_textarea(None)
kb.add_flag(lv.obj.FLAG.HIDDEN)
# Create a keyboard to use it with one of the text areas
kb = lv.keyboard(lv.scr_act())
# Create a text area. The keyboard will write here
ta = lv.textarea(lv.scr_act())
ta.set_width(200)
ta.align(lv.ALIGN.TOP_LEFT, 10, 10)
ta.add_event_cb(lambda e: ta_event_cb(e,kb), lv.EVENT.ALL, None)
ta.set_placeholder_text("Hello")
ta = lv.textarea(lv.scr_act())
ta.set_width(200)
ta.align(lv.ALIGN.TOP_RIGHT, -10, 10)
ta.add_event_cb(lambda e: ta_event_cb(e,kb), lv.EVENT.ALL, None)
kb.set_textarea(ta)
6.3. Extrawidgets 704


--- Page 709 ---


LVGLDocumentation8.3
API
Typedefs
typedefuint8_tlv_keyboard_mode_t
Enums
enum[anonymous]
Currentkeyboardmode.
Values:
enumeratorLV_KEYBOARD_MODE_TEXT_LOWER
enumeratorLV_KEYBOARD_MODE_TEXT_UPPER
enumeratorLV_KEYBOARD_MODE_SPECIAL
enumeratorLV_KEYBOARD_MODE_NUMBER
enumeratorLV_KEYBOARD_MODE_USER_1
enumeratorLV_KEYBOARD_MODE_USER_2
enumeratorLV_KEYBOARD_MODE_USER_3
enumeratorLV_KEYBOARD_MODE_USER_4
Functions
lv_obj_t*lv_keyboard_create(lv_obj_t*parent)
CreateaKeyboardobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewkeyboard
Returns pointertothecreatedkeyboard
voidlv_keyboard_set_textarea(lv_obj_t*kb,lv_obj_t*ta)
AssignaTextAreatotheKeyboard. Thepressedcharacterswillbeputthere.
Parameters
• kb--pointertoaKeyboardobject
• ta--pointertoaTextAreaobjecttowritethere
6.3. Extrawidgets 705


--- Page 710 ---


LVGLDocumentation8.3
voidlv_keyboard_set_mode(lv_obj_t*kb,lv_keyboard_mode_tmode)
Setanewamode(textornumbermap)
Parameters
• kb--pointertoaKeyboardobject
• mode--themodefrom'lv_keyboard_mode_t'
voidlv_keyboard_set_popovers(lv_obj_t*kb,boolen)
Showthebuttontitleinapopoverwhenpressed.
Parameters
• kb--pointertoaKeyboardobject
• en--whether"popovers"modeisenabled
voidlv_keyboard_set_map(lv_obj_t*kb,lv_keyboard_mode_tmode,constchar*map[],const
lv_btnmatrix_ctrl_tctrl_map[])
Setanewmapforthekeyboard
Parameters
• kb--pointertoaKeyboardobject
• mode--keyboardmaptoalter'lv_keyboard_mode_t'
• map--pointertoastringarraytodescribethemap. See'lv_btnmatrix_set_map()'formore
info.
lv_obj_t*lv_keyboard_get_textarea(constlv_obj_t*kb)
AssignaTextAreatotheKeyboard. Thepressedcharacterswillbeputthere.
Parameters kb--pointertoaKeyboardobject
Returns pointertotheassignedTextAreaobject
lv_keyboard_mode_tlv_keyboard_get_mode(constlv_obj_t*kb)
Setanewamode(textornumbermap)
Parameters kb--pointertoaKeyboardobject
Returns thecurrentmodefrom'lv_keyboard_mode_t'
boollv_btnmatrix_get_popovers(constlv_obj_t*obj)
Tellwhether"popovers"modeisenabledornot.
Parameters kb--pointertoaKeyboardobject
Returns true: "popovers"modeisenabled;false: disabled
staticinlineconstchar**lv_keyboard_get_map_array(constlv_obj_t*kb)
Getthecurrentmapofakeyboard
Parameters kb--pointertoakeyboardobject
Returns thecurrentmap
staticinlineuint16_tlv_keyboard_get_selected_btn(constlv_obj_t*obj)
Gettheindexofthelastly"activated"buttonbytheuser(pressed,released,focusedetc)Usefulintheevent_cb
togetthetextofthebutton,checkifhiddenetc.
Parameters obj--pointertobuttonmatrixobject
6.3. Extrawidgets 706


--- Page 711 ---


LVGLDocumentation8.3
Returns indexofthelastreleasedbutton(LV_BTNMATRIX_BTN_NONE:ifunset)
staticinlineconstchar*lv_keyboard_get_btn_text(constlv_obj_t*obj,uint16_tbtn_id)
Getthebutton'stext
Parameters
• obj--pointertobuttonmatrixobject
• btn_id--theindexabuttonnotcountingnewlinecharacters.
Returns textofbtn_index`button
voidlv_keyboard_def_event_cb(lv_event_t*e)
DefaultkeyboardeventtoaddcharacterstotheTextareaandchangethemap. Ifacustomevent_cbisadded
tothekeyboardthisfunctioncanbecalledfromittohandlethebuttonclicks
Parameters
• kb--pointertoakeyboard
• event--thetriggeringevent
Variables
constlv_obj_class_tlv_keyboard_class
structlv_keyboard_t
PublicMembers
lv_btnmatrix_tbtnm
lv_obj_t*ta
lv_keyboard_mode_tmode
uint8_tpopovers
6.3.7 LED (lv_led)
Overview
TheLEDsarerectangle-like(orcircle)objectwhosebrightnesscanbeadjusted. Withlowerbrightnessthecolorsofthe
LEDbecomedarker.
6.3. Extrawidgets 707


--- Page 712 ---


LVGLDocumentation8.3
PartsandStyles
TheLEDshaveonlyonemainpart,calledLV_LED_PART_MAINanditusesallthetypicalbackgroundstyleproperties.
Usage
Color
YoucansetthecoloroftheLEDwithlv_led_set_color(led, lv_color_hex(0xff0080)). Thiswill
beusedasbackgroundcolor,bordercolor,andshadowcolor.
Brightness
You can set their brightness with lv_led_set_bright(led, bright). The brightness should be between 0
(darkest)and255(lightest).
Toggle
Use lv_led_on(led) and lv_led_off(led) to set the brightness to a predefined ON or OFF value. The
lv_led_toggle(led)togglesbetweentheONandOFFstate.
Events
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDissentforthefollowingtypes:
– LV_LED_DRAW_PART_RECTANGLEThemainrectangle. LV_OBJ_DRAW_PART_RECTANGLEisnot
sentbythebaseobject.
∗ part: LV_PART_MAIN
∗ rect_dsc
∗ draw_area: theareaoftherectangle
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
6.3. Extrawidgets 708


--- Page 713 ---


LVGLDocumentation8.3
Example
LEDwithcustomstyle
#include "../../lv_examples.h"
#if LV_USE_LED && LV_BUILD_EXAMPLES
/**
* Create LED's with different brightness and color
*/
void lv_example_led_1(void)
{
/*Create a LED and switch it OFF*/
lv_obj_t * led1 = lv_led_create(lv_scr_act());
lv_obj_align(led1, LV_ALIGN_CENTER, -80, 0);
lv_led_off(led1);
/*Copy the previous LED and set a brightness*/
lv_obj_t * led2 = lv_led_create(lv_scr_act());
lv_obj_align(led2, LV_ALIGN_CENTER, 0, 0);
lv_led_set_brightness(led2, 150);
lv_led_set_color(led2, lv_palette_main(LV_PALETTE_RED));
/*Copy the previous LED and switch it ON*/
lv_obj_t * led3 = lv_led_create(lv_scr_act());
lv_obj_align(led3, LV_ALIGN_CENTER, 80, 0);
lv_led_on(led3);
}
#endif
#
# Create LED's with different brightness and color
#
# Create a LED and switch it OFF
led1 = lv.led(lv.scr_act())
led1.align(lv.ALIGN.CENTER, -80, 0)
led1.off()
# Copy the previous LED and set a brightness
led2 = lv.led(lv.scr_act())
led2.align(lv.ALIGN.CENTER, 0, 0)
led2.set_brightness(150)
led2.set_color(lv.palette_main(lv.PALETTE.RED))
# Copy the previous LED and switch it ON
led3 = lv.led(lv.scr_act())
led3.align(lv.ALIGN.CENTER, 80, 0)
led3.on()
6.3. Extrawidgets 709


--- Page 714 ---


LVGLDocumentation8.3
API
Enums
enumlv_led_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_led_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_LED_DRAW_PART_RECTANGLE
Themainrectangle
Functions
lv_obj_t*lv_led_create(lv_obj_t*parent)
Createaledobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewled
Returns pointertothecreatedled
voidlv_led_set_color(lv_obj_t*led,lv_color_tcolor)
SetthecoloroftheLED
Parameters
• led--pointertoaLEDobject
• color--thecoloroftheLED
voidlv_led_set_brightness(lv_obj_t*led,uint8_tbright)
SetthebrightnessofaLEDobject
Parameters
• led--pointertoaLEDobject
• bright--LV_LED_BRIGHT_MIN(max. dark)... LV_LED_BRIGHT_MAX(max. light)
voidlv_led_on(lv_obj_t*led)
LightonaLED
Parameters led--pointertoaLEDobject
voidlv_led_off(lv_obj_t*led)
LightoffaLED
Parameters led--pointertoaLEDobject
voidlv_led_toggle(lv_obj_t*led)
TogglethestateofaLED
Parameters led--pointertoaLEDobject
uint8_tlv_led_get_brightness(constlv_obj_t*obj)
GetthebrightnessofaLEdobject
Parameters led--pointertoLEDobject
6.3. Extrawidgets 710


--- Page 715 ---


LVGLDocumentation8.3
Returns bright0(max. dark)... 255(max. light)
Variables
constlv_obj_class_tlv_led_class
structlv_led_t
PublicMembers
lv_obj_tobj
lv_color_tcolor
uint8_tbright
CurrentbrightnessoftheLED(0..255)
6.3.8 List (lv_list)
Overview
TheListisbasicallyarectanglewithverticallayouttowhichButtonsandTextscanbeadded
PartsandStyles
Background
• LV_PART_MAINThemainpartofthelistthatusesallthetypicalbackgroundproperties
• LV_PART_SCROLLBARThescrollbar. SeetheBaseobjectsdocumentationfordetails.
ButtonsandTextsSeetheButton'sandLabel'sdocumentation.
Usage
Buttons
lv_list_add_btn(list, icon, text)addsafull-widthbuttonwithanicon-thatcanbeanimageorsymbol
-andatext.
Thetextstartstoscrollhorizontallyifit'stoolong.
6.3. Extrawidgets 711


--- Page 716 ---


LVGLDocumentation8.3
Texts
lv_list_add_text(list, text)addsatext.
Events
NospecialeventsaresentbytheList,butsentbytheButtonasusual.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
SimpleList
#include "../../lv_examples.h"
#if LV_USE_LIST && LV_BUILD_EXAMPLES
static lv_obj_t * list1;
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
LV_LOG_USER("Clicked: %s", lv_list_get_btn_text(list1, obj));
}
}
void lv_example_list_1(void)
{
/*Create a list*/
list1 = lv_list_create(lv_scr_act());
lv_obj_set_size(list1, 180, 220);
lv_obj_center(list1);
/*Add buttons to the list*/
lv_obj_t * btn;
lv_list_add_text(list1, "File");
btn = lv_list_add_btn(list1, LV_SYMBOL_FILE, "New");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_DIRECTORY, "Open");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_SAVE, "Save");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_CLOSE, "Delete");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_EDIT, "Edit");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
(continuesonnextpage)
6.3. Extrawidgets 712


--- Page 717 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_list_add_text(list1, "Connectivity");
btn = lv_list_add_btn(list1, LV_SYMBOL_BLUETOOTH, "Bluetooth");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_GPS, "Navigation");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_USB, "USB");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_BATTERY_FULL, "Battery");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_list_add_text(list1, "Exit");
btn = lv_list_add_btn(list1, LV_SYMBOL_OK, "Apply");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_list_add_btn(list1, LV_SYMBOL_CLOSE, "Close");
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
}
#endif
def event_handler(e):
code = e.get_code()
obj = e.get_target()
if code == lv.EVENT.CLICKED:
print("Clicked: list1." + list1.get_btn_text(obj))
# Create a list
list1 = lv.list(lv.scr_act())
list1.set_size(180, 220)
list1.center()
# Add buttons to the list
list1.add_text("File")
btn_new = list1.add_btn(lv.SYMBOL.FILE, "New")
btn_new.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_open = list1.add_btn(lv.SYMBOL.DIRECTORY, "Open")
btn_open.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_save = list1.add_btn(lv.SYMBOL.SAVE, "Save")
btn_save.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_delete = list1.add_btn(lv.SYMBOL.CLOSE, "Delete")
btn_delete.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_edit = list1.add_btn(lv.SYMBOL.EDIT, "Edit")
btn_edit.add_event_cb(event_handler,lv.EVENT.ALL, None)
list1.add_text("Connectivity")
btn_bluetooth = list1.add_btn(lv.SYMBOL.BLUETOOTH, "Bluetooth")
btn_bluetooth.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_navig = list1.add_btn(lv.SYMBOL.GPS, "Navigation")
btn_navig.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_USB = list1.add_btn(lv.SYMBOL.USB, "USB")
btn_USB.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_battery = list1.add_btn(lv.SYMBOL.BATTERY_FULL, "Battery")
btn_battery.add_event_cb(event_handler,lv.EVENT.ALL, None)
list1.add_text("Exit")
btn_apply = list1.add_btn(lv.SYMBOL.OK, "Apply")
(continuesonnextpage)
6.3. Extrawidgets 713


--- Page 718 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn_apply.add_event_cb(event_handler,lv.EVENT.ALL, None)
btn_close = list1.add_btn(lv.SYMBOL.CLOSE, "Close")
btn_close.add_event_cb(event_handler,lv.EVENT.ALL, None)
SortingaListusingupanddownbuttons
#include <stdlib.h>
#include "../../lv_examples.h"
#if LV_USE_LIST && LV_BUILD_EXAMPLES
static lv_obj_t * list1;
static lv_obj_t * list2;
static lv_obj_t * currentButton = NULL;
static void event_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_CLICKED) {
LV_LOG_USER("Clicked: %s", lv_list_get_btn_text(list1, obj));
if(currentButton == obj) {
currentButton = NULL;
}
else {
currentButton = obj;
}
lv_obj_t * parent = lv_obj_get_parent(obj);
uint32_t i;
for(i = 0; i < lv_obj_get_child_cnt(parent); i++) {
lv_obj_t * child = lv_obj_get_child(parent, i);
if(child == currentButton) {
lv_obj_add_state(child, LV_STATE_CHECKED);
}
else {
lv_obj_clear_state(child, LV_STATE_CHECKED);
}
}
}
}
static void event_handler_top(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED) {
if(currentButton == NULL) return;
lv_obj_move_background(currentButton);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
(continuesonnextpage)
6.3. Extrawidgets 714


--- Page 719 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static void event_handler_up(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
if(currentButton == NULL) return;
uint32_t index = lv_obj_get_index(currentButton);
if(index <= 0) return;
lv_obj_move_to_index(currentButton, index - 1);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_center(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
if(currentButton == NULL) return;
lv_obj_t * parent = lv_obj_get_parent(currentButton);
const uint32_t pos = lv_obj_get_child_cnt(parent) / 2;
lv_obj_move_to_index(currentButton, pos);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_dn(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
if(currentButton == NULL) return;
const uint32_t index = lv_obj_get_index(currentButton);
lv_obj_move_to_index(currentButton, index + 1);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_bottom(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED) {
if(currentButton == NULL) return;
lv_obj_move_foreground(currentButton);
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
static void event_handler_swap(lv_event_t * e)
{
const lv_event_code_t code = lv_event_get_code(e);
// lv_obj_t* obj = lv_event_get_target(e);
if((code == LV_EVENT_CLICKED) || (code == LV_EVENT_LONG_PRESSED_REPEAT)) {
uint32_t cnt = lv_obj_get_child_cnt(list1);
for(int i = 0; i < 100; i++)
if(cnt > 1) {
(continuesonnextpage)
6.3. Extrawidgets 715


--- Page 720 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * obj = lv_obj_get_child(list1, rand() % cnt);
lv_obj_move_to_index(obj, rand() % cnt);
if(currentButton != NULL) {
lv_obj_scroll_to_view(currentButton, LV_ANIM_ON);
}
}
}
}
void lv_example_list_2(void)
{
/*Create a list*/
list1 = lv_list_create(lv_scr_act());
lv_obj_set_size(list1, lv_pct(60), lv_pct(100));
lv_obj_set_style_pad_row(list1, 5, 0);
/*Add buttons to the list*/
lv_obj_t * btn;
int i;
for(i = 0; i < 15; i++) {
btn = lv_btn_create(list1);
lv_obj_set_width(btn, lv_pct(50));
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_t * lab = lv_label_create(btn);
lv_label_set_text_fmt(lab, "Item %d", i);
}
/*Select the first button by default*/
currentButton = lv_obj_get_child(list1, 0);
lv_obj_add_state(currentButton, LV_STATE_CHECKED);
/*Create a second list with up and down buttons*/
list2 = lv_list_create(lv_scr_act());
lv_obj_set_size(list2, lv_pct(40), lv_pct(100));
lv_obj_align(list2, LV_ALIGN_TOP_RIGHT, 0, 0);
lv_obj_set_flex_flow(list2, LV_FLEX_FLOW_COLUMN);
btn = lv_list_add_btn(list2, NULL, "Top");
lv_obj_add_event_cb(btn, event_handler_top, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, LV_SYMBOL_UP, "Up");
lv_obj_add_event_cb(btn, event_handler_up, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, LV_SYMBOL_LEFT, "Center");
lv_obj_add_event_cb(btn, event_handler_center, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, LV_SYMBOL_DOWN, "Down");
lv_obj_add_event_cb(btn, event_handler_dn, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
btn = lv_list_add_btn(list2, NULL, "Bottom");
lv_obj_add_event_cb(btn, event_handler_bottom, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
(continuesonnextpage)
6.3. Extrawidgets 716


--- Page 721 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn = lv_list_add_btn(list2, LV_SYMBOL_SHUFFLE, "Shuffle");
lv_obj_add_event_cb(btn, event_handler_swap, LV_EVENT_ALL, NULL);
lv_group_remove_obj(btn);
}
#endif
import urandom
currentButton = None
list1 = None
def event_handler(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED:
if currentButton == obj:
currentButton = None
else:
currentButton = obj
parent = obj.get_parent()
for i in range( parent.get_child_cnt()):
child = parent.get_child(i)
if child == currentButton:
child.add_state(lv.STATE.CHECKED)
else:
child.clear_state(lv.STATE.CHECKED)
def event_handler_top(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED:
if currentButton == None:
return
currentButton.move_background()
currentButton.scroll_to_view( lv.ANIM.ON)
def event_handler_up(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
index = currentButton.get_index()
if index <= 0:
return
currentButton.move_to_index(index - 1)
currentButton.scroll_to_view(lv.ANIM.ON)
def event_handler_center(evt):
global currentButton
code = evt.get_code()
(continuesonnextpage)
6.3. Extrawidgets 717


--- Page 722 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
parent = currentButton.get_parent()
pos = parent.get_child_cnt() // 2
currentButton.move_to_index(pos)
currentButton.scroll_to_view(lv.ANIM.ON)
def event_handler_dn(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
index = currentButton.get_index()
currentButton.move_to_index(index + 1)
currentButton.scroll_to_view(lv.ANIM.ON)
def event_handler_bottom(evt):
global currentButton
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
if currentButton == None:
return
currentButton.move_foreground()
currentButton.scroll_to_view(lv.ANIM.ON)
def event_handler_swap(evt):
global currentButton
global list1
code = evt.get_code()
obj = evt.get_target()
if code == lv.EVENT.CLICKED:
cnt = list1.get_child_cnt()
for i in range(100):
if cnt > 1:
obj = list1.get_child(urandom.getrandbits(32) % cnt )
obj.move_to_index(urandom.getrandbits(32) % cnt)
if currentButton != None:
currentButton.scroll_to_view(lv.ANIM.ON)
#Create a list with buttons that can be sorted
list1 = lv.list(lv.scr_act())
list1.set_size(lv.pct(60), lv.pct(100))
list1.set_style_pad_row( 5, 0)
for i in range(15):
btn = lv.btn(list1)
btn.set_width(lv.pct(100))
btn.add_event_cb( event_handler, lv.EVENT.CLICKED, None)
lab = lv.label(btn)
lab.set_text("Item " + str(i))
#Select the first button by default
(continuesonnextpage)
6.3. Extrawidgets 718


--- Page 723 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
currentButton = list1.get_child(0)
currentButton.add_state(lv.STATE.CHECKED)
#Create a second list with up and down buttons
list2 = lv.list(lv.scr_act())
list2.set_size(lv.pct(40), lv.pct(100))
list2.align(lv.ALIGN.TOP_RIGHT, 0, 0)
list2.set_flex_flow(lv.FLEX_FLOW.COLUMN)
btn = list2.add_btn(None, "Top")
btn.add_event_cb(event_handler_top, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.UP, "Up")
btn.add_event_cb(event_handler_up, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.LEFT, "Center")
btn.add_event_cb(event_handler_center, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.DOWN, "Down")
btn.add_event_cb(event_handler_dn, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(None, "Bottom")
btn.add_event_cb(event_handler_bottom, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
btn = list2.add_btn(lv.SYMBOL.SHUFFLE, "Shuffle")
btn.add_event_cb(event_handler_swap, lv.EVENT.ALL, None)
lv.group_remove_obj(btn)
API
Functions
lv_obj_t*lv_list_create(lv_obj_t*parent)
lv_obj_t*lv_list_add_text(lv_obj_t*list,constchar*txt)
lv_obj_t*lv_list_add_btn(lv_obj_t*list,constvoid*icon,constchar*txt)
constchar*lv_list_get_btn_text(lv_obj_t*list,lv_obj_t*btn)
6.3. Extrawidgets 719


--- Page 724 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_list_class
constlv_obj_class_tlv_list_text_class
constlv_obj_class_tlv_list_btn_class
6.3.9 Menu (lv_menu)
Overview
Themenuwidgetcanbeusedtoeasilycreatemulti-levelmenus. Ithandlesthetraversalbetweenpagesautomatically.
PartsandStyles
Themenuwidgetisbuiltfromthefollowingobjects:
• Maincontainer: lv_menu_main_cont
– Mainheader: lv_menu_main_header_cont
∗ Backbtn: lv_btn
· Backbtnicon: lv_img
– Mainpage: lv_menu_page
• Sidebarcontainer: lv_menu_sidebar_cont
– Sidebarheader: lv_menu_sidebar_header_cont
∗ Backbtn: lv_btn
· Backbtnicon: lv_img
– Sidebarpage: lv_menu_page
Usage
Createamenu
lv_menu_create(parent)createsanewemptymenu.
6.3. Extrawidgets 720


--- Page 725 ---


LVGLDocumentation8.3
Headermode
Thefollowingheadermodesexist:
• LV_MENU_HEADER_TOP_FIXEDHeaderispositionedatthetop.
• LV_MENU_HEADER_TOP_UNFIXEDHeaderispositionedatthetopandcanbescrolledoutofview.
• LV_MENU_HEADER_BOTTOM_FIXEDHeaderispositionedatthebottom.
Youcansetheadermodeswithlv_menu_set_mode_header(menu, LV_MENU_HEADER...).
Rootbackbuttonmode
Thefollowingrootbackbuttonmodesexist:
• LV_MENU_ROOT_BACK_BTN_DISABLED
• LV_MENU_ROOT_BACK_BTN_ENABLED
You can set root back button modes with lv_menu_set_mode_root_back_btn(menu,
LV_MENU_ROOT_BACK_BTN...).
Createamenupage
lv_menu_page_create(menu, title)createsanewemptymenupage. Youcanaddanywidgetstothepage.
Setamenupageinthemainarea
Once a menu page has been created, you can set it to the main area with lv_menu_set_page(menu, page).
NULLtoclearmainandclearmenuhistory.
Setamenupageinthesidebar
Once a menu page has been created, you can set it to the sidebar with lv_menu_set_sidebar_page(menu,
page). NULLtoclearsidebar.
Linkingbetweenmenupages
Forinstance,youhavecreatedabtnobjinthemainpage. Whenyouclickthebtnobj,youwantittoopenupanewpage,
uselv_menu_set_load_page_event(menu, obj, new page).
6.3. Extrawidgets 721


--- Page 726 ---


LVGLDocumentation8.3
Createamenucontainer,section,separator
Thefollowingobjectscanbecreatedsothatitiseasiertostylethemenu:
lv_menu_cont_create(parent page)createsanewemptycontainer.
lv_menu_section_create(parent page)createsanewemptysection.
lv_menu_separator_create(parent page)createsaseparator.
Events
• LV_EVENT_VALUE_CHANGEDSentwhenapageisshown.
– lv_menu_get_cur_main_page(menu)returnsapointertomenupagethatiscurrentlydisplayedin
main.
– lv_menu_get_cur_sidebar_page(menu)returnsapointertomenupagethatiscurrentlydisplayed
insidebar.
• LV_EVENT_CLICKED Sent when a back btn in a header from either main or sidebar is clicked.
LV_OBJ_FLAG_EVENT_BUBBLEisenabledonthebuttonssoyoucanaddeventstothemenuitself.
– lv_menu_back_btn_is_root(menu, btn)tocheckifbtnisrootbackbtn
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
Nokeysarehandledbythemenuwidget.
LearnmoreaboutKeys.
Example
SimpleMenu
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_BUILD_EXAMPLES
void lv_example_menu_1(void)
{
/*Create a menu object*/
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * label;
/*Create a sub page*/
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
(continuesonnextpage)
6.3. Extrawidgets 722


--- Page 727 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
/*Create a main page*/
lv_obj_t * main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1");
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 2");
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 3 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_menu_set_page(menu, main_page);
}
#endif
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_size(320, 240)
menu.center()
# Create a sub page
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 2")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 3 (Click me!)")
menu.set_load_page_event(cont, sub_page)
menu.set_page(main_page)
6.3. Extrawidgets 723


--- Page 728 ---


LVGLDocumentation8.3
SimpleMenuwithrootbtn
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_USE_MSGBOX && LV_BUILD_EXAMPLES
static void back_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_t * menu = lv_event_get_user_data(e);
if(lv_menu_back_btn_is_root(menu, obj)) {
lv_obj_t * mbox1 = lv_msgbox_create(NULL, "Hello", "Root back btn click.",␣
,→NULL, true);
lv_obj_center(mbox1);
}
}
void lv_example_menu_2(void)
{
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_menu_set_mode_root_back_btn(menu, LV_MENU_ROOT_BACK_BTN_ENABLED);
lv_obj_add_event_cb(menu, back_event_handler, LV_EVENT_CLICKED, menu);
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * label;
/*Create a sub page*/
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
/*Create a main page*/
lv_obj_t * main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1");
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 2");
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 3 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_menu_set_page(menu, main_page);
}
#endif
6.3. Extrawidgets 724


--- Page 729 ---


LVGLDocumentation8.3
def back_event_handler(e):
obj = e.get_target()
if menu.back_btn_is_root(obj):
mbox1 = lv.msgbox(lv.scr_act(), "Hello", "Root back btn click.", None, True)
mbox1.center()
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_mode_root_back_btn(lv.menu.ROOT_BACK_BTN.ENABLED)
menu.add_event_cb(back_event_handler, lv.EVENT.CLICKED, None)
menu.set_size(320, 240)
menu.center()
# Create a sub page
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 2")
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 3 (Click me!)")
menu.set_load_page_event(cont, sub_page)
menu.set_page(main_page)
SimpleMenuwithcustomheader
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_USE_USER_DATA && LV_BUILD_EXAMPLES
void lv_example_menu_3(void)
{
/*Create a menu object*/
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
/*Modify the header*/
lv_obj_t * back_btn = lv_menu_get_main_header_back_btn(menu);
lv_obj_t * back_btn_label = lv_label_create(back_btn);
lv_label_set_text(back_btn_label, "Back");
lv_obj_t * cont;
(continuesonnextpage)
6.3. Extrawidgets 725


--- Page 730 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * label;
/*Create sub pages*/
lv_obj_t * sub_1_page = lv_menu_page_create(menu, "Page 1");
cont = lv_menu_cont_create(sub_1_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
lv_obj_t * sub_2_page = lv_menu_page_create(menu, "Page 2");
cont = lv_menu_cont_create(sub_2_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
lv_obj_t * sub_3_page = lv_menu_page_create(menu, "Page 3");
cont = lv_menu_cont_create(sub_3_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding here");
/*Create a main page*/
lv_obj_t * main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_1_page);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 2 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_2_page);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 3 (Click me!)");
lv_menu_set_load_page_event(menu, cont, sub_3_page);
lv_menu_set_page(menu, main_page);
}
#endif
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_size(320, 240)
menu.center()
# Create sub pages
sub_page_1 = lv.menu_page(menu, "Page 1")
cont = lv.menu_cont(sub_page_1)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
(continuesonnextpage)
6.3. Extrawidgets 726


--- Page 731 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
sub_page_2 = lv.menu_page(menu, "Page 2")
cont = lv.menu_cont(sub_page_2)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
sub_page_3 = lv.menu_page(menu, "Page 3")
cont = lv.menu_cont(sub_page_3)
label = lv.label(cont)
label.set_text("Hello, I am hiding here")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1 (Click me!)")
menu.set_load_page_event(cont, sub_page_1)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 2 (Click me!)")
menu.set_load_page_event(cont, sub_page_2)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 3 (Click me!)")
menu.set_load_page_event(cont, sub_page_3)
menu.set_page(main_page)
SimpleMenuwithfloatingbtntoaddnewmenupage
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_BUILD_EXAMPLES
static uint32_t btn_cnt = 1;
static lv_obj_t * main_page;
static lv_obj_t * menu;
static void float_btn_event_cb(lv_event_t * e)
{
LV_UNUSED(e);
btn_cnt++;
lv_obj_t * cont;
lv_obj_t * label;
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
label = lv_label_create(cont);
(continuesonnextpage)
6.3. Extrawidgets 727


--- Page 732 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_label_set_text_fmt(label, "Hello, I am hiding inside %"LV_PRIu32, btn_cnt);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text_fmt(label, "Item %"LV_PRIu32, btn_cnt);
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_obj_scroll_to_view_recursive(cont, LV_ANIM_ON);
}
void lv_example_menu_4(void)
{
/*Create a menu object*/
menu = lv_menu_create(lv_scr_act());
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * label;
/*Create a sub page*/
lv_obj_t * sub_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(sub_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Hello, I am hiding inside the first item");
/*Create a main page*/
main_page = lv_menu_page_create(menu, NULL);
cont = lv_menu_cont_create(main_page);
label = lv_label_create(cont);
lv_label_set_text(label, "Item 1");
lv_menu_set_load_page_event(menu, cont, sub_page);
lv_menu_set_page(menu, main_page);
/*Create floating btn*/
lv_obj_t * float_btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(float_btn, 50, 50);
lv_obj_add_flag(float_btn, LV_OBJ_FLAG_FLOATING);
lv_obj_align(float_btn, LV_ALIGN_BOTTOM_RIGHT, -10, -10);
lv_obj_add_event_cb(float_btn, float_btn_event_cb, LV_EVENT_CLICKED, menu);
lv_obj_set_style_radius(float_btn, LV_RADIUS_CIRCLE, 0);
lv_obj_set_style_bg_img_src(float_btn, LV_SYMBOL_PLUS, 0);
lv_obj_set_style_text_font(float_btn, lv_theme_get_font_large(float_btn), 0);
}
#endif
btn_cnt = 1
def float_btn_event_cb(e):
global btn_cnt
btn_cnt += 1
(continuesonnextpage)
6.3. Extrawidgets 728


--- Page 733 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding inside {:d}".format(btn_cnt))
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item {:d}".format(btn_cnt))
menu.set_load_page_event(cont, sub_page)
# Create a menu object
menu = lv.menu(lv.scr_act())
menu.set_size(320, 240)
menu.center()
# Create a sub page
sub_page = lv.menu_page(menu, None)
cont = lv.menu_cont(sub_page)
label = lv.label(cont)
label.set_text("Hello, I am hiding inside the first item")
# Create a main page
main_page = lv.menu_page(menu, None)
cont = lv.menu_cont(main_page)
label = lv.label(cont)
label.set_text("Item 1")
menu.set_load_page_event(cont, sub_page)
menu.set_page(main_page)
float_btn = lv.btn(lv.scr_act())
float_btn.set_size(50, 50)
float_btn.add_flag(lv.obj.FLAG.FLOATING)
float_btn.align(lv.ALIGN.BOTTOM_RIGHT, -10, -10)
float_btn.add_event_cb(float_btn_event_cb, lv.EVENT.CLICKED, None)
float_btn.set_style_radius(lv.RADIUS.CIRCLE, 0)
float_btn.set_style_bg_img_src(lv.SYMBOL.PLUS, 0)
float_btn.set_style_text_font(lv.theme_get_font_large(float_btn), 0)
ComplexMenu
#include "../../lv_examples.h"
#if LV_USE_MENU && LV_USE_MSGBOX && LV_BUILD_EXAMPLES
enum {
LV_MENU_ITEM_BUILDER_VARIANT_1,
LV_MENU_ITEM_BUILDER_VARIANT_2
};
typedef uint8_t lv_menu_builder_variant_t;
(continuesonnextpage)
6.3. Extrawidgets 729


--- Page 734 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static void back_event_handler(lv_event_t * e);
static void switch_handler(lv_event_t * e);
lv_obj_t * root_page;
static lv_obj_t * create_text(lv_obj_t * parent, const char * icon, const char * txt,
lv_menu_builder_variant_t builder_variant);
static lv_obj_t * create_slider(lv_obj_t * parent,
const char * icon, const char * txt, int32_t min,␣
,→int32_t max, int32_t val);
static lv_obj_t * create_switch(lv_obj_t * parent,
const char * icon, const char * txt, bool chk);
void lv_example_menu_5(void)
{
lv_obj_t * menu = lv_menu_create(lv_scr_act());
lv_color_t bg_color = lv_obj_get_style_bg_color(menu, 0);
if(lv_color_brightness(bg_color) > 127) {
lv_obj_set_style_bg_color(menu, lv_color_darken(lv_obj_get_style_bg_
,→color(menu, 0), 10), 0);
}
else {
lv_obj_set_style_bg_color(menu, lv_color_darken(lv_obj_get_style_bg_
,→color(menu, 0), 50), 0);
}
lv_menu_set_mode_root_back_btn(menu, LV_MENU_ROOT_BACK_BTN_ENABLED);
lv_obj_add_event_cb(menu, back_event_handler, LV_EVENT_CLICKED, menu);
lv_obj_set_size(menu, lv_disp_get_hor_res(NULL), lv_disp_get_ver_res(NULL));
lv_obj_center(menu);
lv_obj_t * cont;
lv_obj_t * section;
/*Create sub pages*/
lv_obj_t * sub_mechanics_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_mechanics_page, lv_obj_get_style_pad_left(lv_menu_
,→get_main_header(menu), 0), 0);
lv_menu_separator_create(sub_mechanics_page);
section = lv_menu_section_create(sub_mechanics_page);
create_slider(section, LV_SYMBOL_SETTINGS, "Velocity", 0, 150, 120);
create_slider(section, LV_SYMBOL_SETTINGS, "Acceleration", 0, 150, 50);
create_slider(section, LV_SYMBOL_SETTINGS, "Weight limit", 0, 150, 80);
lv_obj_t * sub_sound_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_sound_page, lv_obj_get_style_pad_left(lv_menu_get_
,→main_header(menu), 0), 0);
lv_menu_separator_create(sub_sound_page);
section = lv_menu_section_create(sub_sound_page);
create_switch(section, LV_SYMBOL_AUDIO, "Sound", false);
lv_obj_t * sub_display_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_display_page, lv_obj_get_style_pad_left(lv_menu_get_
,→main_header(menu), 0), 0);
lv_menu_separator_create(sub_display_page);
section = lv_menu_section_create(sub_display_page);
create_slider(section, LV_SYMBOL_SETTINGS, "Brightness", 0, 150, 100);
lv_obj_t * sub_software_info_page = lv_menu_page_create(menu, NULL);
(continuesonnextpage)
6.3. Extrawidgets 730


--- Page 735 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_pad_hor(sub_software_info_page, lv_obj_get_style_pad_left(lv_
,→menu_get_main_header(menu), 0), 0);
section = lv_menu_section_create(sub_software_info_page);
create_text(section, NULL, "Version 1.0", LV_MENU_ITEM_BUILDER_VARIANT_1);
lv_obj_t * sub_legal_info_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_legal_info_page, lv_obj_get_style_pad_left(lv_menu_
,→get_main_header(menu), 0), 0);
section = lv_menu_section_create(sub_legal_info_page);
for(uint32_t i = 0; i < 15; i++) {
create_text(section, NULL,
"This is a long long long long long long long long long text, if␣
,→it is long enough it may scroll.",
LV_MENU_ITEM_BUILDER_VARIANT_1);
}
lv_obj_t * sub_about_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_about_page, lv_obj_get_style_pad_left(lv_menu_get_
,→main_header(menu), 0), 0);
lv_menu_separator_create(sub_about_page);
section = lv_menu_section_create(sub_about_page);
cont = create_text(section, NULL, "Software information", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_software_info_page);
cont = create_text(section, NULL, "Legal information", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_legal_info_page);
lv_obj_t * sub_menu_mode_page = lv_menu_page_create(menu, NULL);
lv_obj_set_style_pad_hor(sub_menu_mode_page, lv_obj_get_style_pad_left(lv_menu_
,→get_main_header(menu), 0), 0);
lv_menu_separator_create(sub_menu_mode_page);
section = lv_menu_section_create(sub_menu_mode_page);
cont = create_switch(section, LV_SYMBOL_AUDIO, "Sidebar enable", true);
lv_obj_add_event_cb(lv_obj_get_child(cont, 2), switch_handler, LV_EVENT_VALUE_
,→CHANGED, menu);
/*Create a root page*/
root_page = lv_menu_page_create(menu, "Settings");
lv_obj_set_style_pad_hor(root_page, lv_obj_get_style_pad_left(lv_menu_get_main_
,→header(menu), 0), 0);
section = lv_menu_section_create(root_page);
cont = create_text(section, LV_SYMBOL_SETTINGS, "Mechanics", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_mechanics_page);
cont = create_text(section, LV_SYMBOL_AUDIO, "Sound", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_sound_page);
cont = create_text(section, LV_SYMBOL_SETTINGS, "Display", LV_MENU_ITEM_BUILDER_
,→VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_display_page);
create_text(root_page, NULL, "Others", LV_MENU_ITEM_BUILDER_VARIANT_1);
section = lv_menu_section_create(root_page);
cont = create_text(section, NULL, "About", LV_MENU_ITEM_BUILDER_VARIANT_1);
lv_menu_set_load_page_event(menu, cont, sub_about_page);
cont = create_text(section, LV_SYMBOL_SETTINGS, "Menu mode", LV_MENU_ITEM_BUILDER_
,→VARIANT_1); (continuesonnextpage)
6.3. Extrawidgets 731


--- Page 736 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_menu_set_load_page_event(menu, cont, sub_menu_mode_page);
lv_menu_set_sidebar_page(menu, root_page);
lv_event_send(lv_obj_get_child(lv_obj_get_child(lv_menu_get_cur_sidebar_
,→page(menu), 0), 0), LV_EVENT_CLICKED, NULL);
}
static void back_event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_t * menu = lv_event_get_user_data(e);
if(lv_menu_back_btn_is_root(menu, obj)) {
lv_obj_t * mbox1 = lv_msgbox_create(NULL, "Hello", "Root back btn click.",␣
,→NULL, true);
lv_obj_center(mbox1);
}
}
static void switch_handler(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * menu = lv_event_get_user_data(e);
lv_obj_t * obj = lv_event_get_target(e);
if(code == LV_EVENT_VALUE_CHANGED) {
if(lv_obj_has_state(obj, LV_STATE_CHECKED)) {
lv_menu_set_page(menu, NULL);
lv_menu_set_sidebar_page(menu, root_page);
lv_event_send(lv_obj_get_child(lv_obj_get_child(lv_menu_get_cur_sidebar_
,→page(menu), 0), 0), LV_EVENT_CLICKED, NULL);
}
else {
lv_menu_set_sidebar_page(menu, NULL);
lv_menu_clear_history(menu); /* Clear history because we will be showing␣
,→the root page later */
lv_menu_set_page(menu, root_page);
}
}
}
static lv_obj_t * create_text(lv_obj_t * parent, const char * icon, const char * txt,
lv_menu_builder_variant_t builder_variant)
{
lv_obj_t * obj = lv_menu_cont_create(parent);
lv_obj_t * img = NULL;
lv_obj_t * label = NULL;
if(icon) {
img = lv_img_create(obj);
lv_img_set_src(img, icon);
}
if(txt) {
label = lv_label_create(obj);
lv_label_set_text(label, txt);
(continuesonnextpage)
6.3. Extrawidgets 732


--- Page 737 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_label_set_long_mode(label, LV_LABEL_LONG_SCROLL_CIRCULAR);
lv_obj_set_flex_grow(label, 1);
}
if(builder_variant == LV_MENU_ITEM_BUILDER_VARIANT_2 && icon && txt) {
lv_obj_add_flag(img, LV_OBJ_FLAG_FLEX_IN_NEW_TRACK);
lv_obj_swap(img, label);
}
return obj;
}
static lv_obj_t * create_slider(lv_obj_t * parent, const char * icon, const char *␣
,→txt, int32_t min, int32_t max,
int32_t val)
{
lv_obj_t * obj = create_text(parent, icon, txt, LV_MENU_ITEM_BUILDER_VARIANT_2);
lv_obj_t * slider = lv_slider_create(obj);
lv_obj_set_flex_grow(slider, 1);
lv_slider_set_range(slider, min, max);
lv_slider_set_value(slider, val, LV_ANIM_OFF);
if(icon == NULL) {
lv_obj_add_flag(slider, LV_OBJ_FLAG_FLEX_IN_NEW_TRACK);
}
return obj;
}
static lv_obj_t * create_switch(lv_obj_t * parent, const char * icon, const char *␣
,→txt, bool chk)
{
lv_obj_t * obj = create_text(parent, icon, txt, LV_MENU_ITEM_BUILDER_VARIANT_1);
lv_obj_t * sw = lv_switch_create(obj);
lv_obj_add_state(sw, chk ? LV_STATE_CHECKED : 0);
return obj;
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/widgets/menu/lv_example_menu_5.py
6.3. Extrawidgets 733


--- Page 738 ---


LVGLDocumentation8.3
API
Typedefs
typedefuint8_tlv_menu_mode_header_t
typedefuint8_tlv_menu_mode_root_back_btn_t
typedefstructlv_menu_load_page_event_data_tlv_menu_load_page_event_data_t
Enums
enum[anonymous]
Values:
enumeratorLV_MENU_HEADER_TOP_FIXED
enumeratorLV_MENU_HEADER_TOP_UNFIXED
enumeratorLV_MENU_HEADER_BOTTOM_FIXED
enum[anonymous]
Values:
enumeratorLV_MENU_ROOT_BACK_BTN_DISABLED
enumeratorLV_MENU_ROOT_BACK_BTN_ENABLED
Functions
lv_obj_t*lv_menu_create(lv_obj_t*parent)
Createamenuobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewmenu
Returns pointertothecreatedmenu
lv_obj_t*lv_menu_page_create(lv_obj_t*parent,char*title)
Createamenupageobject
Parameters
• parent--pointertomenuobject
• title--pointertotextfortitleinheader(NULLtonotdisplaytitle)
Returns pointertothecreatedmenupage
6.3. Extrawidgets 734


--- Page 739 ---


LVGLDocumentation8.3
lv_obj_t*lv_menu_cont_create(lv_obj_t*parent)
Createamenucontobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewmenucontobject
Returns pointertothecreatedmenucont
lv_obj_t*lv_menu_section_create(lv_obj_t*parent)
Createamenusectionobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewmenusectionobject
Returns pointertothecreatedmenusection
lv_obj_t*lv_menu_separator_create(lv_obj_t*parent)
Createamenuseparatorobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewmenuseparatorobject
Returns pointertothecreatedmenuseparator
voidlv_menu_set_page(lv_obj_t*obj,lv_obj_t*page)
Setmenupagetodisplayinmain
Parameters
• obj--pointertothemenu
• page--pointertothemenupagetoset(NULLtoclearmainandclearmenuhistory)
voidlv_menu_set_sidebar_page(lv_obj_t*obj,lv_obj_t*page)
Setmenupagetodisplayinsidebar
Parameters
• obj--pointertothemenu
• page--pointertothemenupagetoset(NULLtoclearsidebar)
voidlv_menu_set_mode_header(lv_obj_t*obj,lv_menu_mode_header_tmode_header)
Setthehowtheheadershouldbehaveanditsposition
Parameters
• obj--pointertoamenu
• mode_header--
voidlv_menu_set_mode_root_back_btn(lv_obj_t*obj,lv_menu_mode_root_back_btn_t
mode_root_back_btn)
Setwhetherbackbuttonshouldappearatroot
Parameters
• obj--pointertoamenu
• mode_root_back_btn--
voidlv_menu_set_load_page_event(lv_obj_t*menu,lv_obj_t*obj,lv_obj_t*page)
Addmenutothemenuitem
Parameters
• menu--pointertothemenu
• obj--pointertotheobj
6.3. Extrawidgets 735


--- Page 740 ---


LVGLDocumentation8.3
• page--pointertothepagetoloadwhenobjisclicked
lv_obj_t*lv_menu_get_cur_main_page(lv_obj_t*obj)
Getapointertomenupagethatiscurrentlydisplayedinmain
Parameters obj--pointertothemenu
Returns pointertocurrentpage
lv_obj_t*lv_menu_get_cur_sidebar_page(lv_obj_t*obj)
Getapointertomenupagethatiscurrentlydisplayedinsidebar
Parameters obj--pointertothemenu
Returns pointertocurrentpage
lv_obj_t*lv_menu_get_main_header(lv_obj_t*obj)
Getapointertomainheaderobj
Parameters obj--pointertothemenu
Returns pointertomainheaderobj
lv_obj_t*lv_menu_get_main_header_back_btn(lv_obj_t*obj)
Getapointertomainheaderbackbtnobj
Parameters obj--pointertothemenu
Returns pointertomainheaderbackbtnobj
lv_obj_t*lv_menu_get_sidebar_header(lv_obj_t*obj)
Getapointertosidebarheaderobj
Parameters obj--pointertothemenu
Returns pointertosidebarheaderobj
lv_obj_t*lv_menu_get_sidebar_header_back_btn(lv_obj_t*obj)
Getapointertosidebarheaderobj
Parameters obj--pointertothemenu
Returns pointertosidebarheaderbackbtnobj
boollv_menu_back_btn_is_root(lv_obj_t*menu,lv_obj_t*obj)
Checkifanobjisarootbackbtn
Parameters menu--pointertothemenu
Returns trueifitisarootbackbtn
voidlv_menu_clear_history(lv_obj_t*obj)
Clearmenuhistory
Parameters obj--pointertothemenu
6.3. Extrawidgets 736


--- Page 741 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_menu_class
constlv_obj_class_tlv_menu_page_class
constlv_obj_class_tlv_menu_cont_class
constlv_obj_class_tlv_menu_section_class
constlv_obj_class_tlv_menu_separator_class
constlv_obj_class_tlv_menu_sidebar_cont_class
constlv_obj_class_tlv_menu_main_cont_class
constlv_obj_class_tlv_menu_sidebar_header_cont_class
constlv_obj_class_tlv_menu_main_header_cont_class
structlv_menu_load_page_event_data_t
PublicMembers
lv_obj_t*menu
lv_obj_t*page
structlv_menu_history_t
PublicMembers
lv_obj_t*page
structlv_menu_t
6.3. Extrawidgets 737


--- Page 742 ---


LVGLDocumentation8.3
PublicMembers
lv_obj_tobj
lv_obj_t*storage
lv_obj_t*main
lv_obj_t*main_page
lv_obj_t*main_header
lv_obj_t*main_header_back_btn
lv_obj_t*main_header_title
lv_obj_t*sidebar
lv_obj_t*sidebar_page
lv_obj_t*sidebar_header
lv_obj_t*sidebar_header_back_btn
lv_obj_t*sidebar_header_title
lv_obj_t*selected_tab
lv_ll_thistory_ll
uint8_tcur_depth
uint8_tprev_depth
uint8_tsidebar_generated
lv_menu_mode_header_tmode_header
lv_menu_mode_root_back_btn_tmode_root_back_btn
structlv_menu_page_t
6.3. Extrawidgets 738


--- Page 743 ---


LVGLDocumentation8.3
PublicMembers
lv_obj_tobj
char*title
6.3.10 Meter (lv_meter)
Overview
TheMeterwidgetcanvisualizedatainveryflexibleways. Itcanshowarcs,needles,tickslinesandlabels.
PartsandStyles
• LV_PART_MAINThebackgroundoftheMeter. Usesthetypicalbackgroundproperties.
• LV_PART_TICKSTheticklinesalabelsusingthelineandtextstyleproperties.
• LV_PART_INDICATORTheneedlelineorimageusingthelineandimgstyleproperties,aswellasthebackground
propertiestodrawasquare(orcircle)onthepivotoftheneedles. Paddingmakesthesquarelarger.
• LV_PART_ITEMSThearcsusingthearcproperties.
Usage
Addascale
First a Scale needs to be added to the Meter with lv_meter_scale_t * scale =
lv_meter_add_scale(meter). The Scale has minor and major ticks and labels on the major ticks. Later
indicators(needles,arcs,tickmodifiers)canbeaddedtothemeter
AnynumberofscalescanbeaddedtoMeter.
Theminorticklinescanbeconfiguredwith:lv_meter_set_scale_ticks(meter, scale, tick_count,
line_width, tick_length, tick_color).
To add major tick lines use lv_meter_set_scale_major_ticks(meter, scale, nth_major,
tick_width, tick_length, tick_color, label_gap). nth_major to specify how many minor
tickstoskiptodrawamajortick.
Labelsareaddedautomaticallyonmajortickswithlabel_gapdistancefromthetickswithtextproportionallytothe
valuesofthetickline.
lv_meter_set_scale_range(meter, scale, min, max, angle_range, rotation) sets the
valueandanglerangeofthescale.
6.3. Extrawidgets 739


--- Page 744 ---


LVGLDocumentation8.3
Addindicators
IndicatorsneedtobeaddedtoaScaleandtheirvalueisinterpretedintherangeoftheScale.
Alltheindicatoraddfunctionsreturnlv_meter_indicator_t *.
Needleline
indic = lv_meter_add_needle_line(meter, scale, line_width, line_color, r_mod)
addsaneedlelinetoaScale. Bydefault,thelengthofthelineisthesameasthescale'sradiusbutr_modchangesthe
length.
lv_meter_set_indicator_value(meter, indic, value)setsthevalueoftheindicator.
Needleimage
indic = lv_meter_add_needle_img(meter, scale, img_src, pivot_x, pivot_y)setsan
imagethatwillbeusedasaneedle. img_srcshouldbeaneedlepointingtotherightlikethis-O--->. pivot_x
andpivot_ysetsthepivotpointoftherotationrelativetothetopleftcorneroftheimage.
lv_meter_set_indicator_value(meter, inidicator, value)setsthevalueoftheindicator.
Arc
indic = lv_meter_add_arc(meter, scale, arc_width, arc_color, r_mod) adds an arc
indicator. Bydefault,theradiusofthearcisthesameasthescale'sradiusbutr_modchangestheradius.
lv_meter_set_indicator_start_value(meter, indic, value) and
lv_meter_set_indicator_end_value(meter, inidicator, value) sets the value of the in-
dicator.
Scalelines(ticks)
indic = lv_meter_add_scale_lines(meter, scale, color_start, color_end, local,
width_mod) adds an indicator that modifies the ticks lines. If local is true the ticks' color will be faded from
color_starttocolor_endintheindicator'sstartandendvaluerange. Iflocalisfalsecolor_startand
color_endwillbemappedtothestartandendvalueofthescaleandonlya"slice"ofthatcolorgradientwillbevisible
intheindicator'sstartandendvaluerange. width_modmodifiesthewidthoftheticklines.
lv_meter_set_indicator_start_value(meter, inidicator, value) and
lv_meter_set_indicator_end_value(meter, inidicator, value) sets the value of the in-
dicator.
6.3. Extrawidgets 740


--- Page 745 ---


LVGLDocumentation8.3
Events
• LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_ENDissentforthefollowingtypes:
– LV_METER_DRAW_PART_ARCThearcindicator
∗ part: LV_PART_ITEMS
∗ sub_part_ptr: pointertotheindicator
∗ arc_dsc
∗ radius: radiusofthearc
∗ p1centerofthearc
– LV_METER_DRAW_PART_NEEDLE_LINETheneedlelines
∗ part: LV_PART_ITEMS
∗ p1,p2pointsoftheline
∗ line_dsc
∗ sub_part_ptr: pointertotheindicator
– LV_METER_DRAW_PART_NEEDLE_IMGTheneedleimages
∗ part: LV_PART_ITEMS
∗ p1,p2pointsoftheline
∗ img_dsc
∗ sub_part_ptr: pointertotheindicator
– LV_METER_DRAW_PART_TICKTheticklinesandlabels
∗ part: LV_PART_TICKS
∗ value: thevalueoftheline
∗ text: valueconvertedtodecimalorNULLonminorlines
∗ label_dsc: labeldrawdescriptororNULLonminorlines
∗ line_dsc:
∗ id: theindexoftheline
SeetheeventsoftheBaseobjecttoo.
LearnmoreaboutEvents.
Keys
NokeysarehandledbytheMeterwidget.
LearnmoreaboutKeys.
6.3. Extrawidgets 741


--- Page 746 ---


LVGLDocumentation8.3
Example
Simplemeter
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
static lv_obj_t * meter;
static void set_value(void * indic, int32_t v)
{
lv_meter_set_indicator_value(meter, indic, v);
}
/**
* A simple meter
*/
void lv_example_meter_1(void)
{
meter = lv_meter_create(lv_scr_act());
lv_obj_center(meter);
lv_obj_set_size(meter, 200, 200);
/*Add a scale first*/
lv_meter_scale_t * scale = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale, 41, 2, 10, lv_palette_main(LV_PALETTE_
,→GREY));
lv_meter_set_scale_major_ticks(meter, scale, 8, 4, 15, lv_color_black(), 10);
lv_meter_indicator_t * indic;
/*Add a blue arc to the start*/
indic = lv_meter_add_arc(meter, scale, 3, lv_palette_main(LV_PALETTE_BLUE), 0);
lv_meter_set_indicator_start_value(meter, indic, 0);
lv_meter_set_indicator_end_value(meter, indic, 20);
/*Make the tick lines blue at the start of the scale*/
indic = lv_meter_add_scale_lines(meter, scale, lv_palette_main(LV_PALETTE_BLUE),␣
,→lv_palette_main(LV_PALETTE_BLUE),
false, 0);
lv_meter_set_indicator_start_value(meter, indic, 0);
lv_meter_set_indicator_end_value(meter, indic, 20);
/*Add a red arc to the end*/
indic = lv_meter_add_arc(meter, scale, 3, lv_palette_main(LV_PALETTE_RED), 0);
lv_meter_set_indicator_start_value(meter, indic, 80);
lv_meter_set_indicator_end_value(meter, indic, 100);
/*Make the tick lines red at the end of the scale*/
indic = lv_meter_add_scale_lines(meter, scale, lv_palette_main(LV_PALETTE_RED),␣
,→lv_palette_main(LV_PALETTE_RED), false,
0);
lv_meter_set_indicator_start_value(meter, indic, 80);
lv_meter_set_indicator_end_value(meter, indic, 100);
/*Add a needle line indicator*/
indic = lv_meter_add_needle_line(meter, scale, 4, lv_palette_main(LV_PALETTE_
,→GREY), -10); (continuesonnextpage)
6.3. Extrawidgets 742


--- Page 747 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create an animation to set the value*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_var(&a, indic);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_time(&a, 2000);
lv_anim_set_repeat_delay(&a, 100);
lv_anim_set_playback_time(&a, 500);
lv_anim_set_playback_delay(&a, 100);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_start(&a);
}
#endif
#!//opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
import display_driver
def set_value(indic, v):
meter.set_indicator_value(indic, v)
#
# A simple meter
#
meter = lv.meter(lv.scr_act())
meter.center()
meter.set_size(200, 200)
# Add a scale first
scale = meter.add_scale()
meter.set_scale_ticks(scale, 51, 2, 10, lv.palette_main(lv.PALETTE.GREY))
meter.set_scale_major_ticks(scale, 10, 4, 15, lv.color_black(), 10)
indic = lv.meter_indicator_t()
# Add a blue arc to the start
indic = meter.add_arc(scale, 3, lv.palette_main(lv.PALETTE.BLUE), 0)
meter.set_indicator_start_value(indic, 0)
meter.set_indicator_end_value(indic, 20)
# Make the tick lines blue at the start of the scale
indic = meter.add_scale_lines(scale, lv.palette_main(lv.PALETTE.BLUE), lv.palette_
,→main(lv.PALETTE.BLUE), False, 0)
meter.set_indicator_start_value(indic, 0)
meter.set_indicator_end_value(indic, 20)
# Add a red arc to the end
indic = meter.add_arc(scale, 3, lv.palette_main(lv.PALETTE.RED), 0)
meter.set_indicator_start_value(indic, 80)
meter.set_indicator_end_value(indic, 100)
# Make the tick lines red at the end of the scale
(continuesonnextpage)
6.3. Extrawidgets 743


--- Page 748 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
indic = meter.add_scale_lines(scale, lv.palette_main(lv.PALETTE.RED), lv.palette_
,→main(lv.PALETTE.RED), False, 0)
meter.set_indicator_start_value(indic, 80)
meter.set_indicator_end_value(indic, 100)
# Add a needle line indicator
indic = meter.add_needle_line(scale, 4, lv.palette_main(lv.PALETTE.GREY), -10)
# Create an animation to set the value
a = lv.anim_t()
a.init()
a.set_var(indic)
a.set_values(0, 100)
a.set_time(2000)
a.set_repeat_delay(100)
a.set_playback_time(500)
a.set_playback_delay(100)
a.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a.set_custom_exec_cb(lambda a,val: set_value(indic,val))
lv.anim_t.start(a)
Ameterwithmultiplearcs
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
static lv_obj_t * meter;
static void set_value(void * indic, int32_t v)
{
lv_meter_set_indicator_end_value(meter, indic, v);
}
/**
* A meter with multiple arcs
*/
void lv_example_meter_2(void)
{
meter = lv_meter_create(lv_scr_act());
lv_obj_center(meter);
lv_obj_set_size(meter, 200, 200);
/*Remove the circle from the middle*/
lv_obj_remove_style(meter, NULL, LV_PART_INDICATOR);
/*Add a scale first*/
lv_meter_scale_t * scale = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale, 11, 2, 10, lv_palette_main(LV_PALETTE_
,→GREY));
lv_meter_set_scale_major_ticks(meter, scale, 1, 2, 30, lv_color_hex3(0xeee), 15);
lv_meter_set_scale_range(meter, scale, 0, 100, 270, 90);
/*Add a three arc indicator*/
(continuesonnextpage)
6.3. Extrawidgets 744


--- Page 749 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_meter_indicator_t * indic1 = lv_meter_add_arc(meter, scale, 10, lv_palette_
,→main(LV_PALETTE_RED), 0);
lv_meter_indicator_t * indic2 = lv_meter_add_arc(meter, scale, 10, lv_palette_
,→main(LV_PALETTE_GREEN), -10);
lv_meter_indicator_t * indic3 = lv_meter_add_arc(meter, scale, 10, lv_palette_
,→main(LV_PALETTE_BLUE), -20);
/*Create an animation to set the value*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_repeat_delay(&a, 100);
lv_anim_set_playback_delay(&a, 100);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_time(&a, 2000);
lv_anim_set_playback_time(&a, 500);
lv_anim_set_var(&a, indic1);
lv_anim_start(&a);
lv_anim_set_time(&a, 1000);
lv_anim_set_playback_time(&a, 1000);
lv_anim_set_var(&a, indic2);
lv_anim_start(&a);
lv_anim_set_time(&a, 1000);
lv_anim_set_playback_time(&a, 2000);
lv_anim_set_var(&a, indic3);
lv_anim_start(&a);
}
#endif
#!//opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
import display_driver
def set_value(indic,v):
meter.set_indicator_end_value(indic, v)
#
# A meter with multiple arcs
#
meter = lv.meter(lv.scr_act())
meter.center()
meter.set_size(200, 200)
# Remove the circle from the middle
meter.remove_style(None, lv.PART.INDICATOR)
# Add a scale first
scale = meter.add_scale()
meter.set_scale_ticks(scale, 11, 2, 10, lv.palette_main(lv.PALETTE.GREY))
(continuesonnextpage)
6.3. Extrawidgets 745


--- Page 750 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
meter.set_scale_major_ticks(scale, 1, 2, 30, lv.color_hex3(0xeee), 10)
meter.set_scale_range(scale, 0, 100, 270, 90)
# Add a three arc indicator
indic1 = meter.add_arc(scale, 10, lv.palette_main(lv.PALETTE.RED), 0)
indic2 = meter.add_arc(scale, 10, lv.palette_main(lv.PALETTE.GREEN), -10)
indic3 = meter.add_arc(scale, 10, lv.palette_main(lv.PALETTE.BLUE), -20)
# Create an animation to set the value
a1 = lv.anim_t()
a1.init()
a1.set_values(0, 100)
a1.set_time(2000)
a1.set_repeat_delay(100)
a1.set_playback_delay(100)
a1.set_playback_time(500)
a1.set_var(indic1)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a1.set_custom_exec_cb(lambda a,val: set_value(indic1,val))
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_values(0, 100)
a2.set_time(1000)
a2.set_repeat_delay(100)
a2.set_playback_delay(100)
a2.set_playback_time(1000)
a2.set_var(indic2)
a2.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a2.set_custom_exec_cb(lambda a,val: set_value(indic2,val))
lv.anim_t.start(a2)
a3 = lv.anim_t()
a3.init()
a3.set_values(0, 100)
a3.set_time(1000)
a3.set_repeat_delay(100)
a3.set_playback_delay(100)
a3.set_playback_time(2000)
a3.set_var(indic3)
a3.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a3.set_custom_exec_cb(lambda a,val: set_value(indic3,val))
lv.anim_t.start(a3)
6.3. Extrawidgets 746


--- Page 751 ---


LVGLDocumentation8.3
Aclockfromameter
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
static lv_obj_t * meter;
static void set_value(void * indic, int32_t v)
{
lv_meter_set_indicator_end_value(meter, indic, v);
}
/**
* A clock from a meter
*/
void lv_example_meter_3(void)
{
meter = lv_meter_create(lv_scr_act());
lv_obj_set_size(meter, 220, 220);
lv_obj_center(meter);
/*Create a scale for the minutes*/
/*61 ticks in a 360 degrees range (the last and the first line overlaps)*/
lv_meter_scale_t * scale_min = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale_min, 61, 1, 10, lv_palette_main(LV_PALETTE_
,→GREY));
lv_meter_set_scale_range(meter, scale_min, 0, 60, 360, 270);
/*Create another scale for the hours. It's only visual and contains only major␣
,→ticks*/
lv_meter_scale_t * scale_hour = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale_hour, 12, 0, 0, lv_palette_main(LV_PALETTE_
,→GREY)); /*12 ticks*/
lv_meter_set_scale_major_ticks(meter, scale_hour, 1, 2, 20, lv_color_black(), 10);
,→ /*Every tick is major*/
lv_meter_set_scale_range(meter, scale_hour, 1, 12, 330, 300); /*[1..12]␣
,→values in an almost full circle*/
LV_IMG_DECLARE(img_hand)
/*Add a the hands from images*/
lv_meter_indicator_t * indic_min = lv_meter_add_needle_img(meter, scale_min, &img_
,→hand, 5, 5);
lv_meter_indicator_t * indic_hour = lv_meter_add_needle_img(meter, scale_min, &
,→img_hand, 5, 5);
/*Create an animation to set the value*/
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_exec_cb(&a, set_value);
lv_anim_set_values(&a, 0, 60);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_time(&a, 2000); /*2 sec for 1 turn of the minute hand (1 hour)*/
lv_anim_set_var(&a, indic_min);
lv_anim_start(&a);
lv_anim_set_var(&a, indic_hour);
(continuesonnextpage)
6.3. Extrawidgets 747


--- Page 752 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_set_time(&a, 24000); /*24 sec for 1 turn of the hour hand*/
lv_anim_set_values(&a, 0, 60);
lv_anim_start(&a);
}
#endif
#!//opt/bin/lv_micropython -i
import utime as time
import lvgl as lv
import display_driver
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Create an image from the png file
try:
with open('../../assets/img_hand_min.png','rb') as f:
img_hand_min_data = f.read()
except:
print("Could not find img_hand_min.png")
sys.exit()
img_hand_min_dsc = lv.img_dsc_t({
'data_size': len(img_hand_min_data),
'data': img_hand_min_data
})
# Create an image from the png file
try:
with open('../../assets/img_hand_hour.png','rb') as f:
img_hand_hour_data = f.read()
except:
print("Could not find img_hand_hour.png")
sys.exit()
img_hand_hour_dsc = lv.img_dsc_t({
'data_size': len(img_hand_hour_data),
'data': img_hand_hour_data
})
def set_value(indic, v):
meter.set_indicator_value(indic, v)
#
# A clock from a meter
#
meter = lv.meter(lv.scr_act())
meter.set_size(220, 220)
meter.center()
# Create a scale for the minutes
# 61 ticks in a 360 degrees range (the last and the first line overlaps)
(continuesonnextpage)
6.3. Extrawidgets 748


--- Page 753 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
scale_min = meter.add_scale()
meter.set_scale_ticks(scale_min, 61, 1, 10, lv.palette_main(lv.PALETTE.GREY))
meter.set_scale_range(scale_min, 0, 60, 360, 270)
# Create another scale for the hours. It's only visual and contains only major ticks
scale_hour = meter.add_scale()
meter.set_scale_ticks(scale_hour, 12, 0, 0, lv.palette_main(lv.PALETTE.GREY)) # 12␣
,→ticks
meter.set_scale_major_ticks(scale_hour, 1, 2, 20, lv.color_black(), 10) #␣
,→Every tick is major
meter.set_scale_range(scale_hour, 1, 12, 330, 300) # [1..
,→12] values in an almost full circle
# LV_IMG_DECLARE(img_hand)
# Add the hands from images
indic_min = meter.add_needle_img(scale_min, img_hand_min_dsc, 5, 5)
indic_hour = meter.add_needle_img(scale_min, img_hand_hour_dsc, 5, 5)
# Create an animation to set the value
a1 = lv.anim_t()
a1.init()
a1.set_values(0, 60)
a1.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a1.set_time(2000) # 2 sec for 1 turn of the minute hand (1 hour)
a1.set_var(indic_min)
a1.set_custom_exec_cb(lambda a1,val: set_value(indic_min,val))
lv.anim_t.start(a1)
a2 = lv.anim_t()
a2.init()
a2.set_var(indic_hour)
a2.set_time(24000) # 24 sec for 1 turn of the hour hand
a2.set_values(0, 60)
a2.set_custom_exec_cb(lambda a2,val: set_value(indic_hour,val))
lv.anim_t.start(a2)
Piechart
#include "../../lv_examples.h"
#if LV_USE_METER && LV_BUILD_EXAMPLES
/**
* Create a pie chart
*/
void lv_example_meter_4(void)
{
lv_obj_t * meter = lv_meter_create(lv_scr_act());
/*Remove the background and the circle from the middle*/
lv_obj_remove_style(meter, NULL, LV_PART_MAIN);
lv_obj_remove_style(meter, NULL, LV_PART_INDICATOR);
(continuesonnextpage)
6.3. Extrawidgets 749


--- Page 754 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(meter, 200, 200);
lv_obj_center(meter);
/*Add a scale first with no ticks.*/
lv_meter_scale_t * scale = lv_meter_add_scale(meter);
lv_meter_set_scale_ticks(meter, scale, 0, 0, 0, lv_color_black());
lv_meter_set_scale_range(meter, scale, 0, 100, 360, 0);
/*Add a three arc indicator*/
lv_coord_t indic_w = 100;
lv_meter_indicator_t * indic1 = lv_meter_add_arc(meter, scale, indic_w, lv_
,→palette_main(LV_PALETTE_ORANGE), 0);
lv_meter_set_indicator_start_value(meter, indic1, 0);
lv_meter_set_indicator_end_value(meter, indic1, 40);
lv_meter_indicator_t * indic2 = lv_meter_add_arc(meter, scale, indic_w, lv_
,→palette_main(LV_PALETTE_YELLOW), 0);
lv_meter_set_indicator_start_value(meter, indic2, 40); /*Start from the␣
,→previous*/
lv_meter_set_indicator_end_value(meter, indic2, 80);
lv_meter_indicator_t * indic3 = lv_meter_add_arc(meter, scale, indic_w, lv_
,→palette_main(LV_PALETTE_DEEP_ORANGE), 0);
lv_meter_set_indicator_start_value(meter, indic3, 80); /*Start from the␣
,→previous*/
lv_meter_set_indicator_end_value(meter, indic3, 100);
}
#endif
#
# Create a pie chart
#
meter = lv.meter(lv.scr_act())
# Remove the background and the circle from the middle
meter.remove_style(None, lv.PART.MAIN)
meter.remove_style(None, lv.PART.INDICATOR)
meter.set_size(200, 200)
meter.center()
# Add a scale first with no ticks.
scale = meter.add_scale()
meter.set_scale_ticks(scale, 0, 0, 0, lv.color_black())
meter.set_scale_range(scale, 0, 100, 360, 0)
# Add a three arc indicator*
indic_w = 100
indic1 = meter.add_arc(scale, indic_w,lv.palette_main(lv.PALETTE.ORANGE), 0)
meter.set_indicator_start_value(indic1, 0)
meter.set_indicator_end_value(indic1, 40)
indic2 = meter.add_arc(scale, indic_w, lv.palette_main(lv.PALETTE.YELLOW), 0)
meter.set_indicator_start_value(indic2, 40) # Start from the previous
(continuesonnextpage)
6.3. Extrawidgets 750


--- Page 755 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
meter.set_indicator_end_value(indic2, 80)
indic3 = meter.add_arc(scale, indic_w, lv.palette_main(lv.PALETTE.DEEP_ORANGE), 0)
meter.set_indicator_start_value(indic3, 80) # Start from the previous
meter.set_indicator_end_value(indic3, 100)
API
Typedefs
typedefuint8_tlv_meter_indicator_type_t
Enums
enum[anonymous]
Values:
enumeratorLV_METER_INDICATOR_TYPE_NEEDLE_IMG
enumeratorLV_METER_INDICATOR_TYPE_NEEDLE_LINE
enumeratorLV_METER_INDICATOR_TYPE_SCALE_LINES
enumeratorLV_METER_INDICATOR_TYPE_ARC
enumlv_meter_draw_part_type_t
type field in lv_obj_draw_part_dsc_t if class_p = lv_meter_class Used in
LV_EVENT_DRAW_PART_BEGINandLV_EVENT_DRAW_PART_END
Values:
enumeratorLV_METER_DRAW_PART_ARC
Thearcindicator
enumeratorLV_METER_DRAW_PART_NEEDLE_LINE
Theneedlelines
enumeratorLV_METER_DRAW_PART_NEEDLE_IMG
Theneedleimages
enumeratorLV_METER_DRAW_PART_TICK
Theticklinesandlabels
6.3. Extrawidgets 751


--- Page 756 ---


LVGLDocumentation8.3
Functions
lv_obj_t*lv_meter_create(lv_obj_t*parent)
CreateaMeterobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewbar.
Returns pointertothecreatedmeter
lv_meter_scale_t*lv_meter_add_scale(lv_obj_t*obj)
Addanewscaletothemeter.
Note: Indicatorscanbeattachedtoscales.
Parameters obj--pointertoameterobject
Returns thenewscale
voidlv_meter_set_scale_ticks(lv_obj_t*obj,lv_meter_scale_t*scale,uint16_tcnt,uint16_twidth,
uint16_tlen,lv_color_tcolor)
Setthepropertiesoftheticksofascale
Parameters
• obj--pointertoameterobject
• scale--pointertoscale(addedtometer)
• cnt--numberofticklines
• width--widthofticklines
• len--lengthofticklines
• color--colorofticklines
voidlv_meter_set_scale_major_ticks(lv_obj_t*obj,lv_meter_scale_t*scale,uint16_tnth,uint16_t
width,uint16_tlen,lv_color_tcolor,int16_tlabel_gap)
Makesome"normal"ticksmajorticksandsettheirattributes. Textswiththecurrentvaluearealsoaddedtothe
majorticks.
Parameters
• obj--pointertoameterobject
• scale--pointertoscale(addedtometer)
• nth--makeeveryNthnormaltickmajortick. (startfromthefirstontheleft)
• width--widthofthemajorticks
• len--lengthofthemajorticks
• color--colorofthemajorticks
• label_gap--gapbetweenthemajorticksandthelabels
voidlv_meter_set_scale_range(lv_obj_t*obj,lv_meter_scale_t*scale,int32_tmin,int32_tmax,uint32_t
angle_range,uint32_trotation)
Setthevalueandangularrangeofascale.
Parameters
6.3. Extrawidgets 752


--- Page 757 ---


LVGLDocumentation8.3
• obj--pointertoameterobject
• scale--pointertoscale(addedtometer)
• min--theminimumvalue
• max--themaximalvalue
• angle_range--theangularrangeofthescale
• rotation--theangularoffsetfromthe3o'clockposition(clock-wise)
lv_meter_indicator_t*lv_meter_add_needle_line(lv_obj_t*obj,lv_meter_scale_t*scale,uint16_twidth,
lv_color_tcolor,int16_tr_mod)
Addaneedlelineindicatorthescale
Parameters
• obj--pointertoameterobject
• scale--pointertoscale(addedtometer)
• width--widthoftheline
• color--coloroftheline
• r_mod--theradiusmodifier(addedtothescale'sradius)togetthelineslength
Returns thenewindicator
lv_meter_indicator_t*lv_meter_add_needle_img(lv_obj_t*obj,lv_meter_scale_t*scale,constvoid*src,
lv_coord_tpivot_x,lv_coord_tpivot_y)
Addaneedleimageindicatorthescale
Note: theneedleimageshouldpointtotheright,like-O-->
Parameters
• obj--pointertoameterobject
• scale--pointertoscale(addedtometer)
• src--theimagesourceoftheindicator. pathorpointertolv_img_dsc_t
• pivot_x--theXpivotpointoftheneedle
• pivot_y--theYpivotpointoftheneedle
Returns thenewindicator
lv_meter_indicator_t*lv_meter_add_arc(lv_obj_t*obj,lv_meter_scale_t*scale,uint16_twidth,lv_color_tcolor,
int16_tr_mod)
Addanarcindicatorthescale
Parameters
• obj--pointertoameterobject
• scale--pointertoscale(addedtometer)
• width--widthofthearc
• color--colorofthearc
6.3. Extrawidgets 753


--- Page 758 ---


LVGLDocumentation8.3
• r_mod--theradiusmodifier(addedtothescale'sradius)togettheouterradiusofthearc
Returns thenewindicator
lv_meter_indicator_t*lv_meter_add_scale_lines(lv_obj_t*obj,lv_meter_scale_t*scale,lv_color_t
color_start,lv_color_tcolor_end,boollocal,int16_t
width_mod)
Addascalelineindicatorthescale. Itwillmodifytheticks.
Parameters
• obj--pointertoameterobject
• scale--pointertoscale(addedtometer)
• color_start--thestartcolor
• color_end--theendcolor
• local--tellhowtomapstartandendcolor. true: theindicator'sstartandend_value;false:
thescale'sminmaxvalue
• width_mod--addthistheaffectedtick'swidth
Returns thenewindicator
voidlv_meter_set_indicator_value(lv_obj_t*obj,lv_meter_indicator_t*indic,int32_tvalue)
Setthevalueoftheindicator. Itwillsetstartandandvaluetothesamevalue
Parameters
• obj--pointertoameterobject
• indic--pointertoanindicator
• value--thenewvalue
voidlv_meter_set_indicator_start_value(lv_obj_t*obj,lv_meter_indicator_t*indic,int32_tvalue)
Setthestartvalueoftheindicator.
Parameters
• obj--pointertoameterobject
• indic--pointertoanindicator
• value--thenewvalue
voidlv_meter_set_indicator_end_value(lv_obj_t*obj,lv_meter_indicator_t*indic,int32_tvalue)
Setthestartvalueoftheindicator.
Parameters
• obj--pointertoameterobject
• indic--pointertoanindicator
• value--thenewvalue
6.3. Extrawidgets 754


--- Page 759 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_meter_class
structlv_meter_scale_t
PublicMembers
lv_color_ttick_color
uint16_ttick_cnt
uint16_ttick_length
uint16_ttick_width
lv_color_ttick_major_color
uint16_ttick_major_nth
uint16_ttick_major_length
uint16_ttick_major_width
int16_tlabel_gap
int32_tmin
int32_tmax
int16_tr_mod
uint16_tangle_range
int16_trotation
structlv_meter_indicator_t
6.3. Extrawidgets 755


--- Page 760 ---


LVGLDocumentation8.3
PublicMembers
lv_meter_scale_t*scale
lv_meter_indicator_type_ttype
lv_opa_topa
int32_tstart_value
int32_tend_value
constvoid*src
lv_point_tpivot
structlv_meter_indicator_t::[anonymous]::[anonymous]needle_img
uint16_twidth
int16_tr_mod
lv_color_tcolor
structlv_meter_indicator_t::[anonymous]::[anonymous]needle_line
structlv_meter_indicator_t::[anonymous]::[anonymous]arc
int16_twidth_mod
lv_color_tcolor_start
lv_color_tcolor_end
uint8_tlocal_grad
structlv_meter_indicator_t::[anonymous]::[anonymous]scale_lines
unionlv_meter_indicator_t::[anonymous]type_data
structlv_meter_t
6.3. Extrawidgets 756


--- Page 761 ---


LVGLDocumentation8.3
PublicMembers
lv_obj_tobj
lv_ll_tscale_ll
lv_ll_tindicator_ll
6.3.11 Message box (lv_msgbox)
Overview
TheMessageboxesactaspop-ups. Theyarebuiltfromabackgroundcontainer,atitle,anoptionalclosebutton,atext
andoptionalbuttons.
Thetextwillbebrokenintomultiplelinesautomaticallyandtheheightwillbesetautomaticallytoincludethetextand
thebuttons.
Themessageboxcanbemodal(blockingclicksontherestofthescreen)ornotmodal.
PartsandStyles
Themessageboxisbuiltfromotherwidgets,soyoucancheckthesewidgets'documentationfordetails.
• Background: lv_obj
• Closebutton: lv_btn
• Titleandtext: lv_label
• Buttons: lv_btnmatrix
Usage
Createamessagebox
lv_msgbox_create(parent, title, txt, btn_txts[], add_close_btn)createsamessagebox.
IfparentisNULLthemessageboxwillbemodal. titleandtxtarestringsforthetitleandthetext. btn_txts[]
is an array with the buttons' text. E.g. const char * btn_txts[] = {"Ok", "Cancel", NULL}.
add_close_btncanbetrueorfalsetoadd/don'taddaclosebutton.
6.3. Extrawidgets 757


--- Page 762 ---


LVGLDocumentation8.3
Gettheparts
Thebuildingblocksofthemessageboxcanbeobtainedusingthefollowingfunctions:
lv_obj_t * lv_msgbox_get_title(lv_obj_t * mbox);
lv_obj_t * lv_msgbox_get_close_btn(lv_obj_t * mbox);
lv_obj_t * lv_msgbox_get_text(lv_obj_t * mbox);
lv_obj_t * lv_msgbox_get_btns(lv_obj_t * mbox);
Closethemessagebox
lv_msgbox_close(msgbox)closes(deletes)themessagebox.
Events
• LV_EVENT_VALUE_CHANGED is sent by the buttons if one of them is clicked.
LV_OBJ_FLAG_EVENT_BUBBLE is enabled on the buttons so you can add events to the
message box itself. In the event handler, lv_event_get_target(e) will return the
button matrix and lv_event_get_current_target(e) will return the message box.
lv_msgbox_get_active_btn(msgbox) and lv_msgbox_get_active_btn_text(msgbox)
canbeusedtogettheindexandtextoftheclickedbutton.
LearnmoreaboutEvents.
Keys
Keyshaveeffectontheclosebuttonandbuttonmatrix. Youcanaddthemmanuallytoagroupifrequired.
LearnmoreaboutKeys.
Example
SimpleMessagebox
#include "../../lv_examples.h"
#if LV_USE_MSGBOX && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_current_target(e);
LV_LOG_USER("Button %s clicked", lv_msgbox_get_active_btn_text(obj));
}
void lv_example_msgbox_1(void)
{
static const char * btns[] = {"Apply", "Close", ""};
lv_obj_t * mbox1 = lv_msgbox_create(NULL, "Hello", "This is a message box with␣
,→two buttons.", btns, true);
lv_obj_add_event_cb(mbox1, event_cb, LV_EVENT_VALUE_CHANGED, NULL);
lv_obj_center(mbox1);
(continuesonnextpage)
6.3. Extrawidgets 758


--- Page 763 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
#endif
def event_cb(e):
mbox = e.get_current_target()
print("Button %s clicked" % mbox.get_active_btn_text())
btns = ["Apply", "Close", ""]
mbox1 = lv.msgbox(lv.scr_act(), "Hello", "This is a message box with two buttons.",␣
,→btns, True)
mbox1.add_event_cb(event_cb, lv.EVENT.VALUE_CHANGED, None)
mbox1.center()
API
Functions
lv_obj_t*lv_msgbox_create(lv_obj_t*parent,constchar*title,constchar*txt,constchar*btn_txts[],bool
add_close_btn)
Createamessageboxobject
Parameters
• parent--pointertoparentorNULLtocreateafullscreenmodalmessagebox
• title--thetitleofthemessagebox
• txt--thetextofthemessagebox
• btn_txts -- the buttons as an array of texts terminated by an "" element. E.g. {"btn1",
"btn2",""}
• add_close_btn--true: addaclosebutton
Returns pointertothemessageboxobject
lv_obj_t*lv_msgbox_get_title(lv_obj_t*obj)
lv_obj_t*lv_msgbox_get_close_btn(lv_obj_t*obj)
lv_obj_t*lv_msgbox_get_text(lv_obj_t*obj)
lv_obj_t*lv_msgbox_get_content(lv_obj_t*obj)
lv_obj_t*lv_msgbox_get_btns(lv_obj_t*obj)
uint16_tlv_msgbox_get_active_btn(lv_obj_t*mbox)
Gettheindexoftheselectedbutton
Parameters mbox--messageboxobject
Returns indexofthebutton(LV_BTNMATRIX_BTN_NONE:ifunset)
constchar*lv_msgbox_get_active_btn_text(lv_obj_t*mbox)
6.3. Extrawidgets 759


--- Page 764 ---


LVGLDocumentation8.3
voidlv_msgbox_close(lv_obj_t*mbox)
voidlv_msgbox_close_async(lv_obj_t*mbox)
Variables
constlv_obj_class_tlv_msgbox_class
constlv_obj_class_tlv_msgbox_content_class
constlv_obj_class_tlv_msgbox_backdrop_class
structlv_msgbox_t
PublicMembers
lv_obj_tobj
lv_obj_t*title
lv_obj_t*close_btn
lv_obj_t*content
lv_obj_t*text
lv_obj_t*btns
6.3.12 Span (lv_span)
Overview
Aspangroupistheobjectthatisusedtodisplayrichtext. Differentfromthelabelobject,spangroupcanrendertext
styledwithdifferentfonts,colors,andsizesintothespangroupobject.
PartsandStyles
• LV_PART_MAINThespangrouphasonlyonepart.
6.3. Extrawidgets 760


--- Page 765 ---


LVGLDocumentation8.3
Usage
Settextandstyle
The spangroup object uses span to describe text and text style. so, first we need to create span de-
scriptor using lv_span_t * span = lv_spangroup_new_span(spangroup). Then use
lv_span_set_text(span, "text") to set text. The style of the span is configured as with
a normal style object by using its style member, eg:lv_style_set_text_color(&span->style,
lv_palette_main(LV_PALETTE_RED)).
Ifspangroupobjectmode != LV_SPAN_MODE_FIXEDyoumustcalllv_spangroup_refr_mode()afteryou
havemodifiedspanstyle(eg:settext,changedthefontsize,delspan).
Retrievingaspanchild
Spangroupsstoretheirchildrendifferentlyfromnormalobjects,sonormalfunctionsforgettingchildrenwon'twork.
lv_spangroup_get_child(spangroup, id)willreturnapointertothechildspanatindexid. Inaddition,
idcanbenegativetoindexfromtheendofthespangroupwhere-1istheyoungestchild,-2issecondyoungest,etc.
e.g. lv_span_t* span = lv_spangroup_get_child(spangroup, 0)willreturnthefirstchildofthe
spangroup. lv_span_t* span = lv_spangroup_get_child(spangroup, -1)willreturnthelast(or
mostrecent)child.
ChildCount
Usethefunctionlv_spangroup_get_child_cnt(spangroup)togetbackthenumberofspansthegroupis
maintaining.
e.g. uint32_t size = lv_spangroup_get_child_cnt(spangroup)
Textalign
likelabelobject,thespangroupcanbesettoonethefollowingmodes:
• LV_TEXT_ALIGN_LEFTAligntexttoleft.
• LV_TEXT_ALIGN_CENTERAligntexttocenter.
• LV_TEXT_ALIGN_RIGHTAligntexttoright.
• LV_TEXT_ALIGN_AUTOAligntextauto.
usefunctionlv_spangroup_set_align(spangroup, LV_TEXT_ALIGN_CENTER)tosettextalign.
6.3. Extrawidgets 761


--- Page 766 ---


LVGLDocumentation8.3
Modes
Thespangroupcanbesettooneofthefollowingmodes:
• LV_SPAN_MODE_FIXEDfixestheobjectsize.
• LV_SPAN_MODE_EXPANDExpandtheobjectsizetothetextsizebutstayonasingleline.
• LV_SPAN_MODE_BREAKKeepwidth,breakthetoolonglinesandautoexpandheight.
Uselv_spangroup_set_mode(spangroup, LV_SPAN_MODE_BREAK)tosetobjectmode.
Overflow
Thespangroupcanbesettooneofthefollowingmodes:
• LV_SPAN_OVERFLOW_CLIPtruncatesthetextatthelimitofthearea.
• LV_SPAN_OVERFLOW_ELLIPSISwilldisplayanellipsis(...)whentextoverflowsthearea.
Use lv_spangroup_set_overflow(spangroup, LV_SPAN_OVERFLOW_CLIP) to set object overflow
mode.
firstlineindent
Uselv_spangroup_set_indent(spangroup, 20)tosettheindentofthefirstline. Allmodessupportpixel
units,inadditiontoLV_SPAN_MODE_FIXEDandLV_SPAN_MODE_BREAKmodesupportspercentageunitstoo.
lines
Use lv_spangroup_set_lines(spangroup, 10) to set the maximum number of lines to be displayed in
LV_SPAN_MODE_BREAKmode,negativevaluesindicatenolimit.
Events
Nospecialeventsaresentbythiswidget.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
6.3. Extrawidgets 762


--- Page 767 ---


LVGLDocumentation8.3
Example
Spanwithcustomstyles
#include "../../lv_examples.h"
#if LV_USE_SPAN && LV_BUILD_EXAMPLES
/**
* Create span.
*/
void lv_example_span_1(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_border_width(&style, 1);
lv_style_set_border_color(&style, lv_palette_main(LV_PALETTE_ORANGE));
lv_style_set_pad_all(&style, 2);
lv_obj_t * spans = lv_spangroup_create(lv_scr_act());
lv_obj_set_width(spans, 300);
lv_obj_set_height(spans, 300);
lv_obj_center(spans);
lv_obj_add_style(spans, &style, 0);
lv_spangroup_set_align(spans, LV_TEXT_ALIGN_LEFT);
lv_spangroup_set_overflow(spans, LV_SPAN_OVERFLOW_CLIP);
lv_spangroup_set_indent(spans, 20);
lv_spangroup_set_mode(spans, LV_SPAN_MODE_BREAK);
lv_span_t * span = lv_spangroup_new_span(spans);
lv_span_set_text(span, "China is a beautiful country.");
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_RED));
lv_style_set_text_decor(&span->style, LV_TEXT_DECOR_UNDERLINE);
lv_style_set_text_opa(&span->style, LV_OPA_50);
span = lv_spangroup_new_span(spans);
lv_span_set_text_static(span, "good good study, day day up.");
#if LV_FONT_MONTSERRAT_24
lv_style_set_text_font(&span->style, &lv_font_montserrat_24);
#endif
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_GREEN));
span = lv_spangroup_new_span(spans);
lv_span_set_text_static(span, "LVGL is an open-source graphics library.");
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_BLUE));
span = lv_spangroup_new_span(spans);
lv_span_set_text_static(span, "the boy no name.");
lv_style_set_text_color(&span->style, lv_palette_main(LV_PALETTE_GREEN));
#if LV_FONT_MONTSERRAT_20
lv_style_set_text_font(&span->style, &lv_font_montserrat_20);
#endif
lv_style_set_text_decor(&span->style, LV_TEXT_DECOR_UNDERLINE);
span = lv_spangroup_new_span(spans);
lv_span_set_text(span, "I have a dream that hope to come true.");
lv_style_set_text_decor(&span->style, LV_TEXT_DECOR_STRIKETHROUGH);
(continuesonnextpage)
6.3. Extrawidgets 763


--- Page 768 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_spangroup_refr_mode(spans);
}
#endif
#
# Create span
#
style = lv.style_t()
style.init()
style.set_border_width(1)
style.set_border_color(lv.palette_main(lv.PALETTE.ORANGE))
style.set_pad_all(2)
spans = lv.spangroup(lv.scr_act())
spans.set_width(300)
spans.set_height(300)
spans.center()
spans.add_style(style, 0)
spans.set_align(lv.TEXT_ALIGN.LEFT)
spans.set_overflow(lv.SPAN_OVERFLOW.CLIP)
spans.set_indent(20)
spans.set_mode(lv.SPAN_MODE.BREAK)
span = spans.new_span()
span.set_text("china is a beautiful country.")
span.style.set_text_color(lv.palette_main(lv.PALETTE.RED))
span.style.set_text_decor(lv.TEXT_DECOR.STRIKETHROUGH | lv.TEXT_DECOR.UNDERLINE)
span.style.set_text_opa(lv.OPA._30)
span = spans.new_span()
span.set_text_static("good good study, day day up.")
#if LV_FONT_MONTSERRAT_24
# lv_style_set_text_font(&span->style, &lv_font_montserrat_24);
#endif
span.style.set_text_color(lv.palette_main(lv.PALETTE.GREEN))
span = spans.new_span()
span.set_text_static("LVGL is an open-source graphics library.")
span.style.set_text_color(lv.palette_main(lv.PALETTE.BLUE))
span = spans.new_span()
span.set_text_static("the boy no name.")
span.style.set_text_color(lv.palette_main(lv.PALETTE.GREEN))
#if LV_FONT_MONTSERRAT_20
# lv_style_set_text_font(&span->style, &lv_font_montserrat_20);
#endif
span.style.set_text_decor(lv.TEXT_DECOR.UNDERLINE)
span = spans.new_span()
span.set_text("I have a dream that hope to come true.")
spans.refr_mode()
(continuesonnextpage)
6.3. Extrawidgets 764


--- Page 769 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# lv_span_del(spans, span);
# lv_obj_del(spans);
API
Typedefs
typedefuint8_tlv_span_overflow_t
typedefuint8_tlv_span_mode_t
Enums
enum[anonymous]
Values:
enumeratorLV_SPAN_OVERFLOW_CLIP
enumeratorLV_SPAN_OVERFLOW_ELLIPSIS
enum[anonymous]
Values:
enumeratorLV_SPAN_MODE_FIXED
fixedtheobjsize
enumeratorLV_SPAN_MODE_EXPAND
Expandtheobjectsizetothetextsize
enumeratorLV_SPAN_MODE_BREAK
Keepwidth,breakthetoolonglinesandexpandheight
Functions
lv_obj_t*lv_spangroup_create(lv_obj_t*par)
Createaspangroupobject
Parameters par--pointertoanobject,itwillbetheparentofthenewspangroup
Returns pointertothecreatedspangroup
6.3. Extrawidgets 765


--- Page 770 ---


LVGLDocumentation8.3
lv_span_t*lv_spangroup_new_span(lv_obj_t*obj)
Createaspanstringdescriptorandaddtospangroup.
Parameters obj--pointertoaspangroupobject.
Returns pointertothecreatedspan.
voidlv_spangroup_del_span(lv_obj_t*obj,lv_span_t*span)
Removethespanfromthespangroupandfreememory.
Parameters
• obj--pointertoaspangroupobject.
• span--pointertoaspan.
voidlv_span_set_text(lv_span_t*span,constchar*text)
Setanewtextforaspan. Memorywillbeallocatedtostorethetextbythespan.
Parameters
• span--pointertoaspan.
• text--pointertoatext.
voidlv_span_set_text_static(lv_span_t*span,constchar*text)
Setastatictext. Itwillnotbesavedbythespansothe'text'variablehastobe'alive'whilethespanexist.
Parameters
• span--pointertoaspan.
• text--pointertoatext.
voidlv_spangroup_set_align(lv_obj_t*obj,lv_text_align_talign)
Setthealignofthespangroup.
Parameters
• obj--pointertoaspangroupobject.
• align--seelv_text_align_tfordetails.
voidlv_spangroup_set_overflow(lv_obj_t*obj,lv_span_overflow_toverflow)
Settheoverflowofthespangroup.
Parameters
• obj--pointertoaspangroupobject.
• overflow--seelv_span_overflow_tfordetails.
voidlv_spangroup_set_indent(lv_obj_t*obj,lv_coord_tindent)
Settheindentofthespangroup.
Parameters
• obj--pointertoaspangroupobject.
• indent--Thefirstlineindentation
voidlv_spangroup_set_mode(lv_obj_t*obj,lv_span_mode_tmode)
Setthemodeofthespangroup.
Parameters
• obj--pointertoaspangroupobject.
6.3. Extrawidgets 766


--- Page 771 ---


LVGLDocumentation8.3
• mode--seelv_span_mode_tfordetails.
voidlv_spangroup_set_lines(lv_obj_t*obj,int32_tlines)
Setlinesofthespangroup.
Parameters
• obj--pointertoaspangroupobject.
• lines--maxlinesthatcanbedisplayedinLV_SPAN_MODE_BREAKmode. <0means
nolimit.
lv_span_t*lv_spangroup_get_child(constlv_obj_t*obj,int32_tid)
Getaspangroupchildbyitsindex.
Parameters
• obj--Thespangroupobject
• id -- the index of the child. 0: the oldest (firstly created) child 1: the second oldest child
count-1: theyoungest-1: theyoungest-2: thesecondyoungest
Returns Thechildspanatindexid,orNULLiftheIDdoesnotexist
uint32_tlv_spangroup_get_child_cnt(constlv_obj_t*obj)
Parameters obj--Thespangroupobjecttogetthechildcountof.
Returns Thespancountofthespangroup.
lv_text_align_tlv_spangroup_get_align(lv_obj_t*obj)
getthealignofthespangroup.
Parameters obj--pointertoaspangroupobject.
Returns thealignvalue.
lv_span_overflow_tlv_spangroup_get_overflow(lv_obj_t*obj)
gettheoverflowofthespangroup.
Parameters obj--pointertoaspangroupobject.
Returns theoverflowvalue.
lv_coord_tlv_spangroup_get_indent(lv_obj_t*obj)
gettheindentofthespangroup.
Parameters obj--pointertoaspangroupobject.
Returns theindentvalue.
lv_span_mode_tlv_spangroup_get_mode(lv_obj_t*obj)
getthemodeofthespangroup.
Parameters obj--pointertoaspangroupobject.
int32_tlv_spangroup_get_lines(lv_obj_t*obj)
getlinesofthespangroup.
Parameters obj--pointertoaspangroupobject.
Returns thelinesvalue.
6.3. Extrawidgets 767


--- Page 772 ---


LVGLDocumentation8.3
lv_coord_tlv_spangroup_get_max_line_h(lv_obj_t*obj)
getmaxlineheightofallspaninthespangroup.
Parameters obj--pointertoaspangroupobject.
uint32_tlv_spangroup_get_expand_width(lv_obj_t*obj,uint32_tmax_width)
getthetextcontentwidthwhenallspanofspangrouponaline.
Parameters
• obj--pointertoaspangroupobject.
• max_width--iftextcontentwidth>=max_width,returnmax_widthtoreducecomputation,
ifmax_width==0,returnsthetextcontentwidth.
Returns textcontentwidthormax_width.
lv_coord_tlv_spangroup_get_expand_height(lv_obj_t*obj,lv_coord_twidth)
getthetextcontentheightwithwidthfixed.
Parameters obj--pointertoaspangroupobject.
voidlv_spangroup_refr_mode(lv_obj_t*obj)
updatethemodeofthespangroup.
Parameters obj--pointertoaspangroupobject.
Variables
constlv_obj_class_tlv_spangroup_class
structlv_span_t
PublicMembers
char*txt
lv_obj_t*spangroup
lv_style_tstyle
uint8_tstatic_flag
structlv_spangroup_t
#include<lv_span.h>Dataoflabel
6.3. Extrawidgets 768


--- Page 773 ---


LVGLDocumentation8.3
PublicMembers
lv_obj_tobj
int32_tlines
lv_coord_tindent
lv_coord_tcache_w
lv_coord_tcache_h
lv_ll_tchild_ll
uint8_tmode
uint8_toverflow
uint8_trefresh
6.3.13 Spinbox (lv_spinbox)
Overview
TheSpinboxcontainsanumberastextwhichcanbeincreasedordecreasedbyKeysorAPIfunctions. Underthehood
theSpinboxisamodifiedTextarea.
PartsandStyles
ThepartsoftheSpinboxareidenticaltotheTextarea.
Value,rangeandstep
lv_spinbox_set_value(spinbox, 1234)setsanewvalueontheSpinbox.
lv_spinbox_increment(spinbox) and lv_spinbox_decrement(spinbox) increments/decrements
thevalueoftheSpinboxaccordingtothecurrentlyselecteddigit.
lv_spinbox_set_range(spinbox, -1000, 2500) sets a range. If the value is changed by
lv_spinbox_set_value,byKeys,lv_spinbox_increment/decrementthisrangewillberespected.
lv_spinbox_set_step(spinbox, 100)setswhichdigitstochangeonincrement/decrement. Onlymultiples
oftencanbeset,andnotforexample3.
lv_spinbox_set_cursor_pos(spinbox, 1) sets the cursor to a specific digit to change on incre-
ment/decrement. Forexampleposition'0'setsthecursortotheleastsignificantdigit.
6.3. Extrawidgets 769


--- Page 774 ---


LVGLDocumentation8.3
If an encoder is used as input device, the selected digit is shifted to the right by default when-
ever the encoder button is clicked. To change this behaviour to shifting to the left, the
lv_spinbox_set_digit_step_direction(spinbox, LV_DIR_LEFT)canbeused
Format
lv_spinbox_set_digit_format(spinbox, digit_count, separator_position)setsthenum-
ber format. digit_count is the number of digits excluding the decimal separator and the sign. separa-
tor_positionisthenumberofdigitsbeforethedecimalpoint. If0,nodecimalpointisdisplayed.
Rollover
lv_spinbox_set_rollover(spinbox, true/false)enables/disabledrollovermode. Ifeitherthemini-
mumormaximumvalueisreachedwithrolloverenabled,thevaluewillchangetotheotherlimit. Ifrolloverisdisabled
thevaluewillremainattheminimumormaximumvalue.
Events
• LV_EVENT_VALUE_CHANGEDSentwhenthevaluehaschanged.
SeetheeventsoftheTextareatoo.
LearnmoreaboutEvents.
Keys
• LV_KEY_LEFT/RIGHT With Keypad move the cursor left/right. With Encoder decrement/increment the se-
lecteddigit.
• LV_KEY_UP/DOWNWithKeypadandEncoderincrement/decrementthevalue.
• LV_KEY_ENTERWithEncodergotthenextdigit. Jumptothefirstafterthelast.
Example
SimpleSpinbox
#include "../../lv_examples.h"
#if LV_USE_SPINBOX && LV_BUILD_EXAMPLES
static lv_obj_t * spinbox;
static void lv_spinbox_increment_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_SHORT_CLICKED || code == LV_EVENT_LONG_PRESSED_REPEAT) {
lv_spinbox_increment(spinbox);
}
}
static void lv_spinbox_decrement_event_cb(lv_event_t * e)
(continuesonnextpage)
6.3. Extrawidgets 770


--- Page 775 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_SHORT_CLICKED || code == LV_EVENT_LONG_PRESSED_REPEAT) {
lv_spinbox_decrement(spinbox);
}
}
void lv_example_spinbox_1(void)
{
spinbox = lv_spinbox_create(lv_scr_act());
lv_spinbox_set_range(spinbox, -1000, 25000);
lv_spinbox_set_digit_format(spinbox, 5, 2);
lv_spinbox_step_prev(spinbox);
lv_obj_set_width(spinbox, 100);
lv_obj_center(spinbox);
lv_coord_t h = lv_obj_get_height(spinbox);
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, h, h);
lv_obj_align_to(btn, spinbox, LV_ALIGN_OUT_RIGHT_MID, 5, 0);
lv_obj_set_style_bg_img_src(btn, LV_SYMBOL_PLUS, 0);
lv_obj_add_event_cb(btn, lv_spinbox_increment_event_cb, LV_EVENT_ALL, NULL);
btn = lv_btn_create(lv_scr_act());
lv_obj_set_size(btn, h, h);
lv_obj_align_to(btn, spinbox, LV_ALIGN_OUT_LEFT_MID, -5, 0);
lv_obj_set_style_bg_img_src(btn, LV_SYMBOL_MINUS, 0);
lv_obj_add_event_cb(btn, lv_spinbox_decrement_event_cb, LV_EVENT_ALL, NULL);
}
#endif
def increment_event_cb(e):
code = e.get_code()
if code == lv.EVENT.SHORT_CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
spinbox.increment()
def decrement_event_cb(e):
code = e.get_code()
if code == lv.EVENT.SHORT_CLICKED or code == lv.EVENT.LONG_PRESSED_REPEAT:
spinbox.decrement()
spinbox = lv.spinbox(lv.scr_act())
spinbox.set_range(-1000, 25000)
spinbox.set_digit_format(5, 2)
spinbox.step_prev()
spinbox.set_width(100)
spinbox.center()
h = spinbox.get_height()
btn = lv.btn(lv.scr_act())
btn.set_size(h, h)
btn.align_to(spinbox, lv.ALIGN.OUT_RIGHT_MID, 5, 0)
btn.set_style_bg_img_src(lv.SYMBOL.PLUS, 0)
(continuesonnextpage)
6.3. Extrawidgets 771


--- Page 776 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
btn.add_event_cb(increment_event_cb, lv.EVENT.ALL, None)
btn = lv.btn(lv.scr_act())
btn.set_size(h, h)
btn.align_to(spinbox, lv.ALIGN.OUT_LEFT_MID, -5, 0)
btn.set_style_bg_img_src(lv.SYMBOL.MINUS, 0)
btn.add_event_cb(decrement_event_cb, lv.EVENT.ALL, None)
API
Functions
lv_obj_t*lv_spinbox_create(lv_obj_t*parent)
CreateaSpinboxobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewspinbox
Returns pointertothecreatedspinbox
voidlv_spinbox_set_value(lv_obj_t*obj,int32_ti)
Setspinboxvalue
Parameters
• obj--pointertospinbox
• i--valuetobeset
voidlv_spinbox_set_rollover(lv_obj_t*obj,boolb)
Setspinboxrolloverfunction
Parameters
• obj--pointertospinbox
• b--trueorfalsetoenableordisable(default)
voidlv_spinbox_set_digit_format(lv_obj_t*obj,uint8_tdigit_count,uint8_tseparator_position)
Setspinboxdigitformat(digitcountanddecimalformat)
Parameters
• obj--pointertospinbox
• digit_count--numberofdigitexcludingthedecimalseparatorandthesign
• separator_position--numberofdigitbeforethedecimalpoint. If0,decimalpointis
notshown
voidlv_spinbox_set_step(lv_obj_t*obj,uint32_tstep)
Setspinboxstep
Parameters
• obj--pointertospinbox
• step--stepsonincrement/decrement. Canbe1,10,100,1000,etcthedigitthatwillchange.
6.3. Extrawidgets 772


--- Page 777 ---


LVGLDocumentation8.3
voidlv_spinbox_set_range(lv_obj_t*obj,int32_trange_min,int32_trange_max)
Setspinboxvaluerange
Parameters
• obj--pointertospinbox
• range_min--maximumvalue,inclusive
• range_max--minimumvalue,inclusive
voidlv_spinbox_set_cursor_pos(lv_obj_t*obj,uint8_tpos)
Setcursorpositiontoaspecificdigitforedition
Parameters
• obj--pointertospinbox
• pos--selectedpositioninspinbox
voidlv_spinbox_set_digit_step_direction(lv_obj_t*obj,lv_dir_tdirection)
Setdirectionofdigitstepwhenclickinganencoderbuttonwhileineditingmode
Parameters
• obj--pointertospinbox
• direction--thedirection(LV_DIR_RIGHTorLV_DIR_LEFT)
boollv_spinbox_get_rollover(lv_obj_t*obj)
Getspinboxrolloverfunctionstatus
Parameters obj--pointertospinbox
int32_tlv_spinbox_get_value(lv_obj_t*obj)
Getthespinboxnumeralvalue(userhastoconverttofloataccordingtoitsdigitformat)
Parameters obj--pointertospinbox
Returns valueintegervalueofthespinbox
int32_tlv_spinbox_get_step(lv_obj_t*obj)
Getthespinboxstepvalue(userhastoconverttofloataccordingtoitsdigitformat)
Parameters obj--pointertospinbox
Returns valueintegerstepvalueofthespinbox
voidlv_spinbox_step_next(lv_obj_t*obj)
Selectnextlowerdigitforeditionbydividingthestepby10
Parameters obj--pointertospinbox
voidlv_spinbox_step_prev(lv_obj_t*obj)
Selectnexthigherdigitforeditionbymultiplyingthestepby10
Parameters obj--pointertospinbox
voidlv_spinbox_increment(lv_obj_t*obj)
Incrementspinboxvaluebyonestep
Parameters obj--pointertospinbox
6.3. Extrawidgets 773


--- Page 778 ---


LVGLDocumentation8.3
voidlv_spinbox_decrement(lv_obj_t*obj)
Decrementspinboxvaluebyonestep
Parameters obj--pointertospinbox
Variables
constlv_obj_class_tlv_spinbox_class
structlv_spinbox_t
PublicMembers
lv_textarea_tta
int32_tvalue
int32_trange_max
int32_trange_min
int32_tstep
uint16_tdigit_count
uint16_tdec_point_pos
uint16_trollover
uint16_tdigit_step_dir
Example
6.3.14 Spinner (lv_spinner)
Overview
TheSpinnerobjectisaspinningarcoveraring.
6.3. Extrawidgets 774


--- Page 779 ---


LVGLDocumentation8.3
PartsandStyles
Thepartsareidenticaltothepartsoflv_arc.
Usage
Createaspinner
Tocreateaspinneruselv_spinner_create(parent, spin_time, arc_length). spin timesetsthe
spintimeinmilliseconds,arc_lengthsetsthelengthofthespinningarcindegrees.
Events
NospecialeventsaresentbytheSpinner.
SeetheeventsoftheArctoo.
LearnmoreaboutEvents.
Keys
NoKeysareprocessedbytheobjecttype.
LearnmoreaboutKeys.
Example
Simplespinner
#include "../../lv_examples.h"
#if LV_USE_SPINNER && LV_BUILD_EXAMPLES
void lv_example_spinner_1(void)
{
/*Create a spinner*/
lv_obj_t * spinner = lv_spinner_create(lv_scr_act(), 1000, 60);
lv_obj_set_size(spinner, 100, 100);
lv_obj_center(spinner);
}
#endif
# Create a spinner
spinner = lv.spinner(lv.scr_act(), 1000, 60)
spinner.set_size(100, 100)
spinner.center()
6.3. Extrawidgets 775


--- Page 780 ---


LVGLDocumentation8.3
API
Functions
lv_obj_t*lv_spinner_create(lv_obj_t*parent,uint32_ttime,uint32_tarc_length)
Variables
constlv_obj_class_tlv_spinner_class
6.3.15 Tabview (lv_tabview)
Overview
TheTabviewobjectcanbeusedtoorganizecontentintabs. TheTabviewisbuiltfromotherwidgets:
• Maincontainer: lv_obj)
– Tabbuttons: lv_btnmatrix
– Containerforthetabs: lv_obj
∗ Contentofthetabs: lv_obj
Thetabbuttonscanbepositionedonthetop,bottom,leftandrightsideoftheTabview.
Anewtabcanbeselectedeitherbyclickingonatabbuttonorbyslidinghorizontallyonthecontent.
PartsandStyles
TherearenospecialpartsontheTabviewbutthelv_objandlv_btnnmatrixwidgetsareusedtocreatetheTab
view.
Usage
CreateaTabview
lv_tabview_create(parent, tab_pos, tab_size);createsanewemptyTabview. tab_poscanbe
LV_DIR_TOP/BOTTOM/LEFT/RIGHT to position the tab buttons to a side. tab_size is the height (in case of
LV_DIR_TOP/BOTTOM)orwidth(incaseofLV_DIR_LEFT/RIGHT)tabbuttons.
Addtabs
Newtabscanbeaddedwithlv_tabview_add_tab(tabview, "Tab name"). Thiswillreturnapointertoan
lv_objobjectwherethetab'scontentcanbecreated.
6.3. Extrawidgets 776


--- Page 781 ---


LVGLDocumentation8.3
Renametabs
Atabcanberenamedwithlv_tabview_rename_tab(tabview, tab_id, "New Name").
Changetab
Toselectanewtabyoucan:
• Clickonitstabbutton
• Slidehorizontally
• Uselv_tabview_set_act(tabview, id, LV_ANIM_ON/OFF)function
Gettheparts
lv_tabview_get_content(tabview) returns the container for the tabs,
lv_tabview_get_tab_btns(tabview)returnstheTabbuttonsobjectwhichisaButtonmatrix.
Events
• LV_EVENT_VALUE_CHANGED Sent when a new tab is selected by sliding or clicking the tab button.
lv_tabview_get_tab_act(tabview)returnsthezerobasedindexofthecurrenttab.
LearnmoreaboutEvents.
Keys
Keyshaveeffectonlyonthetabbuttons(Buttonmatrix). Addmanuallytoagroupifrequired.
LearnmoreaboutKeys.
Example
SimpleTabview
#include "../../lv_examples.h"
#if LV_USE_TABVIEW && LV_BUILD_EXAMPLES
void lv_example_tabview_1(void)
{
/*Create a Tab view object*/
lv_obj_t * tabview;
tabview = lv_tabview_create(lv_scr_act(), LV_DIR_TOP, 50);
/*Add 3 tabs (the tabs are page (lv_page) and can be scrolled*/
lv_obj_t * tab1 = lv_tabview_add_tab(tabview, "Tab 1");
lv_obj_t * tab2 = lv_tabview_add_tab(tabview, "Tab 2");
lv_obj_t * tab3 = lv_tabview_add_tab(tabview, "Tab 3");
/*Add content to the tabs*/
lv_obj_t * label = lv_label_create(tab1);
(continuesonnextpage)
6.3. Extrawidgets 777


--- Page 782 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_label_set_text(label, "This the first tab\n\n"
"If the content\n"
"of a tab\n"
"becomes too\n"
"longer\n"
"than the\n"
"container\n"
"then it\n"
"automatically\n"
"becomes\n"
"scrollable.\n"
"\n"
"\n"
"\n"
"Can you see it?");
label = lv_label_create(tab2);
lv_label_set_text(label, "Second tab");
label = lv_label_create(tab3);
lv_label_set_text(label, "Third tab");
lv_obj_scroll_to_view_recursive(label, LV_ANIM_ON);
}
#endif
# Create a Tab view object
tabview = lv.tabview(lv.scr_act(), lv.DIR.TOP, 50)
# Add 3 tabs (the tabs are page (lv_page) and can be scrolled
tab1 = tabview.add_tab("Tab 1")
tab2 = tabview.add_tab("Tab 2")
tab3 = tabview.add_tab("Tab 3")
# Add content to the tabs
label = lv.label(tab1)
label.set_text("""This the first tab
If the content
of a tab
becomes too
longer
than the
container
then it
automatically
becomes
scrollable.
Can you see it?""")
label = lv.label(tab2)
label.set_text("Second tab")
(continuesonnextpage)
6.3. Extrawidgets 778


--- Page 783 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label = lv.label(tab3)
label.set_text("Third tab");
label.scroll_to_view_recursive(lv.ANIM.ON)
Tabsontheleft,stylingandnoscrolling
#include "../../lv_examples.h"
#if LV_USE_TABVIEW && LV_BUILD_EXAMPLES
void lv_example_tabview_2(void)
{
/*Create a Tab view object*/
lv_obj_t * tabview;
tabview = lv_tabview_create(lv_scr_act(), LV_DIR_LEFT, 80);
lv_obj_set_style_bg_color(tabview, lv_palette_lighten(LV_PALETTE_RED, 2), 0);
lv_obj_t * tab_btns = lv_tabview_get_tab_btns(tabview);
lv_obj_set_style_bg_color(tab_btns, lv_palette_darken(LV_PALETTE_GREY, 3), 0);
lv_obj_set_style_text_color(tab_btns, lv_palette_lighten(LV_PALETTE_GREY, 5), 0);
lv_obj_set_style_border_side(tab_btns, LV_BORDER_SIDE_RIGHT, LV_PART_ITEMS | LV_
,→STATE_CHECKED);
/*Add 3 tabs (the tabs are page (lv_page) and can be scrolled*/
lv_obj_t * tab1 = lv_tabview_add_tab(tabview, "Tab 1");
lv_obj_t * tab2 = lv_tabview_add_tab(tabview, "Tab 2");
lv_obj_t * tab3 = lv_tabview_add_tab(tabview, "Tab 3");
lv_obj_t * tab4 = lv_tabview_add_tab(tabview, "Tab 4");
lv_obj_t * tab5 = lv_tabview_add_tab(tabview, "Tab 5");
lv_obj_set_style_bg_color(tab2, lv_palette_lighten(LV_PALETTE_AMBER, 3), 0);
lv_obj_set_style_bg_opa(tab2, LV_OPA_COVER, 0);
/*Add content to the tabs*/
lv_obj_t * label = lv_label_create(tab1);
lv_label_set_text(label, "First tab");
label = lv_label_create(tab2);
lv_label_set_text(label, "Second tab");
label = lv_label_create(tab3);
lv_label_set_text(label, "Third tab");
label = lv_label_create(tab4);
lv_label_set_text(label, "Forth tab");
label = lv_label_create(tab5);
lv_label_set_text(label, "Fifth tab");
lv_obj_clear_flag(lv_tabview_get_content(tabview), LV_OBJ_FLAG_SCROLLABLE);
}
#endif
6.3. Extrawidgets 779


--- Page 784 ---


LVGLDocumentation8.3
# Create a Tab view object
tabview = lv.tabview(lv.scr_act(), lv.DIR.LEFT, 80)
tabview.set_style_bg_color(lv.palette_lighten(lv.PALETTE.RED, 2), 0)
tab_btns = tabview.get_tab_btns()
tab_btns.set_style_bg_color(lv.palette_darken(lv.PALETTE.GREY, 3), 0)
tab_btns.set_style_text_color(lv.palette_lighten(lv.PALETTE.GREY, 5), 0)
tab_btns.set_style_border_side(lv.BORDER_SIDE.RIGHT, lv.PART.ITEMS | lv.STATE.CHECKED)
# Add 3 tabs (the tabs are page (lv_page) and can be scrolled
tab1 = tabview.add_tab("Tab 1")
tab2 = tabview.add_tab("Tab 2")
tab3 = tabview.add_tab("Tab 3")
tab4 = tabview.add_tab("Tab 4")
tab5 = tabview.add_tab("Tab 5")
tab2.set_style_bg_color(lv.palette_lighten(lv.PALETTE.AMBER, 3), 0)
tab2.set_style_bg_opa(lv.OPA.COVER, 0)
# Add content to the tabs
label = lv.label(tab1)
label.set_text("First tab")
label = lv.label(tab2)
label.set_text("Second tab")
label = lv.label(tab3)
label.set_text("Third tab")
label = lv.label(tab4)
label.set_text("Forth tab")
label = lv.label(tab5)
label.set_text("Fifth tab")
tabview.get_content().clear_flag(lv.obj.FLAG.SCROLLABLE)
API
Functions
lv_obj_t*lv_tabview_create(lv_obj_t*parent,lv_dir_ttab_pos,lv_coord_ttab_size)
lv_obj_t*lv_tabview_add_tab(lv_obj_t*tv,constchar*name)
voidlv_tabview_rename_tab(lv_obj_t*obj,uint32_ttab_id,constchar*new_name)
lv_obj_t*lv_tabview_get_content(lv_obj_t*tv)
lv_obj_t*lv_tabview_get_tab_btns(lv_obj_t*tv)
voidlv_tabview_set_act(lv_obj_t*obj,uint32_tid,lv_anim_enable_tanim_en)
uint16_tlv_tabview_get_tab_act(lv_obj_t*tv)
6.3. Extrawidgets 780


--- Page 785 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_tabview_class
structlv_tabview_t
PublicMembers
lv_obj_tobj
constchar**map
uint16_ttab_cnt
uint16_ttab_cur
lv_dir_ttab_pos
6.3.16 Tile view (lv_tileview)
Overview
TheTileviewisacontainerobjectwhoseelements(calledtiles)canbearrangedingridform. Ausercannavigatebetween
thetilesbyswiping. Anydirectionofswipingcanbedisabledonthetilesindividuallytonotallowmovingfromonetile
toanother.
IftheTileviewisscreensized,theuserinterfaceresembleswhatyoumayhaveseenonsmartwatches.
PartsandStyles
TheTileviewisbuiltfromanlv_objcontainerandlv_objtiles.
Thepartsandstylesworkthesameasforlv_obj.
Usage
Addatile
lv_tileview_add_tile(tileview, row_id, col_id, dir)createsanewtileontherow_idthrow
andcol_idthcolumn. dircanbeLV_DIR_LEFT/RIGHT/TOP/BOTTOM/HOR/VER/ALLorOR-edvaluesto
enablemovingtotheadjacenttilesintothegivendirectionbyswiping.
Thereturnedvalueisanlv_obj_t *onwhichthecontentofthetabcanbecreated.
6.3. Extrawidgets 781


--- Page 786 ---


LVGLDocumentation8.3
Changetile
TheTileviewcanscrolltoatilewithlv_obj_set_tile(tileview, tile_obj, LV_ANIM_ON/OFF)or
lv_obj_set_tile_id(tileviewv, col_id, row_id, LV_ANIM_ON/OFF);
Events
• LV_EVENT_VALUE_CHANGED Sent when a new tile loaded by scrolling.
lv_tileview_get_tile_act(tabview)canbeusedtogetcurrenttile.
Keys
KeysarenothandledbytheTileview.
LearnmoreaboutKeys.
Example
Tileviewwithcontent
#include "../../lv_examples.h"
#if LV_USE_TILEVIEW && LV_BUILD_EXAMPLES
/**
* Create a 2x2 tile view and allow scrolling only in an "L" shape.
* Demonstrate scroll chaining with a long list that
* scrolls the tile view when it can't be scrolled further.
*/
void lv_example_tileview_1(void)
{
lv_obj_t * tv = lv_tileview_create(lv_scr_act());
/*Tile1: just a label*/
lv_obj_t * tile1 = lv_tileview_add_tile(tv, 0, 0, LV_DIR_BOTTOM);
lv_obj_t * label = lv_label_create(tile1);
lv_label_set_text(label, "Scroll down");
lv_obj_center(label);
/*Tile2: a button*/
lv_obj_t * tile2 = lv_tileview_add_tile(tv, 0, 1, LV_DIR_TOP | LV_DIR_RIGHT);
lv_obj_t * btn = lv_btn_create(tile2);
label = lv_label_create(btn);
lv_label_set_text(label, "Scroll up or right");
lv_obj_set_size(btn, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_center(btn);
/*Tile3: a list*/
lv_obj_t * tile3 = lv_tileview_add_tile(tv, 1, 1, LV_DIR_LEFT);
lv_obj_t * list = lv_list_create(tile3);
lv_obj_set_size(list, LV_PCT(100), LV_PCT(100));
(continuesonnextpage)
6.3. Extrawidgets 782


--- Page 787 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_list_add_btn(list, NULL, "One");
lv_list_add_btn(list, NULL, "Two");
lv_list_add_btn(list, NULL, "Three");
lv_list_add_btn(list, NULL, "Four");
lv_list_add_btn(list, NULL, "Five");
lv_list_add_btn(list, NULL, "Six");
lv_list_add_btn(list, NULL, "Seven");
lv_list_add_btn(list, NULL, "Eight");
lv_list_add_btn(list, NULL, "Nine");
lv_list_add_btn(list, NULL, "Ten");
}
#endif
#
# Create a 2x2 tile view and allow scrolling only in an "L" shape.
# Demonstrate scroll chaining with a long list that
# scrolls the tile view when it can't be scrolled further.
#
tv = lv.tileview(lv.scr_act())
# Tile1: just a label
tile1 = tv.add_tile(0, 0, lv.DIR.BOTTOM)
label = lv.label(tile1)
label.set_text("Scroll down")
label.center()
# Tile2: a button
tile2 = tv.add_tile(0, 1, lv.DIR.TOP | lv.DIR.RIGHT)
btn = lv.btn(tile2)
label = lv.label(btn)
label.set_text("Scroll up or right")
btn.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
btn.center()
# Tile3: a list
tile3 = tv.add_tile(1, 1, lv.DIR.LEFT)
list = lv.list(tile3)
list.set_size(lv.pct(100), lv.pct(100))
list.add_btn(None, "One")
list.add_btn(None, "Two")
list.add_btn(None, "Three")
list.add_btn(None, "Four")
list.add_btn(None, "Five")
list.add_btn(None, "Six")
list.add_btn(None, "Seven")
list.add_btn(None, "Eight")
list.add_btn(None, "Nine")
list.add_btn(None, "Ten")
6.3. Extrawidgets 783


--- Page 788 ---


LVGLDocumentation8.3
API
Functions
lv_obj_t*lv_tileview_create(lv_obj_t*parent)
CreateaTileviewobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewtileview
Returns pointertothecreatedtileview
lv_obj_t*lv_tileview_add_tile(lv_obj_t*tv,uint8_tcol_id,uint8_trow_id,lv_dir_tdir)
voidlv_obj_set_tile(lv_obj_t*tv,lv_obj_t*tile_obj,lv_anim_enable_tanim_en)
voidlv_obj_set_tile_id(lv_obj_t*tv,uint32_tcol_id,uint32_trow_id,lv_anim_enable_tanim_en)
lv_obj_t*lv_tileview_get_tile_act(lv_obj_t*obj)
Variables
constlv_obj_class_tlv_tileview_class
constlv_obj_class_tlv_tileview_tile_class
structlv_tileview_t
PublicMembers
lv_obj_tobj
lv_obj_t*tile_act
structlv_tileview_tile_t
PublicMembers
lv_obj_tobj
lv_dir_tdir
6.3. Extrawidgets 784


--- Page 789 ---


LVGLDocumentation8.3
6.3.17 Window (lv_win)
Overview
TheWindowiscontainer-likeobjectbuiltfromaheaderwithtitleandbuttonsandacontentarea.
PartsandStyles
TheWindowisbuiltfromotherwidgetssoyoucanchecktheirdocumentationfordetails:
• Background: lv_obj
• Headeronthebackground: lv_obj
• Titleontheheader: lv_label
• Buttonsontheheader: lv_btn
• Contentareaonthebackground: lv_obj
Usage
CreateaWindow
lv_win_create(parent, header_height)createsaWindowwithanemptyheader.
Titleandbuttons
Anynumberof texts(but typicallyonlyone) canbe addedto the headerwith lv_win_add_title(win, "The
title").
Controlbuttonscanbeaddedtothewindow'sheaderwithlv_win_add_btn(win, icon, btn_width). icon
canbeanyimagesource,andbtn_widthisthewidthofthebutton.
The title and the buttons will be added in the order the functions are called. So adding a button, a text and two other
buttonswillresultinabuttonontheleft, atitle, and2buttonsontheright. Thewidthofthetitleissettotakeallthe
remainingspaceontheheader. Inotherwords: itpushestotherightallthebuttonsthatareaddedafterthetitle.
Gettheparts
lv_win_get_header(win)returnsapointertotheheader,lv_win_get_content(win)returnsapointerto
thecontentcontainertowhichthecontentofthewindowcanbeadded.
Events
No special events are sent by the windows, however events can be added manually to the return value of
lv_win_add_btn.
LearnmoreaboutEvents.
6.3. Extrawidgets 785


--- Page 790 ---


LVGLDocumentation8.3
Keys
NoKeysarehandledbythewindow.
LearnmoreaboutKeys.
Example
Simplewindow
#include "../../lv_examples.h"
#if LV_USE_WIN && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
LV_LOG_USER("Button %d clicked", (int)lv_obj_get_index(obj));
}
void lv_example_win_1(void)
{
lv_obj_t * win = lv_win_create(lv_scr_act(), 40);
lv_obj_t * btn;
btn = lv_win_add_btn(win, LV_SYMBOL_LEFT, 40);
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_win_add_title(win, "A title");
btn = lv_win_add_btn(win, LV_SYMBOL_RIGHT, 40);
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
btn = lv_win_add_btn(win, LV_SYMBOL_CLOSE, 60);
lv_obj_add_event_cb(btn, event_handler, LV_EVENT_CLICKED, NULL);
lv_obj_t * cont = lv_win_get_content(win); /*Content can be added here*/
lv_obj_t * label = lv_label_create(cont);
lv_label_set_text(label, "This is\n"
"a pretty\n"
"long text\n"
"to see how\n"
"the window\n"
"becomes\n"
"scrollable.\n"
"\n"
"\n"
"Some more\n"
"text to be\n"
"sure it\n"
"overflows. :)");
}
#endif
def event_handler(e):
code = e.get_code()
(continuesonnextpage)
6.3. Extrawidgets 786


--- Page 791 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
obj = e.get_target()
if code == lv.EVENT.CLICKED:
print("Button {:d} clicked".format(obj.get_child_id()))
win = lv.win(lv.scr_act(), 60)
btn1 = win.add_btn(lv.SYMBOL.LEFT, 40)
btn1.add_event_cb(event_handler, lv.EVENT.ALL, None)
win.add_title("A title")
btn2=win.add_btn(lv.SYMBOL.RIGHT, 40)
btn2.add_event_cb(event_handler, lv.EVENT.ALL, None)
btn3 = win.add_btn(lv.SYMBOL.CLOSE, 60)
btn3.add_event_cb(event_handler, lv.EVENT.ALL, None)
cont = win.get_content() # Content can be added here
label = lv.label(cont)
label.set_text("""This is
a pretty
long text
to see how
the window
becomes
scrollable.
We need
quite some text
and we will
even put
some more
text to be
sure it
overflows.
""")
API
Functions
lv_obj_t*lv_win_create(lv_obj_t*parent,lv_coord_theader_height)
lv_obj_t*lv_win_add_title(lv_obj_t*win,constchar*txt)
lv_obj_t*lv_win_add_btn(lv_obj_t*win,constvoid*icon,lv_coord_tbtn_w)
lv_obj_t*lv_win_get_header(lv_obj_t*win)
lv_obj_t*lv_win_get_content(lv_obj_t*win)
6.3. Extrawidgets 787


--- Page 792 ---


LVGLDocumentation8.3
Variables
constlv_obj_class_tlv_win_class
structlv_win_t
PublicMembers
lv_obj_tobj
6.3. Extrawidgets 788


--- Page 793 ---


CHAPTER
SEVEN
LAYOUTS
7.1 Flex
7.1.1 Overview
TheFlexbox(orFlexforshort)isasubsetofCSSFlexbox.
It can arrange items into rows or columns (tracks), handle wrapping, adjust the spacing between the items and tracks,
handlegrowtomaketheitem(s)filltheremainingspacewithrespecttomin/maxwidthandheight.
Tomakeanobjectflexcontainercalllv_obj_set_layout(obj, LV_LAYOUT_FLEX).
NotethattheflexlayoutfeatureofLVGLneedstobegloballyenabledwithLV_USE_FLEXinlv_conf.h.
7.1.2 Terms
• tracks: therowsorcolumns
• maindirection: roworcolumn,thedirectioninwhichtheitemsareplaced
• crossdirection: perpendiculartothemaindirection
• wrap: ifthereisnomorespaceinthetrackanewtrackisstarted
• grow: ifsetonanitemitwillgrowtofilltheremainingspaceonthetrack. Theavailablespacewillbedistributed
amongitemsrespectivetotheirgrowvalue(largervaluemeansmorespace)
• gap: thespacebetweentherowsandcolumnsortheitemsonatrack
7.1.3 Simple interface
WiththefollowingfunctionsyoucansetaFlexlayoutonanyparent.
789


--- Page 794 ---


LVGLDocumentation8.3
Flexflow
lv_obj_set_flex_flow(obj, flex_flow)
Thepossiblevaluesforflex_floware:
• LV_FLEX_FLOW_ROWPlacethechildreninarowwithoutwrapping
• LV_FLEX_FLOW_COLUMNPlacethechildreninacolumnwithoutwrapping
• LV_FLEX_FLOW_ROW_WRAPPlacethechildreninarowwithwrapping
• LV_FLEX_FLOW_COLUMN_WRAPPlacethechildreninacolumnwithwrapping
• LV_FLEX_FLOW_ROW_REVERSEPlacethechildreninarowwithoutwrappingbutinreversedorder
• LV_FLEX_FLOW_COLUMN_REVERSEPlacethechildreninacolumnwithoutwrappingbutinreversedorder
• LV_FLEX_FLOW_ROW_WRAP_REVERSEPlacethechildreninarowwithwrappingbutinreversedorder
• LV_FLEX_FLOW_COLUMN_WRAP_REVERSE Place the children in a column with wrapping but in reversed
order
Flexalign
To manage the placement of the children use lv_obj_set_flex_align(obj, main_place,
cross_place, track_cross_place)
• main_placedetermineshowtodistributetheitemsintheirtrackonthemainaxis. E.g. flushtheitemstothe
rightonLV_FLEX_FLOW_ROW_WRAP.(It'scalledjustify-contentinCSS)
• cross_place determines how to distribute the items in their track on the cross axis. E.g. if the items have
differentheightplacethemtothebottomofthetrack. (It'scalledalign-itemsinCSS)
• track_cross_placedetermineshowtodistributethetracks(It'scalledalign-contentinCSS)
Thepossiblevaluesare:
• LV_FLEX_ALIGN_STARTmeansleftonahorizontallyandtopvertically. (default)
• LV_FLEX_ALIGN_ENDmeansrightonahorizontallyandbottomvertically
• LV_FLEX_ALIGN_CENTERsimplycenter
• LV_FLEX_ALIGN_SPACE_EVENLYitemsaredistributedsothatthespacingbetweenanytwoitems(andthe
spacetotheedges)isequal. Doesnotapplytotrack_cross_place.
• LV_FLEX_ALIGN_SPACE_AROUND items are evenly distributed in the track with equal space around them.
Notethatvisuallythespacesaren’tequal,sincealltheitemshaveequalspaceonbothsides. Thefirstitemwillhave
oneunitofspaceagainstthecontaineredge,buttwounitsofspacebetweenthenextitembecausethatnextitem
hasitsownspacingthatapplies. Notappliestotrack_cross_place.
• LV_FLEX_ALIGN_SPACE_BETWEEN items are evenly distributed in the track: first item is on the start line,
lastitemontheendline. Notappliestotrack_cross_place.
7.1. Flex 790


--- Page 795 ---


LVGLDocumentation8.3
Flexgrow
Flex grow can be used to make one or more children fill the available space on the track. When more children have
growparameters,theavailablespacewillbedistributedproportionallytothegrowvalues. Forexample,thereis400px
remainingspaceand4objectswithgrow:
• Awithgrow=1
• Bwithgrow=1
• Cwithgrow=2
AandBwillhave100pxsize,andCwillhave200pxsize.
Flexgrowcanbesetonachildwithlv_obj_set_flex_grow(child, value). valueneedstobe>1or0
todisablegrowonthechild.
7.1.4 Style interface
AlltheFlex-relatedvaluesarestylepropertiesunderthehoodandyoucanusethemsimilarlytoanyotherstyleproperty.
Thefollowingflexrelatedstylepropertiesexist:
• FLEX_FLOW
• FLEX_MAIN_PLACE
• FLEX_CROSS_PLACE
• FLEX_TRACK_PLACE
• FLEX_GROW
Internalpadding
Tomodifytheminimumspaceflexboxinsertsbetweenobjects,thefollowingpropertiescanbesetontheflexcontainer
style:
• pad_rowSetsthepaddingbetweentherows.
• pad_columnSetsthepaddingbetweenthecolumns.
These can for example be used if you don't want any padding between your objects:
lv_style_set_pad_column(&row_container_style,0)
7.1.5 Other features
RTL
IfthebasedirectionofthecontainerissettheLV_BASE_DIR_RTLthemeaningofLV_FLEX_ALIGN_STARTand
LV_FLEX_ALIGN_ENDisswappedonROWlayouts. I.e. STARTwillmeanright.
TheitemsonROWlayouts,andtracksofCOLUMNlayoutswillbeplacedfromrighttoleft.
7.1. Flex 791


--- Page 796 ---


LVGLDocumentation8.3
Newtrack
You can force Flex to put an item into a new line with lv_obj_add_flag(child,
LV_OBJ_FLAG_FLEX_IN_NEW_TRACK).
7.1.6 Example
Asimplerowandacolumnlayoutwithflexbox
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* A simple row and a column layout with flexbox
*/
void lv_example_flex_1(void)
{
/*Create a container with ROW flex direction*/
lv_obj_t * cont_row = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont_row, 300, 75);
lv_obj_align(cont_row, LV_ALIGN_TOP_MID, 0, 5);
lv_obj_set_flex_flow(cont_row, LV_FLEX_FLOW_ROW);
/*Create a container with COLUMN flex direction*/
lv_obj_t * cont_col = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont_col, 200, 150);
lv_obj_align_to(cont_col, cont_row, LV_ALIGN_OUT_BOTTOM_MID, 0, 5);
lv_obj_set_flex_flow(cont_col, LV_FLEX_FLOW_COLUMN);
uint32_t i;
for(i = 0; i < 10; i++) {
lv_obj_t * obj;
lv_obj_t * label;
/*Add items to the row*/
obj = lv_btn_create(cont_row);
lv_obj_set_size(obj, 100, LV_PCT(100));
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "Item: %"LV_PRIu32, i);
lv_obj_center(label);
/*Add items to the column*/
obj = lv_btn_create(cont_col);
lv_obj_set_size(obj, LV_PCT(100), LV_SIZE_CONTENT);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "Item: %"LV_PRIu32, i);
lv_obj_center(label);
}
}
#endif
7.1. Flex 792


--- Page 797 ---


LVGLDocumentation8.3
#
# A simple row and a column layout with flexbox
#
# Create a container with ROW flex direction
cont_row = lv.obj(lv.scr_act())
cont_row.set_size(300, 75)
cont_row.align(lv.ALIGN.TOP_MID, 0, 5)
cont_row.set_flex_flow(lv.FLEX_FLOW.ROW)
# Create a container with COLUMN flex direction
cont_col = lv.obj(lv.scr_act())
cont_col.set_size(200, 150)
cont_col.align_to(cont_row, lv.ALIGN.OUT_BOTTOM_MID, 0, 5)
cont_col.set_flex_flow(lv.FLEX_FLOW.COLUMN)
for i in range(10):
# Add items to the row
obj = lv.btn(cont_row)
obj.set_size(100, lv.pct(100))
label = lv.label(obj)
label.set_text("Item: {:d}".format(i))
label.center()
# Add items to the column
obj = lv.btn(cont_col)
obj.set_size(lv.pct(100), lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text("Item: {:d}".format(i))
label.center()
Arrangeitemsinrowswithwrapandevenspacing
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* Arrange items in rows with wrap and place the items to get even space around them.
*/
void lv_example_flex_2(void)
{
static lv_style_t style;
lv_style_init(&style);
lv_style_set_flex_flow(&style, LV_FLEX_FLOW_ROW_WRAP);
lv_style_set_flex_main_place(&style, LV_FLEX_ALIGN_SPACE_EVENLY);
lv_style_set_layout(&style, LV_LAYOUT_FLEX);
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_add_style(cont, &style, 0);
(continuesonnextpage)
7.1. Flex 793


--- Page 798 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
uint32_t i;
for(i = 0; i < 8; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 70, LV_SIZE_CONTENT);
lv_obj_add_flag(obj, LV_OBJ_FLAG_CHECKABLE);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
}
#endif
#
# Arrange items in rows with wrap and place the items to get even space around them.
#
style = lv.style_t()
style.init()
style.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
style.set_flex_main_place(lv.FLEX_ALIGN.SPACE_EVENLY)
style.set_layout(lv.LAYOUT_FLEX.value)
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.add_style(style, 0)
for i in range(8):
obj = lv.obj(cont)
obj.set_size(70, lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text("{:d}".format(i))
label.center()
Demonstrateflexgrow
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* Demonstrate flex grow.
*/
void lv_example_flex_3(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW);
lv_obj_t * obj;
obj = lv_obj_create(cont);
(continuesonnextpage)
7.1. Flex 794


--- Page 799 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(obj, 40, 40); /*Fix size*/
obj = lv_obj_create(cont);
lv_obj_set_height(obj, 40);
lv_obj_set_flex_grow(obj, 1); /*1 portion from the free space*/
obj = lv_obj_create(cont);
lv_obj_set_height(obj, 40);
lv_obj_set_flex_grow(obj, 2); /*2 portion from the free space*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, 40, 40); /*Fix size. It is flushed to the right by␣
,→the "grow" items*/
}
#endif
#
# Demonstrate flex grow.
#
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW)
obj = lv.obj(cont)
obj.set_size(40, 40) # Fix size
obj = lv.obj(cont)
obj.set_height(40)
obj.set_flex_grow(1) # 1 portion from the free space
obj = lv.obj(cont)
obj.set_height(40)
obj.set_flex_grow(2) # 2 portion from the free space
obj = lv.obj(cont)
obj.set_size(40, 40) # Fix size. It is flushed to the right by the "grow"␣
,→items
Demonstrateflexgrow.
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* Reverse the order of flex items
*/
void lv_example_flex_4(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
(continuesonnextpage)
7.1. Flex 795


--- Page 800 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_COLUMN_REVERSE);
uint32_t i;
for(i = 0; i < 6; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 100, 50);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "Item: %"LV_PRIu32, i);
lv_obj_center(label);
}
}
#endif
#
# Reverse the order of flex items
#
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.COLUMN_REVERSE)
for i in range(6):
obj = lv.obj(cont)
obj.set_size(100, 50)
label = lv.label(obj)
label.set_text("Item: " + str(i))
label.center()
Demonstratecolumnandrowgapstyleproperties
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
static void row_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_row(obj, v, 0);
}
static void column_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_column(obj, v, 0);
}
/**
* Demonstrate the effect of column and row gap style properties
*/
void lv_example_flex_5(void)
{
(continuesonnextpage)
7.1. Flex 796


--- Page 801 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW_WRAP);
uint32_t i;
for(i = 0; i < 9; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 70, LV_SIZE_CONTENT);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, cont);
lv_anim_set_values(&a, 0, 10);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_exec_cb(&a, row_gap_anim);
lv_anim_set_time(&a, 500);
lv_anim_set_playback_time(&a, 500);
lv_anim_start(&a);
lv_anim_set_exec_cb(&a, column_gap_anim);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 3000);
lv_anim_start(&a);
}
#endif
def row_gap_anim(obj, v):
obj.set_style_pad_row(v, 0)
def column_gap_anim(obj, v):
obj.set_style_pad_column(v, 0)
#
# Demonstrate the effect of column and row gap style properties
#
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
for i in range(9):
obj = lv.obj(cont)
obj.set_size(70, lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text(str(i))
(continuesonnextpage)
7.1. Flex 797


--- Page 802 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
label.center()
a_row = lv.anim_t()
a_row.init()
a_row.set_var(cont)
a_row.set_values(0, 10)
a_row.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_row.set_time(500)
a_row.set_playback_time(500)
a_row.set_custom_exec_cb(lambda a,val: row_gap_anim(cont,val))
lv.anim_t.start(a_row)
a_col = lv.anim_t()
a_col.init()
a_col.set_var(cont)
a_col.set_values(0, 10)
a_col.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_col.set_time(3000)
a_col.set_playback_time(3000)
a_col.set_custom_exec_cb(lambda a,val: column_gap_anim(cont,val))
lv.anim_t.start(a_col)
RTLbasedirectionchangesorderoftheitems
#include "../../lv_examples.h"
#if LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* RTL base direction changes order of the items.
* Also demonstrate how horizontal scrolling works with RTL.
*/
void lv_example_flex_6(void)
{
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_style_base_dir(cont, LV_BASE_DIR_RTL, 0);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_ROW_WRAP);
uint32_t i;
for(i = 0; i < 20; i++) {
lv_obj_t * obj = lv_obj_create(cont);
lv_obj_set_size(obj, 70, LV_SIZE_CONTENT);
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%"LV_PRIu32, i);
lv_obj_center(label);
}
}
#endif
7.1. Flex 798


--- Page 803 ---


LVGLDocumentation8.3
#
# RTL base direction changes order of the items.
# Also demonstrate how horizontal scrolling works with RTL.
#
cont = lv.obj(lv.scr_act())
cont.set_style_base_dir(lv.BASE_DIR.RTL,0)
cont.set_size(300, 220)
cont.center()
cont.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
for i in range(20):
obj = lv.obj(cont)
obj.set_size(70, lv.SIZE.CONTENT)
label = lv.label(obj)
label.set_text(str(i))
label.center()
7.1.7 API
Enums
enumlv_flex_align_t
Values:
enumeratorLV_FLEX_ALIGN_START
enumeratorLV_FLEX_ALIGN_END
enumeratorLV_FLEX_ALIGN_CENTER
enumeratorLV_FLEX_ALIGN_SPACE_EVENLY
enumeratorLV_FLEX_ALIGN_SPACE_AROUND
enumeratorLV_FLEX_ALIGN_SPACE_BETWEEN
enumlv_flex_flow_t
Values:
enumeratorLV_FLEX_FLOW_ROW
enumeratorLV_FLEX_FLOW_COLUMN
enumeratorLV_FLEX_FLOW_ROW_WRAP
7.1. Flex 799


--- Page 804 ---


LVGLDocumentation8.3
enumeratorLV_FLEX_FLOW_ROW_REVERSE
enumeratorLV_FLEX_FLOW_ROW_WRAP_REVERSE
enumeratorLV_FLEX_FLOW_COLUMN_WRAP
enumeratorLV_FLEX_FLOW_COLUMN_REVERSE
enumeratorLV_FLEX_FLOW_COLUMN_WRAP_REVERSE
Functions
LV_EXPORT_CONST_INT(LV_OBJ_FLAG_FLEX_IN_NEW_TRACK)
voidlv_flex_init(void)
Initializeaflexlayoutthedefaultvalues
Parameters flex--pointertoaflexlayoutdescriptor
voidlv_obj_set_flex_flow(lv_obj_t*obj,lv_flex_flow_tflow)
Sethottheitemshouldflow
Parameters
• flex--pointertoaflexlayoutdescriptor
• flow--anelementoflv_flex_flow_t.
voidlv_obj_set_flex_align(lv_obj_t*obj,lv_flex_align_tmain_place,lv_flex_align_tcross_place,
lv_flex_align_ttrack_cross_place)
Sethowtoplace(wheretoalign)theitemsandtracks
Parameters
• flex--pointer: toaflexlayoutdescriptor
• main_place -- where to place the items on main axis (in their track). Any value of
lv_flex_align_t.
• cross_place -- where to place the item in their track on the cross axis.
LV_FLEX_ALIGN_START/END/CENTER
• track_place -- where to place the tracks in the cross direction. Any value of
lv_flex_align_t.
voidlv_obj_set_flex_grow(lv_obj_t*obj,uint8_tgrow)
Setsthewidthorheight(onmainaxis)togrowtheobjectinorderfillthefreespace
Parameters
• obj--pointertoanobject. Theparentmusthaveflexlayoutelsenothingwillhappen.
• grow--avaluetosethowmuchfreespacetotakeproportionallytoothergrowingitems.
voidlv_style_set_flex_flow(lv_style_t*style,lv_flex_flow_tvalue)
voidlv_style_set_flex_main_place(lv_style_t*style,lv_flex_align_tvalue)
7.1. Flex 800


--- Page 805 ---


LVGLDocumentation8.3
voidlv_style_set_flex_cross_place(lv_style_t*style,lv_flex_align_tvalue)
voidlv_style_set_flex_track_place(lv_style_t*style,lv_flex_align_tvalue)
voidlv_style_set_flex_grow(lv_style_t*style,uint8_tvalue)
voidlv_obj_set_style_flex_flow(lv_obj_t*obj,lv_flex_flow_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_flex_main_place(lv_obj_t*obj,lv_flex_align_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_flex_cross_place(lv_obj_t*obj,lv_flex_align_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_flex_track_place(lv_obj_t*obj,lv_flex_align_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_flex_grow(lv_obj_t*obj,uint8_tvalue,lv_style_selector_tselector)
staticinlinelv_flex_flow_tlv_obj_get_style_flex_flow(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_flex_align_tlv_obj_get_style_flex_main_place(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_flex_align_tlv_obj_get_style_flex_cross_place(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_flex_align_tlv_obj_get_style_flex_track_place(constlv_obj_t*obj,uint32_tpart)
staticinlineuint8_tlv_obj_get_style_flex_grow(constlv_obj_t*obj,uint32_tpart)
Variables
uint16_tLV_LAYOUT_FLEX
lv_style_prop_tLV_STYLE_FLEX_FLOW
lv_style_prop_tLV_STYLE_FLEX_MAIN_PLACE
lv_style_prop_tLV_STYLE_FLEX_CROSS_PLACE
lv_style_prop_tLV_STYLE_FLEX_TRACK_PLACE
lv_style_prop_tLV_STYLE_FLEX_GROW
7.1. Flex 801


--- Page 806 ---


LVGLDocumentation8.3
7.2 Grid
7.2.1 Overview
TheGridlayoutisasubsetofCSSFlexbox.
Itcanarrangeitemsintoa2D"table"thathasrowsorcolumns(tracks). Theitemcanspanthroughmultiplecolumnsor
rows. Thetrack'ssizecanbesetinpixel,tothelargestitem(LV_GRID_CONTENT)orin"Freeunit"(FR)todistribute
thefreespaceproportionally.
Tomakeanobjectagridcontainercalllv_obj_set_layout(obj, LV_LAYOUT_GRID).
NotethatthegridlayoutfeatureofLVGLneedstobegloballyenabledwithLV_USE_GRIDinlv_conf.h.
7.2.2 Terms
• tracks: therowsorcolumns
• freeunit(FR):ifsetontrack'ssizeissetinFRitwillgrowtofilltheremainingspaceontheparent.
• gap: thespacebetweentherowsandcolumnsortheitemsonatrack
7.2.3 Simple interface
WiththefollowingfunctionsyoucaneasilysetaGridlayoutonanyparent.
Griddescriptors
Firstyouneedtodescribethesizeofrowsandcolumns. Itcanbedonebydeclaring2arraysandthetracksizesinthem.
ThelastelementmustbeLV_GRID_TEMPLATE_LAST.
Forexample:
static lv_coord_t column_dsc[] = {100, 400, LV_GRID_TEMPLATE_LAST}; /*2 columns␣
,→with 100 and 400 ps width*/
static lv_coord_t row_dsc[] = {100, 100, 100, LV_GRID_TEMPLATE_LAST}; /*3 100 px tall␣
,→rows*/
Tosetthedescriptorsonaparentuselv_obj_set_grid_dsc_array(obj, col_dsc, row_dsc).
Besidessimplesettingsthesizeinpixelyoucanusetwospecialvalues:
• LV_GRID_CONTENTsetthewidthtothelargestchildrenonthistrack
• LV_GRID_FR(X) tell what portion of the remaining space should be used by this track. Larger value means
largerspace.
7.2. Grid 802


--- Page 807 ---


LVGLDocumentation8.3
Griditems
Bydefault,thechildrenarenotaddedtothegrid. Theyneedtobeaddedmanuallytoacell.
To do this call lv_obj_set_grid_cell(child, column_align, column_pos, column_span,
row_align, row_pos, row_span).
column_alignandrow_aligndeterminehowtoalignthechildreninitscell. Thepossiblevaluesare:
• LV_GRID_ALIGN_STARTmeansleftonahorizontallyandtopvertically. (default)
• LV_GRID_ALIGN_ENDmeansrightonahorizontallyandbottomvertically
• LV_GRID_ALIGN_CENTERsimplycenter
colum_posandrow_posmeansthezerobasedindexofthecellintotheitemshouldbeplaced.
colum_spanandrow_spanmeanshowmanytracksshouldtheiteminvolvefromthestartcell. Mustbe>1.
Gridalign
Iftherearesomeemptyspacethetrackcanbealignedseveralways:
• LV_GRID_ALIGN_STARTmeansleftonahorizontallyandtopvertically. (default)
• LV_GRID_ALIGN_ENDmeansrightonahorizontallyandbottomvertically
• LV_GRID_ALIGN_CENTERsimplycenter
• LV_GRID_ALIGN_SPACE_EVENLYitemsaredistributedsothatthespacingbetweenanytwoitems(andthe
spacetotheedges)isequal. Notappliestotrack_cross_place.
• LV_GRID_ALIGN_SPACE_AROUND items are evenly distributed in the track with equal space around them.
Notethatvisuallythespacesaren’tequal,sincealltheitemshaveequalspaceonbothsides. Thefirstitemwillhave
oneunitofspaceagainstthecontaineredge,buttwounitsofspacebetweenthenextitembecausethatnextitem
hasitsownspacingthatapplies. Notappliestotrack_cross_place.
• LV_GRID_ALIGN_SPACE_BETWEEN items are evenly distributed in the track: first item is on the start line,
lastitemontheendline. Notappliestotrack_cross_place.
Tosetthetrack'salignmentuselv_obj_set_grid_align(obj, column_align, row_align).
7.2.4 Style interface
AlltheGridrelatedvaluesarestylepropertiesunderthehoodandyoucanusethemsimilarlytoanyotherstyleproperties.
ThefollowingGridrelatedstylepropertiesexist:
• GRID_COLUMN_DSC_ARRAY
• GRID_ROW_DSC_ARRAY
• GRID_COLUMN_ALIGN
• GRID_ROW_ALIGN
• GRID_CELL_X_ALIGN
• GRID_CELL_COLUMN_POS
• GRID_CELL_COLUMN_SPAN
• GRID_CELL_Y_ALIGN
• GRID_CELL_ROW_POS
7.2. Grid 803


--- Page 808 ---


LVGLDocumentation8.3
• GRID_CELL_ROW_SPAN
Internalpadding
TomodifytheminimumspaceGridinsertsbetweenobjects, thefollowingpropertiescanbesetontheGridcontainer
style:
• pad_rowSetsthepaddingbetweentherows.
• pad_columnSetsthepaddingbetweenthecolumns.
7.2.5 Other features
RTL
IfthebasedirectionofthecontainerissettoLV_BASE_DIR_RTL,themeaningofLV_GRID_ALIGN_STARTand
LV_GRID_ALIGN_ENDisswapped. I.e. STARTwillmeanright-most.
Thecolumnswillbeplacedfromrighttoleft.
7.2.6 Example
Asimplegrid
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* A simple grid
*/
void lv_example_grid_1(void)
{
static lv_coord_t col_dsc[] = {70, 70, 70, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {50, 50, 50, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_style_grid_column_dsc_array(cont, col_dsc, 0);
lv_obj_set_style_grid_row_dsc_array(cont, row_dsc, 0);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_layout(cont, LV_LAYOUT_GRID);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
obj = lv_btn_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
(continuesonnextpage)
7.2. Grid 804


--- Page 809 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "c%d, r%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# A simple grid
#
col_dsc = [70, 70, 70, lv.GRID_TEMPLATE.LAST]
row_dsc = [50, 50, 50, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_style_grid_column_dsc_array(col_dsc, 0)
cont.set_style_grid_row_dsc_array(row_dsc, 0)
cont.set_size(300, 220)
cont.center()
cont.set_layout(lv.LAYOUT_GRID.value)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.btn(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("c" +str(col) + "r" +str(row))
label.center()
Demonstratecellplacementandspan
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate cell placement and span
*/
void lv_example_grid_2(void)
{
static lv_coord_t col_dsc[] = {70, 70, 70, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {50, 50, 50, LV_GRID_TEMPLATE_LAST};
(continuesonnextpage)
7.2. Grid 805


--- Page 810 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_t * label;
lv_obj_t * obj;
/*Cell to 0;0 and align to to the start (left/top) horizontally and vertically␣
,→too*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_START, 0, 1,
LV_GRID_ALIGN_START, 0, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c0, r0");
/*Cell to 1;0 and align to to the start (left) horizontally and center vertically␣
,→too*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_START, 1, 1,
LV_GRID_ALIGN_CENTER, 0, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c1, r0");
/*Cell to 2;0 and align to to the start (left) horizontally and end (bottom)␣
,→vertically too*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_START, 2, 1,
LV_GRID_ALIGN_END, 0, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c2, r0");
/*Cell to 1;1 but 2 column wide (span = 2).Set width and height to stretched.*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, 1, 2,
LV_GRID_ALIGN_STRETCH, 1, 1);
label = lv_label_create(obj);
lv_label_set_text(label, "c1-2, r1");
/*Cell to 0;1 but 2 rows tall (span = 2).Set width and height to stretched.*/
obj = lv_obj_create(cont);
lv_obj_set_size(obj, LV_SIZE_CONTENT, LV_SIZE_CONTENT);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, 0, 1,
LV_GRID_ALIGN_STRETCH, 1, 2);
label = lv_label_create(obj);
lv_label_set_text(label, "c0\nr1-2");
}
#endif
#
(continuesonnextpage)
7.2. Grid 806


--- Page 811 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Demonstrate cell placement and span
#
col_dsc = [70, 70, 70, lv.GRID_TEMPLATE.LAST]
row_dsc = [50, 50, 50, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_grid_dsc_array(col_dsc, row_dsc)
cont.set_size(300, 220)
cont.center()
# Cell to 0;0 and align to the start (left/top) horizontally and vertically too
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.START, 0, 1,
lv.GRID_ALIGN.START, 0, 1)
label = lv.label(obj)
label.set_text("c0, r0")
# Cell to 1;0 and align to the start (left) horizontally and center vertically too
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.START, 1, 1,
lv.GRID_ALIGN.CENTER, 0, 1)
label = lv.label(obj)
label.set_text("c1, r0")
# Cell to 2;0 and align to the start (left) horizontally and end (bottom) vertically␣
,→too
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.START, 2, 1,
lv.GRID_ALIGN.END, 0, 1)
label = lv.label(obj)
label.set_text("c2, r0")
# Cell to 1;1 but 2 column wide (span = 2).Set width and height to stretched.
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, 1, 2,
lv.GRID_ALIGN.STRETCH, 1, 1)
label = lv.label(obj)
label.set_text("c1-2, r1")
# Cell to 0;1 but 2 rows tall (span = 2).Set width and height to stretched.
obj = lv.obj(cont)
obj.set_size(lv.SIZE.CONTENT, lv.SIZE.CONTENT)
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, 0, 1,
lv.GRID_ALIGN.STRETCH, 1, 2)
label = lv.label(obj)
label.set_text("c0\nr1-2")
7.2. Grid 807


--- Page 812 ---


LVGLDocumentation8.3
Demonstrategrid's"freeunit"
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate grid's "free unit"
*/
void lv_example_grid_3(void)
{
/*Column 1: fix width 60 px
*Column 2: 1 unit from the remaining free space
*Column 3: 2 unit from the remaining free space*/
static lv_coord_t col_dsc[] = {60, LV_GRID_FR(1), LV_GRID_FR(2), LV_GRID_TEMPLATE_
,→LAST};
/*Row 1: fix width 50 px
*Row 2: 1 unit from the remaining free space
*Row 3: fix width 50 px*/
static lv_coord_t row_dsc[] = {50, LV_GRID_FR(1), 50, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
obj = lv_obj_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# Demonstrate grid's "free unit"
#
# Column 1: fix width 60 px
# Column 2: 1 unit from the remaining free space
# Column 3: 2 unit from the remaining free space
col_dsc = [60, lv.grid_fr(1), lv.grid_fr(2), lv.GRID_TEMPLATE.LAST]
(continuesonnextpage)
7.2. Grid 808


--- Page 813 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Row 1: fix width 60 px
# Row 2: 1 unit from the remaining free space
# Row 3: fix width 60 px
row_dsc = [40, lv.grid_fr(1), 40, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_grid_dsc_array(col_dsc, row_dsc)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("%d,%d"%(col, row))
label.center()
Demonstratetrackplacement
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate track placement
*/
void lv_example_grid_4(void)
{
static lv_coord_t col_dsc[] = {60, 60, 60, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {45, 45, 45, LV_GRID_TEMPLATE_LAST};
/*Add space between the columns and move the rows to the bottom (end)*/
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_grid_align(cont, LV_GRID_ALIGN_SPACE_BETWEEN, LV_GRID_ALIGN_END);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
(continuesonnextpage)
7.2. Grid 809


--- Page 814 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
uint8_t row = i / 3;
obj = lv_obj_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# Demonstrate track placement
#
col_dsc = [60, 60, 60, lv.GRID_TEMPLATE.LAST]
row_dsc = [40, 40, 40, lv.GRID_TEMPLATE.LAST]
# Add space between the columns and move the rows to the bottom (end)
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_grid_align(lv.GRID_ALIGN.SPACE_BETWEEN, lv.GRID_ALIGN.END)
cont.set_grid_dsc_array(col_dsc, row_dsc)
cont.set_size(300, 220)
cont.center()
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("{:d}{:d}".format(col, row))
label.center()
7.2. Grid 810


--- Page 815 ---


LVGLDocumentation8.3
Demonstratecolumnandrowgap
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
static void row_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_row(obj, v, 0);
}
static void column_gap_anim(void * obj, int32_t v)
{
lv_obj_set_style_pad_column(obj, v, 0);
}
/**
* Demonstrate column and row gap
*/
void lv_example_grid_5(void)
{
/*60x60 cells*/
static lv_coord_t col_dsc[] = {60, 60, 60, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {45, 45, 45, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
obj = lv_obj_create(cont);
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, cont);
lv_anim_set_values(&a, 0, 10);
lv_anim_set_repeat_count(&a, LV_ANIM_REPEAT_INFINITE);
lv_anim_set_exec_cb(&a, row_gap_anim);
lv_anim_set_time(&a, 500);
lv_anim_set_playback_time(&a, 500);
lv_anim_start(&a);
(continuesonnextpage)
7.2. Grid 811


--- Page 816 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_anim_set_exec_cb(&a, column_gap_anim);
lv_anim_set_time(&a, 3000);
lv_anim_set_playback_time(&a, 3000);
lv_anim_start(&a);
}
#endif
def row_gap_anim(obj, v):
obj.set_style_pad_row(v, 0)
def column_gap_anim(obj, v):
obj.set_style_pad_column(v, 0)
#
# Demonstrate column and row gap
#
# 60x60 cells
col_dsc = [60, 60, 60, lv.GRID_TEMPLATE.LAST]
row_dsc = [40, 40, 40, lv.GRID_TEMPLATE.LAST]
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_grid_dsc_array(col_dsc, row_dsc)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("{:d},{:d}".format(col, row))
label.center()
a_row = lv.anim_t()
a_row.init()
a_row.set_var(cont)
a_row.set_values(0, 10)
a_row.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_row.set_time(500)
a_row.set_playback_time(500)
a_row. set_custom_exec_cb(lambda a,val: row_gap_anim(cont,val))
lv.anim_t.start(a_row)
a_col = lv.anim_t()
a_col.init()
a_col.set_var(cont)
a_col.set_values(0, 10)
a_col.set_repeat_count(lv.ANIM_REPEAT.INFINITE)
a_col.set_time(500)
(continuesonnextpage)
7.2. Grid 812


--- Page 817 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
a_col.set_playback_time(500)
a_col. set_custom_exec_cb(lambda a,val: column_gap_anim(cont,val))
lv.anim_t.start(a_col)
DemonstrateRTLdirectionongrid
#include "../../lv_examples.h"
#if LV_USE_GRID && LV_BUILD_EXAMPLES
/**
* Demonstrate RTL direction on grid
*/
void lv_example_grid_6(void)
{
static lv_coord_t col_dsc[] = {60, 60, 60, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {45, 45, 45, LV_GRID_TEMPLATE_LAST};
/*Create a container with grid*/
lv_obj_t * cont = lv_obj_create(lv_scr_act());
lv_obj_set_size(cont, 300, 220);
lv_obj_center(cont);
lv_obj_set_style_base_dir(cont, LV_BASE_DIR_RTL, 0);
lv_obj_set_grid_dsc_array(cont, col_dsc, row_dsc);
lv_obj_t * label;
lv_obj_t * obj;
uint32_t i;
for(i = 0; i < 9; i++) {
uint8_t col = i % 3;
uint8_t row = i / 3;
obj = lv_obj_create(cont);
/*Stretch the cell horizontally and vertically too
*Set span to 1 to make the cell 1 column/row sized*/
lv_obj_set_grid_cell(obj, LV_GRID_ALIGN_STRETCH, col, 1,
LV_GRID_ALIGN_STRETCH, row, 1);
label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d,%d", col, row);
lv_obj_center(label);
}
}
#endif
#
# Demonstrate RTL direction on grid
#
col_dsc = [60, 60, 60, lv.GRID_TEMPLATE.LAST]
row_dsc = [40, 40, 40, lv.GRID_TEMPLATE.LAST]
(continuesonnextpage)
7.2. Grid 813


--- Page 818 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# Create a container with grid
cont = lv.obj(lv.scr_act())
cont.set_size(300, 220)
cont.center()
cont.set_style_base_dir(lv.BASE_DIR.RTL,0)
cont.set_grid_dsc_array(col_dsc, row_dsc)
for i in range(9):
col = i % 3
row = i // 3
obj = lv.obj(cont)
# Stretch the cell horizontally and vertically too
# Set span to 1 to make the cell 1 column/row sized
obj.set_grid_cell(lv.GRID_ALIGN.STRETCH, col, 1,
lv.GRID_ALIGN.STRETCH, row, 1)
label = lv.label(obj)
label.set_text("{:d},{:d}".format(col, row))
label.center()
7.2.7 API
Enums
enumlv_grid_align_t
Values:
enumeratorLV_GRID_ALIGN_START
enumeratorLV_GRID_ALIGN_CENTER
enumeratorLV_GRID_ALIGN_END
enumeratorLV_GRID_ALIGN_STRETCH
enumeratorLV_GRID_ALIGN_SPACE_EVENLY
enumeratorLV_GRID_ALIGN_SPACE_AROUND
enumeratorLV_GRID_ALIGN_SPACE_BETWEEN
7.2. Grid 814


--- Page 819 ---


LVGLDocumentation8.3
Functions
LV_EXPORT_CONST_INT(LV_GRID_CONTENT)
LV_EXPORT_CONST_INT(LV_GRID_TEMPLATE_LAST)
voidlv_grid_init(void)
voidlv_obj_set_grid_dsc_array(lv_obj_t*obj,constlv_coord_tcol_dsc[],constlv_coord_trow_dsc[])
voidlv_obj_set_grid_align(lv_obj_t*obj,lv_grid_align_tcolumn_align,lv_grid_align_trow_align)
voidlv_obj_set_grid_cell(lv_obj_t*obj,lv_grid_align_tcolumn_align,uint8_tcol_pos,uint8_tcol_span,
lv_grid_align_trow_align,uint8_trow_pos,uint8_trow_span)
Setthecellofanobject. Theobject'sparentneedstohavegridlayout,elsenothingwillhappen
Parameters
• obj--pointertoanobject
• column_align--theverticalalignmentinthecell. LV_GRID_START/END/CENTER/
STRETCH
• col_pos--columnID
• col_span--numberofcolumnstotake(>=1)
• row_align -- the horizontal alignment in the cell. LV_GRID_START/END/CENTER/
STRETCH
• row_pos--rowID
• row_span--numberofrowstotake(>=1)
staticinlinelv_coord_tlv_grid_fr(uint8_tx)
JustawrappertoLV_GRID_FRforbindings.
voidlv_style_set_grid_row_dsc_array(lv_style_t*style,constlv_coord_tvalue[])
voidlv_style_set_grid_column_dsc_array(lv_style_t*style,constlv_coord_tvalue[])
voidlv_style_set_grid_row_align(lv_style_t*style,lv_grid_align_tvalue)
voidlv_style_set_grid_column_align(lv_style_t*style,lv_grid_align_tvalue)
voidlv_style_set_grid_cell_column_pos(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_grid_cell_column_span(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_grid_cell_row_pos(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_grid_cell_row_span(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_grid_cell_x_align(lv_style_t*style,lv_coord_tvalue)
voidlv_style_set_grid_cell_y_align(lv_style_t*style,lv_coord_tvalue)
voidlv_obj_set_style_grid_row_dsc_array(lv_obj_t*obj,constlv_coord_tvalue[],lv_style_selector_t
selector)
voidlv_obj_set_style_grid_column_dsc_array(lv_obj_t*obj,constlv_coord_tvalue[],
lv_style_selector_tselector)
7.2. Grid 815


--- Page 820 ---


LVGLDocumentation8.3
voidlv_obj_set_style_grid_row_align(lv_obj_t*obj,lv_grid_align_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_grid_column_align(lv_obj_t*obj,lv_grid_align_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_grid_cell_column_pos(lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_grid_cell_column_span(lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_grid_cell_row_pos(lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_grid_cell_row_span(lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_t
selector)
voidlv_obj_set_style_grid_cell_x_align(lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
voidlv_obj_set_style_grid_cell_y_align(lv_obj_t*obj,lv_coord_tvalue,lv_style_selector_tselector)
staticinlineconstlv_coord_t*lv_obj_get_style_grid_row_dsc_array(constlv_obj_t*obj,uint32_t
part)
staticinlineconstlv_coord_t*lv_obj_get_style_grid_column_dsc_array(constlv_obj_t*obj,uint32_t
part)
staticinlinelv_grid_align_tlv_obj_get_style_grid_row_align(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_grid_align_tlv_obj_get_style_grid_column_align(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_grid_cell_column_pos(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_grid_cell_column_span(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_grid_cell_row_pos(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_grid_cell_row_span(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_grid_cell_x_align(constlv_obj_t*obj,uint32_tpart)
staticinlinelv_coord_tlv_obj_get_style_grid_cell_y_align(constlv_obj_t*obj,uint32_tpart)
Variables
uint16_tLV_LAYOUT_GRID
lv_style_prop_tLV_STYLE_GRID_COLUMN_DSC_ARRAY
lv_style_prop_tLV_STYLE_GRID_COLUMN_ALIGN
lv_style_prop_tLV_STYLE_GRID_ROW_DSC_ARRAY
lv_style_prop_tLV_STYLE_GRID_ROW_ALIGN
7.2. Grid 816


--- Page 821 ---


LVGLDocumentation8.3
lv_style_prop_tLV_STYLE_GRID_CELL_COLUMN_POS
lv_style_prop_tLV_STYLE_GRID_CELL_COLUMN_SPAN
lv_style_prop_tLV_STYLE_GRID_CELL_X_ALIGN
lv_style_prop_tLV_STYLE_GRID_CELL_ROW_POS
lv_style_prop_tLV_STYLE_GRID_CELL_ROW_SPAN
lv_style_prop_tLV_STYLE_GRID_CELL_Y_ALIGN
7.2. Grid 817


--- Page 822 ---


CHAPTER
EIGHT
3RD PARTY LIBRARIES
8.1 File System Interfaces
LVGLhasaFilesystemmoduletoprovideanabstractionlayerforvariousfilesystemdrivers. Youstillneedtoprovide
thedriversandlibraries,thisextensionprovidesonlythebridgebetweenFATFS,LittleFS,STDIO,POSIX,WIN32and
LVGL.
8.1.1 Built in wrappers
FATFS
BridgeforFatFS.FatFSitselfisnotpartofLVGL,butcanbeaddedandinitializedexternally.
LittleFS
Thoughlv_fs_littlefsusesLittleFSAPI,theLittleFSlibraryneedsotherexternallibrariesthathandlethemount-
ingofpartitionsandlow-levelaccesses,accordingtothegivenarchitecture. Thefunctionsforthelatteraregiventothe
lfs_tstructureaspointersbyanexternallow-levellibrary.
There's a convenience function called lv_fs_littlefs_set_driver(LV_FS_LITTLEFS_LETTER,
my_lfs), specific to lv_fs_littlefs, to attach a lfs_t object's pointer to a registered driver-letter. See its
commentsformoreinfo.
esp_littlefsisawrapperforLittleFStobeusedinEspressifESP-devices. Ithandlesthemountingandhasthelow-level
littlefs_apifunctionstoread/write/eraseblocksthatLittleFSlibraryneeds. Onmountingbyesp_littlefs
thelfs_tstructuresarecreated. YouneedtogetahandletothesetouseESPwithlv_fs_littlefs,asallfunctions
usethatlfs_tinLittleFStoidentifythemountedpartition.
Incaseyoudon'tfindaspecialfunctioninthelv_fs_littlefswrapper,youcanlookforitintheesp_littlefs
APIanduseitdirectly,aslv_fs_littlefsandtheesp_littlefsAPIscanbeusedside-by-side.
818


--- Page 823 ---


LVGLDocumentation8.3
STDIO
BridetoCstandardfunctionsonLinuxandWindows. Forexamplefopen,fread,etc.
POSIX
BridetoPOSIXfunctionsonLinuxandWindows. Forexampleopen,read,etc.
WIN32
BridetoWin32APIfunction. ForexampleCreateFileA,ReadFile,etc.
8.1.2 Usage
In lv_conf.h enable LV_USE_FS_... and assign an upper cased letter to LV_FS_..._LETTER (e.g. 'S').
Afterthatyoucanaccessfilesusingthatdriverletter. E.g. "S:path/to/file.txt".
TheworkdirectorycanbesetwithLV_FS_..._PATH.E.g. "/home/joe/projects/"Theactualfile/directory
pathswillbeappendedtoit.
CachedreadingisalsosupportedifLV_FS_..._CACHE_SIZEissettonot0value. lv_fs_readcachesthissize
ofdatatolowerthenumberofactualreadsfromthestorage.
8.2 BMP decoder
ThisextensionallowstheuseofBMPimagesinLVGL.Thisimplementationusesbmp-decoderlibrary. Thepixelsare
readondemand(notthewholeimageisloaded)sousingBMPimagesrequiresverylittleRAM.
Ifenabledinlv_conf.hbyLV_USE_BMPLVGLwillregisteranewimagedecoderautomaticallysoBMPfilescan
bedirectlyusedasimagesources. Forexample:
lv_img_set_src(my_img, "S:path/to/picture.bmp");
Notethat,afilesystemdriverneedstoregisteredtoopenimagesfromfiles. Readmoreaboutithereorjustenableone
inlv_conf.hwithLV_USE_FS_...
8.2.1 Limitations
• Only BMP files are supported and BMP images as C array (lv_img_dsc_t) are not. It's because there is no
practicaldifferencesbetweenhowtheBMPfilesandLVGL'simageformatstorestheimagedata.
• BMPfilescanbeloadedonlyfromfile. Ifyouwanttostoretheminflashit'sbettertoconvertthemtoCarraywith
LVGL'simageconverter.
• TheBMPfilescolorformatneedstomatchwithLV_COLOR_DEPTH.UseGIMPtosavetheimageintherequired
format. BothRGB888andARGB888workswithLV_COLOR_DEPTH 32
• Paletteisnotsupported.
• Becausenotthewholeimageisreadincannotbezoomedorrotated.
8.2. BMPdecoder 819


--- Page 824 ---


LVGLDocumentation8.3
8.2.2 Example
OpenaBMPimagefromfile
#include "../../lv_examples.h"
#if LV_USE_BMP && LV_BUILD_EXAMPLES
/**
* Open a BMP file from a file
*/
void lv_example_bmp_1(void)
{
lv_obj_t * img = lv_img_create(lv_scr_act());
/* Assuming a File system is attached to letter 'A'
* E.g. set LV_USE_FS_STDIO 'A' in lv_conf.h */
#if LV_COLOR_DEPTH == 32
lv_img_set_src(img, "A:lvgl/examples/libs/bmp/example_32bit.bmp");
#elif LV_COLOR_DEPTH == 16
lv_img_set_src(img, "A:lvgl/examples/libs/bmp/example_16bit.bmp");
#endif
lv_obj_center(img);
}
#endif
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
import fs_driver
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
img = lv.img(lv.scr_act())
# The File system is attached to letter 'S'
img.set_src("S:example_32bit.bmp")
img.center()
8.2.3 API
Functions
voidlv_bmp_init(void)
8.2. BMPdecoder 820


--- Page 825 ---


LVGLDocumentation8.3
8.3 JPG decoder
AllowtheuseofJPGimagesinLVGL.Besidesthatitalsoallowstheuseofacustomformat,calledSplitJPG(SJPG),
whichcanbedecodedinmoreoptimalwayonembeddedsystems.
8.3.1 Overview
• SupportsbothnormalJPGandthecustomSJPGformats.
• Decoding normal JPG consumes RAM with the size fo the whole uncompressed image (recommended only for
deviceswithmoreRAM)
• SJPGisacustomformatbasedon"normal"JPGandspeciallymadeforLVGL.
• SJPGis'split-jpeg'whichisabundleofsmalljpegfragmentswithansjpgheader.
• SJPGsizewillbealmostcomparabletothejpgfileormightbeaslightlylarger.
• Filereadfromfileandc-arrayareimplemented.
• SJPEGframefragmentcacheenablesfastfetchingoflinesifavailableincache.
• Bydefaultthesjpgimagecachewillbeimagewidth*2*16bytes(canbemodified)
• OnlytherequiredpartionoftheJPGandSJPGimagesaredecoded,thereforetheycan'tbezoomedorrotated.
8.3.2 Usage
Ifenabledinlv_conf.hbyLV_USE_SJPGLVGLwillregisteranewimagedecoderautomaticallysoJPGandSJPG
filescanbedirectlyusedasimagesources. Forexample:
lv_img_set_src(my_img, "S:path/to/picture.jpg");
Notethat,afilesystemdriverneedstoregisteredtoopenimagesfromfiles. Readmoreaboutithereorjustenableone
inlv_conf.hwithLV_USE_FS_...
8.3.3 Converter
ConvertingJPGtoCarray
• Uselvglonlinetoolhttps://lvgl.io/tools/imageconverter
• Colorformat=RAW,outputformat=CArray
ConvertingJPGtoSJPG
python3andthePILlibraryrequired. (PILcanbeinstalledwithpip3 install pillow)
TocreateSJPGfromJPG:
• Copytheimagetoconvertintolvgl/scripts
• cd lvgl/scripts
• python3 jpg_to_sjpg.py image_to_convert.jpg. ItcreatesbothaCfilesandanSJPGimage.
Theexpectedresultis:
8.3. JPGdecoder 821


--- Page 826 ---


LVGLDocumentation8.3
Conversion started...
Input:
image_to_convert.jpg
RES = 640 x 480
Output:
Time taken = 1.66 sec
bin size = 77.1 KB
walpaper.sjpg (bin file)
walpaper.c (c array)
All good!
8.3.4 Example
LoadanSJPGimage
#include "../../lv_examples.h"
#if LV_USE_SJPG && LV_BUILD_EXAMPLES
/**
* Load an SJPG image
*/
void lv_example_sjpg_1(void)
{
lv_obj_t * wp;
wp = lv_img_create(lv_scr_act());
/* Assuming a File system is attached to letter 'A'
* E.g. set LV_USE_FS_STDIO 'A' in lv_conf.h */
lv_img_set_src(wp, "A:lvgl/examples/libs/sjpg/small_image.sjpg");
}
#endif
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
import fs_driver
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
wp = lv.img(lv.scr_act())
# The File system is attached to letter 'S'
wp.set_src("S:small_image.sjpg")
wp.center()
8.3. JPGdecoder 822


--- Page 827 ---


LVGLDocumentation8.3
8.3.5 API
Functions
voidlv_split_jpeg_init(void)
8.4 PNG decoder
AllowtheuseofPNGimagesinLVGL.Thisimplementationuseslodepnglibrary.
Ifenabledinlv_conf.hbyLV_USE_PNGLVGLwillregisteranewimagedecoderautomaticallysoPNGfilescan
bedirectlyusedasanyotherimagesources.
Notethat,afilesystemdriverneedstoregisteredtoopenimagesfromfiles. Readmoreaboutithereorjustenableone
inlv_conf.hwithLV_USE_FS_...
ThewholePNGimageisdecodedsoduringdecodingRAMequalstoimage width x image height x 4
bytesarerequired.
AsitmighttakesignificanttimetodecodePNGimagesLVGL'simagescachingfeaturecanbeuseful.
8.4.1 Example
OpenaPNGimagefromfileandvariable
#include "../../lv_examples.h"
#if LV_USE_PNG && LV_USE_IMG && LV_BUILD_EXAMPLES
/**
* Open a PNG image from a file and a variable
*/
void lv_example_png_1(void)
{
LV_IMG_DECLARE(img_wink_png);
lv_obj_t * img;
img = lv_img_create(lv_scr_act());
lv_img_set_src(img, &img_wink_png);
lv_obj_align(img, LV_ALIGN_LEFT_MID, 20, 0);
img = lv_img_create(lv_scr_act());
/* Assuming a File system is attached to letter 'A'
* E.g. set LV_USE_FS_STDIO 'A' in lv_conf.h */
lv_img_set_src(img, "A:lvgl/examples/libs/png/wink.png");
lv_obj_align(img, LV_ALIGN_RIGHT_MID, -20, 0);
}
#endif
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
from imagetools import get_png_info, open_png
(continuesonnextpage)
8.4. PNGdecoder 823


--- Page 828 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
from img_wink_png import img_wink_png_map
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
img_wink_png = lv.img_dsc_t(
{
"header": {"always_zero": 0, "w": 50, "h": 50, "cf": lv.img.CF.RAW_ALPHA},
"data_size": 5158,
"data": img_wink_png_map,
}
)
img1 = lv.img(lv.scr_act())
img1.set_src(img_wink_png)
img1.align(lv.ALIGN.RIGHT_MID, -250, 0)
# Create an image from the png file
try:
with open('wink.png','rb') as f:
png_data = f.read()
except:
print("Could not find wink.png")
sys.exit()
wink_argb = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
img2 = lv.img(lv.scr_act())
img2.set_src(wink_argb)
img2.align(lv.ALIGN.RIGHT_MID, -150, 0)
8.4.2 API
Functions
voidlv_png_init(void)
RegisterthePNGdecoderfunctionsinLVGL
8.5 GIF decoder
AllowusingGIFimagesinLVGL.Basedonhttps://github.com/lecram/gifdec
Whenenabledinlv_conf.hwithLV_USE_GIFlv_gif_create(parent)canbeusedtocreateagifwidget.
lv_gif_set_src(obj, src)worksverysimilarlytolv_img_set_src. Assource,italsoacceptsimagesas
variables(lv_img_dsc_t)orfiles.
8.5. GIFdecoder 824


--- Page 829 ---


LVGLDocumentation8.3
8.5.1 Convert GIF files to C array
ToconvertaGIFfiletobytevaluesarrayuseLVGL'sonlineconverter. Select"Raw"colorformatand"Carray"Output
format.
8.5.2 Use GIF images from file
Forexample:
lv_gif_set_src(obj, "S:path/to/example.gif");
Notethat,afilesystemdriverneedstoberegisteredtoopenimagesfromfiles. Readmoreaboutithereorjustenable
oneinlv_conf.hwithLV_USE_FS_...
8.5.3 Memory requirements
TodecodeanddisplayaGIFanimationthefollowingamountofRAMisrequired:
• LV_COLOR_DEPTH 8: 3ximagewidthximageheight
• LV_COLOR_DEPTH 16: 4ximagewidthximageheight
• LV_COLOR_DEPTH 32: 5ximagewidthximageheight
8.5.4 Example
OpenaGIFimagefromfileandvariable
#include "../../lv_examples.h"
#if LV_USE_GIF && LV_BUILD_EXAMPLES
/**
* Open a GIF image from a file and a variable
*/
void lv_example_gif_1(void)
{
LV_IMG_DECLARE(img_bulb_gif);
lv_obj_t * img;
img = lv_gif_create(lv_scr_act());
lv_gif_set_src(img, &img_bulb_gif);
lv_obj_align(img, LV_ALIGN_LEFT_MID, 20, 0);
img = lv_gif_create(lv_scr_act());
/* Assuming a File system is attached to letter 'A'
* E.g. set LV_USE_FS_STDIO 'A' in lv_conf.h */
lv_gif_set_src(img, "A:lvgl/examples/libs/gif/bulb.gif");
lv_obj_align(img, LV_ALIGN_RIGHT_MID, -20, 0);
}
#endif
8.5. GIFdecoder 825


--- Page 830 ---


LVGLDocumentation8.3
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
import fs_driver
from img_bulb_gif import img_bulb_gif_map
fs_drv = lv.fs_drv_t()
fs_driver.fs_register(fs_drv, 'S')
#
# Open a GIF image from a file and a variable
#
img_bulb_gif = lv.img_dsc_t(
{
"header": {"always_zero": 0, "w": 0, "h": 0, "cf": lv.img.CF.RAW},
"data_size": 0,
"data": img_bulb_gif_map,
}
)
img1 = lv.gif(lv.scr_act())
img1.set_src(img_bulb_gif)
img1.align(lv.ALIGN.RIGHT_MID, -150, 0)
img2 = lv.gif(lv.scr_act())
# The File system is attached to letter 'S'
img2.set_src("S:bulb.gif")
img2.align(lv.ALIGN.RIGHT_MID, -250, 0)
8.5.5 API
Functions
lv_obj_t*lv_gif_create(lv_obj_t*parent)
voidlv_gif_set_src(lv_obj_t*obj,constvoid*src)
voidlv_gif_restart(lv_obj_t*gif)
Variables
constlv_obj_class_tlv_gif_class
structlv_gif_t
8.5. GIFdecoder 826


--- Page 831 ---


LVGLDocumentation8.3
PublicMembers
lv_img_timg
gd_GIF*gif
lv_timer_t*timer
lv_img_dsc_timgdsc
uint32_tlast_call
8.6 FreeType support
InterfacetoFreeTypetogeneratefontbitmapsruntime.
8.6.1 Install FreeType
• DownloadFreetypefromhere
• make
• sudo make install
8.6.2 Add FreeType to your project
• Addincludepath: /usr/include/freetype2(forGCC:-I/usr/include/freetype2 -L/usr/
local/lib)
• Addlibrary: freetype(forGCC:-L/usr/local/lib -lfreetype)
8.6.3 Usage
EnableLV_USE_FREETYPEinlv_conf.h.
To cache the glyphs from the opened fonts, set LV_FREETYPE_CACHE_SIZE >= 0 and then use the following
macrosfordetailedconfiguration:
1. LV_FREETYPE_CACHE_SIZE:maximum memory(bytes) used to cache font bitmap, outline, character maps,
etc. 0meansusethesystemdefaultvalue,lessthan0meansdisablecache. Note: thatthisvaluedoesnotaccount
formanagedFT_FaceandFT_Sizeobjects.
2. LV_FREETYPE_CACHE_FT_FACES:maximumnumberofopenedFT_Faceobjectsmanagedbythiscachein-
stance.0meansusethesystemdefaultvalue. OnlyusefulwhenLV_FREETYPE_CACHE_SIZE>=0.
3. LV_FREETYPE_CACHE_FT_SIZES:maximumnumberofopenedFT_Sizeobjectsmanagedbythiscachein-
stance. 0meansusethesystemdefaultvalue. OnlyusefulwhenLV_FREETYPE_CACHE_SIZE>=0.
8.6. FreeTypesupport 827


--- Page 832 ---


LVGLDocumentation8.3
When you are sure that all the used font sizes will not be greater than 256, you can enable
LV_FREETYPE_SBIT_CACHE,whichismuchmorememoryefficientforsmallbitmaps.
Youcanuselv_ft_font_init()tocreateFreeTypefonts. Itreturnstruetoindicatesuccess,atthesametime,
thefontmemberoflv_ft_info_twillbefilledwithapointertoanLVGLfont,andyoucanuseitlikeanyLVGL
font.
Fontstylesupportsboldanditalic,youcanusethefollowingmacrostoset:
1. FT_FONT_STYLE_NORMAL:defaultstyle.
2. FT_FONT_STYLE_ITALIC:Italicstyle
3. FT_FONT_STYLE_BOLD:boldstyle
Theycanbecombined.eg:FT_FONT_STYLE_BOLD | FT_FONT_STYLE_ITALIC.
Notethat,theFreeTypeextensiondoesn'tuseLVGL'sfilesystem. Youcansimplypassthepathtothefontasusualon
youroperatingsystemorplatform.
8.6.4 Example
OpenafrontwithFreeType
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
#if LV_USE_FREETYPE
/**
* Load a font with FreeType
*/
void lv_example_freetype_1(void)
{
/*Create a font*/
static lv_ft_info_t info;
/*FreeType uses C standard file system, so no driver letter is required.*/
info.name = "./lvgl/examples/libs/freetype/Lato-Regular.ttf";
info.weight = 24;
info.style = FT_FONT_STYLE_NORMAL;
info.mem = NULL;
if(!lv_ft_font_init(&info)) {
LV_LOG_ERROR("create failed.");
}
/*Create style with the new font*/
static lv_style_t style;
lv_style_init(&style);
lv_style_set_text_font(&style, info.font);
lv_style_set_text_align(&style, LV_TEXT_ALIGN_CENTER);
/*Create a label with the new style*/
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_obj_add_style(label, &style, 0);
lv_label_set_text(label, "Hello world\nI'm a font created with FreeType");
lv_obj_center(label);
}
#else
(continuesonnextpage)
8.6. FreeTypesupport 828


--- Page 833 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
void lv_example_freetype_1(void)
{
/*TODO
*fallback for online examples*/
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "FreeType is not installed");
lv_obj_center(label);
}
#endif
#endif
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
import fs_driver
info = lv.ft_info_t()
info.name ="./Lato-Regular.ttf"
info.weight = 24
info.style = lv.FT_FONT_STYLE.NORMAL
info.font_init()
# Create style with the new font
style = lv.style_t()
style.init()
style.set_text_font(info.font)
style.set_text_align(lv.TEXT_ALIGN.CENTER)
# Create a label with the new style
label = lv.label(lv.scr_act())
label.add_style(style, 0)
label.set_text("Hello world\nI'm a font created with FreeType")
label.center()
8.6.5 Learn more
• FreeTypetutorial
• LVGL'sfontinterface
8.6.6 API
Enums
enumLV_FT_FONT_STYLE
Values:
enumeratorFT_FONT_STYLE_NORMAL
8.6. FreeTypesupport 829


--- Page 834 ---


LVGLDocumentation8.3
enumeratorFT_FONT_STYLE_ITALIC
enumeratorFT_FONT_STYLE_BOLD
Functions
boollv_freetype_init(uint16_tmax_faces,uint16_tmax_sizes,uint32_tmax_bytes)
initfreetypelibrary
Parameters
• max_faces -- Maximum number of opened FT_Face objects managed by this cache in-
stance. Use0fordefaults.
• max_sizes--MaximumnumberofopenedFT_Sizeobjectsmanagedbythiscacheinstance.
Use0fordefaults.
• max_bytes--Maximumnumberofbytestouseforcacheddatanodes. Use0fordefaults.
NotethatthisvaluedoesnotaccountformanagedFT_FaceandFT_Sizeobjects.
Returns trueonsuccess,otherwisefalse.
voidlv_freetype_destroy(void)
Destroyfreetypelibrary
boollv_ft_font_init(lv_ft_info_t*info)
Createsafontwithinfoparameterspecified.
Parameters info -- See lv_ft_info_t for details. when success, lv_ft_info_t->font point to the font
youcreated.
Returns trueonsuccess,otherwisefalse.
voidlv_ft_font_destroy(lv_font_t*font)
Destroyafontthathasbeencreated.
Parameters font--pointertofont.
structlv_ft_info_t
PublicMembers
constchar*name
constvoid*mem
size_tmem_size
lv_font_t*font
uint16_tweight
8.6. FreeTypesupport 830


--- Page 835 ---


LVGLDocumentation8.3
uint16_tstyle
8.7 Tiny TTF font engine
8.7.1 Usage
Usehttps://github.com/nothings/stbtorenderTrueTypefontsinLVGL.
When enabled in lv_conf.h with LV_USE_TINY_TTF lv_tiny_ttf_create_data(data,
data_size, font_size) can be used to create a TTF font instance at the specified font size. You can
thenusethatfontanywherelv_font_tisaccepted.
Bydefault,theTTForOTFfilemustbeembeddedasanarray,eitherinaheader,orloadedintoRAMinordertofunction.
However, if LV_TINY_TTF_FILE_SUPPORT is enabled, lv_tiny_ttf_create_file(path,
font_size) will also be available, allowing tiny_ttf to stream from a file. The file must remain open the
entiretimethefontisbeingused,andstreamingondemandmaybeconsiderablyslower.
After a font is created, you can change the font size in pixels by using lv_tiny_ttf_set_size(font,
font_size).
By default, a font will use up to 4KB of cache to speed up rendering glyphs. This maximum can be changed
by using lv_tiny_ttf_create_data_ex(data, data_size, font_size, cache_size) or
lv_tiny_ttf_create_file_ex(path, font_size, cache_size) (when available). The cache size
isindicatedinbytes.
8.7.2 API
Functions
lv_font_t*lv_tiny_ttf_create_file(constchar*path,lv_coord_tfont_size)
lv_font_t*lv_tiny_ttf_create_file_ex(constchar*path,lv_coord_tfont_size,size_tcache_size)
lv_font_t*lv_tiny_ttf_create_data(constvoid*data,size_tdata_size,lv_coord_tfont_size)
lv_font_t*lv_tiny_ttf_create_data_ex(constvoid*data,size_tdata_size,lv_coord_tfont_size,size_t
cache_size)
voidlv_tiny_ttf_set_size(lv_font_t*font,lv_coord_tfont_size)
voidlv_tiny_ttf_destroy(lv_font_t*font)
8.7. TinyTTFfontengine 831


--- Page 836 ---


LVGLDocumentation8.3
8.8 QR code
QRcodegenerationwithLVGL.UsesQR-Code-generatorbynayuki.
8.8.1 Get started
• Downloadorclonethisrepository
– DownloadfromGitHub
– Clone: gitclonehttps://github.com/lvgl/lv_lib_qrcode.git
• Includethelibrary: #include "lv_lib_qrcode/lv_qrcode.h"
• Testwiththefollowingcode:
const char * data = "Hello world";
/*Create a 100x100 QR code*/
lv_obj_t * qr = lv_qrcode_create(lv_scr_act(), 100, lv_color_hex3(0x33f), lv_color_
,→hex3(0xeef));
/*Set data*/
lv_qrcode_update(qr, data, strlen(data));
8.8.2 Notes
• QRcodeswithlessdataaresmaller,buttheyscaledbyanintegernumbertobestfittothegivensize.
8.8.3 Example
CreateaQRCode
#include "../../lv_examples.h"
#if LV_USE_QRCODE && LV_BUILD_EXAMPLES
/**
* Create a QR Code
*/
void lv_example_qrcode_1(void)
{
lv_color_t bg_color = lv_palette_lighten(LV_PALETTE_LIGHT_BLUE, 5);
lv_color_t fg_color = lv_palette_darken(LV_PALETTE_BLUE, 4);
lv_obj_t * qr = lv_qrcode_create(lv_scr_act(), 150, fg_color, bg_color);
/*Set data*/
const char * data = "https://lvgl.io";
lv_qrcode_update(qr, data, strlen(data));
lv_obj_center(qr);
/*Add a border with bg_color*/
lv_obj_set_style_border_color(qr, bg_color, 0);
(continuesonnextpage)
8.8. QRcode 832


--- Page 837 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_style_border_width(qr, 5, 0);
}
#endif
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
bg_color = lv.palette_lighten(lv.PALETTE.LIGHT_BLUE, 5)
fg_color = lv.palette_darken(lv.PALETTE.BLUE, 4)
qr = lv.qrcode(lv.scr_act(), 150, fg_color, bg_color)
# Set data
data = "https://lvgl.io"
qr.update(data,len(data))
qr.center()
# Add a border with bg_color
qr.set_style_border_color(bg_color, 0)
qr.set_style_border_width(5, 0)
8.8.4 API
Functions
lv_obj_t*lv_qrcode_create(lv_obj_t*parent,lv_coord_tsize,lv_color_tdark_color,lv_color_tlight_color)
CreateanemptyQRcode(anlv_canvas)object.
Parameters
• parent--pointtoanobjectwheretocreatetheQRcode
• size--widthandheightoftheQRcode
• dark_color--darkcoloroftheQRcode
• light_color--lightcoloroftheQRcode
Returns pointertothecreatedQRcodeobject
lv_res_tlv_qrcode_update(lv_obj_t*qrcode,constvoid*data,uint32_tdata_len)
SetthedataofaQRcodeobject
Parameters
• qrcode--pointertoaQcodeobject
• data--datatodisplay
• data_len--lengthofdatainbytes
8.8. QRcode 833


--- Page 838 ---


LVGLDocumentation8.3
Returns LV_RES_OK:ifnoerror;LV_RES_INV:onerror
voidlv_qrcode_delete(lv_obj_t*qrcode)
DEPRECATED:Usenormallv_obj_delinsteadDeleteaQRcodeobject
Parameters qrcode--pointertoaQRcodeobject
Variables
constlv_obj_class_tlv_qrcode_class
8.9 Lottie player
AllowstouseLottieanimationsinLVGL.Takenfromthisbaserepository
LVGLprovidestheinterfacetoSamsung/rlottielibrary'sCAPI.ThatistheactualLottieplayerisnotpartofLVGL,it
needstobebuiltseparately.
8.9.1 Build Rlottie
TobuildSamsung'sRlottieC++14-compatiblecompilerandoptionallyCMake3.14orhigherisrequired.
TobuildondesktopyoucanfollowtheinstructionsfromRlottie'sREADME.Inthemostbasiccaseitlookslikethis:
mkdir rlottie_workdir
cd rlottie_workdir
git clone https://github.com/Samsung/rlottie.git
mkdir build
cd build
cmake ../rlottie
make -j
sudo make install
Andfinallyaddthe-lrlottieflagtoyourlinker.
OnembeddedsystemsyouneedtotakecareofintegratingRlottietothegivenbuildsystem.
8.9.2 Usage
You can use animation from files or raw data (text). In either case first you need to enable LV_USE_RLOTTIE in
lv_conf.h.
Thewidthandheightoftheobjectbesetinthecreatefunctionandtheanimationwillbescaledaccordingly.
8.9. Lottieplayer 834


--- Page 839 ---


LVGLDocumentation8.3
UseRlottiefromfile
TocreateaLottieanimationfromfileuse:
lv_obj_t * lottie = lv_rlottie_create_from_file(parent, width, height, "path/to/
,→lottie.json");
Notethat,RlottieusesthestandardSTDIOCfileAPI,soyoucanusethepath"normally"andnoLVGLspecificdriver
letterisrequired.
UseRlottiefromrawstringdata
lv_example_rlottie_approve.ccontainsanexampleanimationinrawformat. InsteadstoringtheJSONstring
ahexarrayisstoredforthefollowingreasons:
• avoidescaping"intheJSONfile
• somecompilersdon'tsupportverylongstrings
lvgl/scripts/filetohex.pycanbeusedtoconvertaLottiefileahexarray. E.g.:
./filetohex.py path/to/lottie.json > out.txt
Tocreateananimationfromrawdata:
extern const uint8_t lottie_data[];
lv_obj_t* lottie = lv_rlottie_create_from_raw(parent, width, height, (const char␣
,→*)lottie_data);
8.9.3 Getting animations
Lottieisstandardandpopularformatsoyoucanfindmanyanimationfilesontheweb. Forexample:https://lottiefiles.com/
YoucanalsocreateyourownanimationswithAdobeAfterEffectsorsimilarsoftware.
8.9.4 Controlling animations
LVGL provides two functions to control the animation mode: lv_rlottie_set_play_mode and
lv_rlottie_set_current_frame. You'll combine your intentions when calling the first method, like in
theseexamples:
lv_obj_t * lottie = lv_rlottie_create_from_file(scr, 128, 128, "test.json");
lv_obj_center(lottie);
// Pause to a specific frame
lv_rlottie_set_current_frame(lottie, 50);
lv_rlottie_set_play_mode(lottie, LV_RLOTTIE_CTRL_PAUSE); // The specified frame will␣
,→be displayed and then the animation will pause
// Play backward and loop
lv_rlottie_set_play_mode(lottie, LV_RLOTTIE_CTRL_PLAY | LV_RLOTTIE_CTRL_BACKWARD | LV_
,→RLOTTIE_CTRL_LOOP);
// Play forward once (no looping)
lv_rlottie_set_play_mode(lottie, LV_RLOTTIE_CTRL_PLAY | LV_RLOTTIE_CTRL_FORWARD);
8.9. Lottieplayer 835


--- Page 840 ---


LVGLDocumentation8.3
Thedefaultanimationmodeisplayforwardwithloop.
If you don't enable looping, a LV_EVENT_READY is sent when the animation can not make more progress without
looping.
To get the number of frames in an animation or the current frame index, you can cast the lv_obj_t instance to a
lv_rlottie_tinstanceandinspectthecurrent_frameandtotal_framesmembers.
8.9.5 Example
LoadaLottieanimationfromrawdata
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
#if LV_USE_RLOTTIE
/**
* Load an lottie animation from flash
*/
void lv_example_rlottie_1(void)
{
extern const uint8_t lv_example_rlottie_approve[];
lv_obj_t * lottie = lv_rlottie_create_from_raw(lv_scr_act(), 100, 100, (const␣
,→void *)lv_example_rlottie_approve);
lv_obj_center(lottie);
}
#else
void lv_example_rlottie_1(void)
{
/*TODO
*fallback for online examples*/
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Rlottie is not installed");
lv_obj_center(label);
}
#endif
#endif
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
#
# Load a lottie animation from flash
#
from lv_example_rlottie_approve import lv_example_rlottie_approve
lottie = lv.rlottie_create_from_raw(lv.scr_act(), 100, 100, lv_example_rlottie_
,→approve)
lottie.center()
8.9. Lottieplayer 836


--- Page 841 ---


LVGLDocumentation8.3
LoadaLottieanimationfromafile
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
#if LV_USE_RLOTTIE
/**
* Load an lottie animation from file
*/
void lv_example_rlottie_2(void)
{
/*The rlottie library uses STDIO file API, so there is no driver letter for LVGL*/
lv_obj_t * lottie = lv_rlottie_create_from_file(lv_scr_act(), 100, 100,
"lvgl/examples/libs/rlottie/lv_
,→example_rlottie_approve.json");
lv_obj_center(lottie);
}
#else
void lv_example_rlottie_2(void)
{
/*TODO
*fallback for online examples*/
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "Rlottie is not installed");
lv_obj_center(label);
}
#endif
#endif
#!/opt/bin/lv_micropython -i
import lvgl as lv
import display_driver
lottie = lv.rlottie_create_from_file(lv.scr_act(), 100, 100,"lv_example_rlottie_
,→approve.json")
lottie.center()
8.9.6 API
Enums
enumlv_rlottie_ctrl_t
Values:
enumeratorLV_RLOTTIE_CTRL_FORWARD
enumeratorLV_RLOTTIE_CTRL_BACKWARD
enumeratorLV_RLOTTIE_CTRL_PAUSE
8.9. Lottieplayer 837


--- Page 842 ---


LVGLDocumentation8.3
enumeratorLV_RLOTTIE_CTRL_PLAY
enumeratorLV_RLOTTIE_CTRL_LOOP
Functions
lv_obj_t*lv_rlottie_create_from_file(lv_obj_t*parent,lv_coord_twidth,lv_coord_theight,constchar
*path)
lv_obj_t*lv_rlottie_create_from_raw(lv_obj_t*parent,lv_coord_twidth,lv_coord_theight,constchar
*rlottie_desc)
voidlv_rlottie_set_play_mode(lv_obj_t*rlottie,constlv_rlottie_ctrl_tctrl)
voidlv_rlottie_set_current_frame(lv_obj_t*rlottie,constsize_tgoto_frame)
Variables
constlv_obj_class_tlv_rlottie_class
structlv_rlottie_t
PublicMembers
lv_img_timg_ext
structLottie_Animation_S*animation
lv_timer_t*task
lv_img_dsc_timgdsc
size_ttotal_frames
size_tcurrent_frame
size_tframerate
uint32_t*allocated_buf
size_tallocated_buffer_size
size_tscanline_width
8.9. Lottieplayer 838


--- Page 843 ---


LVGLDocumentation8.3
lv_rlottie_ctrl_tplay_ctrl
size_tdest_frame
8.10 FFmpeg support
FFmpegAcomplete,cross-platformsolutiontorecord,convertandstreamaudioandvideo.
8.10.1 Install FFmpeg
• DownloadFFmpegfromhere
• ./configure --disable-all --disable-autodetect --disable-podpages
--disable-asm --enable-avcodec --enable-avformat --enable-decoders
--enable-encoders --enable-demuxers --enable-parsers
--enable-protocol='file' --enable-swscale --enable-zlib
• make
• sudo make install
8.10.2 Add FFmpeg to your project
• Add library: FFmpeg (for GCC: -lavformat -lavcodec -lavutil -lswscale -lm -lz
-lpthread)
8.10.3 Usage
EnableLV_USE_FFMPEGinlv_conf.h.
Seetheexamplesbelow.
Notethat,theFFmpegextensiondoesn'tuseLVGL'sfilesystem. Youcansimplypassthepathtotheimageorvideoas
usualonyouroperatingsystemorplatform.
8.10.4 Example
Decodeimage
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
#if LV_USE_FFMPEG
/**
* Open an image from a file
*/
void lv_example_ffmpeg_1(void)
{
lv_obj_t * img = lv_img_create(lv_scr_act());
(continuesonnextpage)
8.10. FFmpegsupport 839


--- Page 844 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_img_set_src(img, "./lvgl/examples/libs/ffmpeg/ffmpeg.png");
lv_obj_center(img);
}
#else
void lv_example_ffmpeg_1(void)
{
/*TODO
*fallback for online examples*/
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "FFmpeg is not installed");
lv_obj_center(label);
}
#endif
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/libs/ffmpeg/lv_example_ffmpeg_1.py
Decodevideo
#include "../../lv_examples.h"
#if LV_BUILD_EXAMPLES
#if LV_USE_FFMPEG
/**
* Open a video from a file
*/
void lv_example_ffmpeg_2(void)
{
/*birds.mp4 is downloaded from http://www.videezy.com (Free Stock Footage by␣
,→Videezy!)
*https://www.videezy.com/abstract/44864-silhouettes-of-birds-over-the-sunset*/
lv_obj_t * player = lv_ffmpeg_player_create(lv_scr_act());
lv_ffmpeg_player_set_src(player, "./lvgl/examples/libs/ffmpeg/birds.mp4");
lv_ffmpeg_player_set_auto_restart(player, true);
lv_ffmpeg_player_set_cmd(player, LV_FFMPEG_PLAYER_CMD_START);
lv_obj_center(player);
}
#else
void lv_example_ffmpeg_2(void)
{
/*TODO
*fallback for online examples*/
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "FFmpeg is not installed");
lv_obj_center(label);
}
(continuesonnextpage)
8.10. FFmpegsupport 840


--- Page 845 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
#endif
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/libs/ffmpeg/lv_example_ffmpeg_2.py
8.10.5 API
Enums
enumlv_ffmpeg_player_cmd_t
Values:
enumeratorLV_FFMPEG_PLAYER_CMD_START
enumeratorLV_FFMPEG_PLAYER_CMD_STOP
enumeratorLV_FFMPEG_PLAYER_CMD_PAUSE
enumeratorLV_FFMPEG_PLAYER_CMD_RESUME
enumerator_LV_FFMPEG_PLAYER_CMD_LAST
Functions
voidlv_ffmpeg_init(void)
RegisterFFMPEGimagedecoder
intlv_ffmpeg_get_frame_num(constchar*path)
Getthenumberofframescontainedinthefile
Parameters path--imageorvideofilename
Returns Numberofframes,lessthan0meansfailed
lv_obj_t*lv_ffmpeg_player_create(lv_obj_t*parent)
Createffmpeg_playerobject
Parameters parent--pointertoanobject,itwillbetheparentofthenewplayer
Returns pointertothecreatedffmpeg_player
lv_res_tlv_ffmpeg_player_set_src(lv_obj_t*obj,constchar*path)
Setthepathofthefiletobeplayed
Parameters
• obj--pointertoaffmpeg_playerobject
• path--videofilepath
8.10. FFmpegsupport 841


--- Page 846 ---


LVGLDocumentation8.3
Returns LV_RES_OK:noerror;LV_RES_INV:can'tgettheinfo.
voidlv_ffmpeg_player_set_cmd(lv_obj_t*obj,lv_ffmpeg_player_cmd_tcmd)
Setcommandcontrolvideoplayer
Parameters
• obj--pointertoaffmpeg_playerobject
• cmd--controlcommands
voidlv_ffmpeg_player_set_auto_restart(lv_obj_t*obj,boolen)
Setthevideotoautomaticallyreplay
Parameters
• obj--pointertoaffmpeg_playerobject
• en--true: enabletheautorestart
Variables
constlv_obj_class_tlv_ffmpeg_player_class
structlv_ffmpeg_player_t
PublicMembers
lv_img_timg
lv_timer_t*timer
lv_img_dsc_timgdsc
boolauto_restart
structffmpeg_context_s*ffmpeg_ctx
8.10. FFmpegsupport 842


--- Page 847 ---


CHAPTER
NINE
OTHERS
9.1 Snapshot
SnapshotprovidesAPIstotakesnapshotimageforLVGLobjecttogetherwithitschildren. Theimagewilllookexactly
liketheobject.
9.1.1 Usage
Simply call API lv_snapshot_take to generate the image descriptor which can be set as image object src using
lv_img_set_src.
Note,onlybelowcolorformatsaresupportedfornow:
• LV_IMG_CF_TRUE_COLOR_ALPHA
• LV_IMG_CF_ALPHA_1BIT
• LV_IMG_CF_ALPHA_2BIT
• LV_IMG_CF_ALPHA_4BIT
• LV_IMG_CF_ALPHA_8BIT
FreetheImage
The memory lv_snapshot_take uses are dynamically allocated using lv_mem_alloc. Use API
lv_snapshot_freetofreethememoryittakes. Thiswillfirstlyfreememorytheimagedatatakes,thentheimage
descriptor.
Takecautiontofreethesnapshotbutnotdeletetheimageobject. Beforefreethememory,besuretofirstlyunlinkitfrom
imageobject,usinglv_img_set_src(NULL)andlv_img_cache_invalidate_src(src).
BelowcodesnippetexplainsusageofthisAPI.
void update_snapshot(lv_obj_t * obj, lv_obj_t * img_snapshot)
{
lv_img_dsc_t* snapshot = (void*)lv_img_get_src(img_snapshot);
if(snapshot) {
lv_snapshot_free(snapshot);
}
snapshot = lv_snapshot_take(obj, LV_IMG_CF_TRUE_COLOR_ALPHA);
lv_img_set_src(img_snapshot, snapshot);
}
843


--- Page 848 ---


LVGLDocumentation8.3
UseExistingBuffer
If the snapshot needs update now and then, or simply caller provides memory, use API lv_res_t
lv_snapshot_take_to_buf(lv_obj_t * obj, lv_img_cf_t cf, lv_img_dsc_t * dsc,
void * buf, uint32_t buf_size);forthiscase. It'scaller'sresponsibilitytoalloc/freethememory.
Ifsnapshotisgeneratedsuccessfully,theimagedescriptorisupdatedandimagedatawillbestoredtoprovidedbuf.
Notethatsnapshotmayfailifprovidedbufferisnotenough, whichmayhappenwhenobjectsizechanges. It'srecom-
mendedtouseAPIlv_snapshot_buf_size_neededtochecktheneededbuffersizeinbytefirstlyandresizethe
bufferaccordingly.
9.1.2 Example
Simplesnapshotexample
#include "../../lv_examples.h"
#if LV_USE_SNAPSHOT && LV_BUILD_EXAMPLES
static void event_cb(lv_event_t * e)
{
lv_obj_t * snapshot_obj = lv_event_get_user_data(e);
lv_obj_t * img = lv_event_get_target(e);
if(snapshot_obj) {
lv_img_dsc_t * snapshot = (void *)lv_img_get_src(snapshot_obj);
if(snapshot) {
lv_snapshot_free(snapshot);
}
/*Update the snapshot, we know parent of object is the container.*/
snapshot = lv_snapshot_take(img->parent, LV_IMG_CF_TRUE_COLOR_ALPHA);
if(snapshot == NULL)
return;
lv_img_set_src(snapshot_obj, snapshot);
}
}
void lv_example_snapshot_1(void)
{
LV_IMG_DECLARE(img_star);
lv_obj_t * root = lv_scr_act();
lv_obj_set_style_bg_color(root, lv_palette_main(LV_PALETTE_LIGHT_BLUE), 0);
/*Create an image object to show snapshot*/
lv_obj_t * snapshot_obj = lv_img_create(root);
lv_obj_set_style_bg_color(snapshot_obj, lv_palette_main(LV_PALETTE_PURPLE), 0);
lv_obj_set_style_bg_opa(snapshot_obj, LV_OPA_100, 0);
lv_img_set_zoom(snapshot_obj, 128);
lv_img_set_angle(snapshot_obj, 300);
/*Create the container and its children*/
lv_obj_t * container = lv_obj_create(root);
lv_obj_center(container);
lv_obj_set_size(container, 180, 180);
(continuesonnextpage)
9.1. Snapshot 844


--- Page 849 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_set_flex_flow(container, LV_FLEX_FLOW_ROW_WRAP);
lv_obj_set_flex_align(container, LV_FLEX_ALIGN_SPACE_EVENLY, LV_FLEX_ALIGN_CENTER,
,→ LV_FLEX_ALIGN_CENTER);
lv_obj_set_style_radius(container, 50, 0);
lv_obj_t * img;
int i;
for(i = 0; i < 4; i++) {
img = lv_img_create(container);
lv_img_set_src(img, &img_star);
lv_obj_set_style_bg_color(img, lv_color_black(), 0);
lv_obj_set_style_bg_opa(img, LV_OPA_COVER, 0);
lv_obj_set_style_transform_zoom(img, 400, LV_STATE_PRESSED);
lv_obj_add_flag(img, LV_OBJ_FLAG_CLICKABLE);
lv_obj_add_event_cb(img, event_cb, LV_EVENT_PRESSED, snapshot_obj);
lv_obj_add_event_cb(img, event_cb, LV_EVENT_RELEASED, snapshot_obj);
}
}
#endif
import gc
import lvgl as lv
from imagetools import get_png_info, open_png
# Register PNG image decoder
decoder = lv.img.decoder_create()
decoder.info_cb = get_png_info
decoder.open_cb = open_png
# Measure memory usage
gc.enable()
gc.collect()
mem_free = gc.mem_free()
label = lv.label(lv.scr_act())
label.align(lv.ALIGN.BOTTOM_MID, 0, -10)
label.set_text(" memory free:" + str(mem_free/1024) + " kB")
# Create an image from the png file
try:
with open('../../assets/img_star.png','rb') as f:
png_data = f.read()
except:
print("Could not find star.png")
sys.exit()
img_star = lv.img_dsc_t({
'data_size': len(png_data),
'data': png_data
})
def event_cb(e, snapshot_obj):
img = e.get_target()
if snapshot_obj:
# no need to free the old source for snapshot_obj, gc will free it for us.
(continuesonnextpage)
9.1. Snapshot 845


--- Page 850 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
# take a new snapshot, overwrite the old one
dsc = lv.snapshot_take(img.get_parent(), lv.img.CF.TRUE_COLOR_ALPHA)
snapshot_obj.set_src(dsc)
gc.collect()
mem_used = mem_free - gc.mem_free()
label.set_text("memory used:" + str(mem_used/1024) + " kB")
root = lv.scr_act()
root.set_style_bg_color(lv.palette_main(lv.PALETTE.LIGHT_BLUE), 0)
# Create an image object to show snapshot
snapshot_obj = lv.img(root)
snapshot_obj.set_style_bg_color(lv.palette_main(lv.PALETTE.PURPLE), 0)
snapshot_obj.set_style_bg_opa(lv.OPA.COVER, 0)
snapshot_obj.set_zoom(128)
# Create the container and its children
container = lv.obj(root)
container.align(lv.ALIGN.CENTER, 0, 0)
container.set_size(180, 180)
container.set_flex_flow(lv.FLEX_FLOW.ROW_WRAP)
container.set_flex_align(lv.FLEX_ALIGN.SPACE_EVENLY, lv.FLEX_ALIGN.CENTER, lv.FLEX_
,→ALIGN.CENTER)
container.set_style_radius(50, 0)
for i in range(4):
img = lv.img(container)
img.set_src(img_star)
img.set_style_bg_color(lv.palette_main(lv.PALETTE.GREY), 0)
img.set_style_bg_opa(lv.OPA.COVER, 0)
img.set_style_transform_zoom(400, lv.STATE.PRESSED)
img.add_flag(img.FLAG.CLICKABLE)
img.add_event_cb(lambda e: event_cb(e, snapshot_obj), lv.EVENT.PRESSED, None)
img.add_event_cb(lambda e: event_cb(e, snapshot_obj), lv.EVENT.RELEASED, None)
9.1.3 API
Functions
lv_img_dsc_t*lv_snapshot_take(lv_obj_t*obj,lv_img_cf_tcf)
Takesnapshotforobjectwithitschildren.
Parameters
• obj--Theobjecttogeneratesnapshot.
• cf--colorformatforgeneratedimage.
Returns apointertoanimagedescriptor,orNULLiffailed.
voidlv_snapshot_free(lv_img_dsc_t*dsc)
Freethesnapshotimagereturnedbylv_snapshot_take
Itwillfirstlyfreethedataimagetakes,thentheimagedescriptor.
9.1. Snapshot 846


--- Page 851 ---


LVGLDocumentation8.3
Parameters dsc--Theimagedescriptorgeneratedbylv_snapshot_take.
uint32_tlv_snapshot_buf_size_needed(lv_obj_t*obj,lv_img_cf_tcf)
Getthebufferneededforobjectsnapshotimage.
Parameters
• obj--Theobjecttogeneratesnapshot.
• cf--colorformatforgeneratedimage.
Returns thebuffersizeneededinbytes
lv_res_tlv_snapshot_take_to_buf(lv_obj_t*obj,lv_img_cf_tcf,lv_img_dsc_t*dsc,void*buf,uint32_t
buf_size)
Takesnapshotforobjectwithitschildren,saveimageinfotoprovidedbuffer.
Parameters
• obj--Theobjecttogeneratesnapshot.
• cf--colorformatforgeneratedimage.
• dsc--imagedescriptortostoretheimageresult.
• buf--thebuffertostoreimagedata.
• buf_size--providedbuffersizeinbytes.
Returns LV_RES_OKonsuccess,LV_RES_INVonerror.
9.2 Monkey
Asimplemonkeytest. Userandominputtostresstesttheapplication.
9.2.1 Usage
EnableLV_USE_MONKEYinlv_conf.h.
Firstconfiguremonkey,uselv_monkey_config_ttodefinetheconfigurationstructure,setthetype(checkinput
devices for the supported types), and then set the range of period_range and input_range, the monkey will
outputrandomoperationsatrandomtimeswithinthisrange. Calllv_monkey_createtocreatemonkey. Finallycall
lv_monkey_set_enable(monkey, true)toenablemonkey.
Ifyouwanttopausethemonkey,calllv_monkey_set_enable(monkey, false). Todeletethemonkey,call
lv_monkey_del(monkey).
Notethatinput_rangehasdifferentmeaningsindifferenttype:
• LV_INDEV_TYPE_POINTERNoeffect,clickrandomlywithinthepixelsofthescreenresolution.
• LV_INDEV_TYPE_ENCODERTheminimumandmaximumvalues ofenc_diff.
• LV_INDEV_TYPE_BUTTON The minimum and maximum values of btn_id. Use
lv_monkey_get_indev() to get the input device, and use lv_indev_set_button_points()
tomapthekeyIDtothecoordinates.
• LV_INDEV_TYPE_KEYPADNoeffect,SendrandomKeys.
9.2. Monkey 847


--- Page 852 ---


LVGLDocumentation8.3
9.2.2 Example
Touchpadmonkeyexample
#include "../../lv_examples.h"
#if LV_USE_MONKEY && LV_BUILD_EXAMPLES
void lv_example_monkey_1(void)
{
/*Create pointer monkey test*/
lv_monkey_config_t config;
lv_monkey_config_init(&config);
config.type = LV_INDEV_TYPE_POINTER;
config.period_range.min = 10;
config.period_range.max = 100;
lv_monkey_t * monkey = lv_monkey_create(&config);
/*Start monkey test*/
lv_monkey_set_enable(monkey, true);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/monkey/lv_example_monkey_1.py
Encodermonkeyexample
#include "../../lv_examples.h"
#if LV_USE_MONKEY && LV_BUILD_EXAMPLES
void lv_example_monkey_2(void)
{
/*Create encoder monkey test*/
lv_monkey_config_t config;
lv_monkey_config_init(&config);
config.type = LV_INDEV_TYPE_ENCODER;
config.period_range.min = 50;
config.period_range.max = 500;
config.input_range.min = -5;
config.input_range.max = 5;
lv_monkey_t * monkey = lv_monkey_create(&config);
/*Set the default group*/
lv_group_t * group = lv_group_create();
lv_indev_set_group(lv_monkey_get_indev(monkey), group);
lv_group_set_default(group);
/*Start monkey test*/
lv_monkey_set_enable(monkey, true);
}
#endif
9.2. Monkey 848


--- Page 853 ---


LVGLDocumentation8.3
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/monkey/lv_example_monkey_2.py
Buttonmonkeyexample
#include "../../lv_examples.h"
#if LV_USE_MONKEY && LV_BUILD_EXAMPLES
void lv_example_monkey_3(void)
{
static lv_point_t btn_points[3];
lv_coord_t hor_res = LV_HOR_RES;
/*Create button monkey test*/
lv_monkey_config_t config;
lv_monkey_config_init(&config);
config.type = LV_INDEV_TYPE_BUTTON;
config.period_range.min = 50;
config.period_range.max = 500;
config.input_range.min = 0;
config.input_range.max = sizeof(btn_points) / sizeof(lv_point_t) - 1;
lv_monkey_t * monkey = lv_monkey_create(&config);
/*Set the coordinates bound to the button*/
btn_points[0].x = hor_res / 4;
btn_points[0].y = 10;
btn_points[1].x = hor_res / 2;
btn_points[1].y = 10;
btn_points[2].x = hor_res * 3 / 4;
btn_points[2].y = 10;
lv_indev_set_button_points(lv_monkey_get_indev(monkey), btn_points);
/*Start monkey test*/
lv_monkey_set_enable(monkey, true);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/monkey/lv_example_monkey_3.py
9.2.3 API
Typedefs
typedefstruct_lv_monkeylv_monkey_t
9.2. Monkey 849


--- Page 854 ---


LVGLDocumentation8.3
Functions
voidlv_monkey_config_init(lv_monkey_config_t*config)
Initializeamonkeyconfigwithdefaultvalues
Parameters config--pointerto'lv_monkey_config_t'variabletoinitialize
lv_monkey_t*lv_monkey_create(constlv_monkey_config_t*config)
Createmonkeyfortest
Parameters config--pointerto'lv_monkey_config_t'variable
Returns pointertothecreatedmonkey
lv_indev_t*lv_monkey_get_indev(lv_monkey_t*monkey)
Getmonkeyinputdevice
Parameters monkey--pointertoamonkey
Returns pointertotheinputdevice
voidlv_monkey_set_enable(lv_monkey_t*monkey,boolen)
Enablemonkey
Parameters
• monkey--pointertoamonkey
• en--settotruetoenable
boollv_monkey_get_enable(lv_monkey_t*monkey)
Getwhethermonkeyisenabled
Parameters monkey--pointertoamonkey
Returns returntrueifmonkeyenabled
voidlv_monkey_set_user_data(lv_monkey_t*monkey,void*user_data)
Settheuser_datafieldofthemonkey
Parameters
• monkey--pointertoamonkey
• user_data--pointertothenewuser_data.
void*lv_monkey_get_user_data(lv_monkey_t*monkey)
Gettheuser_datafieldofthemonkey
Parameters monkey--pointertoamonkey
Returns thepointertotheuser_dataofthemonkey
voidlv_monkey_del(lv_monkey_t*monkey)
Deletemonkey
Parameters monkey--pointertomonkey
structlv_monkey_config_t
9.2. Monkey 850


--- Page 855 ---


LVGLDocumentation8.3
PublicMembers
lv_indev_type_ttype
<InputdevicetypeMonkeyexecutionperiod
uint32_tmin
uint32_tmax
structlv_monkey_config_t::[anonymous]period_range
Therangeofinputvalue
int32_tmin
int32_tmax
structlv_monkey_config_t::[anonymous]input_range
9.3 Grid navigation
Gridnavigation(gridnavforshort)isafeaturethatchangesthecurrentlyfocusedchildobjectasarrowkeysarepressed.
If the children are arranged into a grid-like layout then the up, down, left and right arrows move focus to the nearest
siblingintherespectivedirection.
Itdoesn'tmatterhowthechildrenarepositioned,asonlythecurrentxandycoordinatesareconsidered. Thismeansthat
gridnavworkswithmanuallypositionedchildren,aswellasFlexandGridlayouts.
Gridnavalsoworksifthechildrenarearrangedintoasingleroworcolumn. Thatmakesituseful,forexample,tosimplify
navigationonaListwidget.
Gridnav assumes that the object to which gridnav is added is part of a group. This way, if the object with gridnav is
focused,thearrowkeypressesareautomaticallyforwardedtotheobjectsothatgridnavcanprocessthearrowkeys.
TomovethefocustothenextwidgetofthegroupuseLV_KEY_NEXT/PREVorlv_group_focus_next/prev()
ortheTABkeyonkeyboardasusual.
Ifthecontainerisscrollableandthefocusedchildisoutoftheview,gridnavwillautomaticallyscrollthechildintoview.
9.3.1 Usage
Toaddthegridnavfeaturetoanobjectuselv_gridnav_add(cont, flags).
flagscontrolthebehaviorofgridnav:
• LV_GRIDNAV_CTRL_NONEDefaultsettings
• LV_GRIDNAV_CTRL_ROLLOVERIfthereisnonext/previousobjectinadirection,thefocusgoestotheobject
inthenext/previousrow(onleft/rightkeys)orfirst/lastrow(onup/downkeys
9.3. Gridnavigation 851


--- Page 856 ---


LVGLDocumentation8.3
• LV_GRIDNAV_CTRL_SCROLL_FIRST If an arrow is pressed and the focused object can be scrolled in that
directionthenitwillbescrolledinsteadofgoingtothenext/previousobject. Ifthereisnomoreroomforscrolling
thenext/previousobjectwillbefocusednormally
lv_gridnav_remove(cont)Removesgridnavfromanobject.
9.3.2 Focusable objects
An object needs to be clickable or click focusable (LV_OBJ_FLAG_CLICKABLE or
LV_OBJ_FLAG_CLICK_FOCUSABLE) and not hidden (LV_OBJ_FLAG_HIDDEN) to be focusable by grid-
nav.
9.3.3 Example
Basicgridnavigation
#include "../../lv_examples.h"
#if LV_USE_GRIDNAV && LV_USE_FLEX && LV_BUILD_EXAMPLES
/**
* Demonstrate a a basic grid navigation
*/
void lv_example_gridnav_1(void)
{
/*It's assumed that the default group is set and
*there is a keyboard indev*/
lv_obj_t * cont1 = lv_obj_create(lv_scr_act());
lv_gridnav_add(cont1, LV_GRIDNAV_CTRL_NONE);
/*Use flex here, but works with grid or manually placed objects as well*/
lv_obj_set_flex_flow(cont1, LV_FLEX_FLOW_ROW_WRAP);
lv_obj_set_style_bg_color(cont1, lv_palette_lighten(LV_PALETTE_BLUE, 5), LV_STATE_
,→FOCUSED);
lv_obj_set_size(cont1, lv_pct(50), lv_pct(100));
/*Only the container needs to be in a group*/
lv_group_add_obj(lv_group_get_default(), cont1);
lv_obj_t * label = lv_label_create(cont1);
lv_label_set_text_fmt(label, "No rollover");
uint32_t i;
for(i = 0; i < 10; i++) {
lv_obj_t * obj = lv_btn_create(cont1);
lv_obj_set_size(obj, 70, LV_SIZE_CONTENT);
lv_obj_add_flag(obj, LV_OBJ_FLAG_CHECKABLE);
lv_group_remove_obj(obj); /*Not needed, we use the gridnav instead*/
lv_obj_t * label = lv_label_create(obj);
lv_label_set_text_fmt(label, "%d", i);
lv_obj_center(label);
}
(continuesonnextpage)
9.3. Gridnavigation 852


--- Page 857 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/* Create a second container with rollover grid nav mode.*/
lv_obj_t * cont2 = lv_obj_create(lv_scr_act());
lv_gridnav_add(cont2, LV_GRIDNAV_CTRL_ROLLOVER);
lv_obj_set_style_bg_color(cont2, lv_palette_lighten(LV_PALETTE_BLUE, 5), LV_STATE_
,→FOCUSED);
lv_obj_set_size(cont2, lv_pct(50), lv_pct(100));
lv_obj_align(cont2, LV_ALIGN_RIGHT_MID, 0, 0);
label = lv_label_create(cont2);
lv_obj_set_width(label, lv_pct(100));
lv_label_set_text_fmt(label, "Rollover\nUse tab to focus the other container");
/*Only the container needs to be in a group*/
lv_group_add_obj(lv_group_get_default(), cont2);
/*Add and place some children manually*/
lv_obj_t * ta = lv_textarea_create(cont2);
lv_obj_set_size(ta, lv_pct(100), 80);
lv_obj_set_pos(ta, 0, 80);
lv_group_remove_obj(ta); /*Not needed, we use the gridnav instead*/
lv_obj_t * cb = lv_checkbox_create(cont2);
lv_obj_set_pos(cb, 0, 170);
lv_group_remove_obj(cb); /*Not needed, we use the gridnav instead*/
lv_obj_t * sw1 = lv_switch_create(cont2);
lv_obj_set_pos(sw1, 0, 200);
lv_group_remove_obj(sw1); /*Not needed, we use the gridnav instead*/
lv_obj_t * sw2 = lv_switch_create(cont2);
lv_obj_set_pos(sw2, lv_pct(50), 200);
lv_group_remove_obj(sw2); /*Not needed, we use the gridnav instead*/
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/gridnav/lv_example_gridnav_1.py
Gridnavigationonalist
#include "../../lv_examples.h"
#if LV_USE_GRIDNAV && LV_USE_LIST && LV_BUILD_EXAMPLES
/**
* Grid navigation on a list
*/
void lv_example_gridnav_2(void)
{
/*It's assumed that the default group is set and
*there is a keyboard indev*/
lv_obj_t * list1 = lv_list_create(lv_scr_act());
(continuesonnextpage)
9.3. Gridnavigation 853


--- Page 858 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_gridnav_add(list1, LV_GRIDNAV_CTRL_NONE);
lv_obj_set_size(list1, lv_pct(45), lv_pct(80));
lv_obj_align(list1, LV_ALIGN_LEFT_MID, 5, 0);
lv_obj_set_style_bg_color(list1, lv_palette_lighten(LV_PALETTE_BLUE, 5), LV_STATE_
,→FOCUSED);
lv_group_add_obj(lv_group_get_default(), list1);
char buf[32];
uint32_t i;
for(i = 0; i < 15; i++) {
lv_snprintf(buf, sizeof(buf), "File %d", i + 1);
lv_obj_t * item = lv_list_add_btn(list1, LV_SYMBOL_FILE, buf);
lv_obj_set_style_bg_opa(item, 0, 0);
lv_group_remove_obj(item); /*Not needed, we use the gridnav instead*/
}
lv_obj_t * list2 = lv_list_create(lv_scr_act());
lv_gridnav_add(list2, LV_GRIDNAV_CTRL_ROLLOVER);
lv_obj_set_size(list2, lv_pct(45), lv_pct(80));
lv_obj_align(list2, LV_ALIGN_RIGHT_MID, -5, 0);
lv_obj_set_style_bg_color(list2, lv_palette_lighten(LV_PALETTE_BLUE, 5), LV_STATE_
,→FOCUSED);
lv_group_add_obj(lv_group_get_default(), list2);
for(i = 0; i < 15; i++) {
lv_snprintf(buf, sizeof(buf), "Folder %d", i + 1);
lv_obj_t * item = lv_list_add_btn(list2, LV_SYMBOL_DIRECTORY, buf);
lv_obj_set_style_bg_opa(item, 0, 0);
lv_group_remove_obj(item);
}
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/gridnav/lv_example_gridnav_2.py
Nestedgridnavigations
#include "../../lv_examples.h"
#if LV_USE_GRIDNAV && LV_USE_FLEX && LV_BUILD_EXAMPLES
static void cont_sub_event_cb(lv_event_t * e)
{
uint32_t k = lv_event_get_key(e);
lv_obj_t * obj = lv_event_get_current_target(e);
if(k == LV_KEY_ENTER) {
lv_group_focus_obj(obj);
}
else if(k == LV_KEY_ESC) {
lv_group_focus_next(lv_obj_get_group(obj));
}
}
(continuesonnextpage)
9.3. Gridnavigation 854


--- Page 859 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/**
* Nested grid navigations
*/
void lv_example_gridnav_3(void)
{
/*It's assumed that the default group is set and
*there is a keyboard indev*/
lv_obj_t * cont_main = lv_obj_create(lv_scr_act());
lv_gridnav_add(cont_main, LV_GRIDNAV_CTRL_ROLLOVER | LV_GRIDNAV_CTRL_SCROLL_
,→FIRST);
/*Only the container needs to be in a group*/
lv_group_add_obj(lv_group_get_default(), cont_main);
/*Use flex here, but works with grid or manually placed objects as well*/
lv_obj_set_flex_flow(cont_main, LV_FLEX_FLOW_ROW_WRAP);
lv_obj_set_style_bg_color(cont_main, lv_palette_lighten(LV_PALETTE_BLUE, 5), LV_
,→STATE_FOCUSED);
lv_obj_set_size(cont_main, lv_pct(80), LV_SIZE_CONTENT);
lv_obj_t * btn;
lv_obj_t * label;
btn = lv_btn_create(cont_main);
lv_group_remove_obj(btn);
label = lv_label_create(btn);
lv_label_set_text(label, "Button 1");
btn = lv_btn_create(cont_main);
lv_group_remove_obj(btn);
label = lv_label_create(btn);
lv_label_set_text(label, "Button 2");
/*Create an other container with long text to show how LV_GRIDNAV_CTRL_SCROLL_
,→FIRST works*/
lv_obj_t * cont_sub1 = lv_obj_create(cont_main);
lv_obj_set_size(cont_sub1, lv_pct(100), 100);
label = lv_label_create(cont_sub1);
lv_obj_set_style_bg_color(cont_sub1, lv_palette_lighten(LV_PALETTE_RED, 5), LV_
,→STATE_FOCUSED);
lv_obj_set_width(label, lv_pct(100));
lv_label_set_text(label,
"I'm a very long text which is makes my container scrollable. "
"As LV_GRIDNAV_FLAG_SCROLL_FIRST is enabled arrow will scroll␣
,→me first "
"and a new objects will be focused only when an edge is reached␣
,→with the scrolling.\n\n"
"This is only some placeholder text to be sure the parent will␣
,→be scrollable. \n\n"
"Hello world!\n"
"Hello world!\n"
"Hello world!\n"
"Hello world!\n"
"Hello world!\n"
(continuesonnextpage)
9.3. Gridnavigation 855


--- Page 860 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
"Hello world!");
/*Create a third container that can be focused with ENTER and contains an other␣
,→grid nav*/
lv_obj_t * cont_sub2 = lv_obj_create(cont_main);
lv_gridnav_add(cont_sub2, LV_GRIDNAV_CTRL_ROLLOVER);
/*Only the container needs to be in a group*/
lv_group_add_obj(lv_group_get_default(), cont_sub2);
lv_obj_add_event_cb(cont_sub2, cont_sub_event_cb, LV_EVENT_KEY, NULL);
/*Use flex here, but works with grid or manually placed objects as well*/
lv_obj_set_flex_flow(cont_sub2, LV_FLEX_FLOW_ROW_WRAP);
lv_obj_set_style_bg_color(cont_sub2, lv_palette_lighten(LV_PALETTE_RED, 5), LV_
,→STATE_FOCUSED);
lv_obj_set_size(cont_sub2, lv_pct(100), LV_SIZE_CONTENT);
label = lv_label_create(cont_sub2);
lv_label_set_text(label, "Use ENTER/ESC to focus/defocus this container");
lv_obj_set_width(label, lv_pct(100));
btn = lv_btn_create(cont_sub2);
lv_group_remove_obj(btn);
label = lv_label_create(btn);
lv_label_set_text(label, "Button 3");
btn = lv_btn_create(cont_sub2);
lv_group_remove_obj(btn);
label = lv_label_create(btn);
lv_label_set_text(label, "Button 4");
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/gridnav/lv_example_gridnav_3.py
Simplenavigationonalistwidget
#include "../../lv_examples.h"
#if LV_USE_GRIDNAV && LV_USE_FLEX && LV_BUILD_EXAMPLES
static void event_handler(lv_event_t * e)
{
lv_obj_t * obj = lv_event_get_target(e);
lv_obj_t * list = lv_obj_get_parent(obj);
LV_LOG_USER("Clicked: %s", lv_list_get_btn_text(list, obj));
}
/**
* Simple navigation on a list widget
*/
void lv_example_gridnav_4(void)
(continuesonnextpage)
9.3. Gridnavigation 856


--- Page 861 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
/*It's assumed that the default group is set and
*there is a keyboard indev*/
lv_obj_t * list = lv_list_create(lv_scr_act());
lv_gridnav_add(list, LV_GRIDNAV_CTRL_ROLLOVER);
lv_obj_align(list, LV_ALIGN_LEFT_MID, 0, 10);
lv_group_add_obj(lv_group_get_default(), list);
uint32_t i;
for(i = 0; i < 20; i++) {
char buf[32];
/*Add some separators too, they are not focusable by gridnav*/
if((i % 5) == 0) {
lv_snprintf(buf, sizeof(buf), "Section %d", i / 5 + 1);
lv_list_add_text(list, buf);
}
lv_snprintf(buf, sizeof(buf), "File %d", i + 1);
lv_obj_t * item = lv_list_add_btn(list, LV_SYMBOL_FILE, buf);
lv_obj_add_event_cb(item, event_handler, LV_EVENT_CLICKED, NULL);
lv_group_remove_obj(item); /*The default group adds it automatically*/
}
lv_obj_t * btn = lv_btn_create(lv_scr_act());
lv_obj_align(btn, LV_ALIGN_RIGHT_MID, 0, -10);
lv_obj_t * label = lv_label_create(btn);
lv_label_set_text(label, "Button");
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/gridnav/lv_example_gridnav_4.py
9.3.4 API
Typedefs
typedefint_keep_pedantic_happy
9.3. Gridnavigation 857


--- Page 862 ---


LVGLDocumentation8.3
Enums
enumlv_gridnav_ctrl_t
Values:
enumeratorLV_GRIDNAV_CTRL_NONE
enumeratorLV_GRIDNAV_CTRL_ROLLOVER
If there is no next/previous object in a direction, the focus goes to the object in the next/previous row (on
left/rightkeys)orfirst/lastrow(onup/downkeys)
enumeratorLV_GRIDNAV_CTRL_SCROLL_FIRST
Ifanarrowispressedandthefocusedobjectcanbescrolledinthatdirectionthenitwillbescrolledinstead
ofgoingtothenext/previousobject. Ifthereisnomoreroomforscrollingthenext/previousobjectwillbe
focusednormally
Functions
voidlv_gridnav_add(lv_obj_t*obj,lv_gridnav_ctrl_tctrl)
Addgridnavigationfeaturetoanobject. Itexpectsthechildrentobearrangedintoagrid-likelayout. Although
it's not required to have pixel perfect alignment. This feature makes possible to use keys to navigate among the
childrenandfocusthem. Thekeysotherthanarrowsandpress/releaserelatedeventsareforwardedtothefocused
child.
Parameters
• obj--pointertoanobjectonwhichnavigationshouldbeapplied.
• ctrl--controlflagsfromlv_gridnav_ctrl_t.
voidlv_gridnav_remove(lv_obj_t*obj)
Removethegridnavigationsupportfromanobject
Parameters obj--pointertoanobject
voidlv_gridnav_set_focused(lv_obj_t*cont,lv_obj_t*to_focus,lv_anim_enable_tanim_en)
Manuallyfocusanobjectongridnavcontainer
Parameters
• cont--pointertoagridnavcontainer
• to_focus--pointertoanobjecttofocus
• anim_en--LV_ANIM_ON/OFF
9.3. Gridnavigation 858


--- Page 863 ---


LVGLDocumentation8.3
9.4 Fragment
FragmentisaconceptcopiedfromAndroid.
Itrepresentsareusableportionofyourapp'sUI.Afragmentdefinesandmanagesitsownlayout,hasitsownlifecycle,and
canhandleitsownevents. LikeAndroid'sFragmentthatmustbehostedbyanactivityoranotherfragment,Fragmentin
LVGLneedstobehostedbyanobject,oranotherfragment. Thefragment’sviewhierarchybecomespartof,orattaches
to,thehost’sviewhierarchy.
SuchconceptalsohassomesimilaritiestoUiViewControlleroniOS.
Fragment Manager is a manager holding references to fragments attached to it, and has an internal stack to achieve
navigation. Youcanusefragmentmanagertobuildnavigationstack,ormultipaneapplicationeasily.
9.4.1 Usage
EnableLV_USE_FRAGMENTinlv_conf.h.
CreateFragmentClass
struct sample_fragment_t {
/* IMPORTANT: don't miss this part */
lv_fragment_t base;
/* States, object references and data fields for this fragment */
const char *title;
};
const lv_fragment_class_t sample_cls = {
/* Initialize something needed */
.constructor_cb = sample_fragment_ctor,
/* Create view objects */
.create_obj_cb = sample_fragment_create_obj,
/* IMPORTANT: size of your fragment struct */
.instance_size = sizeof(struct sample_fragment_t)
};
Uselv_fragment_manager
/* Create fragment instance, and objects will be added to container */
lv_fragment_manager_t *manager = lv_fragment_manager_create(container, NULL);
/* Replace current fragment with instance of sample_cls, and init_argument is user␣
,→defined pointer */
lv_fragment_manager_replace(manager, &sample_cls, init_argument);
9.4. Fragment 859


--- Page 864 ---


LVGLDocumentation8.3
FragmentBasedNavigation
/* Add one instance into manager stack. View object of current fragment will be␣
,→destroyed,
* but instances created in class constructor will be kept.
*/
lv_fragment_manager_push(manager, &sample_cls, NULL);
/* Remove the top most fragment from the stack, and bring back previous one. */
lv_fragment_manager_pop(manager);
9.4.2 Example
Basicfragmentusage
/**
* @file lv_example_fragment_1.c
* @brief Basic usage of obj fragment
*/
#include "../../lv_examples.h"
#if LV_USE_FRAGMENT && LV_BUILD_EXAMPLES
static void sample_fragment_ctor(lv_fragment_t * self, void * args);
static lv_obj_t * sample_fragment_create_obj(lv_fragment_t * self, lv_obj_t * parent);
static void sample_container_del(lv_event_t * e);
static lv_obj_t * root = NULL;
struct sample_fragment_t {
lv_fragment_t base;
const char * name;
};
static const lv_fragment_class_t sample_cls = {
.constructor_cb = sample_fragment_ctor,
.create_obj_cb = sample_fragment_create_obj,
.instance_size = sizeof(struct sample_fragment_t)
};
void lv_example_fragment_1(void)
{
root = lv_obj_create(lv_scr_act());
lv_obj_set_size(root, LV_PCT(100), LV_PCT(100));
lv_fragment_manager_t * manager = lv_fragment_manager_create(NULL);
/* Clean up the fragment manager before objects in containers got deleted */
lv_obj_add_event_cb(root, sample_container_del, LV_EVENT_DELETE, manager);
lv_fragment_t * fragment = lv_fragment_create(&sample_cls, "Fragment");
lv_fragment_manager_replace(manager, fragment, &root);
}
static void sample_fragment_ctor(lv_fragment_t * self, void * args)
(continuesonnextpage)
9.4. Fragment 860


--- Page 865 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
((struct sample_fragment_t *) self)->name = args;
}
static lv_obj_t * sample_fragment_create_obj(lv_fragment_t * self, lv_obj_t * parent)
{
lv_obj_t * label = lv_label_create(parent);
lv_obj_set_style_bg_opa(label, LV_OPA_COVER, 0);;
lv_label_set_text_fmt(label, "Hello, %s!", ((struct sample_fragment_t *) self)->
,→name);
return label;
}
static void sample_container_del(lv_event_t * e)
{
lv_fragment_manager_t * manager = (lv_fragment_manager_t *) lv_event_get_user_
,→data(e);
lv_fragment_manager_del(manager);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/fragment/lv_example_fragment_1.py
Stacknavigationexample
/**
* @file lv_example_fragment_2.c
* @brief Navigation stack using obj fragment
*/
#include "../../lv_examples.h"
#if LV_USE_FRAGMENT && LV_USE_WIN && LV_BUILD_EXAMPLES
static void sample_fragment_ctor(lv_fragment_t * self, void * args);
static lv_obj_t * sample_fragment_create_obj(lv_fragment_t * self, lv_obj_t * parent);
static void sample_push_click(lv_event_t * e);
static void sample_pop_click(lv_event_t * e);
static void sample_container_del(lv_event_t * e);
static void sample_fragment_inc_click(lv_event_t * e);
typedef struct sample_fragment_t {
lv_fragment_t base;
lv_obj_t * label;
int depth;
int counter;
} sample_fragment_t;
(continuesonnextpage)
9.4. Fragment 861


--- Page 866 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
static const lv_fragment_class_t sample_cls = {
.constructor_cb = sample_fragment_ctor,
.create_obj_cb = sample_fragment_create_obj,
.instance_size = sizeof(sample_fragment_t)
};
static lv_obj_t * container = NULL;
void lv_example_fragment_2(void)
{
lv_obj_t * root = lv_obj_create(lv_scr_act());
lv_obj_set_size(root, LV_PCT(100), LV_PCT(100));
lv_obj_set_layout(root, LV_LAYOUT_GRID);
static const lv_coord_t col_dsc[] = {LV_GRID_FR(1), LV_GRID_FR(1), LV_GRID_
,→TEMPLATE_LAST};
static const lv_coord_t row_dsc[] = {LV_GRID_FR(1), LV_GRID_CONTENT, LV_GRID_
,→TEMPLATE_LAST};
lv_obj_set_grid_dsc_array(root, col_dsc, row_dsc);
container = lv_obj_create(root);
lv_obj_remove_style_all(container);
lv_obj_set_grid_cell(container, LV_GRID_ALIGN_STRETCH, 0, 2, LV_GRID_ALIGN_
,→STRETCH, 0, 1);
lv_obj_t * push_btn = lv_btn_create(root);
lv_obj_t * push_label = lv_label_create(push_btn);
lv_label_set_text(push_label, "Push");
lv_obj_t * pop_btn = lv_btn_create(root);
lv_obj_t * pop_label = lv_label_create(pop_btn);
lv_label_set_text(pop_label, "Pop");
lv_obj_set_grid_cell(push_btn, LV_GRID_ALIGN_START, 0, 1, LV_GRID_ALIGN_CENTER, 1,
,→ 1);
lv_obj_set_grid_cell(pop_btn, LV_GRID_ALIGN_END, 1, 1, LV_GRID_ALIGN_CENTER, 1,␣
,→1);
lv_fragment_manager_t * manager = lv_fragment_manager_create(NULL);
/* Clean up the fragment manager before objects in containers got deleted */
lv_obj_add_event_cb(root, sample_container_del, LV_EVENT_DELETE, manager);
int depth = 0;
lv_fragment_t * fragment = lv_fragment_create(&sample_cls, &depth);
lv_fragment_manager_push(manager, fragment, &container);
lv_obj_add_event_cb(push_btn, sample_push_click, LV_EVENT_CLICKED, manager);
lv_obj_add_event_cb(pop_btn, sample_pop_click, LV_EVENT_CLICKED, manager);
}
static void sample_fragment_ctor(lv_fragment_t * self, void * args)
{
LV_UNUSED(args);
((sample_fragment_t *) self)->depth = *((int *) args);
((sample_fragment_t *) self)->counter = 0;
}
static lv_obj_t * sample_fragment_create_obj(lv_fragment_t * self, lv_obj_t * parent)
{
sample_fragment_t * fragment = (sample_fragment_t *) self;
lv_obj_t * content = lv_obj_create(parent);
(continuesonnextpage)
9.4. Fragment 862


--- Page 867 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_remove_style_all(content);
lv_obj_set_style_bg_opa(content, LV_OPA_50, 0);
lv_obj_set_style_bg_color(content, lv_palette_main(LV_PALETTE_YELLOW), 0);
lv_obj_set_size(content, LV_PCT(100), LV_PCT(100));
lv_obj_set_flex_flow(content, LV_FLEX_FLOW_COLUMN);
lv_obj_t * depth = lv_label_create(content);
lv_label_set_text_fmt(depth, "Depth: %d", fragment->depth);
lv_obj_t * label = lv_label_create(content);
fragment->label = label;
lv_label_set_text_fmt(label, "The button has been pressed %d times", fragment->
,→counter);
lv_obj_t * inc_btn = lv_btn_create(content);
lv_obj_t * inc_label = lv_label_create(inc_btn);
lv_label_set_text(inc_label, "+1");
lv_obj_add_event_cb(inc_btn, sample_fragment_inc_click, LV_EVENT_CLICKED,␣
,→fragment);
return content;
}
static void sample_push_click(lv_event_t * e)
{
lv_fragment_manager_t * manager = (lv_fragment_manager_t *) lv_event_get_user_
,→data(e);
size_t stack_size = lv_fragment_manager_get_stack_size(manager);
lv_fragment_t * fragment = lv_fragment_create(&sample_cls, &stack_size);
lv_fragment_manager_push(manager, fragment, &container);
}
static void sample_pop_click(lv_event_t * e)
{
lv_fragment_manager_t * manager = (lv_fragment_manager_t *) lv_event_get_user_
,→data(e);
lv_fragment_manager_pop(manager);
}
static void sample_container_del(lv_event_t * e)
{
lv_fragment_manager_t * manager = (lv_fragment_manager_t *) lv_event_get_user_
,→data(e);
lv_fragment_manager_del(manager);
}
static void sample_fragment_inc_click(lv_event_t * e)
{
sample_fragment_t * fragment = (sample_fragment_t *) lv_event_get_user_data(e);
fragment->counter++;
lv_label_set_text_fmt(fragment->label, "The button has been pressed %d times",␣
,→fragment->counter);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/fragment/lv_example_fragment_2.py
9.4. Fragment 863


--- Page 868 ---


LVGLDocumentation8.3
language c
9.4.3 API
PublicheaderforFragment
Typedefs
typedefstruct_lv_fragment_manager_tlv_fragment_manager_t
typedefstruct_lv_fragment_tlv_fragment_t
typedefstruct_lv_fragment_class_tlv_fragment_class_t
typedefstruct_lv_fragment_managed_states_tlv_fragment_managed_states_t
Fragmentstates
Functions
lv_fragment_manager_t*lv_fragment_manager_create(lv_fragment_t*parent)
Createfragmentmanagerinstance
Parameters parent--Parentfragmentifthismanagerisplacedinsideanotherfragment,canbenull.
Returns Fragmentmanagerinstance
voidlv_fragment_manager_del(lv_fragment_manager_t*manager)
Destroyfragmentmanagerinstance
Parameters manager--Fragmentmanagerinstance
voidlv_fragment_manager_create_obj(lv_fragment_manager_t*manager)
Createobjectofallfragmentsmanagedbythismanager.
Parameters manager--Fragmentmanagerinstance
voidlv_fragment_manager_del_obj(lv_fragment_manager_t*manager)
Deleteobjectcreatedbyallfragmentsmanagedbythismanager. Instanceoffragmentswillnotbedeleted.
Parameters manager--Fragmentmanagerinstance
voidlv_fragment_manager_add(lv_fragment_manager_t*manager,lv_fragment_t*fragment,lv_obj_t*const
*container)
Attachfragmenttomanager,andaddtocontainer.
Parameters
• manager--Fragmentmanagerinstance
• fragment--Fragmentinstance
• container--Pointertocontainerobjectformanagertoaddobjectsto
9.4. Fragment 864


--- Page 869 ---


LVGLDocumentation8.3
voidlv_fragment_manager_remove(lv_fragment_manager_t*manager,lv_fragment_t*fragment)
Detachanddestroyfragment. Iffragmentisinnavigationstack,removefromit.
Parameters
• manager--Fragmentmanagerinstance
• fragment--Fragmentinstance
voidlv_fragment_manager_push(lv_fragment_manager_t*manager,lv_fragment_t*fragment,lv_obj_t
*const*container)
Attachfragmenttomanagerandaddtonavigationstack.
Parameters
• manager--Fragmentmanagerinstance
• fragment--Fragmentinstance
• container--Pointertocontainerobjectformanagertoaddobjectsto
boollv_fragment_manager_pop(lv_fragment_manager_t*manager)
Removethetop-mostfragmentforstack
Parameters manager--Fragmentmanagerinstance
Returns trueifthereisfragmenttopop
voidlv_fragment_manager_replace(lv_fragment_manager_t*manager,lv_fragment_t*fragment,lv_obj_t
*const*container)
Replacefragment. Olditeminthestackwillberemoved.
Parameters
• manager--Fragmentmanagerinstance
• fragment--Fragmentinstance
• container--Pointertocontainerobjectformanagertoaddobjectsto
boollv_fragment_manager_send_event(lv_fragment_manager_t*manager,intcode,void*userdata)
Sendeventtotop-mostfragment
Parameters
• manager--Fragmentmanagerinstance
• code--User-definedIDofevent
• userdata--User-defineddata
Returns trueiffragmentreturnedtrue
size_tlv_fragment_manager_get_stack_size(lv_fragment_manager_t*manager)
Getstacksizeofthisfragmentmanager
Parameters manager--Fragmentmanagerinstance
Returns Stacksizeofthisfragmentmanager
lv_fragment_t*lv_fragment_manager_get_top(lv_fragment_manager_t*manager)
Gettopmostfragmentinstance
Parameters manager--Fragmentmanagerinstance
Returns Topmostfragmentinstance
9.4. Fragment 865


--- Page 870 ---


LVGLDocumentation8.3
lv_fragment_t*lv_fragment_manager_find_by_container(lv_fragment_manager_t*manager,const
lv_obj_t*container)
Findfirstfragmentinstanceinthecontainer
Parameters
• manager--Fragmentmanagerinstance
• container--Containerwhichtargetfragmentaddedto
Returns Firstfragmentinstanceinthecontainer
lv_fragment_t*lv_fragment_manager_get_parent_fragment(lv_fragment_manager_t*manager)
Getparentfragment
Parameters manager--Fragmentmanagerinstance
Returns Parentfragmentinstance
lv_fragment_t*lv_fragment_create(constlv_fragment_class_t*cls,void*args)
Createafragmentinstance.
Parameters
• cls--Fragmentclass. Thisfragmentmustreturnnonnullobject.
• args--Argumentsassignedbyfragmentmanager
Returns Fragmentinstance
voidlv_fragment_del(lv_fragment_t*fragment)
Destroyafragment.
Parameters fragment--Fragmentinstance.
lv_fragment_manager_t*lv_fragment_get_manager(lv_fragment_t*fragment)
Getassociatedmanagerofthisfragment
Parameters fragment--Fragmentinstance
Returns Fragmentmanagerinstance
lv_obj_t*const*lv_fragment_get_container(lv_fragment_t*fragment)
Getcontainerobjectofthisfragment
Parameters fragment--Fragmentinstance
Returns Referencetocontainerobject
lv_fragment_t*lv_fragment_get_parent(lv_fragment_t*fragment)
Getparentfragmentofthisfragment
Parameters fragment--Fragmentinstance
Returns Parentfragment
lv_obj_t*lv_fragment_create_obj(lv_fragment_t*fragment,lv_obj_t*container)
Createobjectbyfragment.
Parameters
• fragment--Fragmentinstance.
• container--Containeroftheobjectsshouldbecreatedupon.
Returns Createdobject
9.4. Fragment 866


--- Page 871 ---


LVGLDocumentation8.3
voidlv_fragment_del_obj(lv_fragment_t*fragment)
Deletecreatedobjectofafragment
Parameters fragment--Fragmentinstance.
voidlv_fragment_recreate_obj(lv_fragment_t*fragment)
Destroyobjinfragment,andrecreatethem.
Parameters fragment--Fragmentinstance
struct_lv_fragment_t
PublicMembers
constlv_fragment_class_t*cls
Classofthisfragment
lv_fragment_managed_states_t*managed
Managedfragmentstates. Ifnotnull,thenthisfragmentismanaged.
Warning: Don'tmodifyvaluesinsidethisstruct!
lv_fragment_manager_t*child_manager
Childfragmentmanager
lv_obj_t*obj
lv_objreturnedbycreate_obj_cb
struct_lv_fragment_class_t
PublicMembers
void(*constructor_cb)(lv_fragment_t*self,void*args)
Constructorfunctionforfragmentclass
Paramself Fragmentinstance
Paramargs Argumentsassignedbyfragmentmanager
void(*destructor_cb)(lv_fragment_t*self)
Destructorfunctionforfragmentclass
Paramself Fragmentinstance,willbefreedafterthiscall
void(*attached_cb)(lv_fragment_t*self)
Fragmentattachedtomanager
Paramself Fragmentinstance
9.4. Fragment 867


--- Page 872 ---


LVGLDocumentation8.3
void(*detached_cb)(lv_fragment_t*self)
Fragmentdetachedfrommanager
Paramself Fragmentinstance
lv_obj_t*(*create_obj_cb)(lv_fragment_t*self,lv_obj_t*container)
Createobjects
Paramself Fragmentinstance
Paramcontainer Containeroftheobjectsshouldbecreatedupon
Return Createdobject,NULLifmultipleobjectshasbeencreated
void(*obj_created_cb)(lv_fragment_t*self,lv_obj_t*obj)
Paramself Fragmentinstance
Paramobj lv_objreturnedbycreate_obj_cb
void(*obj_will_delete_cb)(lv_fragment_t*self,lv_obj_t*obj)
Calledbeforeobjectsinthefragmentwillbedeleted.
Paramself Fragmentinstance
Paramobj objectwiththisfragment
void(*obj_deleted_cb)(lv_fragment_t*self,lv_obj_t*obj)
CalledwhentheobjectcreatedbyfragmentreceivedLV_EVENT_DELETEevent
Paramself Fragmentinstance
Paramobj objectwiththisfragment
bool(*event_cb)(lv_fragment_t*self,intcode,void*userdata)
Handleevent
Paramself Fragmentinstance
Paramwhich User-definedIDofevent
Paramdata1 User-defineddata
Paramdata2 User-defineddata
size_tinstance_size
REQUIRED:Allocationsizeoffragment
struct_lv_fragment_managed_states_t
#include<lv_fragment.h>Fragmentstates
9.4. Fragment 868


--- Page 873 ---


LVGLDocumentation8.3
PublicMembers
constlv_fragment_class_t*cls
Classofthefragment
lv_fragment_manager_t*manager
Managerthefragmentattachedto
lv_obj_t*const*container
Containerobjectthefragmentaddingviewto
lv_fragment_t*instance
Fragmentinstance
boolobj_created
truebetweencreate_obj_cbandobj_deleted_cb
booldestroying_obj
truebeforelv_fragment_del_objiscalled. Don'ttouchanyobjectifthisistrue
boolin_stack
trueifthisfragmentisinnavigationstackthatcanbepopped
9.5 Messaging
Messaging(lv_msg)isaclassic[]publishersubscriber](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)
implementationforLVGL.
9.5.1 IDs
Boththepublishersandthesubscribersneedstoknowthemessageidentifiers. Inlv_msgthesearesimpleuint32_t
integers. Forexample:
#define MSG_DOOR_OPENED 1
#define MSG_DOOR_CLOSED 2
#define MSG_USER_NAME_CHANGED 100
#define MSG_USER_AVATAR_CHANGED 101
YoucanorgnaizethemessageIDsasyouwish.
Both parties also need to know about the format of teh payload. E.g. in the above example MSG_DOOR_OPENED
andMSG_DOOR_CLOSEDhasnopayloadbutMSG_USER_NAME_CHANGEDcanhaveaconst char *payload
containingtheusername,andMSG_USER_AVATAR_CHANGEDaconst void *imagesourcewiththenewavatar
image.
9.5. Messaging 869


--- Page 874 ---


LVGLDocumentation8.3
9.5.2 Send message
Messagescanbesentwithlv_msg_send(msg_id, payload). E.g.
lv_msg_send(MSG_USER_DOOR_OPENED, NULL);
lv_msg_send(MSG_USER_NAME_CHANGED, "John Smith");
9.5.3 Subscribe to a message
lv_msg_subscribe(msg_id, callback, user_data)canbeusedtosubscribetomessage.
Thecallbackshouldlooklikethis:
static void user_name_subscriber_cb(void * s, lv_msg_t * m)
{
/*s: a subscriber obeject, can be used to unscubscribe*/
/*m: a message object with the msg_id, payload, and user_data (set durung␣
,→subscription)*/
...do something...
}
Fromlv_msg_tthefollowingscanbeusedtogetsomedata:
• lv_msg_get_id(m)
• lv_msg_get_payload(m)
• lv_msg_get_user_data(m)
9.5.4 Subscribe with an lv_obj
It's quite typical that an LVGL widget is interested in some messages. To make it simpler
lv_msg_subsribe_obj(msg_id, obj, user_data) can be used. If a new message is published
withmsg_idanLV_EVENT_MSG_RECEIVEDeventwillbesenttotheobject.
Forexample:
lv_obj_add_event_cb(user_name_label, user_name_label_event_cb, LV_EVENT_MSG_RECEIVED,␣
,→NULL);
lv_msg_subsribe_obj(MSG_USER_NAME_CHANGED, user_name_label, NULL);
...
void user_name_label_event_cb(lv_event_t * e)
{
lv_obj_t * label = lv_event_get_target(e);
lv_msg_t * m = lv_event_get_msg(e);
lv_label_set_text(label, lv_msg_get_payload(m));
}
9.5. Messaging 870


--- Page 875 ---


LVGLDocumentation8.3
Unsubscribe
lv_msg_subscribereturnsapointerwhichcanbeusedtounsubscribe:
void * s1;
s1 = lv_msg_subscribe(MSG_USER_DOOR_OPENED, some_callback, NULL);
...
lv_msg_unsubscribe(s1);
9.5.5 Example
Slidertolabelmessaging
#include "../../lv_examples.h"
#if LV_USE_MSG && LV_USE_SLIDER && LV_USE_LABEL && LV_BUILD_EXAMPLES
/*Define a message ID*/
#define MSG_NEW_TEMPERATURE 1
static void slider_event_cb(lv_event_t * e);
static void label_event_cb(lv_event_t * e);
/**
* A slider sends a message on value change and a label display's that value
*/
void lv_example_msg_1(void)
{
/*Create a slider in the center of the display*/
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_center(slider);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);
/*Create a label below the slider*/
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_obj_add_event_cb(label, label_event_cb, LV_EVENT_MSG_RECEIVED, NULL);
lv_label_set_text(label, "0%");
lv_obj_align(label, LV_ALIGN_CENTER, 0, 30);
/*Subscribe the label to a message. Also use the user_data to set a format string␣
,→here.*/
lv_msg_subsribe_obj(MSG_NEW_TEMPERATURE, label, "%d °C");
}
static void slider_event_cb(lv_event_t * e)
{
/*Notify all subscribers (only the label now) that the slider value has been␣
,→changed*/
lv_obj_t * slider = lv_event_get_target(e);
int32_t v = lv_slider_get_value(slider);
lv_msg_send(MSG_NEW_TEMPERATURE, &v);
}
static void label_event_cb(lv_event_t * e)
(continuesonnextpage)
9.5. Messaging 871


--- Page 876 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
{
lv_obj_t * label = lv_event_get_target(e);
lv_msg_t * m = lv_event_get_msg(e);
const char * fmt = lv_msg_get_user_data(m);
const int32_t * v = lv_msg_get_payload(m);
lv_label_set_text_fmt(label, fmt, *v);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/msg/lv_example_msg_1.py
Handlingloginanditsstates
#include "../../lv_examples.h"
#if LV_USE_MSG && LV_USE_SLIDER && LV_USE_LABEL && LV_BUILD_EXAMPLES
/*Define a message ID*/
#define MSG_LOGIN_ATTEMPT 1
#define MSG_LOG_OUT 2
#define MSG_LOGIN_ERROR 3
#define MSG_LOGIN_OK 4
static void auth_manager(void * s, lv_msg_t * m);
static void textarea_event_cb(lv_event_t * e);
static void log_out_event_cb(lv_event_t * e);
static void start_engine_msg_event_cb(lv_event_t * e);
static void info_label_msg_event_cb(lv_event_t * e);
/**
* Simple PIN login screen.
* No global variables are used, all state changes are communicated via messages.
*/
void lv_example_msg_2(void)
{
lv_msg_subsribe(MSG_LOGIN_ATTEMPT, auth_manager, "hello");
/*Create a slider in the center of the display*/
lv_obj_t * ta = lv_textarea_create(lv_scr_act());
lv_obj_set_pos(ta, 10, 10);
lv_obj_set_width(ta, 200);
lv_textarea_set_one_line(ta, true);
lv_textarea_set_password_mode(ta, true);
lv_textarea_set_placeholder_text(ta, "The password is: hello");
lv_obj_add_event_cb(ta, textarea_event_cb, LV_EVENT_ALL, NULL);
lv_msg_subsribe_obj(MSG_LOGIN_ERROR, ta, NULL);
lv_msg_subsribe_obj(MSG_LOGIN_OK, ta, NULL);
lv_msg_subsribe_obj(MSG_LOG_OUT, ta, NULL);
lv_obj_t * kb = lv_keyboard_create(lv_scr_act());
lv_keyboard_set_textarea(kb, ta);
(continuesonnextpage)
9.5. Messaging 872


--- Page 877 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_obj_t * btn;
lv_obj_t * label;
/*Create a log out button which will be active only when logged in*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_pos(btn, 240, 10);
lv_obj_add_event_cb(btn, log_out_event_cb, LV_EVENT_ALL, NULL);
lv_msg_subsribe_obj(MSG_LOGIN_OK, btn, NULL);
lv_msg_subsribe_obj(MSG_LOG_OUT, btn, NULL);
label = lv_label_create(btn);
lv_label_set_text(label, "LOG OUT");
/*Create a label to show info*/
label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "");
lv_obj_add_event_cb(label, info_label_msg_event_cb, LV_EVENT_MSG_RECEIVED, NULL);
lv_obj_set_pos(label, 10, 60);
lv_msg_subsribe_obj(MSG_LOGIN_ERROR, label, NULL);
lv_msg_subsribe_obj(MSG_LOGIN_OK, label, NULL);
lv_msg_subsribe_obj(MSG_LOG_OUT, label, NULL);
/*Create button which will be active only when logged in*/
btn = lv_btn_create(lv_scr_act());
lv_obj_set_pos(btn, 10, 80);
lv_obj_add_event_cb(btn, start_engine_msg_event_cb, LV_EVENT_MSG_RECEIVED, NULL);
lv_obj_add_flag(btn, LV_OBJ_FLAG_CHECKABLE);
lv_msg_subsribe_obj(MSG_LOGIN_OK, btn, NULL);
lv_msg_subsribe_obj(MSG_LOG_OUT, btn, NULL);
label = lv_label_create(btn);
lv_label_set_text(label, "START ENGINE");
lv_msg_send(MSG_LOG_OUT, NULL);
}
static void auth_manager(void * s, lv_msg_t * m)
{
LV_UNUSED(s);
const char * pin_act = lv_msg_get_payload(m);
const char * pin_expexted = lv_msg_get_user_data(m);
if(strcmp(pin_act, pin_expexted) == 0) {
lv_msg_send(MSG_LOGIN_OK, NULL);
}
else {
lv_msg_send(MSG_LOGIN_ERROR, "Incorrect PIN");
}
}
static void textarea_event_cb(lv_event_t * e)
{
lv_obj_t * ta = lv_event_get_target(e);
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_READY) {
lv_msg_send(MSG_LOGIN_ATTEMPT, lv_textarea_get_text(ta));
(continuesonnextpage)
9.5. Messaging 873


--- Page 878 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
}
else if(code == LV_EVENT_MSG_RECEIVED) {
lv_msg_t * m = lv_event_get_msg(e);
switch(lv_msg_get_id(m)) {
case MSG_LOGIN_ERROR:
/*If there was an error, clean the text area*/
if(strlen(lv_msg_get_payload(m))) lv_textarea_set_text(ta, "");
break;
case MSG_LOGIN_OK:
lv_obj_add_state(ta, LV_STATE_DISABLED);
lv_obj_clear_state(ta, LV_STATE_FOCUSED | LV_STATE_FOCUS_KEY);
break;
case MSG_LOG_OUT:
lv_textarea_set_text(ta, "");
lv_obj_clear_state(ta, LV_STATE_DISABLED);
break;
}
}
}
static void log_out_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED) {
lv_msg_send(MSG_LOG_OUT, NULL);
}
else if(code == LV_EVENT_MSG_RECEIVED) {
lv_msg_t * m = lv_event_get_msg(e);
lv_obj_t * btn = lv_event_get_target(e);
switch(lv_msg_get_id(m)) {
case MSG_LOGIN_OK:
lv_obj_clear_state(btn, LV_STATE_DISABLED);
break;
case MSG_LOG_OUT:
lv_obj_add_state(btn, LV_STATE_DISABLED);
break;
}
}
}
static void start_engine_msg_event_cb(lv_event_t * e)
{
lv_msg_t * m = lv_event_get_msg(e);
lv_obj_t * btn = lv_event_get_target(e);
switch(lv_msg_get_id(m)) {
case MSG_LOGIN_OK:
lv_obj_clear_state(btn, LV_STATE_DISABLED);
break;
case MSG_LOG_OUT:
lv_obj_add_state(btn, LV_STATE_DISABLED);
break;
}
}
static void info_label_msg_event_cb(lv_event_t * e)
{
lv_obj_t * label = lv_event_get_target(e);
(continuesonnextpage)
9.5. Messaging 874


--- Page 879 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_msg_t * m = lv_event_get_msg(e);
switch(lv_msg_get_id(m)) {
case MSG_LOGIN_ERROR:
lv_label_set_text(label, lv_msg_get_payload(m));
lv_obj_set_style_text_color(label, lv_palette_main(LV_PALETTE_RED), 0);
break;
case MSG_LOGIN_OK:
lv_label_set_text(label, "Login successful");
lv_obj_set_style_text_color(label, lv_palette_main(LV_PALETTE_GREEN), 0);
break;
case MSG_LOG_OUT:
lv_label_set_text(label, "Logged out");
lv_obj_set_style_text_color(label, lv_palette_main(LV_PALETTE_GREY), 0);
break;
default:
break;
}
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/msg/lv_example_msg_2.py
Settingthesamevaluefrommanysources
#include "../../lv_examples.h"
#if LV_USE_MSG && LV_USE_SLIDER && LV_USE_LABEL && LV_BUILD_EXAMPLES
/*Define a message ID*/
#define MSG_INC 1
#define MSG_DEC 2
#define MSG_SET 3
#define MSG_UPDATE 4
#define MSG_UPDATE_REQUEST 5
static void value_handler(void * s, lv_msg_t * m);
static void value_handler(void * s, lv_msg_t * m);
static void btn_event_cb(lv_event_t * e);
static void label_event_cb(lv_event_t * e);
static void slider_event_cb(lv_event_t * e);
/**
* Show how an increment button, a decrement button, as slider can set a value
* and a label display it.
* The current value (i.e. the system's state) is stored only in one static variable␣
,→in a function
* and no global variables are required.
*/
void lv_example_msg_3(void)
{
lv_msg_subsribe(MSG_INC, value_handler, NULL);
lv_msg_subsribe(MSG_DEC, value_handler, NULL);
(continuesonnextpage)
9.5. Messaging 875


--- Page 880 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_msg_subsribe(MSG_SET, value_handler, NULL);
lv_msg_subsribe(MSG_UPDATE, value_handler, NULL);
lv_msg_subsribe(MSG_UPDATE_REQUEST, value_handler, NULL);
lv_obj_t * panel = lv_obj_create(lv_scr_act());
lv_obj_set_size(panel, 250, LV_SIZE_CONTENT);
lv_obj_center(panel);
lv_obj_set_flex_flow(panel, LV_FLEX_FLOW_ROW);
lv_obj_set_flex_align(panel, LV_FLEX_ALIGN_SPACE_BETWEEN, LV_FLEX_ALIGN_CENTER,␣
,→LV_FLEX_ALIGN_START);
lv_obj_t * btn;
lv_obj_t * label;
/*Up button*/
btn = lv_btn_create(panel);
lv_obj_set_flex_grow(btn, 1);
lv_obj_add_event_cb(btn, btn_event_cb, LV_EVENT_ALL, NULL);
label = lv_label_create(btn);
lv_label_set_text(label, LV_SYMBOL_LEFT);
lv_obj_center(label);
/*Current value*/
label = lv_label_create(panel);
lv_obj_set_flex_grow(label, 2);
lv_obj_set_style_text_align(label, LV_TEXT_ALIGN_CENTER, 0);
lv_label_set_text(label, "?");
lv_msg_subsribe_obj(MSG_UPDATE, label, NULL);
lv_obj_add_event_cb(label, label_event_cb, LV_EVENT_MSG_RECEIVED, NULL);
/*Down button*/
btn = lv_btn_create(panel);
lv_obj_set_flex_grow(btn, 1);
lv_obj_add_event_cb(btn, btn_event_cb, LV_EVENT_ALL, NULL);
label = lv_label_create(btn);
lv_label_set_text(label, LV_SYMBOL_RIGHT);
lv_obj_center(label);
/*Slider*/
lv_obj_t * slider = lv_slider_create(panel);
lv_obj_set_flex_grow(slider, 1);
lv_obj_add_flag(slider, LV_OBJ_FLAG_FLEX_IN_NEW_TRACK);
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_ALL, NULL);
lv_msg_subsribe_obj(MSG_UPDATE, slider, NULL);
/* As there are new UI elements that don't know the system's state
* send an UPDATE REQUEST message which will trigger an UPDATE message with the␣
,→current value*/
lv_msg_send(MSG_UPDATE_REQUEST, NULL);
}
static void value_handler(void * s, lv_msg_t * m)
{
LV_UNUSED(s);
static int32_t value = 10;
int32_t old_value = value;
(continuesonnextpage)
9.5. Messaging 876


--- Page 881 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
switch(lv_msg_get_id(m)) {
case MSG_INC:
if(value < 100) value++;
break;
case MSG_DEC:
if(value > 0) value--;
break;
case MSG_SET: {
const int32_t * new_value = lv_msg_get_payload(m);
value = *new_value;
}
break;
case MSG_UPDATE_REQUEST:
lv_msg_send(MSG_UPDATE, &value);
break;
default:
break;
}
if(value != old_value) {
lv_msg_send(MSG_UPDATE, &value);
}
}
static void btn_event_cb(lv_event_t * e)
{
lv_obj_t * btn = lv_event_get_target(e);
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_CLICKED || code == LV_EVENT_LONG_PRESSED_REPEAT) {
if(lv_obj_get_index(btn) == 0) { /*First object is the dec. button*/
lv_msg_send(MSG_DEC, NULL);
}
else {
lv_msg_send(MSG_INC, NULL);
}
}
}
static void label_event_cb(lv_event_t * e)
{
lv_obj_t * label = lv_event_get_target(e);
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_MSG_RECEIVED) {
lv_msg_t * m = lv_event_get_msg(e);
if(lv_msg_get_id(m) == MSG_UPDATE) {
const int32_t * v = lv_msg_get_payload(m);
lv_label_set_text_fmt(label, "%d %%", *v);
}
}
}
static void slider_event_cb(lv_event_t * e)
{
lv_obj_t * slider = lv_event_get_target(e);
lv_event_code_t code = lv_event_get_code(e);
if(code == LV_EVENT_VALUE_CHANGED) {
int32_t v = lv_slider_get_value(slider);
(continuesonnextpage)
9.5. Messaging 877


--- Page 882 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_msg_send(MSG_SET, &v);
}
else if(code == LV_EVENT_MSG_RECEIVED) {
lv_msg_t * m = lv_event_get_msg(e);
if(lv_msg_get_id(m) == MSG_UPDATE) {
const int32_t * v = lv_msg_get_payload(m);
lv_slider_set_value(slider, *v, LV_ANIM_OFF);
}
}
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/msg/lv_example_msg_3.py
9.5.6 API
Typedefs
typedefvoid(*lv_msg_subscribe_cb_t)(void*s,lv_msg_t*msg)
typedefvoid(*lv_msg_request_cb_t)(void*r,uint32_tmsg_id)
Functions
LV_EXPORT_CONST_INT(LV_MSG_ID_ANY)
voidlv_msg_init(void)
Calledinternallytoinitializethemessagemodule
void*lv_msg_subsribe(uint32_tmsg_id,lv_msg_subscribe_cb_tcb,void*user_data)
Subscribetoanmsg_id
Parameters
• msg_id--themessageIDtolistento
• cb--callbacktocallifamessagewithmsg_idwassent
• user_data--arbitrarydatawhichwillbeavailableincbtoo
Returns pointertoa"subscribeobject". Itcanbeusedtheunsubscribe.
void*lv_msg_subsribe_obj(uint32_tmsg_id,lv_obj_t*obj,void*user_data)
Subscribeanlv_objtoamessage. LV_EVENT_MSG_RECEIVEDwillbetriggeredifamessagewithmatching
IDwassent
Parameters
• msg_id--themessageIDtolistento
• obj--pointertoanlv_obj
• user_data--arbitrarydatawhichwillbeavailableincbtoo
9.5. Messaging 878


--- Page 883 ---


LVGLDocumentation8.3
Returns pointertoa"subscribeobject". Itcanbeusedtheunsubscribe.
voidlv_msg_unsubscribe(void*s)
Cancelaprevioussubscription
Parameters s -- pointer to a "subscibe object". Return value of lv_msg_subsribe or
lv_msg_subsribe_obj
uint32_tlv_msg_unsubscribe_obj(uint32_tmsg_id,lv_obj_t*obj)
UnsubscribeanobjectfromamessageID
Parameters
• msg_id--themessageIDtounsubcribefromorLV_MSG_ID_ANYforanymessageID
• obj--theobjecttounsubscribeorNULLforanyobject
Returns numberofunsubscriptions
voidlv_msg_send(uint32_tmsg_id,constvoid*payload)
SendamessagewithagivenIDandpayload
Parameters
• msg_id--IDofthemessagetosend
• data--pointertothedatatosend
uint32_tlv_msg_get_id(lv_msg_t*m)
GettheIDofamessageobject. Typicallyusedinthesubscribercallback.
Parameters m--pointertoamessageobject
Returns theIDofthemessage
constvoid*lv_msg_get_payload(lv_msg_t*m)
Getthepayloadofamessageobject. Typicallyusedinthesubscribercallback.
Parameters m--pointertoamessageobject
Returns thepayloadofthemessage
void*lv_msg_get_user_data(lv_msg_t*m)
Gettheuserdataofamessageobject. Typicallyusedinthesubscribercallback.
Parameters m--pointertoamessageobject
Returns theuserdataofthemessage
lv_msg_t*lv_event_get_msg(lv_event_t*e)
Getthemessageobjectfromaneventobject. CanbeusedinLV_EVENT_MSG_RECEIVEDevents.
Parameters e--pointertoaneventobject
Returns themessageobjectorNULLifcalledwithunrelatedeventcode.
staticinlinevoid*lv_msg_subscribe(uint32_tmsg_id,lv_msg_subscribe_cb_tcb,void*user_data)
staticinlinevoid*lv_msg_subscribe_obj(uint32_tmsg_id,lv_obj_t*obj,void*user_data)
9.5. Messaging 879


--- Page 884 ---


LVGLDocumentation8.3
Variables
lv_event_code_tLV_EVENT_MSG_RECEIVED
structlv_msg_t
PublicMembers
uint32_tid
void*user_data
void*_priv_data
constvoid*payload
9.6 Image font (imgfont)
Drawimageinlabelorspanobjwithimgfont. ThisisoftenusedtodisplayUnicodeemojiiconsintext. Supportedimage
formats: determinedbyLVGLimagedecoder.
9.6.1 Usage
EnableLV_USE_IMGFONTinlv_conf.h.
Tocreateanewimgfontuselv_imgfont_create(height, path_cb).
heightusedtoindicatethesizeofaimgfont. path_cbUsedtogettheimagepathofthespecifiedunicode.
Uselv_imgfont_destroy(imgfont)todestroyaimgfontthatisnolongerused.
9.6.2 Example
Useemojisinatext.
#include "../../lv_examples.h"
#include <stdio.h>
#if LV_BUILD_EXAMPLES
#if LV_USE_IMGFONT
LV_IMG_DECLARE(emoji_F617)
static bool get_imgfont_path(const lv_font_t * font, void * img_src,
uint16_t len, uint32_t unicode, uint32_t unicode_next)
{
LV_UNUSED(font);
(continuesonnextpage)
9.6. Imagefont(imgfont) 880


--- Page 885 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
LV_UNUSED(unicode_next);
LV_ASSERT_NULL(img_src);
if(unicode == 0xF617) {
memcpy(img_src, &emoji_F617, sizeof(lv_img_dsc_t));
}
else {
char * path = (char *)img_src;
snprintf(path, len, "%s/%04X.%s", "A:lvgl/examples/assets/emoji", unicode,
,→"png");
path[len - 1] = '\0';
}
return true;
}
/**
* draw img in label or span obj
*/
void lv_example_imgfont_1(void)
{
lv_font_t * imgfont = lv_imgfont_create(80, get_imgfont_path);
if(imgfont == NULL) {
LV_LOG_ERROR("imgfont init error");
}
imgfont->fallback = LV_FONT_DEFAULT;
lv_obj_t * label1 = lv_label_create(lv_scr_act());
lv_label_set_text(label1, "12\uF600\uF617AB");
lv_obj_set_style_text_font(label1, imgfont, LV_PART_MAIN);
lv_obj_center(label1);
}
#else
void lv_example_imgfont_1(void)
{
lv_obj_t * label = lv_label_create(lv_scr_act());
lv_label_set_text(label, "imgfont is not installed");
lv_obj_center(label);
}
#endif
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/imgfont/lv_example_imgfont_1.py
9.6. Imagefont(imgfont) 881


--- Page 886 ---


LVGLDocumentation8.3
9.6.3 API
Typedefs
typedefbool(*lv_get_imgfont_path_cb_t)(constlv_font_t*font,void*img_src,uint16_tlen,uint32_t
unicode,uint32_tunicode_next)
Functions
lv_font_t*lv_imgfont_create(uint16_theight,lv_get_imgfont_path_cb_tpath_cb)
Createsaimagefontwithinfoparameterspecified.
Parameters
• height--fontsize
• path_cb--afunctiontogettheimagepathnameofcharacter.
Returns pointertothenewimgfontorNULLifcreateerror.
voidlv_imgfont_destroy(lv_font_t*font)
Destroyaimagefontthathasbeencreated.
Parameters font--pointertoimagefonthandle.
9.7 Pinyin IME
PinyinIMEprovidesAPItoprovideChinesePinyininputmethod(Chineseinput)forkeyboardobject,whichsupports26
keyand9keyinputmodes. Youcanthinkoflv_ime_pinyinasaPinyininputmethodplug-inforkeyboardobjects.
Normally,anenvironmentwherelv_keyboardcanruncanalsorunlv_ime_pinyin. Therearetwomaininfluencing
factors: thesizeofthefontfileandthesizeofthedictionary.
lv_ime_pinyin2/7(cid:0)(cid:0)2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7(2/72/72/72/72/72/72/72/72/72/7)2/72/72/7262/72/792/72/72/72/72/72/72/72/72/72/7lv_ime_pinyin
2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
2/72/72/72/72/72/72/72/72/7(cid:0)(cid:0)2/72/72/72/72/72/72/72/7lv_ime_pinyin2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
9.7.1 Usage
EnableLV_USE_IME_PINYINinlv_conf.h.
First use lv_ime_pinyin_create(lv_scr_act()) to create a Pinyin input method plug-in, then use
lv_ime_pinyin_set_keyboard(pinyin_ime, kb)toaddthekeyboardyoucreatedtothePinyininput
methodplug-in. Youcanuselv_ime_pinyin_set_dict(pinyin_ime, your_dict)touseacustomdictio-
nary(ifyoudon'twanttousethebuilt-indictionaryatfirst,youcandisableLV_IME_PINYIN_USE_DEFAULT_DICT
inlv_conf.h,whichcansavealotofmemoryspace).
Thebuilt-inthesaurusiscustomizedbasedontheLV_FONT_SIMSUN_16_CJKfontlibrary,whichcurrentlyonlyhas
morethan1,000mostcommonCJKradicals,soitisrecommendedtousecustomfontsandthesaurus.
IntheprocessofusingthePinyininputmethodplug-in,youcanchangethekeyboardanddictionaryatanytime.
2/7lv_conf.h2/72/72/7LV_USE_IME_PINYIN2/7
9.7. PinyinIME 882


--- Page 887 ---


LVGLDocumentation8.3
2/72/72/72/72/7 lv_ime_pinyin_create(lv_scr_act()) 2/72/72/72/72/72/72/72/72/72/72/72/72/72/7 2/72/72/72/7
lv_ime_pinyin_set_keyboard(pinyin_ime, kb)2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
2/72/72/72/72/72/72/72/7 LVGL 2/7 LV_FONT_SIMSUN_16_CJK 2/72/72/72/72/72/72/72/72/72/72/72/72/7 1000 2/72/72/72/72/72/7 CJK
2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
2/72/72/72/72/7lv_ime_pinyin_set_dict(pinyin_ime, your_dict)2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
lv_conf.h2/72/7LV_IME_PINYIN_USE_DEFAULT_DICT2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
9.7.2 Custom dictionary
Ifyoudon'twanttousethebuilt-inPinyindictionary,youcanusethecustomdictionary. Orifyouthinkthatthebuilt-in
phoneticdictionaryconsumesalotofmemory,youcanalsouseacustomdictionary.
Customizingthedictionaryisverysimple.
First,setLV_IME_PINYIN_USE_DEFAULT_DICTto0inlv_conf.h
Then,writeadictionaryinthefollowingformat.
2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
2/72/72/72/72/72/72/72/72/72/72/72/72/72/7lv_conf.h2/7LV_IME_PINYIN_USE_DEFAULT_DICT2/72/72/702/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
Dictionaryformat
Thearrangementorderofeachpinyinsyllableisveryimportant. Youneedtocustomizeyourownthesaurusaccording
totheHanyuPinyinsyllabletable. YoucanreadheretolearnabouttheHanyuPinyinsyllablesandthesyllabletable.
Then,writeyourowndictionaryaccordingtothefollowingformat:
2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7
lv_100ask_pinyin_dict_t your_pinyin_dict[] = {
{ "a", "(cid:0)(cid:0)(cid:0)(cid:0)" },
{ "ai", "(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)" },
{ "an", "(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)" },
{ "ang", "(cid:0)(cid:0)(cid:0)(cid:0)" },
{ "ao", "(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)" },
{ "ba", "(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)" },
{ "bai", "(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)" },
/* ...... */
{ "zuo", "(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)"},
{NULL, NULL}
Thelastitemmustendwith{null, null},oritwillnotworkproperly.
9.7. PinyinIME 883


--- Page 888 ---


LVGLDocumentation8.3
Applynewdictionary
Afterwritingadictionaryaccordingtotheabovedictionaryformat,youonlyneedtocallthisfunctiontosetupanduse
yourdictionary:
2/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7 lv_100ask_pinyin_ime_set_dict(pinyin_ime,
your_pinyin_dict)2/72/72/72/72/72/72/72/72/72/72/72/72/7
lv_obj_t * pinyin_ime = lv_100ask_pinyin_ime_create(lv_scr_act());
lv_100ask_pinyin_ime_set_dict(pinyin_ime, your_pinyin_dict);
9.7.3 Input modes
lv_ime_pinyinsupports26keyand9keyinputmodes. Themodeswitchingisverysimple, justcallthefunction
lv_ime_pinyin_set_mode. Ifthesecondparameteroffunctionlv_ime_pinyin_set_modeis'1',switch
to26keyinputmode;ifitis'0',switchto9keyinputmode,andthedefaultis'1'.
lv_ime_pinyin 2/72/7262/72/792/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/72/7 lv_ime_pinyin_set_mode 2/72/72/72/72/72/72/7
lv_ime_pinyin_set_mode2/72/722/72/72/72/712/72/72/72/7262/72/72/72/72/72/72/72/72/702/72/72/72/792/72/72/72/72/72/72/72/72/72/712/7
9.7.4 Example
PinyinIME26keyinput
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_USE_TEXTAREA && LV_FONT_SIMSUN_16_CJK && LV_USE_IME_PINYIN &&␣
,→LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * ta = lv_event_get_target(e);
lv_obj_t * kb = lv_event_get_user_data(e);
if(code == LV_EVENT_FOCUSED) {
if(lv_indev_get_type(lv_indev_get_act()) != LV_INDEV_TYPE_KEYPAD) {
lv_keyboard_set_textarea(kb, ta);
lv_obj_clear_flag(kb, LV_OBJ_FLAG_HIDDEN);
}
}
else if(code == LV_EVENT_CANCEL) {
lv_obj_add_flag(kb, LV_OBJ_FLAG_HIDDEN);
lv_obj_clear_state(ta, LV_STATE_FOCUSED);
lv_indev_reset(NULL, ta); /*To forget the last clicked object to make it␣
,→focusable again*/
}
}
void lv_example_ime_pinyin_1(void)
{
lv_obj_t * pinyin_ime = lv_ime_pinyin_create(lv_scr_act());
lv_obj_set_style_text_font(pinyin_ime, &lv_font_simsun_16_cjk, 0);
//lv_ime_pinyin_set_dict(pinyin_ime, your_dict); // Use a custom dictionary. If␣
,→it is not set, the built-in dictionary will be used.
(continuesonnextpage)
9.7. PinyinIME 884


--- Page 889 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
/* ta1 */
lv_obj_t * ta1 = lv_textarea_create(lv_scr_act());
lv_textarea_set_one_line(ta1, true);
lv_obj_set_style_text_font(ta1, &lv_font_simsun_16_cjk, 0);
lv_obj_align(ta1, LV_ALIGN_TOP_LEFT, 0, 0);
/*Create a keyboard and add it to ime_pinyin*/
lv_obj_t * kb = lv_keyboard_create(lv_scr_act());
lv_ime_pinyin_set_keyboard(pinyin_ime, kb);
lv_keyboard_set_textarea(kb, ta1);
lv_obj_add_event_cb(ta1, ta_event_cb, LV_EVENT_ALL, kb);
/*Get the cand_panel, and adjust its size and position*/
lv_obj_t * cand_panel = lv_ime_pinyin_get_cand_panel(pinyin_ime);
lv_obj_set_size(cand_panel, LV_PCT(100), LV_PCT(10));
lv_obj_align_to(cand_panel, kb, LV_ALIGN_OUT_TOP_MID, 0, 0);
/*Try using ime_pinyin to output the Chinese below in the ta1 above*/
lv_obj_t * cz_label = lv_label_create(lv_scr_act());
lv_label_set_text(cz_label,
"(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)Embedded System(cid:0)(cid:0)\n(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)");
lv_obj_set_style_text_font(cz_label, &lv_font_simsun_16_cjk, 0);
lv_obj_set_width(cz_label, 310);
lv_obj_align_to(cz_label, ta1, LV_ALIGN_OUT_BOTTOM_LEFT, 0, 0);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/ime/lv_example_ime_pinyin_1.py
PinyinIME9keyinput
#include "../../lv_examples.h"
#if LV_USE_LABEL && LV_USE_TEXTAREA && LV_FONT_SIMSUN_16_CJK && LV_USE_IME_PINYIN &&␣
,→LV_IME_PINYIN_USE_K9_MODE && LV_BUILD_EXAMPLES
static void ta_event_cb(lv_event_t * e)
{
lv_event_code_t code = lv_event_get_code(e);
lv_obj_t * ta = lv_event_get_target(e);
lv_obj_t * kb = lv_event_get_user_data(e);
if(code == LV_EVENT_FOCUSED) {
if(lv_indev_get_type(lv_indev_get_act()) != LV_INDEV_TYPE_KEYPAD) {
lv_keyboard_set_textarea(kb, ta);
lv_obj_clear_flag(kb, LV_OBJ_FLAG_HIDDEN);
}
}
else if(code == LV_EVENT_READY) {
lv_obj_add_flag(kb, LV_OBJ_FLAG_HIDDEN);
lv_obj_clear_state(ta, LV_STATE_FOCUSED);
(continuesonnextpage)
9.7. PinyinIME 885


--- Page 890 ---


LVGLDocumentation8.3
(continuedfrompreviouspage)
lv_indev_reset(NULL, ta); /*To forget the last clicked object to make it␣
,→focusable again*/
}
}
void lv_example_ime_pinyin_2(void)
{
lv_obj_t * pinyin_ime = lv_ime_pinyin_create(lv_scr_act());
lv_obj_set_style_text_font(pinyin_ime, &lv_font_simsun_16_cjk, 0);
//lv_ime_pinyin_set_dict(pinyin_ime, your_dict); // Use a custom dictionary. If␣
,→it is not set, the built-in dictionary will be used.
/* ta1 */
lv_obj_t * ta1 = lv_textarea_create(lv_scr_act());
lv_textarea_set_one_line(ta1, true);
lv_obj_set_style_text_font(ta1, &lv_font_simsun_16_cjk, 0);
lv_obj_align(ta1, LV_ALIGN_TOP_LEFT, 0, 0);
/*Create a keyboard and add it to ime_pinyin*/
lv_obj_t * kb = lv_keyboard_create(lv_scr_act());
lv_keyboard_set_textarea(kb, ta1);
lv_ime_pinyin_set_keyboard(pinyin_ime, kb);
lv_ime_pinyin_set_mode(pinyin_ime,
LV_IME_PINYIN_MODE_K9); // Set to 9-key input mode.␣
,→Default: 26-key input(k26) mode.
lv_obj_add_event_cb(ta1, ta_event_cb, LV_EVENT_ALL, kb);
/*Get the cand_panel, and adjust its size and position*/
lv_obj_t * cand_panel = lv_ime_pinyin_get_cand_panel(pinyin_ime);
lv_obj_set_size(cand_panel, LV_PCT(100), LV_PCT(10));
lv_obj_align_to(cand_panel, kb, LV_ALIGN_OUT_TOP_MID, 0, 0);
/*Try using ime_pinyin to output the Chinese below in the ta1 above*/
lv_obj_t * cz_label = lv_label_create(lv_scr_act());
lv_label_set_text(cz_label,
"(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)Embedded System(cid:0)(cid:0)\n(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)(cid:0)");
lv_obj_set_style_text_font(cz_label, &lv_font_simsun_16_cjk, 0);
lv_obj_set_width(cz_label, 310);
lv_obj_align_to(cz_label, ta1, LV_ALIGN_OUT_BOTTOM_LEFT, 0, 0);
}
#endif
Error encountered while trying to open /home/runner/work/100ask_lvgl_docs/100ask_lvgl_
,→docs/examples/others/ime/lv_example_ime_pinyin_2.py
9.7. PinyinIME 886


--- Page 891 ---


LVGLDocumentation8.3
9.7.5 API
Enums
enumlv_ime_pinyin_mode_t
Values:
enumeratorLV_IME_PINYIN_MODE_K26
enumeratorLV_IME_PINYIN_MODE_K9
Functions
lv_obj_t*lv_ime_pinyin_create(lv_obj_t*parent)
voidlv_ime_pinyin_set_keyboard(lv_obj_t*obj,lv_obj_t*kb)
SetthekeyboardofPinyininputmethod.
Parameters
• obj--pointertoaPinyininputmethodobject
• dict--pointertoaPinyininputmethodkeyboard
voidlv_ime_pinyin_set_dict(lv_obj_t*obj,lv_pinyin_dict_t*dict)
SetthedictionaryofPinyininputmethod.
Parameters
• obj--pointertoaPinyininputmethodobject
• dict--pointertoaPinyininputmethoddictionary
voidlv_ime_pinyin_set_mode(lv_obj_t*obj,lv_ime_pinyin_mode_tmode)
Setmode,26-keyinput(k26)or9-keyinput(k9).
Parameters
• obj--pointertoaPinyininputmethodobject
• mode--themodefrom'lv_ime_pinyin_mode_t'
lv_obj_t*lv_ime_pinyin_get_kb(lv_obj_t*obj)
SetthedictionaryofPinyininputmethod.
Parameters obj--pointertoaPinyinIMEobject
Returns pointertothePinyinIMEkeyboard
lv_obj_t*lv_ime_pinyin_get_cand_panel(lv_obj_t*obj)
SetthedictionaryofPinyininputmethod.
Parameters obj--pointertoaPinyininputmethodobject
Returns pointertothePinyininputmethodcandidatepanel
9.7. PinyinIME 887


--- Page 892 ---


LVGLDocumentation8.3
lv_pinyin_dict_t*lv_ime_pinyin_get_dict(lv_obj_t*obj)
SetthedictionaryofPinyininputmethod.
Parameters obj--pointertoaPinyininputmethodobject
Returns pointertothePinyininputmethoddictionary
structlv_pinyin_dict_t
PublicMembers
constchar*constpy
constchar*constpy_mb
structime_pinyin_k9_py_str_t
PublicMembers
charpy_str[7]
structlv_ime_pinyin_t
PublicMembers
lv_obj_tobj
lv_obj_t*kb
lv_obj_t*cand_panel
lv_pinyin_dict_t*dict
lv_ll_tk9_legal_py_ll
char*cand_str
charinput_char[16]
chark9_input_str[LV_IME_PINYIN_K9_MAX_INPUT]
uint16_tk9_py_ll_pos
9.7. PinyinIME 888


--- Page 893 ---


LVGLDocumentation8.3
uint16_tk9_legal_py_count
uint16_tk9_input_str_len
uint16_tta_count
uint16_tcand_num
uint16_tpy_page
uint16_tpy_num[26]
uint16_tpy_pos[26]
uint8_tmode
9.7. PinyinIME 889


--- Page 894 ---


CHAPTER
TEN
CONTRIBUTING
10.1 Introduction
JoinLVGL'scommunityandleaveyourfootprintinthelibrary!
TherearealotofwaystocontributetoLVGLevenifyouarenewtothelibraryorevennewtoprogramming.
Itmightbescarytomakethefirststepbutyouhavenothingtobeafraidof. Afriendlyandhelpfulcommunityiswaiting
foryou. Gettoknowlike-mindedpeopleandmakesomethinggreattogether.
Solet'sfindwhichcontributionoptionfitsyouthebestandhelpyoujointhedevelopmentofLVGL!
Beforegettingstartedherearesomeguidelinestomakecontributionsmoother:
• Bekindandfriendly.
• Besuretoreadtherelevantpartofthedocumentationbeforepostingaquestion.
• AskquestionsintheForumanduseGitHubfordevelopment-relateddiscussions.
• AlwaysfilloutthepostorissuetemplatesintheForumorGitHub(oratleastprovideequivalentinformation). It
makesunderstandingyourcontributionorissueeasierandyouwillgetausefulresponsefaster.
• Ifpossiblesendanabsoluteminimalbutbuildablecodeexampleinordertoreproducetheissue. Besureitcontains
alltherequiredvariabledeclarations,constants,andassets(images,fonts).
• UseMarkdowntoformatyourposts. Youcanlearnitin10minutes.
• Speak about one thing in one issue or topic. It makes your post easier to find later for someone with the same
question.
• Givefeedbackandclosetheissueormarkthetopicassolvedifyourquestionisanswered.
• For non-trivial fixes and features, it's better to open an issue first to discuss the details instead of sending a pull
requestdirectly.
• PleasereadandfollowtheCodingstyleguide.
890


--- Page 895 ---


LVGLDocumentation8.3
10.2 Pull request
Mergingnewcodeintothelvgl,documentation,blog,examples,andotherrepositorieshappenviaPullrequests(PRfor
short). APRisanotificationlike"Hey,Imadesomeupdatestoyourproject. Herearethechanges,youcanaddthem
if you want." To do this you need a copy (called fork) of the original project under your account, make some changes
there,andnotifytheoriginalrepositoryaboutyourupdates. YoucanseewhatitlookslikeonGitHubforLVGLhere:
https://github.com/lvgl/lvgl/pulls.
To add your changes you can edit files online on GitHub and send a new Pull request from there (recommended for
smallchanges)oraddtheupdatesinyourfavoriteeditor/IDEandusegittopublishthechanges(recommendedformore
complexupdates).
10.2.1 From GitHub
1. Navigatetothefileyouwanttoedit.
2. ClicktheEditbuttoninthetopright-handcorner.
3. Addyourchangestothefile.
4. Addacommitmessageonthebottomofthepage.
5. ClicktheProposechangesbutton.
10.2.2 From command line
Theinstructionsdescribethemainlvglrepositorybutitworksthesamewayfortheotherrepositories.
1. Fork the lvgl repository. To do this click the "Fork" button in the top right corner. It will "copy" the lvgl
repositorytoyourGitHubaccount(https://github.com/<YOUR_NAME>?tab=repositories)
2. Cloneyourforkedrepository.
3. Add your changes. You can create a feature branch from master for the updates: git checkout -b
the-new-feature
4. Commitandpushyourchangestotheforkedlvglrepository.
5. CreateaPRonGitHubfromthepageofyourlvglrepository(https://github.com/<YOUR_NAME>/
lvgl)byclickingthe"Newpullrequest" button. Don'tforgettoselectthebranchwhereyouaddedyourchanges.
6. Set the base branch. It means where you want to merge your update. In the lvgl repo both the fixes and new
featuresgotomasterbranch.
7. Describewhatisintheupdate. Anexamplecodeiswelcomeifapplicable.
8. Ifyouneedtomakemorechanges,justupdateyourforkedlvglrepowithnewcommits. Theywillautomatically
appearinthePR.
10.2. Pullrequest 891


--- Page 896 ---


LVGLDocumentation8.3
10.2.3 Commit message format
ThecommitmessagesformatisinspiredbyAngularCommitFormat.
Thefollowingstructureshouldbeused:
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
Possible<type>s:
• fixbugfixinthesourcecode.
• featnewfeature
• archarchitecturalchanges
• perfchangesthataffecttheperformance
• exampleanythingrelatedtoexamples(evenfixesandnewexamples)
• docsanythingrelatedtothedocumentation(evenfixes,formatting,andnewpages)
• testanythingrelatedtotests(newandupdatedtestsorCIactions)
• choreanyminorformattingorstylechangesthatwouldmakethechangelognoisy
<scope>isthemodule,file,orsub-systemthatisaffectedbythecommit. It'susuallyonewordandcanbechosenfreely.
Forexampleimg,layout,txt,anim. Thescopecanbeomitted.
<subject>containsashortdescriptionofthechange:
• usetheimperative,presenttense: "change"not"changed"nor"changes"
• don'tcapitalizethefirstletter
• nodot(.) attheend
• max90characters
<body>optionalandcanbeusedtodescribethedetailsofthischange.
<footer>shallcontain
• thewords"BREAKINGCHANGE"ifthechangesbreaktheAPI
• referencetotheGitHubissueorPullRequestifapplicable.
Someexamples:
fix(img): update size if a new source is set
fix(bar): fix memory leak
The animations weren't deleted in the destructor.
Fixes: #1234
feat: add span widget
The span widget allows mixing different font sizes, colors and styles.
It's similar to HTML <span>
10.2. Pullrequest 892


--- Page 897 ---


LVGLDocumentation8.3
docs(porting): fix typo
10.3 Developer Certification of Origin (DCO)
10.3.1 Overview
ToensurealllicensingcriteriaaremetforeveryrepositoryoftheLVGLproject,weapplyaprocesscalledDCO(Devel-
oper'sCertificateofOrigin).
ThetextofDCOcanbereadhere: https://developercertificate.org/.
BycontributingtoanyrepositoriesoftheLVGLprojectyouagreethatyourcontributioncomplieswiththeDCO.
IfyourcontributionfulfillstherequirementsoftheDCOnofurtheractionisneeded. Ifyouareunsurefeelfreetoaskus
inacomment.
10.3.2 Accepted licenses and copyright notices
TomaketheDCOeasiertodigest,herearesomepracticalguidesaboutspecificcases:
Yourownwork
Thesimplestcaseiswhenthecontributionissolelyyourownwork. InthiscaseyoucanjustsendaPullRequestwithout
worryingaboutanylicensingissues.
Usecodefromonlinesource
Ifthecodeyouwouldliketoaddisbasedonanarticle,postorcommentonawebsite(e.g. StackOverflow)thelicense
and/orrulesofthatsiteshouldbefollowed.
ForexampleincaseofStackOverflowanoticelikethiscanbeused:
/* The original version of this code-snippet was published on StackOverflow.
* Post: http://stackoverflow.com/questions/12345
* Author: http://stackoverflow.com/users/12345/username
* The following parts of the snippet were changed:
* - Check this or that
* - Optimize performance here and there
*/
... code snippet here ...
10.3. DeveloperCertificationofOrigin(DCO) 893


--- Page 898 ---


LVGLDocumentation8.3
UseMITlicensedcode
AsLVGLisMITlicensed,otherMITlicensedcodecanbeintegratedwithoutissues. TheMITlicenserequiresacopyright
notice be added to the derived work. Any derivative work based on MIT licensed code must copy the original work's
licensefileortext.
UseGPLlicensedcode
TheGPLlicenseisnotcompatiblewiththeMITlicense. Therefore,LVGLcannotacceptGPLlicensedcode.
10.4 Ways to contribute
Evenifyou'rejustgettingstartedwithLVGLthereareplentyofwaystogetyourfeetwet. Mostoftheseoptionsdon't
evenrequireknowingasinglelineofLVGLcode.
BelowwehavecollectedsomeopportunitiesaboutthewaysyoucancontributetoLVGL.
10.4.1 Give LVGL a Star
ShowthatyoulikeLVGLbygivingitstaronGitHub!
Star
ThissimpleclickmakesLVGLmorevisibleonGitHubandmakesitmoreattractivetootherpeople. Sowiththis,you
alreadyhelpedalot!
10.4.2 Tell what you have achieved
HaveyoualreadystartedusingLVGLinaSimulator,adevelopmentboard,oronyourcustomhardware? Wasiteasyor
weretheresomeobstacles? Areyouhappywiththeresult? Showingyourprojecttoothersisawin-winsituationbecause
itincreasesyourandLVGL'sreputationatthesametime.
YoucanpostaboutyourprojectonTwitter, Facebook, LinkedIn, createaYouTubevideo, andsoon. Onlyonething:
Onsocialmediadon'tforgettoaddalinktohttps://lvgl.ioorhttps://github.com/lvglandusethe
hashtag#lvgl. Thankyou! :)
YoucanalsoopenanewtopicintheMyprojectscategoryoftheForum.
TheLVGLBlogwelcomespostsfromanyone. It'sagoodplacetotalkaboutaprojectyoucreatedwithLVGL,writea
tutorial,orsharesomenicetricks. ThelatestblogpostsareshownonthehomepageofLVGLtomakeyourworkmore
visible.
TheblogishostedonGitHub. IfyouaddapostGitHubautomaticallyturnsitintoawebsite. SeetheREADMEofthe
blogrepotoseehowtoaddyourpost.
AnyofthesehelptospreadthewordandfamiliarizenewdeveloperswithLVGL.
Ifyoudon'twanttospeakaboutyourprojectpublicly,feelfreetouseContactformonlvgl.iotoprivatemessagetous.
10.4. Waystocontribute 894


--- Page 899 ---


LVGLDocumentation8.3
10.4.3 Write examples
AsyoulearnLVGLyouwillprobablyplaywiththefeaturesofwidgets. Whynotpublishyourexperiments?
Eachwidgets'documentationcontainsexamples. Forinstance,herearetheexamplesoftheDrop-downlistwidget. The
examplesaredirectlyloadedfromthelvgl/examplesfolder.
SoallyouneedtodoissendaPullrequesttothelvglrepositoryandfollowsomeconventions:
• Nametheexampleslikelv_example_<widget_name>_<index>.
• Maketheexampleasshortandsimpleaspossible.
• Addcommentstoexplainwhattheexampledoes.
• Use320x240resolution.
• Updateindex.rstintheexample'sfolderwithyournewexample. Toseehowotherexamplesareadded,look
inthelvgl/examples/widgetsfolder.
10.4.4 Improve the docs
Asyoureadthedocumentationyoumightseesometyposorunclearsentences. Allthedocumentationislocatedinthe
lvgl/docsfolder. Fortyposandstraightforwardfixes,youcansimplyeditthefileonGitHub.
NotethatthedocumentationisalsoformattedinMarkdown.
10.4.5 Report bugs
AsyouuseLVGLyoumightfindbugs. Beforereportingthembesuretochecktherelevantpartsofthedocumentation.
IfitreallyseemslikeabugfeelfreetoopenanissueonGitHub.
When filing the issue be sure to fill out the template. It helps find the root of the problem while avoiding extensive
questionsandexchangeswithotherdevelopers.
10.4.6 Send fixes
Thebeautyofopen-sourcesoftwareisyoucaneasilydigintoittounderstandhowitworks. Youcanalsofixoradjustit
asyouwish.
Ifyoufoundandfixedabugdon'thesitatetosendaPullrequestwiththefix.
InyourPullrequestpleasealsoaddalinetoCHANGELOG.md.
10.4.7 Join the conversations in the Forum
Itfeelsgreattoknowyouarenotaloneifsomethingisnotworking. It'sevenbettertohelpotherswhentheystrugglewith
something.
While you were learning LVGL you might have had questions and used the Forum to get answers. As a result, you
probablyhavemoreknowledgeabouthowLVGLworks.
OneofthebestwaystogivebackistousetheForumandanswerthequestionsofnewcomers-likeyouwereonce.
Justreadthetitlesandifyouarefamiliarwiththetopicdon'thesitatetoshareyourthoughtsandsuggestions.
Participatinginthediscussionsisoneofthebestwaystobecomepartoftheprojectandgettoknowlike-mindedpeople!
10.4. Waystocontribute 895


--- Page 900 ---


LVGLDocumentation8.3
10.4.8 Add features
If you have created a cool widget, or added useful feature to LVGL feel free to open a new PR for it. We collect the
optionalfeatures(a.k.a. plugins)inlvgl/src/extrafoldersoifyouareinterestedinaddinganewfeaturespleaseusethis
folder. TheREADMEfiledescribesthebasicsrulesofcontributionandalsolistssomeideas.
ForfurtherideastakealookattheRoadmappage. Ifyouareinterestedinanyofthemfeelfreetoshareyouropinion
and/orparticipateintheimplementation.
Otherfeatureswhichare(still)notontheroadmaparelistedintheFeaturerequestcategoryoftheForum.
Whenaddinganewfeaturesthefollowingsalsoneedstobeupdated:
• Updatelv_conf_template.h
• Adddescriptioninthedocs
• Addexamples
• Updatethechangelog
10.4.9 Become a maintainer
Ifyouwanttobecomepartofthecoredevelopmentteam,youcanbecomeamaintainerofarepository.
Bybecomingamaintainer:
• Yougetwriteaccesstothatrepo:
– Addcodedirectlywithoutsendingapullrequest
– Acceptpullrequests
– Close/reopen/editissues
• Yourinputhashigherimpactwhenwearemakingdecisions
Youcanbecomeamaintainerbyinvitation,howeverthefollowingconditionsneedtomet
1. Have>50repliesintheForum. Youcanlookatyourstatshere
2. Send>5non-trivialpullrequeststotherepowhereyouwouldliketobeamaintainer
If you are interested, just send a message (e.g. from the Forum) to the current maintainers of the repository. They
willcheckiftheprerequisitesaremet. Notethatmeetingtheprerequisitesisnotaguaranteeofacceptance,i.e. ifthe
conditionsaremetyouwon'tautomaticallybecomeamaintainer. It'suptothecurrentmaintainerstomakethedecision.
10.4.10 Move your project repository under LVGL organization
Besidesthecorelvglrepositorythereareotherreposforportstodevelopmentboards,IDEsorotherenvironment. If
youportedLVGLtoanewplatformwecanhostitundertheLVGLorganizationamongtheotherrepos.
ThiswayyourprojectwillbecomepartofthewholeLVGLprojectandcangetmorevisibility. Ifyouareinterestedin
thisopportunityjustopenanissueinlvglrepoandtellwhatyouhave!
IfweagreethatyourportfitwellintotheLVGLorganization,wewillopenarepositoryforyourprojectwhereyouwill
haveadminrights.
Tomakethisconceptsustainablethereafewrulestofollow:
• YouneedtoaddaREADMEtoyourrepo.
• Weexpecttomaintaintherepotosomeextent:
10.4. Waystocontribute 896


--- Page 901 ---


LVGLDocumentation8.3
– FollowatleastthemajorversionsofLVGL
– Respondtotheissues(inareasonabletime)
• Ifthereisnoactivityinarepofor1yearitwillbearchived
10.4. Waystocontribute 897


--- Page 902 ---


CHAPTER
ELEVEN
CHANGELOG
11.1 v8.3.11 6 December 2023
11.1.1 New Features
• feat(table): adduser_datatotablecells4767
• feat(tiny_ttf): backportTinyTTFtolvgl84727
• feat(littlefs): addlv_fs_littlefssystemasadriver4677
11.1.2 Fixes
• fix(obj): readjustscrollafterlayoutwhenchildremoved4921
• fix(rt-thread): fixcreatelvglthreadproblem4862
• fix(obj): fixarduinocompilewarnings4807
• fix(table):fixissuewithabnormalstringoutputof'lv_table_set_cell_value_fmt'4804
• fix(table)userdataAPIfunctionsrenamed4769
• fix(ime_pinyin): keepcursorinthetextareawhenacandidateispressed4731
• fix(draw_needles): changedneedlelinedrawstartpointfromscalece…4682
• fix(arc): handleclickoutsidebackgroundanglerange(#4586)4667
• fix(meter): fixminorissues4657
• fix(draw): fixcompilererrorinlv_draw_sw_transform.c#24612
• fix(dropdown): avoidpartialmatchinlv_dropdown_get_option_index4598
• fix(dropdown): resetchar_i=0,avoidaccessoverflow4589
• fix(btnmatrix): setLV_BTNMATRIX_BTN_NONEwhenclickingofdisabledbutton(#4571)4578
• fix(qrcode): useLV_ASSERTinsteadofassert1840dec
• fix: fixwarninginlv_draw_sw_letter.cd22cda3
• fix(arc): fixsettingvaluebyclick20b6199
• fix(disp): fixinfiniterecursiveSCREEN_LOADEDeventsef76206
• fix(keyboard): add'&'characterd20bd1c
• fix(draw): fixscalingrectanglepartswithopa7a8fcbf
898


--- Page 903 ---


LVGLDocumentation8.3
11.1.3 Docs
• docs(obj): fixwording4625
• docs(label): updatetextforrecoloring4606
• docs: fixtypo9fbac75
11.1.4 Others
• chore(cmsis-pack): prepareforv8.3.114936
• chore(cmake): addsupportforuser-specifiedlv_conf.hpath4689
• STM32U5DMA2Dsupport(8.3)4643
• backport: fix(lv_disp): fixlv_scr_load_animbeingcalledtwicequickly4629
• chore(lv_draw_sw_letter.c): Fixprintformat4615
• chore: fixcompileerror7568df7
11.2 v8.3.10 20 September 2023
11.2.1 New Features
• feat(disp): adddoublebuffereddirect-modeefficientsyncalgorithm(v8.3)4497
• feat(style): backportopa_layered6548ea0
11.2.2 Fixes
• fix: buildonWindows(MinGWenvironment)4538
• fix(docs): dropdown: fixfunctionnameindescriptionofstaticoptions4535
• fix: donotcopyinvalidareasifnotdoublebufferedmode4526
• fix(sdl): addmissingparameterinlv_draw_sdl_composite_texture_obtain4490
• fix(dropdown): positiontotheselectediteminlv_dropdown_set_selectedf174589
• fix(vglite): besureend_angle>start_angleinarcdrawing01cd1fe
• fix(btnmatrix): fixtappingjustoutsideabuttoninabuttonmatrix8063fac
11.2.3 Docs
• docs(calendar): updateaccordingtov8.2changesa296456
• docs(simulator): removeSDLsupportfromtheVisualStudioprojectbcebafe
11.2. v8.3.1020September2023 899


--- Page 904 ---


LVGLDocumentation8.3
11.2.4 CI and tests
• ci: updatescreenshotcomparefromv9toautomaticallycreatemissingreferenceimagesfd21ed0
• ci(dropdown): fixtest5fc488a
11.2.5 Others
• chore(cmsis-pack): createcmsis-packforv8.3.104572
• Updatescreenobjectopacityfunctiondocumentation4505
• demo(sress): fixissueswhenthestresstestisopened/clsoedmultipletimes1c5df6c
• chore: codeformattingeb87767
11.3 v8.3.9 6 August 2023
11.3.1 Fixes
• fix(decoder): fixLV_IMG_CF_ALPHA_8BITbinfiledecoder4406
• fix(config): fixtypoinLV_USE_PERF_MONITORandLV_USE_MEM_MONITOR4403
• fix(attr): refactorLV_ATTRIBUTE_*forfunctionattributes4404
• fix(font): fixoptimizerissueinlv_font_fmt_txt.c4385
• fix(btnmatrix): Hidebuttonmatrixwhenallbuttonshidden65f1c93
• fix(obj)preventhiddenobjectskeepingfocus375b3b5
• fix(btnmatrix): Fixtypoinpreviouscommit! 29ed7c5
• fix(tabview): fixwarning223dc1c
• fix(indev): fixwarningswhenloggincoordinatesisenabled645006e
• fix: useconstlv_img_dsc_t*dscfunctionparameterinlv_img_buf.h/4f102d7
• fix(chart): fixlv_chart_get_point_pos_by_idf9ffcc9
• fix(imgbtn): supportLV_OBJ_FLAG_CHECKABLE385d999
11.3.2 Docs
• docs(disp): metinedthatrotationrotatesthetouchcoordinatestoo810852b
11.3. v8.3.96August2023 900


--- Page 905 ---


LVGLDocumentation8.3
11.3.3 Others
• demos: addlv_demo_..._close()functionsforeachdemo91038a9
11.4 v8.3.8 5 July 2023
11.4.1 New Features
• feat(rt-thread): makethert-threadenvrecursivelyglobtheUIfiles8b83fe7
11.4.2 Performance
• perf(pxp,vglite): improveperformanceandaddmorefeatures4222
11.4.3 Fixes
• fix(stm32): staticfunctionprototypesmovedfrom.hto.c4276
• fix(png): fixdecodeimagesizeandsomewarnings4248
• fix(bidi): addmoreHebrewcheckstoRTLcharactersset(#4171)4239
• fix(img): fixgettingtheimagetypeonbigendiansystems4215
• fix(sdl): destroytextureafteruseifnotstoredincache4173
• fix:(BtnMatrix)Backporthttps://github.com/lvgl/lvgl/pull/4185cb602ea
• fix(arduino): fixmessedupvariabletypese3659c4
• fix:(BtnMatrix)Backporthttps://github.com/lvgl/lvgl/pull/418507bce74
• fix(chart): fixdivisionbyzeroiftherearenoticks67b3011
• fix(msgbox): fixtypo6a89bd2
• fix(tabview): removetheanimationifthetabisselectedbyclickingthebuttonontheheader3de61c7
• fix(btnmatrix): fixarrayoutofboundsaddressingwithgroupsandnobuttonsedd5ad2
• fix(btnmatrix): fixusing>7asbuttonwidth75e6ef4
• fix(draw): typowithLV_COLOR_DEPTH845b13c3
• fix(disp): fixmemoryleaklv_scr_load_animwithauto_delandtime=01caafc5
• fix(msgbox): addmissinglv_obj_class_init_obj6843c19
• fix(flex): registerLV_STYLE_FLEX_GROW5ba90a5
11.4. v8.3.85July2023 901


--- Page 906 ---


LVGLDocumentation8.3
11.4.4 Examples
• example(tabview): fixtabviewdisablescrolligexample9491c3f
11.4.5 Docs
• docs: mentionincompatibilitybetweensoftwarerotationanddirect_modeorfull_refresh4308
• docs(faq): don'tsay24bitissupportasLVGLcan'trenderinRGB888directly227ac02
11.4.6 CI and tests
11.4.7 Others
• chore(cmsis-pack): updatecmsis-packforv8.3.84340
• add(docs): addrenesas-ra6m3get-starteddocument4278
• add(gpu): addrenesas-ra6m3gpuadaptation4270
• Revert"fix:(BtnMatrix)Backporthttps://github.com/lvgl/lvgl/pull/4185"1713cd3
11.5 v8.3.7 3 May 2023
11.5.1 New Features
• feat(btnmatrix): reviewctrlmapandallowwidthvaluestobemax15a150b15
11.5.2 Fixes
• fix(spinbox): doublingcharactersenteredfromthekeyboard4190
• fix(arm-2d): fixtransform-chrome-keyingissue4178
• fix(menu): preventsettingthecurrentpageagain4136
• fix(esp): fixESP-IDFpedanticbuilds(backportv8.3)4135
• fix: colormixingwithLV_COLOR_SWAP==14101
• fix(indev): fixintegeroverflowinrecursivezoomcalculationa0795b4
• fix(style): fixtrasitiononbg_gradcolor48d7878
11.5. v8.3.73May2023 902


--- Page 907 ---


LVGLDocumentation8.3
11.6 v8.3.6 3 April 2023
11.6.1 New Features
• feat(msg): addlv_msg_unsubcribe_obj6af0179
11.6.2 Performance
11.6.3 Fixes
• fix(group): fixdefault_groupbecomeswildpointerwhendeleted4076
• fix(fs_posix): allowcreatingnewfileandsetpermission. 3976
• fix(img): supportnegativeangles3846
• fix(gif): synchronizewithmaster4003
• fix(gpu): fixSTMGPUdriversforsomevariants4004
• fix(img): possibledivideby0exception(lvgl#3988)3990
• fix(arc): fixknobareainvalidationd0e19eb
• fix(slider): consideranimationsonpressing0b7777f
• fix(bar): deleterunninganimationswhenanewvalueissetwithoutanimationaa31380
• docs: useafixedcommitoflv_web_emscripten501230e
11.6.4 Examples
11.6.5 Docs
• docs(arduino): addnotetonotuselv_examleslibrary2f294aa
• docs: useafixedcommitoflv_web_emscripten501230e
11.6.6 CI and tests
11.6.7 Others
• chore(cmsis-pack): updatecmsis-packforv8.3.64108
• chore: updatetheversionnumberstov8.3.5-dev77670fb
• Updatebuild_html_examples.sh399069b
11.6. v8.3.63April2023 903


--- Page 908 ---


LVGLDocumentation8.3
11.7 v8.3.5 7 February 2023
11.7.1 Performance
• perf(gpu): improveNXP'sPXPandVGLiteaccelerators3952
• perf(dam2d): reworkstm32dma2d3904
11.7.2 Fixes
• fix(monkey): removeexecutablepermissionsfromsourcefiles3971
• fix(ci): setUbuntuversionforMicroPythontest3865
• fix(Kconfig): fixwrongtypeofLV_FS_STDIO_CACHE_SIZE(v8.3)3906
• docs(indev): fixthenameoflong_press_repeat_time(waslong_press_rep_time)34c545e
• fix(roller): considertherecolorsettingofthelabel39f4247
11.7.3 Examples
11.7.4 Docs
• docs(indev): fixthenameoflong_press_repeat_time(waslong_press_rep_time)34c545e
11.7.5 CI and tests
• ci(esp): fixpushtothecomponentregistryontage529230
11.7.6 Others
• chore(cmsis-pack): updatecmsis-packforv8.3.53972
• chore: addanoptionto"LV_TICK_CUSTOM"3879
• bumpversionnumberstov8.3.5-dev47c8f8f
• Updatelayer.md9faca8a
11.8 v8.3.4 15 December 2022
11.8.1 New Features
• feat(keyboard): portedarabickeyboardfromrelease7.10.03728
• feat(table): scrolltotheselectedcellwithkeynavigation39d03a8
11.7. v8.3.57February2023 904


--- Page 909 ---


LVGLDocumentation8.3
11.8.2 Fixes
• fix(rt-thread): syncrt-threadv5.0.0rt_align3864
• fix(draw): SDL2gradientsupport#38483856
• fix(esp.cmake): adddemosandexamples3784
• fix(indev): fixscrollingontransformedobejcts84cf05d
• fix(style): addthemissingsupportforpctpivotintranasformstylepropertiesc8e584f
• fix(flex): besureobj->w_layoutandh_layoutcan'tbesetatthesametimec4c4007
• fix(chart): fixverydensebarchartsbb2c2ac
• fix(draw): handleLV_COLOR_DEPTH==1tooinlv_draw_sw_transformbd11ad8
• fix(example): fixwarnings1e3ca25
• fix(benchmark): fixwarnings1ed026c
• fix(draw): fixtextcolorwithsubpixelrenderingandBGRordere050f5c
• fix(meter): fixsettingpart_draw_dsc.idinneedleimgdrawing716e5e2
• fix(gridnav): fixstuckinginpressedstatewithencoderad56dfa
• fix(darw): addbackthedisappearedantialising=0support2c17b28
• fix(msg): fixtyposinAPIbyaddingwrappers41fa416
• fix(draw): fixtransformationaccuracye06f03d
• fix(style): removethereduntantdefineofLV_GRADIENT_MAX_STOPS903e94b
• demo(benchmark): fixlv_label_set_text_fmtformatstringsae38258
• demo(benchmark): fixwarning1173dcb
11.9 v8.3.3 06 October 2022
v8.3.3isthesameasv8.3.2. Itwasreleasedonlybecausetheversionnumberwassetincorrectlyinlvgl.h.
11.10 v8.3.2 27 September 2022
11.10.1 Fixes
• fix(fragment): fixedchildfragmenteventdispatch3683
• fix(sdl): clearstreaming/targettexturewithFillRect3682
• fix(sdl): transformationwithalpha(#3576)3678
• fix(draw_sw): fiximagecachetoaccessthefreedstackspace3584
• fix(style): usecompiletimeprop_cntforconststyles3609
• fix(demo): cannotfoundlvgl.hfile3477
• fix(ci)checkoutlv_micropythonrelease/v8branch3524
11.9. v8.3.306October2022 905


--- Page 910 ---


LVGLDocumentation8.3
• fix(canvas): fixclipépingontransformationb884aba
• fix(draw): allowdrawingoutlinewithLV_DRAW_COMPLEX==0tooece3495
• fix(colorwheel): fixupdatingcolorwhenusinglv_colorwheel_set_hsvd59bba1
• fix(slider): findthenearestvalueonclickinsteadoffloordfd14fa
• fix(draw): fixborderdrawingwiththickbordersd5b2a9b
• fix(refr): fixtruedoubledoublebufferinglogicwithtransparentscreens8b605cc
• fix(group): besureobjisremovedfromitscurrentgroupinlv_group_add_obj5156ee0
• fix(style): addmissinginvalidationinlv_obj_remove_local_style_propa0515ba
11.10.2 Docs
• docs(draw)removereferencetooldlv_fs_add_drvfunction3564
• docs(disp): LV_COLOR_SCREEN_TRANSPremovedependencyonLV_COLOR_DEPTH_32astransparency
issupportedacrossallcolordepths3556
11.10.3 CI and tests
• ci: protecttest.cwith#ifLV_BUILD_TESTbe485d7
11.10.4 Others
• chore(rt-thread)backportfixesfromv93604
• chore: fixwarnings7640950
• removeaccidentallyaddedcode5022476
11.11 v8.3.1 25 July 2022
11.11.1 Fixes
• fix(led): addbg_colordrawdescriptorsbacktoleddraweventtosupportLV_DRAW_COMPLEX03515
• fix(slider): fixknobdrawinginsymmetricalmode2967172
• fix(refr): fixlv_refr_get_top_obj9750c97
• fix(arc): fixarcknobinvalidationinSYMMETRICALmodea283273
11.11. v8.3.125July2022 906


--- Page 911 ---


LVGLDocumentation8.3
11.11.2 Examples
• example(freetype): UpdatetheMicropythonexampletousetheLatofont71913d3
• example(freetype): replacethearialfontwithlatotoavoidlicensingissues8544cc3
11.11.3 Docs
• docs(readme): fixLVGLversiontypo(8.3.0)3462
• docs(tasmota): supportLVGL8.3.0(#3511)62662f6
11.12 v8.3.0 6 July 2022
11.12.1 Overview
• LayersSupporttransforming(zoomandrotate)anywidgetsandtheirchildrendrawnbyLVGL.TodothisLVGL
renders the transformed widgets into a layer and draws that layer as an image applying all the transformations.
Layersarealsousedwhenopa(notbg_opa,border_opa,etc)andblend_modeareset. Thiswaynested
objectsareblendedasonelayertoavoidcolorbleeding. Seemorehere.
• inheritandinitialstylepropertiesBesidessetting"normalvalues"forstylepropertiesnowyoucansetthemto
inherit(inherittheparent'svalue)andinitial(setthesystemdefault). Seemorehere
• NXP-PXPandVGLITEGPUsupportThesupportforNXPGPUsareaddedagain
• ColorfontsupportYoucanuseemojisandimagesintextswiththisgreatnewfeatures. Seemorehere.
• ARM2DGPUsupportGetsupportforARM'sownGPU.
• PubSub messaging A publisher-subscriber based messaging system is added to make communication between
componentseasier. Seemorehere.
• PinyinIMEAddsupportforPinyinIMEChineseinput. Seemorehere.
• render_start_cbAnewcallbackisaddedtolv_disp_drv_ttoindicatewhentherenderingstarts. It'suseful
tomakesynchronization,e.g. waitforaTEsignal.
11.12.2 New Features
• feat(ime_pinyin): addAPItosupport9-keyinputmode3447
• feat(font): addfontplaceholderdrawingconfiguration3446
• feat(fsdrv): addposixlseek()errorchecking3444
• feat(misc): addasynchronouscallfunctioncancellationfunction3439
• feat(ime_pinyin): addAPItousePinyinIME(Chineseinput)3408
• feat(style)add'inherit'and'initial'CSSproperties3390
• feat(porting): addflushingcontroltothetemplate3384
• feat(anim): adddeletedcallback(#3279)3295
• feat(cmsis-pack): monthlyupdateforMay3394
• feat(textarea): makeitpossibletocustomizethebulletcharacter3388
11.12. v8.3.06July2022 907


--- Page 912 ---


LVGLDocumentation8.3
• feat(disp): addatemporaryinvalidationdisableinterface3378
• feat(group): addedgecallbackswhentryingtomovefocuspastbeginningorend3374
• feat(benchmark): makelvglrenderatthehighestframerate3352
• feat(rt-thread): allowuserstocontrolrefreshperiodinthelvglthread3375
• feat(cmsis-pack): MonthlyupdateforMay(alpha)3359
• feat(demos): addacallbackforbenchmark3353
• feat(gpu): Updatelv_gpu_arm2dwithnewfeatures3340
• feat(draw): improveaccelerationforLV_IMG_CF_ALPHA_8BIT3337
• feat(anim): addthefunctionofgettingglobalanimationrefreshertimer3331
• feat(demo): addWeightedFPSandOpaspeedlogoutput3326
• feat(gpu): Updategpuarm2d3320
• feat(cmsis-pack): MonthlyupdateforApril3300
• feat(fsdrv)fixissuesforwin32backends3284
• feat(cmake-build): Optiontoallowbuildingsharedlibraries. 3278
• feat(hal): addrender_start_cbtodisp_drv3274
• feat(cmsis-pack): monthlyupdateforApril(v1.0.3-alpha)3271
• feat(benchmark): addtraceoutputforrunningaspecificscenario3245
• feat(env_support): cmsispackmonthlyupdate3209
• feat(tabview): supportverticalscrolling3184
• feat(span): addaninterfaceforsettingthenumberoflines3200
• feat(indev): addpossibilitytoenable/disableallinputdevicesatonce3179
• feat(font): addimgfont-canbeusedtoaddemojistolabel/span3160
• feat(gpu): addgpuarm2d3162
• feat(dma2d): addlv_draw_stm32_dma2d_buffer_copyfunction3147
• feat(disp): addscreenoutanimations3081
• feat(menu): makemenuwidgetmorecompatiblewithencoder3061
• feat(label): addedanimationstylepropertytoapplyittocircularscrollinganimationoflabelwidget3128
• feat(script): addpre-commitconfigurationforcodeformatting3092
• feat(refr): preventsdirtyareasfrombeingmodifiedduringrendering3107
• feat(log): improvelv_logandaddlogtheresultfromlv_demo_benchmark3084
• feat(fragment): addfragmentmanager(aUIControllerconcept)2940
• feat(porting): addamacrolv_run_timer_handler_in_periodtosimplifyporting3063
• feat(gpu): reattachnxppxpvgliteaccelerators(#3322)029eef7
• feat(draw): supporttransformingwidgetsandimprofeswtransform318146a
• feat(msg): addpublisher-subscribermessaging79a29d7
• feat(benchmark): addanAPItorunspecificscene(#3089)305ad00
11.12. v8.3.06July2022 908


--- Page 913 ---


LVGLDocumentation8.3
• feat(gpu): addSWM341gpusupport(synwit)07b7eea
• feat(arc): addlv_arc_align_obj_to_angleandlv_arc_rotate_obj_to_anglea76bb70
• feat(draw): adddraw_ctx->buffer_copyd034511
• feat(dropdown): addlv_dropdown_get_option_index9997fb0
• feat(tabview)addAPItorenametab. 2c9695a
• feat(indev): sendLV_EVENT_PRESS_LOSTonreleasewithwait_until_releasecc18518
• feat(style)add'inherit'and'initial'CSSproperties(#3390)9a48de0
• feat(draw): improveaccelerationforLV_IMG_CF_ALPHA_8BIT(#3337)8d3c41d
• feat(label): added animation style property to apply it to circular scrolling animation of label widget (#3128)
340d45c
• feat(gridnav): addlv_gridnav_set_focusedb6d2daa
11.12.3 Performance
• perf(draw): speedupnonnormalblendmodes5a06fce
• perf(draw): minoroptimiziationinpointtransformationc6c2864
• perf(layer): cachethelayer_typeac2e2f1
11.12.4 Fixes
• fix(draw): conflictwithexternalALIGNdefine3336
• fix(arc): fixbugwithLV_ARC_MODE_REVERSE(#3417)3418
• fix(fragment): memoryleakoffragments#34383442
• fix(draw): solvememoryleakingissue3437
• fix(gridnav)correctlogicinfind_last_focusable3423
• fix(examples)correctcommentinsliderexample3419
• fix(sdl): addtransformationsupportfortheSDLbackend3403
• fix(bmp): fixwithLV_COLOR_16_SWAP3412
• fix(sdl): fixLRU,reportedin#34023404
• fix(draw)avoiduse-after-freewhendrawingarcs3399
• fix(subpx): fixsubpixelrenderingfontisnotdisplayingbug3387
• fix(style): resetstylelookuptableaftergcsweep/lv_deinit3385
• fix(benchmark): fixtheissuethatwrongscenenumberisused3372
• fix(draw): fixcoloursupportsforindexedandalpha-only3371
• fix(mem): fixTLSFreturningthewrongpointerwhentherequestedsizeistoolarge3325
• fix(demo): fixwarning. 3344
• fix(config): addLV_GPU_SDL_LRU_SIZE3348
• feat(draw): improveaccelerationforLV_IMG_CF_ALPHA_8BIT3337
11.12. v8.3.06July2022 909


--- Page 914 ---


LVGLDocumentation8.3
• fix(txt): fixreturnedvalueoflv_txt_iso8859_1_next(...,NULL)3338
• fix(benchmark): removeredundantstringforthesmallscreens3335
• fix(chart): fixaccessinguninitializedpoint_area3327
• fix(config): addLV_LAYER_SIMPLE_BUF_SIZEtoKconfig3312
• fix(config): Keepthesequenceofwidgetinorder3314
• fix(config): fixtypoinLV_USE_PERF_MONITORandLV_USE_MEM_MONITOR3313
• fix(refr): initializingrow_cntistosilencethewarning3309
• fix(meter): fixtypo3308
• fix(draw): updateMakefiles3303
• fix(lodepng): fixNULLpointeraccess3307
• fix(Kconfig): changethetypeofLV_FS_STDIO_LETTERfromstringtoint3282
• fix(demo): fixWformatwarning3290
• fix(snapshot): addmissingASSERTchecks3292
• fix(Kconfig): AddLV_USE_GRIDNAVandLV_USE_FRAGMENTtoKconfig3270
• fix(msgbox): donotexecuteinitobjwhenobj==NULL3264
• fix(menu): useLV_ASSERT_MALLOCcheckfornew_node3263
• fix(canvas):imagecachemayexpireaftersetcanvas'sbuff3267
• fix(obj_style): preventaccesstoclassnullpointer3252
• fix(png): fixpossiblememoryleakwhendecodingfails3249
• fix(libs): fixpossiblebufferunderflowcausedbyextensionmatching3250
• fix(fs): trackmultipledirectoryhandleswithwin32backends3243
• fix(png): useLV_IMG_CF_TRUE_COLOR_ALPHAinsteadofLV_IMG_CF_RAW_ALPHA3212
• fix(Keil-AC5): sliencewarningsinKeil-AC53221
• fix(meter): fixinfiniteloopcausedbyloopvariabletypemismatch3232
• fix(chart): removeinvaliddecisionbranches3231
• fix(gradient): assertbeforedividingby03228
• fix(calendar): fixinfiniteloopcausedbyloopvariabletypemismatch3230
• fix(flex): assertbeforedividingby03237
• fix(hal): fixLV_ASSERT_MALLOCwrongplacement3236
• fix(disp): fixmissingnullpointerjudgment3238
• fix(obj_class): fixpossiblememoryleakwhenthedefaultdispisNULL3235
• fix(draw_sw_letter): fixincorrectuseofsizeofforapointer3234
• fix(indev): fixnullpointeraccesscausedbytypo3229
• fix(event): removeinvaliddecisionbranches3233
• fix(draw_mask): removeinvaliddecisionbranches3225
• fix(spinbox): removeinvalidjudgment3227
11.12. v8.3.06July2022 910


--- Page 915 ---


LVGLDocumentation8.3
• fix(gradient): removeinvaliddecisionbranches3226
• fix(txt): return0ifletter_uniisoutofrange3224
• fix(calendar): fixpossiblearrayaccessoutofbounds3223
• fix(style): removeuselessnullpointerjudgment3222
• fix(obj): scrollingexceptionwhenuselv_obj_set_parent()3210
• fix(libs): fixmemcmpmemoryaccessoverflow3205
• fix(png): fixpossiblefileleaks3204
• fix(docs): renametask-handler.mdtotimer-handler.md3203
• fix(lru): Fixuseofundefinedvariables3181
• fix(rt-thread): SconscriptuseLOCAL_CFLAGStoreplaceLOCAL_CCFLAGS3196
• fix(make)makefilesunderdraw/gpu3202
• fix(docs-CN):fixbrokenlinkstodocsindirget-started3195
• fixbrokenlinkstodocsindirget-started3190
• fix(indev): fixwarningaboutformattinguint32_twith%d3193
• fix(Kconfig): moveLV_USE_IMGFONTtoothersmenu3176
• fix(draw): src_buf_tmpwillbeNULLwhenLV_DRAW_COMPLEXis'0'3163
• fix(span): alignthebaselines3164
• fix(menu): fixcrashondelete3154
• fix(Kconfig): addmissingLV_USE_THEME_MONO3146
• fix(demo/stress): removetheunusedassets3139
• fix(jpg): swaphighandlowbyteswhenmacroLV_COLOR_16_SWAPis13138
• fix(script): inlv_conf_internalfixsomewidgetdependencieswhenusingKconfig3119
• fix(demo): minorfixforbenchmark3114
• fix(misc): inlv_map()handleifmaximumvaluelessthanminimumvalue3113
• fix(extra): adjustimagedecoderinitializationorder3085
• fix(chart): optimizechartinvalidation3028
• fix(refr): fixperformancemonitorNULLpointeraccess3105
• fix(misc): Removeduplicatedeclarationof_lv_log_add. 3103
• fix(gridnav): getkeycodefromtheactualevent3101
• fix(draw_rect): deleteSTDC_VERSIONtoensureC++compatibility3099
• fix(font):drawplaceholderifget_glyph_dsc()returnsfalse3000
• fix(conf): workaroundGCCbug3082
• fix(fsdrv): replacingsprintfwithlv_snprintfforsafety3079
• fix(cmsis-pack): addPIDXforcmsis-pack3064
• feat(gpu): addSWM341gpusupport(synwit)07b7eea
• fix(fs): fixcachedreadandaddunittestforlv_fs98660a8
11.12. v8.3.06July2022 911


--- Page 916 ---


LVGLDocumentation8.3
• fix(table): invalidateonlythechangedcell306fa19
• fix(draw): handlenonBLEND_MODE_NORMALforARGBdrawing9ac8ce6
• fix(draw): reverthandlingofstyle_opaonnotMAINparts51a7a61
• fix(draw): clipthebgimgtotherectangle'sareainlv_draw_sw_rect77d726e
• fix(obj): fixLV_OBJ_FLAG_OVERFLOW_VISIBLEc742f2c
• fix(scroll): donotfirescrollbegin/endeventoneveryscrollstep25ce6e3
• fix(indev): donotsendkeystoobjectsindisabledstateb0a46c4
• fix(disp): makelv_scr_loadworkbetterwithlv_scr_load_animandauto_del=true52287fd
• fix(draw): createintermediatelayerforblendmodestoo8b15007
• fix(group): inlv_group_remove()fixiftheobjecttofocusisdeleted72cb683
• fix(draw): besureanglevaluesareinthecorrectrangee624b90
• fix(scroll): sendLV_EVENT_SCROLL_BEGIN/ENDwithnoanimationtoo777fe1e
• fix(arc): fixarcimagedrawingissue7153e3f
• fix(refr): fixmemorywriteoutofboundsissue13c99fc
• fix(gif): fixrareissuewhendrawingthegif'sbackgroundb1e2c06
• fix(chart): fixmisalignedhorizontalticklinesonbarcharts4572a0c
• fix(font): use0widthfornonprintablecharacters7cf5709
• revert(group): 72cb683c799f65cd4fbae22dafc3a35c123bb66bb7b22c1
• fix(keyboard): don'tshowpopoversonmapchangeac202e7
• fix(refr): considermaskswithLV_OBJ_FLAG_OVERFLOW_VISIBLEa7f9dfa
• fix(draw): fixthecalculationofthetransformedcoordinates76de7c6
• fix(style): fixheapuseafterfreewithtransitionstylesd9ae58b
• fix(tabview,tileview): fixscrolling22854ff
• fix(draw): fixdisp_bg_imgdrawingdea75d9
• fix(textarea): fixmaxlengthhandling127d8e8
• fix(btnmatrix): fixextradrawsizecalculationtonotclipshadow7ada130
• fix(indev): scroll_throw_vectcannotconvergeto0whenvectisnegativee5c11f1
• fix(theme): makethebasicthemeevenmoresimpler62d6f3c
• fix(color): colormixroundingerror523062b
• fix(style): _lv_style_prop_lookup_flagstellallflagsforLV_STYLE_PROP_ANYe53f602
• fix(list): useforiconb171f7d
• fix(layout): fixthehandlingofFLOATINGchildren48728a7
• fix(style): makecolorfilterinherited5546b9d
• fix(spinbox): setitsdefaultwidthinitsclass3d92972
• fix: fixwarning6c00552
• fix(draw): fixtransformationsonsubdividedareascbff8e8
11.12. v8.3.06July2022 912


--- Page 917 ---


LVGLDocumentation8.3
• fix(slider): fixleftknobinrangedmode17f5e0a
• fix(Kconfig): allowuncheckingLV_CONF_SKIPf3a07a3
• fix(style): fixusingwidthforbothwidthandheightinradiustransition6acbdaa
• fix(dropdown): fixscrollingwhenoptionsareCENTERalignede651383
• fix(grid): fixdeadbranch46bf27d
• fix(hal): disabledriver->screen_transpbydefaultregardlesstoLV_COLOR_SCREEN_TRANSPff7204e
• fix(theme): fixmonothemeinit5ec6694
• fix(bmp)fixtypoinBPPconditioncbc38af
• fix(theme): inthebasicthemeshowthetextareacursoronlyinfocusesstatebb03fb1
• fix(draw): fiximgrecolor23eecce
• fix(theme)adddisabledstyletotextareainthedefaulttheme00f6759
• fix(meter): improvetheprecisionofticklinedrawing0255c6d
• fix(gpu): fixwarningwithNXPGPU6be43b8
• fix(color): compensateroundingerrorduringblending42d9c07
• fix(examples)usetype-safefunctionforretrievingeventparam71d535d
• fix(draw)ensurevariableisinitializedtoavoidwarning276f28a
• feat(draw): improveaccelerationforLV_IMG_CF_ALPHA_8BIT(#3337)8d3c41d
• fix(spinbox): renamelv_spinbox_set_postolv_spinbox_set_cursor_posa99eb6b
• fix(layout): useuint16_tLV_LAYOUT_FLEX/GRIDc596a36
• fix(event)avoidusingabooleanasapointer06fff4b
• fix(theme): properlydisabletransitionsifLV_THEME_DEFAULT_TRANSITION_TIME==0242112b
• fix(scroll): fixscrolltoviewtotheleft7c74f65
• fix(fs): markthereadcacheasinvalidbydefault54f9987
• fix(menu): fixcrashondelete(#3154)a6c4c13
• fix(roller): fixunexpectedjumpininfinitemode18f2d78
• fix(conf): workaroundGCCbug(#3082)c6b34bc
11.12.5 Examples
• example(ime_pinyin): improvedlv_example_ime_pinyin_13428
• example(imgfont): fixlvgl.hincludepath3405
• example(btnmatrix): updatelv_example_btnmatrix_2toexpicitlycheckwhichpartisdrawn6b2eac1
• example(slider): makelv_example_slider_3workwithdarkthemetoo4a766c5
• example(span): avoidambiguousmeaing7bb09e3
• demo(benchmark): addLV_DEMO_BENCHMARK_RGB565A8optionafaa8c9
11.12. v8.3.06July2022 913


--- Page 918 ---


LVGLDocumentation8.3
11.12.6 Docs
• docs(indev): addcommentininputdevicepart3422
• docs(slider)mentionthatVALUE_CHANGEDisnotsentonrelease3397
• docs(readme): addversionportuguesebrazilian3349
• docs(pc-simulator): addMDKwithFastModel3318
• docs(intro): updateforv8.2.03316
• docs(readme)updatelinktothePlatformIORegistry3296
• docs(gesture): fixtypolv_indev_act()->lv_indev_get_act()3291
• docs(scroll)addinformationaboutscrollcoordinates3088
• docs(msgbox)fixtypo3095
• docs(scroll): useLV_DIR_VERinsteadofLV_DIR_TOP3066
• docs: rearrangetheget-startedsection8a81532
• docs: addsectionforrenderersandgpus378aaa6
• docscollapseAPIsbydefaultebd20af
• docs(images): fixnotesaboutbreakingchangeinfv8.29a1e385
• docs(sim): addlinktoqt-creator88bbef1
• docs(chart): describehowtosetthespacebetweencolumns746917d
• docs(README):fixbrokenlinkc2c44c6
• docs(examples)avoidredirectswhenloadingexamplesd367bb7
• docs(gesture): describehowpreventsendingeventsafteragesture65db5c9
• docs(get-started): addquick-overviewtotheindex91ebf81
• docs(others): addimgfonttotheindex656a0e5
11.12.7 CI and tests
• ci(slider): addunittest3198
• test(line): addunittestsforlinewidget3104
• test(table): replicateissuewhenreducingtablecells3121
• test(textarea): addunittest3074
• test(table): addunittests3040
• ci(docs)replaceuseofsedwithproperconfigurationvariables1816fa5
• ciaddMakefiletestea79cee
• test(mem)addtestfor#33249700664
• test(img): fiximageerrordiffhandler48d87e1
• ciupdatedocsbuildertoworkwithPython3.10a3d66c9
• cimakesureLVGLassertionscauseteststofailb83c5aa
11.12. v8.3.06July2022 914


--- Page 919 ---


LVGLDocumentation8.3
• ciremoveformattingcommentd345f76
• cidon'trunworkflowstwiceonPRsfcc1152
• cibumptesttimeoutto30seconds[skipci]85e3e23
• cilimitteststo15seconds003f18f
• ci(makefile)fixtypoinGitHubactiona101e70
• ci(switch): fixmemleaktest8481e3a
• ci(stale)bumpactionversion5977eef
• ciuseGCCproblemmatcheronARMtestsaswell9fcefe5
11.13 v8.2.0 31 January 2022
11.13.1 Overview
Amongmanyfixesandminorupdatesthesearethemostimportantfeaturesinv8.2.0:
• Abstractrenderlayertomakeiteasiertoattachexternaldrawengines
• AddLV_FLAD_OVERFLOW_VISIBLE.Ifenabledthechildrenofanobjectwon'tbeclippedtotheboundaryof
theobject
• Addffmpegdecodersupporttoplayvideosandopenawidevarietyofimageformats
• Addfontfallbacksupport
• Addgradientditheringsupport
• Add"monkeytest"
• Addcmsis-packsupport
• AddGridnavigation(lv_gridnav)
TheGPUsupportforNXPmicrocontrollersisstillnotupdatedtothenewdrawarchitecture. See#3052
11.13.2 Breaking Changes
• :warning: feat(fs): addcachingoptionforlv_fs-read2979
• :warning: feat(span): lv_spangroup_get_expand_width()addsaparameter2968
• :warning: arch(draw): allowreplacingthedrawenginedb53ea9
• :warning: indexedimagesarenotchromakeyed. Usethealphachaneelinstead.
11.13. v8.2.031January2022 915


--- Page 920 ---


LVGLDocumentation8.3
11.13.3 Architectural
• arch(draw): separateSWrenderertoallowreplacingit2803
• arch: mergelv_demos5414652
• arch(sdl): migratedtousenewbackendarchitecture2840
• arch(env): movert-threadintoenv_supportfolder3025
• arch(env): arch(env): movethecmakefolderintotheenv_supportfolder773d50f
• arch(env): movethezephyrfolderintotheenv_supportfolder4bd1e7e
11.13.4 New Features
• feat(cmsis-pack): prepareforlvglv8.2.0release3062
• feat(gridnav): addlv_gridnav2911
• feat: updatethecmsis-packto0.8.33021
• feat(sdl): supportroundedimages3012
• feat(cmsis-pack): addcmsis-packsupport2993
• feat(event): addpreprocessingandstopbubblingfeaturesforevents3003
• feat(draw): addgradientditheringsupport2872
• feat(symbols): addguardstoLV_SYMBOL_*toallowredefiningthem2973
• feat(obj): subdivideLV_OBJ_FLAG_SCROLL_CHAINinto...CHAIN_HORand...CHAIN_VER2961
• feat(draw): adddraw_bgcallbacktodraw_ctx#29342935
• feat(docs): addChinesereadme2919
• feat(txt): addused_widthparameterto_lv_txt_get_next_line()2898
• feat(others)addmonkeytest2885
• feat(rlottie): addanimationcontroloptions2857
• feat(lv_hal_indev): addmissinglv_indev_delete()2854
• feat(freetype): optimizememoryallocation2849
• feat(Kconfig): addFreeTypeconfig2846
• feat(widgets): addmenuwidget2603
• feat(refr): addresetfunctionforFPSstatistics2832
• feat(Kconfig): addmonitorpositionconfiguration2834
• feat(examples)addmicropythonversionsoftheexternallibraryexamples2762
• feat(freetype): supportboldanditalic2824
• feat(font)addfallbacksupportandmem. fontloadoptiontoFreeType2796
• feat(lib)addffmpegvideoandimagedecoder2805
• feat(obj): addLV_OBJ_FLAG_OVERFLOW_VISIBLEe7ac0e4
• feat(scrollbar): addmorecontroloverscrollbarpaddings4197b2f
11.13. v8.2.031January2022 916


--- Page 921 ---


LVGLDocumentation8.3
• feat(dropdown): keepthelistonopen/closeforsimplerstyling9d3134b
• feat(qrcode)usedestructorinsteadoflv_qrcode_delete()318edd8
• feat(disp)allowdecouplingthedisp_refrtimer85cc84a
• feat(obj): addlv_obj_get_event_user_data()53ececc
• feat(obj)addLV_OBJ_FLAG_SCROLL_WITH_ARROW70327bd
• feat(slider): considerext_click_areaontheknobwithLV_OBJ_FLAG_ADV_HITTEST9d3fb41
11.13.5 Performance
• perf(sdl): optimizetheuseofSDL_RenderSetClipRect2941
• perf(color): addfasterlv_color_hexfunction2864
11.13.6 Fixes
• fix(micropython)updateexamplesfornewAPI3059
• fix: increasedefaultvalueofLV_MEM_SIZEforlv_demo_widgets#30573058
• fix(cmsis-pack): fixissue#30323056
• fix(porting): addmissingfunctionprototypes3054
• fix(kconfig): addmissingdefaultvalues3050
• fix(canvas): forcecanvastouseswdraw3045
• fix(rt-thread): useARCH_CPU_BIG_ENDIANtoreplaceRT_USING_BIG_ENDIAN3044
• fix(gradient): generalcleanupandfixforalignmentissues3036
• fix(draw): renderingissuesforverticalgradientwithandwithoutdithering3034
• fixuninitializedvariable3033
• fix(lru): lowerdependencyforstandardCfunctions3024
• fix(env_support): movecmsis-packtoenv_supportfolder3026
• fix(doc): fullcoveringopacityis255,not2563022
• fixuninitializedvariables3023
• fixvariousissuesforesp323007
• fix(sdl): fixclippedimagedrawing2992
• fix(draw): missedbg_colorrenaminginthedrawfunction3002
• fix(porting): fixtypoandanunmatchedprototype2998
• fix(conf)addmissingLV_LOG_LEVELdefaultdefinition2996
• fix(refr): crashiffull_refresh=12999
• fix(Kconfig): adapttolvgl'sbuilt-indemos2989
• fix(Makefile): compilationerrors2944
• fix(rlottie): fixvariablename2971
• fix(group): inlv_group_del()removegroupfromindev(lvgl#2963)2964
11.13. v8.2.031January2022 917


--- Page 922 ---


LVGLDocumentation8.3
• fix(obj): oldparent'sscrollisnotupdatedinlv_obj_set_parent()2965
• fix(fatfs)addmissingcast2969
• fix(snapshot)fixmemoryleak2970
• fix(examples)moveeventcallbackregistrationoutsideloopinlv_example_event_32959
• fix(canvas): offbyoneerrorinsizecheckinlv_canvas_copy_buf2950
• fix(indev)addbracestoavoidcompilerwarning2947
• fix: fixparameterorderinfunctionprototypes2929
• fix(style):addconstqualifierforlv_style_get_prop()2933
• fix(dropdown): inlv_dropdown_get_selected_strhandleiftherearenooptions2925
• fix: lv_deinit/lv_initcrashorhang2910
• fix(rt-thread): improvethestructure2912
• fix: removedstringformatwarningsforint32_tanduint32_t2924
• fix(lv_fs_win32): addmissingincludeof<stdio.h>2918
• fix: useunsignedintegerliteralforbitshifing. 2888
• chore(lottie)moverlottie_capi.htolv_rlottie.c2902
• fix(qrcodegen)addbracketsaroundassertcalls2897
• fix(list)guardimagecreationwithLV_USE_IMG2881
• fix(snapshot): makefakedisplaysizebigenoughtoavoidalignissue. 2883
• fix(sdl)correctmakefile2884
• fix(draw): fixset_px_cbmemorywriteoverflowcrash. 2882
• fix(freetype): fixmemseterror2877
• fix(span): fixalignandbreakword2861
• fix(refr): swapbuffersonlyonthelastareawithdirectmode2867
• fix(arc)freememorywhendrawingfull-circlearc2869
• fix(indev): updatelv_indev_drv_updatetofreetheread_timer2850
• fix(draw): fixmemoryaccessoutofboundswhenusingblendsubtract2860
• fix(chart)addlv_chart_refresh()tothefunctionswhichmodifythedata2841
• fix(conf)mismatchedmacrojudgment2843
• fix(ffmpeg): whendisabledLV_FFMPEG_AV_DUMP_FORMATmakesav_logquiet2838
• fix(rt-thread): fixabugoflog2811
• fix(log): toallowprintfandcustom_print_cbtoworkatsametime2837
• fix(keyboard): addmissingfunctions2835
• fix(checkbox)removeunnecessaryevents2829
• fix(qrcode): replacememcpy()withlv_memcpy()anddeleteuselessmacros2827
• fix(font)improvebuiltinfontsourcefilesgenerationprocess2825
• fix(CMake)splitCMakeLists.txt,addoptions,includesanddependencies2753
11.13. v8.2.031January2022 918


--- Page 923 ---


LVGLDocumentation8.3
• fix(obj): makelv_obj_fade_in/outusethecurrentopaasstartvalue2819
• fix(qrcode):minimizemarginsasmuchaspossible2804
• fix(scripts): switchallscriptstopython32820
• fix(event): event_send_corecrashinspecialcase. 2807
• fix(Kconfig)removeduplicateLV_BUILD_EXAMPLESconfiguration2813
• fix(obj): inobjeventusethecurrenttargetinsteadoftarget2785
• fix(draw_label): radiusMaskdoesn'tworkinSpecificcondition2784
• fix(draw_mask): willcrashifget_width/height<02793
• fix(theme)makethebasicthemereallybasica369f18
• fix(arc): fixknobinvalidation345f688
• fix(theme): addarc,spinnerandcolorwheeltobasicthemeadc218a
• fix(conf)defineLV_LOG_TRACE_... to0inlv_conf_internal.htoavoidwarnings305284c
• fix(draw): consideropaandclipcorneronbg_imgd51aea4
• fix(draw): addgrad_cache_memtoGC_ROOTs138db9c
• fix(bar,slider): fixshadowdrawingonshortindicators364ca3c
• fix(theme): fixthemeinitializationissueintroducedin6e0072479d231644
• fix(draw): addlv_draw_sw_bg49642d3
• fix(draw)border_drawcrashisspecialcase075831a
• fix(theme): fixcrashinlv_theme_basic_initca5f04c
• fix(draw): fixindexedimagedrawing5a0dbcc
• fix(roller): clipoverflowingtext5709528
• fix(align)fixLV_SIZE_CONTENTsizecalculationwithnotLEFTorTOPalignment9c67642
• fix(draw): futherbg_imgdrawfixes81bfb76
• fix(btnmatrix): keeptheselectedbuttonevenonreleased47cd1d
• fix(sw): makeknobsizecalculationmoreintuitive5ec532d
• fix(switch): makeknobheightcalculationsimilartoslider0921dfc
• fix(span): explicitlysetspan->txttothereturnvalueoflv_mem_realloc(#3005)a9a6cb8
• fix(example): updateLVGL_Arduino.inod79283c
• fix(draw)simplifyhowoutline_padiscompnesated81d8be1
• fix(obj)makeLV_OBJ_FLAG_SCROLL_CHAINpartoftheenuminsteadofdefinef8d8856
• fix(label): dotnotadddotsifthelabelheight>1fontlineheight4d61f38
• fix(event): crashifanobjectwasdeletedinanevent9810920
• fix(build)fixsdlbuildwithmake43729d1
• fix(config): fixanonymouschoice71c739c
• chore(docs): fixlv_list_add_texta5fbf22
• fix(png)checkpngmagicnumbertobesureit'sapngimage1092550
11.13. v8.2.031January2022 919


--- Page 924 ---


LVGLDocumentation8.3
• fix(btnmatrix): fixcrashifanemptybtnmatrixispressed2392f58
• fix(mem/perfmonitor): fixissueintroducedin#29100788d91
• fix(layout)fixlayoutrecalculationtriggerinlv_obj_add/clear_flegee65410
• fix(obj)fixlv_obj_fade_in4931384
• fix(draw): fixclippingchildrentoparent5c98ac8
• fix: removesymlinkstobeacceptedasanArduniolibrary6701d36
• chore: fixtyposinFATFSconfig74091c4
• fix(refr): fixmissedbufferswitchindoublefull-screenbuffer+direct_mode731ef5a
• chore(qrcode): fixwarningse9d7080
• docs(event): telltonotadjustwidgetsindrawevents933d67f
• fix(table,chart): fixmemoryleaks8d52de1
• fix(event): handleobjectdeletioninindev->fedback_cbbfc8edf
• fix(roller): snaponpresslostfa9340c
• fix(dropdown)besurethelististhetopobjectonthescreencb7fc2b
• fix(img)fixinvalidationissueontransformationsd5ede0e
• fix(obj)fixcommentsoflv_obj_set_pos/x/yb9a5078
11.13.7 Examples
• example: addnon-nulljudgmenttolv_example_obj_22799
• example(table): fixtextalignmentb03dc9c
11.13.8 Docs
• docs(demos)updateinformationtoreflectnewlayout3029
• docs(porting): removeduplicatedcontent2984
• docs(display)fixtypo2946
• docs(get-started)addintroductionforTasmotaandBerry2874
• docsfixspelling,parameterdescriptions,comments,etc2865
• docs: spellingfixes2828
• docs(style)minorstylefix2818
• docs(porting/display)fixformatting2812
• docs(roadmap)update084439e
• docs(widgets)fixeditlinks7ed1a56
• docs(contributing)updatecommitmessageformat1cd851f
• docs(porting): addmoredetailsaboutaddinglvgltoyourproject6ce7348
• docs(indev): adddescriptionaboutgestures2719862
• docs(style): describeconststyles28ffae8
11.13. v8.2.031January2022 920


--- Page 925 ---


LVGLDocumentation8.3
• docs(faq): add"LVGLdoesn'tstart,nothingisdrawnonthedisplay"section0388d92
• docsadddemos02a6614
• docs(fs): updatefsinterfacedescriptiontothelatestAPI285e6b3
• docs(format)letwrap4bf49a8
• docs(imgbtn)fixtypod792c5f
• docs(porting)clarifythatdisplaysmustberegisteredbeforeinputdevices1c64b78
• docs(event)fixlv_event_get_original_targetvslv_event_get_current_targetcdd5128
• docs(events)renameLV_EVENT_APPLYtoLV_EVENT_READY(#2791)bf6837f
• docs(gpu): linkstylepropertiesandboxingmodel6266851
• docs(gesture): clarifygesturetriggeringwithscrollinge3b43ee
• docs(contributing): removethementioningofthedevbranch00d4ef3
• docs(bar)fixdefaultrangeeeee48b
• docs(event): telltonotadjustwidgetsindrawevents933d67f
• docs(switch)improvewordingb4986ab
• docs(font)fixexampletomatchv82f80896
11.13.9 CI and tests
• test(bar): addunittests2845
• test(switch): addinitialunittest2794
• test(demo)addtestsforwidgetandstressdemos3bd6ad8
• test(dropdown)fixtopassagain918b3de
• testaddsupportforusingsystemheap446b1eb
• ciremoveformattingrequestworkflow6de89e4
• ciinitialsupportforcross-architecturetests7008770
• cicreatehandlerforformattingrequests7af7849
• test(style)addtestforgradientda8f345
• test(event)addtestfor#288651ef9c2
• ciaddworkflowtocheckcodeformattinga2b555e
• ciattempttospeedupcrosstests80408f7
• ciapplymyupdatestotheverify-formattingaction02f02fa
• ci: addarduinolinteractionf79b00c
• ciupdateactionbe9722c
• cimoreformattingactionupdates1f6037c
• cidisableLeakSanitizerondockerizedtestsc9e1927
• cionelasttryatthisfortonightdddafae
• citryalternatecheckoutmechanismcb3de30
11.13. v8.2.031January2022 921


--- Page 926 ---


LVGLDocumentation8.3
• test(style)fixcompileerrorba083df
• test(template)simplify_test_template.cb279f63
• ciforceccachetobesavedeverytimea7c590f
• ciswitchtocodecovv26b84155
• cimoredebuggingforformattingaction2f8e4bc
• ciinlineapt-getcommands90e2b9f
• ci(micropython)useESP-IDF4.4b34fe9e
• ciadd5kstacklimit4122dda
• ciforceuseofccacheinPATH6de3fa8
• ciaddbackstackusagecheckat4kilobytes89135d6
• citemporarilydisablestackusagecheck1900c21
• ci(cross)usepython3insteadofpythondf7eaa0
• ciusespecificversiontag59b4769
• cifixcheckstyleaction5bb3686
• cifixtypoinformattingactiond1ccbf6
• citestformattingaction065d821
• ci(micropython)switchtonewerGCCaction1fa7257
• ci(style)forcecolorondifftohelphighlightwhitespacechanges04f47ea
• ci(cross)installbuild-essential772f219
• ciforcepushingtoupstreambranch8277f78
• ciensurelvgl-botisusedtomakecommits9fcf52a
11.14 v8.1.0 10 November 2021
11.14.1 Overview
v8.1isaminorrelease,sobesidesmanyfixesitcontainsalotofnewfeaturestoo.
Someofthemostimportantfeaturesare
• BuiltinsupportforSDLbasedGPUdrawing
• Muchfastercircledrawinginthesoftwarerenderer
• Several3rdpartylibrariesaremergeddirectlyintoLVGL.
• AddLVGLasanRT-ThreadandESP32component
11.14. v8.1.010November2021 922


--- Page 927 ---


LVGLDocumentation8.3
11.14.2 Breaking Changes
• :warning: feat(calendar): addtheheaderdirectlyintothecalendarwidget2e08f80
11.14.3 Architectural
• archaddsmall3rdpartylibstolvgl2569
11.14.4 New Features
• feat(display)adddirect_modedrawingmode2460
• feat(conf): makeLV_MEM_BUF_MAX_NUMconfigurable2747
• feat(disp): addnon-fullscreendisplayutilities2724
• feat(rlottie)addLVGL-Rlottieinterfaceas3rdpartylib2700
• feat(rtthread): prepareforportingthedevice-driverofrt-thread2719
• feat(fsdrv)adddriverbasedonWin32API2701
• feat(span)indentsupportspercentforfixandbreakmode2693
• feat(rt-thread): implementrt-threadsconscirpt2674
• feat(lv_spinbox)supportbothright-to-leftandleft-to-rightdigitstepswhenclickingencoderbutton2644
• feataddsupportforrt-threadRTOS2660
• feat(disp): Enablerenderingtodisplaysubsection2583
• feat(keyboard): adduser-definedmodes2651
• feat(event)addLV_EVENT_CHILD_CREATED/DELETED2618
• feat(btnmatrix/keyboard): addoptiontoshowpopoversonbuttonpress2537
• feat(msgbox)addacontentareaforcustomcontent2561
• feat(tests): Includedebuginformationtotestbuilds2568
• feat(drawing)hardwareacceleratedrenderingbySDL22484
• feat(msgbox): omittitlelabelunlessneeded2539
• feat(msgbox): addfunctiontogetselectedbuttonindex2538
• feat(make)addlvglinterfacetargetformicropython2529
• feat(obj) add lv_obj_move_to_index(obj, index), renamed lv_obj_get_child_id(obj) to lv_obj_get_index(obj)
2514
• feat(obj)addlv_obj_swap()function2461
• feat(mem)LV_MEM_POOL_ALLOC2458
• feat(switch)addsmoothanimationwhenchangingstate2442
• feat(anim)addinterfaceforhandlinglv_animuserdata. 2415
• feat(obj)addlv_is_initialized2402
• feat(obj)Backportkeypadandencoderscrollingfromv7lv_pagetov8lv_obj2390
11.14. v8.1.010November2021 923


--- Page 928 ---


LVGLDocumentation8.3
• feat(snapshot)addAPItotakesnapshotforobject2353
• feat(anim)addanimtimeline2309
• feat(span)Addmissingspangroupfunctions2379
• feat(img)addimg_sizeproperty2284
• feat(calendar)improveMicroPythonexample2366
• feat(spinbox)addfunctiontosetcursortospecificposition2314
• feat(timer)checkiflv_tick_inciscalledaa6641a
• feat(event,widgets)improvetheparameterofLV_EVENT_DRAW_PART_BEGIN/END88c4859
• feat(docs)improvementstoexamples4b8c73a
• feat(obj)sendLV_EVENT_DRAW_PART_BEGIN/ENDforMAINandSCROLLBARpartsb203167
• feat(led)sendLV_EVENT_DRAW_PART_BEGIN/ENDfcd4aa3
• feat(chart) send LV_EVENT_DRAW_PART_BEGIN/END before/after the division line drawing section.
e0ae2aa
• feat(tests)uploadcoveragetocodecov4fff99d
• feat(conf)addbettercheckforKconfigdefaultf8fe536
• feat(draw)addLV_BLEND_MODE_MULTIPLYcc78ef4
• feat(test)addassertforscreenshotcompare2f7a005
• feat(event)passthescrollanimationtoLV_EVENT_SCROLL_BEGINca54ecf
• feat(obj)placethescrollbartotheleftwithRTLbasedir. 906448e
• feat(log)allowoverwritingLV_LOG_... macros17b8a76
• feat(arc)addsupporttoLV_OBJ_FLAG_ADV_HITTESTdfa4f5c
• feat(event)addLV_SCREEN_(UN)LOAD_START7bae9e3
• feat(obj)addlv_obj_del_delayed()c6a2e15
• feat(docs)addviewonGitHublinka716ac6
• feat(event)addLV_EVENT_SCREEN_LOADED/UNLOADEDeventsee5369e
• feat(textarea)removetheneedoflv_textarea_set_align56ebb1a
• feat(rt-thread): supportLVGLprojectswithGCC/Keil(AC5)/Keil(AC6)/IAR32d33fe
• feat(docs)lazyloadindividualexamplesaswell918d948
• feat: addLV_USE_MEM_PERF/MONITOR_POSacd0f4f
• feat(canvas)addlv_canvas_set_px_opab3b3ffc
• feat(event)addlv_obj_remove_event_cb_with_user_data4eddeb3
• feat(obj)addlv_obj_get_x/y_aligned98bc1fe
11.14. v8.1.010November2021 924


--- Page 929 ---


LVGLDocumentation8.3
11.14.5 Performance
• perf(draw)reimplementcircledrawingalgorithms2374
• perf(anim_timeline)addlv_anim_timeline_stop()2411
• perf(obj)removelv_obj_get_child_cntfromcyclelimitchecksebb9ce9
• perf(draw)reimplementrectangledrawingalgorithms5b3d3dc
• perf(draw)ignoremasksiftheydon'taffectthecurrentdrawareaa842791
• perf(refresh)optimizewheretowaitforlv_disp_flush_readywith2buffersd0172f1
• perf(draw)speedupadditiveblending3abe517
11.14.6 Fixes
• fix(bidi): addweakcharacterstothepreviousstrongcharacter'srun2777
• fix(draw_img): radiusmaskdoesn'tworkinspecificcondition2786
• fix(border_post): ignorebg_img_opadrawwhendrawborder_post2788
• fix(refresh)switchtoportableformatspecifiers2781
• fix(stm32)Markunusedvariableinstm32DMA2Ddriver2782
• fix(conf): MakeLV_COLOR_MIX_ROUND_OFSconfigurable2766
• fix(misc): correctthecommentandcodestyle2769
• fix(draw_map)useexistingvariablesinsteadfunctioncalls2776
• fix(draw_img): fixtyposinAPIcomments2773
• fix(draw_img):radiusMaskdoesn'tworkinSpecificcondition2775
• fix(proto)Removeredundantprototypedeclarations2771
• fix(conf)bettersupportbooloptionfromKconfign2555
• fix(draw_border):drawerrorifradius==0andparentclip_corner==true2764
• fix(msgbox)adddeclarationforlv_msgbox_content_class2761
• fix(core)addLsuffixtoenumstoensure16-bitcompatibility2760
• fix(anim): addlv_anim_get_playtime2745
• fix(area)minorfixes2749
• fix(mem): ALIGN_MASKshouldequal0x3on32bitplatform2748
• fix(template)prototypeerror2755
• fix(anim): removetime_origfromlv_anim_t2744
• fix(draw_rect):bottomborderlostifenableclip_corner2742
• fix(anim)andimprovement2738
• fix(drawborder):borderdrawerrorifborderwidth>radius2739
• fix(fsdrv): removetheseekcallinfs_open2736
• fix(fsdrv): skipthepathformatifLV_FS_xxx_PATHnotdefined2726
11.14. v8.1.010November2021 925


--- Page 930 ---


LVGLDocumentation8.3
• fix: markunusedvariablewithLV_UNUSED(xxx)insteadof(void)xxx2734
• fix(fsdrv): fixtypoerrorincommit752fba34f677ad73aee2732
• fix(fsdrv): returnerrorincaseoftheread/writefailure2729
• fix(refr)silencecompilerwarningduetointegertypemismatch2722
• fix(fs): fixtheoff-by-oneerrorinthepathfunction2725
• fix(timer): removethecodeduplicationinlv_timer_exec2708
• fix(async): removethewrongcommentfromlv_async_call2707
• fix(kconfig): changeCONFIG_LV_THEME_DEFAULT_FONTtoCONFIG_LV_FONT_DEFAULT2703
• fixaddMPsupportforLVGL3rdpartylibraries2666
• fix(png)memoryleakforsjpganduselv_mem_... inlv_png2704
• fix(gif)unifiedwhenceandremoveoff_t2690
• fix(rt-thread): includethert-threadconfigurationheaderfile2692
• fix(rt-thread): fixthecierror2691
• fix(fsdrv)minorfsissue2682
• fix(hal)fixtyposandwordingindocsforlv_hal_indev.h2685
• fix(haltick): addprecompile!LV_TICK_CUSTOMforglobalvariablesandlv_tick_inc()2675
• fix(anim_timeline)avoidcallinglv_anim_del(NULL,NULL)2628
• fix(kconfig)syncKconfigwiththelatestlv_conf_template.h2662
• fix(log)reducethestackusageinlogfunction2649
• fix(conf)makeabetterstylealignmentinlv_conf_internal.h2652
• fix(span)eliminatewarninginlv_get_snippet_cnt()2659
• fix(config): removethenonexistentKconfig2654
• fix(Kconfig): addLV_MEM_ADDRconfig2653
• fix(log): replaceprintfwithfwritetosavethestacksize2655
• fixtypos2634
• fixLV_FORMAT_ATTRIBUTEfixforgnu>4.42631
• fix(meter)makelv_meter_indicator_type_toftypeuint8_t2632
• fix(span):crashifspan->txt=""2616
• fix(disp)setdefaultthemealsofornon-defaultdisplays2596
• fix(label):LONG_DOTmodecrashiftextUtf-8encode>12591
• fix(example)inlv_example_scroll_3.pyfloat_btnshouldonlybecreatedonce2602
• fixlv_deinitwhenLV_USE_GPU_SDLisenabled2598
• fixaddmissingLV_ASSERT_OBJchecks2575
• fix(lv_conf_internal_gen.py)formattingfixesonthegeneratedfile2542
• fix(span)opabug2584
• fix(snapshot)snapshotisaffectedbyparent'sstylebecauseofwrongcoords2579
11.14. v8.1.010November2021 926


--- Page 931 ---


LVGLDocumentation8.3
• fix(label):makedrawareacontainext_draw_size2587
• fix(btnmatrix): makeORedvaluesworkcorrectlywithlv_btnmatrix_has_btn_ctrl2571
• fixcompilingofexampleswhencmakeisused2572
• fix(lv_textarea)fixcrashwhiledeletenon-asciicharacterinpwdmode2549
• fix(lv_log.h): removetheduplicatedsemicolonfromLV_LOG_xxx2544
• fix(zoom)multiplicationoverflowon16-bitplatforms2536
• fix(printf)use__has_includeformoreaccuratelimitsinformation2532
• fix(font)addassertinlv_font.cifthefontisNULL2533
• fix(lv_types.h): removec/c++compilerversioncheck2525
• fix(lv_utils.c): removetheunneededheaderinclusion2526
• fix(Kconfig)fixthecommentinLV_THEME_DEFAULT_DARK2524
• fix(sprintf)addformatstringforrp2port2512
• fix(span)fixsomebugs(overflow,decor,align)2518
• fix(color)Badcastinlv_color_mix()causedUBwith16bpporless2509
• fix(imgbtn)displayedincorrectwhenthecoordinateisnegative2501
• fix(event)besuretomoveallelementsincopy“lv_obj_remove_event_cb”2492
• fix(draw)usecorrectpointerinlv_draw_maskassertion2483
• feat(mem)LV_MEM_POOL_ALLOC2458
• fix(cmake)require'main'forMicropython2444
• fix(docs)addstatickeywordtodriverdeclaration2452
• fix(build)removemaincomponentdependency2420
• fixcircledrawingalgorithms2413
• fix(docs)wrongspellingofwordsinpictures2409
• fix(chart)fixedpoint-followingcursorduringverticalscrollincharts2400
• fix(chart)fixedcursorpositioningwithlargeYrescalingwithoutLV_USE_LARGE_COORD2399
• fix(grid.h)typos2395
• fix(anim_timeline)heapuseafterfree2394
• fix(snapshot)addmissingimportonMicroPythonexample2389
• fix(disp)Fixassertfailureinlv_disp_remove2382
• fix(span)modifytheunderlineposition2376
• fix(color)removeextraneous_LV_COLOR_MAKE_TYPE_HELPER2372
• fix(spinner)shouldnotbeclickable2373
• fix(workflow)silenceSDLwarningforMicroPython2367
• fix(span)fillLV_EVENT_GET_SELF_SIZE2360
• fix(workflow)changeMicroPythonworkflowtousemaster2358
• fix(disp)fixmemoryleakinlv_disp_remove2355
11.14. v8.1.010November2021 927


--- Page 932 ---


LVGLDocumentation8.3
• fix(lv_obj.h)typos2350
• fix(obj)deleteuselesstypeconversion2343
• fix(lv_obj_scroll.h)typos2345
• fix(txt)enhancethefunctionofbreak_chars2327
• fix(vglite): updateforv8e3e3eea
• fix(widgets)uselv_obj_classforallthewidgets3fb8baf
• fix(refr)reducethenestinglevelinlv_refr_area2df1282
• fix(pxp): updateforv88a2a4a1
• fix(obj)movecleanupsfromlv_obj_deltolv_obj_destructorb063937
• fix(draw)fixarcbgimagedrawingwithfullarcsc3b6c6d
• fix(pxp): updateRTOSmacroforSDK2.1000c3eb1
• fix(textarea)styleupdateinonelinemode+improvesrolltocursor60d9a5e
• feat(led)sendLV_EVENT_DRAW_PART_BEGIN/ENDfcd4aa3
• fixwarningsintroducedby3fb8baf5e302403
• fix(roller)fixpartialredrawoftheselectedarea6bc40f8
• fix(flex)fixlayoutupdateandinvalidationissues5bd82b0
• fix(indev)focusonobjectsonreleaseinsteadofpress76a8293
• fixtests449952e
• fix(dropdown)forgettheselectedoptiononencoderlongpresse66b935
• fix(obj)improvehowthefocusingindevisdetermineda04f2de
• fix(workflow)speedupMicroPythonworkflow38ad5d5
• fix(test)donotincludinganythingintestfileswhennotrunningtests9043860
• fixtests36b9db3
• fix(scroll)fireLV_EVENT_SCROLL_BEGINinthesamespotforbothaxesb158932
• fix(btnmatrix)fixbuttoninvalidationonfocuschange77cedfa
• fix(tlsf)donotuse<assert.h>c9745b9
• fix(template)includelvgl.hinlv_port_*_template.cfiles0ae15bd
• fix(docs)addmarginforexampledescriptionb5f632e
• fix(imgbtn)usethecorrectsrcinLV_EVENT_GET_SELF_SIZE04c515a
• fix(color)removeextraneouscastfor8-bitcolor157534c
• fix(workflow)usesameUnixportvariantforMicroPythonsubmodulesac68b10
• fix(README)improvegrammarde81889
• fix(printf)skipdefiningattributeifpycparserisusedee9bbea
• fix(README)spellingcorrection41869f2
• fix(color)overflowwith16-bitcolordepthfe6d8d7
• fix(docs)consideranexampletobevisibleoverawiderarea145a0fa
11.14. v8.1.010November2021 928


--- Page 933 ---


LVGLDocumentation8.3
• fix(codecov)disableuploadingcoverageforpullrequests27d88de
• fix(arc)disableLV_OBJ_FLAG_SCROLL_CHAINbydefaultf172eb3
• fix(template)updatelv_objx_templatetov838bb8af
• fix(align)avoidcircularreferenceswithLV_SIZE_CONTENT038b781
• fix(draw)withadditiveblendingwith32-bitcolordepth786db2a
• fix(arc)fixarcinvalidationagain5ced080
• fix(align)fixlv_obj_align_to93b38e9
• fix(scroll)keepthescrollpositiononobjectdeleted52edbb4
• fix(dropdown)handleLV_KEY_ENTER8a50edd
• fixvariousminorwarnings924bc75
• fix(textarea)variouscursordrawingfixes273a0eb
• fix(label)considerbasedirlv_label_get_letter_posinspecialcases6df5122
• fix(imgbtn)addlv_imgbtn_set_state26e15fa
• fix(printf)add(int)caststologmessagestoavoidwarningson%dd9d3f27
• fix(test)silencemake7610d38
• fix(test)silencemake37fd9d8
• fix(calendar)updatetheMPexample0bab4a7
• fix(scroll)fixscroll_area_into_viewwithobjectslargerthantheparent5240fdd
• fix(msgbox)handleNULLbtnmapparameter769c4a3
• fix(scroll)donotsendunnecessaryscrollendevents3ce5226
• fix(obj_pos)considerallalignmentsincontentsizecalculationbutonlyifxandy=05b27ebb
• fix(imgdecoder)adderrorhandlingifthedsc->data=NULLd0c1c67
• fix(txt): skipbasicarabicvowelcharacterswhenprocessingconjunction5b54800
• fix(typo)renameLV_OBJ_FLAG_SNAPABLEtoLV_OBJ_FLAG_SNAPPABLEe697807
• fix(lv_printf.h): toeliminatetheerrorsinKeilandIARf6d7dc7
• fix(draw)fixhorizontalgradientdrawing4c034e5
• fix(dropdown)useLV_EVENT_READY/CANCELonlistopen/close4dd1d56
• fix(table)clipoverflowingcontent8c15933
• fix(test)add#ifguardtoexcludetestrelatedfilesfromthebuildc12a22e
• fix(test)add#ifguardtoexcludetestrelatedfilesfromthebuildfc364a4
• fix(freetype)fixunderlinecalculation76c8ee6
• fix(style)refreshext. drawpadforpaddingandbgimg37a5d0c
• fix(draw)underflowinsubpixelfontdrawing6d5ac70
• fix(scrollbar)hidethescrollbarifthescrollbleflagisremoved188a946
• fix(color): minorfixes(#2767)a4978d0
• fix(group)skipobjectifanoftheparentsishidden5799c10
11.14. v8.1.010November2021 929


--- Page 934 ---


LVGLDocumentation8.3
• fix(obj)fixsizeinvalidationissueonpaddingchange33ba722
• fix(label)donotbidiprocesstextinlv_label_ins_texte95efc1
• fix(refr)setdisp_drv->draw_buf->flushing_lastcorrectlywithswrotationc514bdd
• fix(draw)fixdrawingsmallarcs8081599
• fix(chart)invalidationwithLV_CHART_UPDATE_MODE_SHIFTd61617c
• fix(build)fixmicropythonbuilderror54338f6
• fix(draw)fixborderwidthofsimple(radius=0,nomasking)borders20f1867
• fix(calendar)fixcalculationtodayandhighlightedday8f0b5ab
• fix(style)initializecolorstoblackinsteadofzero524f8dd
• fix(sjpg)removeunnecessarytypedefsc2d93f7
• fix(label)fixclippeditalicletters2efa6dc
• fix(draw)shadowdrawingwithlargeshadowwidthf810265
• fix(dropdown)addmissinginvalidations33b5d4a
• fix(dropdown)adjustthehandlingofkeyssenttothedropdowne41c507
• fix(disp)besurethependingscrloadanimationisfinishedinlv_scr_load_animeb6ae52
• fix(color)foxcolorpremultprecisionwith16-bitcolordepthf334226
• fix(obj_pos)savex,yeveniftheobjectisonalayouta9b660c
• fix(scrollbar)hidethescrollbarifthescrollableflagisremovedd9c6ad0
• fix(dropdown)fixlistpositionwithRTLbasedirection79edb37
• fix(obj)fixlv_obj_align_towithRTLbasedirection531afcc
• fix(chart)fixsendingLV_EVENT_DRAW_PART_BEGIN/ENDforthecursor34b8cd9
• fix(arduino)fixtheprototypeofmy_touchpad_readintheLVGL_Arduino.ino1a62f7a
• fix(checkbox)considerthebgborderwhenpositioningtheindicatora39dac9
• fix(dropdown)sendLV_EVENT_VALUE_CHANGEDtoallowstylingofthelistdae7039
• fix(group)fixinfiniteloopbdce0bc
• fix(keyboard)useLVGLheapfunctionsinsteadofPOSIXb20a706
• fix(blend)fixgreenchannelwithadditiveblending78158f0
• fix(btnmatrix)donotshowpressed,focusedorfocuskeystatesondisabledbuttons3df2a74
• fix(font)handlethelastpixeloftheglyphsinfontloadercorrectlyfa98989
• fix(table)fixanoff-by-oneissueinselfsizecalculationea2545a
• fixshadowedvariablee209260
• fixshadowedvariabledf60018
• fix(chart)besurethechartdoesn'tremainscrolledoutonzoomoutad5b1bd
• fix(docs)committometarepoaslvgl-botinsteadofactualcommitauthorf0e8549
• fix(table)invalidatethetableoncellvaluechangecb3692e
• fix(group)allowrefocusingobjects1520208
11.14. v8.1.010November2021 930


--- Page 935 ---


LVGLDocumentation8.3
• fix(tabview)fixwithleftandrighttabs17c5744
• fix(msgbox)createmodalsontoplayerinsteadofactscreen5cf6303
• fix(theme)showdisabledstateonbuttonsofbtnmatrix,msgboxandkeyboard0be582b
• fix(label)updatelv_label_get_letter_postoworkwithLV_BASE_DIR_AUTOtoo580e05a
• fix(label)fixinlv_label_get_letter_poswithwhenpos==line_start58f3f56
• fix(gif)replaceprintfstatementwithLVGLlogging56f62b8
• fix(docs)addfsdrvback64527a5
• fix(table)removeunnecessaryinvalidationonpressing6f90f9c
• fix(chart)drawlinechartindicator(bullet)fba37a3
• fix(anim)returnthefirstanimifexec_cbisNULLinlv_anim_get()fb7ea10
• fix(label)fixlv_label_get_letter_onwithBIDIenabled192419e
• fix(checkbox)addmissinginvalidationsbb39e9d
• fix(draw)fixgradientcalculationoftherectangleisclipped13e3470
• fix(chart)fixtypoin655f42b86118d63
• fix(example)fixlv_example_chart_289081c2
• fix(calendar)fixthepositioncalculationtodayad05e19
• fix(tick)minoroptimizationonlv_tick_inccalltestb4305df
• fix(docs)useletinsteadofconstforvariablewhichgetschanged3cf5751
• fix(theme)fixtheswitchstyleinthedefaulttheme0c0dc8e
• fix(tlsf)undefprintfbeforedefine-ingitcc935b8
• fix(msgbox)preventthebuttonsbeingwiderthanthemsgbox73e036b
• fix(chart)don'tdrawserieslineswith<1points655f42b
• fix(tests)removesrc/test_runnerswhencleaning6726b0f
• fix(label)removeduplicatedlv_obj_refresh_self_sizea070ecf
• fix(colorwheel)disableLV_OBJ_FLAG_SCROLL_CHAINbydefault48d1c29
• fix(obj)donotsetthechild'spositioninlv_obj_set_parentd89a5fb
• feat: addLV_USE_MEM_PERF/MONITOR_POSacd0f4f
• fix(scroll)inscrolltoviewfunctionsrespectdisabledLV_OBJ_FLAG_SCROLLABLE9318e02
• fix(flex)removeunusedvariable747b6a2
• feat(canvas)addlv_canvas_set_px_opab3b3ffc
• fix(textarea)allowusingcursorwithnotfullbg_opac9d3965
• fix(txt)_lv_txt_get_next_linereturn0onemptytexts82f3fbc
• fix(btnmatrix)alwaysupdaterow_cnt86012ae
• fix(scroll)minorfixesonobjscrollhandlinga4128a8
• fix(table)considerborderwidthforcellpositionsf2987b6
• fix(log)besureLV_LOG_... isnotemptyiflogsaredisabled47734c4
11.14. v8.1.010November2021 931


--- Page 936 ---


LVGLDocumentation8.3
• fix(arc)fixLV_ARC_MODE_REVERSEdf3b969
• fix(obj)inlv_obj_move_to_index()donotsendLV_EVENT_CHILD_CHANGEDonallchangedchild32e8276
• feat(event)addlv_obj_remove_event_cb_with_user_data4eddeb3
• fix(draw)fixshadowdrawingwithradius=04250e3c
• fix(msgbox)directlystorethepointerofallchildreneb5eaa3
• fix(draw)usethefilteredcolorsinlv_obj_init_draw_xxx_dsc()functions78725f2
• fix(arc)fixfullarcinvalidation98b9ce5
• chore(led)exposeLV_LED_BRIGHT_MIN/MAXinled.h3f18b23
• fix(group)keepthefocusedobjectinlv_group_swap_obja997147
• fix(obj)swapobjectsinthegrouptooinlv_obj_swap()52c7558
• fix(theme)useopacityonbutton'sshadowinthedefaultthemec5342e9
• fix(win)enableclip_cornerandborder_postbydefault493ace3
• fix(draw)fixrectangledrawingwithclip_cornerenabled01237da
• fix(arc)fixotherinvalidationissuesb0a7337
• feat(obj)addlv_obj_get_x/y_aligned98bc1fe
• fix(calendar)fixincorrecthighlightoftodayadbac52
• fix(arc,meter)fixinvalidationinspecialcases0f14f49
• fix(canvas)invalidatetheimageondeletea1b362c
• fix(msgbox)returnthecorrectpointerfromlv_msgbox_get_text50ea6fb
• fix(bidi)fixthehandlingofLV_BASE_DIR_AUTOinseveralwidgets7672847
• fix(build)removemaincomponentdependency(#2420)f2c2393
• fix(meter)fixinnermaskusagec28c146
• fix(log)fixwarningforemptylogmacros4dba8df
• fix(theme)improvebuttonfocusofkeyboard2504b7e
• fix(tabview)sendLV_EVENT_VALUE_CHANGEDonlyonce933d282
• fix(objstyle)fixchildrenrepositioniftheparent'spaddingchanges. 57cf661
• fix(template)updateindevtemplateforv8d8a3d3d
• fix(obj)detectingwhichindevsentLV_EVENT_FOCUSf03d4b8
• fix(roller)adjustthesizeoftheselectedareacorrectly01d1c87
• fix(imgbtn)considerwidth==LV_SIZE_CONTENTifonlymid. imgisset7e49f48
• fix(flex)fixNULLpointerdereference97ba12f
• fix(obj,switch)donotsendLV_EVENT_VALUE_CHANGEDtwice713b39e
• fix(coords)fixusinglargecoordinates428db94
• fix(chart)fixcrashifnoseriesareaddedc728b5c
• fix(meter)fixneedleimageinvalidation54d8e81
• fix(mem)addlv_prefixtotlsffunctionsandtypes0d52b59
11.14. v8.1.010November2021 932


--- Page 937 ---


LVGLDocumentation8.3
• fix(pxp)changeLV_COLOR_TRANSPtoLV_COLOR_CHROMA_KEYtov8compatibility81f3068
11.14.7 Examples
• example(chart)addareachartexample2507
• example(anim)adddemotousecubic-bezier2393
• feat(example)addlv_example_chart_9.py2604
• feat(example)addlv_example_chart_8.py2611
• feat(example)chartexampletoaddgapbetweentheoldandnewdata2565
• feat(example)addlvexamplelist22545
• feat(examples)addMicroPythonversionoflv_example_anim_3andallowloadingrollerfontdynamically2412
• feat(examples)addedMPversionofsecondtabviewexample2347
• fix(example):formatcodes2731
• fix(example)minorfixesinlv_example_chart_2.py2601
• feat(example)addtextwithgradientexample462fbcb
• fix(example_roller_3)maskfreeparambug2553
• fix(examples)don'tcompileassetsunlessneeded2523
• fix(example)scrollexamplesqorttypes2498
• fix(examples)joinusage2425
• fix(examples)addmissinglv.PART.INDICATOR2423
• fix(examples)uselv.grid_frforMicroPython2419
• fix(examples)removesymlinks2406
• fix(examples)import'u'-prefixedversionsofmodules2365
• fix(examples)removecastinMPscripts2354
• fix(examples)fixMicroPythonexamplesandruntheexampleswithCI2339
• fix(examples)alignwithrenamedMicropythonAPIs2338
• fix(examples)adjustcanvasexampleforMicroPythonAPIchange52d1c2e
• fix(example)reverttestcode77e2c1f
• feat(example)addcheckboxexampleforradiobuttonsd089b36
• feat(example)addtextwithgradientexample462fbcb
• fix(examples)excludeexampleanimimgimagesifanimimgisdisabled4d7d306
• fix(example)adjusttheobjectsizesinlv_example_anim_timeline_1()71a10e4
• fix(example)reverttextcodefromlv_example_checkbox_228e9593
11.14. v8.1.010November2021 933


--- Page 938 ---


LVGLDocumentation8.3
11.14.8 Docs
• docs: fixtypo2765
• docs(colorwheel)fixoldAPInames2643
• docs(display)fixtypo2624
• docsaddstaticforlv_indev_drv_t2605
• docs(animimg)addtoextrawidgetsindexandfixexample2610
• docs(animimg)Addmissinganimationimagepage2609
• docs(group)removereferencetolv_contwhichisgoneinv82580
• docs(style)usecorrectAPInameforlocalstyles2550
• docs(all)Proofread,fixtyposandaddclarificationsinconfusingareas2528
• docs(flex)updateflex.md2517
• docsmorespellingfixes2499
• docsfixtypo: arae->area2488
• docs(readme)fixtypo: hosing→hosting. 2477
• docsupdatecompanynameandyear2476
• docsfixtypos2472
• docs(overview)fixtypo2465
• docs(bar)fixtyposinwidgetexamples2463
• docs(overview)fixtypo2454
• docs(chart)typos2427
• docs(layout)addinternalpaddingparagraphtogridandflexlayoutp…2392
• docs(porting)fixindevexampletoremovev7boolreturn2381
• docs(README)fixbrokenreferences2329
• docs(grid)typofix2310
• docs(color)languagefixes2302
• docs(lv_obj_style)updateadd_styleandremove_stylefunctionheaders2287
• docs(contributing)addcommitmessageformatsection3668e54
• docsminortypofixes84c0086
• docs(arduino)updatesomeoutdatedinformation9a77102
• docs(keyboard)addnoteregardingeventhandler255f729
• docsminorCSSfixacbb680
• docsminorCSSimprovements7f367d6
• docs(keyboard)changeLV_KEYBOARD_MODE_NUMtoLV_KEYBOARD_MODE_NUMBER6e83d37
• docs(textarea)clarifytheuseoftextselectionbg_color65673c0
• docslistallexamplesononepage25acaf4
• docs(examples)addMicroPythonexamples6f37c4f
11.14. v8.1.010November2021 934


--- Page 939 ---


LVGLDocumentation8.3
• docs(filesystem)updatetov87971ade
• docs(style)completethedescriptionofstyletheproperties55e8846
• docsexamplelistfixescd600d1
• docs(style)completethedescriptionofstylethepropertiesff087da
• docs(README)updatelinks,examples,andaddservicesmenu3471bd1
• docs(color)updatecolors'docs9056b5e
• docsupdatelv_fs.h,layerandalign.pngtov831ab062
• docs(color)minorfixac8f453
• docsupdatechangelogc386110
• docs(extra)addextra/README.md8cd504d
• docsaddlazyloadtotheiframesoftheexamplesc49e830
• docs(os)addexampleandclarifysomepointsd996453
• docs(rlottie)fixbuilderrorce0b564
• docsincludepathsinlibsf5f9562
• docslibsfixes8e7bba6
• docs(obj)addcommentlv_obj_get_x/y/width/heightaboutpostponedlayoutrecalculation533066e
• docsfixexamplelisted77ed1
• docsdescribetheoptionstoincludeorskiplv_conf.h174ef66
• docs(overview)spellingfixesd2efb8c
• docs(table)describekeypad/encodernavigation749d1b3
• docsupdateCHANGELOG0f8bc18
• docs(image)mentiontheframe_idparameteroflv_img_decoder_open2433732
• docs(arduino)updatehowtousetheexamples06962a5
• docs(rlottie): fixtypoincommandsed9169c
• docs(indev,layer)updatelv_obj_set_click()tolv_obj_add_flag()bcd99e8
• docsupdateversionsupporttablee6e98ab
• docsfixexamplelistc6f99ad
• docs(examples)add<hr/>tobetterseparateexamplesa1b59e3
• docs(checkbox)updatethecommentlv_checkbox_set_text_static3e0ddd0
• docs(grid)fixmissingarticleda0c97a
• docs(display)fixgrammarinonespot5dbea7d
• docs(style)fixtypoinstylepropertydescriptions4e3b860
• docs(flex)fixtypoinflexgrowsectione5fafc4
• docs(indev)clarifypurposeofcontinue_readingflag706f81e
• docs(license)updatecompanynameandyear7c1eb00
• docsfixtypo8ab8064
11.14. v8.1.010November2021 935


--- Page 940 ---


LVGLDocumentation8.3
• docsaddlibstothemainindex1a8fed5
• docsaddbtn_example.png8731ef1
• docs(btnmatrix)fixtypowithset_all/clear_allparameters51a82a1
11.14.9 CI and tests
• ci(micropython)fixgitfetch2757
• test(txt)initialunittestsandgeneralcodecleanup/fixes2623
• testaddsetUpandtearDowntotesttemplate2648
• test(arc)addinitialunittests2617
• ci(micropython)addESP32andSTM32tests2629
• test(checkbox)addinitialtests2551
• test(ci)buildandruntestsinparallel. 2515
• ci(tests)runtestsusingctest2503
• ci(tests)adddependencyonGNUparallel2510
• ci(tests)usecommonscripttoinstalldevelopmentprereqs2504
• testconvertMakefiletoCMake2495
• testRefactorunittestscripts. 2473
• test(font_loader)migratetheexistingfontloadertestbc5b3be
• testaddbuildtestagain,adddropdowntest,integrategcovandgvocre35b1d0
• test(dropdown)addtessforkeypadandencoder4143b80
• testaddkeypadandencoderemulatorse536bb6
• testsaddmouseemulator2ba810b
• testsaddREADMEb765643
• testaddmoveteststotest_casesandtest_runnersdirectoriese9e010a
• testfixCIbuilderrorc38cae2
• ciaddconfigfor8bpp3eacc59
• testmovemoresourcefilestosrcfolder3672f87
• testupdateCIforthenewtestsa3898b9
• testcleanedupreportfolderb9b4ba5
• testfixbuilderror61cda59
• test(font_loader)migratetheexistingfontloadertestd6dbbaa
• testaddmoveteststotest_casesandtest_runnersdirectoriesd2e735e
• testadd3rdpartylibstoalltestsandalsofixthem7a95fa9
• test(arc): addtestcaseforadv_hitteste83df6f
• cicreatecheckforlv_conf_internal.h5d8285e
• testfixwarninganddocsbuilderrord908f31
11.14. v8.1.010November2021 936


--- Page 941 ---


LVGLDocumentation8.3
• ci(micropython)addrp2port1ab5c96
• test(dropdown)removedummytestcase9fb98da
• ci(codecov)hidestatusesoncommitsfornow0b7be77
• ci(docs)runapt-getupdatebeforeinstallationf215174
• testfixLV_USE_LOG_LEVEL->LV_LOG_LEVELtypo80f0b09
• ci(micropython)addGCCproblemmatcherab316a0
• testconvertMakefiletoCMake(#2495)9c846ee
11.14.10 Others
• chore: replace(void)xxxwithLV_UNUSED(xxx)2779
• animationimprovement2743
• ImproveLV_FORMAT_ATTRIBUTEusage2673
• Fixtypoincommandstobuildrlottie2723
• del(.gitmodules): delete.gitmodules2718
• lv_obj_draw_part_dsc_t.text_lengthadded2694
• exposeLV_COLOR_DEPTHandLV_COLOR_16_SWAPinmicropython2679
• synclvgl/lv_fs_if2676
• build: alwaysenableCMakeinstallruleindefaultconfiguration2636
• build: fixlibnameinCMakeLists2641
• build: removeuseof'project'keywordinCMakeLists2640
• buildaddinstallruletoCMakeList.txt2621
• Fixedrowsizecalculation2633
• archaddsmall3rdpartylibstolvgl2569
• Kconfig: Addmissingoptions2597
• EspressifIDFcomponentmanager2521
• chore(btnmatrix)removedunnecessarysemicolon2520
• UpdateREADME.md2516
• Correctedafunctionnameinobj.md2511
• Simplespellingfixes2496
• addedlv_obj_move_up()andlv_obj_move_down()2467
• Fixbufnameerrorfor"lv_port_disp_template.c"andoptimizethearduinoexample2475
• Fixtwoexamplesinthedocswithnewv8api2486
• kconfig: minorfixfordefaultdarkthemeoption2426
• doc(table)updatedoconcellmerging2397
• addedexamplelv_example_anim_timeline_1.py2387
• refactor(printf)addprintf-likefunctionattributeto_lv_txt_set_text_vfmtandlv_label_set_text_fmt2332
11.14. v8.1.010November2021 937


--- Page 942 ---


LVGLDocumentation8.3
• Updatewin.md2352
• Nxppxpvglitev8dev2313
• MoreSnapable-->Snappablereplacements2304
• Spellingandotherlanguagefixestodocumentation2293
• Updatequick-overview.md2295
• addingmicropythonexamples2286
• formatruncode-formtter.shd67dd94
• UpdateROADMAP.md2b1ae3c
• Create.codecov.ymle53aa82
• refactor(examples)dropJS-specificcodefromheader.pyef41450
• maketestrunonmasterandrelease/v8.*227402a
• Updaterelease.yml0838f12
• refactor(examples)dropusysimportfromheader.pyad1f91a
• UpdateROADMAP.mda38fcf2
• Revert"feat(conf)addbettercheckforKconfigdefault"a5793c7
• removetemporarytestfilea958c29
• starttoimplementrelease/patch1626a0c
• chore(indev)minorformatting79ab3d2
• addbasicpatchreleasescript1c3ecf1
• chore(example)minorimprovementsonlv_example_list_2bb6d6b7
• tool: addchangelog_gen.shtoautomaticallygeneratechangelog6d95521
• updateversionnumberstov8.1.0-dev8691611
• chore(test)improveprintsea8bed3
• chore(test)improveprints0c4bca0
• chore: updatelv_conf_internal.h41c2dd1
• chore(format)lv_conf_template.hminorformatting3c86d77
• chore(docs)alwaysdeploymastertodocs/masteraswell6d05692
• UpdateCHANGELOG.md48fd73d
• Fixcompileerrors6c956cc
• Updatetextarea.md6d8799f
• chore(assert)addwarningabouthighermemoryusageifLV_USE_ASSERT_STYLEisenabled33e4330
• Updatepage.html9573bab
• chore(docs)forcedocsrebuild4a0f413
• Fixtypoerrorincolor.md572880c
• Updatearc.md2a9b9e6
• Updateindex.rst9ce2c77
11.14. v8.1.010November2021 938


--- Page 943 ---


LVGLDocumentation8.3
• chore(docs)minorformattingonexample'sGitHublink75209e8
• chore(lv_conf_template)fixspellingmistake9d134a9
• UpdateCHANGELOG.md8472360
• chore(stale)disableonforks93c1303
• Revert"fix(tests)removesrc/test_runnerswhencleaning"ae15a1b
• stylefixusageofclang-formatdirectives2122583
• Revert"fix(indev)focusonobjectsonreleaseinsteadofpress"f61b2ca
11.15 v8.0.2 (16.07.2021)
• fix(theme)improvebuttonfocusofkeyboard
• fix(tabview)sendLV_EVENT_VALUE_CHANGEDonlyonce
• fix(imgbtn)usethecorrectsrcinLV_EVENT_GET_SELF_SIZE
• fix(color)removeextraneouscastfor8-bitcolor
• fix(objstyle)fixchildrenrepositioniftheparent'spaddingchanges.
• fix(color)removeextraneous_LV_COLOR_MAKE_TYPE_HELPER(#2372)
• fix(spinner)shouldnotbeclickable(#2373)
• fix(obj)improvehowthefocusingindevisdetermined
• fix(template)updateindevtemplateforv8
• fix(printf)skipdefiningattributeifpycparserisused
• refactor(printf)addprintf-likefunctionattributeto_lv_txt_set_text_vfmtandlv_label_set_text_fmt(#2332)
• fix(template)includelvgl.hinlv_port_*_template.cfiles
• fix(obj)detectingwhichindevsentLV_EVENT_FOCUS
• fix(span)fillLV_EVENT_GET_SELF_SIZE(#2360)
• fix(arc)disableLV_OBJ_FLAG_SCROLL_CHAINbydefault
• fix(draw)fixarcbgimagedrawingwithfullarcs
• fix(disp)fixmemoryleakinlv_disp_remove(#2355)
• fixwarningsintroducedby3fb8baf5
• fix(widgets)uselv_obj_classforallthewidgets
• fix(obj)movecleanupsfromlv_obj_deltolv_obj_destructor
• fix(roller)fixpartialredrawoftheselectedarea
• fix(roller)adjustthesizeoftheselectedareacorrectly
• fix(obj)deleteuselesstypeconversion(#2343)
• fix(lv_obj_scroll.h)typos(#2345)
• fix(scroll)fireLV_EVENT_SCROLL_BEGINinthesamespotforbothaxes
• fix(btnmatrix)fixbuttoninvalidationonfocuschange
11.15. v8.0.2(16.07.2021) 939


--- Page 944 ---


LVGLDocumentation8.3
• fix(textarea)styleupdateinonelinemode+improvescrolltocursor
• fix(tlsf)donotuse<assert.h>
• fix(imgbtn)considerwidth==LV_SIZE_CONTENTifonlymid. imgisset
• fix(refr)reducethenestinglevelinlv_refr_area
• fix(txt)enhancethefunctionofbreak_chars(#2327)
• fix(pxp): updateRTOSmacroforSDK2.10
• fix(vglite): updateforv8
• fix(pxp): updateforv8
• fix(flex)fixlayoutupdateandinvalidationissues
• fix(flex)fixNULLpointerdereference
• fix(obj,switch)donotsendLV_EVENT_VALUE_CHANGEDtwice
• fix(color)overflowwith16-bitcolordepth
• fix(coords)fixusinglargecoordinates
• fix(chart)fixcrashifnoseriesareadded
• fix(chart)invalidationwithLV_CHART_UPDATE_MODE_SHIFT
• fix(align)fixlv_obj_align_toG
• fix(table)invalidatethetableoncellvaluechange
• fix(label)removeduplicatedlv_obj_refresh_self_size
• fix(draw)underflowinsubpixelfontdrawing
• fix(scroll)donotsendunnecessaryscrollendevents
11.16 v8.0.1 (14.06.2021)
• docs(filesystem)updatetov87971ade4
• fix(msgbox)createmodalsontoplayerinsteadofactscreen5cf6303e
• fix(colorwheel)disableLV_OBJ_FLAG_SCROLL_CHAINbydefault48d1c292
• docs(grid)typofix(#2310)69d109d2
• fix(arduino)fixtheprototypeofmy_touchpad_readintheLVGL_Arduino.ino1a62f7a6
• fix(meter)fixneedleimageinvalidation54d8e817
• fix(mem)addlv_prefixtotlsffunctionsandtypes0d52b59c
• fix(calendar)fixthepositioncalculationtodayad05e196
• fix(typo)renameLV_OBJ_FLAG_SNAPABLEtoLV_OBJ_FLAG_SNAPPABLEe697807c
• docs(color)languagefixes(#2302)07ecc9f1
• fix(tick)minoroptimizationonlv_tick_inccalltestb4305df5
• Spellingandotherlanguagefixestodocumentation(#2293)d0aaacaf
• fix(theme)showdisabledstateonbuttonsofbtnmatrix,msgboxandkeyboard0be582b3
11.16. v8.0.1(14.06.2021) 940


--- Page 945 ---


LVGLDocumentation8.3
• fix(scroll)keepthescrollpositiononobjectdeleted52edbb46
• fix(msgbox)handleNULLbtnmapparameter769c4a30
• fix(group)allowrefocusingobjects1520208b
• docs(overview)spellingfixesd2efb8c6
• Mergebranch'master'ofhttps://github.com/lvgl/lvgl45960838
• feat(timer)checkiflv_tick_inciscalledaa6641a6
• feat(docs)addviewonGitHublinka716ac6e
• fix(theme)fixtheswitchstyleinthedefaulttheme0c0dc8ea
• docsfixtypo8ab80645
• Mergebranch'master'ofhttps://github.com/lvgl/lvgle796448f
• feat(event)passthescrollanimationtoLV_EVENT_SCROLL_BEGINca54ecfe
• fix(tabview)fixwithleftandrighttabs17c57449
• chore(docs)forcedocsrebuild4a0f4139
• chore(docs)alwaysdeploymastertodocs/masteraswell6d05692d
• fix(template)updatelv_objx_templatetov838bb8afc
• docs(extra)addextra/README.md8cd504d5
• UpdateCHANGELOG.md48fd73d2
• Updatequick-overview.md(#2295)5616471c
• fix(pxp)changeLV_COLOR_TRANSPtoLV_COLOR_CHROMA_KEYtov8compatibility81f3068d
• addingmicropythonexamples(#2286)c60ed68e
• docs(color)minorfixac8f4534
• fix(example)reverttestcode77e2c1ff
• fix(draw)withadditiveblendingwith32-bitcolordepth786db2af
• docs(color)updatecolors'docs9056b5ee
• Mergebranch'master'ofhttps://github.com/lvgl/lvgla711a1dd
• perf(refresh)optimizewheretowaitforlv_disp_flush_readywith2buffersd0172f14
• docs(lv_obj_style)updateadd_styleandremove_stylefunctionheaders(#2287)60f7bcbf
• fixmemoryleakofspangroup(#2285)33e0926a
• fixmakelv_img_cache.hpublicbecausecacheinvalidationispublic38ebcd81
• Mergebranch'master'ofhttps://github.com/lvgl/lvgl2b292495
• fix(btnmatrix)fixfocuseventhandling3b58ef14
• Mergepullrequest#2280fromlvgl/dependabot/pip/docs/urllib3-1.26.5a2f45b26
• fix(label)calculatingthecliparea57e211cc
• chore(deps): bumpurllib3from1.26.4to1.26.5in/docsb2f77dfc
• fix(docs)adddocsaboutthedefaultgroup29bfe604
11.16. v8.0.1(14.06.2021) 941


--- Page 946 ---


LVGLDocumentation8.3
11.17 v8.0.0 (01.06.2021)
v8.0 brings many new features like simplified and more powerful scrolling, new layouts inspired by CSS Flexbox and
Grid,simplifiedandimprovedwidgets,morepowerfulevents,hookabledrawing,andmore.
v8isamajorchangeandthereforeit'snotbackwardcompatiblewithv7.
11.17.1 Directory structure
• Thelv_prefixisremovedfromthefoldernames
• Thedocsismovedtothelvglrepository
• Theexamplesaremovedtothelvglrepository
• Createansrc/extrafolderforcomplexwidgets:
– ItmakesthecoreLVGLleaner
– Inextrawecanhavealotandspecificwidgets
– Goodplaceforcontributions
11.17.2 Widget changes
• lv_contremoved,layoutfeaturesaremovedtolv_obj
• lv_pageremoved,scrollfeaturesaremovedtolv_obj
• lv_objmaskthesamecanbeachievedbyevents
• lv_meteraddedastheunionoflv_linemeterandlv_gauge
• lv_spannewwidgetmimickingHTML<span>
• lv_animingnewwidgetforsimpleslideshowanimations
• +manyminorchangesandimprovements
11.17.3 New scrolling
• Support"elastic"scrollingwhenscrolledin
• Supportscrollchainingamonganyobjectstypes(notonlylv_pagess)
• Removelv_drag. SimilareffectcanbeachievedbysettingthepositioninLV_EVENT_PRESSING
• Addsnapping
• Addsnapstoptoscrollmax1snappoint
11.17. v8.0.0(01.06.2021) 942


--- Page 947 ---


LVGLDocumentation8.3
11.17.4 New layouts
• CSSGrid-likelayoutsupport
• CSSFlexbox-likelayoutsupport
11.17.5 Styles
• Optimizeandsimplifystyles
• Stateissavedintheobjectinsteadofthestyleproperty
• Objectsizeandpositioncanbesetinstylestoo
11.17.6 Events
• Allowaddingmultipleeventstoanobject
• Auser_datacanbeattachedtotheaddedevents
11.17.7 Driver changes
• lv_disp_drv_t,lv_indev_drv_t,lv_fs_drv_tneedstobestatic
• ...disp_buf...isrenamedtodraw_buf. Seeaninitializationexamplehere.
• Nopartialupdateiftwoscreensizedbuffersareset
• disp_drv->full_refresh = 1makesalwaysthewholedisplayredraw.
• hor_resandver_resneedtobesetindisp_drv
• indev_read_cbreturnsvoid. Toindicatethatthereismorethattoreadsetdata->continue_reading
= 1intheread_cb
11.17.8 Other changes
• Removethecopyparameterfromcreatefunctions
• SimplifiedFilesysteminterfaceAPI
• Useamoregenericinheritance
• Thebuilt-inthemesarereworked
• lv_obj_alignnowsavedthealignmentandrealignstheobjectautomaticallybutcan'tbeusedtoaligntoother
thantheparent
• lv_obj_align_tocanaligntoanobjectbutdoesn'tsavethealignment
• lv_pct(x)canbeusedtosetthesizeandpositioninpercentage
• There are many other changes in widgets that are not detailed here. Please refer to the documentation of the
widgets.
11.17. v8.0.0(01.06.2021) 943


--- Page 948 ---


LVGLDocumentation8.3
11.17.9 New release policy
• WewillfollowReleasebrancheswithGitLabflow
• Minorreleasesareexpectedinevery3-4month
• masterwillalwayscontainthelatestchanges
11.17.10 Migrating from v7 to v8
• Firstandforemost,createanewlv_conf.hbasedonlv_conf_template.h.
• Totrythenewversionit'srecommendedtouseasimulatorprojectandseetheexamples.
• Whenmigratingyourprojecttov8
– Updatethedriversaredescribedabove
– Updatethestyles
– Updatetheevents
– Usethenewlayoutsinsteadoflv_contfeatures
– Uselv_objinsteadoflv_page
– SeethechangesinColors
– Theotherpartsaremainlyminorrenamesandrefactoring. Seethefunctions'documentationfordescriptions.
11.18 v7.11.0 (16.03.2021)
11.18.1 New features
• Addbetterscreenorientationmanagementwithsoftwarerotationsupport
• Decidetextanimation'sdirectionbasedonbase_dir(whenusingLV_USE_BIDI)
11.18.2 Bugfixes
• fix(gauge)fixneedleinvalidation
• fix(bar)correctsymmetrichandlingforverticalsliders
11.19 v7.10.1 (16.02.2021)
11.19.1 Bugfixes
• fix(draw)overlapoutlinewithbackgroundtopreventaliasingartifacts
• fix(indev)cleartheindev'sact_objinlv_indev_reset
• fix(text)fixoutofboundsreadin_lv_txt_get_width
• fix(list)scrolllistwhenbuttonisfocusedusingLV_KEY_NEXT/PREV
11.18. v7.11.0(16.03.2021) 944


--- Page 949 ---


LVGLDocumentation8.3
• fix(text)improveArabiccontextualanalysisbyaddinghyphenprocessingandproperhandlingoflam-alefsequence
• fix(delete)deleteanimationafterthechildrenaredeleted
• fix(gauge)considerpaddingsforneedleimages
11.20 v7.10.0 (02.02.2021)
11.20.1 New features
• feat(indev)allowinputeventstobepassedtodisabledobjects
• feat(spinbox)addinlineget_stepfunctionforMicroPythonsupport
11.20.2 Bugfixes
• fix(btnmatrix)fixlv_btnmatrix_get_active_btn_text()whenusedinagroup
11.21 v7.9.1 (19.01.2021)
11.21.1 Bugfixes
• fix(cpicker)fixdivisionbyzero
• fix(dropdown)fixselectingoptionsafterthelastone
• fix(msgbox)usetheanimationtimeprovided
• fix(gpu_nxp_pxp)fixincorrectdefinename
• fix(indev)don'tleaveeditmodeifthereisonlyoneobjectinthegroup
• fix(draw_rect)fixdrawpatternstack-use-after-scopeerror
11.22 v7.9.0 (05.01.2021)
11.22.1 New features
• feat(chart)addlv_chart_remove_seriesandlv_chart_hide_series
• feat(img_cache)allowdisablingimagecaching
• calendar: makeget_day_of_week()public
• AddedsupportforZephyrintegration
11.20. v7.10.0(02.02.2021) 945


--- Page 950 ---


LVGLDocumentation8.3
11.22.2 Bugfixes
• fix(draw_rect)freebufferusedforarabicprocessing
• fix(win)arabicprocessthetitleofthewindow
• fix(dropdown)arabicprocesstheoptioninlv_dropdown_add_option
• fix(textarea)bufferoverflowinpasswordmodewithUTF-8characters
• fix(textarea)cursorpositionafterhidingcharacterinpasswordmode
• fix(linemeter)drawcriticallineswithcorrectcolor
• fix(lv_conf_internal)besureKconfigdefinesarealwaysuppercase
• fix(kconfig)handledisablesprintffloatcorrectly.
• fix(layout)stoplayoutafterrecursionthresholdisreached
• fix(gauge)fixredrawwithimageneedle
11.23 v7.8.1 (15.12.2020)
11.23.1 Bugfixes
• fix(lv_scr_load_anim)fixwhenmultiplescreensareloadedatthesametimewithdelay
• fix(page)fixLV_SCROLLBAR_MODE_DRAG
11.24 v7.8.0 (01.12.2020)
11.24.1 New features
• makeDMA2Dnonblocking
• addunscii-16built-infont
• addKConfig
• addlv_refr_get_fps_avg()
11.24.2 Bugfixes
• fix(btnmatrix)handlearabictextsinbuttonmatrices
• fix(indev)disabledobjectshouldn'tabsorbclicksbutlettheparenttobeclicked
• fix(arabic)supportprocessingagainalreadyprocessedtextswith_lv_txt_ap_proc
• fix(textarea)supportArabicletterconnections
• fix(dropdown)supportArabicletterconnections
• fix(value_str)supportArabicletterconnectionsinvaluestringproperty
• fix(indev)inLV_INDEV_TYPE_BUTTONrecognize1cyclelongpressestoo
• fix(arc)makearcworkwithencoder
11.23. v7.8.1(15.12.2020) 946


--- Page 951 ---


LVGLDocumentation8.3
• fix(slider)adjustingtheleftknobtoowithencoder
• fixreferencetoLV_DRAW_BUF_MAX_NUMinlv_mem.c
• fix(polygondraw)joinadjacentpointsiftheyareonthesamecoordinate
• fix(linemeter)fixinvalidationwhensettingnewvalue
• fix(table)addmissinginvalidationwhenchangingcelltype
• refactor(roller)renameLV_ROLLER_MODE_INIFINITE->LV_ROLLER_MODE_INFINITE
11.25 v7.7.2 (17.11.2020)
11.25.1 Bugfixes
• fix(draw_triangle): fixpolygon/triangledrawingwhentheorderofpointsiscounter-clockwise
• fix(btnmatrix): fixsettingthesamemapwithmodifiedpointers
• fix(arc)fixandimprovearcdragging
• label: Repaircalculatebackdotcharacterlogicalerrorwhichcauseinfiniteloop.
• fix(theme_material): removethebottomborderfromtabviewheader
• fix(imgbtn)guesstheclosestavailablestatewithvalidsrc
• fix(spinbox)updatecursorpositioninlv_spinbox_set_step
11.26 v7.7.1 (03.11.2020)
11.26.1 Bugfixes
• Respectbtnmatrix'sone_checkinlv_btnmatrix_set_btn_ctrl
• Gauge: maketheneedleimagestousethestylesfromLV_GAUGE_PART_PART
• Group: fixinlv_group_remove_objtohandledeletinghiddenobjectscorrectly
11.27 v7.7.0 (20.10.2020)
11.27.1 New features
• AddPXPGPUsupport(forNXPMCUs)
• AddVG-LiteGPUsupport(forNXPMCUs)
• Allowmax. 16celltypesfortable
• Addlv_table_set_text_fmt()
• Usemarginoncalendarheadertosetdistancesandpaddingtothesizeoftheheader
• Addtext_sel_bgstyleproperty
11.25. v7.7.2(17.11.2020) 947


--- Page 952 ---


LVGLDocumentation8.3
11.27.2 Bugfixes
• Themeupdatetosupporttextselectionbackground
• Fiximgbtnstatechange
• SupportRTLintable(drawcolumnsrighttoleft)
• SupportRTLinprettylayout(drawcolumnsrighttoleft)
• Skipobjectsingroupsiftheyareindisabledstate
• FixdropdownselectionwithRTLbasedirection
• Fixrectangleborderdrawingwithlargewidth
• Fixlv_win_clean()
11.28 v7.6.1 (06.10.2020)
11.28.1 Bugfixes
• FixBIDIsupportindropdownlist
• Fixcopyingbasedirinlv_obj_create
• Handlesubpixelrenderinginfontloader
• Fixtransitionswithstylecaching
• Fixclickfocus
• Fiximgbtnimageswitchingwithemptystyle
• Materialtheme: donotsetthetextfonttoalloweasyglobalfontchange
11.29 v7.6.0 (22.09.2020)
11.29.1 New features
• Checkwhetheranystylepropertyhaschangedonastatechangetodecideifanyredrawisrequired
11.29.2 Bugfixes
• Fixselectionofoptionswithnon-ASCIIlettersindropdownlist
• FixfontloadertosupportLV_FONT_FMT_TXT_LARGE
11.28. v7.6.1(06.10.2020) 948


--- Page 953 ---


LVGLDocumentation8.3
11.30 v7.5.0 (15.09.2020)
11.30.1 New features
• Addclean_dcache_cbandlv_disp_clean_dcachetoenableuserstousetheirowncachemanagement
function
• Addgpu_wait_cbtowaituntiltheGPUisworking. ItallowstorunCPUawaitonlywhentherendereddata
isneeded.
• Add10pxand8oxbuiltinfonts
11.30.2 Bugfixes
• FixunexpectedDEFOCUSonlv_pagewhenclickingtobgafterthescrollable
• Fixlv_obj_delandlv_obj_cleanifthechildrenlistchangedduringdeletion.
• Adjustbuttonmatrixbuttonwidthtoincludepaddingwhenspanningmultipleunits.
• Addroundingtobtnmatrixlineheightcalculation
• Adddecmopr_buftoGCroots
• Fixdivisionbyzeroindraw_pattern(lv_draw_rect.c)iftheimageorletterisnotfound
• Fixdrawingimageswith1pxheightorwidth
11.31 v7.4.0 (01.09.2020)
Themainnewfeaturesofv7.4arerun-timefontloading,stylecachingandarcknobwithvaluesettingbyclick.
11.31.1 New features
• Addlv_font_load()function-Loadsalv_font_tobjectfromabinaryfontfile
• Addlv_font_free()function-Freesthememoryallocatedbythelv_font_load()function
• Addstylecachingtoreduceaccesstimeofpropertieswithdefaultvalue
• arc: addsetvaluebyclickfeature
• arc: addLV_ARC_PART_KNOBsimilarlytoslider
• send gestures event if the object was dragged. User can check dragging with
lv_indev_is_dragging(lv_indev_act())intheeventfunction.
11.30. v7.5.0(15.09.2020) 949


--- Page 954 ---


LVGLDocumentation8.3
11.31.2 Bugfixes
• Fixcolorbleedingonborderdrawing
• Fixusing'LV_SCROLLBAR_UNHIDE'after'LV_SCROLLBAR_ON'
• Fixcroppingoflastcolumn/rowifanimageiszoomed
• Fixzoomingandrotatingmosaicimages
• FixdeletingtabviewwithLEFT/RIGHTtabposition
• FixbtnmatrixtonotsendeventwhenCLICK_TRIG=trueandthecursorslidfromapressedbutton
• Fixrollerwidthifselectedtextislargerthanthenormal
11.32 v7.3.1 (18.08.2020)
11.32.1 Bugfixes
• Fixdrawingvaluestringtwice
• Rename lv_chart_clear_serie to lv_chart_clear_series and lv_obj_align_origo to
lv_obj_align_mid
• Addlinemeter'smirrorfeatureagain
• Fixtextdecor(underlinestrikethrough)witholderversionsoffontconverter
• Fixsettinglocalstylepropertymultipletimes
• Addmissingbackgrounddrawingandradiushandlingtoimagebutton
• Allowaddingextralabeltolistbuttons
• Fixcrashiflv_table_set_col_cntiscalledbeforelv_table_set_row_cntforthefirsttime
• Fixoverflowinlargeimagetransformations
• Limitextrabuttonclickareaofbuttonmatrix'sbuttons. Withlargepaddingsitwascounter-intuitive. (Gapsare
mappedtobuttonwhenclicked).
• Fixlv_btnmatrix_set_one_checknotforcingexactlyonebuttontobechecked
• Fixcolorpickerinvalidationinrectanglemode
• Initdisableddaystograycolorincalendar
11.33 v7.3.0 (04.08.2020)
11.33.1 New features
• Addlv_task_get_next
• Add lv_event_send_refresh, lv_event_send_refresh_recursive to easily send
LV_EVENT_REFRESHtoobject
• Addlv_tabview_set_tab_name()function-usedtochangeatab'sname
11.32. v7.3.1(18.08.2020) 950


--- Page 955 ---


LVGLDocumentation8.3
• Add LV_THEME_MATERIAL_FLAG_NO_TRANSITION and LV_THEME_MATERIAL_FLAG_NO_FOCUS
flags
• Reducecodesizebyadding: LV_USE_FONT_COMPRESSEDandLV_FONT_USE_SUBPXandapplyingsome
optimization
• AddLV_MEMCPY_MEMSET_STDtousestandardmemcpyandmemset
11.33.2 Bugfixes
• DonotprintwarningformissingglyphifitsheightORwidthiszero.
• PreventduplicatedsendingofLV_EVENT_INSERTfromtextarea
• Tidyouteredgesofcpickerwidget.
• Removeduplicatedlinesfromlv_tabview_add_tab
• btnmatrix: handlecombinedstatesofbuttons(e.g. checked+disabled)
• textarea: fixtypoinlv_textarea_set_scrollbar_mode
• gauge: fiximageneedledrawing
• fixusingfreedmemoryin_lv_style_list_remove_style
11.34 v7.2.0 (21.07.2020)
11.34.1 New features
• Addscreentransitionswithlv_scr_load_anim()
• Adddisplaybackgroundcolor, wallpaperandopacity. Shownwhenthescreenistransparent. Canbeusedwith
lv_disp_set_bg_opa/color/image().
• AddLV_CALENDAR_WEEK_STARTS_MONDAY
• Addlv_chart_set_x_start_point()function-Settheindexofthex-axisstartpointinthedataarray
• Addlv_chart_set_ext_array()function-Setanexternalarrayofdatapointstouseforthechart
• Addlv_chart_set_point_id()function-Setanindividualpointvalueinthechartseriesdirectlybased
onindex
• Addlv_chart_get_x_start_point()function-Getthecurrentindexofthex-axisstartpointinthedata
array
• Addlv_chart_get_point_id()function-Getanindividualpointvalueinthechartseriesdirectlybased
onindex
• Addext_buf_assignedbitfieldtolv_chart_series_tstructure-it'strueifexternalbufferisassigned
toseries
• Addlv_chart_set_series_axis()toassignseriestoprimaryorsecondaryaxis
• Add lv_chart_set_y_range() to allow setting range of secondary y-axis (based on
lv_chart_set_rangebutextendedwithanaxisparameter)
• Allowsettingdifferentfontfortheselectedtextinlv_roller
11.34. v7.2.0(21.07.2020) 951


--- Page 956 ---


LVGLDocumentation8.3
• Addtheme->apply_cbtoreplacetheme->apply_xcbtomakeitcompatiblewiththeMicroPythonbind-
ing
• Addlv_theme_set_base()toalloweasyextensionofbuilt-in(orany)themes
• Addlv_obj_align_x()andlv_obj_align_y()functions
• Addlv_obj_align_origo_x()andlv_obj_align_origo_y()functions
11.34.2 Bugfixes
• tileviewfixnavigationwhennotscreensized
• Use14pxfontbydefaulttoforbettercompatibilitywithsmallerdisplays
• linemeterfixconversationofcurrentvalueto"level"
• Fixdrawingonrightborder
• Setthecursorimagenon-clickablebydefault
• Improvemonothemewhenusedwithkeyboardorencoder
11.35 v7.1.0 (07.07.2020)
11.35.1 New features
• Addfocus_parentattributetolv_obj
• Allowusingbuttonsinencoderinputdevice
• Addlv_btnmatrix_set/get_aligncapability
• DMA2D:RemovedependencyonSTCubeMXHAL
• Addedmax_usedproprietytolv_mem_monitor_tstruct
• Inlv_inittestifthestringsareUTF-8encoded.
• Adduser_datatothemes
• AddLV_BIG_ENDIAN_SYSTEMflagtolv_conf.hinordertofixdisplayingimagesonbigendiansystems.
• Addinlinefunctionlv_checkbox_get_state(constlv_obj_t*cb)toextendthecheckboxfunctionality.
• Addinlinefunctionlv_checkbox_set_state(constlv_obj_t*cb,lv_btn_state_tstate)toextendthecheckboxfunc-
tionality.
11.35.2 Bugfixes
• lv_imgfixinvalidationareawhenangleorzoomchanges
• UpdatethestylehandlingtosupportBigendianMCUs
• Changesomemethodstosupportbigendianhardware.
• removeuseofc++keyword'new'inparameteroffunctionlv_theme_set_base().
• AddLV_BIG_ENDIAN_SYSTEMflagtolv_conf.hinordertofixdisplayingimagesonbigendiansystems.
• Fixinsertingcharsintextareainbigendianhardware.
11.35. v7.1.0(07.07.2020) 952


--- Page 957 ---


LVGLDocumentation8.3
11.36 v7.0.2 (16.06.2020)
11.36.1 Bugfixes
• lv_textareafixwrongcursorpositionwhenclickedafterthelastcharacter
• Changealltextrelatedindicesfrom16-bitto32-bitintegersthroughoutwholelibrary. #1545
• Fixgestures
• Donotcallset_px_cbfortransparentpixel
• Fixlistbuttonfocusinmaterialtheme
• Fixcrashwhenatextareaisclearedwiththebackspaceofakeyboard
• Addversionnumbertolv_conf_template.h
• Addlogintruedoublebufferingmodewithset_px_cb
• lv_dropdown: fixmissingLV_EVENT_VALUE_CHANGEDeventwhenusedwithencoder
• lv_tileview: fixifnotthe{0;0}tileiscreatedfirst
• lv_debug: restructuretoallowassertinginfromlv_misctoo
• addassertif_lv_mem_buf_get()fails
• lv_textarea: fixcharacterdeleteinpasswordmode
• UpdateLV_OPA_MINandLV_OPA_MAXtowidentheopacityprocessedrange
• lv_btnmfixsendingeventsforhiddenbuttons
• lv_gagugemakelv_gauge_set_angle_offsetoffsetthelabelsandneedlestoo
• FixtypointheAPIscrllable->scrollable
• tabviewbydefaultallowautoexpandingthepageonlytorightandbottom(#1573)
• fixcrashwhendrawinggradienttothesamecolor
• chart: fixmemoryleak
• img: improvehittestfortransformedimages
11.37 v7.0.1 (01.06.2020)
11.37.1 Bugfixes
• MakeMicropythonworkingbyaddingtherequiredvariablesasGC_ROOT
• PrefixsomeinternalAPIfunctionswith_toreducetheAPIofLVGL
• Fixbuilt-inSimSunCJKfont
• FixUTF-8encodingwhenLV_USE_ARABIC_PERSIAN_CHARSisenabled
• FixDMA2Dusagewhen32bitimagesdirectlyblended
• Fixlv_rollerininfinitemodewhenusedwithencoder
• Addlv_theme_get_color_secondary()
11.36. v7.0.2(16.06.2020) 953


--- Page 958 ---


LVGLDocumentation8.3
• AddLV_COLOR_MIX_ROUND_OFStoadjustcolormixingtomakeitcompatiblewiththeGPU
• ImproveDMA2Dblending
• Removememcpyfromlv_ll(causedissueswithsomeoptimizationsettings)
• lv_chartfixXtickdrawing
• Fixverticaldashedlinedrawing
• Someadditionalminorfixesandformattings
11.38 v7.0.0 (18.05.2020)
11.38.1 Documentation
Thedocsforv7isavailableathttps://docs.littlevgl.com/v7/en/html/index.html
11.38.2 Legal changes
ThenameoftheprojectischangedtoLVGLandthenewwebsiteisonhttps://lvgl.io
LVGLremainsfreeunderthesameconditions(MITlicense)andacompanyiscreatedtomanageLVGLandofferservices.
11.38.3 New drawing system
Complete rework of LVGL's draw engine to use "masks" for more advanced and higher quality graphical effects. A
possible use-case of this system is to remove the overflowing content from the rounded edges. It also allows drawing
perfectlyanti-aliasedcircles,lines,andarcs. Internally,thedrawingshappenbydefiningmasks(suchasroundedrectangle,
line, angle). When something is drawn the currently active masks can make some pixels transparent. For example,
rectanglebordersaredrawnbyusing2rectanglemasks: onemaskremovestheinnerpartandanothertheouterpart.
TheAPIinthisregardremainedthesamebutsomenewfunctionswereadded:
• lv_img_set_zoom: setimageobject'szoomfactor
• lv_img_set_angle: setimageobject'sanglewithoutusingcanvas
• lv_img_set_pivot: setthepivotpointofrotation
Thenewdrawingenginebroughtnewdrawingfeaturestoo. Theyarehighlightedinthe"style"section.
11.38.4 New style system
The old style system is replaced with a new more flexible and lightweighted one. It uses an approach similar to CSS:
support cascading styles, inheriting properties and local style properties per object. As part of these updates, a lot of
objectswerereworkedandtheAPIshavebeenchanged.
• moreshadowsoptions: offsetandspread
• gradientstoppositiontoshiftthegradientareaandhorizontalgradient
• LV_BLEND_MODE_NORMAL/ADDITIVE/SUBTRACTIVEblendingmodes
• clipcorner: cropthecontentontheroundedcorners
• textunderlineandstrikethrough
11.38. v7.0.0(18.05.2020) 954


--- Page 959 ---


LVGLDocumentation8.3
• dashedverticalandhorizontallines(dashgap,dash_width)
• outline: aborder-likepartdrawnoutofthebackground. Canhavespacingtothebackground.
• pattern: displayandimageinthemiddleofthebackgroundorrepeatit
• valuedisplayatextwhichisstoredinthestyle. Itcanbeusede.g. asalight-weightedtextonbuttonstoo.
• margin: similartopaddingbutusedtokeepspaceoutsidetheobject
ReadtheStylesectionofthedocumentationtolearnhowthenewstylessystemworks.
11.38.5 GPU integration
TobetterutilizeGPUs,fromthisversionGPUusagecanbeintegratedintoLVGL.Inlv_conf.hanysupportedGPUs
canbeenabledwithasingleconfigurationoption.
Rightnow,onlyST'sDMA2D(Chrom-ART)isintegrated. Morewillintheupcomingreleases.
11.38.6 Renames
Thefollowingobjecttypesarerenamed:
• sw->switch
• ta->textarea
• cb->checkbox
• lmeter->linemeter
• mbox->msgbox
• ddlist->dropdown
• btnm->btnmatrix
• kb->keyboard
• preload->spinner
• lv_objxfolder->lv_widgets
• LV_FIT_FILL->LV_FIT_PARENT
• LV_FIT_FLOOD->LV_FLOOD_MAX
• LV_LAYOUT_COL_L/M/R->LV_LAYOUT_COLUMN_LEFT/MID/RIGHT
• LV_LAYOUT_ROW_T/M/B->LV_LAYOUT_ROW_TOP/MID/BOTTOM
11.38.7 Reworked and improved object
• dropdown: Completely reworked. Now creates a separate list when opened and can be dropped to
down/up/left/right.
• label: body_drawisremoved,instead,ifitsstylehasavisiblebackground/border/shadowetcitwillbedrawn.
Paddingreallymakestheobjectlarger(notjustvirtuallyasbefore)
• arc: candrawbackgroundtoo.
• btn: doesn'tstorestylesforeachstatebecauseit'sdonenaturallyinthenewstylesystem.
11.38. v7.0.0(18.05.2020) 955


--- Page 960 ---


LVGLDocumentation8.3
• calendar: highlightthepresseddatum. Theusedstylesarechanged: useLV_CALENDAR_PART_DATEnor-
malfornormaldates,checkedforhighlighted,focusedfortoday,pressedforthebeingpressed. (checked+pressed,
focused+pressedalsowork)
• chart: only has LINE and COLUMN types because with new styles all the others can be described.
LV_CHART_PART_SERIES sets the style of the series. bg_opa > 0 draws an area in LINE mode.
LV_CHART_PART_SERIES_BG also added to set a different style for the series area. Padding in
LV_CHART_PART_BGmakestheseriesareasmaller,anditensuresspaceforaxislabels/numbers.
• linemeter,gauge: canhavebackgroundiftherelatedstylepropertiesareset. Paddingmakesthescale/lines
smaller. scale_border_widthandscale_end_border_widthallowtodrawanarcontheouterpartofthescalelines.
• gauge: lv_gauge_set_needle_imgallowsuseimageasneedle
• canvas: allow drawing to true color alpha and alpha only canvas, add lv_canvas_blur_hor/ver and
renamelv_canvas_rotatetolv_canvas_transform
• textarea: Ifavailableinthefontusebullet(U+2022)characterintextareapassword
11.38.8 New object types
• lv_objmask: maskscanbeaddedtoit. Thechildrenwillbemaskedaccordingly.
11.38.9 Others
• Changethebuilt-infontstoMontserratandaddbuilt-infontsfrom12pxto48pxforevery2ndsize.
• AddexampleCJKandArabic/Persian/Hebrewbuilt-infont
• Add°and"bullet"tothebuilt-infonts
• AddArabic/Persianscriptsupport: changethecharacteraccordingtoitspositioninthetext.
• Addplayback_timetoanimations.
• Addrepeat_counttoanimationsinsteadofthecurrent"repeatforever".
• ReplaceLV_LAYOUT_PRETTYwithLV_LAYOUT_PRETTY_TOP/MID/BOTTOM
11.38.10 Demos
• lv_exampleswasreworkedandnewexamplesanddemoswereadded
11.38.11 New release policy
• MaintainthisChangelogforeveryrelease
• Saveoldmajorversioninnewbranches. E.g. release/v6
• Mergenewfeaturesandfixesdirectlyintomasterandreleaseapatchorminorreleasesevery2weeks.
11.38. v7.0.0(18.05.2020) 956


--- Page 961 ---


LVGLDocumentation8.3
11.38.12 Migrating from v6 to v7
• Firstandforemost,createanewlv_conf.hbasedonlv_conf_template.h.
• Totrythenewversionitsuggestedusingasimulatorprojectandseetheexamples.
• Ifyouhavearunningproject,themostdifficultpartofthemigrationisupdatingtothenewstylesystem. Unfor-
tunately,thereisnobetterwaythanmanuallyupdatingtothenewformat.
• Theotherpartsaremainlyminorrenamesandrefactoringasdescribedabove.
11.38. v7.0.0(18.05.2020) 957


--- Page 962 ---


CHAPTER
TWELVE
ROADMAP
Thisisasummaryforplannednewfeaturesandacollectionofideas. Thislistindicatesonlythecurrentintentionandit
canbechanged.
12.1 v8.2
See#2790
12.2 Ideas
• Reconsider color format management for run time color format setting, and custom color format usage. (Also
RGB888)
• Makegradientsmoreversatile
• Imagetransformationsmatrix
• SwitchtoRGBAcolorsinstyles
• Considerdirectbinaryfontformatsupport
• Simplifygroups. Discussionishere.
• lv_mem_alloc_aligned(size,align)
• Textnode. See#1701
• CPPbinding. SeeForum
• Optimizefontdecompression
• Needstaticanalyze(viacoverity.ioorsomethingelse)
• Supportdot_beginanddot_middlelongmodesforlabels
• Addnewlabelalignmentmodes. #1656
• Supportlargerimages: #1892
• Curvedtextonpath
• VariablebindingimprovementslikeRedux?
• Functionalprogrammingsupport,pureview? Seehere
• Circlelayout. See#2871
958


--- Page 963 ---


INDEX
Symbols _lv_disp_draw_buf_t::buf1 (C++ member),
264
_keep_pedantic_happy(C++type),857
_lv_disp_draw_buf_t::buf2 (C++ member),
_lv_anim_core_init(C++function),455
264
_lv_anim_t(C++struct),460
_lv_disp_draw_buf_t::buf_act (C++ mem-
_lv_anim_t::act_time(C++member),460
ber),264
_lv_anim_t::current_value (C++ member),
_lv_disp_draw_buf_t::flushing (C++ mem-
460
ber),265
_lv_anim_t::deleted_cb(C++member),460
_lv_disp_draw_buf_t::flushing_last(C++
_lv_anim_t::early_apply(C++member),461
member),265
_lv_anim_t::end_value(C++member),460
_lv_disp_draw_buf_t::last_area(C++mem-
_lv_anim_t::exec_cb(C++member),460
ber),265
_lv_anim_t::get_value_cb(C++member),460
_lv_disp_draw_buf_t::last_part(C++mem-
_lv_anim_t::path_cb(C++member),460
ber),265
_lv_anim_t::playback_delay (C++ member),
_lv_disp_draw_buf_t::size (C++ member),
461
264
_lv_anim_t::playback_now(C++member),461
_lv_disp_drv_t(C++struct),265
_lv_anim_t::playback_time (C++ member),
_lv_disp_drv_t::antialiasing (C++ mem-
461
ber),266
_lv_anim_t::ready_cb(C++member),460
_lv_disp_drv_t::clean_dcache_cb (C++
_lv_anim_t::repeat_cnt(C++member),461
member),266
_lv_anim_t::repeat_delay(C++member),461
_lv_disp_drv_t::clear_cb(C++member),266
_lv_anim_t::run_round(C++member),461
_lv_disp_drv_t::color_chroma_key (C++
_lv_anim_t::start_cb(C++member),460
member),267
_lv_anim_t::start_cb_called (C++ member),
_lv_disp_drv_t::direct_mode (C++ member),
461
265
_lv_anim_t::start_value(C++member),460
_lv_disp_drv_t::dpi(C++member),266
_lv_anim_t::time(C++member),460
_lv_disp_drv_t::draw_buf(C++member),265
_lv_anim_t::user_data(C++member),460
_lv_disp_drv_t::draw_ctx(C++member),267
_lv_anim_t::var(C++member),460
_lv_disp_drv_t::draw_ctx_deinit (C++
_lv_bar_anim_t(C++struct),511
member),267
_lv_bar_anim_t::anim_end(C++member),511
_lv_disp_drv_t::draw_ctx_init (C++ mem-
_lv_bar_anim_t::anim_start (C++ member),
ber),267
511
_lv_disp_drv_t::draw_ctx_size (C++ mem-
_lv_bar_anim_t::anim_state (C++ member),
ber),267
511
_lv_disp_drv_t::drv_update_cb (C++ mem-
_lv_bar_anim_t::bar(C++member),511
ber),266
_lv_color_filter_dsc_t(C++struct),413
_lv_disp_drv_t::flush_cb(C++member),266
_lv_color_filter_dsc_t::filter_cb (C++
_lv_disp_drv_t::full_refresh (C++ mem-
member),413
ber),265
_lv_color_filter_dsc_t::user_data (C++
_lv_disp_drv_t::hor_res(C++member),265
member),413
_lv_disp_drv_t::monitor_cb (C++ member),
_lv_disp_draw_buf_t(C++struct),264
959


--- Page 964 ---


LVGLDocumentation8.3
266 _lv_fragment_class_t::constructor_cb
_lv_disp_drv_t::offset_x(C++member),265 (C++member),867
_lv_disp_drv_t::offset_y(C++member),265 _lv_fragment_class_t::create_obj_cb
_lv_disp_drv_t::physical_hor_res (C++ (C++member),868
member),265 _lv_fragment_class_t::destructor_cb
_lv_disp_drv_t::physical_ver_res (C++ (C++member),867
member),265 _lv_fragment_class_t::detached_cb (C++
_lv_disp_drv_t::render_start_cb (C++ member),867
member),267 _lv_fragment_class_t::event_cb(C++mem-
_lv_disp_drv_t::rotated(C++member),266 ber),868
_lv_disp_drv_t::rounder_cb (C++ member), _lv_fragment_class_t::instance_size
266 (C++member),868
_lv_disp_drv_t::screen_transp (C++ mem- _lv_fragment_class_t::obj_created_cb
ber),266 (C++member),868
_lv_disp_drv_t::set_px_cb (C++ member), _lv_fragment_class_t::obj_deleted_cb
266 (C++member),868
_lv_disp_drv_t::sw_rotate (C++ member), _lv_fragment_class_t::obj_will_delete_cb
265 (C++member),868
_lv_disp_drv_t::user_data (C++ member), _lv_fragment_managed_states_t(C++struct),
267 868
_lv_disp_drv_t::ver_res(C++member),265 _lv_fragment_managed_states_t::cls(C++
_lv_disp_drv_t::wait_cb(C++member),266 member),869
_lv_disp_get_refr_timer(C++function),403 _lv_fragment_managed_states_t::container
_lv_disp_t(C++struct),267 (C++member),869
_lv_disp_t::act_scr(C++member),267 _lv_fragment_managed_states_t::destroying_obj
_lv_disp_t::bg_color(C++member),268 (C++member),869
_lv_disp_t::bg_img(C++member),268 _lv_fragment_managed_states_t::in_stack
_lv_disp_t::bg_opa(C++member),268 (C++member),869
_lv_disp_t::del_prev(C++member),268 _lv_fragment_managed_states_t::instance
_lv_disp_t::draw_prev_over_act(C++mem- (C++member),869
ber),268 _lv_fragment_managed_states_t::manager
_lv_disp_t::driver(C++member),267 (C++member),869
_lv_disp_t::inv_area_joined (C++ member), _lv_fragment_managed_states_t::obj_created
268 (C++member),869
_lv_disp_t::inv_areas(C++member),268 _lv_fragment_t(C++struct),867
_lv_disp_t::inv_en_cnt(C++member),268 _lv_fragment_t::child_manager (C++ mem-
_lv_disp_t::inv_p(C++member),268 ber),867
_lv_disp_t::last_activity_time(C++mem- _lv_fragment_t::cls(C++member),867
ber),268 _lv_fragment_t::managed(C++member),867
_lv_disp_t::prev_scr(C++member),267 _lv_fragment_t::obj(C++member),867
_lv_disp_t::refr_timer(C++member),267 _lv_fs_drv_t(C++struct),439
_lv_disp_t::rendering_in_progress (C++ _lv_fs_drv_t::cache_size(C++member),439
member),268 _lv_fs_drv_t::close_cb(C++member),439
_lv_disp_t::scr_to_load(C++member),268 _lv_fs_drv_t::dir_close_cb (C++ member),
_lv_disp_t::screen_cnt(C++member),268 440
_lv_disp_t::screens(C++member),267 _lv_fs_drv_t::dir_open_cb (C++ member),
_lv_disp_t::sync_areas(C++member),268 440
_lv_disp_t::sys_layer(C++member),268 _lv_fs_drv_t::dir_read_cb (C++ member),
_lv_disp_t::theme(C++member),267 440
_lv_disp_t::top_layer(C++member),268 _lv_fs_drv_t::letter(C++member),439
_lv_fragment_class_t(C++struct),867 _lv_fs_drv_t::open_cb(C++member),439
_lv_fragment_class_t::attached_cb (C++ _lv_fs_drv_t::read_cb(C++member),440
member),867 _lv_fs_drv_t::ready_cb(C++member),439
_lv_fs_drv_t::seek_cb(C++member),440
Index 960


--- Page 965 ---


LVGLDocumentation8.3
_lv_fs_drv_t::tell_cb(C++member),440 _lv_indev_proc_t::indev_point (C++ mem-
_lv_fs_drv_t::user_data(C++member),440 ber),276
_lv_fs_drv_t::write_cb(C++member),440 _lv_indev_proc_t::keypad(C++member),277
_lv_fs_init(C++function),437 _lv_indev_proc_t::last_key (C++ member),
_lv_group_init(C++function),395 277
_lv_group_t(C++struct),397 _lv_indev_proc_t::last_obj (C++ member),
_lv_group_t::edge_cb(C++member),398 277
_lv_group_t::editing(C++member),398 _lv_indev_proc_t::last_point (C++ mem-
_lv_group_t::focus_cb(C++member),398 ber),276
_lv_group_t::frozen(C++member),398 _lv_indev_proc_t::last_pressed(C++mem-
_lv_group_t::obj_focus(C++member),398 ber),277
_lv_group_t::obj_ll(C++member),398 _lv_indev_proc_t::last_raw_point (C++
_lv_group_t::refocus_policy (C++ member), member),276
398 _lv_indev_proc_t::last_state (C++ mem-
_lv_group_t::user_data(C++member),398 ber),277
_lv_group_t::wrap(C++member),398 _lv_indev_proc_t::long_pr_sent(C++mem-
_lv_img_buf_get_transformed_area (C++ ber),276
function),432 _lv_indev_proc_t::longpr_rep_timestamp
_lv_indev_drv_t(C++struct),275 (C++member),277
_lv_indev_drv_t::disp(C++member),275 _lv_indev_proc_t::pointer (C++ member),
_lv_indev_drv_t::feedback_cb (C++ mem- 277
ber),275 _lv_indev_proc_t::pr_timestamp(C++mem-
_lv_indev_drv_t::gesture_limit(C++mem- ber),277
ber),276 _lv_indev_proc_t::reset_query (C++ mem-
_lv_indev_drv_t::gesture_min_velocity ber),276
(C++member),276 _lv_indev_proc_t::scroll_area (C++ mem-
_lv_indev_drv_t::long_press_repeat_time ber),277
(C++member),276 _lv_indev_proc_t::scroll_dir (C++ mem-
_lv_indev_drv_t::long_press_time (C++ ber),277
member),276 _lv_indev_proc_t::scroll_obj (C++ mem-
_lv_indev_drv_t::read_cb(C++member),275 ber),277
_lv_indev_drv_t::read_timer (C++ member), _lv_indev_proc_t::scroll_sum (C++ mem-
275 ber),277
_lv_indev_drv_t::scroll_limit (C++ mem- _lv_indev_proc_t::scroll_throw_vect
ber),276 (C++member),277
_lv_indev_drv_t::scroll_throw (C++ mem- _lv_indev_proc_t::scroll_throw_vect_ori
ber),276 (C++member),277
_lv_indev_drv_t::type(C++member),275 _lv_indev_proc_t::state(C++member),276
_lv_indev_drv_t::user_data (C++ member), _lv_indev_proc_t::types(C++member),277
275 _lv_indev_proc_t::vect(C++member),277
_lv_indev_proc_t(C++struct),276 _lv_indev_proc_t::wait_until_release
_lv_indev_proc_t(C++type),273 (C++member),276
_lv_indev_proc_t::act_obj (C++ member), _lv_indev_read(C++function),274
277 _lv_indev_t(C++struct),278
_lv_indev_proc_t::act_point (C++ member), _lv_indev_t::btn_points(C++member),278
276 _lv_indev_t::cursor(C++member),278
_lv_indev_proc_t::disabled (C++ member), _lv_indev_t::driver(C++member),278
276 _lv_indev_t::group(C++member),278
_lv_indev_proc_t::gesture_dir (C++ mem- _lv_indev_t::proc(C++member),278
ber),277 _lv_obj_spec_attr_t(C++struct),488
_lv_indev_proc_t::gesture_sent(C++mem- _lv_obj_spec_attr_t::child_cnt(C++mem-
ber),277 ber),488
_lv_indev_proc_t::gesture_sum (C++ mem- _lv_obj_spec_attr_t::children (C++ mem-
ber),277 ber),488
Index 961


--- Page 966 ---


LVGLDocumentation8.3
_lv_obj_spec_attr_t::event_dsc(C++mem- _lv_theme_t::font_small(C++member),341
ber),488 _lv_theme_t::parent(C++member),341
_lv_obj_spec_attr_t::event_dsc_cnt(C++ _lv_theme_t::user_data(C++member),341
member),488 _lv_timer_core_init(C++function),463
_lv_obj_spec_attr_t::ext_click_pad(C++ _lv_timer_t(C++struct),465
member),488 _lv_timer_t::last_run(C++member),465
_lv_obj_spec_attr_t::ext_draw_size(C++ _lv_timer_t::paused(C++member),465
member),488 _lv_timer_t::period(C++member),465
_lv_obj_spec_attr_t::group_p (C++ mem- _lv_timer_t::repeat_count (C++ member),
ber),488 465
_lv_obj_spec_attr_t::layer_type (C++ _lv_timer_t::timer_cb(C++member),465
member),488 _lv_timer_t::user_data(C++member),465
_lv_obj_spec_attr_t::scroll (C++ member), [anonymous] (C++ enum), 329, 330, 335, 394, 408,
488 428, 436, 481, 482, 495, 509, 528, 570, 581,
_lv_obj_spec_attr_t::scroll_dir (C++ 597, 607, 620, 633, 641, 681, 682, 693, 705,
member),488 734,751,765
_lv_obj_spec_attr_t::scroll_snap_x(C++ [anonymous]::LV_ANIM_IMG_PART_MAIN(C++
member),488 enumerator),641
_lv_obj_spec_attr_t::scroll_snap_y(C++ [anonymous]::LV_ARC_MODE_NORMAL (C++
member),488 enumerator),495
_lv_obj_spec_attr_t::scrollbar_mode [anonymous]::LV_ARC_MODE_REVERSE (C++
(C++member),488 enumerator),495
_lv_obj_t(C++struct),489 [anonymous]::LV_ARC_MODE_SYMMETRICAL
_lv_obj_t::being_deleted(C++member),489 (C++enumerator),495
_lv_obj_t::class_p(C++member),489 [anonymous]::LV_BAR_MODE_NORMAL (C++
_lv_obj_t::coords(C++member),489 enumerator),509
_lv_obj_t::flags(C++member),489 [anonymous]::LV_BAR_MODE_RANGE (C++ enu-
_lv_obj_t::h_layout(C++member),489 merator),509
_lv_obj_t::layout_inv(C++member),489 [anonymous]::LV_BAR_MODE_SYMMETRICAL
_lv_obj_t::parent(C++member),489 (C++enumerator),509
_lv_obj_t::readjust_scroll_after_layout [anonymous]::LV_BLEND_MODE_ADDITIVE
(C++member),489 (C++enumerator),329
_lv_obj_t::scr_layout_inv (C++ member), [anonymous]::LV_BLEND_MODE_MULTIPLY
489 (C++enumerator),329
_lv_obj_t::skip_trans(C++member),489 [anonymous]::LV_BLEND_MODE_NORMAL (C++
_lv_obj_t::spec_attr(C++member),489 enumerator),329
_lv_obj_t::state(C++member),489 [anonymous]::LV_BLEND_MODE_REPLACE(C++
_lv_obj_t::style_cnt(C++member),489 enumerator),329
_lv_obj_t::styles(C++member),489 [anonymous]::LV_BLEND_MODE_SUBTRACTIVE
_lv_obj_t::user_data(C++member),489 (C++enumerator),329
_lv_obj_t::w_layout(C++member),489 [anonymous]::LV_BORDER_SIDE_BOTTOM(C++
_lv_style_get_prop_group(C++function),337 enumerator),329
_lv_style_prop_lookup_flags (C++ function), [anonymous]::LV_BORDER_SIDE_FULL (C++
337 enumerator),330
_lv_theme_t(C++struct),341 [anonymous]::LV_BORDER_SIDE_INTERNAL
_lv_theme_t::apply_cb(C++member),341 (C++enumerator),330
_lv_theme_t::color_primary (C++ member), [anonymous]::LV_BORDER_SIDE_LEFT (C++
341 enumerator),329
_lv_theme_t::color_secondary (C++ mem- [anonymous]::LV_BORDER_SIDE_NONE (C++
ber),341 enumerator),329
_lv_theme_t::disp(C++member),341 [anonymous]::LV_BORDER_SIDE_RIGHT (C++
_lv_theme_t::flags(C++member),341 enumerator),329
_lv_theme_t::font_large(C++member),341 [anonymous]::LV_BORDER_SIDE_TOP (C++
_lv_theme_t::font_normal(C++member),341 enumerator),329
Index 962


--- Page 967 ---


LVGLDocumentation8.3
[anonymous]::LV_BTNMATRIX_CTRL_CHECKABLE[anonymous]::LV_FS_MODE_WR (C++ enumera-
(C++enumerator),528 tor),436
[anonymous]::LV_BTNMATRIX_CTRL_CHECKED [anonymous]::LV_FS_RES_BUSY (C++ enumera-
(C++enumerator),528 tor),436
[anonymous]::LV_BTNMATRIX_CTRL_CLICK_TRI[Ganonymous]::LV_FS_RES_DENIED (C++ enu-
(C++enumerator),528 merator),436
[anonymous]::LV_BTNMATRIX_CTRL_CUSTOM_1 [anonymous]::LV_FS_RES_FS_ERR (C++ enu-
(C++enumerator),528 merator),436
[anonymous]::LV_BTNMATRIX_CTRL_CUSTOM_2 [anonymous]::LV_FS_RES_FULL (C++ enumera-
(C++enumerator),528 tor),436
[anonymous]::LV_BTNMATRIX_CTRL_DISABLED [anonymous]::LV_FS_RES_HW_ERR (C++ enu-
(C++enumerator),528 merator),436
[anonymous]::LV_BTNMATRIX_CTRL_HIDDEN [anonymous]::LV_FS_RES_INV_PARAM (C++
(C++enumerator),528 enumerator),436
[anonymous]::LV_BTNMATRIX_CTRL_NO_REPEAT[anonymous]::LV_FS_RES_LOCKED (C++ enu-
(C++enumerator),528 merator),436
[anonymous]::LV_BTNMATRIX_CTRL_POPOVER [anonymous]::LV_FS_RES_NOT_EX (C++ enu-
(C++enumerator),528 merator),436
[anonymous]::LV_BTNMATRIX_CTRL_RECOLOR [anonymous]::LV_FS_RES_NOT_IMP (C++ enu-
(C++enumerator),528 merator),436
[anonymous]::LV_CHART_AXIS_PRIMARY_X [anonymous]::LV_FS_RES_OK (C++ enumerator),
(C++enumerator),682 436
[anonymous]::LV_CHART_AXIS_PRIMARY_Y [anonymous]::LV_FS_RES_OUT_OF_MEM (C++
(C++enumerator),682 enumerator),436
[anonymous]::LV_CHART_AXIS_SECONDARY_X [anonymous]::LV_FS_RES_TOUT (C++ enumera-
(C++enumerator),682 tor),436
[anonymous]::LV_CHART_AXIS_SECONDARY_Y [anonymous]::LV_FS_RES_UNKNOWN (C++ enu-
(C++enumerator),682 merator),436
[anonymous]::LV_CHART_TYPE_BAR (C++ enu- [anonymous]::LV_GRAD_DIR_HOR (C++ enumer-
merator),681 ator),330
[anonymous]::LV_CHART_TYPE_LINE (C++ [anonymous]::LV_GRAD_DIR_NONE (C++ enu-
enumerator),681 merator),330
[anonymous]::LV_CHART_TYPE_NONE (C++ [anonymous]::LV_GRAD_DIR_VER (C++ enumer-
enumerator),681 ator),330
[anonymous]::LV_CHART_TYPE_SCATTER(C++ [anonymous]::LV_IMG_CF_ALPHA_1BIT (C++
enumerator),681 enumerator),428
[anonymous]::LV_CHART_UPDATE_MODE_CIRCUL[AaRnonymous]::LV_IMG_CF_ALPHA_2BIT (C++
(C++enumerator),682 enumerator),428
[anonymous]::LV_CHART_UPDATE_MODE_SHIFT [anonymous]::LV_IMG_CF_ALPHA_4BIT (C++
(C++enumerator),682 enumerator),428
[anonymous]::LV_COLORWHEEL_MODE_HUE [anonymous]::LV_IMG_CF_ALPHA_8BIT (C++
(C++enumerator),693 enumerator),428
[anonymous]::LV_COLORWHEEL_MODE_SATURATI[OaNnonymous]::LV_IMG_CF_INDEXED_1BIT
(C++enumerator),693 (C++enumerator),428
[anonymous]::LV_COLORWHEEL_MODE_VALUE [anonymous]::LV_IMG_CF_INDEXED_2BIT
(C++enumerator),693 (C++enumerator),428
[anonymous]::LV_DITHER_ERR_DIFF (C++ [anonymous]::LV_IMG_CF_INDEXED_4BIT
enumerator),330 (C++enumerator),428
[anonymous]::LV_DITHER_NONE (C++ enumera- [anonymous]::LV_IMG_CF_INDEXED_8BIT
tor),330 (C++enumerator),428
[anonymous]::LV_DITHER_ORDERED (C++ enu- [anonymous]::LV_IMG_CF_RAW (C++ enumera-
merator),330 tor),428
[anonymous]::LV_FS_MODE_RD (C++ enumera- [anonymous]::LV_IMG_CF_RAW_ALPHA (C++
tor),436 enumerator),428
Index 963


--- Page 968 ---


LVGLDocumentation8.3
[anonymous]::LV_IMG_CF_RAW_CHROMA_KEYED [anonymous]::LV_IMG_CF_USER_ENCODED_7
(C++enumerator),428 (C++enumerator),430
[anonymous]::LV_IMG_CF_RESERVED_15(C++ [anonymous]::LV_IMG_SIZE_MODE_REAL(C++
enumerator),429 enumerator),570
[anonymous]::LV_IMG_CF_RESERVED_16(C++ [anonymous]::LV_IMG_SIZE_MODE_VIRTUAL
enumerator),429 (C++enumerator),570
[anonymous]::LV_IMG_CF_RESERVED_17(C++ [anonymous]::LV_KEYBOARD_MODE_NUMBER
enumerator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RESERVED_18(C++ [anonymous]::LV_KEYBOARD_MODE_SPECIAL
enumerator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RESERVED_19(C++ [anonymous]::LV_KEYBOARD_MODE_TEXT_LOWER
enumerator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RESERVED_20(C++ [anonymous]::LV_KEYBOARD_MODE_TEXT_UPPER
enumerator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RESERVED_21(C++ [anonymous]::LV_KEYBOARD_MODE_USER_1
enumerator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RESERVED_22(C++ [anonymous]::LV_KEYBOARD_MODE_USER_2
enumerator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RESERVED_23(C++ [anonymous]::LV_KEYBOARD_MODE_USER_3
enumerator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RGB565 (C++ enu- [anonymous]::LV_KEYBOARD_MODE_USER_4
merator),429 (C++enumerator),705
[anonymous]::LV_IMG_CF_RGB565A8 (C++ [anonymous]::LV_KEY_BACKSPACE (C++ enu-
enumerator),429 merator),394
[anonymous]::LV_IMG_CF_RGB888 (C++ enu- [anonymous]::LV_KEY_DEL (C++ enumerator),
merator),429 394
[anonymous]::LV_IMG_CF_RGBA5658 (C++ [anonymous]::LV_KEY_DOWN (C++ enumerator),
enumerator),429 394
[anonymous]::LV_IMG_CF_RGBA8888 (C++ [anonymous]::LV_KEY_END (C++ enumerator),
enumerator),429 394
[anonymous]::LV_IMG_CF_RGBX8888 (C++ [anonymous]::LV_KEY_ENTER (C++ enumerator),
enumerator),429 394
[anonymous]::LV_IMG_CF_TRUE_COLOR (C++ [anonymous]::LV_KEY_ESC (C++ enumerator),
enumerator),428 394
[anonymous]::LV_IMG_CF_TRUE_COLOR_ALPHA [anonymous]::LV_KEY_HOME (C++ enumerator),
(C++enumerator),428 394
[anonymous]::LV_IMG_CF_TRUE_COLOR_CHROMA[_aKnEoYnEyDmous]::LV_KEY_LEFT (C++ enumerator),
(C++enumerator),428 394
[anonymous]::LV_IMG_CF_UNKNOWN (C++ enu- [anonymous]::LV_KEY_NEXT (C++ enumerator),
merator),428 394
[anonymous]::LV_IMG_CF_USER_ENCODED_0 [anonymous]::LV_KEY_PREV (C++ enumerator),
(C++enumerator),429 394
[anonymous]::LV_IMG_CF_USER_ENCODED_1 [anonymous]::LV_KEY_RIGHT (C++ enumerator),
(C++enumerator),429 394
[anonymous]::LV_IMG_CF_USER_ENCODED_2 [anonymous]::LV_KEY_UP(C++enumerator),394
(C++enumerator),430 [anonymous]::LV_LABEL_LONG_CLIP (C++
[anonymous]::LV_IMG_CF_USER_ENCODED_3 enumerator),582
(C++enumerator),430 [anonymous]::LV_LABEL_LONG_DOT (C++ enu-
[anonymous]::LV_IMG_CF_USER_ENCODED_4 merator),581
(C++enumerator),430 [anonymous]::LV_LABEL_LONG_SCROLL (C++
[anonymous]::LV_IMG_CF_USER_ENCODED_5 enumerator),581
(C++enumerator),430 [anonymous]::LV_LABEL_LONG_SCROLL_CIRCULAR
[anonymous]::LV_IMG_CF_USER_ENCODED_6 (C++enumerator),582
(C++enumerator),430 [anonymous]::LV_LABEL_LONG_WRAP (C++
Index 964


--- Page 969 ---


LVGLDocumentation8.3
enumerator),581 (C++enumerator),483
[anonymous]::LV_MENU_HEADER_BOTTOM_FIXED[anonymous]::LV_OBJ_FLAG_SCROLL_MOMENTUM
(C++enumerator),734 (C++enumerator),483
[anonymous]::LV_MENU_HEADER_TOP_FIXED [anonymous]::LV_OBJ_FLAG_SCROLL_ONE
(C++enumerator),734 (C++enumerator),483
[anonymous]::LV_MENU_HEADER_TOP_UNFIXED [anonymous]::LV_OBJ_FLAG_SCROLL_ON_FOCUS
(C++enumerator),734 (C++enumerator),483
[anonymous]::LV_MENU_ROOT_BACK_BTN_DISAB[LaEnDonymous]::LV_OBJ_FLAG_SCROLL_WITH_ARROW
(C++enumerator),734 (C++enumerator),483
[anonymous]::LV_MENU_ROOT_BACK_BTN_ENABL[EaDnonymous]::LV_OBJ_FLAG_SNAPPABLE(C++
(C++enumerator),734 enumerator),483
[anonymous]::LV_METER_INDICATOR_TYPE_ARC[anonymous]::LV_OBJ_FLAG_USER_1 (C++
(C++enumerator),751 enumerator),484
[anonymous]::LV_METER_INDICATOR_TYPE_NEE[DaLnEo_nIyMmGous]::LV_OBJ_FLAG_USER_2 (C++
(C++enumerator),751 enumerator),484
[anonymous]::LV_METER_INDICATOR_TYPE_NEE[DaLnEo_nLyImNoEus]::LV_OBJ_FLAG_USER_3 (C++
(C++enumerator),751 enumerator),484
[anonymous]::LV_METER_INDICATOR_TYPE_SCA[LaEn_oLnIyNmEoSus]::LV_OBJ_FLAG_USER_4 (C++
(C++enumerator),751 enumerator),484
[anonymous]::LV_OBJ_FLAG_ADV_HITTEST [anonymous]::LV_OBJ_FLAG_WIDGET_1 (C++
(C++enumerator),484 enumerator),484
[anonymous]::LV_OBJ_FLAG_CHECKABLE(C++ [anonymous]::LV_OBJ_FLAG_WIDGET_2 (C++
enumerator),483 enumerator),484
[anonymous]::LV_OBJ_FLAG_CLICKABLE(C++ [anonymous]::LV_OPA_0(C++enumerator),408
enumerator),483 [anonymous]::LV_OPA_10(C++enumerator),408
[anonymous]::LV_OBJ_FLAG_CLICK_FOCUSABLE[anonymous]::LV_OPA_100 (C++ enumerator),
(C++enumerator),483 408
[anonymous]::LV_OBJ_FLAG_EVENT_BUBBLE [anonymous]::LV_OPA_20(C++enumerator),408
(C++enumerator),484 [anonymous]::LV_OPA_30(C++enumerator),408
[anonymous]::LV_OBJ_FLAG_FLOATING (C++ [anonymous]::LV_OPA_40(C++enumerator),408
enumerator),484 [anonymous]::LV_OPA_50(C++enumerator),408
[anonymous]::LV_OBJ_FLAG_GESTURE_BUBBLE [anonymous]::LV_OPA_60(C++enumerator),408
(C++enumerator),484 [anonymous]::LV_OPA_70(C++enumerator),408
[anonymous]::LV_OBJ_FLAG_HIDDEN (C++ [anonymous]::LV_OPA_80(C++enumerator),408
enumerator),483 [anonymous]::LV_OPA_90(C++enumerator),408
[anonymous]::LV_OBJ_FLAG_IGNORE_LAYOUT [anonymous]::LV_OPA_COVER (C++ enumerator),
(C++enumerator),484 408
[anonymous]::LV_OBJ_FLAG_LAYOUT_1 (C++ [anonymous]::LV_OPA_TRANSP (C++ enumera-
enumerator),484 tor),408
[anonymous]::LV_OBJ_FLAG_LAYOUT_2 (C++ [anonymous]::LV_PART_ANY (C++ enumerator),
enumerator),484 482
[anonymous]::LV_OBJ_FLAG_OVERFLOW_VISIBL[Eanonymous]::LV_PART_CURSOR (C++ enumera-
(C++enumerator),484 tor),482
[anonymous]::LV_OBJ_FLAG_PRESS_LOCK [anonymous]::LV_PART_CUSTOM_FIRST (C++
(C++enumerator),483 enumerator),482
[anonymous]::LV_OBJ_FLAG_SCROLLABLE [anonymous]::LV_PART_INDICATOR (C++ enu-
(C++enumerator),483 merator),482
[anonymous]::LV_OBJ_FLAG_SCROLL_CHAIN [anonymous]::LV_PART_ITEMS (C++ enumera-
(C++enumerator),483 tor),482
[anonymous]::LV_OBJ_FLAG_SCROLL_CHAIN_HO[Ranonymous]::LV_PART_KNOB (C++ enumerator),
(C++enumerator),483 482
[anonymous]::LV_OBJ_FLAG_SCROLL_CHAIN_VE[Ranonymous]::LV_PART_MAIN (C++ enumerator),
(C++enumerator),483 482
[anonymous]::LV_OBJ_FLAG_SCROLL_ELASTIC [anonymous]::LV_PART_SCROLLBAR (C++ enu-
Index 965


--- Page 970 ---


LVGLDocumentation8.3
merator),482 ator),482
[anonymous]::LV_PART_SELECTED (C++ enu- [anonymous]::LV_STYLE_RES_FOUND (C++
merator),482 enumerator),335
[anonymous]::LV_PART_TEXTAREA_PLACEHOLDE[Ranonymous]::LV_STYLE_RES_INHERIT (C++
(C++enumerator),633 enumerator),335
[anonymous]::LV_PART_TICKS (C++ enumera- [anonymous]::LV_STYLE_RES_NOT_FOUND
tor),482 (C++enumerator),335
[anonymous]::LV_ROLLER_MODE_INFINITE [anonymous]::LV_TABLE_CELL_CTRL_CUSTOM_1
(C++enumerator),597 (C++enumerator),620
[anonymous]::LV_ROLLER_MODE_NORMAL(C++ [anonymous]::LV_TABLE_CELL_CTRL_CUSTOM_2
enumerator),597 (C++enumerator),620
[anonymous]::LV_SLIDER_MODE_NORMAL(C++ [anonymous]::LV_TABLE_CELL_CTRL_CUSTOM_3
enumerator),607 (C++enumerator),620
[anonymous]::LV_SLIDER_MODE_RANGE (C++ [anonymous]::LV_TABLE_CELL_CTRL_CUSTOM_4
enumerator),607 (C++enumerator),620
[anonymous]::LV_SLIDER_MODE_SYMMETRICAL [anonymous]::LV_TABLE_CELL_CTRL_MERGE_RIGHT
(C++enumerator),607 (C++enumerator),620
[anonymous]::LV_SPAN_MODE_BREAK (C++ [anonymous]::LV_TABLE_CELL_CTRL_TEXT_CROP
enumerator),765 (C++enumerator),620
[anonymous]::LV_SPAN_MODE_EXPAND (C++ [anonymous]::LV_TEXT_DECOR_NONE (C++
enumerator),765 enumerator),329
[anonymous]::LV_SPAN_MODE_FIXED (C++ [anonymous]::LV_TEXT_DECOR_STRIKETHROUGH
enumerator),765 (C++enumerator),329
[anonymous]::LV_SPAN_OVERFLOW_CLIP(C++ [anonymous]::LV_TEXT_DECOR_UNDERLINE
enumerator),765 (C++enumerator),329
[anonymous]::LV_SPAN_OVERFLOW_ELLIPSIS [anonymous]::_LV_BTNMATRIX_CTRL_RESERVED_1
(C++enumerator),765 (C++enumerator),528
[anonymous]::LV_STATE_ANY (C++ enumerator), [anonymous]::_LV_BTNMATRIX_CTRL_RESERVED_2
482 (C++enumerator),528
[anonymous]::LV_STATE_CHECKED (C++ enu- [anonymous]::_LV_BTNMATRIX_WIDTH (C++
merator),481 enumerator),528
[anonymous]::LV_STATE_DEFAULT (C++ enu- [anonymous]::_LV_CHART_AXIS_LAST (C++
merator),481 enumerator),682
[anonymous]::LV_STATE_DISABLED (C++ enu-
I
merator),481
[anonymous]::LV_STATE_EDITED (C++ enumer- ime_pinyin_k9_py_str_t(C++struct),888
ator),481 ime_pinyin_k9_py_str_t::py_str(C++mem-
[anonymous]::LV_STATE_FOCUSED (C++ enu- ber),888
merator),481
[anonymous]::LV_STATE_FOCUS_KEY (C++ L
enumerator),481
lv_anim_count_running(C++function),459
[anonymous]::LV_STATE_HOVERED (C++ enu-
lv_anim_custom_del(C++function),458
merator),481
lv_anim_custom_exec_cb_t(C++type),454
[anonymous]::LV_STATE_PRESSED (C++ enu-
lv_anim_custom_get(C++function),458
merator),481
lv_anim_del(C++function),458
[anonymous]::LV_STATE_SCROLLED (C++ enu-
lv_anim_del_all(C++function),458
merator),481
lv_anim_deleted_cb_t(C++type),454
[anonymous]::LV_STATE_USER_1 (C++ enumer-
lv_anim_enable_t(C++enum),454
ator),481
lv_anim_enable_t::LV_ANIM_OFF (C++ enu-
[anonymous]::LV_STATE_USER_2 (C++ enumer-
merator),454
ator),482
lv_anim_enable_t::LV_ANIM_ON (C++ enumer-
[anonymous]::LV_STATE_USER_3 (C++ enumer-
ator),454
ator),482
lv_anim_exec_xcb_t(C++type),454
[anonymous]::LV_STATE_USER_4 (C++ enumer-
lv_anim_get(C++function),458
Index 966


--- Page 971 ---


LVGLDocumentation8.3
lv_anim_get_delay(C++function),457 lv_arc_align_obj_to_angle (C++ function),
lv_anim_get_playtime(C++function),457 498
lv_anim_get_timer(C++function),458 lv_arc_class(C++member),498
lv_anim_get_user_data(C++function),458 lv_arc_create(C++function),495
lv_anim_get_value_cb_t(C++type),454 lv_arc_draw_part_type_t(C++enum),495
lv_anim_init(C++function),455 lv_arc_draw_part_type_t::LV_ARC_DRAW_PART_BACKGROUND
lv_anim_path_bounce(C++function),459 (C++enumerator),495
lv_anim_path_cb_t(C++type),454 lv_arc_draw_part_type_t::LV_ARC_DRAW_PART_FOREGROUND
lv_anim_path_ease_in(C++function),459 (C++enumerator),495
lv_anim_path_ease_in_out(C++function),459 lv_arc_draw_part_type_t::LV_ARC_DRAW_PART_KNOB
lv_anim_path_ease_out(C++function),459 (C++enumerator),495
lv_anim_path_linear(C++function),459 lv_arc_get_angle_end(C++function),497
lv_anim_path_overshoot(C++function),459 lv_arc_get_angle_start(C++function),497
lv_anim_path_step(C++function),459 lv_arc_get_bg_angle_end(C++function),497
lv_anim_ready_cb_t(C++type),454 lv_arc_get_bg_angle_start (C++ function),
lv_anim_refr_now(C++function),459 497
lv_anim_set_custom_exec_cb (C++ function), lv_arc_get_max_value(C++function),497
455 lv_arc_get_min_value(C++function),497
lv_anim_set_delay(C++function),455 lv_arc_get_mode(C++function),498
lv_anim_set_deleted_cb(C++function),456 lv_arc_get_value(C++function),497
lv_anim_set_early_apply(C++function),457 lv_arc_mode_t(C++type),494
lv_anim_set_exec_cb(C++function),455 lv_arc_rotate_obj_to_angle (C++ function),
lv_anim_set_get_value_cb(C++function),456 498
lv_anim_set_path_cb(C++function),456 lv_arc_set_angles(C++function),495
lv_anim_set_playback_delay (C++ function), lv_arc_set_bg_angles(C++function),496
456 lv_arc_set_bg_end_angle(C++function),496
lv_anim_set_playback_time (C++ function), lv_arc_set_bg_start_angle (C++ function),
456 496
lv_anim_set_ready_cb(C++function),456 lv_arc_set_change_rate(C++function),497
lv_anim_set_repeat_count(C++function),457 lv_arc_set_end_angle(C++function),495
lv_anim_set_repeat_delay(C++function),457 lv_arc_set_mode(C++function),496
lv_anim_set_start_cb(C++function),456 lv_arc_set_range(C++function),496
lv_anim_set_time(C++function),455 lv_arc_set_rotation(C++function),496
lv_anim_set_user_data(C++function),457 lv_arc_set_start_angle(C++function),495
lv_anim_set_values(C++function),455 lv_arc_set_value(C++function),496
lv_anim_set_var(C++function),455 lv_arc_t(C++struct),498
lv_anim_speed_to_time(C++function),459 lv_arc_t::bg_angle_end(C++member),498
lv_anim_start(C++function),457 lv_arc_t::bg_angle_start(C++member),498
lv_anim_start_cb_t(C++type),454 lv_arc_t::chg_rate(C++member),499
lv_anim_t(C++type),454 lv_arc_t::dragging(C++member),499
lv_animimg_class(C++member),642 lv_arc_t::in_out(C++member),499
lv_animimg_create(C++function),642 lv_arc_t::indic_angle_end (C++ member),
lv_animimg_part_t(C++type),641 498
lv_animimg_set_duration(C++function),642 lv_arc_t::indic_angle_start (C++ member),
lv_animimg_set_repeat_count (C++ function), 498
642 lv_arc_t::last_angle(C++member),499
lv_animimg_set_src(C++function),642 lv_arc_t::last_tick(C++member),499
lv_animimg_start(C++function),642 lv_arc_t::max_value(C++member),499
lv_animimg_t(C++struct),642 lv_arc_t::min_close(C++member),499
lv_animimg_t::anim(C++member),642 lv_arc_t::min_value(C++member),499
lv_animimg_t::dsc(C++member),642 lv_arc_t::obj(C++member),498
lv_animimg_t::img(C++member),642 lv_arc_t::rotation(C++member),498
lv_animimg_t::pic_count(C++member),642 lv_arc_t::type(C++member),499
lv_arc_t::value(C++member),499
Index 967


--- Page 972 ---


LVGLDocumentation8.3
lv_async_call(C++function),466 lv_btnmatrix_get_popovers (C++ function),
lv_async_call_cancel(C++function),466 706
lv_async_cb_t(C++type),466 lv_btnmatrix_get_selected_btn (C++ func-
lv_bar_class(C++member),511 tion),531
lv_bar_create(C++function),509 lv_btnmatrix_has_btn_ctrl (C++ function),
lv_bar_draw_part_type_t(C++enum),509 531
lv_bar_draw_part_type_t::LV_BAR_DRAW_PARlTv__IbNtDnImCaAtTrOiRx_set_btn_ctrl (C++ function),
(C++enumerator),509 529
lv_bar_get_max_value(C++function),510 lv_btnmatrix_set_btn_ctrl_all (C++ func-
lv_bar_get_min_value(C++function),510 tion),530
lv_bar_get_mode(C++function),510 lv_btnmatrix_set_btn_width (C++ function),
lv_bar_get_start_value(C++function),510 530
lv_bar_get_value(C++function),510 lv_btnmatrix_set_ctrl_map (C++ function),
lv_bar_mode_t(C++type),508 529
lv_bar_set_mode(C++function),510 lv_btnmatrix_set_map(C++function),529
lv_bar_set_range(C++function),509 lv_btnmatrix_set_one_checked (C++ func-
lv_bar_set_start_value(C++function),509 tion),530
lv_bar_set_value(C++function),509 lv_btnmatrix_set_selected_btn (C++ func-
lv_bar_t(C++struct),511 tion),529
lv_bar_t::cur_value(C++member),511 lv_btnmatrix_t(C++struct),531
lv_bar_t::cur_value_anim(C++member),511 lv_btnmatrix_t::btn_cnt(C++member),532
lv_bar_t::indic_area(C++member),511 lv_btnmatrix_t::btn_id_sel (C++ member),
lv_bar_t::max_value(C++member),511 532
lv_bar_t::min_value(C++member),511 lv_btnmatrix_t::button_areas (C++ mem-
lv_bar_t::mode(C++member),511 ber),531
lv_bar_t::obj(C++member),511 lv_btnmatrix_t::ctrl_bits (C++ member),
lv_bar_t::start_value(C++member),511 531
lv_bar_t::start_value_anim (C++ member), lv_btnmatrix_t::map_p(C++member),531
511 lv_btnmatrix_t::obj(C++member),531
lv_blend_mode_t(C++type),328 lv_btnmatrix_t::one_check (C++ member),
lv_bmp_init(C++function),820 532
lv_border_side_t(C++type),328 lv_btnmatrix_t::row_cnt(C++member),532
lv_btn_class(C++member),518 lv_calendar_class(C++member),648
lv_btn_create(C++function),518 lv_calendar_create(C++function),647
lv_btn_t(C++struct),518 lv_calendar_date_t(C++struct),648
lv_btn_t::obj(C++member),518 lv_calendar_date_t::day(C++member),648
lv_btnmatrix_btn_draw_cb_t(C++type),527 lv_calendar_date_t::month (C++ member),
lv_btnmatrix_class(C++member),531 648
lv_btnmatrix_clear_btn_ctrl (C++ function), lv_calendar_date_t::year(C++member),648
530 lv_calendar_get_btnmatrix (C++ function),
lv_btnmatrix_clear_btn_ctrl_all (C++ 647
function),530 lv_calendar_get_highlighted_dates (C++
lv_btnmatrix_create(C++function),529 function),648
lv_btnmatrix_ctrl_t(C++type),527 lv_calendar_get_highlighted_dates_num
lv_btnmatrix_draw_part_type_t(C++enum), (C++function),648
528 lv_calendar_get_pressed_date (C++ func-
lv_btnmatrix_draw_part_type_t::LV_BTNMATRIX_DRAtiWo_n)P,A6R48T_BTN
(C++enumerator),529 lv_calendar_get_showed_date (C++ function),
lv_btnmatrix_get_btn_text (C++ function), 648
531 lv_calendar_get_today_date (C++ function),
lv_btnmatrix_get_map(C++function),530 647
lv_btnmatrix_get_one_checked (C++ func- lv_calendar_set_day_names (C++ function),
tion),531 647
lv_calendar_set_highlighted_dates (C++
Index 968


--- Page 973 ---


LVGLDocumentation8.3
function),647 lv_chart_draw_part_type_t(C++enum),682
lv_calendar_set_showed_date (C++ function), lv_chart_draw_part_type_t::LV_CHART_DRAW_PART_BAR
647 (C++enumerator),682
lv_calendar_set_today_date (C++ function), lv_chart_draw_part_type_t::LV_CHART_DRAW_PART_CURSOR
647 (C++enumerator),683
lv_calendar_t(C++struct),648 lv_chart_draw_part_type_t::LV_CHART_DRAW_PART_DIV_LINE_HOR
lv_calendar_t::btnm(C++member),649 (C++enumerator),682
lv_calendar_t::highlighted_dates (C++ lv_chart_draw_part_type_t::LV_CHART_DRAW_PART_DIV_LINE_INIT
member),649 (C++enumerator),682
lv_calendar_t::highlighted_dates_num lv_chart_draw_part_type_t::LV_CHART_DRAW_PART_DIV_LINE_VER
(C++member),649 (C++enumerator),682
lv_calendar_t::map(C++member),649 lv_chart_draw_part_type_t::LV_CHART_DRAW_PART_LINE_AND_POINT
lv_calendar_t::nums(C++member),649 (C++enumerator),682
lv_calendar_t::obj(C++member),649 lv_chart_draw_part_type_t::LV_CHART_DRAW_PART_TICK_LABEL
lv_calendar_t::showed_date (C++ member), (C++enumerator),683
649 lv_chart_get_cursor_point (C++ function),
lv_calendar_t::today(C++member),649 687
lv_canvas_blur_hor(C++function),540 lv_chart_get_point_count(C++function),685
lv_canvas_blur_ver(C++function),540 lv_chart_get_point_pos_by_id (C++ func-
lv_canvas_class(C++member),542 tion),685
lv_canvas_copy_buf(C++function),539 lv_chart_get_pressed_point (C++ function),
lv_canvas_create(C++function),538 689
lv_canvas_draw_arc(C++function),541 lv_chart_get_series_next(C++function),686
lv_canvas_draw_img(C++function),541 lv_chart_get_type(C++function),684
lv_canvas_draw_line(C++function),541 lv_chart_get_x_array(C++function),688
lv_canvas_draw_polygon(C++function),541 lv_chart_get_x_start_point (C++ function),
lv_canvas_draw_rect(C++function),540 685
lv_canvas_draw_text(C++function),540 lv_chart_get_y_array(C++function),688
lv_canvas_fill_bg(C++function),540 lv_chart_get_zoom_x(C++function),684
lv_canvas_get_img(C++function),539 lv_chart_get_zoom_y(C++function),684
lv_canvas_get_px(C++function),539 lv_chart_hide_series(C++function),685
lv_canvas_set_buffer(C++function),538 lv_chart_refresh(C++function),685
lv_canvas_set_palette(C++function),538 lv_chart_remove_series(C++function),685
lv_canvas_set_px(C++function),538 lv_chart_series_t(C++struct),689
lv_canvas_set_px_color(C++function),538 lv_chart_series_t::color(C++member),689
lv_canvas_set_px_opa(C++function),538 lv_chart_series_t::hidden (C++ member),
lv_canvas_t(C++struct),542 689
lv_canvas_t::dsc(C++member),542 lv_chart_series_t::start_point(C++mem-
lv_canvas_t::img(C++member),542 ber),689
lv_canvas_transform(C++function),539 lv_chart_series_t::x_axis_sec (C++ mem-
lv_chart_add_cursor(C++function),686 ber),689
lv_chart_add_series(C++function),685 lv_chart_series_t::x_ext_buf_assigned
lv_chart_axis_t(C++type),681 (C++member),689
lv_chart_class(C++member),689 lv_chart_series_t::x_points (C++ member),
lv_chart_create(C++function),683 689
lv_chart_cursor_t(C++struct),689 lv_chart_series_t::y_axis_sec (C++ mem-
lv_chart_cursor_t::color(C++member),690 ber),689
lv_chart_cursor_t::dir(C++member),690 lv_chart_series_t::y_ext_buf_assigned
lv_chart_cursor_t::point_id (C++ member), (C++member),689
690 lv_chart_series_t::y_points (C++ member),
lv_chart_cursor_t::pos(C++member),690 689
lv_chart_cursor_t::pos_set (C++ member), lv_chart_set_all_value(C++function),687
690 lv_chart_set_axis_tick(C++function),684
lv_chart_cursor_t::ser(C++member),690 lv_chart_set_cursor_point (C++ function),
Index 969


--- Page 974 ---


LVGLDocumentation8.3
687 lv_checkbox_class(C++member),547
lv_chart_set_cursor_pos(C++function),686 lv_checkbox_create(C++function),547
lv_chart_set_div_line_count (C++ function), lv_checkbox_draw_part_type_t (C++ enum),
683 547
lv_chart_set_ext_x_array(C++function),688 lv_checkbox_draw_part_type_t::LV_CHECKBOX_DRAW_PART_BOX
lv_chart_set_ext_y_array(C++function),688 (C++enumerator),547
lv_chart_set_next_value(C++function),687 lv_checkbox_get_text(C++function),547
lv_chart_set_next_value2(C++function),687 lv_checkbox_set_text(C++function),547
lv_chart_set_point_count(C++function),683 lv_checkbox_set_text_static (C++ function),
lv_chart_set_range(C++function),683 547
lv_chart_set_series_color (C++ function), lv_checkbox_t(C++struct),547
686 lv_checkbox_t::obj(C++member),548
lv_chart_set_type(C++function),683 lv_checkbox_t::static_txt (C++ member),
lv_chart_set_update_mode(C++function),683 548
lv_chart_set_value_by_id(C++function),687 lv_checkbox_t::txt(C++member),548
lv_chart_set_value_by_id2 (C++ function), lv_color16_t(C++union),412
688 lv_color16_t::blue(C++member),412
lv_chart_set_x_start_point (C++ function), lv_color16_t::ch(C++member),412
686 lv_color16_t::full(C++member),412
lv_chart_set_zoom_x(C++function),684 lv_color16_t::green(C++member),412
lv_chart_set_zoom_y(C++function),684 lv_color16_t::green_h(C++member),412
lv_chart_t(C++struct),690 lv_color16_t::green_l(C++member),412
lv_chart_t::cursor_ll(C++member),690 lv_color16_t::red(C++member),412
lv_chart_t::hdiv_cnt(C++member),691 lv_color1_t(C++union),411
lv_chart_t::obj(C++member),690 lv_color1_t::blue(C++member),411
lv_chart_t::point_cnt(C++member),691 lv_color1_t::ch(C++member),411
lv_chart_t::pressed_point_id (C++ mem- lv_color1_t::full(C++member),411
ber),691 lv_color1_t::green(C++member),411
lv_chart_t::series_ll(C++member),690 lv_color1_t::red(C++member),411
lv_chart_t::tick(C++member),690 lv_color32_t(C++union),412
lv_chart_t::type(C++member),691 lv_color32_t::alpha(C++member),412
lv_chart_t::update_mode(C++member),691 lv_color32_t::blue(C++member),412
lv_chart_t::vdiv_cnt(C++member),691 lv_color32_t::ch(C++member),412
lv_chart_t::xmax(C++member),691 lv_color32_t::full(C++member),412
lv_chart_t::xmin(C++member),691 lv_color32_t::green(C++member),412
lv_chart_t::ymax(C++member),691 lv_color32_t::red(C++member),412
lv_chart_t::ymin(C++member),691 lv_color8_t(C++union),411
lv_chart_t::zoom_x(C++member),691 lv_color8_t::blue(C++member),411
lv_chart_t::zoom_y(C++member),691 lv_color8_t::ch(C++member),411
lv_chart_tick_dsc_t(C++struct),690 lv_color8_t::full(C++member),412
lv_chart_tick_dsc_t::draw_size(C++mem- lv_color8_t::green(C++member),411
ber),690 lv_color8_t::red(C++member),411
lv_chart_tick_dsc_t::label_en (C++ mem- lv_color_black(C++function),411
ber),690 lv_color_brightness(C++function),410
lv_chart_tick_dsc_t::major_cnt(C++mem- lv_color_change_lightness (C++ function),
ber),690 410
lv_chart_tick_dsc_t::major_len(C++mem- lv_color_chroma_key(C++function),411
ber),690 lv_color_darken(C++function),410
lv_chart_tick_dsc_t::minor_cnt(C++mem- lv_color_filter_cb_t(C++type),408
ber),690 lv_color_filter_dsc_init(C++function),410
lv_chart_tick_dsc_t::minor_len(C++mem- lv_color_filter_dsc_t(C++type),408
ber),690 lv_color_hex(C++function),410
lv_chart_type_t(C++type),681 lv_color_hex3(C++function),410
lv_chart_update_mode_t(C++type),681 lv_color_hsv_t(C++struct),412
Index 970


--- Page 975 ---


LVGLDocumentation8.3
lv_color_hsv_t::h(C++member),413 lv_disp_enable_invalidation (C++ function),
lv_color_hsv_t::s(C++member),413 403
lv_color_hsv_t::v(C++member),413 lv_disp_get_antialiasing(C++function),263
lv_color_hsv_to_rgb(C++function),410 lv_disp_get_default(C++function),263
lv_color_lighten(C++function),410 lv_disp_get_dpi(C++function),264
lv_color_make(C++function),410 lv_disp_get_draw_buf(C++function),264
lv_color_rgb_to_hsv(C++function),410 lv_disp_get_hor_res(C++function),263
lv_color_to1(C++function),410 lv_disp_get_inactive_time (C++ function),
lv_color_to16(C++function),410 403
lv_color_to32(C++function),410 lv_disp_get_layer_sys(C++function),402
lv_color_to8(C++function),410 lv_disp_get_layer_top(C++function),402
lv_color_to_hsv(C++function),411 lv_disp_get_next(C++function),264
lv_color_white(C++function),411 lv_disp_get_offset_x(C++function),263
lv_colorwheel_class(C++member),695 lv_disp_get_offset_y(C++function),263
lv_colorwheel_create(C++function),694 lv_disp_get_physical_hor_res (C++ func-
lv_colorwheel_get_color_mode (C++ func- tion),263
tion),694 lv_disp_get_physical_ver_res (C++ func-
lv_colorwheel_get_color_mode_fixed(C++ tion),263
function),695 lv_disp_get_rotation(C++function),264
lv_colorwheel_get_hsv(C++function),694 lv_disp_get_scr_act(C++function),402
lv_colorwheel_get_rgb(C++function),694 lv_disp_get_scr_prev(C++function),402
lv_colorwheel_mode_t(C++type),693 lv_disp_get_theme(C++function),402
lv_colorwheel_set_hsv(C++function),694 lv_disp_get_ver_res(C++function),263
lv_colorwheel_set_mode(C++function),694 lv_disp_is_invalidation_enabled (C++
lv_colorwheel_set_mode_fixed (C++ func- function),403
tion),694 lv_disp_load_scr(C++function),402
lv_colorwheel_set_rgb(C++function),694 lv_disp_remove(C++function),263
lv_colorwheel_t(C++struct),695 lv_disp_rot_t(C++enum),262
lv_colorwheel_t::hsv(C++member),695 lv_disp_rot_t::LV_DISP_ROT_180 (C++ enu-
lv_colorwheel_t::knob(C++member),695 merator),262
lv_colorwheel_t::last_change_time (C++ lv_disp_rot_t::LV_DISP_ROT_270 (C++ enu-
member),695 merator),262
lv_colorwheel_t::last_click_time (C++ lv_disp_rot_t::LV_DISP_ROT_90 (C++ enu-
member),695 merator),262
lv_colorwheel_t::last_press_point (C++ lv_disp_rot_t::LV_DISP_ROT_NONE (C++
member),695 enumerator),262
lv_colorwheel_t::mode(C++member),695 lv_disp_set_bg_color(C++function),402
lv_colorwheel_t::mode_fixed (C++ member), lv_disp_set_bg_image(C++function),402
695 lv_disp_set_bg_opa(C++function),403
lv_colorwheel_t::obj(C++member),695 lv_disp_set_default(C++function),263
lv_colorwheel_t::pos(C++member),695 lv_disp_set_rotation(C++function),264
lv_colorwheel_t::recolor(C++member),695 lv_disp_set_theme(C++function),402
lv_deinit(C++function),485 lv_disp_t(C++type),261
lv_disp_clean_dcache(C++function),403 lv_disp_trig_activity(C++function),403
lv_disp_dpx(C++function),404 lv_dither_mode_t(C++type),328
lv_disp_draw_buf_init(C++function),262 lv_dpx(C++function),404
lv_disp_draw_buf_t(C++type),261 lv_dropdown_add_option(C++function),555
lv_disp_drv_init(C++function),262 lv_dropdown_class(C++member),558
lv_disp_drv_register(C++function),262 lv_dropdown_clear_options (C++ function),
lv_disp_drv_t(C++type),261 555
lv_disp_drv_update(C++function),262 lv_dropdown_close(C++function),558
lv_disp_drv_use_generic_set_px_cb (C++ lv_dropdown_create(C++function),555
function),264 lv_dropdown_get_dir(C++function),557
lv_dropdown_get_list(C++function),556
Index 971


--- Page 976 ---


LVGLDocumentation8.3
lv_dropdown_get_option_cnt (C++ function), lv_ffmpeg_player_cmd_t(C++enum),841
557 lv_ffmpeg_player_cmd_t::_LV_FFMPEG_PLAYER_CMD_LAST
lv_dropdown_get_option_index (C++ func- (C++enumerator),841
tion),557 lv_ffmpeg_player_cmd_t::LV_FFMPEG_PLAYER_CMD_PAUSE
lv_dropdown_get_options(C++function),556 (C++enumerator),841
lv_dropdown_get_selected(C++function),557 lv_ffmpeg_player_cmd_t::LV_FFMPEG_PLAYER_CMD_RESUME
lv_dropdown_get_selected_highlight(C++ (C++enumerator),841
function),557 lv_ffmpeg_player_cmd_t::LV_FFMPEG_PLAYER_CMD_START
lv_dropdown_get_selected_str (C++ func- (C++enumerator),841
tion),557 lv_ffmpeg_player_cmd_t::LV_FFMPEG_PLAYER_CMD_STOP
lv_dropdown_get_symbol(C++function),557 (C++enumerator),841
lv_dropdown_get_text(C++function),556 lv_ffmpeg_player_create(C++function),841
lv_dropdown_is_open(C++function),558 lv_ffmpeg_player_set_auto_restart (C++
lv_dropdown_list_t(C++struct),559 function),842
lv_dropdown_list_t::dropdown (C++ mem- lv_ffmpeg_player_set_cmd(C++function),842
ber),559 lv_ffmpeg_player_set_src(C++function),841
lv_dropdown_list_t::obj(C++member),559 lv_ffmpeg_player_t(C++struct),842
lv_dropdown_open(C++function),557 lv_ffmpeg_player_t::auto_restart (C++
lv_dropdown_set_dir(C++function),556 member),842
lv_dropdown_set_options(C++function),555 lv_ffmpeg_player_t::ffmpeg_ctx(C++mem-
lv_dropdown_set_options_static(C++func- ber),842
tion),555 lv_ffmpeg_player_t::img(C++member),842
lv_dropdown_set_selected(C++function),555 lv_ffmpeg_player_t::imgdsc (C++ member),
lv_dropdown_set_selected_highlight(C++ 842
function),556 lv_ffmpeg_player_t::timer (C++ member),
lv_dropdown_set_symbol(C++function),556 842
lv_dropdown_set_text(C++function),555 lv_flex_align_t(C++enum),799
lv_dropdown_t(C++struct),558 lv_flex_align_t::LV_FLEX_ALIGN_CENTER
lv_dropdown_t::dir(C++member),559 (C++enumerator),799
lv_dropdown_t::list(C++member),558 lv_flex_align_t::LV_FLEX_ALIGN_END(C++
lv_dropdown_t::obj(C++member),558 enumerator),799
lv_dropdown_t::option_cnt (C++ member), lv_flex_align_t::LV_FLEX_ALIGN_SPACE_AROUND
558 (C++enumerator),799
lv_dropdown_t::options(C++member),558 lv_flex_align_t::LV_FLEX_ALIGN_SPACE_BETWEEN
lv_dropdown_t::pr_opt_id(C++member),559 (C++enumerator),799
lv_dropdown_t::sel_opt_id (C++ member), lv_flex_align_t::LV_FLEX_ALIGN_SPACE_EVENLY
558 (C++enumerator),799
lv_dropdown_t::sel_opt_id_orig(C++mem- lv_flex_align_t::LV_FLEX_ALIGN_START
ber),558 (C++enumerator),799
lv_dropdown_t::selected_highlight (C++ lv_flex_flow_t(C++enum),799
member),559 lv_flex_flow_t::LV_FLEX_FLOW_COLUMN
lv_dropdown_t::static_txt (C++ member), (C++enumerator),799
559 lv_flex_flow_t::LV_FLEX_FLOW_COLUMN_REVERSE
lv_dropdown_t::symbol(C++member),558 (C++enumerator),800
lv_dropdown_t::text(C++member),558 lv_flex_flow_t::LV_FLEX_FLOW_COLUMN_WRAP
lv_dropdownlist_class(C++member),558 (C++enumerator),800
lv_event_get_msg(C++function),879 lv_flex_flow_t::LV_FLEX_FLOW_COLUMN_WRAP_REVERSE
LV_EVENT_MSG_RECEIVED(C++member),880 (C++enumerator),800
LV_EXPORT_CONST_INT (C++ function), 335, 410, lv_flex_flow_t::LV_FLEX_FLOW_ROW (C++
455, 529, 555, 582, 621, 633, 683, 800, 815, enumerator),799
878 lv_flex_flow_t::LV_FLEX_FLOW_ROW_REVERSE
lv_ffmpeg_get_frame_num(C++function),841 (C++enumerator),799
lv_ffmpeg_init(C++function),841 lv_flex_flow_t::LV_FLEX_FLOW_ROW_WRAP
lv_ffmpeg_player_class(C++member),842 (C++enumerator),799
Index 972


--- Page 977 ---


LVGLDocumentation8.3
lv_flex_flow_t::LV_FLEX_FLOW_ROW_WRAP_RElVvE_RfSsE_file_cache_t::buffer (C++ member),
(C++enumerator),800 440
lv_flex_init(C++function),800 lv_fs_file_cache_t::end(C++member),440
lv_fragment_class_t(C++type),864 lv_fs_file_cache_t::file_position (C++
lv_fragment_create(C++function),866 member),440
lv_fragment_create_obj(C++function),866 lv_fs_file_cache_t::start (C++ member),
lv_fragment_del(C++function),866 440
lv_fragment_del_obj(C++function),866 lv_fs_file_t(C++struct),440
lv_fragment_get_container (C++ function), lv_fs_file_t::cache(C++member),440
866 lv_fs_file_t::drv(C++member),440
lv_fragment_get_manager(C++function),866 lv_fs_file_t::file_d(C++member),440
lv_fragment_get_parent(C++function),866 lv_fs_get_drv(C++function),437
lv_fragment_managed_states_t (C++ type), lv_fs_get_ext(C++function),439
864 lv_fs_get_last(C++function),439
lv_fragment_manager_add(C++function),864 lv_fs_get_letters(C++function),439
lv_fragment_manager_create (C++ function), lv_fs_is_ready(C++function),437
864 lv_fs_mode_t(C++type),435
lv_fragment_manager_create_obj(C++func- lv_fs_open(C++function),437
tion),864 lv_fs_read(C++function),438
lv_fragment_manager_del(C++function),864 lv_fs_res_t(C++type),435
lv_fragment_manager_del_obj (C++ function), lv_fs_seek(C++function),438
864 lv_fs_tell(C++function),438
lv_fragment_manager_find_by_container lv_fs_up(C++function),439
(C++function),865 lv_fs_whence_t(C++enum),436
lv_fragment_manager_get_parent_fragment lv_fs_whence_t::LV_FS_SEEK_CUR (C++ enu-
(C++function),866 merator),437
lv_fragment_manager_get_stack_size(C++ lv_fs_whence_t::LV_FS_SEEK_END (C++ enu-
function),865 merator),437
lv_fragment_manager_get_top (C++ function), lv_fs_whence_t::LV_FS_SEEK_SET (C++ enu-
865 merator),436
lv_fragment_manager_pop(C++function),865 lv_fs_write(C++function),438
lv_fragment_manager_push(C++function),865 lv_ft_font_destroy(C++function),830
lv_fragment_manager_remove (C++ function), lv_ft_font_init(C++function),830
864 LV_FT_FONT_STYLE(C++enum),829
lv_fragment_manager_replace (C++ function), LV_FT_FONT_STYLE::FT_FONT_STYLE_BOLD
865 (C++enumerator),830
lv_fragment_manager_send_event(C++func- LV_FT_FONT_STYLE::FT_FONT_STYLE_ITALIC
tion),865 (C++enumerator),829
lv_fragment_manager_t(C++type),864 LV_FT_FONT_STYLE::FT_FONT_STYLE_NORMAL
lv_fragment_recreate_obj(C++function),867 (C++enumerator),829
lv_fragment_t(C++type),864 lv_ft_info_t(C++struct),830
lv_freetype_destroy(C++function),830 lv_ft_info_t::font(C++member),830
lv_freetype_init(C++function),830 lv_ft_info_t::mem(C++member),830
lv_fs_close(C++function),437 lv_ft_info_t::mem_size(C++member),830
lv_fs_dir_close(C++function),439 lv_ft_info_t::name(C++member),830
lv_fs_dir_open(C++function),438 lv_ft_info_t::style(C++member),830
lv_fs_dir_read(C++function),438 lv_ft_info_t::weight(C++member),830
lv_fs_dir_t(C++struct),440 lv_get_imgfont_path_cb_t(C++type),882
lv_fs_dir_t::dir_d(C++member),441 lv_gif_class(C++member),826
lv_fs_dir_t::drv(C++member),441 lv_gif_create(C++function),826
lv_fs_drv_init(C++function),437 lv_gif_restart(C++function),826
lv_fs_drv_register(C++function),437 lv_gif_set_src(C++function),826
lv_fs_drv_t(C++type),435 lv_gif_t(C++struct),826
lv_fs_file_cache_t(C++struct),440 lv_gif_t::gif(C++member),827
Index 973


--- Page 978 ---


LVGLDocumentation8.3
lv_gif_t::img(C++member),827 lv_group_get_focus_cb(C++function),397
lv_gif_t::imgdsc(C++member),827 lv_group_get_focused(C++function),397
lv_gif_t::last_call(C++member),827 lv_group_get_obj_count(C++function),397
lv_gif_t::timer(C++member),827 lv_group_get_wrap(C++function),397
lv_grad_dir_t(C++type),328 lv_group_refocus_policy_t(C++enum),394
lv_grad_dsc_t(C++struct),338 lv_group_refocus_policy_t::LV_GROUP_REFOCUS_POLICY_NEXT
lv_grad_dsc_t::dir(C++member),338 (C++enumerator),394
lv_grad_dsc_t::dither(C++member),338 lv_group_refocus_policy_t::LV_GROUP_REFOCUS_POLICY_PREV
lv_grad_dsc_t::stops(C++member),338 (C++enumerator),394
lv_grad_dsc_t::stops_count (C++ member), lv_group_remove_all_objs(C++function),395
338 lv_group_remove_obj(C++function),395
lv_gradient_stop_t(C++struct),337 lv_group_send_data(C++function),396
lv_gradient_stop_t::color (C++ member), lv_group_set_default(C++function),395
338 lv_group_set_edge_cb(C++function),396
lv_gradient_stop_t::frac(C++member),338 lv_group_set_editing(C++function),396
lv_grid_align_t(C++enum),814 lv_group_set_focus_cb(C++function),396
lv_grid_align_t::LV_GRID_ALIGN_CENTER lv_group_set_refocus_policy (C++ function),
(C++enumerator),814 396
lv_grid_align_t::LV_GRID_ALIGN_END(C++ lv_group_set_wrap(C++function),396
enumerator),814 lv_group_swap_obj(C++function),395
lv_grid_align_t::LV_GRID_ALIGN_SPACE_AROlUvN_Dgroup_t(C++type),393
(C++enumerator),814 lv_ime_pinyin_create(C++function),887
lv_grid_align_t::LV_GRID_ALIGN_SPACE_BETlWvE_EiNme_pinyin_get_cand_panel (C++ func-
(C++enumerator),814 tion),887
lv_grid_align_t::LV_GRID_ALIGN_SPACE_EVElNvL_Yime_pinyin_get_dict(C++function),887
(C++enumerator),814 lv_ime_pinyin_get_kb(C++function),887
lv_grid_align_t::LV_GRID_ALIGN_START lv_ime_pinyin_mode_t(C++enum),887
(C++enumerator),814 lv_ime_pinyin_mode_t::LV_IME_PINYIN_MODE_K26
lv_grid_align_t::LV_GRID_ALIGN_STRETCH (C++enumerator),887
(C++enumerator),814 lv_ime_pinyin_mode_t::LV_IME_PINYIN_MODE_K9
lv_grid_fr(C++function),815 (C++enumerator),887
lv_grid_init(C++function),815 lv_ime_pinyin_set_dict(C++function),887
lv_gridnav_add(C++function),858 lv_ime_pinyin_set_keyboard (C++ function),
lv_gridnav_ctrl_t(C++enum),858 887
lv_gridnav_ctrl_t::LV_GRIDNAV_CTRL_NONE lv_ime_pinyin_set_mode(C++function),887
(C++enumerator),858 lv_ime_pinyin_t(C++struct),888
lv_gridnav_ctrl_t::LV_GRIDNAV_CTRL_ROLLOlVvE_Rime_pinyin_t::cand_num (C++ member),
(C++enumerator),858 889
lv_gridnav_ctrl_t::LV_GRIDNAV_CTRL_SCROLlLv__FiImReS_Tpinyin_t::cand_panel (C++ member),
(C++enumerator),858 888
lv_gridnav_remove(C++function),858 lv_ime_pinyin_t::cand_str (C++ member),
lv_gridnav_set_focused(C++function),858 888
lv_group_add_obj(C++function),395 lv_ime_pinyin_t::dict(C++member),888
lv_group_create(C++function),395 lv_ime_pinyin_t::input_char (C++ member),
lv_group_del(C++function),395 888
lv_group_edge_cb_t(C++type),393 lv_ime_pinyin_t::k9_input_str (C++ mem-
lv_group_focus_cb_t(C++type),393 ber),888
lv_group_focus_freeze(C++function),396 lv_ime_pinyin_t::k9_input_str_len (C++
lv_group_focus_next(C++function),395 member),889
lv_group_focus_obj(C++function),395 lv_ime_pinyin_t::k9_legal_py_count(C++
lv_group_focus_prev(C++function),396 member),888
lv_group_get_default(C++function),395 lv_ime_pinyin_t::k9_legal_py_ll (C++
lv_group_get_edge_cb(C++function),397 member),888
lv_group_get_editing(C++function),397
Index 974


--- Page 979 ---


LVGLDocumentation8.3
lv_ime_pinyin_t::k9_py_ll_pos (C++ mem- lv_img_t::h(C++member),572
ber),888 lv_img_t::obj(C++member),572
lv_ime_pinyin_t::kb(C++member),888 lv_img_t::obj_size_mode(C++member),573
lv_ime_pinyin_t::mode(C++member),889 lv_img_t::offset(C++member),572
lv_ime_pinyin_t::obj(C++member),888 lv_img_t::pivot(C++member),572
lv_ime_pinyin_t::py_num(C++member),889 lv_img_t::src(C++member),572
lv_ime_pinyin_t::py_page(C++member),889 lv_img_t::src_type(C++member),573
lv_ime_pinyin_t::py_pos(C++member),889 lv_img_t::w(C++member),572
lv_ime_pinyin_t::ta_count (C++ member), lv_img_t::zoom(C++member),573
889 lv_imgbtn_class(C++member),701
lv_img_buf_alloc(C++function),430 lv_imgbtn_create(C++function),700
lv_img_buf_free(C++function),431 lv_imgbtn_get_src_left(C++function),700
lv_img_buf_get_img_size(C++function),431 lv_imgbtn_get_src_middle(C++function),700
lv_img_buf_get_px_alpha(C++function),430 lv_imgbtn_get_src_right(C++function),700
lv_img_buf_get_px_color(C++function),430 lv_imgbtn_set_src(C++function),700
lv_img_buf_set_palette(C++function),431 lv_imgbtn_set_state(C++function),700
lv_img_buf_set_px_alpha(C++function),431 lv_imgbtn_state_t(C++enum),699
lv_img_buf_set_px_color(C++function),431 lv_imgbtn_state_t::_LV_IMGBTN_STATE_NUM
lv_img_cf_t(C++type),427 (C++enumerator),699
lv_img_class(C++member),572 lv_imgbtn_state_t::LV_IMGBTN_STATE_CHECKED_DISABLED
lv_img_create(C++function),570 (C++enumerator),699
lv_img_dsc_t(C++struct),432 lv_imgbtn_state_t::LV_IMGBTN_STATE_CHECKED_PRESSED
lv_img_dsc_t::data(C++member),433 (C++enumerator),699
lv_img_dsc_t::data_size(C++member),433 lv_imgbtn_state_t::LV_IMGBTN_STATE_CHECKED_RELEASED
lv_img_dsc_t::header(C++member),433 (C++enumerator),699
lv_img_get_angle(C++function),571 lv_imgbtn_state_t::LV_IMGBTN_STATE_DISABLED
lv_img_get_antialias(C++function),572 (C++enumerator),699
lv_img_get_offset_x(C++function),571 lv_imgbtn_state_t::LV_IMGBTN_STATE_PRESSED
lv_img_get_offset_y(C++function),571 (C++enumerator),699
lv_img_get_pivot(C++function),571 lv_imgbtn_state_t::LV_IMGBTN_STATE_RELEASED
lv_img_get_size_mode(C++function),572 (C++enumerator),699
lv_img_get_src(C++function),571 lv_imgbtn_t(C++struct),701
lv_img_get_zoom(C++function),572 lv_imgbtn_t::act_cf(C++member),701
lv_img_header_t(C++struct),432 lv_imgbtn_t::img_src_left (C++ member),
lv_img_header_t::always_zero (C++ mem- 701
ber),432 lv_imgbtn_t::img_src_mid(C++member),701
lv_img_header_t::cf(C++member),432 lv_imgbtn_t::img_src_right (C++ member),
lv_img_header_t::h(C++member),432 701
lv_img_header_t::reserved (C++ member), lv_imgbtn_t::obj(C++member),701
432 lv_imgfont_create(C++function),882
lv_img_header_t::w(C++member),432 lv_imgfont_destroy(C++function),882
lv_img_set_angle(C++function),570 lv_indev_data_t(C++struct),275
lv_img_set_antialias(C++function),571 lv_indev_data_t::btn_id(C++member),275
lv_img_set_offset_x(C++function),570 lv_indev_data_t::continue_reading (C++
lv_img_set_offset_y(C++function),570 member),275
lv_img_set_pivot(C++function),571 lv_indev_data_t::enc_diff (C++ member),
lv_img_set_size_mode(C++function),571 275
lv_img_set_src(C++function),570 lv_indev_data_t::key(C++member),275
lv_img_set_zoom(C++function),571 lv_indev_data_t::point(C++member),275
lv_img_size_mode_t(C++type),569 lv_indev_data_t::state(C++member),275
lv_img_t(C++struct),572 lv_indev_delete(C++function),274
lv_img_t::angle(C++member),572 lv_indev_drv_init(C++function),274
lv_img_t::antialias(C++member),573 lv_indev_drv_register(C++function),274
lv_img_t::cf(C++member),573 lv_indev_drv_t(C++type),273
Index 975


--- Page 980 ---


LVGLDocumentation8.3
lv_indev_drv_update(C++function),274 lv_keyboard_set_map(C++function),706
lv_indev_enable(C++function),391 lv_keyboard_set_mode(C++function),705
lv_indev_get_act(C++function),391 lv_keyboard_set_popovers(C++function),706
lv_indev_get_gesture_dir(C++function),392 lv_keyboard_set_textarea(C++function),705
lv_indev_get_key(C++function),392 lv_keyboard_t(C++struct),707
lv_indev_get_next(C++function),274 lv_keyboard_t::btnm(C++member),707
lv_indev_get_obj_act(C++function),393 lv_keyboard_t::mode(C++member),707
lv_indev_get_point(C++function),392 lv_keyboard_t::popovers(C++member),707
lv_indev_get_read_timer(C++function),393 lv_keyboard_t::ta(C++member),707
lv_indev_get_scroll_dir(C++function),392 lv_label_class(C++member),584
lv_indev_get_scroll_obj(C++function),392 lv_label_create(C++function),582
lv_indev_get_type(C++function),391 lv_label_cut_text(C++function),584
lv_indev_get_vect(C++function),392 lv_label_get_letter_on(C++function),583
lv_indev_read_timer_cb(C++function),391 lv_label_get_letter_pos(C++function),583
lv_indev_reset(C++function),391 lv_label_get_long_mode(C++function),583
lv_indev_reset_long_press (C++ function), lv_label_get_recolor(C++function),583
391 lv_label_get_text(C++function),583
lv_indev_search_obj(C++function),393 lv_label_get_text_selection_end (C++
lv_indev_set_button_points (C++ function), function),584
392 lv_label_get_text_selection_start (C++
lv_indev_set_cursor(C++function),391 function),584
lv_indev_set_group(C++function),392 lv_label_ins_text(C++function),584
lv_indev_state_t(C++enum),274 lv_label_is_char_under_pos (C++ function),
lv_indev_state_t::LV_INDEV_STATE_PRESSED 584
(C++enumerator),274 lv_label_long_mode_t(C++type),581
lv_indev_state_t::LV_INDEV_STATE_RELEASElDv_label_set_long_mode(C++function),582
(C++enumerator),274 lv_label_set_recolor(C++function),582
lv_indev_t(C++type),273 lv_label_set_text(C++function),582
lv_indev_type_t(C++enum),273 lv_label_set_text_sel_end (C++ function),
lv_indev_type_t::LV_INDEV_TYPE_BUTTON 583
(C++enumerator),273 lv_label_set_text_sel_start (C++ function),
lv_indev_type_t::LV_INDEV_TYPE_ENCODER 583
(C++enumerator),274 lv_label_t(C++struct),584
lv_indev_type_t::LV_INDEV_TYPE_KEYPAD lv_label_t::dot(C++member),585
(C++enumerator),273 lv_label_t::dot_end(C++member),585
lv_indev_type_t::LV_INDEV_TYPE_NONE lv_label_t::dot_tmp_alloc (C++ member),
(C++enumerator),273 585
lv_indev_type_t::LV_INDEV_TYPE_POINTER lv_label_t::expand(C++member),585
(C++enumerator),273 lv_label_t::hint(C++member),585
lv_indev_wait_release(C++function),393 lv_label_t::long_mode(C++member),585
lv_init(C++function),485 lv_label_t::obj(C++member),585
lv_is_initialized(C++function),485 lv_label_t::offset(C++member),585
lv_key_t(C++type),393 lv_label_t::recolor(C++member),585
lv_keyboard_class(C++member),707 lv_label_t::sel_end(C++member),585
lv_keyboard_create(C++function),705 lv_label_t::sel_start(C++member),585
lv_keyboard_def_event_cb(C++function),707 lv_label_t::static_txt(C++member),585
lv_keyboard_get_btn_text(C++function),707 lv_label_t::text(C++member),585
lv_keyboard_get_map_array (C++ function), lv_label_t::tmp(C++member),585
706 lv_label_t::tmp_ptr(C++member),585
lv_keyboard_get_mode(C++function),706 lv_layer_sys(C++function),404
lv_keyboard_get_selected_btn (C++ func- lv_layer_top(C++function),404
tion),706 LV_LAYOUT_FLEX(C++member),801
lv_keyboard_get_textarea(C++function),706 LV_LAYOUT_GRID(C++member),816
lv_keyboard_mode_t(C++type),705 lv_led_class(C++member),711
Index 976


--- Page 981 ---


LVGLDocumentation8.3
lv_led_create(C++function),710 lv_menu_load_page_event_data_t::menu
lv_led_draw_part_type_t(C++enum),710 (C++member),737
lv_led_draw_part_type_t::LV_LED_DRAW_PARlTv__RmEeCnTuA_NlGoLaEd_page_event_data_t::page
(C++enumerator),710 (C++member),737
lv_led_get_brightness(C++function),710 lv_menu_main_cont_class(C++member),737
lv_led_off(C++function),710 lv_menu_main_header_cont_class(C++mem-
lv_led_on(C++function),710 ber),737
lv_led_set_brightness(C++function),710 lv_menu_mode_header_t(C++type),734
lv_led_set_color(C++function),710 lv_menu_mode_root_back_btn_t (C++ type),
lv_led_t(C++struct),711 734
lv_led_t::bright(C++member),711 lv_menu_page_class(C++member),737
lv_led_t::color(C++member),711 lv_menu_page_create(C++function),734
lv_led_t::obj(C++member),711 lv_menu_page_t(C++struct),738
lv_led_toggle(C++function),710 lv_menu_page_t::obj(C++member),739
lv_line_class(C++member),588 lv_menu_page_t::title(C++member),739
lv_line_create(C++function),587 lv_menu_section_class(C++member),737
lv_line_get_y_invert(C++function),588 lv_menu_section_create(C++function),735
lv_line_set_points(C++function),587 lv_menu_separator_class(C++member),737
lv_line_set_y_invert(C++function),588 lv_menu_separator_create(C++function),735
lv_line_t(C++struct),588 lv_menu_set_load_page_event (C++ function),
lv_line_t::obj(C++member),588 735
lv_line_t::point_array(C++member),588 lv_menu_set_mode_header(C++function),735
lv_line_t::point_num(C++member),588 lv_menu_set_mode_root_back_btn(C++func-
lv_line_t::y_inv(C++member),588 tion),735
lv_list_add_btn(C++function),719 lv_menu_set_page(C++function),735
lv_list_add_text(C++function),719 lv_menu_set_sidebar_page(C++function),735
lv_list_btn_class(C++member),720 lv_menu_sidebar_cont_class (C++ member),
lv_list_class(C++member),720 737
lv_list_create(C++function),719 lv_menu_sidebar_header_cont_class (C++
lv_list_get_btn_text(C++function),719 member),737
lv_list_text_class(C++member),720 lv_menu_t(C++struct),737
lv_menu_back_btn_is_root(C++function),736 lv_menu_t::cur_depth(C++member),738
lv_menu_class(C++member),737 lv_menu_t::history_ll(C++member),738
lv_menu_clear_history(C++function),736 lv_menu_t::main(C++member),738
lv_menu_cont_class(C++member),737 lv_menu_t::main_header(C++member),738
lv_menu_cont_create(C++function),734 lv_menu_t::main_header_back_btn (C++
lv_menu_create(C++function),734 member),738
lv_menu_get_cur_main_page (C++ function), lv_menu_t::main_header_title (C++ mem-
736 ber),738
lv_menu_get_cur_sidebar_page (C++ func- lv_menu_t::main_page(C++member),738
tion),736 lv_menu_t::mode_header(C++member),738
lv_menu_get_main_header(C++function),736 lv_menu_t::mode_root_back_btn (C++ mem-
lv_menu_get_main_header_back_btn (C++ ber),738
function),736 lv_menu_t::obj(C++member),738
lv_menu_get_sidebar_header (C++ function), lv_menu_t::prev_depth(C++member),738
736 lv_menu_t::selected_tab(C++member),738
lv_menu_get_sidebar_header_back_btn lv_menu_t::sidebar(C++member),738
(C++function),736 lv_menu_t::sidebar_generated (C++ mem-
lv_menu_history_t(C++struct),737 ber),738
lv_menu_history_t::page(C++member),737 lv_menu_t::sidebar_header (C++ member),
lv_menu_load_page_event_data_t (C++ 738
struct),737 lv_menu_t::sidebar_header_back_btn(C++
lv_menu_load_page_event_data_t(C++type), member),738
734
Index 977


--- Page 982 ---


LVGLDocumentation8.3
lv_menu_t::sidebar_header_title (C++ member),756
member),738 lv_meter_indicator_t::width (C++ member),
lv_menu_t::sidebar_page(C++member),738 756
lv_menu_t::storage(C++member),738 lv_meter_indicator_t::width_mod (C++
lv_meter_add_arc(C++function),753 member),756
lv_meter_add_needle_img(C++function),753 lv_meter_indicator_type_t(C++type),751
lv_meter_add_needle_line(C++function),753 lv_meter_scale_t(C++struct),755
lv_meter_add_scale(C++function),752 lv_meter_scale_t::angle_range (C++ mem-
lv_meter_add_scale_lines(C++function),754 ber),755
lv_meter_class(C++member),755 lv_meter_scale_t::label_gap (C++ member),
lv_meter_create(C++function),752 755
lv_meter_draw_part_type_t(C++enum),751 lv_meter_scale_t::max(C++member),755
lv_meter_draw_part_type_t::LV_METER_DRAWl_vP_AmReTt_eArR_Cscale_t::min(C++member),755
(C++enumerator),751 lv_meter_scale_t::r_mod(C++member),755
lv_meter_draw_part_type_t::LV_METER_DRAWl_vP_AmReTt_eNrE_EsDcLaEl_eI_MtG::rotation (C++ member),
(C++enumerator),751 755
lv_meter_draw_part_type_t::LV_METER_DRAWl_vP_AmReTt_eNrE_EsDcLaEl_eL_ItN:E:tick_cnt (C++ member),
(C++enumerator),751 755
lv_meter_draw_part_type_t::LV_METER_DRAWl_vP_AmReTt_eTrI_CsKcale_t::tick_color (C++ mem-
(C++enumerator),751 ber),755
lv_meter_indicator_t(C++struct),755 lv_meter_scale_t::tick_length (C++ mem-
lv_meter_indicator_t::arc (C++ member), ber),755
756 lv_meter_scale_t::tick_major_color(C++
lv_meter_indicator_t::color (C++ member), member),755
756 lv_meter_scale_t::tick_major_length
lv_meter_indicator_t::color_end (C++ (C++member),755
member),756 lv_meter_scale_t::tick_major_nth (C++
lv_meter_indicator_t::color_start (C++ member),755
member),756 lv_meter_scale_t::tick_major_width(C++
lv_meter_indicator_t::end_value (C++ member),755
member),756 lv_meter_scale_t::tick_width (C++ mem-
lv_meter_indicator_t::local_grad (C++ ber),755
member),756 lv_meter_set_indicator_end_value (C++
lv_meter_indicator_t::needle_img (C++ function),754
member),756 lv_meter_set_indicator_start_value(C++
lv_meter_indicator_t::needle_line (C++ function),754
member),756 lv_meter_set_indicator_value (C++ func-
lv_meter_indicator_t::opa (C++ member), tion),754
756 lv_meter_set_scale_major_ticks(C++func-
lv_meter_indicator_t::pivot (C++ member), tion),752
756 lv_meter_set_scale_range(C++function),752
lv_meter_indicator_t::r_mod (C++ member), lv_meter_set_scale_ticks(C++function),752
756 lv_meter_t(C++struct),756
lv_meter_indicator_t::scale (C++ member), lv_meter_t::indicator_ll(C++member),757
756 lv_meter_t::obj(C++member),757
lv_meter_indicator_t::scale_lines (C++ lv_meter_t::scale_ll(C++member),757
member),756 lv_monkey_config_init(C++function),850
lv_meter_indicator_t::src (C++ member), lv_monkey_config_t(C++struct),850
756 lv_monkey_config_t::input_range (C++
lv_meter_indicator_t::start_value (C++ member),851
member),756 lv_monkey_config_t::max(C++member),851
lv_meter_indicator_t::type (C++ member), lv_monkey_config_t::min(C++member),851
756 lv_monkey_config_t::period_range (C++
lv_meter_indicator_t::type_data (C++ member),851
Index 978


--- Page 983 ---


LVGLDocumentation8.3
lv_monkey_config_t::type(C++member),851 lv_obj_clear_flag(C++function),485
lv_monkey_create(C++function),850 lv_obj_clear_state(C++function),486
lv_monkey_del(C++function),850 lv_obj_create(C++function),485
lv_monkey_get_enable(C++function),850 lv_obj_dpx(C++function),487
lv_monkey_get_indev(C++function),850 lv_obj_draw_part_type_t(C++enum),484
lv_monkey_get_user_data(C++function),850 lv_obj_draw_part_type_t::LV_OBJ_DRAW_PART_BORDER_POST
lv_monkey_set_enable(C++function),850 (C++enumerator),485
lv_monkey_set_user_data(C++function),850 lv_obj_draw_part_type_t::LV_OBJ_DRAW_PART_RECTANGLE
lv_monkey_t(C++type),849 (C++enumerator),485
lv_msg_get_id(C++function),879 lv_obj_draw_part_type_t::LV_OBJ_DRAW_PART_SCROLLBAR
lv_msg_get_payload(C++function),879 (C++enumerator),485
lv_msg_get_user_data(C++function),879 lv_obj_flag_t(C++type),481
lv_msg_init(C++function),878 lv_obj_get_class(C++function),487
lv_msg_request_cb_t(C++type),878 lv_obj_get_group(C++function),486
lv_msg_send(C++function),879 lv_obj_get_state(C++function),486
lv_msg_subscribe(C++function),879 lv_obj_get_style_align(C++function),342
lv_msg_subscribe_cb_t(C++type),878 lv_obj_get_style_anim(C++function),345
lv_msg_subscribe_obj(C++function),879 lv_obj_get_style_anim_speed (C++ function),
lv_msg_subsribe(C++function),878 345
lv_msg_subsribe_obj(C++function),878 lv_obj_get_style_anim_time (C++ function),
lv_msg_t(C++struct),880 345
lv_msg_t::_priv_data(C++member),880 lv_obj_get_style_arc_color (C++ function),
lv_msg_t::id(C++member),880 344
lv_msg_t::payload(C++member),880 lv_obj_get_style_arc_color_filtered
lv_msg_t::user_data(C++member),880 (C++function),344
lv_msg_unsubscribe(C++function),879 lv_obj_get_style_arc_img_src (C++ func-
lv_msg_unsubscribe_obj(C++function),879 tion),344
lv_msgbox_backdrop_class(C++member),760 lv_obj_get_style_arc_opa(C++function),344
lv_msgbox_class(C++member),760 lv_obj_get_style_arc_rounded (C++ func-
lv_msgbox_close(C++function),759 tion),344
lv_msgbox_close_async(C++function),760 lv_obj_get_style_arc_width (C++ function),
lv_msgbox_content_class(C++member),760 344
lv_msgbox_create(C++function),759 lv_obj_get_style_base_dir (C++ function),
lv_msgbox_get_active_btn(C++function),759 345
lv_msgbox_get_active_btn_text (C++ func- lv_obj_get_style_bg_color (C++ function),
tion),759 342
lv_msgbox_get_btns(C++function),759 lv_obj_get_style_bg_color_filtered(C++
lv_msgbox_get_close_btn(C++function),759 function),342
lv_msgbox_get_content(C++function),759 lv_obj_get_style_bg_dither_mode (C++
lv_msgbox_get_text(C++function),759 function),343
lv_msgbox_get_title(C++function),759 lv_obj_get_style_bg_grad(C++function),343
lv_msgbox_t(C++struct),760 lv_obj_get_style_bg_grad_color(C++func-
lv_msgbox_t::btns(C++member),760 tion),342
lv_msgbox_t::close_btn(C++member),760 lv_obj_get_style_bg_grad_color_filtered
lv_msgbox_t::content(C++member),760 (C++function),342
lv_msgbox_t::obj(C++member),760 lv_obj_get_style_bg_grad_dir (C++ func-
lv_msgbox_t::text(C++member),760 tion),342
lv_msgbox_t::title(C++member),760 lv_obj_get_style_bg_grad_stop (C++ func-
lv_obj_add_flag(C++function),485 tion),343
lv_obj_add_state(C++function),485 lv_obj_get_style_bg_img_opa (C++ function),
lv_obj_allocate_spec_attr (C++ function), 343
487 lv_obj_get_style_bg_img_recolor (C++
lv_obj_check_type(C++function),487 function),343
lv_obj_class(C++member),488 lv_obj_get_style_bg_img_recolor_filtered
Index 979


--- Page 984 ---


LVGLDocumentation8.3
(C++function),343 lv_obj_get_style_grid_column_dsc_array
lv_obj_get_style_bg_img_recolor_opa (C++function),816
(C++function),343 lv_obj_get_style_grid_row_align (C++
lv_obj_get_style_bg_img_src (C++ function), function),816
343 lv_obj_get_style_grid_row_dsc_array
lv_obj_get_style_bg_img_tiled (C++ func- (C++function),816
tion),343 lv_obj_get_style_height(C++function),342
lv_obj_get_style_bg_main_stop (C++ func- lv_obj_get_style_img_opa(C++function),343
tion),342 lv_obj_get_style_img_recolor (C++ func-
lv_obj_get_style_bg_opa(C++function),342 tion),344
lv_obj_get_style_blend_mode (C++ function), lv_obj_get_style_img_recolor_filtered
345 (C++function),344
lv_obj_get_style_border_color (C++ func- lv_obj_get_style_img_recolor_opa (C++
tion),343 function),344
lv_obj_get_style_border_color_filtered lv_obj_get_style_layout(C++function),345
(C++function),343 lv_obj_get_style_line_color (C++ function),
lv_obj_get_style_border_opa (C++ function), 344
343 lv_obj_get_style_line_color_filtered
lv_obj_get_style_border_post (C++ func- (C++function),344
tion),343 lv_obj_get_style_line_dash_gap(C++func-
lv_obj_get_style_border_side (C++ func- tion),344
tion),343 lv_obj_get_style_line_dash_width (C++
lv_obj_get_style_border_width (C++ func- function),344
tion),343 lv_obj_get_style_line_opa (C++ function),
lv_obj_get_style_clip_corner (C++ func- 344
tion),344 lv_obj_get_style_line_rounded (C++ func-
lv_obj_get_style_color_filter_dsc (C++ tion),344
function),345 lv_obj_get_style_line_width (C++ function),
lv_obj_get_style_color_filter_opa (C++ 344
function),345 lv_obj_get_style_max_height (C++ function),
lv_obj_get_style_flex_cross_place (C++ 342
function),801 lv_obj_get_style_max_width (C++ function),
lv_obj_get_style_flex_flow (C++ function), 342
801 lv_obj_get_style_min_height (C++ function),
lv_obj_get_style_flex_grow (C++ function), 342
801 lv_obj_get_style_min_width (C++ function),
lv_obj_get_style_flex_main_place (C++ 342
function),801 lv_obj_get_style_opa(C++function),344
lv_obj_get_style_flex_track_place (C++ lv_obj_get_style_opa_layered (C++ func-
function),801 tion),344
lv_obj_get_style_grid_cell_column_pos lv_obj_get_style_outline_color(C++func-
(C++function),816 tion),343
lv_obj_get_style_grid_cell_column_span lv_obj_get_style_outline_color_filtered
(C++function),816 (C++function),343
lv_obj_get_style_grid_cell_row_pos(C++ lv_obj_get_style_outline_opa (C++ func-
function),816 tion),343
lv_obj_get_style_grid_cell_row_span lv_obj_get_style_outline_pad (C++ func-
(C++function),816 tion),343
lv_obj_get_style_grid_cell_x_align(C++ lv_obj_get_style_outline_width(C++func-
function),816 tion),343
lv_obj_get_style_grid_cell_y_align(C++ lv_obj_get_style_pad_bottom (C++ function),
function),816 342
lv_obj_get_style_grid_column_align(C++ lv_obj_get_style_pad_column (C++ function),
function),816 342
Index 980


--- Page 985 ---


LVGLDocumentation8.3
lv_obj_get_style_pad_left (C++ function), tion),342
342 lv_obj_get_style_width(C++function),342
lv_obj_get_style_pad_right (C++ function), lv_obj_get_style_x(C++function),342
342 lv_obj_get_style_y(C++function),342
lv_obj_get_style_pad_row(C++function),342 lv_obj_get_user_data(C++function),487
lv_obj_get_style_pad_top(C++function),342 lv_obj_has_class(C++function),487
lv_obj_get_style_radius(C++function),344 lv_obj_has_flag(C++function),486
lv_obj_get_style_shadow_color (C++ func- lv_obj_has_flag_any(C++function),486
tion),343 lv_obj_has_state(C++function),486
lv_obj_get_style_shadow_color_filtered lv_obj_is_valid(C++function),487
(C++function),343 lv_obj_set_flex_align(C++function),800
lv_obj_get_style_shadow_ofs_x (C++ func- lv_obj_set_flex_flow(C++function),800
tion),343 lv_obj_set_flex_grow(C++function),800
lv_obj_get_style_shadow_ofs_y (C++ func- lv_obj_set_grid_align(C++function),815
tion),343 lv_obj_set_grid_cell(C++function),815
lv_obj_get_style_shadow_opa (C++ function), lv_obj_set_grid_dsc_array (C++ function),
343 815
lv_obj_get_style_shadow_spread(C++func- lv_obj_set_style_align(C++function),345
tion),343 lv_obj_set_style_anim(C++function),348
lv_obj_get_style_shadow_width (C++ func- lv_obj_set_style_anim_speed (C++ function),
tion),343 348
lv_obj_get_style_text_align (C++ function), lv_obj_set_style_anim_time (C++ function),
344 348
lv_obj_get_style_text_color (C++ function), lv_obj_set_style_arc_color (C++ function),
344 347
lv_obj_get_style_text_color_filtered lv_obj_set_style_arc_img_src (C++ func-
(C++function),344 tion),347
lv_obj_get_style_text_decor (C++ function), lv_obj_set_style_arc_opa(C++function),347
344 lv_obj_set_style_arc_rounded (C++ func-
lv_obj_get_style_text_font (C++ function), tion),347
344 lv_obj_set_style_arc_width (C++ function),
lv_obj_get_style_text_letter_space(C++ 347
function),344 lv_obj_set_style_base_dir (C++ function),
lv_obj_get_style_text_line_space (C++ 348
function),344 lv_obj_set_style_bg_color (C++ function),
lv_obj_get_style_text_opa (C++ function), 346
344 lv_obj_set_style_bg_dither_mode (C++
lv_obj_get_style_transform_angle (C++ function),346
function),342 lv_obj_set_style_bg_grad(C++function),346
lv_obj_get_style_transform_height (C++ lv_obj_set_style_bg_grad_color(C++func-
function),342 tion),346
lv_obj_get_style_transform_pivot_x(C++ lv_obj_set_style_bg_grad_dir (C++ func-
function),342 tion),346
lv_obj_get_style_transform_pivot_y(C++ lv_obj_set_style_bg_grad_stop (C++ func-
function),342 tion),346
lv_obj_get_style_transform_width (C++ lv_obj_set_style_bg_img_opa (C++ function),
function),342 346
lv_obj_get_style_transform_zoom (C++ lv_obj_set_style_bg_img_recolor (C++
function),342 function),346
lv_obj_get_style_transition (C++ function), lv_obj_set_style_bg_img_recolor_opa
345 (C++function),346
lv_obj_get_style_translate_x (C++ func- lv_obj_set_style_bg_img_src (C++ function),
tion),342 346
lv_obj_get_style_translate_y (C++ func-
Index 981


--- Page 986 ---


LVGLDocumentation8.3
lv_obj_set_style_bg_img_tiled (C++ func- lv_obj_set_style_img_opa(C++function),347
tion),346 lv_obj_set_style_img_recolor (C++ func-
lv_obj_set_style_bg_main_stop (C++ func- tion),347
tion),346 lv_obj_set_style_img_recolor_opa (C++
lv_obj_set_style_bg_opa(C++function),346 function),347
lv_obj_set_style_blend_mode (C++ function), lv_obj_set_style_layout(C++function),348
348 lv_obj_set_style_line_color (C++ function),
lv_obj_set_style_border_color (C++ func- 347
tion),346 lv_obj_set_style_line_dash_gap(C++func-
lv_obj_set_style_border_opa (C++ function), tion),347
346 lv_obj_set_style_line_dash_width (C++
lv_obj_set_style_border_post (C++ func- function),347
tion),346 lv_obj_set_style_line_opa (C++ function),
lv_obj_set_style_border_side (C++ func- 347
tion),346 lv_obj_set_style_line_rounded (C++ func-
lv_obj_set_style_border_width (C++ func- tion),347
tion),346 lv_obj_set_style_line_width (C++ function),
lv_obj_set_style_clip_corner (C++ func- 347
tion),348 lv_obj_set_style_max_height (C++ function),
lv_obj_set_style_color_filter_dsc (C++ 345
function),348 lv_obj_set_style_max_width (C++ function),
lv_obj_set_style_color_filter_opa (C++ 345
function),348 lv_obj_set_style_min_height (C++ function),
lv_obj_set_style_flex_cross_place (C++ 345
function),801 lv_obj_set_style_min_width (C++ function),
lv_obj_set_style_flex_flow (C++ function), 345
801 lv_obj_set_style_opa(C++function),348
lv_obj_set_style_flex_grow (C++ function), lv_obj_set_style_opa_layered (C++ func-
801 tion),348
lv_obj_set_style_flex_main_place (C++ lv_obj_set_style_outline_color(C++func-
function),801 tion),346
lv_obj_set_style_flex_track_place (C++ lv_obj_set_style_outline_opa (C++ func-
function),801 tion),347
lv_obj_set_style_grid_cell_column_pos lv_obj_set_style_outline_pad (C++ func-
(C++function),816 tion),347
lv_obj_set_style_grid_cell_column_span lv_obj_set_style_outline_width(C++func-
(C++function),816 tion),346
lv_obj_set_style_grid_cell_row_pos(C++ lv_obj_set_style_pad_bottom (C++ function),
function),816 346
lv_obj_set_style_grid_cell_row_span lv_obj_set_style_pad_column (C++ function),
(C++function),816 346
lv_obj_set_style_grid_cell_x_align(C++ lv_obj_set_style_pad_left (C++ function),
function),816 346
lv_obj_set_style_grid_cell_y_align(C++ lv_obj_set_style_pad_right (C++ function),
function),816 346
lv_obj_set_style_grid_column_align(C++ lv_obj_set_style_pad_row(C++function),346
function),816 lv_obj_set_style_pad_top(C++function),346
lv_obj_set_style_grid_column_dsc_array lv_obj_set_style_radius(C++function),348
(C++function),815 lv_obj_set_style_shadow_color (C++ func-
lv_obj_set_style_grid_row_align (C++ tion),347
function),815 lv_obj_set_style_shadow_ofs_x (C++ func-
lv_obj_set_style_grid_row_dsc_array tion),347
(C++function),815 lv_obj_set_style_shadow_ofs_y (C++ func-
lv_obj_set_style_height(C++function),345 tion),347
Index 982


--- Page 987 ---


LVGLDocumentation8.3
lv_obj_set_style_shadow_opa (C++ function), merator),409
347 lv_palette_t::LV_PALETTE_BLUE_GREY(C++
lv_obj_set_style_shadow_spread(C++func- enumerator),409
tion),347 lv_palette_t::LV_PALETTE_BROWN (C++ enu-
lv_obj_set_style_shadow_width (C++ func- merator),409
tion),347 lv_palette_t::LV_PALETTE_CYAN (C++ enu-
lv_obj_set_style_text_align (C++ function), merator),409
348 lv_palette_t::LV_PALETTE_DEEP_ORANGE
lv_obj_set_style_text_color (C++ function), (C++enumerator),409
347 lv_palette_t::LV_PALETTE_DEEP_PURPLE
lv_obj_set_style_text_decor (C++ function), (C++enumerator),409
348 lv_palette_t::LV_PALETTE_GREEN (C++ enu-
lv_obj_set_style_text_font (C++ function), merator),409
347 lv_palette_t::LV_PALETTE_GREY (C++ enu-
lv_obj_set_style_text_letter_space(C++ merator),409
function),347 lv_palette_t::LV_PALETTE_INDIGO (C++
lv_obj_set_style_text_line_space (C++ enumerator),409
function),347 lv_palette_t::LV_PALETTE_LIGHT_BLUE
lv_obj_set_style_text_opa (C++ function), (C++enumerator),409
347 lv_palette_t::LV_PALETTE_LIGHT_GREEN
lv_obj_set_style_transform_angle (C++ (C++enumerator),409
function),345 lv_palette_t::LV_PALETTE_LIME (C++ enu-
lv_obj_set_style_transform_height (C++ merator),409
function),345 lv_palette_t::LV_PALETTE_NONE (C++ enu-
lv_obj_set_style_transform_pivot_x(C++ merator),409
function),345 lv_palette_t::LV_PALETTE_ORANGE (C++
lv_obj_set_style_transform_pivot_y(C++ enumerator),409
function),345 lv_palette_t::LV_PALETTE_PINK (C++ enu-
lv_obj_set_style_transform_width (C++ merator),409
function),345 lv_palette_t::LV_PALETTE_PURPLE (C++
lv_obj_set_style_transform_zoom (C++ enumerator),409
function),345 lv_palette_t::LV_PALETTE_RED (C++ enumer-
lv_obj_set_style_transition (C++ function), ator),408
348 lv_palette_t::LV_PALETTE_TEAL (C++ enu-
lv_obj_set_style_translate_x (C++ func- merator),409
tion),345 lv_palette_t::LV_PALETTE_YELLOW (C++
lv_obj_set_style_translate_y (C++ func- enumerator),409
tion),345 lv_part_t(C++type),481
lv_obj_set_style_width(C++function),345 lv_pinyin_dict_t(C++struct),888
lv_obj_set_style_x(C++function),345 lv_pinyin_dict_t::py(C++member),888
lv_obj_set_style_y(C++function),345 lv_pinyin_dict_t::py_mb(C++member),888
lv_obj_set_tile(C++function),784 lv_png_init(C++function),824
lv_obj_set_tile_id(C++function),784 lv_qrcode_class(C++member),834
lv_obj_set_user_data(C++function),486 lv_qrcode_create(C++function),833
lv_obj_t(C++type),481 lv_qrcode_delete(C++function),834
lv_palette_darken(C++function),411 lv_qrcode_update(C++function),833
lv_palette_lighten(C++function),411 lv_rlottie_class(C++member),838
lv_palette_main(C++function),411 lv_rlottie_create_from_file (C++ function),
lv_palette_t(C++enum),408 838
lv_palette_t::_LV_PALETTE_LAST (C++ enu- lv_rlottie_create_from_raw (C++ function),
merator),409 838
lv_palette_t::LV_PALETTE_AMBER (C++ enu- lv_rlottie_ctrl_t(C++enum),837
merator),409 lv_rlottie_ctrl_t::LV_RLOTTIE_CTRL_BACKWARD
lv_palette_t::LV_PALETTE_BLUE (C++ enu- (C++enumerator),837
Index 983


--- Page 988 ---


LVGLDocumentation8.3
lv_rlottie_ctrl_t::LV_RLOTTIE_CTRL_FORWAlRvD_scr_load_anim_t::LV_SCR_LOAD_ANIM_FADE_IN
(C++enumerator),837 (C++enumerator),401
lv_rlottie_ctrl_t::LV_RLOTTIE_CTRL_LOOP lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_FADE_ON
(C++enumerator),838 (C++enumerator),401
lv_rlottie_ctrl_t::LV_RLOTTIE_CTRL_PAUSElv_scr_load_anim_t::LV_SCR_LOAD_ANIM_FADE_OUT
(C++enumerator),837 (C++enumerator),401
lv_rlottie_ctrl_t::LV_RLOTTIE_CTRL_PLAY lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_MOVE_BOTTOM
(C++enumerator),837 (C++enumerator),401
lv_rlottie_set_current_frame (C++ func- lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_MOVE_LEFT
tion),838 (C++enumerator),401
lv_rlottie_set_play_mode(C++function),838 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_MOVE_RIGHT
lv_rlottie_t(C++struct),838 (C++enumerator),401
lv_rlottie_t::allocated_buf (C++ member), lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_MOVE_TOP
838 (C++enumerator),401
lv_rlottie_t::allocated_buffer_size lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_NONE
(C++member),838 (C++enumerator),401
lv_rlottie_t::animation(C++member),838 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OUT_BOTTOM
lv_rlottie_t::current_frame (C++ member), (C++enumerator),401
838 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OUT_LEFT
lv_rlottie_t::dest_frame(C++member),839 (C++enumerator),401
lv_rlottie_t::framerate(C++member),838 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OUT_RIGHT
lv_rlottie_t::img_ext(C++member),838 (C++enumerator),401
lv_rlottie_t::imgdsc(C++member),838 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OUT_TOP
lv_rlottie_t::play_ctrl(C++member),838 (C++enumerator),401
lv_rlottie_t::scanline_width (C++ mem- lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OVER_BOTTOM
ber),838 (C++enumerator),401
lv_rlottie_t::task(C++member),838 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OVER_LEFT
lv_rlottie_t::total_frames (C++ member), (C++enumerator),401
838 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OVER_RIGHT
lv_roller_class(C++member),599 (C++enumerator),401
lv_roller_create(C++function),598 lv_scr_load_anim_t::LV_SCR_LOAD_ANIM_OVER_TOP
lv_roller_get_option_cnt(C++function),599 (C++enumerator),401
lv_roller_get_options(C++function),598 lv_slider_class(C++member),609
lv_roller_get_selected(C++function),598 lv_slider_create(C++function),607
lv_roller_get_selected_str (C++ function), lv_slider_draw_part_type_t(C++enum),607
598 lv_slider_draw_part_type_t::LV_SLIDER_DRAW_PART_KNOB
lv_roller_mode_t(C++type),597 (C++enumerator),607
lv_roller_set_options(C++function),598 lv_slider_draw_part_type_t::LV_SLIDER_DRAW_PART_KNOB_LEFT
lv_roller_set_selected(C++function),598 (C++enumerator),607
lv_roller_set_visible_row_count (C++ lv_slider_get_left_value(C++function),608
function),598 lv_slider_get_max_value(C++function),608
lv_roller_t(C++struct),599 lv_slider_get_min_value(C++function),608
lv_roller_t::mode(C++member),599 lv_slider_get_mode(C++function),608
lv_roller_t::moved(C++member),599 lv_slider_get_value(C++function),608
lv_roller_t::obj(C++member),599 lv_slider_is_dragged(C++function),608
lv_roller_t::option_cnt(C++member),599 lv_slider_mode_t(C++type),606
lv_roller_t::sel_opt_id(C++member),599 lv_slider_set_left_value(C++function),607
lv_roller_t::sel_opt_id_ori (C++ member), lv_slider_set_mode(C++function),608
599 lv_slider_set_range(C++function),607
lv_scr_act(C++function),404 lv_slider_set_value(C++function),607
lv_scr_load(C++function),404 lv_slider_t(C++struct),609
lv_scr_load_anim(C++function),403 lv_slider_t::bar(C++member),609
lv_scr_load_anim_t(C++enum),401 lv_slider_t::dragging(C++member),609
lv_slider_t::left_knob_area (C++ member),
Index 984


--- Page 989 ---


LVGLDocumentation8.3
609 lv_spangroup_t::obj(C++member),769
lv_slider_t::left_knob_focus (C++ mem- lv_spangroup_t::overflow(C++member),769
ber),609 lv_spangroup_t::refresh(C++member),769
lv_slider_t::right_knob_area (C++ mem- lv_spinbox_class(C++member),774
ber),609 lv_spinbox_create(C++function),772
lv_slider_t::value_to_set (C++ member), lv_spinbox_decrement(C++function),773
609 lv_spinbox_get_rollover(C++function),773
lv_snapshot_buf_size_needed (C++ function), lv_spinbox_get_step(C++function),773
847 lv_spinbox_get_value(C++function),773
lv_snapshot_free(C++function),846 lv_spinbox_increment(C++function),773
lv_snapshot_take(C++function),846 lv_spinbox_set_cursor_pos (C++ function),
lv_snapshot_take_to_buf(C++function),847 773
lv_span_mode_t(C++type),765 lv_spinbox_set_digit_format (C++ function),
lv_span_overflow_t(C++type),765 772
lv_span_set_text(C++function),766 lv_spinbox_set_digit_step_direction
lv_span_set_text_static(C++function),766 (C++function),773
lv_span_t(C++struct),768 lv_spinbox_set_range(C++function),772
lv_span_t::spangroup(C++member),768 lv_spinbox_set_rollover(C++function),772
lv_span_t::static_flag(C++member),768 lv_spinbox_set_step(C++function),772
lv_span_t::style(C++member),768 lv_spinbox_set_value(C++function),772
lv_span_t::txt(C++member),768 lv_spinbox_step_next(C++function),773
lv_spangroup_class(C++member),768 lv_spinbox_step_prev(C++function),773
lv_spangroup_create(C++function),765 lv_spinbox_t(C++struct),774
lv_spangroup_del_span(C++function),766 lv_spinbox_t::dec_point_pos (C++ member),
lv_spangroup_get_align(C++function),767 774
lv_spangroup_get_child(C++function),767 lv_spinbox_t::digit_count (C++ member),
lv_spangroup_get_child_cnt (C++ function), 774
767 lv_spinbox_t::digit_step_dir (C++ mem-
lv_spangroup_get_expand_height(C++func- ber),774
tion),768 lv_spinbox_t::range_max(C++member),774
lv_spangroup_get_expand_width (C++ func- lv_spinbox_t::range_min(C++member),774
tion),768 lv_spinbox_t::rollover(C++member),774
lv_spangroup_get_indent(C++function),767 lv_spinbox_t::step(C++member),774
lv_spangroup_get_lines(C++function),767 lv_spinbox_t::ta(C++member),774
lv_spangroup_get_max_line_h (C++ function), lv_spinbox_t::value(C++member),774
767 lv_spinner_class(C++member),776
lv_spangroup_get_mode(C++function),767 lv_spinner_create(C++function),776
lv_spangroup_get_overflow (C++ function), lv_split_jpeg_init(C++function),823
767 lv_state_t(C++type),481
lv_spangroup_new_span(C++function),765 lv_style_const_prop_t(C++struct),339
lv_spangroup_refr_mode(C++function),768 lv_style_const_prop_t::prop (C++ member),
lv_spangroup_set_align(C++function),766 339
lv_spangroup_set_indent(C++function),766 lv_style_const_prop_t::value (C++ mem-
lv_spangroup_set_lines(C++function),767 ber),339
lv_spangroup_set_mode(C++function),766 LV_STYLE_FLEX_CROSS_PLACE (C++ member),
lv_spangroup_set_overflow (C++ function), 801
766 LV_STYLE_FLEX_FLOW(C++member),801
lv_spangroup_t(C++struct),768 LV_STYLE_FLEX_GROW(C++member),801
lv_spangroup_t::cache_h(C++member),769 LV_STYLE_FLEX_MAIN_PLACE(C++member),801
lv_spangroup_t::cache_w(C++member),769 LV_STYLE_FLEX_TRACK_PLACE (C++ member),
lv_spangroup_t::child_ll(C++member),769 801
lv_spangroup_t::indent(C++member),769 lv_style_get_num_custom_props (C++ func-
lv_spangroup_t::lines(C++member),769 tion),335
lv_spangroup_t::mode(C++member),769 lv_style_get_prop(C++function),336
Index 985


--- Page 990 ---


LVGLDocumentation8.3
lv_style_get_prop_inlined (C++ function), enumerator),331
336 lv_style_prop_t::LV_STYLE_BG_DITHER_MODE
LV_STYLE_GRID_CELL_COLUMN_POS (C++ mem- (C++enumerator),332
ber),816 lv_style_prop_t::LV_STYLE_BG_GRAD (C++
LV_STYLE_GRID_CELL_COLUMN_SPAN(C++mem- enumerator),332
ber),817 lv_style_prop_t::LV_STYLE_BG_GRAD_COLOR
LV_STYLE_GRID_CELL_ROW_POS (C++ member), (C++enumerator),331
817 lv_style_prop_t::LV_STYLE_BG_GRAD_DIR
LV_STYLE_GRID_CELL_ROW_SPAN (C++ member), (C++enumerator),331
817 lv_style_prop_t::LV_STYLE_BG_GRAD_STOP
LV_STYLE_GRID_CELL_X_ALIGN (C++ member), (C++enumerator),332
817 lv_style_prop_t::LV_STYLE_BG_IMG_OPA
LV_STYLE_GRID_CELL_Y_ALIGN (C++ member), (C++enumerator),332
817 lv_style_prop_t::LV_STYLE_BG_IMG_RECOLOR
LV_STYLE_GRID_COLUMN_ALIGN (C++ member), (C++enumerator),332
816 lv_style_prop_t::LV_STYLE_BG_IMG_RECOLOR_OPA
LV_STYLE_GRID_COLUMN_DSC_ARRAY(C++mem- (C++enumerator),332
ber),816 lv_style_prop_t::LV_STYLE_BG_IMG_SRC
LV_STYLE_GRID_ROW_ALIGN(C++member),816 (C++enumerator),332
LV_STYLE_GRID_ROW_DSC_ARRAY (C++ member), lv_style_prop_t::LV_STYLE_BG_IMG_TILED
816 (C++enumerator),332
lv_style_init(C++function),335 lv_style_prop_t::LV_STYLE_BG_MAIN_STOP
lv_style_is_empty(C++function),337 (C++enumerator),331
lv_style_prop_get_default (C++ function), lv_style_prop_t::LV_STYLE_BG_OPA (C++
336 enumerator),331
lv_style_prop_has_flag(C++function),337 lv_style_prop_t::LV_STYLE_BLEND_MODE
lv_style_prop_t(C++enum),330 (C++enumerator),334
lv_style_prop_t::_LV_STYLE_LAST_BUILT_INl_vP_RsOtPyle_prop_t::LV_STYLE_BORDER_COLOR
(C++enumerator),334 (C++enumerator),332
lv_style_prop_t::_LV_STYLE_NUM_BUILT_IN_lPvR_OsPtSyle_prop_t::LV_STYLE_BORDER_OPA
(C++enumerator),334 (C++enumerator),332
lv_style_prop_t::_LV_STYLE_PROP_CONST lv_style_prop_t::LV_STYLE_BORDER_POST
(C++enumerator),335 (C++enumerator),332
lv_style_prop_t::LV_STYLE_ALIGN (C++ lv_style_prop_t::LV_STYLE_BORDER_SIDE
enumerator),331 (C++enumerator),332
lv_style_prop_t::LV_STYLE_ANIM (C++ enu- lv_style_prop_t::LV_STYLE_BORDER_WIDTH
merator),334 (C++enumerator),332
lv_style_prop_t::LV_STYLE_ANIM_SPEED lv_style_prop_t::LV_STYLE_CLIP_CORNER
(C++enumerator),334 (C++enumerator),331
lv_style_prop_t::LV_STYLE_ANIM_TIME lv_style_prop_t::LV_STYLE_COLOR_FILTER_DSC
(C++enumerator),334 (C++enumerator),334
lv_style_prop_t::LV_STYLE_ARC_COLOR lv_style_prop_t::LV_STYLE_COLOR_FILTER_OPA
(C++enumerator),333 (C++enumerator),334
lv_style_prop_t::LV_STYLE_ARC_IMG_SRC lv_style_prop_t::LV_STYLE_HEIGHT (C++
(C++enumerator),333 enumerator),331
lv_style_prop_t::LV_STYLE_ARC_OPA (C++ lv_style_prop_t::LV_STYLE_IMG_OPA (C++
enumerator),333 enumerator),333
lv_style_prop_t::LV_STYLE_ARC_ROUNDED lv_style_prop_t::LV_STYLE_IMG_RECOLOR
(C++enumerator),333 (C++enumerator),333
lv_style_prop_t::LV_STYLE_ARC_WIDTH lv_style_prop_t::LV_STYLE_IMG_RECOLOR_OPA
(C++enumerator),333 (C++enumerator),333
lv_style_prop_t::LV_STYLE_BASE_DIR(C++ lv_style_prop_t::LV_STYLE_LAYOUT (C++
enumerator),331 enumerator),331
lv_style_prop_t::LV_STYLE_BG_COLOR(C++ lv_style_prop_t::LV_STYLE_LINE_COLOR
Index 986


--- Page 991 ---


LVGLDocumentation8.3
(C++enumerator),333 (C++enumerator),332
lv_style_prop_t::LV_STYLE_LINE_DASH_GAP lv_style_prop_t::LV_STYLE_SHADOW_OPA
(C++enumerator),333 (C++enumerator),333
lv_style_prop_t::LV_STYLE_LINE_DASH_WIDTlHv_style_prop_t::LV_STYLE_SHADOW_SPREAD
(C++enumerator),333 (C++enumerator),332
lv_style_prop_t::LV_STYLE_LINE_OPA(C++ lv_style_prop_t::LV_STYLE_SHADOW_WIDTH
enumerator),333 (C++enumerator),332
lv_style_prop_t::LV_STYLE_LINE_ROUNDED lv_style_prop_t::LV_STYLE_TEXT_ALIGN
(C++enumerator),333 (C++enumerator),334
lv_style_prop_t::LV_STYLE_LINE_WIDTH lv_style_prop_t::LV_STYLE_TEXT_COLOR
(C++enumerator),333 (C++enumerator),333
lv_style_prop_t::LV_STYLE_MAX_HEIGHT lv_style_prop_t::LV_STYLE_TEXT_DECOR
(C++enumerator),331 (C++enumerator),334
lv_style_prop_t::LV_STYLE_MAX_WIDTH lv_style_prop_t::LV_STYLE_TEXT_FONT
(C++enumerator),330 (C++enumerator),333
lv_style_prop_t::LV_STYLE_MIN_HEIGHT lv_style_prop_t::LV_STYLE_TEXT_LETTER_SPACE
(C++enumerator),331 (C++enumerator),333
lv_style_prop_t::LV_STYLE_MIN_WIDTH lv_style_prop_t::LV_STYLE_TEXT_LINE_SPACE
(C++enumerator),330 (C++enumerator),333
lv_style_prop_t::LV_STYLE_OPA (C++ enu- lv_style_prop_t::LV_STYLE_TEXT_OPA(C++
merator),334 enumerator),333
lv_style_prop_t::LV_STYLE_OPA_LAYERED lv_style_prop_t::LV_STYLE_TRANSFORM_ANGLE
(C++enumerator),334 (C++enumerator),334
lv_style_prop_t::LV_STYLE_OUTLINE_COLOR lv_style_prop_t::LV_STYLE_TRANSFORM_HEIGHT
(C++enumerator),332 (C++enumerator),334
lv_style_prop_t::LV_STYLE_OUTLINE_OPA lv_style_prop_t::LV_STYLE_TRANSFORM_PIVOT_X
(C++enumerator),332 (C++enumerator),334
lv_style_prop_t::LV_STYLE_OUTLINE_PAD lv_style_prop_t::LV_STYLE_TRANSFORM_PIVOT_Y
(C++enumerator),332 (C++enumerator),334
lv_style_prop_t::LV_STYLE_OUTLINE_WIDTH lv_style_prop_t::LV_STYLE_TRANSFORM_WIDTH
(C++enumerator),332 (C++enumerator),334
lv_style_prop_t::LV_STYLE_PAD_BOTTOM lv_style_prop_t::LV_STYLE_TRANSFORM_ZOOM
(C++enumerator),331 (C++enumerator),334
lv_style_prop_t::LV_STYLE_PAD_COLUMN lv_style_prop_t::LV_STYLE_TRANSITION
(C++enumerator),331 (C++enumerator),334
lv_style_prop_t::LV_STYLE_PAD_LEFT(C++ lv_style_prop_t::LV_STYLE_TRANSLATE_X
enumerator),331 (C++enumerator),334
lv_style_prop_t::LV_STYLE_PAD_RIGHT lv_style_prop_t::LV_STYLE_TRANSLATE_Y
(C++enumerator),331 (C++enumerator),334
lv_style_prop_t::LV_STYLE_PAD_ROW (C++ lv_style_prop_t::LV_STYLE_WIDTH (C++
enumerator),331 enumerator),330
lv_style_prop_t::LV_STYLE_PAD_TOP (C++ lv_style_prop_t::LV_STYLE_X (C++ enumera-
enumerator),331 tor),331
lv_style_prop_t::LV_STYLE_PROP_ANY(C++ lv_style_prop_t::LV_STYLE_Y (C++ enumera-
enumerator),335 tor),331
lv_style_prop_t::LV_STYLE_PROP_INV(C++ lv_style_register_prop(C++function),335
enumerator),330 lv_style_remove_prop(C++function),335
lv_style_prop_t::LV_STYLE_RADIUS (C++ lv_style_res_t(C++type),328
enumerator),331 lv_style_reset(C++function),335
lv_style_prop_t::LV_STYLE_SHADOW_COLOR lv_style_set_align(C++function),348
(C++enumerator),333 lv_style_set_anim(C++function),351
lv_style_prop_t::LV_STYLE_SHADOW_OFS_X lv_style_set_anim_speed(C++function),351
(C++enumerator),332 lv_style_set_anim_time(C++function),351
lv_style_prop_t::LV_STYLE_SHADOW_OFS_Y lv_style_set_arc_color(C++function),350
Index 987


--- Page 992 ---


LVGLDocumentation8.3
lv_style_set_arc_img_src(C++function),350 lv_style_set_grid_cell_x_align(C++func-
lv_style_set_arc_opa(C++function),350 tion),815
lv_style_set_arc_rounded(C++function),350 lv_style_set_grid_cell_y_align(C++func-
lv_style_set_arc_width(C++function),350 tion),815
lv_style_set_base_dir(C++function),351 lv_style_set_grid_column_align(C++func-
lv_style_set_bg_color(C++function),349 tion),815
lv_style_set_bg_dither_mode (C++ function), lv_style_set_grid_column_dsc_array(C++
349 function),815
lv_style_set_bg_grad(C++function),349 lv_style_set_grid_row_align (C++ function),
lv_style_set_bg_grad_color (C++ function), 815
349 lv_style_set_grid_row_dsc_array (C++
lv_style_set_bg_grad_dir(C++function),349 function),815
lv_style_set_bg_grad_stop (C++ function), lv_style_set_height(C++function),348
349 lv_style_set_img_opa(C++function),350
lv_style_set_bg_img_opa(C++function),349 lv_style_set_img_recolor(C++function),350
lv_style_set_bg_img_recolor (C++ function), lv_style_set_img_recolor_opa (C++ func-
349 tion),350
lv_style_set_bg_img_recolor_opa (C++ lv_style_set_layout(C++function),351
function),349 lv_style_set_line_color(C++function),350
lv_style_set_bg_img_src(C++function),349 lv_style_set_line_dash_gap (C++ function),
lv_style_set_bg_img_tiled (C++ function), 350
349 lv_style_set_line_dash_width (C++ func-
lv_style_set_bg_main_stop (C++ function), tion),350
349 lv_style_set_line_opa(C++function),350
lv_style_set_bg_opa(C++function),349 lv_style_set_line_rounded (C++ function),
lv_style_set_blend_mode(C++function),351 350
lv_style_set_border_color (C++ function), lv_style_set_line_width(C++function),350
349 lv_style_set_max_height(C++function),348
lv_style_set_border_opa(C++function),349 lv_style_set_max_width(C++function),348
lv_style_set_border_post(C++function),350 lv_style_set_min_height(C++function),348
lv_style_set_border_side(C++function),349 lv_style_set_min_width(C++function),348
lv_style_set_border_width (C++ function), lv_style_set_opa(C++function),351
349 lv_style_set_opa_layered(C++function),351
lv_style_set_clip_corner(C++function),351 lv_style_set_outline_color (C++ function),
lv_style_set_color_filter_dsc (C++ func- 350
tion),351 lv_style_set_outline_opa(C++function),350
lv_style_set_color_filter_opa (C++ func- lv_style_set_outline_pad(C++function),350
tion),351 lv_style_set_outline_width (C++ function),
lv_style_set_flex_cross_place (C++ func- 350
tion),800 lv_style_set_pad_all(C++function),337
lv_style_set_flex_flow(C++function),800 lv_style_set_pad_bottom(C++function),349
lv_style_set_flex_grow(C++function),801 lv_style_set_pad_column(C++function),349
lv_style_set_flex_main_place (C++ func- lv_style_set_pad_gap(C++function),337
tion),800 lv_style_set_pad_hor(C++function),337
lv_style_set_flex_track_place (C++ func- lv_style_set_pad_left(C++function),349
tion),801 lv_style_set_pad_right(C++function),349
lv_style_set_grid_cell_column_pos (C++ lv_style_set_pad_row(C++function),349
function),815 lv_style_set_pad_top(C++function),349
lv_style_set_grid_cell_column_span(C++ lv_style_set_pad_ver(C++function),337
function),815 lv_style_set_prop(C++function),335
lv_style_set_grid_cell_row_pos(C++func- lv_style_set_prop_meta(C++function),336
tion),815 lv_style_set_radius(C++function),351
lv_style_set_grid_cell_row_span (C++ lv_style_set_shadow_color (C++ function),
function),815 350
Index 988


--- Page 993 ---


LVGLDocumentation8.3
lv_style_set_shadow_ofs_x (C++ function), lv_style_transition_dsc_t::props (C++
350 member),339
lv_style_set_shadow_ofs_y (C++ function), lv_style_transition_dsc_t::time (C++
350 member),339
lv_style_set_shadow_opa(C++function),350 lv_style_transition_dsc_t::user_data
lv_style_set_shadow_spread (C++ function), (C++member),339
350 lv_style_value_t(C++union),338
lv_style_set_shadow_width (C++ function), lv_style_value_t::color(C++member),338
350 lv_style_value_t::num(C++member),338
lv_style_set_size(C++function),337 lv_style_value_t::ptr(C++member),338
lv_style_set_text_align(C++function),351 lv_switch_class(C++member),612
lv_style_set_text_color(C++function),350 lv_switch_create(C++function),612
lv_style_set_text_decor(C++function),350 lv_switch_t(C++struct),612
lv_style_set_text_font(C++function),350 lv_switch_t::anim_state(C++member),612
lv_style_set_text_letter_space(C++func- lv_switch_t::obj(C++member),612
tion),350 lv_table_add_cell_ctrl(C++function),622
lv_style_set_text_line_space (C++ func- lv_table_cell_ctrl_t(C++type),620
tion),350 lv_table_cell_t(C++struct),624
lv_style_set_text_opa(C++function),350 lv_table_cell_t::ctrl(C++member),624
lv_style_set_transform_angle (C++ func- lv_table_cell_t::txt(C++member),624
tion),349 lv_table_cell_t::user_data (C++ member),
lv_style_set_transform_height (C++ func- 624
tion),349 lv_table_class(C++member),624
lv_style_set_transform_pivot_x(C++func- lv_table_clear_cell_ctrl(C++function),622
tion),349 lv_table_create(C++function),621
lv_style_set_transform_pivot_y(C++func- lv_table_draw_part_type_t(C++enum),620
tion),349 lv_table_draw_part_type_t::LV_TABLE_DRAW_PART_CELL
lv_style_set_transform_width (C++ func- (C++enumerator),621
tion),349 lv_table_get_cell_user_data (C++ function),
lv_style_set_transform_zoom (C++ function), 623
349 lv_table_get_cell_value(C++function),623
lv_style_set_transition(C++function),351 lv_table_get_col_cnt(C++function),623
lv_style_set_translate_x(C++function),349 lv_table_get_col_width(C++function),623
lv_style_set_translate_y(C++function),349 lv_table_get_row_cnt(C++function),623
lv_style_set_width(C++function),348 lv_table_get_selected_cell (C++ function),
lv_style_set_x(C++function),348 623
lv_style_set_y(C++function),348 lv_table_has_cell_ctrl(C++function),623
lv_style_t(C++struct),339 lv_table_set_cell_user_data (C++ function),
lv_style_t::const_props(C++member),339 622
lv_style_t::has_group(C++member),339 lv_table_set_cell_value(C++function),621
lv_style_t::prop1(C++member),339 lv_table_set_cell_value_fmt (C++ function),
lv_style_t::prop_cnt(C++member),340 621
lv_style_t::sentinel(C++member),339 lv_table_set_col_cnt(C++function),622
lv_style_t::v_p(C++member),339 lv_table_set_col_width(C++function),622
lv_style_t::value1(C++member),339 lv_table_set_row_cnt(C++function),621
lv_style_t::values_and_props (C++ mem- lv_table_t(C++struct),624
ber),339 lv_table_t::cell_data(C++member),624
lv_style_transition_dsc_init (C++ func- lv_table_t::col_act(C++member),624
tion),336 lv_table_t::col_cnt(C++member),624
lv_style_transition_dsc_t(C++struct),338 lv_table_t::col_w(C++member),624
lv_style_transition_dsc_t::delay (C++ lv_table_t::obj(C++member),624
member),339 lv_table_t::row_act(C++member),624
lv_style_transition_dsc_t::path_xcb lv_table_t::row_cnt(C++member),624
(C++member),339 lv_table_t::row_h(C++member),624
Index 989


--- Page 994 ---


LVGLDocumentation8.3
lv_tabview_add_tab(C++function),780 lv_textarea_set_cursor_pos (C++ function),
lv_tabview_class(C++member),781 634
lv_tabview_create(C++function),780 lv_textarea_set_insert_replace(C++func-
lv_tabview_get_content(C++function),780 tion),635
lv_tabview_get_tab_act(C++function),780 lv_textarea_set_max_length (C++ function),
lv_tabview_get_tab_btns(C++function),780 635
lv_tabview_rename_tab(C++function),780 lv_textarea_set_one_line(C++function),634
lv_tabview_set_act(C++function),780 lv_textarea_set_password_bullet (C++
lv_tabview_t(C++struct),781 function),634
lv_tabview_t::map(C++member),781 lv_textarea_set_password_mode (C++ func-
lv_tabview_t::obj(C++member),781 tion),634
lv_tabview_t::tab_cnt(C++member),781 lv_textarea_set_password_show_time(C++
lv_tabview_t::tab_cur(C++member),781 function),635
lv_tabview_t::tab_pos(C++member),781 lv_textarea_set_placeholder_text (C++
lv_text_decor_t(C++type),328 function),634
lv_textarea_add_char(C++function),633 lv_textarea_set_text(C++function),634
lv_textarea_add_text(C++function),633 lv_textarea_set_text_selection(C++func-
lv_textarea_class(C++member),638 tion),635
lv_textarea_clear_selection (C++ function), lv_textarea_t(C++struct),638
637 lv_textarea_t::accepted_chars (C++ mem-
lv_textarea_create(C++function),633 ber),638
lv_textarea_cursor_down(C++function),637 lv_textarea_t::area(C++member),638
lv_textarea_cursor_left(C++function),637 lv_textarea_t::click_pos(C++member),638
lv_textarea_cursor_right(C++function),637 lv_textarea_t::cursor(C++member),638
lv_textarea_cursor_up(C++function),637 lv_textarea_t::label(C++member),638
lv_textarea_del_char(C++function),633 lv_textarea_t::max_length (C++ member),
lv_textarea_del_char_forward (C++ func- 638
tion),634 lv_textarea_t::obj(C++member),638
lv_textarea_get_accepted_chars(C++func- lv_textarea_t::one_line(C++member),639
tion),636 lv_textarea_t::placeholder_txt(C++mem-
lv_textarea_get_cursor_click_pos (C++ ber),638
function),636 lv_textarea_t::pos(C++member),638
lv_textarea_get_cursor_pos (C++ function), lv_textarea_t::pwd_bullet (C++ member),
636 638
lv_textarea_get_label(C++function),636 lv_textarea_t::pwd_mode(C++member),639
lv_textarea_get_max_length (C++ function), lv_textarea_t::pwd_show_time (C++ mem-
636 ber),638
lv_textarea_get_one_line(C++function),636 lv_textarea_t::pwd_tmp(C++member),638
lv_textarea_get_password_bullet (C++ lv_textarea_t::sel_end(C++member),638
function),636 lv_textarea_t::sel_start(C++member),638
lv_textarea_get_password_mode (C++ func- lv_textarea_t::show(C++member),638
tion),636 lv_textarea_t::text_sel_en (C++ member),
lv_textarea_get_password_show_time(C++ 639
function),637 lv_textarea_t::text_sel_in_prog (C++
lv_textarea_get_placeholder_text (C++ member),638
function),636 lv_textarea_t::txt_byte_pos (C++ member),
lv_textarea_get_text(C++function),636 638
lv_textarea_get_text_selection(C++func- lv_textarea_t::valid_x(C++member),638
tion),637 lv_textarea_text_is_selected (C++ func-
lv_textarea_set_accepted_chars(C++func- tion),637
tion),635 lv_theme_apply(C++function),340
lv_textarea_set_align(C++function),635 lv_theme_apply_cb_t(C++type),340
lv_textarea_set_cursor_click_pos (C++ lv_theme_get_color_primary (C++ function),
function),634 341
Index 990


--- Page 995 ---


LVGLDocumentation8.3
lv_theme_get_color_secondary (C++ func-
tion),341
lv_theme_get_font_large(C++function),340
lv_theme_get_font_normal(C++function),340
lv_theme_get_font_small(C++function),340
lv_theme_get_from_obj(C++function),340
lv_theme_set_apply_cb(C++function),340
lv_theme_set_parent(C++function),340
lv_theme_t(C++type),340
lv_tick_elaps(C++function),279
lv_tick_get(C++function),279
lv_tileview_add_tile(C++function),784
lv_tileview_class(C++member),784
lv_tileview_create(C++function),784
lv_tileview_get_tile_act(C++function),784
lv_tileview_t(C++struct),784
lv_tileview_t::obj(C++member),784
lv_tileview_t::tile_act(C++member),784
lv_tileview_tile_class(C++member),784
lv_tileview_tile_t(C++struct),784
lv_tileview_tile_t::dir(C++member),784
lv_tileview_tile_t::obj(C++member),784
lv_timer_cb_t(C++type),463
lv_timer_create(C++function),464
lv_timer_create_basic(C++function),464
lv_timer_del(C++function),464
lv_timer_enable(C++function),465
lv_timer_get_idle(C++function),465
lv_timer_get_next(C++function),465
lv_timer_pause(C++function),464
lv_timer_ready(C++function),464
lv_timer_reset(C++function),465
lv_timer_resume(C++function),464
lv_timer_set_cb(C++function),464
lv_timer_set_period(C++function),464
lv_timer_set_repeat_count (C++ function),
464
lv_timer_t(C++type),463
lv_tiny_ttf_create_data(C++function),831
lv_tiny_ttf_create_data_ex (C++ function),
831
lv_tiny_ttf_create_file(C++function),831
lv_tiny_ttf_create_file_ex (C++ function),
831
lv_tiny_ttf_destroy(C++function),831
lv_tiny_ttf_set_size(C++function),831
lv_win_add_btn(C++function),787
lv_win_add_title(C++function),787
lv_win_class(C++member),788
lv_win_create(C++function),787
lv_win_get_content(C++function),787
lv_win_get_header(C++function),787
lv_win_t(C++struct),788
lv_win_t::obj(C++member),788
Index 991